// @bun
var uz1=Object.create;var{getPrototypeOf:fz1,defineProperty:Mq,getOwnPropertyNames:xz1}=Object;var bz1=Object.prototype.hasOwnProperty;var E5=(F,A,$)=>{$=F!=null?uz1(fz1(F)):{};let B=A||!F||!F.__esModule?Mq($,"default",{value:F,enumerable:!0}):$;for(let J of xz1(F))if(!bz1.call(B,J))Mq(B,J,{get:()=>F[J],enumerable:!0});return B};var Q=(F,A)=>()=>(A||F((A={exports:{}}).exports,A),A.exports);var L5=(F,A)=>{for(var $ in A)Mq(F,$,{get:A[$],enumerable:!0,configurable:!0,set:(B)=>A[$]=()=>B})};var x=import.meta.require;var x4=Q((fQ1)=>{var lq1=(()=>{let F=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return(A)=>F.call(A)})();function VA(F){return lq1(F)==="Uint8Array"}function AI(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&(F[Symbol.toStringTag]==="ArrayBuffer"||F[Symbol.toStringTag]==="SharedArrayBuffer")}function EA(F){return F instanceof RegExp||Object.prototype.toString.call(F)==="[object RegExp]"}function $I(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Map"}function LA(F){return F instanceof Date||Object.prototype.toString.call(F)==="[object Date]"}function r3(F,A){return JSON.stringify(F,($,B)=>{if(typeof B==="bigint")return{$numberLong:`${B}`};else if($I(B))return Object.fromEntries(B);return B})}function pq1(F){if(F!=null&&typeof F==="object"&&"stylize"in F&&typeof F.stylize==="function")return F.stylize}var O5=6,CA=Symbol.for("@@mdb.bson.version"),mJ=2147483647,dJ=-2147483648,Zg=Math.pow(2,63)-1,Ug=-Math.pow(2,63),zg=Math.pow(2,53),Wg=-Math.pow(2,53),BI=1,Hg=2,JI=3,Kg=4,XI=5,iq1=6,qg=7,Qg=8,Vg=9,YI=10,oZ=11,aq1=12,DI=13,Eg=14,Lg=15,yJ=16,wg=17,GI=18,Ig=19,Cg=255,Ng=127,nq1=0,ZI=4,Pg=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class c extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(F,A){super(F,A)}static isBSONError(F){return F!=null&&typeof F==="object"&&"bsonError"in F&&F.bsonError===!0&&"name"in F&&"message"in F&&"stack"in F}}class X8 extends c{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${O5}.x.x`)}}class vJ extends c{get name(){return"BSONRuntimeError"}constructor(F){super(F)}}class s9 extends c{get name(){return"BSONOffsetError"}constructor(F,A,$){super(`${F}. offset: ${A}`,$);this.offset=A}}var nb,rb;function Rg(F,A,$,B){if(B){nb??=new TextDecoder("utf8",{fatal:!0});try{return nb.decode(F.subarray(A,$))}catch(J){throw new c("Invalid UTF-8 string in BSON document",{cause:J})}}return rb??=new TextDecoder("utf8",{fatal:!1}),rb.decode(F.subarray(A,$))}function jg(F,A,$){if(F.length===0)return"";let B=$-A;if(B===0)return"";if(B>20)return null;if(B===1&&F[A]<128)return String.fromCharCode(F[A]);if(B===2&&F[A]<128&&F[A+1]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1]);if(B===3&&F[A]<128&&F[A+1]<128&&F[A+2]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1])+String.fromCharCode(F[A+2]);let J=[];for(let X=A;X<$;X++){let Y=F[X];if(Y>127)return null;J.push(Y)}return String.fromCharCode(...J)}function rq1(F,A,$){if(A.length===0)return 0;if(A.length>25)return null;if(F.length-$<A.length)return null;for(let B=0,J=$;B<A.length;B++,J++){let X=A.charCodeAt(B);if(X>127)return null;F[J]=X}return A.length}function tq1(F){return Z7.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))}var sq1=(()=>{try{return x("crypto").randomBytes}catch{return tq1}})(),Z7={toLocalBufferType(F){if(Buffer.isBuffer(F))return F;if(ArrayBuffer.isView(F))return Buffer.from(F.buffer,F.byteOffset,F.byteLength);let A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return Buffer.from(F);throw new c("Cannot create Buffer from the passed potentialBuffer.")},allocate(F){return Buffer.alloc(F)},allocateUnsafe(F){return Buffer.allocUnsafe(F)},equals(F,A){return Z7.toLocalBufferType(F).equals(A)},fromNumberArray(F){return Buffer.from(F)},fromBase64(F){return Buffer.from(F,"base64")},toBase64(F){return Z7.toLocalBufferType(F).toString("base64")},fromISO88591(F){return Buffer.from(F,"binary")},toISO88591(F){return Z7.toLocalBufferType(F).toString("binary")},fromHex(F){return Buffer.from(F,"hex")},toHex(F){return Z7.toLocalBufferType(F).toString("hex")},toUTF8(F,A,$,B){let J=$-A<=20?jg(F,A,$):null;if(J!=null)return J;let X=Z7.toLocalBufferType(F).toString("utf8",A,$);if(B){for(let Y=0;Y<X.length;Y++)if(X.charCodeAt(Y)===65533){Rg(F,A,$,!0);break}}return X},utf8ByteLength(F){return Buffer.byteLength(F,"utf8")},encodeUTF8Into(F,A,$){let B=rq1(F,A,$);if(B!=null)return B;return Z7.toLocalBufferType(F).write(A,$,void 0,"utf8")},randomBytes:sq1,swap32(F){return Z7.toLocalBufferType(F).swap32()}};function oq1(){let{navigator:F}=globalThis;return typeof F==="object"&&F.product==="ReactNative"}function eq1(F){if(F<0)throw RangeError(`The argument 'byteLength' is invalid. Received ${F}`);return hJ.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))}var FQ1=(()=>{let{crypto:F}=globalThis;if(F!=null&&typeof F.getRandomValues==="function")return(A)=>{return F.getRandomValues(hJ.allocate(A))};else{if(oq1()){let{console:A}=globalThis;A?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return eq1}})(),tb=/(\d|[a-f])/i,hJ={toLocalBufferType(F){let A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="Uint8Array")return F;if(ArrayBuffer.isView(F))return new Uint8Array(F.buffer.slice(F.byteOffset,F.byteOffset+F.byteLength));if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return new Uint8Array(F);throw new c("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(F){if(typeof F!=="number")throw TypeError(`The "size" argument must be of type number. Received ${String(F)}`);return new Uint8Array(F)},allocateUnsafe(F){return hJ.allocate(F)},equals(F,A){if(F.byteLength!==A.byteLength)return!1;for(let $=0;$<F.byteLength;$++)if(F[$]!==A[$])return!1;return!0},fromNumberArray(F){return Uint8Array.from(F)},fromBase64(F){return Uint8Array.from(atob(F),(A)=>A.charCodeAt(0))},toBase64(F){return btoa(hJ.toISO88591(F))},fromISO88591(F){return Uint8Array.from(F,(A)=>A.charCodeAt(0)&255)},toISO88591(F){return Array.from(Uint16Array.from(F),(A)=>String.fromCharCode(A)).join("")},fromHex(F){let A=F.length%2===0?F:F.slice(0,F.length-1),$=[];for(let B=0;B<A.length;B+=2){let J=A[B],X=A[B+1];if(!tb.test(J))break;if(!tb.test(X))break;let Y=Number.parseInt(`${J}${X}`,16);$.push(Y)}return Uint8Array.from($)},toHex(F){return Array.from(F,(A)=>A.toString(16).padStart(2,"0")).join("")},toUTF8(F,A,$,B){let J=$-A<=20?jg(F,A,$):null;if(J!=null)return J;return Rg(F,A,$,B)},utf8ByteLength(F){return new TextEncoder().encode(F).byteLength},encodeUTF8Into(F,A,$){let B=new TextEncoder().encode(A);return F.set(B,$),B.byteLength},randomBytes:FQ1,swap32(F){if(F.length%4!==0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<F.length;A+=4){let $=F[A],B=F[A+1],J=F[A+2],X=F[A+3];F[A]=X,F[A+1]=J,F[A+2]=B,F[A+3]=$}return F}},AQ1=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,h=AQ1?Z7:hJ;class B3{get[CA](){return O5}[Symbol.for("nodejs.util.inspect.custom")](F,A,$){return this.inspect(F,A,$)}}var wA=new Float64Array(1),U0=new Uint8Array(wA.buffer,0,8);wA[0]=-1;var Ow=U0[7]===0,I1={isBigEndian:Ow,getNonnegativeInt32LE(F,A){if(F[A+3]>127)throw RangeError(`Size cannot be negative at offset: ${A}`);return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getInt32LE(F,A){return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getUint32LE(F,A){return F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216},getUint32BE(F,A){return F[A+3]+F[A+2]*256+F[A+1]*65536+F[A]*16777216},getBigInt64LE(F,A){let $=BigInt(F[A+4]+F[A+5]*256+F[A+6]*65536+(F[A+7]<<24)),B=BigInt(F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216);return($<<BigInt(32))+B},getFloat64LE:Ow?(F,A)=>{return U0[7]=F[A],U0[6]=F[A+1],U0[5]=F[A+2],U0[4]=F[A+3],U0[3]=F[A+4],U0[2]=F[A+5],U0[1]=F[A+6],U0[0]=F[A+7],wA[0]}:(F,A)=>{return U0[0]=F[A],U0[1]=F[A+1],U0[2]=F[A+2],U0[3]=F[A+3],U0[4]=F[A+4],U0[5]=F[A+5],U0[6]=F[A+6],U0[7]=F[A+7],wA[0]},setInt32BE(F,A,$){return F[A+3]=$,$>>>=8,F[A+2]=$,$>>>=8,F[A+1]=$,$>>>=8,F[A]=$,4},setInt32LE(F,A,$){return F[A]=$,$>>>=8,F[A+1]=$,$>>>=8,F[A+2]=$,$>>>=8,F[A+3]=$,4},setBigInt64LE(F,A,$){let B=BigInt(4294967295),J=Number($&B);F[A]=J,J>>=8,F[A+1]=J,J>>=8,F[A+2]=J,J>>=8,F[A+3]=J;let X=Number($>>BigInt(32)&B);return F[A+4]=X,X>>=8,F[A+5]=X,X>>=8,F[A+6]=X,X>>=8,F[A+7]=X,8},setFloat64LE:Ow?(F,A,$)=>{return wA[0]=$,F[A]=U0[7],F[A+1]=U0[6],F[A+2]=U0[5],F[A+3]=U0[4],F[A+4]=U0[3],F[A+5]=U0[2],F[A+6]=U0[1],F[A+7]=U0[0],8}:(F,A,$)=>{return wA[0]=$,F[A]=U0[0],F[A+1]=U0[1],F[A+2]=U0[2],F[A+3]=U0[3],F[A+4]=U0[4],F[A+5]=U0[5],F[A+6]=U0[6],F[A+7]=U0[7],8}};class Q1 extends B3{get _bsontype(){return"Binary"}constructor(F,A){super();if(F!=null&&typeof F==="string"&&!ArrayBuffer.isView(F)&&!AI(F)&&!Array.isArray(F))throw new c("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=A??Q1.BSON_BINARY_SUBTYPE_DEFAULT,F==null)this.buffer=h.allocate(Q1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(F)?h.fromNumberArray(F):h.toLocalBufferType(F),this.position=this.buffer.byteLength}put(F){if(typeof F==="string"&&F.length!==1)throw new c("only accepts single character String");else if(typeof F!=="number"&&F.length!==1)throw new c("only accepts single character Uint8Array or Array");let A;if(typeof F==="string")A=F.charCodeAt(0);else if(typeof F==="number")A=F;else A=F[0];if(A<0||A>255)throw new c("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=A;else{let $=h.allocate(Q1.BUFFER_SIZE+this.buffer.length);$.set(this.buffer,0),this.buffer=$,this.buffer[this.position++]=A}}write(F,A){if(A=typeof A==="number"?A:this.position,this.buffer.byteLength<A+F.length){let $=h.allocate(this.buffer.byteLength+F.length);$.set(this.buffer,0),this.buffer=$}if(ArrayBuffer.isView(F))this.buffer.set(h.toLocalBufferType(F),A),this.position=A+F.byteLength>this.position?A+F.length:this.position;else if(typeof F==="string")throw new c("input cannot be string")}read(F,A){A=A&&A>0?A:this.position;let $=F+A;return this.buffer.subarray(F,$>this.position?this.position:$)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return h.toBase64(this.buffer.subarray(0,this.position))}toString(F){if(F==="hex")return h.toHex(this.buffer.subarray(0,this.position));if(F==="base64")return h.toBase64(this.buffer.subarray(0,this.position));if(F==="utf8"||F==="utf-8")return h.toUTF8(this.buffer,0,this.position,!1);return h.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(F){if(F=F||{},this.sub_type===Q1.SUBTYPE_VECTOR)G7(this);let A=h.toBase64(this.buffer),$=Number(this.sub_type).toString(16);if(F.legacy)return{$binary:A,$type:$.length===1?"0"+$:$};return{$binary:{base64:A,subType:$.length===1?"0"+$:$}}}toUUID(){if(this.sub_type===Q1.SUBTYPE_UUID)return new U4(this.buffer.subarray(0,this.position));throw new c(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${Q1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(F,A){return new Q1(h.fromHex(F),A)}static createFromBase64(F,A){return new Q1(h.fromBase64(F),A)}static fromExtendedJSON(F,A){A=A||{};let $,B;if("$binary"in F){if(A.legacy&&typeof F.$binary==="string"&&"$type"in F)B=F.$type?parseInt(F.$type,16):0,$=h.fromBase64(F.$binary);else if(typeof F.$binary!=="string")B=F.$binary.subType?parseInt(F.$binary.subType,16):0,$=h.fromBase64(F.$binary.base64)}else if("$uuid"in F)B=4,$=U4.bytesFromString(F.$uuid);if(!$)throw new c(`Unexpected Binary Extended JSON format ${JSON.stringify(F)}`);return B===ZI?new U4($):new Q1($,B)}inspect(F,A,$){$??=r3;let B=h.toBase64(this.buffer.subarray(0,this.position)),J=$(B,A),X=$(this.sub_type,A);return`Binary.createFromBase64(${J}, ${X})`}toInt8Array(){if(this.sub_type!==Q1.SUBTYPE_VECTOR)throw new c("Binary sub_type is not Vector");if(this.buffer[0]!==Q1.VECTOR_TYPE.Int8)throw new c("Binary datatype field is not Int8");return G7(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==Q1.SUBTYPE_VECTOR)throw new c("Binary sub_type is not Vector");if(this.buffer[0]!==Q1.VECTOR_TYPE.Float32)throw new c("Binary datatype field is not Float32");G7(this);let F=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));if(I1.isBigEndian)h.swap32(F);return new Float32Array(F.buffer)}toPackedBits(){if(this.sub_type!==Q1.SUBTYPE_VECTOR)throw new c("Binary sub_type is not Vector");if(this.buffer[0]!==Q1.VECTOR_TYPE.PackedBit)throw new c("Binary datatype field is not packed bit");return G7(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==Q1.SUBTYPE_VECTOR)throw new c("Binary sub_type is not Vector");if(this.buffer[0]!==Q1.VECTOR_TYPE.PackedBit)throw new c("Binary datatype field is not packed bit");G7(this);let A=(this.length()-2)*8-this.buffer[1],$=new Int8Array(A);for(let B=0;B<$.length;B++){let J=B/8|0,X=this.buffer[J+2],Y=7-B%8,D=X>>Y&1;$[B]=D}return $}static fromInt8Array(F){let A=h.allocate(F.byteLength+2);A[0]=Q1.VECTOR_TYPE.Int8,A[1]=0;let $=new Uint8Array(F.buffer,F.byteOffset,F.byteLength);A.set($,2);let B=new this(A,this.SUBTYPE_VECTOR);return G7(B),B}static fromFloat32Array(F){let A=h.allocate(F.byteLength+2);A[0]=Q1.VECTOR_TYPE.Float32,A[1]=0;let $=new Uint8Array(F.buffer,F.byteOffset,F.byteLength);if(A.set($,2),I1.isBigEndian)h.swap32(new Uint8Array(A.buffer,2));let B=new this(A,this.SUBTYPE_VECTOR);return G7(B),B}static fromPackedBits(F,A=0){let $=h.allocate(F.byteLength+2);$[0]=Q1.VECTOR_TYPE.PackedBit,$[1]=A,$.set(F,2);let B=new this($,this.SUBTYPE_VECTOR);return G7(B),B}static fromBits(F){let A=F.length+7>>>3,$=new Uint8Array(A+2);$[0]=Q1.VECTOR_TYPE.PackedBit;let B=F.length%8;$[1]=B===0?0:8-B;for(let J=0;J<F.length;J++){let X=J>>>3,Y=F[J];if(Y!==0&&Y!==1)throw new c(`Invalid bit value at ${J}: must be 0 or 1, found ${F[J]}`);if(Y===0)continue;let D=7-J%8;$[X+2]|=Y<<D}return new this($,Q1.SUBTYPE_VECTOR)}}Q1.BSON_BINARY_SUBTYPE_DEFAULT=0;Q1.BUFFER_SIZE=256;Q1.SUBTYPE_DEFAULT=0;Q1.SUBTYPE_FUNCTION=1;Q1.SUBTYPE_BYTE_ARRAY=2;Q1.SUBTYPE_UUID_OLD=3;Q1.SUBTYPE_UUID=4;Q1.SUBTYPE_MD5=5;Q1.SUBTYPE_ENCRYPTED=6;Q1.SUBTYPE_COLUMN=7;Q1.SUBTYPE_SENSITIVE=8;Q1.SUBTYPE_VECTOR=9;Q1.SUBTYPE_USER_DEFINED=128;Q1.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function G7(F){if(F.sub_type!==Q1.SUBTYPE_VECTOR)return;let A=F.position,$=F.buffer[0],B=F.buffer[1];if(($===Q1.VECTOR_TYPE.Float32||$===Q1.VECTOR_TYPE.Int8)&&B!==0)throw new c("Invalid Vector: padding must be zero for int8 and float32 vectors");if($===Q1.VECTOR_TYPE.Float32){if(A!==0&&A-2!==0&&(A-2)%4!==0)throw new c("Invalid Vector: Float32 vector must contain a multiple of 4 bytes")}if($===Q1.VECTOR_TYPE.PackedBit&&B!==0&&A===2)throw new c("Invalid Vector: padding must be zero for packed bit vectors that are empty");if($===Q1.VECTOR_TYPE.PackedBit&&B>7)throw new c(`Invalid Vector: padding must be a value between 0 and 7. found: ${B}`)}var Sw=16,$Q1=/^[0-9A-F]{32}$/i,BQ1=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class U4 extends Q1{constructor(F){let A;if(F==null)A=U4.generate();else if(F instanceof U4)A=h.toLocalBufferType(new Uint8Array(F.buffer));else if(ArrayBuffer.isView(F)&&F.byteLength===Sw)A=h.toLocalBufferType(F);else if(typeof F==="string")A=U4.bytesFromString(F);else throw new c("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(A,ZI)}get id(){return this.buffer}set id(F){this.buffer=F}toHexString(F=!0){if(F)return[h.toHex(this.buffer.subarray(0,4)),h.toHex(this.buffer.subarray(4,6)),h.toHex(this.buffer.subarray(6,8)),h.toHex(this.buffer.subarray(8,10)),h.toHex(this.buffer.subarray(10,16))].join("-");return h.toHex(this.buffer)}toString(F){if(F==="hex")return h.toHex(this.id);if(F==="base64")return h.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(F){if(!F)return!1;if(F instanceof U4)return h.equals(F.id,this.id);try{return h.equals(new U4(F).id,this.id)}catch{return!1}}toBinary(){return new Q1(this.id,Q1.SUBTYPE_UUID)}static generate(){let F=h.randomBytes(Sw);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}static isValid(F){if(!F)return!1;if(typeof F==="string")return U4.isValidUUIDString(F);if(VA(F))return F.byteLength===Sw;return F._bsontype==="Binary"&&F.sub_type===this.SUBTYPE_UUID&&F.buffer.byteLength===16}static createFromHexString(F){let A=U4.bytesFromString(F);return new U4(A)}static createFromBase64(F){return new U4(h.fromBase64(F))}static bytesFromString(F){if(!U4.isValidUUIDString(F))throw new c("UUID string representation must be 32 hex digits or canonical hyphenated representation");return h.fromHex(F.replace(/-/g,""))}static isValidUUIDString(F){return $Q1.test(F)||BQ1.test(F)}inspect(F,A,$){return $??=r3,`new UUID(${$(this.toHexString(),A)})`}}class z7 extends B3{get _bsontype(){return"Code"}constructor(F,A){super();this.code=F.toString(),this.scope=A??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(F){return new z7(F.$code,F.$scope)}inspect(F,A,$){$??=r3;let B=$(this.code,A),J=B.includes(`
`);if(this.scope!=null)B+=`,${J?`
`:" "}${$(this.scope,A)}`;let X=J&&this.scope===null;return`new Code(${J?`
`:""}${B}${X?`
`:""})`}}function Mg(F){return F!=null&&typeof F==="object"&&"$id"in F&&F.$id!=null&&"$ref"in F&&typeof F.$ref==="string"&&(!("$db"in F)||("$db"in F)&&typeof F.$db==="string")}class g2 extends B3{get _bsontype(){return"DBRef"}constructor(F,A,$,B){super();let J=F.split(".");if(J.length===2)$=J.shift(),F=J.shift();this.collection=F,this.oid=A,this.db=$,this.fields=B||{}}get namespace(){return this.collection}set namespace(F){this.collection=F}toJSON(){let F=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)F.$db=this.db;return F}toExtendedJSON(F){F=F||{};let A={$ref:this.collection,$id:this.oid};if(F.legacy)return A;if(this.db)A.$db=this.db;return A=Object.assign(A,this.fields),A}static fromExtendedJSON(F){let A=Object.assign({},F);return delete A.$ref,delete A.$id,delete A.$db,new g2(F.$ref,F.$id,F.$db,A)}inspect(F,A,$){$??=r3;let B=[$(this.namespace,A),$(this.oid,A),...this.db?[$(this.db,A)]:[],...Object.keys(this.fields).length>0?[$(this.fields,A)]:[]];return B[1]=$===r3?`new ObjectId(${B[1]})`:B[1],`new DBRef(${B.join(", ")})`}}function Tg(F){if(F==="")return F;let A=0,$=F[A]==="-",B=F[A]==="+";if(B||$)A+=1;let J=!1;for(;A<F.length&&F[A]==="0";++A)J=!0;if(!J)return B?F.slice(1):F;return`${$?"-":""}${F.length===A?"0":F.slice(A)}`}function JQ1(F,A){A=A??10;let $="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,A);return new RegExp(`[^-+${$}]`,"i").test(F)?!1:F}var N9=void 0;try{N9=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var sb=65536,XQ1=16777216,IA=sb*sb,kg=IA*IA,YQ1=kg/2,ob={},eb={},DQ1=20,GQ1=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class j extends B3{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(F=0,A,$){super();let B=typeof A==="boolean"?A:Boolean($),J=typeof A==="number"?A:0,X=typeof F==="string"?j.fromString(F,B):typeof F==="bigint"?j.fromBigInt(F,B):{low:F|0,high:J|0,unsigned:B};this.low=X.low,this.high=X.high,this.unsigned=X.unsigned}static fromBits(F,A,$){return new j(F,A,$)}static fromInt(F,A){let $,B,J;if(A){if(F>>>=0,J=0<=F&&F<256){if(B=eb[F],B)return B}if($=j.fromBits(F,(F|0)<0?-1:0,!0),J)eb[F]=$;return $}else{if(F|=0,J=-128<=F&&F<128){if(B=ob[F],B)return B}if($=j.fromBits(F,F<0?-1:0,!1),J)ob[F]=$;return $}}static fromNumber(F,A){if(isNaN(F))return A?j.UZERO:j.ZERO;if(A){if(F<0)return j.UZERO;if(F>=kg)return j.MAX_UNSIGNED_VALUE}else{if(F<=-9223372036854776000)return j.MIN_VALUE;if(F+1>=YQ1)return j.MAX_VALUE}if(F<0)return j.fromNumber(-F,A).neg();return j.fromBits(F%IA|0,F/IA|0,A)}static fromBigInt(F,A){let $=BigInt(4294967295),B=BigInt(32);return new j(Number(F&$),Number(F>>B&$),A)}static _fromString(F,A,$){if(F.length===0)throw new c("empty string");if($<2||36<$)throw new c("radix");let B;if((B=F.indexOf("-"))>0)throw new c("interior hyphen");else if(B===0)return j._fromString(F.substring(1),A,$).neg();let J=j.fromNumber(Math.pow($,8)),X=j.ZERO;for(let Y=0;Y<F.length;Y+=8){let D=Math.min(8,F.length-Y),G=parseInt(F.substring(Y,Y+D),$);if(D<8){let Z=j.fromNumber(Math.pow($,D));X=X.mul(Z).add(j.fromNumber(G))}else X=X.mul(J),X=X.add(j.fromNumber(G))}return X.unsigned=A,X}static fromStringStrict(F,A,$){let B=!1;if(typeof A==="number")$=A,A=!1;else B=!!A;if($??=10,F.trim()!==F)throw new c(`Input: '${F}' contains leading and/or trailing whitespace`);if(!JQ1(F,$))throw new c(`Input: '${F}' contains invalid characters for radix: ${$}`);let J=Tg(F),X=j._fromString(J,B,$);if(X.toString($).toLowerCase()!==J.toLowerCase())throw new c(`Input: ${F} is not representable as ${X.unsigned?"an unsigned":"a signed"} 64-bit Long ${$!=null?`with radix: ${$}`:""}`);return X}static fromString(F,A,$){let B=!1;if(typeof A==="number")$=A,A=!1;else B=!!A;if($??=10,F==="NaN"&&$<24)return j.ZERO;else if((F==="Infinity"||F==="+Infinity"||F==="-Infinity")&&$<35)return j.ZERO;return j._fromString(F,B,$)}static fromBytes(F,A,$){return $?j.fromBytesLE(F,A):j.fromBytesBE(F,A)}static fromBytesLE(F,A){return new j(F[0]|F[1]<<8|F[2]<<16|F[3]<<24,F[4]|F[5]<<8|F[6]<<16|F[7]<<24,A)}static fromBytesBE(F,A){return new j(F[4]<<24|F[5]<<16|F[6]<<8|F[7],F[0]<<24|F[1]<<16|F[2]<<8|F[3],A)}static isLong(F){return F!=null&&typeof F==="object"&&"__isLong__"in F&&F.__isLong__===!0}static fromValue(F,A){if(typeof F==="number")return j.fromNumber(F,A);if(typeof F==="string")return j.fromString(F,A);return j.fromBits(F.low,F.high,typeof A==="boolean"?A:F.unsigned)}add(F){if(!j.isLong(F))F=j.fromValue(F);let A=this.high>>>16,$=this.high&65535,B=this.low>>>16,J=this.low&65535,X=F.high>>>16,Y=F.high&65535,D=F.low>>>16,G=F.low&65535,Z=0,U=0,z=0,W=0;return W+=J+G,z+=W>>>16,W&=65535,z+=B+D,U+=z>>>16,z&=65535,U+=$+Y,Z+=U>>>16,U&=65535,Z+=A+X,Z&=65535,j.fromBits(z<<16|W,Z<<16|U,this.unsigned)}and(F){if(!j.isLong(F))F=j.fromValue(F);return j.fromBits(this.low&F.low,this.high&F.high,this.unsigned)}compare(F){if(!j.isLong(F))F=j.fromValue(F);if(this.eq(F))return 0;let A=this.isNegative(),$=F.isNegative();if(A&&!$)return-1;if(!A&&$)return 1;if(!this.unsigned)return this.sub(F).isNegative()?-1:1;return F.high>>>0>this.high>>>0||F.high===this.high&&F.low>>>0>this.low>>>0?-1:1}comp(F){return this.compare(F)}divide(F){if(!j.isLong(F))F=j.fromValue(F);if(F.isZero())throw new c("division by zero");if(N9){if(!this.unsigned&&this.high===-2147483648&&F.low===-1&&F.high===-1)return this;let J=(this.unsigned?N9.div_u:N9.div_s)(this.low,this.high,F.low,F.high);return j.fromBits(J,N9.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?j.UZERO:j.ZERO;let A,$,B;if(!this.unsigned){if(this.eq(j.MIN_VALUE))if(F.eq(j.ONE)||F.eq(j.NEG_ONE))return j.MIN_VALUE;else if(F.eq(j.MIN_VALUE))return j.ONE;else if(A=this.shr(1).div(F).shl(1),A.eq(j.ZERO))return F.isNegative()?j.ONE:j.NEG_ONE;else return $=this.sub(F.mul(A)),B=A.add($.div(F)),B;else if(F.eq(j.MIN_VALUE))return this.unsigned?j.UZERO:j.ZERO;if(this.isNegative()){if(F.isNegative())return this.neg().div(F.neg());return this.neg().div(F).neg()}else if(F.isNegative())return this.div(F.neg()).neg();B=j.ZERO}else{if(!F.unsigned)F=F.toUnsigned();if(F.gt(this))return j.UZERO;if(F.gt(this.shru(1)))return j.UONE;B=j.UZERO}$=this;while($.gte(F)){A=Math.max(1,Math.floor($.toNumber()/F.toNumber()));let J=Math.ceil(Math.log(A)/Math.LN2),X=J<=48?1:Math.pow(2,J-48),Y=j.fromNumber(A),D=Y.mul(F);while(D.isNegative()||D.gt($))A-=X,Y=j.fromNumber(A,this.unsigned),D=Y.mul(F);if(Y.isZero())Y=j.ONE;B=B.add(Y),$=$.sub(D)}return B}div(F){return this.divide(F)}equals(F){if(!j.isLong(F))F=j.fromValue(F);if(this.unsigned!==F.unsigned&&this.high>>>31===1&&F.high>>>31===1)return!1;return this.high===F.high&&this.low===F.low}eq(F){return this.equals(F)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(j.MIN_VALUE)?64:this.neg().getNumBitsAbs();let F=this.high!==0?this.high:this.low,A;for(A=31;A>0;A--)if((F&1<<A)!==0)break;return this.high!==0?A+33:A+1}greaterThan(F){return this.comp(F)>0}gt(F){return this.greaterThan(F)}greaterThanOrEqual(F){return this.comp(F)>=0}gte(F){return this.greaterThanOrEqual(F)}ge(F){return this.greaterThanOrEqual(F)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(F){return this.comp(F)<0}lt(F){return this.lessThan(F)}lessThanOrEqual(F){return this.comp(F)<=0}lte(F){return this.lessThanOrEqual(F)}modulo(F){if(!j.isLong(F))F=j.fromValue(F);if(N9){let A=(this.unsigned?N9.rem_u:N9.rem_s)(this.low,this.high,F.low,F.high);return j.fromBits(A,N9.get_high(),this.unsigned)}return this.sub(this.div(F).mul(F))}mod(F){return this.modulo(F)}rem(F){return this.modulo(F)}multiply(F){if(this.isZero())return j.ZERO;if(!j.isLong(F))F=j.fromValue(F);if(N9){let H=N9.mul(this.low,this.high,F.low,F.high);return j.fromBits(H,N9.get_high(),this.unsigned)}if(F.isZero())return j.ZERO;if(this.eq(j.MIN_VALUE))return F.isOdd()?j.MIN_VALUE:j.ZERO;if(F.eq(j.MIN_VALUE))return this.isOdd()?j.MIN_VALUE:j.ZERO;if(this.isNegative())if(F.isNegative())return this.neg().mul(F.neg());else return this.neg().mul(F).neg();else if(F.isNegative())return this.mul(F.neg()).neg();if(this.lt(j.TWO_PWR_24)&&F.lt(j.TWO_PWR_24))return j.fromNumber(this.toNumber()*F.toNumber(),this.unsigned);let A=this.high>>>16,$=this.high&65535,B=this.low>>>16,J=this.low&65535,X=F.high>>>16,Y=F.high&65535,D=F.low>>>16,G=F.low&65535,Z=0,U=0,z=0,W=0;return W+=J*G,z+=W>>>16,W&=65535,z+=B*G,U+=z>>>16,z&=65535,z+=J*D,U+=z>>>16,z&=65535,U+=$*G,Z+=U>>>16,U&=65535,U+=B*D,Z+=U>>>16,U&=65535,U+=J*Y,Z+=U>>>16,U&=65535,Z+=A*G+$*D+B*Y+J*X,Z&=65535,j.fromBits(z<<16|W,Z<<16|U,this.unsigned)}mul(F){return this.multiply(F)}negate(){if(!this.unsigned&&this.eq(j.MIN_VALUE))return j.MIN_VALUE;return this.not().add(j.ONE)}neg(){return this.negate()}not(){return j.fromBits(~this.low,~this.high,this.unsigned)}notEquals(F){return!this.equals(F)}neq(F){return this.notEquals(F)}ne(F){return this.notEquals(F)}or(F){if(!j.isLong(F))F=j.fromValue(F);return j.fromBits(this.low|F.low,this.high|F.high,this.unsigned)}shiftLeft(F){if(j.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return j.fromBits(this.low<<F,this.high<<F|this.low>>>32-F,this.unsigned);else return j.fromBits(0,this.low<<F-32,this.unsigned)}shl(F){return this.shiftLeft(F)}shiftRight(F){if(j.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return j.fromBits(this.low>>>F|this.high<<32-F,this.high>>F,this.unsigned);else return j.fromBits(this.high>>F-32,this.high>=0?0:-1,this.unsigned)}shr(F){return this.shiftRight(F)}shiftRightUnsigned(F){if(j.isLong(F))F=F.toInt();if(F&=63,F===0)return this;else{let A=this.high;if(F<32){let $=this.low;return j.fromBits($>>>F|A<<32-F,A>>>F,this.unsigned)}else if(F===32)return j.fromBits(A,0,this.unsigned);else return j.fromBits(A>>>F-32,0,this.unsigned)}}shr_u(F){return this.shiftRightUnsigned(F)}shru(F){return this.shiftRightUnsigned(F)}subtract(F){if(!j.isLong(F))F=j.fromValue(F);return this.add(F.neg())}sub(F){return this.subtract(F)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*IA+(this.low>>>0);return this.high*IA+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(F){return F?this.toBytesLE():this.toBytesBE()}toBytesLE(){let F=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,F&255,F>>>8&255,F>>>16&255,F>>>24]}toBytesBE(){let F=this.high,A=this.low;return[F>>>24,F>>>16&255,F>>>8&255,F&255,A>>>24,A>>>16&255,A>>>8&255,A&255]}toSigned(){if(!this.unsigned)return this;return j.fromBits(this.low,this.high,!1)}toString(F){if(F=F||10,F<2||36<F)throw new c("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(j.MIN_VALUE)){let J=j.fromNumber(F),X=this.div(J),Y=X.mul(J).sub(this);return X.toString(F)+Y.toInt().toString(F)}else return"-"+this.neg().toString(F);let A=j.fromNumber(Math.pow(F,6),this.unsigned),$=this,B="";while(!0){let J=$.div(A),Y=($.sub(J.mul(A)).toInt()>>>0).toString(F);if($=J,$.isZero())return Y+B;else{while(Y.length<6)Y="0"+Y;B=""+Y+B}}}toUnsigned(){if(this.unsigned)return this;return j.fromBits(this.low,this.high,!0)}xor(F){if(!j.isLong(F))F=j.fromValue(F);return j.fromBits(this.low^F.low,this.high^F.high,this.unsigned)}eqz(){return this.isZero()}le(F){return this.lessThanOrEqual(F)}toExtendedJSON(F){if(F&&F.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(F,A){let{useBigInt64:$=!1,relaxed:B=!0}={...A};if(F.$numberLong.length>DQ1)throw new c("$numberLong string is too long");if(!GQ1.test(F.$numberLong))throw new c(`$numberLong string "${F.$numberLong}" is in an invalid format`);if($){let X=BigInt(F.$numberLong);return BigInt.asIntN(64,X)}let J=j.fromString(F.$numberLong);if(B)return J.toNumber();return J}inspect(F,A,$){$??=r3;let B=$(this.toString(),A),J=this.unsigned?`, ${$(this.unsigned,A)}`:"";return`new Long(${B}${J})`}}j.TWO_PWR_24=j.fromInt(XQ1);j.MAX_UNSIGNED_VALUE=j.fromBits(-1,-1,!0);j.ZERO=j.fromInt(0);j.UZERO=j.fromInt(0,!0);j.ONE=j.fromInt(1);j.UONE=j.fromInt(1,!0);j.NEG_ONE=j.fromInt(-1);j.MAX_VALUE=j.fromBits(-1,2147483647,!1);j.MIN_VALUE=j.fromBits(0,-2147483648,!1);var ZQ1=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,UQ1=/^(\+|-)?(Infinity|inf)$/i,zQ1=/^(\+|-)?NaN$/i,qA=6111,gJ=-6176,Fg=6176,Ag=34,uw=h.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),$g=h.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Bg=h.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),WQ1=/^([-+])?(\d+)?$/,HQ1=31,Jg=16383,KQ1=30,qQ1=31;function Xg(F){return!isNaN(parseInt(F,10))}function QQ1(F){let A=j.fromNumber(1e9),$=j.fromNumber(0);if(!F.parts[0]&&!F.parts[1]&&!F.parts[2]&&!F.parts[3])return{quotient:F,rem:$};for(let B=0;B<=3;B++)$=$.shiftLeft(32),$=$.add(new j(F.parts[B],0)),F.parts[B]=$.div(A).low,$=$.modulo(A);return{quotient:F,rem:$}}function VQ1(F,A){if(!F&&!A)return{high:j.fromNumber(0),low:j.fromNumber(0)};let $=F.shiftRightUnsigned(32),B=new j(F.getLowBits(),0),J=A.shiftRightUnsigned(32),X=new j(A.getLowBits(),0),Y=$.multiply(J),D=$.multiply(X),G=B.multiply(J),Z=B.multiply(X);return Y=Y.add(D.shiftRightUnsigned(32)),D=new j(D.getLowBits(),0).add(G).add(Z.shiftRightUnsigned(32)),Y=Y.add(D.shiftRightUnsigned(32)),Z=D.shiftLeft(32).add(new j(Z.getLowBits(),0)),{high:Y,low:Z}}function EQ1(F,A){let $=F.high>>>0,B=A.high>>>0;if($<B)return!0;else if($===B){let J=F.low>>>0,X=A.low>>>0;if(J<X)return!0}return!1}function t9(F,A){throw new c(`"${F}" is not a valid Decimal128 string - ${A}`)}class f4 extends B3{get _bsontype(){return"Decimal128"}constructor(F){super();if(typeof F==="string")this.bytes=f4.fromString(F).bytes;else if(F instanceof Uint8Array||VA(F)){if(F.byteLength!==16)throw new c("Decimal128 must take a Buffer of 16 bytes");this.bytes=F}else throw new c("Decimal128 must take a Buffer or string")}static fromString(F){return f4._fromString(F,{allowRounding:!1})}static fromStringWithRounding(F){return f4._fromString(F,{allowRounding:!0})}static _fromString(F,A){let $=!1,B=!1,J=!1,X=!1,Y=0,D=0,G=0,Z=0,U=0,z=[0],W=0,H=0,K=0,q=0,V=new j(0,0),E=new j(0,0),L=0,w=0;if(F.length>=7000)throw new c(""+F+" not a valid Decimal128 string");let I=F.match(ZQ1),P=F.match(UQ1),M=F.match(zQ1);if(!I&&!P&&!M||F.length===0)throw new c(""+F+" not a valid Decimal128 string");if(I){let O=I[2],p=I[4],m=I[5],r=I[6];if(p&&r===void 0)t9(F,"missing exponent power");if(p&&O===void 0)t9(F,"missing exponent base");if(p===void 0&&(m||r))t9(F,"missing e before exponent")}if(F[w]==="+"||F[w]==="-")B=!0,$=F[w++]==="-";if(!Xg(F[w])&&F[w]!=="."){if(F[w]==="i"||F[w]==="I")return new f4($?$g:Bg);else if(F[w]==="N")return new f4(uw)}while(Xg(F[w])||F[w]==="."){if(F[w]==="."){if(J)t9(F,"contains multiple periods");J=!0,w=w+1;continue}if(W<Ag){if(F[w]!=="0"||X){if(!X)U=D;X=!0,z[H++]=parseInt(F[w],10),W=W+1}}if(X)G=G+1;if(J)Z=Z+1;D=D+1,w=w+1}if(J&&!D)throw new c(""+F+" not a valid Decimal128 string");if(F[w]==="e"||F[w]==="E"){let O=F.substr(++w).match(WQ1);if(!O||!O[2])return new f4(uw);q=parseInt(O[0],10),w=w+O[0].length}if(F[w])return new f4(uw);if(!W)z[0]=0,G=1,W=1,Y=0;else if(K=W-1,Y=G,Y!==1)while(F[U+Y-1+Number(B)+Number(J)]==="0")Y=Y-1;if(q<=Z&&Z>q+16384)q=gJ;else q=q-Z;while(q>qA){if(K=K+1,K>=Ag){if(Y===0){q=qA;break}t9(F,"overflow")}q=q-1}if(A.allowRounding){while(q<gJ||W<G){if(K===0&&Y<W){q=gJ,Y=0;break}if(W<G)G=G-1;else K=K-1;if(q<qA)q=q+1;else{if(z.join("").match(/^0+$/)){q=qA;break}t9(F,"overflow")}}if(K+1<Y){let O=D;if(J)U=U+1,O=O+1;if(B)U=U+1,O=O+1;let p=parseInt(F[U+K+1],10),m=0;if(p>=5){if(m=1,p===5){m=z[K]%2===1?1:0;for(let r=U+K+2;r<O;r++)if(parseInt(F[r],10)){m=1;break}}}if(m){let r=K;for(;r>=0;r--)if(++z[r]>9){if(z[r]=0,r===0)if(q<qA)q=q+1,z[r]=1;else return new f4($?$g:Bg)}else break}}}else{while(q<gJ||W<G){if(K===0){if(Y===0){q=gJ;break}t9(F,"exponent underflow")}if(W<G){if(F[G-1+Number(B)+Number(J)]!=="0"&&Y!==0)t9(F,"inexact rounding");G=G-1}else{if(z[K]!==0)t9(F,"inexact rounding");K=K-1}if(q<qA)q=q+1;else t9(F,"overflow")}if(K+1<Y){if(J)U=U+1;if(B)U=U+1;if(parseInt(F[U+K+1],10)!==0)t9(F,"inexact rounding")}}if(V=j.fromNumber(0),E=j.fromNumber(0),Y===0)V=j.fromNumber(0),E=j.fromNumber(0);else if(K<17){let O=0;E=j.fromNumber(z[O++]),V=new j(0,0);for(;O<=K;O++)E=E.multiply(j.fromNumber(10)),E=E.add(j.fromNumber(z[O]))}else{let O=0;V=j.fromNumber(z[O++]);for(;O<=K-17;O++)V=V.multiply(j.fromNumber(10)),V=V.add(j.fromNumber(z[O]));E=j.fromNumber(z[O++]);for(;O<=K;O++)E=E.multiply(j.fromNumber(10)),E=E.add(j.fromNumber(z[O]))}let u=VQ1(V,j.fromString("100000000000000000"));if(u.low=u.low.add(E),EQ1(u.low,E))u.high=u.high.add(j.fromNumber(1));L=q+Fg;let g={low:j.fromNumber(0),high:j.fromNumber(0)};if(u.high.shiftRightUnsigned(49).and(j.fromNumber(1)).equals(j.fromNumber(1)))g.high=g.high.or(j.fromNumber(3).shiftLeft(61)),g.high=g.high.or(j.fromNumber(L).and(j.fromNumber(16383).shiftLeft(47))),g.high=g.high.or(u.high.and(j.fromNumber(140737488355327)));else g.high=g.high.or(j.fromNumber(L&16383).shiftLeft(49)),g.high=g.high.or(u.high.and(j.fromNumber(562949953421311)));if(g.low=u.low,$)g.high=g.high.or(j.fromString("9223372036854775808"));let S=h.allocateUnsafe(16);return w=0,S[w++]=g.low.low&255,S[w++]=g.low.low>>8&255,S[w++]=g.low.low>>16&255,S[w++]=g.low.low>>24&255,S[w++]=g.low.high&255,S[w++]=g.low.high>>8&255,S[w++]=g.low.high>>16&255,S[w++]=g.low.high>>24&255,S[w++]=g.high.low&255,S[w++]=g.high.low>>8&255,S[w++]=g.high.low>>16&255,S[w++]=g.high.low>>24&255,S[w++]=g.high.high&255,S[w++]=g.high.high>>8&255,S[w++]=g.high.high>>16&255,S[w++]=g.high.high>>24&255,new f4(S)}toString(){let F,A=0,$=Array(36);for(let w=0;w<$.length;w++)$[w]=0;let B=0,J=!1,X,Y={parts:[0,0,0,0]},D,G,Z=[];B=0;let U=this.bytes,z=U[B++]|U[B++]<<8|U[B++]<<16|U[B++]<<24,W=U[B++]|U[B++]<<8|U[B++]<<16|U[B++]<<24,H=U[B++]|U[B++]<<8|U[B++]<<16|U[B++]<<24,K=U[B++]|U[B++]<<8|U[B++]<<16|U[B++]<<24;if(B=0,{low:new j(z,W),high:new j(H,K)}.high.lessThan(j.ZERO))Z.push("-");let V=K>>26&HQ1;if(V>>3===3)if(V===KQ1)return Z.join("")+"Infinity";else if(V===qQ1)return"NaN";else F=K>>15&Jg,X=8+(K>>14&1);else X=K>>14&7,F=K>>17&Jg;let E=F-Fg;if(Y.parts[0]=(K&16383)+((X&15)<<14),Y.parts[1]=H,Y.parts[2]=W,Y.parts[3]=z,Y.parts[0]===0&&Y.parts[1]===0&&Y.parts[2]===0&&Y.parts[3]===0)J=!0;else for(G=3;G>=0;G--){let w=0,I=QQ1(Y);if(Y=I.quotient,w=I.rem.low,!w)continue;for(D=8;D>=0;D--)$[G*9+D]=w%10,w=Math.floor(w/10)}if(J)A=1,$[B]=0;else{A=36;while(!$[B])A=A-1,B=B+1}let L=A-1+E;if(L>=34||L<=-7||E>0){if(A>34){if(Z.push("0"),E>0)Z.push(`E+${E}`);else if(E<0)Z.push(`E${E}`);return Z.join("")}if(Z.push(`${$[B++]}`),A=A-1,A)Z.push(".");for(let w=0;w<A;w++)Z.push(`${$[B++]}`);if(Z.push("E"),L>0)Z.push(`+${L}`);else Z.push(`${L}`)}else if(E>=0)for(let w=0;w<A;w++)Z.push(`${$[B++]}`);else{let w=A+E;if(w>0)for(let I=0;I<w;I++)Z.push(`${$[B++]}`);else Z.push("0");Z.push(".");while(w++<0)Z.push("0");for(let I=0;I<A-Math.max(w-1,0);I++)Z.push(`${$[B++]}`)}return Z.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(F){return f4.fromString(F.$numberDecimal)}inspect(F,A,$){return $??=r3,`new Decimal128(${$(this.toString(),A)})`}}class P9 extends B3{get _bsontype(){return"Double"}constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F}static fromString(F){let A=Number(F);if(F==="NaN")return new P9(NaN);if(F==="Infinity")return new P9(1/0);if(F==="-Infinity")return new P9(-1/0);if(!Number.isFinite(A))throw new c(`Input: ${F} is not representable as a Double`);if(F.trim()!==F)throw new c(`Input: '${F}' contains whitespace`);if(F==="")throw new c("Input is an empty string");if(/[^-0-9.+eE]/.test(F))throw new c(`Input: '${F}' is not in decimal or exponential notation`);return new P9(A)}valueOf(){return this.value}toJSON(){return this.value}toString(F){return this.value.toString(F)}toExtendedJSON(F){if(F&&(F.legacy||F.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(F,A){let $=parseFloat(F.$numberDouble);return A&&A.relaxed?$:new P9($)}inspect(F,A,$){return $??=r3,`new Double(${$(this.value,A)})`}}class W7 extends B3{get _bsontype(){return"Int32"}constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F|0}static fromString(F){let A=Tg(F),$=Number(F);if(mJ<$)throw new c(`Input: '${F}' is larger than the maximum value for Int32`);else if(dJ>$)throw new c(`Input: '${F}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger($))throw new c(`Input: '${F}' is not a safe integer`);else if($.toString()!==A)throw new c(`Input: '${F}' is not a valid Int32 string`);return new W7($)}valueOf(){return this.value}toString(F){return this.value.toString(F)}toJSON(){return this.value}toExtendedJSON(F){if(F&&(F.relaxed||F.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(F,A){return A&&A.relaxed?parseInt(F.$numberInt,10):new W7(F.$numberInt)}inspect(F,A,$){return $??=r3,`new Int32(${$(this.value,A)})`}}class S5 extends B3{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new S5}inspect(){return"new MaxKey()"}}class u5 extends B3{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new u5}inspect(){return"new MinKey()"}}var k5=null,_J=new WeakMap;class m0 extends B3{get _bsontype(){return"ObjectId"}constructor(F){super();let A;if(typeof F==="object"&&F&&"id"in F){if(typeof F.id!=="string"&&!ArrayBuffer.isView(F.id))throw new c("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in F&&typeof F.toHexString==="function")A=h.fromHex(F.toHexString());else A=F.id}else A=F;if(A==null||typeof A==="number")this.buffer=m0.generate(typeof A==="number"?A:void 0);else if(ArrayBuffer.isView(A)&&A.byteLength===12)this.buffer=h.toLocalBufferType(A);else if(typeof A==="string")if(m0.validateHexString(A)){if(this.buffer=h.fromHex(A),m0.cacheHexString)_J.set(this,A)}else throw new c("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new c("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(F){if(this.buffer=F,m0.cacheHexString)_J.set(this,h.toHex(F))}static validateHexString(F){if(F?.length!==24)return!1;for(let A=0;A<24;A++){let $=F.charCodeAt(A);if($>=48&&$<=57||$>=97&&$<=102||$>=65&&$<=70)continue;return!1}return!0}toHexString(){if(m0.cacheHexString){let A=_J.get(this);if(A)return A}let F=h.toHex(this.id);if(m0.cacheHexString)_J.set(this,F);return F}static getInc(){return m0.index=(m0.index+1)%16777215}static generate(F){if(typeof F!=="number")F=Math.floor(Date.now()/1000);let A=m0.getInc(),$=h.allocateUnsafe(12);if(I1.setInt32BE($,0,F),k5===null)k5=h.randomBytes(5);return $[4]=k5[0],$[5]=k5[1],$[6]=k5[2],$[7]=k5[3],$[8]=k5[4],$[11]=A&255,$[10]=A>>8&255,$[9]=A>>16&255,$}toString(F){if(F==="base64")return h.toBase64(this.id);if(F==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&F._bsontype==="ObjectId"}equals(F){if(F===void 0||F===null)return!1;if(m0.is(F))return this.buffer[11]===F.buffer[11]&&h.equals(this.buffer,F.buffer);if(typeof F==="string")return F.toLowerCase()===this.toHexString();if(typeof F==="object"&&typeof F.toHexString==="function"){let A=F.toHexString(),$=this.toHexString();return typeof A==="string"&&A.toLowerCase()===$}return!1}getTimestamp(){let F=new Date,A=I1.getUint32BE(this.buffer,0);return F.setTime(Math.floor(A)*1000),F}static createPk(){return new m0}serializeInto(F,A){return F[A]=this.buffer[0],F[A+1]=this.buffer[1],F[A+2]=this.buffer[2],F[A+3]=this.buffer[3],F[A+4]=this.buffer[4],F[A+5]=this.buffer[5],F[A+6]=this.buffer[6],F[A+7]=this.buffer[7],F[A+8]=this.buffer[8],F[A+9]=this.buffer[9],F[A+10]=this.buffer[10],F[A+11]=this.buffer[11],12}static createFromTime(F){let A=h.allocate(12);for(let $=11;$>=4;$--)A[$]=0;return I1.setInt32BE(A,0,F),new m0(A)}static createFromHexString(F){if(F?.length!==24)throw new c("hex string must be 24 characters");return new m0(h.fromHex(F))}static createFromBase64(F){if(F?.length!==16)throw new c("base64 string must be 16 characters");return new m0(h.fromBase64(F))}static isValid(F){if(F==null)return!1;if(typeof F==="string")return m0.validateHexString(F);try{return new m0(F),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(F){return new m0(F.$oid)}isCached(){return m0.cacheHexString&&_J.has(this)}inspect(F,A,$){return $??=r3,`new ObjectId(${$(this.toHexString(),A)})`}}m0.index=Math.floor(Math.random()*16777215);function tZ(F,A,$){let B=5;if(Array.isArray(F))for(let J=0;J<F.length;J++)B+=Yg(J.toString(),F[J],A,!0,$);else{if(typeof F?.toBSON==="function")F=F.toBSON();for(let J of Object.keys(F))B+=Yg(J,F[J],A,!1,$)}return B}function Yg(F,A,$=!1,B=!1,J=!1){if(typeof A?.toBSON==="function")A=A.toBSON();switch(typeof A){case"string":return 1+h.utf8ByteLength(F)+1+4+h.utf8ByteLength(A)+1;case"number":if(Math.floor(A)===A&&A>=Wg&&A<=zg)if(A>=dJ&&A<=mJ)return(F!=null?h.utf8ByteLength(F)+1:0)+5;else return(F!=null?h.utf8ByteLength(F)+1:0)+9;else return(F!=null?h.utf8ByteLength(F)+1:0)+9;case"undefined":if(B||!J)return(F!=null?h.utf8ByteLength(F)+1:0)+1;return 0;case"boolean":return(F!=null?h.utf8ByteLength(F)+1:0)+2;case"object":if(A!=null&&typeof A._bsontype==="string"&&A[CA]!==O5)throw new X8;else if(A==null||A._bsontype==="MinKey"||A._bsontype==="MaxKey")return(F!=null?h.utf8ByteLength(F)+1:0)+1;else if(A._bsontype==="ObjectId")return(F!=null?h.utf8ByteLength(F)+1:0)+13;else if(A instanceof Date||LA(A))return(F!=null?h.utf8ByteLength(F)+1:0)+9;else if(ArrayBuffer.isView(A)||A instanceof ArrayBuffer||AI(A))return(F!=null?h.utf8ByteLength(F)+1:0)+6+A.byteLength;else if(A._bsontype==="Long"||A._bsontype==="Double"||A._bsontype==="Timestamp")return(F!=null?h.utf8ByteLength(F)+1:0)+9;else if(A._bsontype==="Decimal128")return(F!=null?h.utf8ByteLength(F)+1:0)+17;else if(A._bsontype==="Code")if(A.scope!=null&&Object.keys(A.scope).length>0)return(F!=null?h.utf8ByteLength(F)+1:0)+1+4+4+h.utf8ByteLength(A.code.toString())+1+tZ(A.scope,$,J);else return(F!=null?h.utf8ByteLength(F)+1:0)+1+4+h.utf8ByteLength(A.code.toString())+1;else if(A._bsontype==="Binary"){let X=A;if(X.sub_type===Q1.SUBTYPE_BYTE_ARRAY)return(F!=null?h.utf8ByteLength(F)+1:0)+(X.position+1+4+1+4);else return(F!=null?h.utf8ByteLength(F)+1:0)+(X.position+1+4+1)}else if(A._bsontype==="Symbol")return(F!=null?h.utf8ByteLength(F)+1:0)+h.utf8ByteLength(A.value)+4+1+1;else if(A._bsontype==="DBRef"){let X=Object.assign({$ref:A.collection,$id:A.oid},A.fields);if(A.db!=null)X.$db=A.db;return(F!=null?h.utf8ByteLength(F)+1:0)+1+tZ(X,$,J)}else if(A instanceof RegExp||EA(A))return(F!=null?h.utf8ByteLength(F)+1:0)+1+h.utf8ByteLength(A.source)+1+(A.global?1:0)+(A.ignoreCase?1:0)+(A.multiline?1:0)+1;else if(A._bsontype==="BSONRegExp")return(F!=null?h.utf8ByteLength(F)+1:0)+1+h.utf8ByteLength(A.pattern)+1+h.utf8ByteLength(A.options)+1;else return(F!=null?h.utf8ByteLength(F)+1:0)+tZ(A,$,J)+1;case"function":if($)return(F!=null?h.utf8ByteLength(F)+1:0)+1+4+h.utf8ByteLength(A.toString())+1;return 0;case"bigint":return(F!=null?h.utf8ByteLength(F)+1:0)+9;case"symbol":return 0;default:throw new c(`Unrecognized JS type: ${typeof A}`)}}function LQ1(F){return F.split("").sort().join("")}class j9 extends B3{get _bsontype(){return"BSONRegExp"}constructor(F,A){super();if(this.pattern=F,this.options=LQ1(A??""),this.pattern.indexOf("\x00")!==-1)throw new c(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\x00")!==-1)throw new c(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let $=0;$<this.options.length;$++)if(!(this.options[$]==="i"||this.options[$]==="m"||this.options[$]==="x"||this.options[$]==="l"||this.options[$]==="s"||this.options[$]==="u"))throw new c(`The regular expression option [${this.options[$]}] is not supported`)}static parseOptions(F){return F?F.split("").sort().join(""):""}toExtendedJSON(F){if(F=F||{},F.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(F){if("$regex"in F)if(typeof F.$regex!=="string"){if(F.$regex._bsontype==="BSONRegExp")return F}else return new j9(F.$regex,j9.parseOptions(F.$options));if("$regularExpression"in F)return new j9(F.$regularExpression.pattern,j9.parseOptions(F.$regularExpression.options));throw new c(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(F)}`)}inspect(F,A,$){let B=pq1(A)??((Y)=>Y);$??=r3;let J=B($(this.pattern),"regexp"),X=B($(this.options),"regexp");return`new BSONRegExp(${J}, ${X})`}}class f5 extends B3{get _bsontype(){return"BSONSymbol"}constructor(F){super();this.value=F}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(F){return new f5(F.$symbol)}inspect(F,A,$){return $??=r3,`new BSONSymbol(${$(this.value,A)})`}}var wQ1=j;class R9 extends wQ1{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(F){if(F==null)super(0,0,!0);else if(typeof F==="bigint")super(F,!0);else if(j.isLong(F))super(F.low,F.high,!0);else if(typeof F==="object"&&"t"in F&&"i"in F){if(typeof F.t!=="number"&&(typeof F.t!=="object"||F.t._bsontype!=="Int32"))throw new c("Timestamp constructed from { t, i } must provide t as a number");if(typeof F.i!=="number"&&(typeof F.i!=="object"||F.i._bsontype!=="Int32"))throw new c("Timestamp constructed from { t, i } must provide i as a number");let A=Number(F.t),$=Number(F.i);if(A<0||Number.isNaN(A))throw new c("Timestamp constructed from { t, i } must provide a positive t");if($<0||Number.isNaN($))throw new c("Timestamp constructed from { t, i } must provide a positive i");if(A>4294967295)throw new c("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if($>4294967295)throw new c("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super($,A,!0)}else throw new c("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(F){return new R9(j.fromInt(F,!0))}static fromNumber(F){return new R9(j.fromNumber(F,!0))}static fromBits(F,A){return new R9({i:F,t:A})}static fromString(F,A){return new R9(j.fromString(F,!0,A))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(F){let A=j.isLong(F.$timestamp.i)?F.$timestamp.i.getLowBitsUnsigned():F.$timestamp.i,$=j.isLong(F.$timestamp.t)?F.$timestamp.t.getLowBitsUnsigned():F.$timestamp.t;return new R9({t:$,i:A})}inspect(F,A,$){$??=r3;let B=$(this.t,A),J=$(this.i,A);return`new Timestamp({ t: ${B}, i: ${J} })`}}R9.MAX_VALUE=j.MAX_UNSIGNED_VALUE;var IQ1=j.fromNumber(zg),CQ1=j.fromNumber(Wg);function Og(F,A,$){A=A==null?{}:A;let B=A&&A.index?A.index:0,J=I1.getInt32LE(F,B);if(J<5)throw new c(`bson size must be >= 5, is ${J}`);if(A.allowObjectSmallerThanBufferSize&&F.length<J)throw new c(`buffer length ${F.length} must be >= bson size ${J}`);if(!A.allowObjectSmallerThanBufferSize&&F.length!==J)throw new c(`buffer length ${F.length} must === bson size ${J}`);if(J+B>F.byteLength)throw new c(`(bson size ${J} + options.index ${B} must be <= buffer length ${F.byteLength})`);if(F[B+J-1]!==0)throw new c("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return sZ(F,B,A,$)}var NQ1=/^\$ref$|^\$id$|^\$db$/;function sZ(F,A,$,B=!1){let J=$.fieldsAsRaw==null?null:$.fieldsAsRaw,X=$.raw==null?!1:$.raw,Y=typeof $.bsonRegExp==="boolean"?$.bsonRegExp:!1,D=$.promoteBuffers??!1,G=$.promoteLongs??!0,Z=$.promoteValues??!0,U=$.useBigInt64??!1;if(U&&!Z)throw new c("Must either request bigint or Long for int64 deserialization");if(U&&!G)throw new c("Must either request bigint or Long for int64 deserialization");let z=$.validation==null?{utf8:!0}:$.validation,W=!0,H,K,q=z.utf8;if(typeof q==="boolean")H=q;else{W=!1;let P=Object.keys(q).map(function(M){return q[M]});if(P.length===0)throw new c("UTF-8 validation setting cannot be empty");if(typeof P[0]!=="boolean")throw new c("Invalid UTF-8 validation option, must specify boolean values");if(H=P[0],!P.every((M)=>M===H))throw new c("Invalid UTF-8 validation option - keys must be all true or all false")}if(!W){K=new Set;for(let P of Object.keys(q))K.add(P)}let V=A;if(F.length<5)throw new c("corrupt bson message < 5 bytes long");let E=I1.getInt32LE(F,A);if(A+=4,E<5||E>F.length)throw new c("corrupt bson message");let L=B?[]:{},w=0,I=B?!1:null;while(!0){let P=F[A++];if(P===0)break;let M=A;while(F[M]!==0&&M<F.length)M++;if(M>=F.byteLength)throw new c("Bad BSON Document: illegal CString");let u=B?w++:h.toUTF8(F,A,M,!1),g=!0;if(W||K?.has(u))g=H;else g=!H;if(I!==!1&&u[0]==="$")I=NQ1.test(u);let S;if(A=M+1,P===Hg){let O=I1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new c("bad string length in bson");S=h.toUTF8(F,A,A+O-1,g),A=A+O}else if(P===qg){let O=h.allocateUnsafe(12);for(let p=0;p<12;p++)O[p]=F[A+p];S=new m0(O),A=A+12}else if(P===yJ&&Z===!1)S=new W7(I1.getInt32LE(F,A)),A+=4;else if(P===yJ)S=I1.getInt32LE(F,A),A+=4;else if(P===BI){if(S=I1.getFloat64LE(F,A),A+=8,Z===!1)S=new P9(S)}else if(P===Vg){let O=I1.getInt32LE(F,A),p=I1.getInt32LE(F,A+4);A+=8,S=new Date(new j(O,p).toNumber())}else if(P===Qg){if(F[A]!==0&&F[A]!==1)throw new c("illegal boolean type value");S=F[A++]===1}else if(P===JI){let O=A,p=I1.getInt32LE(F,A);if(p<=0||p>F.length-A)throw new c("bad embedded document length in bson");if(X)S=F.subarray(A,A+p);else{let m=$;if(!W)m={...$,validation:{utf8:g}};S=sZ(F,O,m,!1)}A=A+p}else if(P===Kg){let O=A,p=I1.getInt32LE(F,A),m=$,r=A+p;if(J&&J[u])m={...$,raw:!0};if(!W)m={...m,validation:{utf8:g}};if(S=sZ(F,O,m,!0),A=A+p,F[A-1]!==0)throw new c("invalid array terminator byte");if(A!==r)throw new c("corrupted array bson")}else if(P===iq1)S=void 0;else if(P===YI)S=null;else if(P===GI)if(U)S=I1.getBigInt64LE(F,A),A+=8;else{let O=I1.getInt32LE(F,A),p=I1.getInt32LE(F,A+4);A+=8;let m=new j(O,p);if(G&&Z===!0)S=m.lessThanOrEqual(IQ1)&&m.greaterThanOrEqual(CQ1)?m.toNumber():m;else S=m}else if(P===Ig){let O=h.allocateUnsafe(16);for(let p=0;p<16;p++)O[p]=F[A+p];A=A+16,S=new f4(O)}else if(P===XI){let O=I1.getInt32LE(F,A);A+=4;let p=O,m=F[A++];if(O<0)throw new c("Negative binary type element size found");if(O>F.byteLength)throw new c("Binary type size larger than document size");if(m===Q1.SUBTYPE_BYTE_ARRAY){if(O=I1.getInt32LE(F,A),A+=4,O<0)throw new c("Negative binary type element size found for subtype 0x02");if(O>p-4)throw new c("Binary type with subtype 0x02 contains too long binary size");if(O<p-4)throw new c("Binary type with subtype 0x02 contains too short binary size")}if(D&&Z)S=h.toLocalBufferType(F.subarray(A,A+O));else if(S=new Q1(F.subarray(A,A+O),m),m===ZI&&U4.isValid(S))S=S.toUUID();A=A+O}else if(P===oZ&&Y===!1){M=A;while(F[M]!==0&&M<F.length)M++;if(M>=F.length)throw new c("Bad BSON Document: illegal CString");let O=h.toUTF8(F,A,M,!1);A=M+1,M=A;while(F[M]!==0&&M<F.length)M++;if(M>=F.length)throw new c("Bad BSON Document: illegal CString");let p=h.toUTF8(F,A,M,!1);A=M+1;let m=Array(p.length);for(M=0;M<p.length;M++)switch(p[M]){case"m":m[M]="m";break;case"s":m[M]="g";break;case"i":m[M]="i";break}S=new RegExp(O,m.join(""))}else if(P===oZ&&Y===!0){M=A;while(F[M]!==0&&M<F.length)M++;if(M>=F.length)throw new c("Bad BSON Document: illegal CString");let O=h.toUTF8(F,A,M,!1);A=M+1,M=A;while(F[M]!==0&&M<F.length)M++;if(M>=F.length)throw new c("Bad BSON Document: illegal CString");let p=h.toUTF8(F,A,M,!1);A=M+1,S=new j9(O,p)}else if(P===Eg){let O=I1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new c("bad string length in bson");let p=h.toUTF8(F,A,A+O-1,g);S=Z?p:new f5(p),A=A+O}else if(P===wg)S=new R9({i:I1.getUint32LE(F,A),t:I1.getUint32LE(F,A+4)}),A+=8;else if(P===Cg)S=new u5;else if(P===Ng)S=new S5;else if(P===DI){let O=I1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new c("bad string length in bson");let p=h.toUTF8(F,A,A+O-1,g);S=new z7(p),A=A+O}else if(P===Lg){let O=I1.getInt32LE(F,A);if(A+=4,O<13)throw new c("code_w_scope total size shorter minimum expected length");let p=I1.getInt32LE(F,A);if(A+=4,p<=0||p>F.length-A||F[A+p-1]!==0)throw new c("bad string length in bson");let m=h.toUTF8(F,A,A+p-1,g);A=A+p;let r=A,w1=I1.getInt32LE(F,A),u0=sZ(F,r,$,!1);if(A=A+w1,O<8+w1+p)throw new c("code_w_scope total size is too short, truncating scope");if(O>8+w1+p)throw new c("code_w_scope total size is too long, clips outer document");S=new z7(m,u0)}else if(P===aq1){let O=I1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new c("bad string length in bson");let p=h.toUTF8(F,A,A+O-1,g);A=A+O;let m=h.allocateUnsafe(12);for(let w1=0;w1<12;w1++)m[w1]=F[A+w1];let r=new m0(m);A=A+12,S=new g2(p,r)}else throw new c(`Detected unknown BSON type ${P.toString(16)} for fieldname "${u}"`);if(u==="__proto__")Object.defineProperty(L,u,{value:S,writable:!0,enumerable:!0,configurable:!0});else L[u]=S}if(E!==A-V){if(B)throw new c("corrupt array bson");throw new c("corrupt object bson")}if(!I)return L;if(Mg(L)){let P=Object.assign({},L);return delete P.$ref,delete P.$id,delete P.$db,new g2(L.$ref,L.$id,L.$db,P)}return L}var eZ=/\x00/,Dg=new Set(["$db","$ref","$id","$clusterTime"]);function fw(F,A,$,B){F[B++]=Hg;let J=h.encodeUTF8Into(F,A,B);B=B+J+1,F[B-1]=0;let X=h.encodeUTF8Into(F,$,B+4);return I1.setInt32LE(F,B,X+1),B=B+4+X,F[B++]=0,B}function xw(F,A,$,B){let X=!Object.is($,-0)&&Number.isSafeInteger($)&&$<=mJ&&$>=dJ?yJ:BI;F[B++]=X;let Y=h.encodeUTF8Into(F,A,B);if(B=B+Y,F[B++]=0,X===yJ)B+=I1.setInt32LE(F,B,$);else B+=I1.setFloat64LE(F,B,$);return B}function bw(F,A,$,B){F[B++]=GI;let J=h.encodeUTF8Into(F,A,B);return B+=J,F[B++]=0,B+=I1.setBigInt64LE(F,B,$),B}function QA(F,A,$,B){F[B++]=YI;let J=h.encodeUTF8Into(F,A,B);return B=B+J,F[B++]=0,B}function gw(F,A,$,B){F[B++]=Qg;let J=h.encodeUTF8Into(F,A,B);return B=B+J,F[B++]=0,F[B++]=$?1:0,B}function _w(F,A,$,B){F[B++]=Vg;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;let X=j.fromNumber($.getTime()),Y=X.getLowBits(),D=X.getHighBits();return B+=I1.setInt32LE(F,B,Y),B+=I1.setInt32LE(F,B,D),B}function yw(F,A,$,B){F[B++]=oZ;let J=h.encodeUTF8Into(F,A,B);if(B=B+J,F[B++]=0,$.source&&$.source.match(eZ)!=null)throw new c("value "+$.source+" must not contain null bytes");if(B=B+h.encodeUTF8Into(F,$.source,B),F[B++]=0,$.ignoreCase)F[B++]=105;if($.global)F[B++]=115;if($.multiline)F[B++]=109;return F[B++]=0,B}function vw(F,A,$,B){F[B++]=oZ;let J=h.encodeUTF8Into(F,A,B);if(B=B+J,F[B++]=0,$.pattern.match(eZ)!=null)throw new c("pattern "+$.pattern+" must not contain null bytes");B=B+h.encodeUTF8Into(F,$.pattern,B),F[B++]=0;let X=$.options.split("").sort().join("");return B=B+h.encodeUTF8Into(F,X,B),F[B++]=0,B}function hw(F,A,$,B){if($===null)F[B++]=YI;else if($._bsontype==="MinKey")F[B++]=Cg;else F[B++]=Ng;let J=h.encodeUTF8Into(F,A,B);return B=B+J,F[B++]=0,B}function mw(F,A,$,B){F[B++]=qg;let J=h.encodeUTF8Into(F,A,B);return B=B+J,F[B++]=0,B+=$.serializeInto(F,B),B}function dw(F,A,$,B){F[B++]=XI;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;let X=$.length;if(B+=I1.setInt32LE(F,B,X),F[B++]=nq1,X<=16)for(let Y=0;Y<X;Y++)F[B+Y]=$[Y];else F.set($,B);return B=B+X,B}function cw(F,A,$,B,J,X,Y,D,G){if(G.has($))throw new c("Cannot convert circular structure to BSON");G.add($),F[B++]=Array.isArray($)?Kg:JI;let Z=h.encodeUTF8Into(F,A,B);B=B+Z,F[B++]=0;let U=cJ(F,$,J,B,X+1,Y,D,G);return G.delete($),U}function lw(F,A,$,B){F[B++]=Ig;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;for(let X=0;X<16;X++)F[B+X]=$.bytes[X];return B+16}function pw(F,A,$,B){F[B++]=$._bsontype==="Long"?GI:wg;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;let X=$.getLowBits(),Y=$.getHighBits();return B+=I1.setInt32LE(F,B,X),B+=I1.setInt32LE(F,B,Y),B}function iw(F,A,$,B){$=$.valueOf(),F[B++]=yJ;let J=h.encodeUTF8Into(F,A,B);return B=B+J,F[B++]=0,B+=I1.setInt32LE(F,B,$),B}function aw(F,A,$,B){F[B++]=BI;let J=h.encodeUTF8Into(F,A,B);return B=B+J,F[B++]=0,B+=I1.setFloat64LE(F,B,$.value),B}function nw(F,A,$,B){F[B++]=DI;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;let X=$.toString(),Y=h.encodeUTF8Into(F,X,B+4)+1;return I1.setInt32LE(F,B,Y),B=B+4+Y-1,F[B++]=0,B}function rw(F,A,$,B,J=!1,X=0,Y=!1,D=!0,G){if($.scope&&typeof $.scope==="object"){F[B++]=Lg;let Z=h.encodeUTF8Into(F,A,B);B=B+Z,F[B++]=0;let U=B,z=$.code;B=B+4;let W=h.encodeUTF8Into(F,z,B+4)+1;I1.setInt32LE(F,B,W),F[B+4+W-1]=0,B=B+W+4;let H=cJ(F,$.scope,J,B,X+1,Y,D,G);B=H-1;let K=H-U;U+=I1.setInt32LE(F,U,K),F[B++]=0}else{F[B++]=DI;let Z=h.encodeUTF8Into(F,A,B);B=B+Z,F[B++]=0;let U=$.code.toString(),z=h.encodeUTF8Into(F,U,B+4)+1;I1.setInt32LE(F,B,z),B=B+4+z-1,F[B++]=0}return B}function tw(F,A,$,B){F[B++]=XI;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;let{buffer:X,position:Y}=$;if($.sub_type===Q1.SUBTYPE_BYTE_ARRAY)Y=Y+4;if(B+=I1.setInt32LE(F,B,Y),F[B++]=$.sub_type,$.sub_type===Q1.SUBTYPE_BYTE_ARRAY)Y=Y-4,B+=I1.setInt32LE(F,B,Y);if($.sub_type===Q1.SUBTYPE_VECTOR)G7($);if(Y<=16)for(let D=0;D<Y;D++)F[B+D]=X[D];else F.set(X,B);return B=B+$.position,B}function sw(F,A,$,B){F[B++]=Eg;let J=h.encodeUTF8Into(F,A,B);B=B+J,F[B++]=0;let X=h.encodeUTF8Into(F,$.value,B+4)+1;return I1.setInt32LE(F,B,X),B=B+4+X-1,F[B++]=0,B}function ow(F,A,$,B,J,X,Y){F[B++]=JI;let D=h.encodeUTF8Into(F,A,B);B=B+D,F[B++]=0;let G=B,Z={$ref:$.collection||$.namespace,$id:$.oid};if($.db!=null)Z.$db=$.db;Z=Object.assign(Z,$.fields);let U=cJ(F,Z,!1,B,J+1,X,!0,Y),z=U-G;return G+=I1.setInt32LE(F,B,z),U}function cJ(F,A,$,B,J,X,Y,D){if(D==null){if(A==null)return F[0]=5,F[1]=0,F[2]=0,F[3]=0,F[4]=0,5;if(Array.isArray(A))throw new c("serialize does not support an array as the root input");if(typeof A!=="object")throw new c("serialize does not support non-object as the root input");else if("_bsontype"in A&&typeof A._bsontype==="string")throw new c("BSON types cannot be serialized as a document");else if(LA(A)||EA(A)||VA(A)||AI(A))throw new c("date, regexp, typedarray, and arraybuffer cannot be BSON documents");D=new Set}D.add(A);let G=B+4;if(Array.isArray(A))for(let U=0;U<A.length;U++){let z=`${U}`,W=A[U];if(typeof W?.toBSON==="function")W=W.toBSON();let H=typeof W;if(W===void 0)G=QA(F,z,W,G);else if(W===null)G=QA(F,z,W,G);else if(H==="string")G=fw(F,z,W,G);else if(H==="number")G=xw(F,z,W,G);else if(H==="bigint")G=bw(F,z,W,G);else if(H==="boolean")G=gw(F,z,W,G);else if(H==="object"&&W._bsontype==null)if(W instanceof Date||LA(W))G=_w(F,z,W,G);else if(W instanceof Uint8Array||VA(W))G=dw(F,z,W,G);else if(W instanceof RegExp||EA(W))G=yw(F,z,W,G);else G=cw(F,z,W,G,$,J,X,Y,D);else if(H==="object"){if(W[CA]!==O5)throw new X8;else if(W._bsontype==="ObjectId")G=mw(F,z,W,G);else if(W._bsontype==="Decimal128")G=lw(F,z,W,G);else if(W._bsontype==="Long"||W._bsontype==="Timestamp")G=pw(F,z,W,G);else if(W._bsontype==="Double")G=aw(F,z,W,G);else if(W._bsontype==="Code")G=rw(F,z,W,G,$,J,X,Y,D);else if(W._bsontype==="Binary")G=tw(F,z,W,G);else if(W._bsontype==="BSONSymbol")G=sw(F,z,W,G);else if(W._bsontype==="DBRef")G=ow(F,z,W,G,J,X,D);else if(W._bsontype==="BSONRegExp")G=vw(F,z,W,G);else if(W._bsontype==="Int32")G=iw(F,z,W,G);else if(W._bsontype==="MinKey"||W._bsontype==="MaxKey")G=hw(F,z,W,G);else if(typeof W._bsontype<"u")throw new c(`Unrecognized or invalid _bsontype: ${String(W._bsontype)}`)}else if(H==="function"&&X)G=nw(F,z,W,G)}else if(A instanceof Map||$I(A)){let U=A.entries(),z=!1;while(!z){let W=U.next();if(z=!!W.done,z)continue;let H=W.value?W.value[0]:void 0,K=W.value?W.value[1]:void 0;if(typeof K?.toBSON==="function")K=K.toBSON();let q=typeof K;if(typeof H==="string"&&!Dg.has(H)){if(H.match(eZ)!=null)throw new c("key "+H+" must not contain null bytes");if($){if(H[0]==="$")throw new c("key "+H+" must not start with '$'");else if(H.includes("."))throw new c("key "+H+" must not contain '.'")}}if(K===void 0){if(Y===!1)G=QA(F,H,K,G)}else if(K===null)G=QA(F,H,K,G);else if(q==="string")G=fw(F,H,K,G);else if(q==="number")G=xw(F,H,K,G);else if(q==="bigint")G=bw(F,H,K,G);else if(q==="boolean")G=gw(F,H,K,G);else if(q==="object"&&K._bsontype==null)if(K instanceof Date||LA(K))G=_w(F,H,K,G);else if(K instanceof Uint8Array||VA(K))G=dw(F,H,K,G);else if(K instanceof RegExp||EA(K))G=yw(F,H,K,G);else G=cw(F,H,K,G,$,J,X,Y,D);else if(q==="object"){if(K[CA]!==O5)throw new X8;else if(K._bsontype==="ObjectId")G=mw(F,H,K,G);else if(K._bsontype==="Decimal128")G=lw(F,H,K,G);else if(K._bsontype==="Long"||K._bsontype==="Timestamp")G=pw(F,H,K,G);else if(K._bsontype==="Double")G=aw(F,H,K,G);else if(K._bsontype==="Code")G=rw(F,H,K,G,$,J,X,Y,D);else if(K._bsontype==="Binary")G=tw(F,H,K,G);else if(K._bsontype==="BSONSymbol")G=sw(F,H,K,G);else if(K._bsontype==="DBRef")G=ow(F,H,K,G,J,X,D);else if(K._bsontype==="BSONRegExp")G=vw(F,H,K,G);else if(K._bsontype==="Int32")G=iw(F,H,K,G);else if(K._bsontype==="MinKey"||K._bsontype==="MaxKey")G=hw(F,H,K,G);else if(typeof K._bsontype<"u")throw new c(`Unrecognized or invalid _bsontype: ${String(K._bsontype)}`)}else if(q==="function"&&X)G=nw(F,H,K,G)}}else{if(typeof A?.toBSON==="function"){if(A=A.toBSON(),A!=null&&typeof A!=="object")throw new c("toBSON function did not return an object")}for(let U of Object.keys(A)){let z=A[U];if(typeof z?.toBSON==="function")z=z.toBSON();let W=typeof z;if(typeof U==="string"&&!Dg.has(U)){if(U.match(eZ)!=null)throw new c("key "+U+" must not contain null bytes");if($){if(U[0]==="$")throw new c("key "+U+" must not start with '$'");else if(U.includes("."))throw new c("key "+U+" must not contain '.'")}}if(z===void 0){if(Y===!1)G=QA(F,U,z,G)}else if(z===null)G=QA(F,U,z,G);else if(W==="string")G=fw(F,U,z,G);else if(W==="number")G=xw(F,U,z,G);else if(W==="bigint")G=bw(F,U,z,G);else if(W==="boolean")G=gw(F,U,z,G);else if(W==="object"&&z._bsontype==null)if(z instanceof Date||LA(z))G=_w(F,U,z,G);else if(z instanceof Uint8Array||VA(z))G=dw(F,U,z,G);else if(z instanceof RegExp||EA(z))G=yw(F,U,z,G);else G=cw(F,U,z,G,$,J,X,Y,D);else if(W==="object"){if(z[CA]!==O5)throw new X8;else if(z._bsontype==="ObjectId")G=mw(F,U,z,G);else if(z._bsontype==="Decimal128")G=lw(F,U,z,G);else if(z._bsontype==="Long"||z._bsontype==="Timestamp")G=pw(F,U,z,G);else if(z._bsontype==="Double")G=aw(F,U,z,G);else if(z._bsontype==="Code")G=rw(F,U,z,G,$,J,X,Y,D);else if(z._bsontype==="Binary")G=tw(F,U,z,G);else if(z._bsontype==="BSONSymbol")G=sw(F,U,z,G);else if(z._bsontype==="DBRef")G=ow(F,U,z,G,J,X,D);else if(z._bsontype==="BSONRegExp")G=vw(F,U,z,G);else if(z._bsontype==="Int32")G=iw(F,U,z,G);else if(z._bsontype==="MinKey"||z._bsontype==="MaxKey")G=hw(F,U,z,G);else if(typeof z._bsontype<"u")throw new c(`Unrecognized or invalid _bsontype: ${String(z._bsontype)}`)}else if(W==="function"&&X)G=nw(F,U,z,G)}}D.delete(A),F[G++]=0;let Z=G-B;return B+=I1.setInt32LE(F,B,Z),G}function PQ1(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&typeof F._bsontype==="string"}var RQ1={$oid:m0,$binary:Q1,$uuid:Q1,$symbol:f5,$numberInt:W7,$numberDecimal:f4,$numberDouble:P9,$numberLong:j,$minKey:u5,$maxKey:S5,$regex:j9,$regularExpression:j9,$timestamp:R9};function Sg(F,A={}){if(typeof F==="number"){let B=F<=mJ&&F>=dJ,J=F<=Zg&&F>=Ug;if(A.relaxed||A.legacy)return F;if(Number.isInteger(F)&&!Object.is(F,-0)){if(B)return new W7(F);if(J){if(A.useBigInt64)return BigInt(F);return j.fromNumber(F)}}return new P9(F)}if(F==null||typeof F!=="object")return F;if(F.$undefined)return null;let $=Object.keys(F).filter((B)=>B.startsWith("$")&&F[B]!=null);for(let B=0;B<$.length;B++){let J=RQ1[$[B]];if(J)return J.fromExtendedJSON(F,A)}if(F.$date!=null){let B=F.$date,J=new Date;if(A.legacy)if(typeof B==="number")J.setTime(B);else if(typeof B==="string")J.setTime(Date.parse(B));else if(typeof B==="bigint")J.setTime(Number(B));else throw new vJ(`Unrecognized type for EJSON date: ${typeof B}`);else if(typeof B==="string")J.setTime(Date.parse(B));else if(j.isLong(B))J.setTime(B.toNumber());else if(typeof B==="number"&&A.relaxed)J.setTime(B);else if(typeof B==="bigint")J.setTime(Number(B));else throw new vJ(`Unrecognized type for EJSON date: ${typeof B}`);return J}if(F.$code!=null){let B=Object.assign({},F);if(F.$scope)B.$scope=Sg(F.$scope);return z7.fromExtendedJSON(F)}if(Mg(F)||F.$dbPointer){let B=F.$ref?F:F.$dbPointer;if(B instanceof g2)return B;let J=Object.keys(B).filter((Y)=>Y.startsWith("$")),X=!0;if(J.forEach((Y)=>{if(["$ref","$id","$db"].indexOf(Y)===-1)X=!1}),X)return g2.fromExtendedJSON(B)}return F}function jQ1(F,A){return F.map(($,B)=>{A.seenObjects.push({propertyName:`index ${B}`,obj:null});try{return U7($,A)}finally{A.seenObjects.pop()}})}function Gg(F){let A=F.toISOString();return F.getUTCMilliseconds()!==0?A:A.slice(0,-5)+"Z"}function U7(F,A){if(F instanceof Map||$I(F)){let $=Object.create(null);for(let[B,J]of F){if(typeof B!=="string")throw new c("Can only serialize maps with string keys");$[B]=J}return U7($,A)}if((typeof F==="object"||typeof F==="function")&&F!==null){let $=A.seenObjects.findIndex((B)=>B.obj===F);if($!==-1){let B=A.seenObjects.map((U)=>U.propertyName),J=B.slice(0,$).map((U)=>`${U} -> `).join(""),X=B[$],Y=" -> "+B.slice($+1,B.length-1).map((U)=>`${U} -> `).join(""),D=B[B.length-1],G=" ".repeat(J.length+X.length/2),Z="-".repeat(Y.length+(X.length+D.length)/2-1);throw new c(`Converting circular structure to EJSON:
    ${J}${X}${Y}${D}
    ${G}\\${Z}/`)}A.seenObjects[A.seenObjects.length-1].obj=F}if(Array.isArray(F))return jQ1(F,A);if(F===void 0)return null;if(F instanceof Date||LA(F)){let $=F.getTime(),B=$>-1&&$<253402318800000;if(A.legacy)return A.relaxed&&B?{$date:F.getTime()}:{$date:Gg(F)};return A.relaxed&&B?{$date:Gg(F)}:{$date:{$numberLong:F.getTime().toString()}}}if(typeof F==="number"&&(!A.relaxed||!isFinite(F))){if(Number.isInteger(F)&&!Object.is(F,-0)){if(F>=dJ&&F<=mJ)return{$numberInt:F.toString()};if(F>=Ug&&F<=Zg)return{$numberLong:F.toString()}}return{$numberDouble:Object.is(F,-0)?"-0.0":F.toString()}}if(typeof F==="bigint"){if(!A.relaxed)return{$numberLong:BigInt.asIntN(64,F).toString()};return Number(BigInt.asIntN(64,F))}if(F instanceof RegExp||EA(F)){let $=F.flags;if($===void 0){let J=F.toString().match(/[gimuy]*$/);if(J)$=J[0]}return new j9(F.source,$).toExtendedJSON(A)}if(F!=null&&typeof F==="object")return TQ1(F,A);return F}var MQ1={Binary:(F)=>new Q1(F.value(),F.sub_type),Code:(F)=>new z7(F.code,F.scope),DBRef:(F)=>new g2(F.collection||F.namespace,F.oid,F.db,F.fields),Decimal128:(F)=>new f4(F.bytes),Double:(F)=>new P9(F.value),Int32:(F)=>new W7(F.value),Long:(F)=>j.fromBits(F.low!=null?F.low:F.low_,F.low!=null?F.high:F.high_,F.low!=null?F.unsigned:F.unsigned_),MaxKey:()=>new S5,MinKey:()=>new u5,ObjectId:(F)=>new m0(F),BSONRegExp:(F)=>new j9(F.pattern,F.options),BSONSymbol:(F)=>new f5(F.value),Timestamp:(F)=>R9.fromBits(F.low,F.high)};function TQ1(F,A){if(F==null||typeof F!=="object")throw new c("not an object instance");let $=F._bsontype;if(typeof $>"u"){let B={};for(let J of Object.keys(F)){A.seenObjects.push({propertyName:J,obj:null});try{let X=U7(F[J],A);if(J==="__proto__")Object.defineProperty(B,J,{value:X,writable:!0,enumerable:!0,configurable:!0});else B[J]=X}finally{A.seenObjects.pop()}}return B}else if(F!=null&&typeof F==="object"&&typeof F._bsontype==="string"&&F[CA]!==O5)throw new X8;else if(PQ1(F)){let B=F;if(typeof B.toExtendedJSON!=="function"){let J=MQ1[F._bsontype];if(!J)throw new c("Unrecognized or invalid _bsontype: "+F._bsontype);B=J(B)}if($==="Code"&&B.scope)B=new z7(B.code,U7(B.scope,A));else if($==="DBRef"&&B.oid)B=new g2(U7(B.collection,A),U7(B.oid,A),U7(B.db,A),U7(B.fields,A));return B.toExtendedJSON(A)}else throw new c("_bsontype must be a string, but was: "+typeof $)}function ug(F,A){let $={useBigInt64:A?.useBigInt64??!1,relaxed:A?.relaxed??!0,legacy:A?.legacy??!1};return JSON.parse(F,(B,J)=>{if(B.indexOf("\x00")!==-1)throw new c(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(B)}`);return Sg(J,$)})}function fg(F,A,$,B){if($!=null&&typeof $==="object")B=$,$=0;if(A!=null&&typeof A==="object"&&!Array.isArray(A))B=A,A=void 0,$=0;let J=Object.assign({relaxed:!0,legacy:!1},B,{seenObjects:[{propertyName:"(root)",obj:null}]}),X=U7(F,J);return JSON.stringify(X,A,$)}function kQ1(F,A){return A=A||{},JSON.parse(fg(F,A))}function OQ1(F,A){return A=A||{},ug(JSON.stringify(F),A)}var x5=Object.create(null);x5.parse=ug;x5.stringify=fg;x5.serialize=kQ1;x5.deserialize=OQ1;Object.freeze(x5);var $6={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function ew(F,A){try{return I1.getNonnegativeInt32LE(F,A)}catch($){throw new s9("BSON size cannot be negative",A,{cause:$})}}function FI(F,A){let $=A;for(;F[$]!==0;$++);if($===F.length-1)throw new s9("Null terminator not found",A);return $}function SQ1(F,A=0){if(A??=0,F.length<5)throw new s9(`Input must be at least 5 bytes, got ${F.length} bytes`,A);let $=ew(F,A);if($>F.length-A)throw new s9(`Parsed documentSize (${$} bytes) does not match input length (${F.length} bytes)`,A);if(F[A+$-1]!==0)throw new s9("BSON documents must end in 0x00",A+$);let B=[],J=A+4;while(J<=$+A){let X=F[J];if(J+=1,X===0){if(J-A!==$)throw new s9("Invalid 0x00 type byte",J);break}let Y=J,D=FI(F,J)-Y;J+=D+1;let G;if(X===$6.double||X===$6.long||X===$6.date||X===$6.timestamp)G=8;else if(X===$6.int)G=4;else if(X===$6.objectId)G=12;else if(X===$6.decimal)G=16;else if(X===$6.bool)G=1;else if(X===$6.null||X===$6.undefined||X===$6.maxKey||X===$6.minKey)G=0;else if(X===$6.regex)G=FI(F,FI(F,J)+1)+1-J;else if(X===$6.object||X===$6.array||X===$6.javascriptWithScope)G=ew(F,J);else if(X===$6.string||X===$6.binData||X===$6.dbPointer||X===$6.javascript||X===$6.symbol){if(G=ew(F,J)+4,X===$6.binData)G+=1;if(X===$6.dbPointer)G+=12}else throw new s9(`Invalid 0x${X.toString(16).padStart(2,"0")} type byte`,J);if(G>$)throw new s9("value reports length larger than document",J);B.push([X,Y,D,J,G]),J+=G}return B}var NA=Object.create(null);NA.parseToElements=SQ1;NA.ByteUtils=h;NA.NumberUtils=I1;Object.freeze(NA);var xg=17825792,J8=h.allocate(xg);function bg(F){if(J8.length<F)J8=h.allocate(F)}function gg(F,A={}){let $=typeof A.checkKeys==="boolean"?A.checkKeys:!1,B=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,J=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0,X=typeof A.minInternalBufferSize==="number"?A.minInternalBufferSize:xg;if(J8.length<X)J8=h.allocate(X);let Y=cJ(J8,F,$,0,0,B,J,null),D=h.allocateUnsafe(Y);return D.set(J8.subarray(0,Y),0),D}function _g(F,A,$={}){let B=typeof $.checkKeys==="boolean"?$.checkKeys:!1,J=typeof $.serializeFunctions==="boolean"?$.serializeFunctions:!1,X=typeof $.ignoreUndefined==="boolean"?$.ignoreUndefined:!0,Y=typeof $.index==="number"?$.index:0,D=cJ(J8,F,B,0,0,J,X,null);return A.set(J8.subarray(0,D),Y),Y+D-1}function yg(F,A={}){return Og(h.toLocalBufferType(F),A)}function vg(F,A={}){A=A||{};let $=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,B=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0;return tZ(F,$,B)}function hg(F,A,$,B,J,X){let Y=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},X),D=h.toLocalBufferType(F),G=A;for(let Z=0;Z<$;Z++){let U=I1.getInt32LE(D,G);Y.index=G,B[J+Z]=Og(D,Y),G=G+U}return G}var uQ1=Object.freeze({__proto__:null,BSONError:c,BSONOffsetError:s9,BSONRegExp:j9,BSONRuntimeError:vJ,BSONSymbol:f5,BSONType:Pg,BSONValue:B3,BSONVersionError:X8,Binary:Q1,Code:z7,DBRef:g2,Decimal128:f4,Double:P9,EJSON:x5,Int32:W7,Long:j,MaxKey:S5,MinKey:u5,ObjectId:m0,Timestamp:R9,UUID:U4,calculateObjectSize:vg,deserialize:yg,deserializeStream:hg,onDemand:NA,serialize:gg,serializeWithBufferAndIndex:_g,setInternalBufferSize:bg});fQ1.BSON=uQ1;fQ1.BSONError=c;fQ1.BSONOffsetError=s9;fQ1.BSONRegExp=j9;fQ1.BSONRuntimeError=vJ;fQ1.BSONSymbol=f5;fQ1.BSONType=Pg;fQ1.BSONValue=B3;fQ1.BSONVersionError=X8;fQ1.Binary=Q1;fQ1.Code=z7;fQ1.DBRef=g2;fQ1.Decimal128=f4;fQ1.Double=P9;fQ1.EJSON=x5;fQ1.Int32=W7;fQ1.Long=j;fQ1.MaxKey=S5;fQ1.MinKey=u5;fQ1.ObjectId=m0;fQ1.Timestamp=R9;fQ1.UUID=U4;fQ1.calculateObjectSize=vg;fQ1.deserialize=yg;fQ1.deserializeStream=hg;fQ1.onDemand=NA;fQ1.serialize=gg;fQ1.serializeWithBufferAndIndex=_g;fQ1.setInternalBufferSize=bg});var J0=Q((B6)=>{Object.defineProperty(B6,"__esModule",{value:!0});B6.toUTF8=B6.getBigInt64LE=B6.getFloat64LE=B6.getInt32LE=B6.UUID=B6.Timestamp=B6.serialize=B6.ObjectId=B6.MinKey=B6.MaxKey=B6.Long=B6.Int32=B6.EJSON=B6.Double=B6.deserialize=B6.Decimal128=B6.DBRef=B6.Code=B6.calculateObjectSize=B6.BSONType=B6.BSONSymbol=B6.BSONRegExp=B6.BSONError=B6.BSON=B6.Binary=void 0;B6.parseToElementsToArray=ZV1;B6.pluckBSONSerializeOptions=UV1;B6.resolveBSONOptions=zV1;B6.parseUtf8ValidationOption=WV1;var lJ=x4(),C6=x4();Object.defineProperty(B6,"Binary",{enumerable:!0,get:function(){return C6.Binary}});Object.defineProperty(B6,"BSON",{enumerable:!0,get:function(){return C6.BSON}});Object.defineProperty(B6,"BSONError",{enumerable:!0,get:function(){return C6.BSONError}});Object.defineProperty(B6,"BSONRegExp",{enumerable:!0,get:function(){return C6.BSONRegExp}});Object.defineProperty(B6,"BSONSymbol",{enumerable:!0,get:function(){return C6.BSONSymbol}});Object.defineProperty(B6,"BSONType",{enumerable:!0,get:function(){return C6.BSONType}});Object.defineProperty(B6,"calculateObjectSize",{enumerable:!0,get:function(){return C6.calculateObjectSize}});Object.defineProperty(B6,"Code",{enumerable:!0,get:function(){return C6.Code}});Object.defineProperty(B6,"DBRef",{enumerable:!0,get:function(){return C6.DBRef}});Object.defineProperty(B6,"Decimal128",{enumerable:!0,get:function(){return C6.Decimal128}});Object.defineProperty(B6,"deserialize",{enumerable:!0,get:function(){return C6.deserialize}});Object.defineProperty(B6,"Double",{enumerable:!0,get:function(){return C6.Double}});Object.defineProperty(B6,"EJSON",{enumerable:!0,get:function(){return C6.EJSON}});Object.defineProperty(B6,"Int32",{enumerable:!0,get:function(){return C6.Int32}});Object.defineProperty(B6,"Long",{enumerable:!0,get:function(){return C6.Long}});Object.defineProperty(B6,"MaxKey",{enumerable:!0,get:function(){return C6.MaxKey}});Object.defineProperty(B6,"MinKey",{enumerable:!0,get:function(){return C6.MinKey}});Object.defineProperty(B6,"ObjectId",{enumerable:!0,get:function(){return C6.ObjectId}});Object.defineProperty(B6,"serialize",{enumerable:!0,get:function(){return C6.serialize}});Object.defineProperty(B6,"Timestamp",{enumerable:!0,get:function(){return C6.Timestamp}});Object.defineProperty(B6,"UUID",{enumerable:!0,get:function(){return C6.UUID}});function ZV1(F,A){let $=lJ.BSON.onDemand.parseToElements(F,A);return Array.isArray($)?$:[...$]}B6.getInt32LE=lJ.BSON.onDemand.NumberUtils.getInt32LE;B6.getFloat64LE=lJ.BSON.onDemand.NumberUtils.getFloat64LE;B6.getBigInt64LE=lJ.BSON.onDemand.NumberUtils.getBigInt64LE;B6.toUTF8=lJ.BSON.onDemand.ByteUtils.toUTF8;function UV1(F){let{fieldsAsRaw:A,useBigInt64:$,promoteValues:B,promoteBuffers:J,promoteLongs:X,serializeFunctions:Y,ignoreUndefined:D,bsonRegExp:G,raw:Z,enableUtf8Validation:U}=F;return{fieldsAsRaw:A,useBigInt64:$,promoteValues:B,promoteBuffers:J,promoteLongs:X,serializeFunctions:Y,ignoreUndefined:D,bsonRegExp:G,raw:Z,enableUtf8Validation:U}}function zV1(F,A){let $=A?.bsonOptions;return{raw:F?.raw??$?.raw??!1,useBigInt64:F?.useBigInt64??$?.useBigInt64??!1,promoteLongs:F?.promoteLongs??$?.promoteLongs??!0,promoteValues:F?.promoteValues??$?.promoteValues??!0,promoteBuffers:F?.promoteBuffers??$?.promoteBuffers??!1,ignoreUndefined:F?.ignoreUndefined??$?.ignoreUndefined??!1,bsonRegExp:F?.bsonRegExp??$?.bsonRegExp??!1,serializeFunctions:F?.serializeFunctions??$?.serializeFunctions??!1,fieldsAsRaw:F?.fieldsAsRaw??$?.fieldsAsRaw??{},enableUtf8Validation:F?.enableUtf8Validation??$?.enableUtf8Validation??!0}}function WV1(F){if(F?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var $1=Q((w_)=>{Object.defineProperty(w_,"__esModule",{value:!0});w_.MongoWriteConcernError=w_.MongoServerSelectionError=w_.MongoSystemError=w_.MongoMissingDependencyError=w_.MongoMissingCredentialsError=w_.MongoCompatibilityError=w_.MongoInvalidArgumentError=w_.MongoParseError=w_.MongoNetworkTimeoutError=w_.MongoNetworkError=w_.MongoClientClosedError=w_.MongoTopologyClosedError=w_.MongoCursorExhaustedError=w_.MongoServerClosedError=w_.MongoCursorInUseError=w_.MongoOperationTimeoutError=w_.MongoUnexpectedServerResponseError=w_.MongoGridFSChunkError=w_.MongoGridFSStreamError=w_.MongoTailableCursorError=w_.MongoChangeStreamError=w_.MongoClientBulkWriteExecutionError=w_.MongoClientBulkWriteCursorError=w_.MongoClientBulkWriteError=w_.MongoGCPError=w_.MongoAzureError=w_.MongoOIDCError=w_.MongoAWSError=w_.MongoKerberosError=w_.MongoExpiredSessionError=w_.MongoTransactionError=w_.MongoNotConnectedError=w_.MongoDecompressionError=w_.MongoBatchReExecutionError=w_.MongoStalePrimaryError=w_.MongoRuntimeError=w_.MongoAPIError=w_.MongoDriverError=w_.MongoServerError=w_.MongoError=w_.MongoErrorLabel=w_.GET_MORE_RESUMABLE_CODES=w_.MONGODB_ERROR_CODES=w_.NODE_IS_RECOVERING_ERROR_MESSAGE=w_.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=w_.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;w_.needsRetryableWriteLabel=IV1;w_.isRetryableWriteError=E_;w_.isRetryableReadError=CV1;w_.isNodeShuttingDownError=MV1;w_.isSDAMUnrecoverableError=TV1;w_.isNetworkTimeoutError=kV1;w_.isResumableError=OV1;w_.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");w_.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");w_.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");w_.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});w_.GET_MORE_RESUMABLE_CODES=new Set([w_.MONGODB_ERROR_CODES.HostUnreachable,w_.MONGODB_ERROR_CODES.HostNotFound,w_.MONGODB_ERROR_CODES.NetworkTimeout,w_.MONGODB_ERROR_CODES.ShutdownInProgress,w_.MONGODB_ERROR_CODES.PrimarySteppedDown,w_.MONGODB_ERROR_CODES.ExceededTimeLimit,w_.MONGODB_ERROR_CODES.SocketException,w_.MONGODB_ERROR_CODES.NotWritablePrimary,w_.MONGODB_ERROR_CODES.InterruptedAtShutdown,w_.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,w_.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,w_.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,w_.MONGODB_ERROR_CODES.StaleShardVersion,w_.MONGODB_ERROR_CODES.StaleEpoch,w_.MONGODB_ERROR_CODES.StaleConfig,w_.MONGODB_ERROR_CODES.RetryChangeStream,w_.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,w_.MONGODB_ERROR_CODES.CursorNotFound]);w_.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function wV1(F){return F!=null&&typeof F==="object"&&"errors"in F&&Array.isArray(F.errors)}class _2 extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(F,A){super(F,A);this.errorLabelSet=new Set}static buildErrorMessage(F){if(typeof F==="string")return F;if(wV1(F)&&F.message.length===0)return F.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":F.errors.map(({message:A})=>A).join(", ");return F!=null&&typeof F==="object"&&"message"in F&&typeof F.message==="string"?F.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(F){return this.errorLabelSet.has(F)}addErrorLabel(F){this.errorLabelSet.add(F)}}w_.MongoError=_2;class FU extends _2{constructor(F){super(F.message||F.errmsg||F.$err||"n/a");if(F.errorLabels)for(let A of F.errorLabels)this.addErrorLabel(A);this.errorResponse=F;for(let A in F)if(A!=="errorLabels"&&A!=="errmsg"&&A!=="message"&&A!=="errorResponse")this[A]=F[A]}get name(){return"MongoServerError"}}w_.MongoServerError=FU;class PA extends _2{constructor(F,A){super(F,A)}get name(){return"MongoDriverError"}}w_.MongoDriverError=PA;class b4 extends PA{constructor(F,A){super(F,A)}get name(){return"MongoAPIError"}}w_.MongoAPIError=b4;class t3 extends PA{constructor(F,A){super(F,A)}get name(){return"MongoRuntimeError"}}w_.MongoRuntimeError=t3;class dg extends t3{constructor(F,A){super(F,A)}get name(){return"MongoStalePrimaryError"}}w_.MongoStalePrimaryError=dg;class cg extends b4{constructor(F="This batch has already been executed, create new batch to execute"){super(F)}get name(){return"MongoBatchReExecutionError"}}w_.MongoBatchReExecutionError=cg;class lg extends t3{constructor(F){super(F)}get name(){return"MongoDecompressionError"}}w_.MongoDecompressionError=lg;class pg extends b4{constructor(F){super(F)}get name(){return"MongoNotConnectedError"}}w_.MongoNotConnectedError=pg;class ig extends b4{constructor(F){super(F)}get name(){return"MongoTransactionError"}}w_.MongoTransactionError=ig;class ag extends b4{constructor(F="Cannot use a session that has ended"){super(F)}get name(){return"MongoExpiredSessionError"}}w_.MongoExpiredSessionError=ag;class ng extends t3{constructor(F){super(F)}get name(){return"MongoKerberosError"}}w_.MongoKerberosError=ng;class rg extends t3{constructor(F,A){super(F,A)}get name(){return"MongoAWSError"}}w_.MongoAWSError=rg;class AU extends t3{constructor(F){super(F)}get name(){return"MongoOIDCError"}}w_.MongoOIDCError=AU;class tg extends AU{constructor(F){super(F)}get name(){return"MongoAzureError"}}w_.MongoAzureError=tg;class sg extends AU{constructor(F){super(F)}get name(){return"MongoGCPError"}}w_.MongoGCPError=sg;class og extends FU{constructor(F){super(F);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}w_.MongoClientBulkWriteError=og;class eg extends t3{constructor(F){super(F)}get name(){return"MongoClientBulkWriteCursorError"}}w_.MongoClientBulkWriteCursorError=eg;class F_ extends t3{constructor(F){super(F)}get name(){return"MongoClientBulkWriteExecutionError"}}w_.MongoClientBulkWriteExecutionError=F_;class A_ extends t3{constructor(F){super(F)}get name(){return"MongoChangeStreamError"}}w_.MongoChangeStreamError=A_;class $_ extends b4{constructor(F="Tailable cursor does not support this operation"){super(F)}get name(){return"MongoTailableCursorError"}}w_.MongoTailableCursorError=$_;class B_ extends t3{constructor(F){super(F)}get name(){return"MongoGridFSStreamError"}}w_.MongoGridFSStreamError=B_;class J_ extends t3{constructor(F){super(F)}get name(){return"MongoGridFSChunkError"}}w_.MongoGridFSChunkError=J_;class X_ extends t3{constructor(F,A){super(F,A)}get name(){return"MongoUnexpectedServerResponseError"}}w_.MongoUnexpectedServerResponseError=X_;class Y_ extends PA{get name(){return"MongoOperationTimeoutError"}}w_.MongoOperationTimeoutError=Y_;class D_ extends b4{constructor(F="Cursor is already initialized"){super(F)}get name(){return"MongoCursorInUseError"}}w_.MongoCursorInUseError=D_;class G_ extends b4{constructor(F="Server is closed"){super(F)}get name(){return"MongoServerClosedError"}}w_.MongoServerClosedError=G_;class Z_ extends b4{constructor(F){super(F||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}w_.MongoCursorExhaustedError=Z_;class U_ extends b4{constructor(F="Topology is closed"){super(F)}get name(){return"MongoTopologyClosedError"}}w_.MongoTopologyClosedError=U_;class z_ extends b4{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}w_.MongoClientClosedError=z_;class b5 extends _2{constructor(F,A){super(F,{cause:A?.cause});this.beforeHandshake=!!A?.beforeHandshake}get name(){return"MongoNetworkError"}}w_.MongoNetworkError=b5;class W_ extends b5{constructor(F,A){super(F,A)}get name(){return"MongoNetworkTimeoutError"}}w_.MongoNetworkTimeoutError=W_;class zI extends PA{constructor(F){super(F)}get name(){return"MongoParseError"}}w_.MongoParseError=zI;class H_ extends b4{constructor(F,A){super(F,A)}get name(){return"MongoInvalidArgumentError"}}w_.MongoInvalidArgumentError=H_;class K_ extends b4{constructor(F){super(F)}get name(){return"MongoCompatibilityError"}}w_.MongoCompatibilityError=K_;class q_ extends b4{constructor(F){super(F)}get name(){return"MongoMissingCredentialsError"}}w_.MongoMissingCredentialsError=q_;class Q_ extends b4{constructor(F,A){super(F,A);this.dependencyName=A.dependencyName}get name(){return"MongoMissingDependencyError"}}w_.MongoMissingDependencyError=Q_;class WI extends _2{constructor(F,A){if(A&&A.error)super(_2.buildErrorMessage(A.error.message||A.error),{cause:A.error});else super(F);if(A)this.reason=A;this.code=A.error?.code}get name(){return"MongoSystemError"}}w_.MongoSystemError=WI;class HI extends WI{constructor(F,A){super(F,A)}get name(){return"MongoServerSelectionError"}}w_.MongoServerSelectionError=HI;class KI extends FU{constructor(F){super({...F.writeConcernError,...F});this.errInfo=F.writeConcernError.errInfo,this.result=F}get name(){return"MongoWriteConcernError"}}w_.MongoWriteConcernError=KI;var V_=new Set([w_.MONGODB_ERROR_CODES.HostUnreachable,w_.MONGODB_ERROR_CODES.HostNotFound,w_.MONGODB_ERROR_CODES.NetworkTimeout,w_.MONGODB_ERROR_CODES.ShutdownInProgress,w_.MONGODB_ERROR_CODES.PrimarySteppedDown,w_.MONGODB_ERROR_CODES.SocketException,w_.MONGODB_ERROR_CODES.NotWritablePrimary,w_.MONGODB_ERROR_CODES.InterruptedAtShutdown,w_.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,w_.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,w_.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,w_.MONGODB_ERROR_CODES.ExceededTimeLimit,w_.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),UI=V_;function IV1(F,A,$){if(F instanceof b5)return!0;if(F instanceof _2){if((A>=9||E_(F))&&!F.hasErrorLabel(w_.MongoErrorLabel.HandshakeError))return!1}if(F instanceof KI){if($==="Mongos"&&A<9)return UI.has(F.result.code??0);let X=F.result.writeConcernError.code??Number(F.code);return UI.has(Number.isNaN(X)?0:X)}if(F instanceof _2)return UI.has(Number(F.code));if(w_.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(w_.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}function E_(F){return F.hasErrorLabel(w_.MongoErrorLabel.RetryableWriteError)||F.hasErrorLabel(w_.MongoErrorLabel.PoolRequstedRetry)}function CV1(F){if(typeof F.code==="number"?V_.has(F.code):!1)return!0;if(F instanceof b5)return!0;if(w_.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(w_.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}var NV1=new Set([w_.MONGODB_ERROR_CODES.ShutdownInProgress,w_.MONGODB_ERROR_CODES.PrimarySteppedDown,w_.MONGODB_ERROR_CODES.InterruptedAtShutdown,w_.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,w_.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),PV1=new Set([w_.MONGODB_ERROR_CODES.NotWritablePrimary,w_.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,w_.MONGODB_ERROR_CODES.LegacyNotPrimary]),RV1=new Set([w_.MONGODB_ERROR_CODES.InterruptedAtShutdown,w_.MONGODB_ERROR_CODES.ShutdownInProgress]);function L_(F){if(typeof F.code==="number")return NV1.has(F.code);return w_.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(F.message)||w_.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message)}function jV1(F){if(typeof F.code==="number")return PV1.has(F.code);if(L_(F))return!1;return w_.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message)}function MV1(F){return!!(typeof F.code==="number"&&RV1.has(F.code))}function TV1(F){if(F instanceof zI||F==null)return!0;return L_(F)||jV1(F)}function kV1(F){return!!(F instanceof b5&&F.message.match(/timed out/))}function OV1(F,A){if(F==null||!(F instanceof _2))return!1;if(F instanceof b5)return!0;if(F instanceof HI)return!0;if(A!=null&&A>=9){if(F.code===w_.MONGODB_ERROR_CODES.CursorNotFound)return!0;return F.hasErrorLabel(w_.MongoErrorLabel.ResumableChangeStreamError)}if(typeof F.code==="number")return w_.GET_MORE_RESUMABLE_CODES.has(F.code);return!1}});var F4=Q((P_)=>{Object.defineProperty(P_,"__esModule",{value:!0});P_.ReadPreference=P_.ReadPreferenceMode=void 0;var g5=$1();P_.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class r1{constructor(F,A,$){if(!r1.isValid(F))throw new g5.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(F)}`);if($==null&&typeof A==="object"&&!Array.isArray(A))$=A,A=void 0;else if(A&&!Array.isArray(A))throw new g5.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=F,this.tags=A,this.hedge=$?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,$=$??{},$.maxStalenessSeconds!=null){if($.maxStalenessSeconds<=0)throw new g5.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=$.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===r1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new g5.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new g5.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new g5.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(F){return new r1(F)}static fromOptions(F){if(!F)return;let A=F.readPreference??F.session?.transaction.options.readPreference,$=F.readPreferenceTags;if(A==null)return;if(typeof A==="string")return new r1(A,$,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:F.hedge});else if(!(A instanceof r1)&&typeof A==="object"){let B=A.mode||A.preference;if(B&&typeof B==="string")return new r1(B,A.tags??$,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:F.hedge})}if($)A.tags=$;return A}static translate(F){if(F.readPreference==null)return F;let A=F.readPreference;if(typeof A==="string")F.readPreference=new r1(A);else if(A&&!(A instanceof r1)&&typeof A==="object"){let $=A.mode||A.preference;if($&&typeof $==="string")F.readPreference=new r1($,A.tags,{maxStalenessSeconds:A.maxStalenessSeconds})}else if(!(A instanceof r1))throw new g5.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return F}static isValid(F){return new Set([r1.PRIMARY,r1.PRIMARY_PREFERRED,r1.SECONDARY,r1.SECONDARY_PREFERRED,r1.NEAREST,null]).has(F)}isValid(F){return r1.isValid(typeof F==="string"?F:this.mode)}secondaryOk(){return new Set([r1.PRIMARY_PREFERRED,r1.SECONDARY,r1.SECONDARY_PREFERRED,r1.NEAREST]).has(this.mode)}equals(F){return F.mode===this.mode}toJSON(){let F={mode:this.mode};if(Array.isArray(this.tags))F.tags=this.tags;if(this.maxStalenessSeconds)F.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)F.hedge=this.hedge;return F}}P_.ReadPreference=r1;r1.PRIMARY=P_.ReadPreferenceMode.primary;r1.PRIMARY_PREFERRED=P_.ReadPreferenceMode.primaryPreferred;r1.SECONDARY=P_.ReadPreferenceMode.secondary;r1.SECONDARY_PREFERRED=P_.ReadPreferenceMode.secondaryPreferred;r1.NEAREST=P_.ReadPreferenceMode.nearest;r1.primary=new r1(P_.ReadPreferenceMode.primary);r1.primaryPreferred=new r1(P_.ReadPreferenceMode.primaryPreferred);r1.secondary=new r1(P_.ReadPreferenceMode.secondary);r1.secondaryPreferred=new r1(P_.ReadPreferenceMode.secondaryPreferred);r1.nearest=new r1(P_.ReadPreferenceMode.nearest)});var s3=Q((j_)=>{Object.defineProperty(j_,"__esModule",{value:!0});j_.ServerType=j_.TopologyType=j_.STATE_CONNECTED=j_.STATE_CONNECTING=j_.STATE_CLOSED=j_.STATE_CLOSING=void 0;j_._advanceClusterTime=NE1;j_.STATE_CLOSING="closing";j_.STATE_CLOSED="closed";j_.STATE_CONNECTING="connecting";j_.STATE_CONNECTED="connected";j_.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});j_.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function NE1(F,A){if(F.clusterTime==null)F.clusterTime=A;else if(A.clusterTime.greaterThan(F.clusterTime.clusterTime))F.clusterTime=A}});var aJ=Q((O_)=>{Object.defineProperty(O_,"__esModule",{value:!0});O_.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;O_.writableServerSelector=SE1;O_.sameServerSelector=uE1;O_.secondaryWritableServerSelector=fE1;O_.readPreferenceServerSelector=QI;var qI=$1(),iJ=F4(),o3=s3(),OE1=1e4,T_=90;O_.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function SE1(){return function(A,$){return JU(A,$.filter((B)=>B.isWritable))}}function uE1(F){return function($,B){if(!F)return[];return B.filter((J)=>{return J.address===F.address&&J.type!==o3.ServerType.Unknown})}}function fE1(F,A){if(!A||!F||F&&F<O_.MIN_SECONDARY_WRITE_WIRE_VERSION)return QI(iJ.ReadPreference.primary);return QI(A)}function xE1(F,A,$){if(F.maxStalenessSeconds==null||F.maxStalenessSeconds<0)return $;let B=F.maxStalenessSeconds,J=(A.heartbeatFrequencyMS+OE1)/1000;if(B<J)throw new qI.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${J} seconds`);if(B<T_)throw new qI.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${T_} seconds`);if(A.type===o3.TopologyType.ReplicaSetWithPrimary){let X=Array.from(A.servers.values()).filter(XU)[0];return $.reduce((Y,D)=>{let Z=(D.lastUpdateTime-D.lastWriteDate-(X.lastUpdateTime-X.lastWriteDate)+A.heartbeatFrequencyMS)/1000,U=F.maxStalenessSeconds??0;if(Z<=U)Y.push(D);return Y},[])}if(A.type===o3.TopologyType.ReplicaSetNoPrimary){if($.length===0)return $;let X=$.reduce((Y,D)=>D.lastWriteDate>Y.lastWriteDate?D:Y);return $.reduce((Y,D)=>{let Z=(X.lastWriteDate-D.lastWriteDate+A.heartbeatFrequencyMS)/1000,U=F.maxStalenessSeconds??0;if(Z<=U)Y.push(D);return Y},[])}return $}function bE1(F,A){let $=Object.keys(F),B=Object.keys(A);for(let J=0;J<$.length;++J){let X=$[J];if(B.indexOf(X)===-1||A[X]!==F[X])return!1}return!0}function gE1(F,A){if(F.tags==null||Array.isArray(F.tags)&&F.tags.length===0)return A;for(let $=0;$<F.tags.length;++$){let B=F.tags[$],J=A.reduce((X,Y)=>{if(bE1(B,Y.tags))X.push(Y);return X},[]);if(J.length)return J}return[]}function JU(F,A){let $=A.reduce((J,X)=>Math.min(X.roundTripTime,J),1/0),B=$+F.localThresholdMS;return A.reduce((J,X)=>{if(X.roundTripTime<=B&&X.roundTripTime>=$)J.push(X);return J},[])}function XU(F){return F.type===o3.ServerType.RSPrimary}function _E1(F){return F.type===o3.ServerType.RSSecondary}function yE1(F){return F.type===o3.ServerType.RSSecondary||F.type===o3.ServerType.RSPrimary}function k_(F){return F.type!==o3.ServerType.Unknown}function vE1(F){return F.type===o3.ServerType.LoadBalancer}function QI(F){if(!F.isValid())throw new qI.MongoInvalidArgumentError("Invalid read preference specified");return function($,B,J=[]){if($.type===o3.TopologyType.LoadBalanced)return B.filter(vE1);if($.type===o3.TopologyType.Unknown)return[];if($.type===o3.TopologyType.Single)return JU($,B.filter(k_));if($.type===o3.TopologyType.Sharded){let G=B.filter((U)=>{return!J.includes(U)}),Z=G.length>0?G:J;return JU($,Z.filter(k_))}let X=F.mode;if(X===iJ.ReadPreference.PRIMARY)return B.filter(XU);if(X===iJ.ReadPreference.PRIMARY_PREFERRED){let G=B.filter(XU);if(G.length)return G}let Y=X===iJ.ReadPreference.NEAREST?yE1:_E1,D=JU($,gE1(F,xE1(F,$,B.filter(Y))));if(X===iJ.ReadPreference.SECONDARY_PREFERRED&&D.length===0)return B.filter(XU);return D}}});var Y8=Q((S_)=>{Object.defineProperty(S_,"__esModule",{value:!0});S_.OP_MSG=S_.OP_COMPRESSED=S_.OP_DELETE=S_.OP_QUERY=S_.OP_INSERT=S_.OP_UPDATE=S_.OP_REPLY=S_.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=S_.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=S_.MIN_SUPPORTED_QE_SERVER_VERSION=S_.MIN_SUPPORTED_QE_WIRE_VERSION=S_.MAX_SUPPORTED_WIRE_VERSION=S_.MIN_SUPPORTED_WIRE_VERSION=S_.MAX_SUPPORTED_SERVER_VERSION=S_.MIN_SUPPORTED_SERVER_VERSION=void 0;S_.MIN_SUPPORTED_SERVER_VERSION="4.2";S_.MAX_SUPPORTED_SERVER_VERSION="8.2";S_.MIN_SUPPORTED_WIRE_VERSION=8;S_.MAX_SUPPORTED_WIRE_VERSION=27;S_.MIN_SUPPORTED_QE_WIRE_VERSION=21;S_.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";S_.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;S_.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";S_.OP_REPLY=1;S_.OP_UPDATE=2001;S_.OP_INSERT=2002;S_.OP_QUERY=2004;S_.OP_DELETE=2006;S_.OP_COMPRESSED=2012;S_.OP_MSG=2013});var N6=Q((f_)=>{Object.defineProperty(f_,"__esModule",{value:!0});f_.END=f_.CHANGE=f_.INIT=f_.MORE=f_.RESPONSE=f_.SERVER_HEARTBEAT_FAILED=f_.SERVER_HEARTBEAT_SUCCEEDED=f_.SERVER_HEARTBEAT_STARTED=f_.COMMAND_FAILED=f_.COMMAND_SUCCEEDED=f_.COMMAND_STARTED=f_.CLUSTER_TIME_RECEIVED=f_.CONNECTION_CHECKED_IN=f_.CONNECTION_CHECKED_OUT=f_.CONNECTION_CHECK_OUT_FAILED=f_.CONNECTION_CHECK_OUT_STARTED=f_.CONNECTION_CLOSED=f_.CONNECTION_READY=f_.CONNECTION_CREATED=f_.CONNECTION_POOL_READY=f_.CONNECTION_POOL_CLEARED=f_.CONNECTION_POOL_CLOSED=f_.CONNECTION_POOL_CREATED=f_.WAITING_FOR_SUITABLE_SERVER=f_.SERVER_SELECTION_SUCCEEDED=f_.SERVER_SELECTION_FAILED=f_.SERVER_SELECTION_STARTED=f_.TOPOLOGY_DESCRIPTION_CHANGED=f_.TOPOLOGY_CLOSED=f_.TOPOLOGY_OPENING=f_.SERVER_DESCRIPTION_CHANGED=f_.SERVER_CLOSED=f_.SERVER_OPENING=f_.DESCRIPTION_RECEIVED=f_.UNPINNED=f_.PINNED=f_.MESSAGE=f_.ENDED=f_.CLOSED=f_.CONNECT=f_.OPEN=f_.CLOSE=f_.TIMEOUT=f_.ERROR=f_.SYSTEM_JS_COLLECTION=f_.SYSTEM_COMMAND_COLLECTION=f_.SYSTEM_USER_COLLECTION=f_.SYSTEM_PROFILE_COLLECTION=f_.SYSTEM_INDEX_COLLECTION=f_.SYSTEM_NAMESPACE_COLLECTION=void 0;f_.kDecoratedKeys=f_.kDecorateResult=f_.LEGACY_HELLO_COMMAND_CAMEL_CASE=f_.LEGACY_HELLO_COMMAND=f_.MONGO_CLIENT_EVENTS=f_.LOCAL_SERVER_EVENTS=f_.SERVER_RELAY_EVENTS=f_.APM_EVENTS=f_.TOPOLOGY_EVENTS=f_.CMAP_EVENTS=f_.HEARTBEAT_EVENTS=f_.RESUME_TOKEN_CHANGED=void 0;f_.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";f_.SYSTEM_INDEX_COLLECTION="system.indexes";f_.SYSTEM_PROFILE_COLLECTION="system.profile";f_.SYSTEM_USER_COLLECTION="system.users";f_.SYSTEM_COMMAND_COLLECTION="$cmd";f_.SYSTEM_JS_COLLECTION="system.js";f_.ERROR="error";f_.TIMEOUT="timeout";f_.CLOSE="close";f_.OPEN="open";f_.CONNECT="connect";f_.CLOSED="closed";f_.ENDED="ended";f_.MESSAGE="message";f_.PINNED="pinned";f_.UNPINNED="unpinned";f_.DESCRIPTION_RECEIVED="descriptionReceived";f_.SERVER_OPENING="serverOpening";f_.SERVER_CLOSED="serverClosed";f_.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";f_.TOPOLOGY_OPENING="topologyOpening";f_.TOPOLOGY_CLOSED="topologyClosed";f_.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";f_.SERVER_SELECTION_STARTED="serverSelectionStarted";f_.SERVER_SELECTION_FAILED="serverSelectionFailed";f_.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";f_.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";f_.CONNECTION_POOL_CREATED="connectionPoolCreated";f_.CONNECTION_POOL_CLOSED="connectionPoolClosed";f_.CONNECTION_POOL_CLEARED="connectionPoolCleared";f_.CONNECTION_POOL_READY="connectionPoolReady";f_.CONNECTION_CREATED="connectionCreated";f_.CONNECTION_READY="connectionReady";f_.CONNECTION_CLOSED="connectionClosed";f_.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";f_.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";f_.CONNECTION_CHECKED_OUT="connectionCheckedOut";f_.CONNECTION_CHECKED_IN="connectionCheckedIn";f_.CLUSTER_TIME_RECEIVED="clusterTimeReceived";f_.COMMAND_STARTED="commandStarted";f_.COMMAND_SUCCEEDED="commandSucceeded";f_.COMMAND_FAILED="commandFailed";f_.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";f_.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";f_.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";f_.RESPONSE="response";f_.MORE="more";f_.INIT="init";f_.CHANGE="change";f_.END="end";f_.RESUME_TOKEN_CHANGED="resumeTokenChanged";f_.HEARTBEAT_EVENTS=Object.freeze([f_.SERVER_HEARTBEAT_STARTED,f_.SERVER_HEARTBEAT_SUCCEEDED,f_.SERVER_HEARTBEAT_FAILED]);f_.CMAP_EVENTS=Object.freeze([f_.CONNECTION_POOL_CREATED,f_.CONNECTION_POOL_READY,f_.CONNECTION_POOL_CLEARED,f_.CONNECTION_POOL_CLOSED,f_.CONNECTION_CREATED,f_.CONNECTION_READY,f_.CONNECTION_CLOSED,f_.CONNECTION_CHECK_OUT_STARTED,f_.CONNECTION_CHECK_OUT_FAILED,f_.CONNECTION_CHECKED_OUT,f_.CONNECTION_CHECKED_IN]);f_.TOPOLOGY_EVENTS=Object.freeze([f_.SERVER_OPENING,f_.SERVER_CLOSED,f_.SERVER_DESCRIPTION_CHANGED,f_.TOPOLOGY_OPENING,f_.TOPOLOGY_CLOSED,f_.TOPOLOGY_DESCRIPTION_CHANGED,f_.ERROR,f_.TIMEOUT,f_.CLOSE]);f_.APM_EVENTS=Object.freeze([f_.COMMAND_STARTED,f_.COMMAND_SUCCEEDED,f_.COMMAND_FAILED]);f_.SERVER_RELAY_EVENTS=Object.freeze([f_.SERVER_HEARTBEAT_STARTED,f_.SERVER_HEARTBEAT_SUCCEEDED,f_.SERVER_HEARTBEAT_FAILED,f_.COMMAND_STARTED,f_.COMMAND_SUCCEEDED,f_.COMMAND_FAILED,...f_.CMAP_EVENTS]);f_.LOCAL_SERVER_EVENTS=Object.freeze([f_.CONNECT,f_.DESCRIPTION_RECEIVED,f_.CLOSED,f_.ENDED]);f_.MONGO_CLIENT_EVENTS=Object.freeze([...f_.CMAP_EVENTS,...f_.APM_EVENTS,...f_.TOPOLOGY_EVENTS,...f_.HEARTBEAT_EVENTS]);f_.LEGACY_HELLO_COMMAND="ismaster";f_.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";f_.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");f_.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var e9=Q((Zy)=>{Object.defineProperty(Zy,"__esModule",{value:!0});Zy.ReadConcern=Zy.ReadConcernLevel=void 0;Zy.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class jA{constructor(F){this.level=Zy.ReadConcernLevel[F]??F}static fromOptions(F){if(F==null)return;if(F.readConcern){let{readConcern:A}=F;if(A instanceof jA)return A;else if(typeof A==="string")return new jA(A);else if("level"in A&&A.level)return new jA(A.level)}if(F.level)return new jA(F.level);return}static get MAJORITY(){return Zy.ReadConcernLevel.majority}static get AVAILABLE(){return Zy.ReadConcernLevel.available}static get LINEARIZABLE(){return Zy.ReadConcernLevel.linearizable}static get SNAPSHOT(){return Zy.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}Zy.ReadConcern=jA});var Hy=Q((zy)=>{Object.defineProperty(zy,"__esModule",{value:!0});zy.OnDemandDocument=void 0;var i1=J0(),nJ={type:0,nameOffset:1,nameLength:2,offset:3,length:4};class YU{constructor(F,A=0,$=!1,B){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=F,this.offset=A,this.isArray=$,this.elements=B??(0,i1.parseToElementsToArray)(this.bson,A)}isElementName(F,A){let $=A[nJ.nameLength],B=A[nJ.nameOffset];if(F.length!==$)return!1;let J=B+$;for(let X=B,Y=0;Y<F.length&&X<J;Y++,X++)if(this.bson[X]!==F.charCodeAt(Y))return!1;return!0}getElement(F){let A=this.cache[F];if(A===!1)return null;if(A!=null)return A;if(typeof F==="number")if(this.isArray)if(F<this.elements.length){let B={element:this.elements[F],value:void 0};return this.cache[F]=B,this.indexFound[F]=!0,B}else return null;else return null;for(let $=0;$<this.elements.length;$++){let B=this.elements[$];if(!($ in this.indexFound)&&this.isElementName(F,B)){let J={element:B,value:void 0};return this.cache[F]=J,this.indexFound[$]=!0,J}}return this.cache[F]=!1,null}toJSValue(F,A){let $=F[nJ.type],B=F[nJ.offset],J=F[nJ.length];if(A!==$)return null;switch(A){case i1.BSONType.null:case i1.BSONType.undefined:return null;case i1.BSONType.double:return(0,i1.getFloat64LE)(this.bson,B);case i1.BSONType.int:return(0,i1.getInt32LE)(this.bson,B);case i1.BSONType.long:return(0,i1.getBigInt64LE)(this.bson,B);case i1.BSONType.bool:return Boolean(this.bson[B]);case i1.BSONType.objectId:return new i1.ObjectId(this.bson.subarray(B,B+12));case i1.BSONType.timestamp:return new i1.Timestamp((0,i1.getBigInt64LE)(this.bson,B));case i1.BSONType.string:return(0,i1.toUTF8)(this.bson,B+4,B+J-1,!1);case i1.BSONType.binData:{let X=(0,i1.getInt32LE)(this.bson,B),Y=this.bson[B+4];if(Y===2){let D=(0,i1.getInt32LE)(this.bson,B+1+4);if(D<0)throw new i1.BSONError("Negative binary type element size found for subtype 0x02");if(D>X-4)throw new i1.BSONError("Binary type with subtype 0x02 contains too long binary size");if(D<X-4)throw new i1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new i1.Binary(this.bson.subarray(B+1+4+4,B+1+4+4+D),2)}return new i1.Binary(this.bson.subarray(B+1+4,B+1+4+X),Y)}case i1.BSONType.date:return new Date(Number((0,i1.getBigInt64LE)(this.bson,B)));case i1.BSONType.object:return new YU(this.bson,B);case i1.BSONType.array:return new YU(this.bson,B,!0);default:throw new i1.BSONError(`Unsupported BSON type: ${A}`)}}size(){return this.elements.length}has(F){let A=this.cache[F];if(A===!1)return!1;if(A!=null)return!0;return this.getElement(F)!=null}get(F,A,$){let B=this.getElement(F);if(B==null)if($===!0)throw new i1.BSONError(`BSON element "${F}" is missing`);else return null;if(B.value==null){let J=this.toJSValue(B.element,A);if(J==null)if($===!0)throw new i1.BSONError(`BSON element "${F}" is missing`);else return null;B.value=J}return B.value}getNumber(F,A){let $=this.get(F,i1.BSONType.bool),B=$==null?null:$?1:0,J=this.get(F,i1.BSONType.long),X=J==null?null:Number(J),Y=B??X??this.get(F,i1.BSONType.int)??this.get(F,i1.BSONType.double);if(A===!0&&Y==null)throw new i1.BSONError(`BSON element "${F}" is missing`);return Y}toObject(F){return(0,i1.deserialize)(this.bson,{...F,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let F=(0,i1.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+F)}}zy.OnDemandDocument=YU});var K0=Q((Ey)=>{Object.defineProperty(Ey,"__esModule",{value:!0});Ey.ClientBulkWriteCursorResponse=Ey.ExplainedCursorResponse=Ey.CursorResponse=Ey.MongoDBResponse=void 0;Ey.isErrorResponse=qy;var e1=J0(),_5=$1(),Ky=z1(),OL1=Hy(),DU={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function qy(F,A){for(let $=0;$<A.length;$++){let B=A[$];if(B[DU.nameLength]===2){let J=B[DU.nameOffset];if(F[J]===111&&F[J+1]===107){let X=B[DU.offset],Y=B[DU.length];for(let D=X;D<X+Y;D++)if(F[D]!==0)return!1;return!0}}}return!0}class v5 extends OL1.OnDemandDocument{get(F,A,$){try{return super.get(F,A,$)}catch(B){throw new _5.MongoUnexpectedServerResponseError(B.message,{cause:B})}}static is(F){return F instanceof v5}static make(F){let A=(0,e1.parseToElementsToArray)(F,0);return qy(F,A)?new v5(F,0,!1,A):new this(F,0,!1,A)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===_5.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",e1.BSONType.object)?.getNumber("code")===_5.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let $=this.get("writeErrors",e1.BSONType.array);if($?.size()){for(let B=0;B<$.size();B++)if($.get(B,e1.BSONType.object)?.getNumber("code")===_5.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",e1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",e1.BSONType.object)?.get("atClusterTime",e1.BSONType.timestamp)??this.get("atClusterTime",e1.BSONType.timestamp)}get operationTime(){return this.get("operationTime",e1.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",e1.BSONType.string)}get errmsg(){return this.get("errmsg",e1.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let F=this.get("$clusterTime",e1.BSONType.object);if(F==null)return this.clusterTime=null,null;let A=F.get("clusterTime",e1.BSONType.timestamp,!0),$=F.get("signature",e1.BSONType.object)?.toObject();this.clusterTime={clusterTime:A,signature:$}}return this.clusterTime??null}toObject(F){let A={...(0,e1.pluckBSONSerializeOptions)(F??{}),validation:(0,e1.parseUtf8ValidationOption)(F)};return super.toObject(A)}}Ey.MongoDBResponse=v5;v5.empty=new v5(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));class y5 extends v5{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new y5((0,e1.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(F){return F instanceof y5||F===y5.emptyGetMore}get cursor(){return this.get("cursor",e1.BSONType.object,!0)}get id(){try{return e1.Long.fromBigInt(this.cursor.get("id",e1.BSONType.long,!0))}catch(F){throw new _5.MongoUnexpectedServerResponseError(F.message,{cause:F})}}get ns(){let F=this.cursor.get("ns",e1.BSONType.string);if(F!=null)return(0,Ky.ns)(F);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let F=this.encryptedResponse?.get("cursor",e1.BSONType.object);if(F?.has("firstBatch"))this._encryptedBatch=F.get("firstBatch",e1.BSONType.array,!0);else if(F?.has("nextBatch"))this._encryptedBatch=F.get("nextBatch",e1.BSONType.array,!0);else throw new _5.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let F=this.cursor;if(F.has("firstBatch"))this._batch=F.get("firstBatch",e1.BSONType.array,!0);else if(F.has("nextBatch"))this._batch=F.get("nextBatch",e1.BSONType.array,!0);else throw new _5.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",e1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(F){if(this.iterated>=this.batchSize)return null;let A=this.batch.get(this.iterated,e1.BSONType.object,!0)??null,$=this.encryptedBatch?.get(this.iterated,e1.BSONType.object,!0)??null;if(this.iterated+=1,F?.raw)return A.toBytes();else{let B=A.toObject(F);if($)(0,Ky.decorateDecryptionResult)(B,$.toObject(F),!0);return B}}clear(){this.iterated=this.batchSize}}Ey.CursorResponse=y5;class Qy extends y5{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return e1.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(F){if(this._length===0)return null;return this._length-=1,this.toObject(F)}}Ey.ExplainedCursorResponse=Qy;class Vy extends y5{get insertedCount(){return this.get("nInserted",e1.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",e1.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",e1.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",e1.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",e1.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",e1.BSONType.object,!1)}}Ey.ClientBulkWriteCursorResponse=Vy});var J3=Q((Iy)=>{Object.defineProperty(Iy,"__esModule",{value:!0});Iy.WriteConcern=Iy.WRITE_CONCERN_KEYS=void 0;Iy.throwIfWriteConcernError=gL1;var wy=K0(),bL1=$1();Iy.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class rJ{constructor(F,A,$,B){if(F!=null)if(!Number.isNaN(Number(F)))this.w=Number(F);else this.w=F;if(A!=null)this.wtimeoutMS=this.wtimeout=A;if($!=null)this.journal=this.j=$;if(B!=null)this.journal=this.j=B?!0:!1}static apply(F,A){let $={};if(A.w!=null)$.w=A.w;if(A.wtimeoutMS!=null)$.wtimeout=A.wtimeoutMS;if(A.journal!=null)$.j=A.j;return F.writeConcern=$,F}static fromOptions(F,A){if(F==null)return;A=A??{};let $;if(typeof F==="string"||typeof F==="number")$={w:F};else if(F instanceof rJ)$=F;else $=F.writeConcern;let J={...A instanceof rJ?A:A.writeConcern,...$},{w:X=void 0,wtimeout:Y=void 0,j:D=void 0,fsync:G=void 0,journal:Z=void 0,wtimeoutMS:U=void 0}=J;if(X!=null||Y!=null||U!=null||D!=null||Z!=null||G!=null)return new rJ(X,Y??U,D??Z,G);return}}Iy.WriteConcern=rJ;function gL1(F){if(typeof F==="object"&&F!=null){let A=wy.MongoDBResponse.is(F)&&F.has("writeConcernError")?F.toObject():!wy.MongoDBResponse.is(F)&&("writeConcernError"in F)?F:null;if(A!=null)throw new bL1.MongoWriteConcernError(A)}}});var z1=Q((by)=>{Object.defineProperty(by,"__esModule",{value:!0});by.kDispose=by.randomBytes=by.COSMOS_DB_MSG=by.DOCUMENT_DB_MSG=by.COSMOS_DB_CHECK=by.DOCUMENT_DB_CHECK=by.MONGODB_WARNING_CODE=by.DEFAULT_PK_FACTORY=by.HostAddress=by.BufferPool=by.List=by.MongoDBCollectionNamespace=by.MongoDBNamespace=by.ByteUtils=void 0;by.isUint8Array=iL1;by.hostMatchesWildcards=aL1;by.normalizeHintField=nL1;by.isObject=jI;by.mergeOptions=tL1;by.filterOptions=sL1;by.applyRetryableWrites=oL1;by.isPromiseLike=eL1;by.decorateWithCollation=Fw1;by.decorateWithReadConcern=Aw1;by.getTopology=$w1;by.ns=Bw1;by.makeCounter=Jw1;by.uuidV4=Xw1;by.maxWireVersion=Yw1;by.arrayStrictEqual=Dw1;by.errorStrictEqual=Gw1;by.makeStateMachine=Zw1;by.now=Ty;by.calculateDurationInMs=Uw1;by.hasAtomicOperators=ky;by.resolveTimeoutOptions=zw1;by.resolveOptions=Ww1;by.isSuperset=Oy;by.isHello=Hw1;by.setDifference=Kw1;by.isRecord=Qw1;by.emitWarning=uy;by.emitWarningOnce=Vw1;by.enumToString=Ew1;by.supportsRetryableWrites=Lw1;by.shuffle=ww1;by.commandSupportsReadConcern=Iw1;by.compareObjectId=Cw1;by.parseInteger=fy;by.parseUnsignedInteger=Nw1;by.checkParentDomainMatch=Pw1;by.get=Rw1;by.request=jw1;by.isHostMatch=Mw1;by.promiseWithResolvers=OI;by.squashError=Tw1;by.once=kw1;by.maybeAddIdToDocuments=Ow1;by.fileIsAccessible=Sw1;by.csotMin=uw1;by.noop=fw1;by.decorateDecryptionResult=xy;by.addAbortListener=SI;by.abortable=xw1;var jy=x("crypto"),vL1=x("fs"),My=x("http"),RI=x("timers"),hL1=x("url"),mL1=x("url"),dL1=x("util"),MI=J0(),Ny=Y8(),GU=N6(),X3=$1(),cL1=e9(),lL1=F4(),pL1=s3(),Py=J3();by.ByteUtils={toLocalBufferType(F){return Buffer.isBuffer(F)?F:Buffer.from(F.buffer,F.byteOffset,F.byteLength)},equals(F,A){return by.ByteUtils.toLocalBufferType(F).equals(A)},compare(F,A){return by.ByteUtils.toLocalBufferType(F).compare(A)},toBase64(F){return by.ByteUtils.toLocalBufferType(F).toString("base64")}};function iL1(F){return F!=null&&typeof F==="object"&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Uint8Array"}function aL1(F,A){for(let $ of A)if(F===$||$.startsWith("*.")&&F?.endsWith($.substring(2,$.length))||$.startsWith("*/")&&F?.endsWith($.substring(2,$.length)))return!0;return!1}function nL1(F){let A=void 0;if(typeof F==="string")A=F;else if(Array.isArray(F))A={},F.forEach(($)=>{A[$]=1});else if(F!=null&&typeof F==="object"){A={};for(let $ in F)A[$]=F[$]}return A}var rL1=(F)=>Object.prototype.toString.call(F);function jI(F){return rL1(F)==="[object Object]"}function tL1(F,A){return{...F,...A}}function sL1(F,A){let $={};for(let B in F)if(A.includes(B))$[B]=F[B];return $}function oL1(F,A){if(A&&A.s.options?.retryWrites)F.retryWrites=!0;return F}function eL1(F){return F!=null&&typeof F==="object"&&"then"in F&&typeof F.then==="function"}function Fw1(F,A){if(A.collation&&typeof A.collation==="object")F.collation=A.collation}function Aw1(F,A,$){if($&&$.session&&$.session.inTransaction())return;let B=Object.assign({},F.readConcern||{});if(A.s.readConcern)Object.assign(B,A.s.readConcern);if(Object.keys(B).length>0)Object.assign(F,{readConcern:B})}function $w1(F){if("topology"in F&&F.topology)return F.topology;else if("client"in F&&F.client.topology)return F.client.topology;throw new X3.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function Bw1(F){return oJ.fromString(F)}class oJ{constructor(F,A){this.db=F,this.collection=A===""?void 0:A}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(F){return new TI(this.db,F)}static fromString(F){if(typeof F!=="string"||F==="")throw new X3.MongoRuntimeError(`Cannot parse namespace from "${F}"`);let[A,...$]=F.split("."),B=$.join(".");return new oJ(A,B===""?void 0:B)}}by.MongoDBNamespace=oJ;class TI extends oJ{constructor(F,A){super(F,A);this.collection=A}static fromString(F){return super.fromString(F)}}by.MongoDBCollectionNamespace=TI;function*Jw1(F=0){let A=F;while(!0){let $=A;A+=1,yield $}}function Xw1(){let F=jy.randomBytes(16);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}function Yw1(F){if(F){if(F.hello)return F.hello.maxWireVersion;if(F.serverApi?.version)return Ny.MAX_SUPPORTED_WIRE_VERSION;if(F.loadBalanced)return Ny.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in F&&typeof F.lastHello==="function"){let A=F.lastHello();if(A)return A.maxWireVersion}if(F.description&&"maxWireVersion"in F.description&&F.description.maxWireVersion!=null)return F.description.maxWireVersion}return 0}function Dw1(F,A){if(!Array.isArray(F)||!Array.isArray(A))return!1;return F.length===A.length&&F.every(($,B)=>$===A[B])}function Gw1(F,A){if(F===A)return!0;if(!F||!A)return F===A;if(F==null&&A!=null||F!=null&&A==null)return!1;if(F.constructor.name!==A.constructor.name)return!1;if(F.message!==A.message)return!1;return!0}function Zw1(F){return function($,B){let J=F[$.s.state];if(J&&J.indexOf(B)<0)throw new X3.MongoRuntimeError(`illegal state transition from [${$.s.state}] => [${B}], allowed: [${J}]`);$.emit("stateChanged",$.s.state,B),$.s.state=B}}function Ty(){let F=process.hrtime();return Math.floor(F[0]*1000+F[1]/1e6)}function Uw1(F){if(typeof F!=="number")return-1;let A=Ty()-F;return A<0?0:A}function ky(F,A){if(Array.isArray(F)){for(let B of F)if(ky(B))return!0;return!1}let $=Object.keys(F);if(A?.ignoreUndefined){let B=!0;for(let J of $)if(F[J]!==void 0){B=!1;break}if(B)throw new X3.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return $.length>0&&$[0][0]==="$"}function zw1(F,A){let{socketTimeoutMS:$,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:J,timeoutMS:X}=F.s.options;return{socketTimeoutMS:$,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:J,timeoutMS:X,...A}}function Ww1(F,A){let $=Object.assign({},A,(0,MI.resolveBSONOptions)(A,F)),B=A?.timeoutMS??F?.timeoutMS,J=A?.session;if(!J?.inTransaction()){let D=cL1.ReadConcern.fromOptions(A)??F?.readConcern;if(D)$.readConcern=D;let G=Py.WriteConcern.fromOptions(A)??F?.writeConcern;if(G){if(B!=null)G=Py.WriteConcern.fromOptions({writeConcern:{...G,wtimeout:void 0,wtimeoutMS:void 0}});$.writeConcern=G}}$.timeoutMS=B;let X=lL1.ReadPreference.fromOptions(A)??F?.readPreference;if(X)$.readPreference=X;if(J?.explicit&&J?.timeoutContext!=null&&A?.timeoutMS!=null)throw new X3.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return $}function Oy(F,A){F=Array.isArray(F)?new Set(F):F,A=Array.isArray(A)?new Set(A):A;for(let $ of A)if(!F.has($))return!1;return!0}function Hw1(F){return F[GU.LEGACY_HELLO_COMMAND]||F.hello?!0:!1}function Kw1(F,A){let $=new Set(F);for(let B of A)$.delete(B);return $}var qw1=(F,A)=>Object.prototype.hasOwnProperty.call(F,A);function Qw1(F,A=void 0){if(!jI(F))return!1;let $=F.constructor;if($&&$.prototype){if(!jI($.prototype))return!1;if(!qw1($.prototype,"isPrototypeOf"))return!1}if(A){let B=Object.keys(F);return Oy(B,A)}return!0}class kI{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let F of this.nodes())yield F.value}*nodes(){let F=this.head.next;while(F!==this.head){let{next:A}=F;yield F,F=A}}push(F){this.count+=1;let A={next:this.head,prev:this.head.prev,value:F};this.head.prev.next=A,this.head.prev=A}pushMany(F){for(let A of F)this.push(A)}unshift(F){this.count+=1;let A={next:this.head.next,prev:this.head,value:F};this.head.next.prev=A,this.head.next=A}remove(F){if(F===this.head||this.length===0)return null;this.count-=1;let{prev:A,next:$}=F;return A.next=$,$.prev=A,F.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(F){for(let A of this.nodes())if(F(A.value))this.remove(A)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}by.List=kI;class Sy{constructor(){this.buffers=new kI,this.totalByteLength=0}get length(){return this.totalByteLength}append(F){this.buffers.push(F),this.totalByteLength+=F.length}getInt32(){if(this.totalByteLength<4)return null;let F=this.buffers.first();if(F!=null&&F.byteLength>=4)return F.readInt32LE(0);let A=this.read(4),$=A.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(A),$}read(F){if(typeof F!=="number"||F<0)throw new X3.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(F>this.totalByteLength)return Buffer.alloc(0);let A=Buffer.allocUnsafe(F);for(let $=0;$<F;){let B=this.buffers.shift();if(B==null)break;let J=F-$,X=Math.min(J,B.byteLength),Y=B.subarray(0,X);if(A.set(Y,$),$+=X,this.totalByteLength-=X,X<B.byteLength)this.buffers.unshift(B.subarray(X))}return A}}by.BufferPool=Sy;class sJ{constructor(F){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let A=F.split(" ").join("%20");if(A.endsWith(".sock")){this.socketPath=decodeURIComponent(A);return}let $=`iLoveJS://${A}`,B;try{B=new mL1.URL($)}catch(D){let G=new X3.MongoRuntimeError(`Unable to parse ${A} with URL`);throw G.cause=D,G}let{hostname:J,port:X}=B,Y=decodeURIComponent(J).toLowerCase();if(Y.startsWith("[")&&Y.endsWith("]"))this.isIPv6=!0,Y=Y.substring(1,J.length-1);if(this.host=Y.toLowerCase(),typeof X==="number")this.port=X;else if(typeof X==="string"&&X!=="")this.port=Number.parseInt(X,10);else this.port=27017;if(this.port===0)throw new X3.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(F){return new sJ(F)}static fromHostPort(F,A){if(F.includes(":"))F=`[${F}]`;return sJ.fromString(`${F}:${A}`)}static fromSrvRecord({name:F,port:A}){return sJ.fromHostPort(F,A)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let F=this.host??"",A=this.port??0;return{host:F,port:A}}}by.HostAddress=sJ;by.DEFAULT_PK_FACTORY={createPk(){return new MI.ObjectId}};by.MONGODB_WARNING_CODE="MONGODB DRIVER";function uy(F){return process.emitWarning(F,{code:by.MONGODB_WARNING_CODE})}var Ry=new Set;function Vw1(F){if(!Ry.has(F))return Ry.add(F),uy(F)}function Ew1(F){return Object.values(F).join(", ")}function Lw1(F){if(!F)return!1;if(F.loadBalanced)return!0;if(F.description.logicalSessionTimeoutMinutes!=null){if(F.description.type!==pL1.ServerType.Standalone)return!0}return!1}function ww1(F,A=0){let $=Array.from(F);if(A>$.length)throw new X3.MongoRuntimeError("Limit must be less than the number of items");let B=$.length,J=A%$.length===0?1:$.length-A;while(B>J){let X=Math.floor(Math.random()*B);B-=1;let Y=$[B];$[B]=$[X],$[X]=Y}return A%$.length===0?$:$.slice(J)}function Iw1(F){if(F.aggregate||F.count||F.distinct||F.find||F.geoNear)return!0;return!1}function Cw1(F,A){if(F==null&&A==null)return 0;if(F==null)return-1;if(A==null)return 1;return by.ByteUtils.compare(F.id,A.id)}function fy(F){if(typeof F==="number")return Math.trunc(F);let A=Number.parseInt(String(F),10);return Number.isNaN(A)?null:A}function Nw1(F){let A=fy(F);return A!=null&&A>=0?A:null}function Pw1(F,A){let $=F.endsWith(".")?F.slice(0,F.length-1):F,B=A.endsWith(".")?A.slice(0,A.length-1):A,J=/^.*?\./,X=B.split(".").length<3,Y=`.${$.replace(J,"")}`,D=X?B:`.${B.replace(J,"")}`;if(!D.startsWith("."))D="."+D;if(X&&$.split(".").length<=B.split(".").length)throw new X3.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!Y.endsWith(D))throw new X3.MongoAPIError("Server record does not share hostname with parent URI")}function Rw1(F,A={}){return new Promise(($,B)=>{let J,X=My.get(F,A,(Y)=>{Y.setEncoding("utf8");let D="";Y.on("data",(G)=>D+=G),Y.on("end",()=>{(0,RI.clearTimeout)(J),$({status:Y.statusCode,body:D})})}).on("error",(Y)=>{(0,RI.clearTimeout)(J),B(Y)}).end();J=(0,RI.setTimeout)(()=>{X.destroy(new X3.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function jw1(F,A={}){return await new Promise(($,B)=>{let J={method:"GET",timeout:1e4,json:!0,...hL1.parse(F),...A},X=My.request(J,(Y)=>{Y.setEncoding("utf8");let D="";Y.on("data",(G)=>{D+=G}),Y.once("end",()=>{if(A.json===!1){$(D);return}try{let G=JSON.parse(D);$(G)}catch{B(new X3.MongoRuntimeError(`Invalid JSON response: "${D}"`))}})});X.once("timeout",()=>X.destroy(new X3.MongoNetworkTimeoutError(`Network request to ${F} timed out after ${A.timeout} ms`))),X.once("error",(Y)=>B(Y)),X.end()})}by.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;by.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;by.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";by.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Mw1(F,A){return A&&F.test(A.toLowerCase())?!0:!1}function OI(){let F,A;return{promise:new Promise(function(J,X){F=J,A=X}),resolve:F,reject:A}}function Tw1(F){return}by.randomBytes=(0,dL1.promisify)(jy.randomBytes);async function kw1(F,A,$){$?.signal?.throwIfAborted();let{promise:B,resolve:J,reject:X}=OI(),Y=(Z)=>J(Z),D=(Z)=>X(Z),G=SI($?.signal,function(){X(this.reason)});F.once(A,Y).once("error",D);try{return await B}finally{F.off(A,Y),F.off("error",D),G?.[by.kDispose]()}}function Ow1(F,A,$){if($.forceServerObjectId??F.db.options?.forceServerObjectId??!1)return A;if(A._id==null)A._id=F.s.pkFactory.createPk();return A}async function Sw1(F,A){try{return await vL1.promises.access(F,A),!0}catch{return!1}}function uw1(F,A){if(F===0)return A;if(A===0)return F;return Math.min(F,A)}function fw1(){return}function xy(F,A,$=!0){if($){if(Buffer.isBuffer(A))A=(0,MI.deserialize)(A);if(Buffer.isBuffer(F))throw new X3.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!F||typeof F!=="object")return;for(let B of Object.keys(F)){let J=A[B];if(J&&J._bsontype==="Binary"&&J.sub_type===6){if(!F[GU.kDecoratedKeys])Object.defineProperty(F,GU.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});F[GU.kDecoratedKeys].push(B);continue}xy(F[B],J,!1)}}by.kDispose=Symbol.dispose??Symbol("dispose");function SI(F,A){if(F==null)return;return F.addEventListener("abort",A,{once:!0}),{[by.kDispose]:()=>F.removeEventListener("abort",A)}}async function xw1(F,{signal:A}){if(A==null)return await F;let{promise:$,reject:B}=OI(),J=A.aborted?B(A.reason):SI(A,function(){B(this.reason)});try{return await Promise.race([F,$])}finally{J?.[by.kDispose]()}}});var l6=Q((yy)=>{Object.defineProperty(yy,"__esModule",{value:!0});yy.LegacyTimeoutContext=yy.CSOTTimeoutContext=yy.TimeoutContext=yy.Timeout=yy.TimeoutError=void 0;var _y=x("timers"),h5=$1(),uI=z1();class ZU extends Error{get name(){return"TimeoutError"}constructor(F,A){super(F,A);this.duration=A.duration}static is(F){return F!=null&&typeof F==="object"&&"name"in F&&F.name==="TimeoutError"}}yy.TimeoutError=ZU;class e3 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(F=()=>null,A){let $=A?.duration??0,B=!!A?.unref,J=A?.rejection;if($<0)throw new h5.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let X;super((Y,D)=>{X=D,F(uI.noop,D)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=$,this.start=Math.trunc(performance.now()),J==null&&this.duration>0){if(this.id=(0,_y.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,X(new ZU(`Expired after ${$}ms`,{duration:$}))},this.duration),typeof this.id.unref==="function"&&B)this.id.unref()}else if(J!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,X(J)}clear(){(0,_y.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,uI.squashError),new ZU("Timed out",{duration:this.duration})}static expires(F,A){return new e3(void 0,{duration:F,unref:A})}static reject(F){return new e3(void 0,{duration:0,unref:!0,rejection:F})}}yy.Timeout=e3;function dI1(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in F&&typeof F.waitQueueTimeoutMS==="number"}function cI1(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"timeoutMS"in F&&typeof F.timeoutMS==="number"}class UU{static create(F){if(F.session?.timeoutContext!=null)return F.session?.timeoutContext;if(cI1(F))return new FX(F);else if(dI1(F))return new zU(F);else throw new h5.MongoRuntimeError("Unrecognized options")}}yy.TimeoutContext=UU;class FX extends UU{constructor(F){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=F.timeoutMS,this.serverSelectionTimeoutMS=F.serverSelectionTimeoutMS,this.socketTimeoutMS=F.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let F=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-F}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:F,serverSelectionTimeoutMS:A}=this;if(F<=0)return e3.reject(new h5.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(A!==0&&(0,uI.csotMin)(F,A)===A)this._serverSelectionTimeout=e3.expires(A);else if(F>0&&Number.isFinite(F))this._serverSelectionTimeout=e3.expires(F);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new h5.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return e3.expires(F);return e3.reject(new h5.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return e3.expires(F);return e3.reject(new h5.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(F){let{remainingTimeMS:A}=this;if(A<=0)throw new h5.MongoOperationTimeoutError(F??`Expired after ${this.timeoutMS}ms`);return A}clone(){let F=new FX({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return F.start=this.start,F}refreshed(){return new FX(this)}addMaxTimeMSToCommand(F,A){if(A.omitMaxTimeMS)return;let $=this.remainingTimeMS-this.minRoundTripTime;if($>0&&Number.isFinite($))F.maxTimeMS=$}getSocketTimeoutMS(){return 0}}yy.CSOTTimeoutContext=FX;class zU extends UU{constructor(F){super();this.options=F,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return e3.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return e3.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new zU(this.options)}addMaxTimeMSToCommand(F,A){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}yy.LegacyTimeoutContext=zU});var AX=Q((hy)=>{Object.defineProperty(hy,"__esModule",{value:!0});hy.Explain=hy.ExplainVerbosity=void 0;hy.validateExplainTimeoutOptions=rI1;hy.decorateWithExplain=tI1;var nI1=$1();hy.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class WU{constructor(F,A){if(typeof F==="boolean")this.verbosity=F?hy.ExplainVerbosity.allPlansExecution:hy.ExplainVerbosity.queryPlanner;else this.verbosity=F;this.maxTimeMS=A}static fromOptions({explain:F}={}){if(F==null)return;if(typeof F==="boolean"||typeof F==="string")return new WU(F);let{verbosity:A,maxTimeMS:$}=F;return new WU(A,$)}}hy.Explain=WU;function rI1(F,A){let{maxTimeMS:$,timeoutMS:B}=F;if(B!=null&&($!=null||A?.maxTimeMS!=null))throw new nI1.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function tI1(F,A){let{verbosity:$,maxTimeMS:B}=A,J={explain:F,verbosity:$};if(typeof B==="number")J.maxTimeMS=B;return J}});var N0=Q((cy)=>{Object.defineProperty(cy,"__esModule",{value:!0});cy.AbstractOperation=cy.Aspect=void 0;cy.defineAspects=FC1;var eI1=J0(),xI=F4();cy.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};class dy{constructor(F={}){this.readPreference=this.hasAspect(cy.Aspect.WRITE_OPERATION)?xI.ReadPreference.primary:xI.ReadPreference.fromOptions(F)??xI.ReadPreference.primary,this.bsonOptions=(0,eI1.resolveBSONOptions)(F),this._session=F.session!=null?F.session:void 0,this.options=F,this.bypassPinningCheck=!!F.bypassPinningCheck}hasAspect(F){let A=this.constructor;if(A.aspects==null)return!1;return A.aspects.has(F)}get session(){return this._session}set session(F){this._session=F}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(cy.Aspect.RETRYABLE)&&this.hasAspect(cy.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(cy.Aspect.RETRYABLE)&&this.hasAspect(cy.Aspect.WRITE_OPERATION)}handleOk(F){return F.toObject(this.bsonOptions)}handleError(F){throw F}}cy.AbstractOperation=dy;function FC1(F,A){if(!Array.isArray(A)&&!(A instanceof Set))A=[A];return A=new Set(A),Object.defineProperty(F,"aspects",{value:A,writable:!1}),A}});var W6=Q((ay)=>{Object.defineProperty(ay,"__esModule",{value:!0});ay.CommandOperation=void 0;var $C1=Y8(),BC1=$1(),bI=AX(),JC1=e9(),HU=z1(),py=J3(),m5=N0();class iy extends m5.AbstractOperation{constructor(F,A){super(A);this.options=A??{};let $=A?.dbName||A?.authdb;if($)this.ns=new HU.MongoDBNamespace($,"$cmd");else this.ns=F?F.s.namespace.withCollection("$cmd"):new HU.MongoDBNamespace("admin","$cmd");if(this.readConcern=JC1.ReadConcern.fromOptions(A),this.writeConcern=py.WriteConcern.fromOptions(A),this.hasAspect(m5.Aspect.EXPLAINABLE)){if(this.explain=bI.Explain.fromOptions(A),this.explain)(0,bI.validateExplainTimeoutOptions)(this.options,this.explain)}else if(A?.explain!=null)throw new BC1.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(m5.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}buildOptions(F){return{...this.options,...this.bsonOptions,timeoutContext:F,readPreference:this.readPreference,session:this.session}}buildCommand(F,A){let $=this.buildCommandDocument(F,A),B=this.session&&this.session.inTransaction();if(this.readConcern&&(0,HU.commandSupportsReadConcern)($)&&!B)Object.assign($,{readConcern:this.readConcern});if(this.writeConcern&&this.hasAspect(m5.Aspect.WRITE_OPERATION)&&!B)py.WriteConcern.apply($,this.writeConcern);if(this.options.collation&&typeof this.options.collation==="object"&&!this.hasAspect(m5.Aspect.SKIP_COLLATION))Object.assign($,{collation:this.options.collation});if(typeof this.options.maxTimeMS==="number")$.maxTimeMS=this.options.maxTimeMS;if(this.options.rawData!=null&&this.hasAspect(m5.Aspect.SUPPORTS_RAW_DATA)&&(0,HU.maxWireVersion)(F)>=$C1.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION)$.rawData=this.options.rawData;if(this.hasAspect(m5.Aspect.EXPLAINABLE)&&this.explain)return(0,bI.decorateWithExplain)($,this.explain);return $}}ay.CommandOperation=iy});var $X=Q((ty)=>{Object.defineProperty(ty,"__esModule",{value:!0});ty.AggregateOperation=ty.DB_AGGREGATE_COLLECTION=void 0;var gI=K0(),ry=$1(),XC1=J3(),YC1=W6(),TA=N0();ty.DB_AGGREGATE_COLLECTION=1;class _I extends YC1.CommandOperation{constructor(F,A,$){super(void 0,{...$,dbName:F.db});if(this.SERVER_COMMAND_RESPONSE_TYPE=gI.CursorResponse,this.options={...$},this.target=F.collection||ty.DB_AGGREGATE_COLLECTION,this.pipeline=A,this.hasWriteStage=!1,typeof $?.out==="string")this.pipeline=this.pipeline.concat({$out:$.out}),this.hasWriteStage=!0;else if(A.length>0){let B=A[A.length-1];if(B.$out||B.$merge)this.hasWriteStage=!0}if(!this.hasWriteStage)delete this.options.writeConcern;if(this.explain&&this.writeConcern)throw new ry.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if($?.cursor!=null&&typeof $.cursor!=="object")throw new ry.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?gI.ExplainedCursorResponse:gI.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(F){this.pipeline.push(F)}buildCommandDocument(){let F=this.options,A={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&this.writeConcern)XC1.WriteConcern.apply(A,this.writeConcern);if(F.bypassDocumentValidation===!0)A.bypassDocumentValidation=F.bypassDocumentValidation;if(typeof F.allowDiskUse==="boolean")A.allowDiskUse=F.allowDiskUse;if(F.hint)A.hint=F.hint;if(F.let)A.let=F.let;if(F.comment!==void 0)A.comment=F.comment;if(A.cursor=F.cursor||{},F.batchSize&&!this.hasWriteStage)A.cursor.batchSize=F.batchSize;return A}handleOk(F){return F}}ty.AggregateOperation=_I;(0,TA.defineAspects)(_I,[TA.Aspect.READ_OPERATION,TA.Aspect.RETRYABLE,TA.Aspect.EXPLAINABLE,TA.Aspect.CURSOR_CREATING,TA.Aspect.SUPPORTS_RAW_DATA])});var A4=Q((Bv)=>{Object.defineProperty(Bv,"__esModule",{value:!0});Bv.executeOperation=UC1;Bv.autoConnect=$v;var g4=$1(),ey=F4(),Fv=aJ(),DC1=l6(),yI=z1(),GC1=$X(),H7=N0(),ZC1=g4.MONGODB_ERROR_CODES.IllegalOperation,Av="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function UC1(F,A,$){if(!(A instanceof H7.AbstractOperation))throw new g4.MongoRuntimeError("This method requires a valid operation instance");let B=F.topology==null?await(0,yI.abortable)($v(F),A.options):F.topology,J=A.session,X;if(J==null)X=Symbol(),J=F.startSession({owner:X,explicit:!1});else if(J.hasEnded)throw new g4.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(J.snapshotEnabled&&!B.capabilities.supportsSnapshotReads)throw new g4.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(J.client!==F)throw new g4.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");A.session??=J;let Y=A.readPreference??ey.ReadPreference.primary,D=!!J?.inTransaction(),G=A.hasAspect(H7.Aspect.READ_OPERATION);if(D&&!Y.equals(ey.ReadPreference.primary)&&(G||A.commandName==="runCommand"))throw new g4.MongoTransactionError(`Read preference in a transaction must be primary, not: ${Y.mode}`);if(J?.isPinned&&J.transaction.isCommitted&&!A.bypassPinningCheck)J.unpin();$??=DC1.TimeoutContext.create({session:J,serverSelectionTimeoutMS:F.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.s.options.waitQueueTimeoutMS,timeoutMS:A.options.timeoutMS});try{return await zC1(A,{topology:B,timeoutContext:$,session:J,readPreference:Y})}finally{if(J?.owner!=null&&J.owner===X)await J.endSession()}}async function $v(F){if(F.topology==null){if(F.s.hasBeenClosed)throw new g4.MongoNotConnectedError("Client must be connected before running operations");F.s.options.__skipPingOnConnect=!0;try{if(await F.connect(),F.topology==null)throw new g4.MongoRuntimeError("client.connect did not create a topology but also did not throw");return F.topology}finally{delete F.s.options.__skipPingOnConnect}}return F.topology}async function zC1(F,{topology:A,timeoutContext:$,session:B,readPreference:J}){let X;if(F.hasAspect(H7.Aspect.MUST_SELECT_SAME_SERVER))X=(0,Fv.sameServerSelector)(F.server?.description);else if(F instanceof GC1.AggregateOperation&&F.hasWriteStage)X=(0,Fv.secondaryWritableServerSelector)(A.commonWireVersion,J);else X=J;let Y=await A.selectServer(X,{session:B,operationName:F.commandName,timeoutContext:$,signal:F.options.signal}),D=F.hasAspect(H7.Aspect.READ_OPERATION),G=F.hasAspect(H7.Aspect.WRITE_OPERATION),Z=B?.inTransaction()??!1,U=A.s.options.retryReads&&!Z&&F.canRetryRead,z=A.s.options.retryWrites&&!Z&&(0,yI.supportsRetryableWrites)(Y)&&F.canRetryWrite,W=F.hasAspect(H7.Aspect.RETRYABLE)&&B!=null&&(D&&U||G&&z);if(G&&z&&B!=null)F.options.willRetryWrite=!0,B.incrementTransactionNumber();let H=W?$.csotEnabled()?1/0:2:1,K,q;for(let V=0;V<H;V++){if(K){if(G&&K.code===ZC1)throw new g4.MongoServerError({message:Av,errmsg:Av,originalError:K});if(F.hasAspect(H7.Aspect.COMMAND_BATCHING)&&!F.canRetryWrite)throw K;if(G&&!(0,g4.isRetryableWriteError)(K))throw K;if(D&&!(0,g4.isRetryableReadError)(K))throw K;if(K instanceof g4.MongoNetworkError&&F.hasAspect(H7.Aspect.CURSOR_CREATING)&&B!=null&&B.isPinned&&!B.inTransaction())B.unpin({force:!0,forceClear:!0});if(Y=await A.selectServer(X,{session:B,operationName:F.commandName,previousServer:q,signal:F.options.signal}),G&&!(0,yI.supportsRetryableWrites)(Y))throw new g4.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}F.server=Y;try{if(V>0&&F.hasAspect(H7.Aspect.COMMAND_BATCHING))F.resetBatch();try{let E=await Y.command(F,$);return F.handleOk(E)}catch(E){return F.handleError(E)}}catch(E){if(!(E instanceof g4.MongoError))throw E;if(K!=null&&E.hasErrorLabel(g4.MongoErrorLabel.NoWritesPerformed))throw K;q=Y.description,K=E,$.clear()}}throw K??new g4.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var Dv=Q((Xv)=>{Object.defineProperty(Xv,"__esModule",{value:!0});Xv.ListDatabasesOperation=void 0;var KC1=K0(),Jv=z1(),qC1=W6(),vI=N0();class hI extends qC1.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=KC1.MongoDBResponse,this.options=A??{},this.ns=new Jv.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(F,A){let $={listDatabases:1};if(typeof this.options.nameOnly==="boolean")$.nameOnly=this.options.nameOnly;if(this.options.filter)$.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")$.authorizedDatabases=this.options.authorizedDatabases;if((0,Jv.maxWireVersion)(F)>=9&&this.options.comment!==void 0)$.comment=this.options.comment;return $}}Xv.ListDatabasesOperation=hI;(0,vI.defineAspects)(hI,[vI.Aspect.READ_OPERATION,vI.Aspect.RETRYABLE])});var dI=Q((Zv)=>{Object.defineProperty(Zv,"__esModule",{value:!0});Zv.RemoveUserOperation=void 0;var QC1=K0(),VC1=W6(),Gv=N0();class mI extends VC1.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=QC1.MongoDBResponse,this.options=$,this.username=A}get commandName(){return"dropUser"}buildCommandDocument(F){return{dropUser:this.username}}handleOk(F){return!0}}Zv.RemoveUserOperation=mI;(0,Gv.defineAspects)(mI,[Gv.Aspect.WRITE_OPERATION])});var BX=Q((Hv)=>{Object.defineProperty(Hv,"__esModule",{value:!0});Hv.RunCursorCommandOperation=Hv.RunCommandOperation=void 0;var zv=K0(),EC1=N0();class cI extends EC1.AbstractOperation{constructor(F,A,$){super($);this.SERVER_COMMAND_RESPONSE_TYPE=zv.MongoDBResponse,this.command=A,this.options=$,this.ns=F.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(F,A){return this.command}buildOptions(F){return{...this.options,session:this.session,timeoutContext:F,signal:this.options.signal,readPreference:this.options.readPreference}}}Hv.RunCommandOperation=cI;class Wv extends cI{constructor(){super(...arguments);this.SERVER_COMMAND_RESPONSE_TYPE=zv.CursorResponse}handleOk(F){return F}}Hv.RunCursorCommandOperation=Wv});var Ev=Q((Qv)=>{Object.defineProperty(Qv,"__esModule",{value:!0});Qv.ValidateCollectionOperation=void 0;var wC1=K0(),lI=$1(),IC1=W6();class qv extends IC1.CommandOperation{constructor(F,A,$){super(F.s.db,$);this.SERVER_COMMAND_RESPONSE_TYPE=wC1.MongoDBResponse,this.options=$,this.collectionName=A}get commandName(){return"validate"}buildCommandDocument(F,A){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(($)=>$[0]!=="session"))}}handleOk(F){let A=super.handleOk(F);if(A.result!=null&&typeof A.result!=="string")throw new lI.MongoUnexpectedServerResponseError("Error with validation data");if(A.result!=null&&A.result.match(/exception|corrupt/)!=null)throw new lI.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(A.valid!=null&&!A.valid)throw new lI.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return F}}Qv.ValidateCollectionOperation=qv});var pI=Q((wv)=>{Object.defineProperty(wv,"__esModule",{value:!0});wv.Admin=void 0;var CC1=J0(),KU=A4(),NC1=Dv(),PC1=dI(),RC1=BX(),jC1=Ev(),MC1=z1();class Lv{constructor(F){this.s={db:F}}async command(F,A){return await(0,KU.executeOperation)(this.s.db.client,new RC1.RunCommandOperation(new MC1.MongoDBNamespace("admin"),F,{...(0,CC1.resolveBSONOptions)(A),session:A?.session,readPreference:A?.readPreference,timeoutMS:A?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(F){return await this.command({buildinfo:1},F)}async serverInfo(F){return await this.command({buildinfo:1},F)}async serverStatus(F){return await this.command({serverStatus:1},F)}async ping(F){return await this.command({ping:1},F)}async removeUser(F,A){return await(0,KU.executeOperation)(this.s.db.client,new PC1.RemoveUserOperation(this.s.db,F,{dbName:"admin",...A}))}async validateCollection(F,A={}){return await(0,KU.executeOperation)(this.s.db.client,new jC1.ValidateCollectionOperation(this,F,A))}async listDatabases(F){return await(0,KU.executeOperation)(this.s.db.client,new NC1.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...F}))}async replSetGetStatus(F){return await this.command({replSetGetStatus:1},F)}}wv.Admin=Lv});var rI=Q((Cv)=>{Object.defineProperty(Cv,"__esModule",{value:!0});Cv.DeleteManyOperation=Cv.DeleteOneOperation=Cv.DeleteOperation=void 0;Cv.makeDeleteStatement=nI;var TC1=K0(),JX=$1(),kC1=z1(),OC1=W6(),Y3=N0();class XX extends OC1.CommandOperation{constructor(F,A,$){super(void 0,$);this.SERVER_COMMAND_RESPONSE_TYPE=TC1.MongoDBResponse,this.options=$,this.ns=F,this.statements=A}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.limit!=null?F.limit>0:!0)}buildCommandDocument(F,A){let $=this.options,B=typeof $.ordered==="boolean"?$.ordered:!0,J={delete:this.ns.collection,deletes:this.statements,ordered:B};if($.let)J.let=$.let;if($.comment!==void 0)J.comment=$.comment;if(this.writeConcern&&this.writeConcern.w===0&&(0,kC1.maxWireVersion)(F)<9){if(this.statements.find((Y)=>Y.hint))throw new JX.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+")}return J}}Cv.DeleteOperation=XX;class iI extends XX{constructor(F,A,$){super(F,[nI(A,{...$,limit:1})],$)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new JX.MongoServerError(A);if(A.writeErrors)throw new JX.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}Cv.DeleteOneOperation=iI;class aI extends XX{constructor(F,A,$){super(F,[nI(A,$)],$)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new JX.MongoServerError(A);if(A.writeErrors)throw new JX.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}Cv.DeleteManyOperation=aI;function nI(F,A){let $={q:F,limit:typeof A.limit==="number"?A.limit:0};if(A.collation)$.collation=A.collation;if(A.hint)$.hint=A.hint;return $}(0,Y3.defineAspects)(XX,[Y3.Aspect.RETRYABLE,Y3.Aspect.WRITE_OPERATION,Y3.Aspect.SUPPORTS_RAW_DATA]);(0,Y3.defineAspects)(iI,[Y3.Aspect.RETRYABLE,Y3.Aspect.WRITE_OPERATION,Y3.Aspect.EXPLAINABLE,Y3.Aspect.SKIP_COLLATION,Y3.Aspect.SUPPORTS_RAW_DATA]);(0,Y3.defineAspects)(aI,[Y3.Aspect.WRITE_OPERATION,Y3.Aspect.EXPLAINABLE,Y3.Aspect.SKIP_COLLATION,Y3.Aspect.SUPPORTS_RAW_DATA])});var sI=Q((Rv)=>{Object.defineProperty(Rv,"__esModule",{value:!0});Rv.InsertOneOperation=Rv.InsertOperation=void 0;var xC1=K0(),Pv=$1(),bC1=z1(),gC1=W6(),D8=N0();class qU extends gC1.CommandOperation{constructor(F,A,$){super(void 0,$);this.SERVER_COMMAND_RESPONSE_TYPE=xC1.MongoDBResponse,this.options={...$,checkKeys:$.checkKeys??!1},this.ns=F,this.documents=A}get commandName(){return"insert"}buildCommandDocument(F,A){let $=this.options??{},B=typeof $.ordered==="boolean"?$.ordered:!0,J={insert:this.ns.collection,documents:this.documents,ordered:B};if(typeof $.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=$.bypassDocumentValidation;if($.comment!==void 0)J.comment=$.comment;return J}}Rv.InsertOperation=qU;class tI extends qU{constructor(F,A,$){super(F.s.namespace,[(0,bC1.maybeAddIdToDocuments)(F,A,$)],$)}handleOk(F){let A=super.handleOk(F);if(A.code)throw new Pv.MongoServerError(A);if(A.writeErrors)throw new Pv.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}Rv.InsertOneOperation=tI;(0,D8.defineAspects)(qU,[D8.Aspect.RETRYABLE,D8.Aspect.WRITE_OPERATION,D8.Aspect.SUPPORTS_RAW_DATA]);(0,D8.defineAspects)(tI,[D8.Aspect.RETRYABLE,D8.Aspect.WRITE_OPERATION,D8.Aspect.SUPPORTS_RAW_DATA])});var OA=Q((Tv)=>{Object.defineProperty(Tv,"__esModule",{value:!0});Tv.formatSort=nC1;var Mv=$1();function kA(F=1){let A=`${F}`.toLowerCase();if(yC1(F))return F;switch(A){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Mv.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(F)}`)}}function yC1(F){return typeof F==="object"&&F!=null&&"$meta"in F&&typeof F.$meta==="string"}function vC1(F){if(Array.isArray(F)&&F.length===2)try{return kA(F[1]),!0}catch{return!1}return!1}function hC1(F){return Array.isArray(F)&&Array.isArray(F[0])}function mC1(F){return F instanceof Map&&F.size>0}function dC1(F){return Array.isArray(F)}function cC1(F){return new Map([[`${F[0]}`,kA([F[1]])]])}function lC1(F){let A=F.map(([$,B])=>[`${$}`,kA(B)]);return new Map(A)}function pC1(F){let A=F.map(($)=>[`${$}`,1]);return new Map(A)}function iC1(F){let A=Object.entries(F).map(([$,B])=>[`${$}`,kA(B)]);return new Map(A)}function aC1(F){let A=Array.from(F).map(([$,B])=>[`${$}`,kA(B)]);return new Map(A)}function nC1(F,A){if(F==null)return;if(typeof F==="string")return new Map([[F,kA(A)]]);if(typeof F!=="object")throw new Mv.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(F)} Sort must be a valid object`);if(!dC1(F)){if(mC1(F))return aC1(F);if(Object.keys(F).length)return iC1(F);return}if(!F.length)return;if(hC1(F))return lC1(F);if(vC1(F))return cC1(F);return pC1(F)}});var $C=Q((kv)=>{Object.defineProperty(kv,"__esModule",{value:!0});kv.ReplaceOneOperation=kv.UpdateManyOperation=kv.UpdateOneOperation=kv.UpdateOperation=void 0;kv.makeUpdateStatement=QU;var tC1=K0(),F2=$1(),sC1=OA(),oI=z1(),oC1=W6(),P6=N0();class SA extends oC1.CommandOperation{constructor(F,A,$){super(void 0,$);this.SERVER_COMMAND_RESPONSE_TYPE=tC1.MongoDBResponse,this.options=$,this.ns=F,this.statements=A}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.multi==null||F.multi===!1)}buildCommandDocument(F,A){let $=this.options,B={update:this.ns.collection,updates:this.statements,ordered:$.ordered??!0};if(typeof $.bypassDocumentValidation==="boolean")B.bypassDocumentValidation=$.bypassDocumentValidation;if($.let)B.let=$.let;if($.comment!==void 0)B.comment=$.comment;return B}}kv.UpdateOperation=SA;class eI extends SA{constructor(F,A,$,B){super(F,[QU(A,$,{...B,multi:!1})],B);if(!(0,oI.hasAtomicOperators)($,B))throw new F2.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new F2.MongoServerError(A);if(A.writeErrors)throw new F2.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}kv.UpdateOneOperation=eI;class FC extends SA{constructor(F,A,$,B){super(F,[QU(A,$,{...B,multi:!0})],B);if(!(0,oI.hasAtomicOperators)($,B))throw new F2.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new F2.MongoServerError(A);if(A.writeErrors)throw new F2.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}kv.UpdateManyOperation=FC;class AC extends SA{constructor(F,A,$,B){super(F,[QU(A,$,{...B,multi:!1})],B);if((0,oI.hasAtomicOperators)($))throw new F2.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new F2.MongoServerError(A);if(A.writeErrors)throw new F2.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}kv.ReplaceOneOperation=AC;function QU(F,A,$){if(F==null||typeof F!=="object")throw new F2.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(A==null||typeof A!=="object")throw new F2.MongoInvalidArgumentError("Document must be a valid JavaScript object");let B={q:F,u:A};if(typeof $.upsert==="boolean")B.upsert=$.upsert;if($.multi)B.multi=$.multi;if($.hint)B.hint=$.hint;if($.arrayFilters)B.arrayFilters=$.arrayFilters;if($.collation)B.collation=$.collation;if(!$.multi&&$.sort!=null)B.sort=(0,sC1.formatSort)($.sort);return B}(0,P6.defineAspects)(SA,[P6.Aspect.RETRYABLE,P6.Aspect.WRITE_OPERATION,P6.Aspect.SKIP_COLLATION,P6.Aspect.SUPPORTS_RAW_DATA]);(0,P6.defineAspects)(eI,[P6.Aspect.RETRYABLE,P6.Aspect.WRITE_OPERATION,P6.Aspect.EXPLAINABLE,P6.Aspect.SKIP_COLLATION,P6.Aspect.SUPPORTS_RAW_DATA]);(0,P6.defineAspects)(FC,[P6.Aspect.WRITE_OPERATION,P6.Aspect.EXPLAINABLE,P6.Aspect.SKIP_COLLATION,P6.Aspect.SUPPORTS_RAW_DATA]);(0,P6.defineAspects)(AC,[P6.Aspect.RETRYABLE,P6.Aspect.WRITE_OPERATION,P6.Aspect.SKIP_COLLATION,P6.Aspect.SUPPORTS_RAW_DATA])});var ZX=Q((_v)=>{Object.defineProperty(_v,"__esModule",{value:!0});_v.BulkOperationBase=_v.FindOperators=_v.MongoBulkWriteError=_v.WriteError=_v.WriteConcernError=_v.BulkWriteResult=_v.Batch=_v.BatchType=void 0;_v.mergeBatchResults=BC;var fv=J0(),p6=$1(),DX=rI(),BN1=A4(),JN1=sI(),d5=$C(),XN1=l6(),A2=z1(),Sv=J3();_v.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class xv{constructor(F,A){this.originalZeroIndex=A,this.currentIndex=0,this.originalIndexes=[],this.batchType=F,this.operations=[],this.size=0,this.sizeBytes=0}}_v.Batch=xv;class K7{static generateIdMap(F){let A={};for(let $ of F)A[$.index]=$._id;return A}constructor(F,A){this.result=F,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=K7.generateIdMap(this.result.upserted),this.insertedIds=K7.generateIdMap(this.getSuccessfullyInsertedIds(F,A)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(F,A){if(F.writeErrors.length===0)return F.insertedIds;if(A)return F.insertedIds.slice(0,F.writeErrors[0].index);return F.insertedIds.filter(({index:$})=>!F.writeErrors.some((B)=>$===B.index))}getUpsertedIdAt(F){return this.result.upserted[F]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(F){return F<this.result.writeErrors.length?this.result.writeErrors[F]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let F="";for(let A=0;A<this.result.writeConcernErrors.length;A++){let $=this.result.writeConcernErrors[A];if(F=F+$.errmsg,A===0)F=F+" and "}return new GX({errmsg:F,code:p6.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${fv.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}_v.BulkWriteResult=K7;class GX{constructor(F){this.serverError=F}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}_v.WriteConcernError=GX;class VU{constructor(F){this.err=F}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}_v.WriteError=VU;function BC(F,A,$,B){if($)B=$;else if(B&&B.result)B=B.result;if(B==null)return;if(B.ok===0&&A.ok===1){A.ok=0;let X={index:0,code:B.code||0,errmsg:B.message,errInfo:B.errInfo,op:F.operations[0]};A.writeErrors.push(new VU(X));return}else if(B.ok===0&&A.ok===0)return;if(gv(F)&&B.n)A.nInserted=A.nInserted+B.n;if(XC(F)&&B.n)A.nRemoved=A.nRemoved+B.n;let J=0;if(Array.isArray(B.upserted)){J=B.upserted.length;for(let X=0;X<B.upserted.length;X++)A.upserted.push({index:B.upserted[X].index+F.originalZeroIndex,_id:B.upserted[X]._id})}else if(B.upserted)J=1,A.upserted.push({index:F.originalZeroIndex,_id:B.upserted});if(JC(F)&&B.n){let X=B.nModified;if(A.nUpserted=A.nUpserted+J,A.nMatched=A.nMatched+(B.n-J),typeof X==="number")A.nModified=A.nModified+X;else A.nModified=0}if(Array.isArray(B.writeErrors))for(let X=0;X<B.writeErrors.length;X++){let Y={index:F.originalIndexes[B.writeErrors[X].index],code:B.writeErrors[X].code,errmsg:B.writeErrors[X].errmsg,errInfo:B.writeErrors[X].errInfo,op:F.operations[B.writeErrors[X].index]};A.writeErrors.push(new VU(Y))}if(B.writeConcernError)A.writeConcernErrors.push(new GX(B.writeConcernError))}async function uv(F,A){if(F.s.batches.length===0)return new K7(F.s.bulkResult,F.isOrdered);for(let B of F.s.batches){let J=(0,A2.resolveOptions)(F,{...A,ordered:F.isOrdered});if(J.bypassDocumentValidation!==!0)delete J.bypassDocumentValidation;if(F.s.bypassDocumentValidation===!0)J.bypassDocumentValidation=!0;if(F.s.checkKeys===!1)J.checkKeys=!1;if(J.retryWrites){if(JC(B))J.retryWrites=J.retryWrites&&!B.operations.some((Z)=>Z.multi);if(XC(B))J.retryWrites=J.retryWrites&&!B.operations.some((Z)=>Z.limit===0)}let X=gv(B)?new JN1.InsertOperation(F.s.namespace,B.operations,J):JC(B)?new d5.UpdateOperation(F.s.namespace,B.operations,J):XC(B)?new DX.DeleteOperation(F.s.namespace,B.operations,J):null;if(X==null)throw new p6.MongoRuntimeError(`Unknown batchType: ${B.batchType}`);let Y=null,D;try{D=await(0,BN1.executeOperation)(F.s.collection.client,X,J.timeoutContext)}catch(Z){Y=Z}if(Y!=null)if(Y instanceof p6.MongoWriteConcernError){BC(B,F.s.bulkResult,Y,D);let Z=new K7(F.s.bulkResult,F.isOrdered);throw new uA({message:Y.result.writeConcernError.errmsg,code:Y.result.writeConcernError.code},Z)}else throw new uA(Y,new K7(F.s.bulkResult,F.isOrdered));BC(B,F.s.bulkResult,Y,D);let G=new K7(F.s.bulkResult,F.isOrdered);F.handleWriteError(G)}F.s.batches.length=0;let $=new K7(F.s.bulkResult,F.isOrdered);return F.handleWriteError($),$}class uA extends p6.MongoServerError{constructor(F,A){super(F);if(this.writeErrors=[],F instanceof GX)this.err=F;else if(!(F instanceof Error))this.message=F.message,this.code=F.code,this.writeErrors=F.writeErrors??[];this.result=A,Object.assign(this,F)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}_v.MongoBulkWriteError=uA;class YC{constructor(F){this.bulkOperation=F}update(F){let A=YX(this.bulkOperation);return this.bulkOperation.addToOperationsList(_v.BatchType.UPDATE,(0,d5.makeUpdateStatement)(A.selector,F,{...A,multi:!0}))}updateOne(F){if(!(0,A2.hasAtomicOperators)(F,this.bulkOperation.bsonOptions))throw new p6.MongoInvalidArgumentError("Update document requires atomic operators");let A=YX(this.bulkOperation);return this.bulkOperation.addToOperationsList(_v.BatchType.UPDATE,(0,d5.makeUpdateStatement)(A.selector,F,{...A,multi:!1}))}replaceOne(F){if((0,A2.hasAtomicOperators)(F))throw new p6.MongoInvalidArgumentError("Replacement document must not use atomic operators");let A=YX(this.bulkOperation);return this.bulkOperation.addToOperationsList(_v.BatchType.UPDATE,(0,d5.makeUpdateStatement)(A.selector,F,{...A,multi:!1}))}deleteOne(){let F=YX(this.bulkOperation);return this.bulkOperation.addToOperationsList(_v.BatchType.DELETE,(0,DX.makeDeleteStatement)(F.selector,{...F,limit:1}))}delete(){let F=YX(this.bulkOperation);return this.bulkOperation.addToOperationsList(_v.BatchType.DELETE,(0,DX.makeDeleteStatement)(F.selector,{...F,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=F,this}arrayFilters(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=F,this}hint(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=F,this}}_v.FindOperators=YC;class bv{constructor(F,A,$){this.collection=F,this.isOrdered=$;let B=(0,A2.getTopology)(F);A=A==null?{}:A;let J=F.s.namespace,X=!1,Y=void 0,D=B.lastHello(),G=!!(B.s.options&&B.s.options.autoEncrypter),Z=D&&D.maxBsonObjectSize?D.maxBsonObjectSize:16777216,U=G?2097152:Z,z=D&&D.maxWriteBatchSize?D.maxWriteBatchSize:1000,W=(z-1).toString(10).length+2,H=Object.assign({},A);H=(0,A2.applyRetryableWrites)(H,F.db);let K={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:K,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:Sv.WriteConcern.fromOptions(A),maxBsonObjectSize:Z,maxBatchSizeBytes:U,maxWriteBatchSize:z,maxKeySize:W,namespace:J,topology:B,options:H,bsonOptions:(0,fv.resolveBSONOptions)(A),currentOp:Y,executed:X,collection:F,err:void 0,checkKeys:typeof A.checkKeys==="boolean"?A.checkKeys:!1},A.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(F){return(0,A2.maybeAddIdToDocuments)(this.collection,F,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(_v.BatchType.INSERT,F)}find(F){if(!F)throw new p6.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:F},new YC(this)}raw(F){if(F==null||typeof F!=="object")throw new p6.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in F){let A=this.shouldForceServerObjectId(),$=F.insertOne&&F.insertOne.document==null?F.insertOne:F.insertOne.document;return(0,A2.maybeAddIdToDocuments)(this.collection,$,{forceServerObjectId:A}),this.addToOperationsList(_v.BatchType.INSERT,$)}if("replaceOne"in F||"updateOne"in F||"updateMany"in F){if("replaceOne"in F){if("q"in F.replaceOne)throw new p6.MongoInvalidArgumentError("Raw operations are not allowed");let A=(0,d5.makeUpdateStatement)(F.replaceOne.filter,F.replaceOne.replacement,{...F.replaceOne,multi:!1});if((0,A2.hasAtomicOperators)(A.u))throw new p6.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(_v.BatchType.UPDATE,A)}if("updateOne"in F){if("q"in F.updateOne)throw new p6.MongoInvalidArgumentError("Raw operations are not allowed");let A=(0,d5.makeUpdateStatement)(F.updateOne.filter,F.updateOne.update,{...F.updateOne,multi:!1});if(!(0,A2.hasAtomicOperators)(A.u,this.bsonOptions))throw new p6.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(_v.BatchType.UPDATE,A)}if("updateMany"in F){if("q"in F.updateMany)throw new p6.MongoInvalidArgumentError("Raw operations are not allowed");let A=(0,d5.makeUpdateStatement)(F.updateMany.filter,F.updateMany.update,{...F.updateMany,multi:!0});if(!(0,A2.hasAtomicOperators)(A.u,this.bsonOptions))throw new p6.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(_v.BatchType.UPDATE,A)}}if("deleteOne"in F){if("q"in F.deleteOne)throw new p6.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(_v.BatchType.DELETE,(0,DX.makeDeleteStatement)(F.deleteOne.filter,{...F.deleteOne,limit:1}))}if("deleteMany"in F){if("q"in F.deleteMany)throw new p6.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(_v.BatchType.DELETE,(0,DX.makeDeleteStatement)(F.deleteMany.filter,{...F.deleteMany,limit:0}))}throw new p6.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let F=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)F.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)F.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)F.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)F.push(this.s.currentRemoveBatch)}return F}async execute(F={}){if(this.s.executed)throw new p6.MongoBatchReExecutionError;let A=Sv.WriteConcern.fromOptions(F);if(A)this.s.writeConcern=A;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new p6.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let $=(0,A2.resolveOptions)(this.collection,{...this.s.options,...F});if($.timeoutContext??=XN1.TimeoutContext.create({session:$.session,timeoutMS:$.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),$.session==null)return await this.collection.client.withSession({explicit:!1},async(B)=>{return await uv(this,{...$,session:B})});return await uv(this,{...$})}handleWriteError(F){if(this.s.bulkResult.writeErrors.length>0){let $=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new uA({message:$,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},F)}let A=F.getWriteConcernError();if(A)throw new uA(A,F)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}}_v.BulkOperationBase=bv;function gv(F){return F.batchType===_v.BatchType.INSERT}function JC(F){return F.batchType===_v.BatchType.UPDATE}function XC(F){return F.batchType===_v.BatchType.DELETE}function YX(F){let{currentOp:A}=F.s;if(F.s.currentOp=void 0,!A)A={};return A}});var DC=Q((mv)=>{Object.defineProperty(mv,"__esModule",{value:!0});mv.OrderedBulkOperation=void 0;var HN1=J0(),vv=$1(),EU=ZX();class hv extends EU.BulkOperationBase{constructor(F,A){super(F,A,!0)}addToOperationsList(F,A){let $=HN1.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if($>=this.s.maxBsonObjectSize)throw new vv.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new EU.Batch(F,this.s.currentIndex);let B=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+B+$>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new EU.Batch(F,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(F===EU.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:A._id});if(Array.isArray(A))throw new vv.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(A),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=B+$,this.s.currentIndex+=1,this}}mv.OrderedBulkOperation=hv});var GC=Q((pv)=>{Object.defineProperty(pv,"__esModule",{value:!0});pv.UnorderedBulkOperation=void 0;var KN1=J0(),cv=$1(),q7=ZX();class lv extends q7.BulkOperationBase{constructor(F,A){super(F,A,!1)}handleWriteError(F){if(this.s.batches.length)return;return super.handleWriteError(F)}addToOperationsList(F,A){let $=KN1.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if($>=this.s.maxBsonObjectSize)throw new cv.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,F===q7.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(F===q7.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(F===q7.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let B=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new q7.Batch(F,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+B+$>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new q7.Batch(F,this.s.currentIndex);if(Array.isArray(A))throw new cv.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(A),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,F===q7.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:A._id});else if(F===q7.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(F===q7.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=B+$,this}}pv.UnorderedBulkOperation=lv});var U8=Q((ov)=>{Object.defineProperty(ov,"__esModule",{value:!0});ov.MongoLogger=ov.MongoLoggableComponent=ov.SEVERITY_LEVEL_MAP=ov.DEFAULT_MAX_DOCUMENT_LENGTH=ov.SeverityLevel=void 0;ov.parseSeverityFromString=zC;ov.createStdioLogger=c5;ov.stringifyWithMaxLen=Z8;ov.defaultLogTransform=tv;var av=x("util"),nv=J0(),d0=N6(),l5=z1();ov.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});ov.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class rv extends Map{constructor(F){let A=[];for(let[$,B]of F)A.push([B,$]);A.push(...F);super(A)}getNumericSeverityLevel(F){return this.get(F)}getSeverityLevelName(F){return this.get(F)}}ov.SEVERITY_LEVEL_MAP=new rv([[ov.SeverityLevel.OFF,-1/0],[ov.SeverityLevel.EMERGENCY,0],[ov.SeverityLevel.ALERT,1],[ov.SeverityLevel.CRITICAL,2],[ov.SeverityLevel.ERROR,3],[ov.SeverityLevel.WARNING,4],[ov.SeverityLevel.NOTICE,5],[ov.SeverityLevel.INFORMATIONAL,6],[ov.SeverityLevel.DEBUG,7],[ov.SeverityLevel.TRACE,8]]);ov.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function zC(F){let A=Object.values(ov.SeverityLevel),$=F?.toLowerCase();if($!=null&&A.includes($))return $;return null}function c5(F){return{write:(0,av.promisify)((A,$)=>{let B=(0,av.inspect)(A,{compact:!0,breakLength:1/0});F.write(`${B}
`,"utf-8",$);return})}}function qN1({MONGODB_LOG_PATH:F},{mongodbLogPath:A}){if(typeof A==="string"&&/^stderr$/i.test(A))return{mongodbLogPath:c5(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof A==="string"&&/^stdout$/i.test(A))return{mongodbLogPath:c5(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof A==="object"&&typeof A?.write==="function")return{mongodbLogPath:A,mongodbLogPathIsStdErr:!1};if(F&&/^stderr$/i.test(F))return{mongodbLogPath:c5(process.stderr),mongodbLogPathIsStdErr:!0};if(F&&/^stdout$/i.test(F))return{mongodbLogPath:c5(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:c5(process.stderr),mongodbLogPathIsStdErr:!0}}function fA(F,A,$){return zC(F)??zC(A)??$}function QN1(F,A){let $=ov.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F),B=ov.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A);return $<B?-1:$>B?1:0}function Z8(F,A,$={}){let B="",J=0,X=function(D,G){if(J>=A)return;if(D==="")return J+=1,G;if(J+=D.length+4,G==null)return G;switch(typeof G){case"string":J+=G.length+2;break;case"number":case"bigint":J+=String(G).length;break;case"boolean":J+=G?4:5;break;case"object":if((0,l5.isUint8Array)(G))J+=22+G.byteLength+G.byteLength*0.33+18|0;else if("_bsontype"in G){let Z=G;switch(Z._bsontype){case"Int32":J+=String(Z.value).length;break;case"Double":J+=(Z.value|0)===Z.value?String(Z.value).length+2:String(Z.value).length;break;case"Long":J+=Z.toString().length;break;case"ObjectId":J+=35;break;case"MaxKey":case"MinKey":J+=13;break;case"Binary":J+=22+G.position+G.position*0.33+18|0;break;case"Timestamp":J+=19+String(Z.t).length+5+String(Z.i).length+2;break;case"Code":if(Z.scope==null)J+=Z.code.length+10+2;else J+=Z.code.length+10+11;break;case"BSONRegExp":J+=34+Z.pattern.length+13+Z.options.length+3;break}}}return G};if(typeof F==="string")B=F;else if(typeof F==="function")B=F.name;else try{if(A!==0)B=nv.EJSON.stringify(F,X,0,$);else B=nv.EJSON.stringify(F,$)}catch(Y){B=`Extended JSON serialization failed with: ${Y.message}`}if(A!==0&&B.length>A&&B.charCodeAt(A-1)!==B.codePointAt(A-1)){if(A--,A===0)return""}return A!==0&&B.length>A?`${B.slice(0,A)}...`:B}function VN1(F){let A=F;return A.toLog!==void 0&&typeof A.toLog==="function"}function LU(F,A,$=ov.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:B,operation:J,topologyDescription:X,message:Y}=A;return F.selector=Z8(B,$),F.operation=J,F.topologyDescription=Z8(X,$),F.message=Y,F}function ZC(F,A){F.commandName=A.commandName,F.requestId=A.requestId,F.driverConnectionId=A.connectionId;let{host:$,port:B}=l5.HostAddress.fromString(A.address).toHostPort();if(F.serverHost=$,F.serverPort=B,A?.serviceId)F.serviceId=A.serviceId.toHexString();return F.databaseName=A.databaseName,F.serverConnectionId=A.serverConnectionId,F}function F9(F,A){let{host:$,port:B}=l5.HostAddress.fromString(A.address).toHostPort();return F.serverHost=$,F.serverPort=B,F}function G8(F,A){return F.topologyId=A.topologyId,F}function UC(F,A){let{awaited:$,connectionId:B}=A;F.awaited=$,F.driverConnectionId=A.connectionId;let{host:J,port:X}=l5.HostAddress.fromString(B).toHostPort();return F.serverHost=J,F.serverPort=X,F}function tv(F,A=ov.DEFAULT_MAX_DOCUMENT_LENGTH){let $=Object.create(null);switch(F.name){case d0.SERVER_SELECTION_STARTED:return $=LU($,F,A),$;case d0.SERVER_SELECTION_FAILED:return $=LU($,F,A),$.failure=F.failure?.message,$;case d0.SERVER_SELECTION_SUCCEEDED:return $=LU($,F,A),$.serverHost=F.serverHost,$.serverPort=F.serverPort,$;case d0.WAITING_FOR_SUITABLE_SERVER:return $=LU($,F,A),$.remainingTimeMS=F.remainingTimeMS,$;case d0.COMMAND_STARTED:return $=ZC($,F),$.message="Command started",$.command=Z8(F.command,A,{relaxed:!0}),$.databaseName=F.databaseName,$;case d0.COMMAND_SUCCEEDED:return $=ZC($,F),$.message="Command succeeded",$.durationMS=F.duration,$.reply=Z8(F.reply,A,{relaxed:!0}),$;case d0.COMMAND_FAILED:return $=ZC($,F),$.message="Command failed",$.durationMS=F.duration,$.failure=F.failure?.message??"(redacted)",$;case d0.CONNECTION_POOL_CREATED:if($=F9($,F),$.message="Connection pool created",F.options){let{maxIdleTimeMS:B,minPoolSize:J,maxPoolSize:X,maxConnecting:Y,waitQueueTimeoutMS:D}=F.options;$={...$,maxIdleTimeMS:B,minPoolSize:J,maxPoolSize:X,maxConnecting:Y,waitQueueTimeoutMS:D}}return $;case d0.CONNECTION_POOL_READY:return $=F9($,F),$.message="Connection pool ready",$;case d0.CONNECTION_POOL_CLEARED:if($=F9($,F),$.message="Connection pool cleared",F.serviceId?._bsontype==="ObjectId")$.serviceId=F.serviceId?.toHexString();return $;case d0.CONNECTION_POOL_CLOSED:return $=F9($,F),$.message="Connection pool closed",$;case d0.CONNECTION_CREATED:return $=F9($,F),$.message="Connection created",$.driverConnectionId=F.connectionId,$;case d0.CONNECTION_READY:return $=F9($,F),$.message="Connection ready",$.driverConnectionId=F.connectionId,$.durationMS=F.durationMS,$;case d0.CONNECTION_CLOSED:switch($=F9($,F),$.message="Connection closed",$.driverConnectionId=F.connectionId,F.reason){case"stale":$.reason="Connection became stale because the pool was cleared";break;case"idle":$.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if($.reason="An error occurred while using the connection",F.error)$.error=F.error;break;case"poolClosed":$.reason="Connection pool was closed";break;default:$.reason=`Unknown close reason: ${F.reason}`}return $;case d0.CONNECTION_CHECK_OUT_STARTED:return $=F9($,F),$.message="Connection checkout started",$;case d0.CONNECTION_CHECK_OUT_FAILED:switch($=F9($,F),$.message="Connection checkout failed",F.reason){case"poolClosed":$.reason="Connection pool was closed";break;case"timeout":$.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if($.reason="An error occurred while trying to establish a new connection",F.error)$.error=F.error;break;default:$.reason=`Unknown close reason: ${F.reason}`}return $.durationMS=F.durationMS,$;case d0.CONNECTION_CHECKED_OUT:return $=F9($,F),$.message="Connection checked out",$.driverConnectionId=F.connectionId,$.durationMS=F.durationMS,$;case d0.CONNECTION_CHECKED_IN:return $=F9($,F),$.message="Connection checked in",$.driverConnectionId=F.connectionId,$;case d0.SERVER_OPENING:return $=G8($,F),$=F9($,F),$.message="Starting server monitoring",$;case d0.SERVER_CLOSED:return $=G8($,F),$=F9($,F),$.message="Stopped server monitoring",$;case d0.SERVER_HEARTBEAT_STARTED:return $=G8($,F),$=UC($,F),$.message="Server heartbeat started",$;case d0.SERVER_HEARTBEAT_SUCCEEDED:return $=G8($,F),$=UC($,F),$.message="Server heartbeat succeeded",$.durationMS=F.duration,$.serverConnectionId=F.serverConnectionId,$.reply=Z8(F.reply,A,{relaxed:!0}),$;case d0.SERVER_HEARTBEAT_FAILED:return $=G8($,F),$=UC($,F),$.message="Server heartbeat failed",$.durationMS=F.duration,$.failure=F.failure?.message,$;case d0.TOPOLOGY_OPENING:return $=G8($,F),$.message="Starting topology monitoring",$;case d0.TOPOLOGY_CLOSED:return $=G8($,F),$.message="Stopped topology monitoring",$;case d0.TOPOLOGY_DESCRIPTION_CHANGED:return $=G8($,F),$.message="Topology description changed",$.previousDescription=$.reply=Z8(F.previousDescription,A),$.newDescription=$.reply=Z8(F.newDescription,A),$;default:for(let[B,J]of Object.entries(F))if(J!=null)$[B]=J}return $}class sv{constructor(F){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=F.componentSeverities,this.maxDocumentLength=F.maxDocumentLength,this.logDestination=F.logDestination,this.logDestinationIsStdErr=F.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let F=Object();for(let A of Object.values(ov.MongoLoggableComponent)){F[A]={};for(let $ of Object.values(ov.SeverityLevel))F[A][$]=QN1($,this.componentSeverities[A])<=0}return F}turnOffSeverities(){for(let F of Object.values(ov.MongoLoggableComponent)){this.componentSeverities[F]=ov.SeverityLevel.OFF;for(let A of Object.values(ov.SeverityLevel))this.severities[F][A]=!1}}logWriteFailureHandler(F){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=c5(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(ov.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:F.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(F,A){if(A===ov.SeverityLevel.OFF)return!1;return this.severities[F][A]}log(F,A,$){if(!this.willLog(A,F))return;let B={t:new Date,c:A,s:F};if(typeof $==="string")B.message=$;else if(typeof $==="object")if(VN1($))B={...B,...$.toLog()};else B={...B,...tv($,this.maxDocumentLength)};if((0,l5.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(B)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let J=this.logDestination.write(B);if((0,l5.isPromiseLike)(J))this.pendingLog=J.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(J){this.logWriteFailureHandler(J)}}static resolveOptions(F,A){let $=qN1(F,A),B={...F,...A,mongodbLogPath:$.mongodbLogPath,mongodbLogPathIsStdErr:$.mongodbLogPathIsStdErr},J=fA(B.mongodbLogComponentSeverities?.default,B.MONGODB_LOG_ALL,ov.SeverityLevel.OFF);return{componentSeverities:{command:fA(B.mongodbLogComponentSeverities?.command,B.MONGODB_LOG_COMMAND,J),topology:fA(B.mongodbLogComponentSeverities?.topology,B.MONGODB_LOG_TOPOLOGY,J),serverSelection:fA(B.mongodbLogComponentSeverities?.serverSelection,B.MONGODB_LOG_SERVER_SELECTION,J),connection:fA(B.mongodbLogComponentSeverities?.connection,B.MONGODB_LOG_CONNECTION,J),client:fA(B.mongodbLogComponentSeverities?.client,B.MONGODB_LOG_CLIENT,J),default:J},maxDocumentLength:B.mongodbLogMaxDocumentLength??(0,l5.parseUnsignedInteger)(B.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:B.mongodbLogPath,logDestinationIsStdErr:B.mongodbLogPathIsStdErr}}}ov.MongoLogger=sv});var A9=Q((Ah)=>{Object.defineProperty(Ah,"__esModule",{value:!0});Ah.CancellationToken=Ah.TypedEventEmitter=void 0;var CN1=x("events"),NN1=U8(),PN1=z1();class KC extends CN1.EventEmitter{emitAndLog(F,...A){if(this.emit(F,...A),this.component)this.mongoLogger?.debug(this.component,A[0])}emitAndLogHeartbeat(F,A,$,...B){if(this.emit(F,...B),this.component){let J={topologyId:A,serverConnectionId:$??null,...B[0]};this.mongoLogger?.debug(this.component,J)}}emitAndLogCommand(F,A,$,B,...J){if(F)this.emit(A,...J);if(B){let X={databaseName:$,...J[0]};this.mongoLogger?.debug(NN1.MongoLoggableComponent.COMMAND,X)}}}Ah.TypedEventEmitter=KC;class Fh extends KC{constructor(...F){super(...F);this.on("error",PN1.noop)}}Ah.CancellationToken=Fh});var QC=Q((Jh)=>{Object.defineProperty(Jh,"__esModule",{value:!0});Jh.GetMoreOperation=void 0;var jN1=K0(),Bh=$1(),MN1=z1(),IU=N0();class qC extends IU.AbstractOperation{constructor(F,A,$,B){super(B);this.SERVER_COMMAND_RESPONSE_TYPE=jN1.CursorResponse,this.options=B,this.ns=F,this.cursorId=A,this.server=$}get commandName(){return"getMore"}buildCommand(F){if(this.cursorId==null||this.cursorId.isZero())throw new Bh.MongoRuntimeError("Unable to iterate cursor with no id");let A=this.ns.collection;if(A==null)throw new Bh.MongoRuntimeError("A collection name must be determined before getMore");let $={getMore:this.cursorId,collection:A};if(typeof this.options.batchSize==="number")$.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")$.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&(0,MN1.maxWireVersion)(F)>=9)$.comment=this.options.comment;return $}buildOptions(F){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:F,...this.options}}handleOk(F){return F}}Jh.GetMoreOperation=qC;(0,IU.defineAspects)(qC,[IU.Aspect.READ_OPERATION,IU.Aspect.MUST_SELECT_SAME_SERVER])});var Gh=Q((Yh)=>{Object.defineProperty(Yh,"__esModule",{value:!0});Yh.KillCursorsOperation=void 0;var TN1=K0(),kN1=$1(),VC=N0();class EC extends VC.AbstractOperation{constructor(F,A,$,B){super(B);this.SERVER_COMMAND_RESPONSE_TYPE=TN1.MongoDBResponse,this.ns=A,this.cursorId=F,this.server=$}get commandName(){return"killCursors"}buildCommand(F,A){let $=this.ns.collection;if($==null)throw new kN1.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:$,cursors:[this.cursorId]}}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){}}Yh.KillCursorsOperation=EC;(0,VC.defineAspects)(EC,[VC.Aspect.MUST_SELECT_SAME_SERVER])});var $2=Q((Zh)=>{Object.defineProperty(Zh,"__esModule",{value:!0});Zh.aws4=void 0;Zh.getKerberos=ON1;Zh.getZstdLibrary=SN1;Zh.getAwsCredentialProvider=uN1;Zh.getGcpMetadata=fN1;Zh.getSnappy=xN1;Zh.getSocks=bN1;Zh.getMongoDBClientEncryption=_N1;var z8=$1();function UX(F){return new Proxy(F?{kModuleError:F}:{},{get:($,B)=>{if(B==="kModuleError")return F;throw F},set:()=>{throw F}})}function ON1(){let F;try{F=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(A){F=UX(new z8.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:A,dependencyName:"kerberos"}))}return F}function SN1(){let F;try{F=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(A){F=UX(new z8.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:A,dependencyName:"zstd"}))}return F}function uN1(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch(F){return UX(new z8.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:F,dependencyName:"@aws-sdk/credential-providers"}))}}function fN1(){try{return (()=>{throw new Error("Cannot require module "+"gcp-metadata");})()}catch(F){return UX(new z8.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:F,dependencyName:"gcp-metadata"}))}}function xN1(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch(F){return{kModuleError:new z8.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:F,dependencyName:"snappy"})}}}function bN1(){try{return (()=>{throw new Error("Cannot require module "+"socks");})()}catch(F){return{kModuleError:new z8.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:F,dependencyName:"socks"})}}}Zh.aws4=gN1();function gN1(){let F;try{F=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(A){F=UX(new z8.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:A,dependencyName:"aws4"}))}return F}function _N1(){let F=null;try{F=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(A){return{kModuleError:new z8.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:A,dependencyName:"mongodb-client-encryption"})}}return F}});var W8=Q((Hh)=>{Object.defineProperty(Hh,"__esModule",{value:!0});Hh.AuthProvider=Hh.AuthContext=void 0;var pN1=$1();class zh{constructor(F,A,$){this.reauthenticating=!1,this.connection=F,this.credentials=A,this.options=$}}Hh.AuthContext=zh;class Wh{async prepare(F,A){return F}async reauth(F){if(F.reauthenticating)throw new pN1.MongoRuntimeError("Reauthentication already in progress.");try{F.reauthenticating=!0,await this.auth(F)}finally{F.reauthenticating=!1}}}Hh.AuthProvider=Wh});var NU=Q((Lh)=>{Object.defineProperty(Lh,"__esModule",{value:!0});Lh.GSSAPI=Lh.GSSAPICanonicalizationValue=void 0;Lh.performGSSAPICanonicalizeHostName=Eh;Lh.resolveCname=IC;var wC=x("dns"),aN1=$2(),qh=$1(),nN1=z1(),rN1=W8();Lh.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function LC(F,A){return await F.command((0,nN1.ns)("$external.$cmd"),A)}var zX;class Qh extends rN1.AuthProvider{async auth(F){let{connection:A,credentials:$}=F;if($==null)throw new qh.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:B}=$,J=await tN1(F),X=await J.step(""),Y=await LC(A,sN1(X)),D=await Vh(J,10,Y.payload),G=await LC(A,oN1(D,Y.conversationId)),Z=await eN1(J,B,G.payload);await LC(A,{saslContinue:1,conversationId:G.conversationId,payload:Z})}}Lh.GSSAPI=Qh;async function tN1(F){let{hostAddress:A}=F.options,{credentials:$}=F;if(!A||typeof A.host!=="string"||!$)throw new qh.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(FP1(),"kModuleError"in zX)throw zX.kModuleError;let{initializeClient:B}=zX,{username:J,password:X}=$,Y=$.mechanismProperties,D=Y.SERVICE_NAME??"mongodb",G=await Eh(A.host,Y),Z={};if(X!=null)Object.assign(Z,{user:J,password:X});let U=Y.SERVICE_HOST??G,z=`${D}${process.platform==="win32"?"/":"@"}${U}`;if("SERVICE_REALM"in Y)z=`${z}@${Y.SERVICE_REALM}`;return await B(z,Z)}function sN1(F){return{saslStart:1,mechanism:"GSSAPI",payload:F,autoAuthorize:1}}function oN1(F,A){return{saslContinue:1,conversationId:A,payload:F}}async function Vh(F,A,$){try{return await F.step($)||""}catch(B){if(A===0)throw B;return await Vh(F,A-1,$)}}async function eN1(F,A,$){let B=await F.unwrap($);return await F.wrap(B||"",{user:A})}async function Eh(F,A){let $=A.CANONICALIZE_HOST_NAME;if(!$||$===Lh.GSSAPICanonicalizationValue.none)return F;if($===Lh.GSSAPICanonicalizationValue.on||$===Lh.GSSAPICanonicalizationValue.forwardAndReverse){let{address:B}=await wC.promises.lookup(F);try{let J=await wC.promises.resolvePtr(B);return J.length>0?J[0]:F}catch{return await IC(F)}}else return await IC(F)}async function IC(F){try{let A=await wC.promises.resolveCname(F);return A.length>0?A[0]:F}catch{return F}}function FP1(){if(!zX)zX=(0,aN1.getKerberos)()}});var y2=Q((Ih)=>{Object.defineProperty(Ih,"__esModule",{value:!0});Ih.AUTH_MECHS_AUTH_SRC_EXTERNAL=Ih.AuthMechanism=void 0;Ih.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});Ih.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([Ih.AuthMechanism.MONGODB_GSSAPI,Ih.AuthMechanism.MONGODB_AWS,Ih.AuthMechanism.MONGODB_OIDC,Ih.AuthMechanism.MONGODB_X509])});var RU=Q((Rh)=>{Object.defineProperty(Rh,"__esModule",{value:!0});Rh.MongoCredentials=Rh.DEFAULT_ALLOWED_HOSTS=void 0;var M9=$1(),BP1=NU(),D3=y2();function JP1(F){if(F){if(Array.isArray(F.saslSupportedMechs))return F.saslSupportedMechs.includes(D3.AuthMechanism.MONGODB_SCRAM_SHA256)?D3.AuthMechanism.MONGODB_SCRAM_SHA256:D3.AuthMechanism.MONGODB_SCRAM_SHA1}return D3.AuthMechanism.MONGODB_SCRAM_SHA256}var Nh=["test","azure","gcp","k8s"],Ph="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";Rh.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var XP1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class PU{constructor(F){if(this.username=F.username??"",this.password=F.password,this.source=F.source,!this.source&&F.db)this.source=F.db;if(this.mechanism=F.mechanism||D3.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=F.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)){if(!this.username&&process.env.AWS_ACCESS_KEY_ID)this.username=process.env.AWS_ACCESS_KEY_ID;if(!this.password&&process.env.AWS_SECRET_ACCESS_KEY)this.password=process.env.AWS_SECRET_ACCESS_KEY;if(this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null)this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN}}if(this.mechanism===D3.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:Rh.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(F){return this.mechanism===F.mechanism&&this.username===F.username&&this.password===F.password&&this.source===F.source}resolveAuthMechanism(F){if(this.mechanism.match(/DEFAULT/i))return new PU({username:this.username,password:this.password,source:this.source,mechanism:JP1(F),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===D3.AuthMechanism.MONGODB_GSSAPI||this.mechanism===D3.AuthMechanism.MONGODB_PLAIN||this.mechanism===D3.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===D3.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new M9.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===D3.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new M9.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new M9.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new M9.MongoInvalidArgumentError(XP1);if(this.mechanismProperties.ENVIRONMENT&&!Nh.includes(this.mechanismProperties.ENVIRONMENT))throw new M9.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${Nh.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new M9.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let A=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(A))throw new M9.MongoInvalidArgumentError(Ph);for(let $ of A)if(typeof $!=="string")throw new M9.MongoInvalidArgumentError(Ph)}}if(D3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new M9.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===D3.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new M9.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===D3.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new M9.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let F=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(BP1.GSSAPICanonicalizationValue).includes(F))throw new M9.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${F}`)}static merge(F,A){return new PU({username:A.username??F?.username??"",password:A.password??F?.password??"",mechanism:A.mechanism??F?.mechanism??D3.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:A.mechanismProperties??F?.mechanismProperties??{},source:A.source??A.db??F?.source??"admin"})}}Rh.MongoCredentials=PU});var Th=Q(($H0,YP1)=>{YP1.exports={name:"mongodb",version:"6.21.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.2"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.3.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.5.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var CC=Q((uh)=>{Object.defineProperty(uh,"__esModule",{value:!0});uh.LimitedSizeDocument=void 0;uh.isDriverInfoEqual=ZP1;uh.makeClientMetadata=UP1;uh.addContainerMetadata=WP1;uh.getFAASEnv=Sh;var HX=x("os"),KX=x("process"),xA=J0(),kh=$1(),DP1=z1(),GP1=Th().version;function ZP1(F,A){let $=(B,J)=>{return B||=void 0,J||=void 0,B===J};return $(F.name,A.name)&&$(F.platform,A.platform)&&$(F.version,A.version)}class jU{constructor(F){this.document=new Map,this.documentSize=5,this.maxSize=F}ifItFitsItSits(F,A){let $=xA.BSON.serialize(new Map().set(F,A)).byteLength-5;if($+this.documentSize>this.maxSize)return!1;return this.documentSize+=$,this.document.set(F,A),!0}toObject(){return xA.BSON.deserialize(xA.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}uh.LimitedSizeDocument=jU;function UP1(F,{appName:A=""}){let $=new jU(512);if(A.length>0){let D=Buffer.byteLength(A,"utf8")<=128?A:Buffer.from(A,"utf8").subarray(0,128).toString("utf8");$.ifItFitsItSits("application",{name:D})}let B={name:"nodejs",version:GP1};for(let{name:D="",version:G=""}of F){if(D.length>0)B.name=`${B.name}|${D}`;if(G.length>0)B.version=`${B.version}|${G}`}if(!$.ifItFitsItSits("driver",B))throw new kh.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let J=HP1();for(let{platform:D=""}of F)if(D.length>0)J=`${J}|${D}`;if(!$.ifItFitsItSits("platform",J))throw new kh.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let X=new Map().set("name",KX.platform).set("architecture",KX.arch).set("version",HX.release()).set("type",HX.type());if(!$.ifItFitsItSits("os",X))for(let D of X.keys()){if(X.delete(D),X.size===0)break;if($.ifItFitsItSits("os",X))break}let Y=Sh();if(Y!=null){if(!$.ifItFitsItSits("env",Y))for(let D of Y.keys()){if(Y.delete(D),Y.size===0)break;if($.ifItFitsItSits("env",Y))break}}return $.toObject()}var Oh;async function zP1(){let F={};Oh??=(0,DP1.fileIsAccessible)("/.dockerenv");let A=await Oh,{KUBERNETES_SERVICE_HOST:$=""}=KX.env,B=$.length>0?!0:!1;if(A)F.runtime="docker";if(B)F.orchestrator="kubernetes";return F}async function WP1(F){let A=await zP1();if(Object.keys(A).length===0)return F;let $=new jU(512),B={...F?.env,container:A};for(let[J,X]of Object.entries(F))if(J!=="env")$.ifItFitsItSits(J,X);else if(!$.ifItFitsItSits("env",B))$.ifItFitsItSits("env",X);if(!("env"in F))$.ifItFitsItSits("env",B);return $.toObject()}function Sh(){let{AWS_EXECUTION_ENV:F="",AWS_LAMBDA_RUNTIME_API:A="",FUNCTIONS_WORKER_RUNTIME:$="",K_SERVICE:B="",FUNCTION_NAME:J="",VERCEL:X="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:Y="",AWS_REGION:D="",FUNCTION_MEMORY_MB:G="",FUNCTION_REGION:Z="",FUNCTION_TIMEOUT_SEC:U="",VERCEL_REGION:z=""}=KX.env,W=F.startsWith("AWS_Lambda_")||A.length>0,H=$.length>0,K=B.length>0||J.length>0,q=X.length>0,V=new Map;if(q&&!(H||K)){if(z.length>0)V.set("region",z);return V.set("name","vercel"),V}if(W&&!(H||K||q)){if(D.length>0)V.set("region",D);if(Y.length>0&&Number.isInteger(+Y))V.set("memory_mb",new xA.Int32(Y));return V.set("name","aws.lambda"),V}if(H&&!(K||W||q))return V.set("name","azure.func"),V;if(K&&!(H||W||q)){if(Z.length>0)V.set("region",Z);if(G.length>0&&Number.isInteger(+G))V.set("memory_mb",new xA.Int32(G));if(U.length>0&&Number.isInteger(+U))V.set("timeout_sec",new xA.Int32(U));return V.set("name","gcp.func"),V}return null}function HP1(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${HX.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${HX.endianness()}`;return`Node.js ${KX.version}, ${HX.endianness()}`}});var TU=Q((_h)=>{function P0(F,A,$){if($.globals)F=$.globals[F.name];return new F(`${$.context?$.context:"Value"} ${A}.`)}function _A(F,A){if(typeof F==="bigint")throw P0(TypeError,"is a BigInt which cannot be converted to a number",A);if(!A.globals)return Number(F);return A.globals.Number(F)}function bh(F){if(F>0&&F%1===0.5&&(F&1)===0||F<0&&F%1===-0.5&&(F&1)===1)return qX(Math.floor(F));return qX(Math.round(F))}function MU(F){return qX(Math.trunc(F))}function xh(F){return F<0?-1:1}function EP1(F,A){let $=F%A;if(xh(A)!==xh($))return $+A;return $}function qX(F){return F===0?0:F}function yA(F,{unsigned:A}){let $,B;if(A)$=0,B=2**F-1;else $=-(2**(F-1)),B=2**(F-1)-1;let J=2**F,X=2**(F-1);return(Y,D={})=>{let G=_A(Y,D);if(G=qX(G),D.enforceRange){if(!Number.isFinite(G))throw P0(TypeError,"is not a finite number",D);if(G=MU(G),G<$||G>B)throw P0(TypeError,`is outside the accepted range of ${$} to ${B}, inclusive`,D);return G}if(!Number.isNaN(G)&&D.clamp)return G=Math.min(Math.max(G,$),B),G=bh(G),G;if(!Number.isFinite(G)||G===0)return 0;if(G=MU(G),G>=$&&G<=B)return G;if(G=EP1(G,J),!A&&G>=X)return G-J;return G}}function gh(F,{unsigned:A}){let $=Number.MAX_SAFE_INTEGER,B=A?0:Number.MIN_SAFE_INTEGER,J=A?BigInt.asUintN:BigInt.asIntN;return(X,Y={})=>{let D=_A(X,Y);if(D=qX(D),Y.enforceRange){if(!Number.isFinite(D))throw P0(TypeError,"is not a finite number",Y);if(D=MU(D),D<B||D>$)throw P0(TypeError,`is outside the accepted range of ${B} to ${$}, inclusive`,Y);return D}if(!Number.isNaN(D)&&Y.clamp)return D=Math.min(Math.max(D,B),$),D=bh(D),D;if(!Number.isFinite(D)||D===0)return 0;let G=BigInt(MU(D));return G=J(F,G),Number(G)}}_h.any=(F)=>{return F};_h.undefined=()=>{return};_h.boolean=(F)=>{return Boolean(F)};_h.byte=yA(8,{unsigned:!1});_h.octet=yA(8,{unsigned:!0});_h.short=yA(16,{unsigned:!1});_h["unsigned short"]=yA(16,{unsigned:!0});_h.long=yA(32,{unsigned:!1});_h["unsigned long"]=yA(32,{unsigned:!0});_h["long long"]=gh(64,{unsigned:!1});_h["unsigned long long"]=gh(64,{unsigned:!0});_h.double=(F,A={})=>{let $=_A(F,A);if(!Number.isFinite($))throw P0(TypeError,"is not a finite floating-point value",A);return $};_h["unrestricted double"]=(F,A={})=>{return _A(F,A)};_h.float=(F,A={})=>{let $=_A(F,A);if(!Number.isFinite($))throw P0(TypeError,"is not a finite floating-point value",A);if(Object.is($,-0))return $;let B=Math.fround($);if(!Number.isFinite(B))throw P0(TypeError,"is outside the range of a single-precision floating-point value",A);return B};_h["unrestricted float"]=(F,A={})=>{let $=_A(F,A);if(isNaN($))return $;if(Object.is($,-0))return $;return Math.fround($)};_h.DOMString=(F,A={})=>{if(A.treatNullAsEmptyString&&F===null)return"";if(typeof F==="symbol")throw P0(TypeError,"is a symbol, which cannot be converted to a string",A);return(A.globals?A.globals.String:String)(F)};_h.ByteString=(F,A={})=>{let $=_h.DOMString(F,A),B;for(let J=0;(B=$.codePointAt(J))!==void 0;++J)if(B>255)throw P0(TypeError,"is not a valid ByteString",A);return $};_h.USVString=(F,A={})=>{let $=_h.DOMString(F,A),B=$.length,J=[];for(let X=0;X<B;++X){let Y=$.charCodeAt(X);if(Y<55296||Y>57343)J.push(String.fromCodePoint(Y));else if(56320<=Y&&Y<=57343)J.push(String.fromCodePoint(65533));else if(X===B-1)J.push(String.fromCodePoint(65533));else{let D=$.charCodeAt(X+1);if(56320<=D&&D<=57343){let G=Y&1023,Z=D&1023;J.push(String.fromCodePoint(65536+1024*G+Z)),++X}else J.push(String.fromCodePoint(65533))}}return J.join("")};_h.object=(F,A={})=>{if(F===null||typeof F!=="object"&&typeof F!=="function")throw P0(TypeError,"is not an object",A);return F};var LP1=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,wP1=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function NC(F){try{return LP1.call(F),!0}catch{return!1}}function bA(F){try{return wP1.call(F),!0}catch{return!1}}function gA(F){try{return new Uint8Array(F),!1}catch{return!0}}_h.ArrayBuffer=(F,A={})=>{if(!NC(F)){if(A.allowShared&&!bA(F))throw P0(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",A);throw P0(TypeError,"is not an ArrayBuffer",A)}if(gA(F))throw P0(TypeError,"is a detached ArrayBuffer",A);return F};var IP1=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;_h.DataView=(F,A={})=>{try{IP1.call(F)}catch($){throw P0(TypeError,"is not a DataView",A)}if(!A.allowShared&&bA(F.buffer))throw P0(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",A);if(gA(F.buffer))throw P0(TypeError,"is backed by a detached ArrayBuffer",A);return F};var CP1=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((F)=>{let{name:A}=F,$=/^[AEIOU]/u.test(A)?"an":"a";_h[A]=(B,J={})=>{if(!ArrayBuffer.isView(B)||CP1.call(B)!==A)throw P0(TypeError,`is not ${$} ${A} object`,J);if(!J.allowShared&&bA(B.buffer))throw P0(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",J);if(gA(B.buffer))throw P0(TypeError,"is a view on a detached ArrayBuffer",J);return B}});_h.ArrayBufferView=(F,A={})=>{if(!ArrayBuffer.isView(F))throw P0(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",A);if(!A.allowShared&&bA(F.buffer))throw P0(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(gA(F.buffer))throw P0(TypeError,"is a view on a detached ArrayBuffer",A);return F};_h.BufferSource=(F,A={})=>{if(ArrayBuffer.isView(F)){if(!A.allowShared&&bA(F.buffer))throw P0(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(gA(F.buffer))throw P0(TypeError,"is a view on a detached ArrayBuffer",A);return F}if(!A.allowShared&&!NC(F))throw P0(TypeError,"is not an ArrayBuffer or a view on one",A);if(A.allowShared&&!bA(F)&&!NC(F))throw P0(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",A);if(gA(F))throw P0(TypeError,"is a detached ArrayBuffer",A);return F};_h.DOMTimeStamp=_h["unsigned long long"]});var OU=Q((ph,ih)=>{function pP1(F){return typeof F==="object"&&F!==null||typeof F==="function"}var vh=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function iP1(F,A){for(let $ of Reflect.ownKeys(A)){let B=Reflect.getOwnPropertyDescriptor(A,$);if(B&&!Reflect.defineProperty(F,$,B))throw TypeError(`Cannot redefine property: ${String($)}`)}}function aP1(F,A){let $=dh(F);return Object.defineProperties(Object.create($["%Object.prototype%"]),Object.getOwnPropertyDescriptors(A))}var hh=Symbol("wrapper"),mh=Symbol("impl"),vA=Symbol("SameObject caches"),kU=Symbol.for("[webidl2js] constructor registry"),nP1=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function dh(F){if(vh(F,kU))return F[kU];let A=Object.create(null);A["%Object.prototype%"]=F.Object.prototype,A["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new F.Array()[Symbol.iterator]()));try{A["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(F.eval("(async function* () {})").prototype))}catch{A["%AsyncIteratorPrototype%"]=nP1}return F[kU]=A,A}function rP1(F,A,$){if(!F[vA])F[vA]=Object.create(null);if(A in F[vA])return F[vA][A];return F[vA][A]=$(),F[vA][A]}function ch(F){return F?F[hh]:null}function lh(F){return F?F[mh]:null}function tP1(F){let A=ch(F);return A?A:F}function sP1(F){let A=lh(F);return A?A:F}var oP1=Symbol("internal");function eP1(F){if(typeof F!=="string")return!1;let A=F>>>0;if(A===4294967295)return!1;let $=`${A}`;if(F!==$)return!1;return!0}var FR1=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function AR1(F){try{return FR1.call(F),!0}catch(A){return!1}}function $R1([F,A],$){let B;switch($){case"key":B=F;break;case"value":B=A;break;case"key+value":B=[F,A];break}return{value:B,done:!1}}var BR1=Symbol("supports property index"),JR1=Symbol("supported property indices"),XR1=Symbol("supports property name"),YR1=Symbol("supported property names"),DR1=Symbol("indexed property get"),GR1=Symbol("indexed property set new"),ZR1=Symbol("indexed property set existing"),UR1=Symbol("named property get"),zR1=Symbol("named property set new"),WR1=Symbol("named property set existing"),HR1=Symbol("named property delete"),KR1=Symbol("async iterator get the next iteration result"),qR1=Symbol("async iterator return steps"),QR1=Symbol("async iterator initialization steps"),VR1=Symbol("async iterator end of iteration");ih.exports=ph={isObject:pP1,hasOwn:vh,define:iP1,newObjectInRealm:aP1,wrapperSymbol:hh,implSymbol:mh,getSameObject:rP1,ctorRegistrySymbol:kU,initCtorRegistry:dh,wrapperForImpl:ch,implForWrapper:lh,tryWrapperForImpl:tP1,tryImplForWrapper:sP1,iterInternalSymbol:oP1,isArrayBuffer:AR1,isArrayIndexPropName:eP1,supportsPropertyIndex:BR1,supportedPropertyIndices:JR1,supportsPropertyName:XR1,supportedPropertyNames:YR1,indexedGet:DR1,indexedSetNew:GR1,indexedSetExisting:ZR1,namedGet:UR1,namedSetNew:zR1,namedSetExisting:WR1,namedDelete:HR1,asyncIteratorNext:KR1,asyncIteratorReturn:qR1,asyncIteratorInit:QR1,asyncIteratorEOI:VR1,iteratorResult:$R1}});var Am=Q((XH0,Fm)=>{var ER1=/^xn--/,LR1=/[^\0-\x7F]/,wR1=/[\x2E\u3002\uFF0E\uFF61]/g,IR1={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v2=Math.floor,RC=String.fromCharCode;function H8(F){throw RangeError(IR1[F])}function CR1(F,A){let $=[],B=F.length;while(B--)$[B]=A(F[B]);return $}function nh(F,A){let $=F.split("@"),B="";if($.length>1)B=$[0]+"@",F=$[1];F=F.replace(wR1,".");let J=F.split("."),X=CR1(J,A).join(".");return B+X}function rh(F){let A=[],$=0,B=F.length;while($<B){let J=F.charCodeAt($++);if(J>=55296&&J<=56319&&$<B){let X=F.charCodeAt($++);if((X&64512)==56320)A.push(((J&1023)<<10)+(X&1023)+65536);else A.push(J),$--}else A.push(J)}return A}var NR1=(F)=>String.fromCodePoint(...F),PR1=function(F){if(F>=48&&F<58)return 26+(F-48);if(F>=65&&F<91)return F-65;if(F>=97&&F<123)return F-97;return 36},ah=function(F,A){return F+22+75*(F<26)-((A!=0)<<5)},th=function(F,A,$){let B=0;F=$?v2(F/700):F>>1,F+=v2(F/A);for(;F>455;B+=36)F=v2(F/35);return v2(B+36*F/(F+38))},oh=function(F){let A=[],$=F.length,B=0,J=128,X=72,Y=F.lastIndexOf("-");if(Y<0)Y=0;for(let D=0;D<Y;++D){if(F.charCodeAt(D)>=128)H8("not-basic");A.push(F.charCodeAt(D))}for(let D=Y>0?Y+1:0;D<$;){let G=B;for(let U=1,z=36;;z+=36){if(D>=$)H8("invalid-input");let W=PR1(F.charCodeAt(D++));if(W>=36)H8("invalid-input");if(W>v2((2147483647-B)/U))H8("overflow");B+=W*U;let H=z<=X?1:z>=X+26?26:z-X;if(W<H)break;let K=36-H;if(U>v2(2147483647/K))H8("overflow");U*=K}let Z=A.length+1;if(X=th(B-G,Z,G==0),v2(B/Z)>2147483647-J)H8("overflow");J+=v2(B/Z),B%=Z,A.splice(B++,0,J)}return String.fromCodePoint(...A)},eh=function(F){let A=[];F=rh(F);let $=F.length,B=128,J=0,X=72;for(let G of F)if(G<128)A.push(RC(G));let Y=A.length,D=Y;if(Y)A.push("-");while(D<$){let G=2147483647;for(let U of F)if(U>=B&&U<G)G=U;let Z=D+1;if(G-B>v2((2147483647-J)/Z))H8("overflow");J+=(G-B)*Z,B=G;for(let U of F){if(U<B&&++J>2147483647)H8("overflow");if(U===B){let z=J;for(let W=36;;W+=36){let H=W<=X?1:W>=X+26?26:W-X;if(z<H)break;let K=z-H,q=36-H;A.push(RC(ah(H+K%q,0))),z=v2(K/q)}A.push(RC(ah(z,0))),X=th(J,Z,D===Y),J=0,++D}}++J,++B}return A.join("")},RR1=function(F){return nh(F,function(A){return ER1.test(A)?oh(A.slice(4).toLowerCase()):A})},jR1=function(F){return nh(F,function(A){return LR1.test(A)?"xn--"+eh(A):A})},MR1={version:"2.3.1",ucs2:{decode:rh,encode:NR1},decode:oh,encode:eh,toASCII:jR1,toUnicode:RR1};Fm.exports=MR1});var Bm=Q((YH0,$m)=>{var TR1=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,kR1=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,OR1=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,SR1=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,uR1=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,fR1=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,xR1=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,bR1=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,gR1=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,_R1=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,yR1=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,vR1=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;$m.exports={combiningMarks:TR1,combiningClassVirama:kR1,validZWNJ:OR1,bidiDomain:SR1,bidiS1LTR:uR1,bidiS1RTL:fR1,bidiS2:xR1,bidiS3:bR1,bidiS4EN:gR1,bidiS4AN:_R1,bidiS5:yR1,bidiS6:vR1}});var Jm=Q((DH0,hR1)=>{hR1.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1000,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8000,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13000,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43000,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64000,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\uD850\uDEEE"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\uD84A\uDC4A"],[64208,1,"\uD84A\uDC44"],[64209,1,"\uD84C\uDFD5"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\uD854\uDE49"],[64214,1,"\uD857\uDCD0"],[64215,1,"\uD85F\uDED3"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\uD801\uDC28"],[66561,1,"\uD801\uDC29"],[66562,1,"\uD801\uDC2A"],[66563,1,"\uD801\uDC2B"],[66564,1,"\uD801\uDC2C"],[66565,1,"\uD801\uDC2D"],[66566,1,"\uD801\uDC2E"],[66567,1,"\uD801\uDC2F"],[66568,1,"\uD801\uDC30"],[66569,1,"\uD801\uDC31"],[66570,1,"\uD801\uDC32"],[66571,1,"\uD801\uDC33"],[66572,1,"\uD801\uDC34"],[66573,1,"\uD801\uDC35"],[66574,1,"\uD801\uDC36"],[66575,1,"\uD801\uDC37"],[66576,1,"\uD801\uDC38"],[66577,1,"\uD801\uDC39"],[66578,1,"\uD801\uDC3A"],[66579,1,"\uD801\uDC3B"],[66580,1,"\uD801\uDC3C"],[66581,1,"\uD801\uDC3D"],[66582,1,"\uD801\uDC3E"],[66583,1,"\uD801\uDC3F"],[66584,1,"\uD801\uDC40"],[66585,1,"\uD801\uDC41"],[66586,1,"\uD801\uDC42"],[66587,1,"\uD801\uDC43"],[66588,1,"\uD801\uDC44"],[66589,1,"\uD801\uDC45"],[66590,1,"\uD801\uDC46"],[66591,1,"\uD801\uDC47"],[66592,1,"\uD801\uDC48"],[66593,1,"\uD801\uDC49"],[66594,1,"\uD801\uDC4A"],[66595,1,"\uD801\uDC4B"],[66596,1,"\uD801\uDC4C"],[66597,1,"\uD801\uDC4D"],[66598,1,"\uD801\uDC4E"],[66599,1,"\uD801\uDC4F"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\uD801\uDCD8"],[66737,1,"\uD801\uDCD9"],[66738,1,"\uD801\uDCDA"],[66739,1,"\uD801\uDCDB"],[66740,1,"\uD801\uDCDC"],[66741,1,"\uD801\uDCDD"],[66742,1,"\uD801\uDCDE"],[66743,1,"\uD801\uDCDF"],[66744,1,"\uD801\uDCE0"],[66745,1,"\uD801\uDCE1"],[66746,1,"\uD801\uDCE2"],[66747,1,"\uD801\uDCE3"],[66748,1,"\uD801\uDCE4"],[66749,1,"\uD801\uDCE5"],[66750,1,"\uD801\uDCE6"],[66751,1,"\uD801\uDCE7"],[66752,1,"\uD801\uDCE8"],[66753,1,"\uD801\uDCE9"],[66754,1,"\uD801\uDCEA"],[66755,1,"\uD801\uDCEB"],[66756,1,"\uD801\uDCEC"],[66757,1,"\uD801\uDCED"],[66758,1,"\uD801\uDCEE"],[66759,1,"\uD801\uDCEF"],[66760,1,"\uD801\uDCF0"],[66761,1,"\uD801\uDCF1"],[66762,1,"\uD801\uDCF2"],[66763,1,"\uD801\uDCF3"],[66764,1,"\uD801\uDCF4"],[66765,1,"\uD801\uDCF5"],[66766,1,"\uD801\uDCF6"],[66767,1,"\uD801\uDCF7"],[66768,1,"\uD801\uDCF8"],[66769,1,"\uD801\uDCF9"],[66770,1,"\uD801\uDCFA"],[66771,1,"\uD801\uDCFB"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\uD801\uDD97"],[66929,1,"\uD801\uDD98"],[66930,1,"\uD801\uDD99"],[66931,1,"\uD801\uDD9A"],[66932,1,"\uD801\uDD9B"],[66933,1,"\uD801\uDD9C"],[66934,1,"\uD801\uDD9D"],[66935,1,"\uD801\uDD9E"],[66936,1,"\uD801\uDD9F"],[66937,1,"\uD801\uDDA0"],[66938,1,"\uD801\uDDA1"],[66939,3],[66940,1,"\uD801\uDDA3"],[66941,1,"\uD801\uDDA4"],[66942,1,"\uD801\uDDA5"],[66943,1,"\uD801\uDDA6"],[66944,1,"\uD801\uDDA7"],[66945,1,"\uD801\uDDA8"],[66946,1,"\uD801\uDDA9"],[66947,1,"\uD801\uDDAA"],[66948,1,"\uD801\uDDAB"],[66949,1,"\uD801\uDDAC"],[66950,1,"\uD801\uDDAD"],[66951,1,"\uD801\uDDAE"],[66952,1,"\uD801\uDDAF"],[66953,1,"\uD801\uDDB0"],[66954,1,"\uD801\uDDB1"],[66955,3],[66956,1,"\uD801\uDDB3"],[66957,1,"\uD801\uDDB4"],[66958,1,"\uD801\uDDB5"],[66959,1,"\uD801\uDDB6"],[66960,1,"\uD801\uDDB7"],[66961,1,"\uD801\uDDB8"],[66962,1,"\uD801\uDDB9"],[66963,3],[66964,1,"\uD801\uDDBB"],[66965,1,"\uD801\uDDBC"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\uD837\uDF04"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\uD837\uDF05"],[67488,1,"\u028E"],[67489,1,"\uD837\uDF06"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\uD837\uDF08"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\uD837\uDF0A"],[67514,1,"\uD837\uDF1E"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\uD803\uDCC0"],[68737,1,"\uD803\uDCC1"],[68738,1,"\uD803\uDCC2"],[68739,1,"\uD803\uDCC3"],[68740,1,"\uD803\uDCC4"],[68741,1,"\uD803\uDCC5"],[68742,1,"\uD803\uDCC6"],[68743,1,"\uD803\uDCC7"],[68744,1,"\uD803\uDCC8"],[68745,1,"\uD803\uDCC9"],[68746,1,"\uD803\uDCCA"],[68747,1,"\uD803\uDCCB"],[68748,1,"\uD803\uDCCC"],[68749,1,"\uD803\uDCCD"],[68750,1,"\uD803\uDCCE"],[68751,1,"\uD803\uDCCF"],[68752,1,"\uD803\uDCD0"],[68753,1,"\uD803\uDCD1"],[68754,1,"\uD803\uDCD2"],[68755,1,"\uD803\uDCD3"],[68756,1,"\uD803\uDCD4"],[68757,1,"\uD803\uDCD5"],[68758,1,"\uD803\uDCD6"],[68759,1,"\uD803\uDCD7"],[68760,1,"\uD803\uDCD8"],[68761,1,"\uD803\uDCD9"],[68762,1,"\uD803\uDCDA"],[68763,1,"\uD803\uDCDB"],[68764,1,"\uD803\uDCDC"],[68765,1,"\uD803\uDCDD"],[68766,1,"\uD803\uDCDE"],[68767,1,"\uD803\uDCDF"],[68768,1,"\uD803\uDCE0"],[68769,1,"\uD803\uDCE1"],[68770,1,"\uD803\uDCE2"],[68771,1,"\uD803\uDCE3"],[68772,1,"\uD803\uDCE4"],[68773,1,"\uD803\uDCE5"],[68774,1,"\uD803\uDCE6"],[68775,1,"\uD803\uDCE7"],[68776,1,"\uD803\uDCE8"],[68777,1,"\uD803\uDCE9"],[68778,1,"\uD803\uDCEA"],[68779,1,"\uD803\uDCEB"],[68780,1,"\uD803\uDCEC"],[68781,1,"\uD803\uDCED"],[68782,1,"\uD803\uDCEE"],[68783,1,"\uD803\uDCEF"],[68784,1,"\uD803\uDCF0"],[68785,1,"\uD803\uDCF1"],[68786,1,"\uD803\uDCF2"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\uD803\uDD70"],[68945,1,"\uD803\uDD71"],[68946,1,"\uD803\uDD72"],[68947,1,"\uD803\uDD73"],[68948,1,"\uD803\uDD74"],[68949,1,"\uD803\uDD75"],[68950,1,"\uD803\uDD76"],[68951,1,"\uD803\uDD77"],[68952,1,"\uD803\uDD78"],[68953,1,"\uD803\uDD79"],[68954,1,"\uD803\uDD7A"],[68955,1,"\uD803\uDD7B"],[68956,1,"\uD803\uDD7C"],[68957,1,"\uD803\uDD7D"],[68958,1,"\uD803\uDD7E"],[68959,1,"\uD803\uDD7F"],[68960,1,"\uD803\uDD80"],[68961,1,"\uD803\uDD81"],[68962,1,"\uD803\uDD82"],[68963,1,"\uD803\uDD83"],[68964,1,"\uD803\uDD84"],[68965,1,"\uD803\uDD85"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\uD806\uDCC0"],[71841,1,"\uD806\uDCC1"],[71842,1,"\uD806\uDCC2"],[71843,1,"\uD806\uDCC3"],[71844,1,"\uD806\uDCC4"],[71845,1,"\uD806\uDCC5"],[71846,1,"\uD806\uDCC6"],[71847,1,"\uD806\uDCC7"],[71848,1,"\uD806\uDCC8"],[71849,1,"\uD806\uDCC9"],[71850,1,"\uD806\uDCCA"],[71851,1,"\uD806\uDCCB"],[71852,1,"\uD806\uDCCC"],[71853,1,"\uD806\uDCCD"],[71854,1,"\uD806\uDCCE"],[71855,1,"\uD806\uDCCF"],[71856,1,"\uD806\uDCD0"],[71857,1,"\uD806\uDCD1"],[71858,1,"\uD806\uDCD2"],[71859,1,"\uD806\uDCD3"],[71860,1,"\uD806\uDCD4"],[71861,1,"\uD806\uDCD5"],[71862,1,"\uD806\uDCD6"],[71863,1,"\uD806\uDCD7"],[71864,1,"\uD806\uDCD8"],[71865,1,"\uD806\uDCD9"],[71866,1,"\uD806\uDCDA"],[71867,1,"\uD806\uDCDB"],[71868,1,"\uD806\uDCDC"],[71869,1,"\uD806\uDCDD"],[71870,1,"\uD806\uDCDE"],[71871,1,"\uD806\uDCDF"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\uD81B\uDE60"],[93761,1,"\uD81B\uDE61"],[93762,1,"\uD81B\uDE62"],[93763,1,"\uD81B\uDE63"],[93764,1,"\uD81B\uDE64"],[93765,1,"\uD81B\uDE65"],[93766,1,"\uD81B\uDE66"],[93767,1,"\uD81B\uDE67"],[93768,1,"\uD81B\uDE68"],[93769,1,"\uD81B\uDE69"],[93770,1,"\uD81B\uDE6A"],[93771,1,"\uD81B\uDE6B"],[93772,1,"\uD81B\uDE6C"],[93773,1,"\uD81B\uDE6D"],[93774,1,"\uD81B\uDE6E"],[93775,1,"\uD81B\uDE6F"],[93776,1,"\uD81B\uDE70"],[93777,1,"\uD81B\uDE71"],[93778,1,"\uD81B\uDE72"],[93779,1,"\uD81B\uDE73"],[93780,1,"\uD81B\uDE74"],[93781,1,"\uD81B\uDE75"],[93782,1,"\uD81B\uDE76"],[93783,1,"\uD81B\uDE77"],[93784,1,"\uD81B\uDE78"],[93785,1,"\uD81B\uDE79"],[93786,1,"\uD81B\uDE7A"],[93787,1,"\uD81B\uDE7B"],[93788,1,"\uD81B\uDE7C"],[93789,1,"\uD81B\uDE7D"],[93790,1,"\uD81B\uDE7E"],[93791,1,"\uD81B\uDE7F"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118000,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\uD834\uDD57\uD834\uDD65"],[119135,1,"\uD834\uDD58\uD834\uDD65"],[119136,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6E"],[119137,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6F"],[119138,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD70"],[119139,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD71"],[119140,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD72"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\uD834\uDDB9\uD834\uDD65"],[119228,1,"\uD834\uDDBA\uD834\uDD65"],[119229,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6E"],[119230,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6E"],[119231,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6F"],[119232,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6F"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\uD83A\uDD22"],[125185,1,"\uD83A\uDD23"],[125186,1,"\uD83A\uDD24"],[125187,1,"\uD83A\uDD25"],[125188,1,"\uD83A\uDD26"],[125189,1,"\uD83A\uDD27"],[125190,1,"\uD83A\uDD28"],[125191,1,"\uD83A\uDD29"],[125192,1,"\uD83A\uDD2A"],[125193,1,"\uD83A\uDD2B"],[125194,1,"\uD83A\uDD2C"],[125195,1,"\uD83A\uDD2D"],[125196,1,"\uD83A\uDD2E"],[125197,1,"\uD83A\uDD2F"],[125198,1,"\uD83A\uDD30"],[125199,1,"\uD83A\uDD31"],[125200,1,"\uD83A\uDD32"],[125201,1,"\uD83A\uDD33"],[125202,1,"\uD83A\uDD34"],[125203,1,"\uD83A\uDD35"],[125204,1,"\uD83A\uDD36"],[125205,1,"\uD83A\uDD37"],[125206,1,"\uD83A\uDD38"],[125207,1,"\uD83A\uDD39"],[125208,1,"\uD83A\uDD3A"],[125209,1,"\uD83A\uDD3B"],[125210,1,"\uD83A\uDD3C"],[125211,1,"\uD83A\uDD3D"],[125212,1,"\uD83A\uDD3E"],[125213,1,"\uD83A\uDD3F"],[125214,1,"\uD83A\uDD40"],[125215,1,"\uD83A\uDD41"],[125216,1,"\uD83A\uDD42"],[125217,1,"\uD83A\uDD43"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\uD840\uDD22"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\uD841\uDE3A"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\uD841\uDD1C"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\uD841\uDD4B"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\uD864\uDDDF"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\uD842\uDE2C"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\uD842\uDF63"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\uD845\uDCE4"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\uD845\uDEA8"],[194657,1,"\uD845\uDEEA"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\uD846\uDDC8"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\uD846\uDF18"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\uD847\uDDE4"],[194684,1,"\u5D43"],[194685,1,"\uD847\uDDE6"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\uD848\uDD83"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\uD868\uDF92"],[194704,1,"\u5EFE"],[[194705,194706],1,"\uD848\uDF31"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\uD84C\uDEB8"],[194712,1,"\uD858\uDDDA"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\uD849\uDED4"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\uD84A\uDF0C"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\uD84A\uDFF1"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\uD84C\uDC0A"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\uD84C\uDFC3"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\uD84D\uDC6D"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\uD84D\uDEA3"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\uD84E\uDCA7"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\uD84E\uDE8D"],[194808,1,"\uD847\uDD0B"],[194809,1,"\uD84E\uDEFA"],[194810,1,"\u6C4E"],[194811,1,"\uD84F\uDCBC"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\uD84F\uDD1E"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\uD84F\uDED1"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\uD84F\uDF5E"],[194833,1,"\uD84F\uDF8E"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\uD841\uDD25"],[194844,1,"\u7145"],[194845,1,"\uD850\uDE63"],[194846,1,"\u719C"],[194847,1,"\uD850\uDFAB"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\uD851\uDE08"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\uD851\uDF35"],[194855,1,"\uD852\uDC14"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\uD853\uDC36"],[194870,1,"\u753E"],[194871,1,"\uD853\uDC92"],[194872,1,"\u7570"],[194873,1,"\uD848\uDD9F"],[194874,1,"\u7610"],[194875,1,"\uD853\uDFA1"],[194876,1,"\uD853\uDFB8"],[194877,1,"\uD854\uDC44"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\uD854\uDCF3"],[194882,1,"\uD854\uDCF2"],[194883,1,"\uD854\uDD19"],[194884,1,"\uD854\uDD33"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\uD855\uDC1D"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\uD855\uDE26"],[194899,1,"\u7956"],[194900,1,"\uD855\uDE9A"],[194901,1,"\uD855\uDEC5"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\uD856\uDD7C"],[[194909,194910],1,"\uD856\uDEA7"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\uD856\uDFAB"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\uD857\uDC80"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\uD857\uDF86"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\uD858\uDE28"],[194931,1,"\uD858\uDE47"],[194932,1,"\u4359"],[194933,1,"\uD858\uDED9"],[194934,1,"\u7F7A"],[194935,1,"\uD858\uDF3E"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\uD859\uDCDA"],[194940,1,"\uD859\uDD23"],[194941,1,"\u8060"],[194942,1,"\uD859\uDDA8"],[194943,1,"\u8070"],[194944,1,"\uD84C\uDF5F"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\uD859\uDFA7"],[194952,1,"\uD859\uDFB5"],[194953,1,"\uD84C\uDF93"],[194954,1,"\uD84C\uDF9C"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\uD85A\uDF3C"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\uD85B\uDC36"],[194981,1,"\uD85B\uDD6B"],[194982,1,"\uD85B\uDCD5"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\uD85C\uDFCA"],[194988,1,"\u8564"],[194989,1,"\uD85B\uDF2C"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\uD85B\uDFB1"],[194993,1,"\uD85C\uDCD2"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195000,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\uD85D\uDE67"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\uD85E\uDCAE"],[195020,1,"\uD85E\uDD66"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\uD85F\uDCA8"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\uD85F\uDF2F"],[195033,1,"\uD842\uDC04"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\uD842\uDCDE"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\uD861\uDDD2"],[195041,1,"\uD861\uDDED"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\uD861\uDF2E"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\uD862\uDFFA"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\uD863\uDD77"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\uD864\uDD45"],[195063,1,"\uD864\uDE1A"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\uD865\uDC0A"],[195068,1,"\u4AB2"],[195069,1,"\uD865\uDC96"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\uD865\uDDB6"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\uD866\uDF30"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\uD868\uDCCE"],[195089,1,"\u4CF8"],[195090,1,"\uD868\uDD05"],[195091,1,"\uD868\uDE0E"],[195092,1,"\uD868\uDE91"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\uD869\uDE00"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var Ym=Q((mR1,Xm)=>{mR1.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var zm=Q((GH0,Um)=>{var MC=Am(),T9=Bm(),Dm=Jm(),{STATUS_MAPPING:K8}=Ym();function jC(F){return/[^\x00-\x7F]/u.test(F)}function Gm(F){let A=0,$=Dm.length-1;while(A<=$){let B=Math.floor((A+$)/2),J=Dm[B],X=Array.isArray(J[0])?J[0][0]:J[0],Y=Array.isArray(J[0])?J[0][1]:J[0];if(X<=F&&Y>=F)return J.slice(1);else if(X>F)$=B-1;else A=B+1}return null}function cR1(F,{transitionalProcessing:A}){let $="";for(let B of F){let[J,X]=Gm(B.codePointAt(0));switch(J){case K8.disallowed:$+=B;break;case K8.ignored:break;case K8.mapped:if(A&&B==="\u1E9E")$+="ss";else $+=X;break;case K8.deviation:if(A)$+=X;else $+=B;break;case K8.valid:$+=B;break}}return $}function lR1(F,{checkHyphens:A,checkBidi:$,checkJoiners:B,transitionalProcessing:J,useSTD3ASCIIRules:X,isBidi:Y}){if(F.length===0)return!0;if(F.normalize("NFC")!==F)return!1;let D=Array.from(F);if(A){if(D[2]==="-"&&D[3]==="-"||(F.startsWith("-")||F.endsWith("-")))return!1}if(!A){if(F.startsWith("xn--"))return!1}if(F.includes("."))return!1;if(T9.combiningMarks.test(D[0]))return!1;for(let G of D){let Z=G.codePointAt(0),[U]=Gm(Z);if(J){if(U!==K8.valid)return!1}else if(U!==K8.valid&&U!==K8.deviation)return!1;if(X&&Z<=127){if(!/^(?:[a-z]|[0-9]|-)$/u.test(G))return!1}}if(B){let G=0;for(let[Z,U]of D.entries())if(U==="\u200C"||U==="\u200D"){if(Z>0){if(T9.combiningClassVirama.test(D[Z-1]))continue;if(U==="\u200C"){let z=D.indexOf("\u200C",Z+1),W=z<0?D.slice(G):D.slice(G,z);if(T9.validZWNJ.test(W.join(""))){G=Z+1;continue}}}return!1}}if($&&Y){let G;if(T9.bidiS1LTR.test(D[0]))G=!1;else if(T9.bidiS1RTL.test(D[0]))G=!0;else return!1;if(G){if(!T9.bidiS2.test(F)||!T9.bidiS3.test(F)||T9.bidiS4EN.test(F)&&T9.bidiS4AN.test(F))return!1}else if(!T9.bidiS5.test(F)||!T9.bidiS6.test(F))return!1}return!0}function pR1(F){let A=F.map(($)=>{if($.startsWith("xn--"))try{return MC.decode($.substring(4))}catch{return""}return $}).join(".");return T9.bidiDomain.test(A)}function Zm(F,A){let $=cR1(F,A);$=$.normalize("NFC");let B=$.split("."),J=pR1(B),X=!1;for(let[Y,D]of B.entries()){let G=D,Z=A.transitionalProcessing;if(G.startsWith("xn--")){if(jC(G)){X=!0;continue}try{G=MC.decode(G.substring(4))}catch{if(!A.ignoreInvalidPunycode){X=!0;continue}}if(B[Y]=G,G===""||!jC(G))X=!0;Z=!1}if(X)continue;if(!lR1(G,{...A,transitionalProcessing:Z,isBidi:J}))X=!0}return{string:B.join("."),error:X}}function iR1(F,{checkHyphens:A=!1,checkBidi:$=!1,checkJoiners:B=!1,useSTD3ASCIIRules:J=!1,verifyDNSLength:X=!1,transitionalProcessing:Y=!1,ignoreInvalidPunycode:D=!1}={}){let G=Zm(F,{checkHyphens:A,checkBidi:$,checkJoiners:B,useSTD3ASCIIRules:J,transitionalProcessing:Y,ignoreInvalidPunycode:D}),Z=G.string.split(".");if(Z=Z.map((U)=>{if(jC(U))try{return`xn--${MC.encode(U)}`}catch{G.error=!0}return U}),X){let U=Z.join(".").length;if(U>253||U===0)G.error=!0;for(let z=0;z<Z.length;++z)if(Z[z].length>63||Z[z].length===0){G.error=!0;break}}if(G.error)return null;return Z.join(".")}function aR1(F,{checkHyphens:A=!1,checkBidi:$=!1,checkJoiners:B=!1,useSTD3ASCIIRules:J=!1,transitionalProcessing:X=!1,ignoreInvalidPunycode:Y=!1}={}){let D=Zm(F,{checkHyphens:A,checkBidi:$,checkJoiners:B,useSTD3ASCIIRules:J,transitionalProcessing:X,ignoreInvalidPunycode:Y});return{domain:D.string,error:D.error}}Um.exports={toASCII:iR1,toUnicode:aR1}});var kC=Q((ZH0,Hm)=>{function TC(F){return F>=48&&F<=57}function Wm(F){return F>=65&&F<=90||F>=97&&F<=122}function nR1(F){return Wm(F)||TC(F)}function rR1(F){return TC(F)||F>=65&&F<=70||F>=97&&F<=102}Hm.exports={isASCIIDigit:TC,isASCIIAlpha:Wm,isASCIIAlphanumeric:nR1,isASCIIHex:rR1}});var SU=Q((UH0,Km)=>{var tR1=new TextEncoder,sR1=new TextDecoder("utf-8",{ignoreBOM:!0});function oR1(F){return tR1.encode(F)}function eR1(F){return sR1.decode(F)}Km.exports={utf8Encode:oR1,utf8DecodeWithoutBOM:eR1}});var uU=Q((zH0,Im)=>{var{isASCIIHex:qm}=kC(),{utf8Encode:Qm}=SU();function X0(F){return F.codePointAt(0)}function Fj1(F){let A=F.toString(16).toUpperCase();if(A.length===1)A=`0${A}`;return`%${A}`}function Vm(F){let A=new Uint8Array(F.byteLength),$=0;for(let B=0;B<F.byteLength;++B){let J=F[B];if(J!==37)A[$++]=J;else if(J===37&&(!qm(F[B+1])||!qm(F[B+2])))A[$++]=J;else{let X=parseInt(String.fromCodePoint(F[B+1],F[B+2]),16);A[$++]=X,B+=2}}return A.slice(0,$)}function Aj1(F){let A=Qm(F);return Vm(A)}function OC(F){return F<=31||F>126}var $j1=new Set([X0(" "),X0('"'),X0("<"),X0(">"),X0("`")]);function Bj1(F){return OC(F)||$j1.has(F)}var Jj1=new Set([X0(" "),X0('"'),X0("#"),X0("<"),X0(">")]);function SC(F){return OC(F)||Jj1.has(F)}function Xj1(F){return SC(F)||F===X0("'")}var Yj1=new Set([X0("?"),X0("`"),X0("{"),X0("}"),X0("^")]);function Em(F){return SC(F)||Yj1.has(F)}var Dj1=new Set([X0("/"),X0(":"),X0(";"),X0("="),X0("@"),X0("["),X0("\\"),X0("]"),X0("|")]);function Lm(F){return Em(F)||Dj1.has(F)}var Gj1=new Set([X0("$"),X0("%"),X0("&"),X0("+"),X0(",")]);function Zj1(F){return Lm(F)||Gj1.has(F)}var Uj1=new Set([X0("!"),X0("'"),X0("("),X0(")"),X0("~")]);function zj1(F){return Zj1(F)||Uj1.has(F)}function wm(F,A){let $=Qm(F),B="";for(let J of $)if(!A(J))B+=String.fromCharCode(J);else B+=Fj1(J);return B}function Wj1(F,A){return wm(String.fromCodePoint(F),A)}function Hj1(F,A,$=!1){let B="";for(let J of F)if($&&J===" ")B+="+";else B+=wm(J,A);return B}Im.exports={isC0ControlPercentEncode:OC,isFragmentPercentEncode:Bj1,isQueryPercentEncode:SC,isSpecialQueryPercentEncode:Xj1,isPathPercentEncode:Em,isUserinfoPercentEncode:Lm,isURLEncodedPercentEncode:zj1,percentDecodeString:Aj1,percentDecodeBytes:Vm,utf8PercentEncodeString:Hj1,utf8PercentEncodeCodePoint:Wj1}});var _C=Q((hj1,G3)=>{var Kj1=zm(),H4=kC(),{utf8DecodeWithoutBOM:qj1}=SU(),{percentDecodeString:Qj1,utf8PercentEncodeCodePoint:xU,utf8PercentEncodeString:bU,isC0ControlPercentEncode:jm,isFragmentPercentEncode:Vj1,isQueryPercentEncode:Ej1,isSpecialQueryPercentEncode:Lj1,isPathPercentEncode:wj1,isUserinfoPercentEncode:xC}=uU();function s(F){return F.codePointAt(0)}var Mm={ftp:21,file:null,http:80,https:443,ws:80,wss:443},b1=Symbol("failure");function Cm(F){return[...F].length}function Nm(F,A){let $=F[A];return isNaN($)?void 0:String.fromCodePoint($)}function Pm(F){return F==="."||F.toLowerCase()==="%2e"}function Ij1(F){return F=F.toLowerCase(),F===".."||F==="%2e."||F===".%2e"||F==="%2e%2e"}function Cj1(F,A){return H4.isASCIIAlpha(F)&&(A===s(":")||A===s("|"))}function Tm(F){return F.length===2&&H4.isASCIIAlpha(F.codePointAt(0))&&(F[1]===":"||F[1]==="|")}function Nj1(F){return F.length===2&&H4.isASCIIAlpha(F.codePointAt(0))&&F[1]===":"}function km(F){return F.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Pj1(F){return km(F)||F.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function fU(F){return Mm[F]!==void 0}function W4(F){return fU(F.scheme)}function uC(F){return!fU(F.scheme)}function Om(F){return Mm[F]}function Sm(F){if(F==="")return b1;let A=10;if(F.length>=2&&F.charAt(0)==="0"&&F.charAt(1).toLowerCase()==="x")F=F.substring(2),A=16;else if(F.length>=2&&F.charAt(0)==="0")F=F.substring(1),A=8;if(F==="")return 0;let $=/[^0-7]/u;if(A===10)$=/[^0-9]/u;if(A===16)$=/[^0-9A-Fa-f]/u;if($.test(F))return b1;return parseInt(F,A)}function Rj1(F){let A=F.split(".");if(A[A.length-1]===""){if(A.length>1)A.pop()}if(A.length>4)return b1;let $=[];for(let X of A){let Y=Sm(X);if(Y===b1)return b1;$.push(Y)}for(let X=0;X<$.length-1;++X)if($[X]>255)return b1;if($[$.length-1]>=256**(5-$.length))return b1;let B=$.pop(),J=0;for(let X of $)B+=X*256**(3-J),++J;return B}function jj1(F){let A="",$=F;for(let B=1;B<=4;++B){if(A=String($%256)+A,B!==4)A=`.${A}`;$=Math.floor($/256)}return A}function Mj1(F){let A=[0,0,0,0,0,0,0,0],$=0,B=null,J=0;if(F=Array.from(F,(X)=>X.codePointAt(0)),F[J]===s(":")){if(F[J+1]!==s(":"))return b1;J+=2,++$,B=$}while(J<F.length){if($===8)return b1;if(F[J]===s(":")){if(B!==null)return b1;++J,++$,B=$;continue}let X=0,Y=0;while(Y<4&&H4.isASCIIHex(F[J]))X=X*16+parseInt(Nm(F,J),16),++J,++Y;if(F[J]===s(".")){if(Y===0)return b1;if(J-=Y,$>6)return b1;let D=0;while(F[J]!==void 0){let G=null;if(D>0)if(F[J]===s(".")&&D<4)++J;else return b1;if(!H4.isASCIIDigit(F[J]))return b1;while(H4.isASCIIDigit(F[J])){let Z=parseInt(Nm(F,J));if(G===null)G=Z;else if(G===0)return b1;else G=G*10+Z;if(G>255)return b1;++J}if(A[$]=A[$]*256+G,++D,D===2||D===4)++$}if(D!==4)return b1;break}else if(F[J]===s(":")){if(++J,F[J]===void 0)return b1}else if(F[J]!==void 0)return b1;A[$]=X,++$}if(B!==null){let X=$-B;$=7;while($!==0&&X>0){let Y=A[B+X-1];A[B+X-1]=A[$],A[$]=Y,--$,--X}}else if(B===null&&$!==8)return b1;return A}function Tj1(F){let A="",$=Sj1(F),B=!1;for(let J=0;J<=7;++J){if(B&&F[J]===0)continue;else if(B)B=!1;if($===J){A+=J===0?"::":":",B=!0;continue}if(A+=F[J].toString(16),J!==7)A+=":"}return A}function fC(F,A=!1){if(F[0]==="["){if(F[F.length-1]!=="]")return b1;return Mj1(F.substring(1,F.length-1))}if(A)return Oj1(F);let $=qj1(Qj1(F)),B=uj1($);if(B===b1)return b1;if(kj1(B))return Rj1(B);return B}function kj1(F){let A=F.split(".");if(A[A.length-1]===""){if(A.length===1)return!1;A.pop()}let $=A[A.length-1];if(Sm($)!==b1)return!0;if(/^[0-9]+$/u.test($))return!0;return!1}function Oj1(F){if(km(F))return b1;return bU(F,jm)}function Sj1(F){let A=null,$=1,B=null,J=0;for(let X=0;X<F.length;++X)if(F[X]!==0){if(J>$)A=B,$=J;B=null,J=0}else{if(B===null)B=X;++J}if(J>$)return B;return A}function bC(F){if(typeof F==="number")return jj1(F);if(F instanceof Array)return`[${Tj1(F)}]`;return F}function uj1(F,A=!1){let $=Kj1.toASCII(F,{checkHyphens:A,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:A,transitionalProcessing:!1,verifyDNSLength:A,ignoreInvalidPunycode:!1});if($===null)return b1;if(!A){if($==="")return b1;if(Pj1($))return b1}return $}function fj1(F){let A=0,$=F.length;for(;A<$;++A)if(F.charCodeAt(A)>32)break;for(;$>A;--$)if(F.charCodeAt($-1)>32)break;return F.substring(A,$)}function xj1(F){return F.replace(/\u0009|\u000A|\u000D/ug,"")}function um(F){let{path:A}=F;if(A.length===0)return;if(F.scheme==="file"&&A.length===1&&gj1(A[0]))return;A.pop()}function fm(F){return F.username!==""||F.password!==""}function bj1(F){return F.host===null||F.host===""||F.scheme==="file"}function QX(F){return typeof F.path==="string"}function gj1(F){return/^[A-Za-z]:$/u.test(F)}function H6(F,A,$,B,J){if(this.pointer=0,this.input=F,this.base=A||null,this.encodingOverride=$||"utf-8",this.stateOverride=J,this.url=B,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let Y=fj1(this.input);if(Y!==this.input)this.parseError=!0;this.input=Y}let X=xj1(this.input);if(X!==this.input)this.parseError=!0;this.input=X,this.state=J||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(Y)=>Y.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){let Y=this.input[this.pointer],D=isNaN(Y)?void 0:String.fromCodePoint(Y),G=this[`parse ${this.state}`](Y,D);if(!G)break;else if(G===b1){this.failure=!0;break}}}H6.prototype["parse scheme start"]=function(A,$){if(H4.isASCIIAlpha(A))this.buffer+=$.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,b1;return!0};H6.prototype["parse scheme"]=function(A,$){if(H4.isASCIIAlphanumeric(A)||A===s("+")||A===s("-")||A===s("."))this.buffer+=$.toLowerCase();else if(A===s(":")){if(this.stateOverride){if(W4(this.url)&&!fU(this.buffer))return!1;if(!W4(this.url)&&fU(this.buffer))return!1;if((fm(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===Om(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==s("/")||this.input[this.pointer+2]!==s("/"))this.parseError=!0;this.state="file"}else if(W4(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(W4(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===s("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,b1;return!0};H6.prototype["parse no scheme"]=function(A){if(this.base===null||QX(this.base)&&A!==s("#"))return b1;else if(QX(this.base)&&A===s("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};H6.prototype["parse special relative or authority"]=function(A){if(A===s("/")&&this.input[this.pointer+1]===s("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};H6.prototype["parse path or authority"]=function(A){if(A===s("/"))this.state="authority";else this.state="path",--this.pointer;return!0};H6.prototype["parse relative"]=function(A){if(this.url.scheme=this.base.scheme,A===s("/"))this.state="relative slash";else if(W4(this.url)&&A===s("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===s("?"))this.url.query="",this.state="query";else if(A===s("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};H6.prototype["parse relative slash"]=function(A){if(W4(this.url)&&(A===s("/")||A===s("\\"))){if(A===s("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(A===s("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};H6.prototype["parse special authority slashes"]=function(A){if(A===s("/")&&this.input[this.pointer+1]===s("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};H6.prototype["parse special authority ignore slashes"]=function(A){if(A!==s("/")&&A!==s("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};H6.prototype["parse authority"]=function(A,$){if(A===s("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;let B=Cm(this.buffer);for(let J=0;J<B;++J){let X=this.buffer.codePointAt(J);if(X===s(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let Y=xU(X,xC);if(this.passwordTokenSeenFlag)this.url.password+=Y;else this.url.username+=Y}this.buffer=""}else if(isNaN(A)||A===s("/")||A===s("?")||A===s("#")||W4(this.url)&&A===s("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,b1;this.pointer-=Cm(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=$;return!0};H6.prototype["parse hostname"]=H6.prototype["parse host"]=function(A,$){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(A===s(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,b1;if(this.stateOverride==="hostname")return!1;let B=fC(this.buffer,uC(this.url));if(B===b1)return b1;this.url.host=B,this.buffer="",this.state="port"}else if(isNaN(A)||A===s("/")||A===s("?")||A===s("#")||W4(this.url)&&A===s("\\")){if(--this.pointer,W4(this.url)&&this.buffer==="")return this.parseError=!0,b1;else if(this.stateOverride&&this.buffer===""&&(fm(this.url)||this.url.port!==null))return this.parseError=!0,!1;let B=fC(this.buffer,uC(this.url));if(B===b1)return b1;if(this.url.host=B,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(A===s("["))this.arrFlag=!0;else if(A===s("]"))this.arrFlag=!1;this.buffer+=$}return!0};H6.prototype["parse port"]=function(A,$){if(H4.isASCIIDigit(A))this.buffer+=$;else if(isNaN(A)||A===s("/")||A===s("?")||A===s("#")||W4(this.url)&&A===s("\\")||this.stateOverride){if(this.buffer!==""){let B=parseInt(this.buffer);if(B>65535)return this.parseError=!0,b1;this.url.port=B===Om(this.url.scheme)?null:B,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,b1;return!0};var _j1=new Set([s("/"),s("\\"),s("?"),s("#")]);function xm(F,A){let $=F.length-A;return $>=2&&Cj1(F[A],F[A+1])&&($===2||_j1.has(F[A+2]))}H6.prototype["parse file"]=function(A){if(this.url.scheme="file",this.url.host="",A===s("/")||A===s("\\")){if(A===s("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===s("?"))this.url.query="",this.state="query";else if(A===s("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A)){if(this.url.query=null,!xm(this.input,this.pointer))um(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};H6.prototype["parse file slash"]=function(A){if(A===s("/")||A===s("\\")){if(A===s("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!xm(this.input,this.pointer)&&Nj1(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};H6.prototype["parse file host"]=function(A,$){if(isNaN(A)||A===s("/")||A===s("\\")||A===s("?")||A===s("#"))if(--this.pointer,!this.stateOverride&&Tm(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let B=fC(this.buffer,uC(this.url));if(B===b1)return b1;if(B==="localhost")B="";if(this.url.host=B,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=$;return!0};H6.prototype["parse path start"]=function(A){if(W4(this.url)){if(A===s("\\"))this.parseError=!0;if(this.state="path",A!==s("/")&&A!==s("\\"))--this.pointer}else if(!this.stateOverride&&A===s("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&A===s("#"))this.url.fragment="",this.state="fragment";else if(A!==void 0){if(this.state="path",A!==s("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};H6.prototype["parse path"]=function(A){if(isNaN(A)||A===s("/")||W4(this.url)&&A===s("\\")||!this.stateOverride&&(A===s("?")||A===s("#"))){if(W4(this.url)&&A===s("\\"))this.parseError=!0;if(Ij1(this.buffer)){if(um(this.url),A!==s("/")&&!(W4(this.url)&&A===s("\\")))this.url.path.push("")}else if(Pm(this.buffer)&&A!==s("/")&&!(W4(this.url)&&A===s("\\")))this.url.path.push("");else if(!Pm(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&Tm(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",A===s("?"))this.url.query="",this.state="query";if(A===s("#"))this.url.fragment="",this.state="fragment"}else{if(A===s("%")&&(!H4.isASCIIHex(this.input[this.pointer+1])||!H4.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=xU(A,wj1)}return!0};H6.prototype["parse opaque path"]=function(A){if(A===s("?"))this.url.query="",this.state="query";else if(A===s("#"))this.url.fragment="",this.state="fragment";else if(A===s(" ")){let $=this.input[this.pointer+1];if($===s("?")||$===s("#"))this.url.path+="%20";else this.url.path+=" "}else{if(!isNaN(A)&&A!==s("%"))this.parseError=!0;if(A===s("%")&&(!H4.isASCIIHex(this.input[this.pointer+1])||!H4.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(A))this.url.path+=xU(A,jm)}return!0};H6.prototype["parse query"]=function(A,$){if(!W4(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&A===s("#")||isNaN(A)){let B=W4(this.url)?Lj1:Ej1;if(this.url.query+=bU(this.buffer,B),this.buffer="",A===s("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(A)){if(A===s("%")&&(!H4.isASCIIHex(this.input[this.pointer+1])||!H4.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=$}return!0};H6.prototype["parse fragment"]=function(A){if(!isNaN(A)){if(A===s("%")&&(!H4.isASCIIHex(this.input[this.pointer+1])||!H4.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=xU(A,Vj1)}return!0};function yj1(F,A){let $=`${F.scheme}:`;if(F.host!==null){if($+="//",F.username!==""||F.password!==""){if($+=F.username,F.password!=="")$+=`:${F.password}`;$+="@"}if($+=bC(F.host),F.port!==null)$+=`:${F.port}`}if(F.host===null&&!QX(F)&&F.path.length>1&&F.path[0]==="")$+="/.";if($+=gC(F),F.query!==null)$+=`?${F.query}`;if(!A&&F.fragment!==null)$+=`#${F.fragment}`;return $}function vj1(F){let A=`${F.scheme}://`;if(A+=bC(F.host),F.port!==null)A+=`:${F.port}`;return A}function gC(F){if(QX(F))return F.path;let A="";for(let $ of F.path)A+=`/${$}`;return A}hj1.serializeURL=yj1;hj1.serializePath=gC;hj1.serializeURLOrigin=function(F){switch(F.scheme){case"blob":{let A=hj1.parseURL(gC(F));if(A===null)return"null";if(A.scheme!=="http"&&A.scheme!=="https")return"null";return hj1.serializeURLOrigin(A)}case"ftp":case"http":case"https":case"ws":case"wss":return vj1({scheme:F.scheme,host:F.host,port:F.port});case"file":return"null";default:return"null"}};hj1.basicURLParse=function(F,A){if(A===void 0)A={};let $=new H6(F,A.baseURL,A.encodingOverride,A.url,A.stateOverride);if($.failure)return null;return $.url};hj1.setTheUsername=function(F,A){F.username=bU(A,xC)};hj1.setThePassword=function(F,A){F.password=bU(A,xC)};hj1.serializeHost=bC;hj1.cannotHaveAUsernamePasswordPort=bj1;hj1.hasAnOpaquePath=QX;hj1.serializeInteger=function(F){return String(F)};hj1.parseURL=function(F,A){if(A===void 0)A={};return hj1.basicURLParse(F,{baseURL:A.baseURL,encodingOverride:A.encodingOverride})}});var yC=Q((WH0,dm)=>{var{utf8Encode:tj1,utf8DecodeWithoutBOM:gm}=SU(),{percentDecodeBytes:_m,utf8PercentEncodeString:ym,isURLEncodedPercentEncode:vm}=uU();function hm(F){return F.codePointAt(0)}function sj1(F){let A=FM1(F,hm("&")),$=[];for(let B of A){if(B.length===0)continue;let J,X,Y=B.indexOf(hm("="));if(Y>=0)J=B.slice(0,Y),X=B.slice(Y+1);else J=B,X=new Uint8Array(0);J=mm(J,43,32),X=mm(X,43,32);let D=gm(_m(J)),G=gm(_m(X));$.push([D,G])}return $}function oj1(F){return sj1(tj1(F))}function ej1(F){let A="";for(let[$,B]of F.entries()){let J=ym(B[0],vm,!0),X=ym(B[1],vm,!0);if($!==0)A+="&";A+=`${J}=${X}`}return A}function FM1(F,A){let $=[],B=0,J=F.indexOf(A);while(J>=0)$.push(F.slice(B,J)),B=J+1,J=F.indexOf(A,B);if(B!==F.length)$.push(F.slice(B));return $}function mm(F,A,$){let B=F.indexOf(A);while(B>=0)F[B]=$,B=F.indexOf(A,B+1);return F}dm.exports={parseUrlencodedString:oj1,serializeUrlencoded:ej1}});var lm=Q((AM1)=>{var cm=TU(),gU=OU();AM1.convert=(F,A,{context:$="The provided value"}={})=>{if(typeof A!=="function")throw new F.TypeError($+" is not a function");function B(...J){let X=gU.tryWrapperForImpl(this),Y;for(let D=0;D<J.length;D++)J[D]=gU.tryWrapperForImpl(J[D]);return Y=Reflect.apply(A,X,J),Y=cm.any(Y,{context:$,globals:F}),Y}return B.construct=(...J)=>{for(let Y=0;Y<J.length;Y++)J[Y]=gU.tryWrapperForImpl(J[Y]);let X=Reflect.construct(A,J);return X=cm.any(X,{context:$,globals:F}),X},B[gU.wrapperSymbol]=A,B.objectReference=A,B}});var pm=Q((BM1)=>{var vC=yC();BM1.implementation=class{constructor(A,$,{doNotStripQMark:B=!1}){let J=$[0];if(this._list=[],this._url=null,!B&&typeof J==="string"&&J[0]==="?")J=J.slice(1);if(Array.isArray(J))for(let X of J){if(X.length!==2)throw TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([X[0],X[1]])}else if(typeof J==="object"&&Object.getPrototypeOf(J)===null)for(let X of Object.keys(J)){let Y=J[X];this._list.push([X,Y])}else this._list=vC.parseUrlencodedString(J)}_updateSteps(){if(this._url!==null){let A=vC.serializeUrlencoded(this._list);if(A==="")A=null;this._url._url.query=A}}get size(){return this._list.length}append(A,$){this._list.push([A,$]),this._updateSteps()}delete(A,$){let B=0;while(B<this._list.length)if(this._list[B][0]===A&&($===void 0||this._list[B][1]===$))this._list.splice(B,1);else B++;this._updateSteps()}get(A){for(let $ of this._list)if($[0]===A)return $[1];return null}getAll(A){let $=[];for(let B of this._list)if(B[0]===A)$.push(B[1]);return $}has(A,$){for(let B of this._list)if(B[0]===A&&($===void 0||B[1]===$))return!0;return!1}set(A,$){let B=!1,J=0;while(J<this._list.length)if(this._list[J][0]===A)if(B)this._list.splice(J,1);else B=!0,this._list[J][1]=$,J++;else J++;if(!B)this._list.push([A,$]);this._updateSteps()}sort(){this._list.sort((A,$)=>{if(A[0]<$[0])return-1;if(A[0]>$[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return vC.serializeUrlencoded(this._list)}}});var mC=Q((DM1)=>{var M3=TU(),g0=OU(),XM1=lm(),im=g0.newObjectInRealm,R6=g0.implSymbol,am=g0.ctorRegistrySymbol;DM1.is=(F)=>{return g0.isObject(F)&&g0.hasOwn(F,R6)&&F[R6]instanceof q8.implementation};DM1.isImpl=(F)=>{return g0.isObject(F)&&F instanceof q8.implementation};DM1.convert=(F,A,{context:$="The provided value"}={})=>{if(DM1.is(A))return g0.implForWrapper(A);throw new F.TypeError(`${$} is not of type 'URLSearchParams'.`)};DM1.createDefaultIterator=(F,A,$)=>{let J=F[am]["URLSearchParams Iterator"],X=Object.create(J);return Object.defineProperty(X,g0.iterInternalSymbol,{value:{target:A,kind:$,index:0},configurable:!0}),X};function nm(F,A){let $;if(A!==void 0)$=A.prototype;if(!g0.isObject($))$=F[am].URLSearchParams.prototype;return Object.create($)}DM1.create=(F,A,$)=>{let B=nm(F);return DM1.setup(B,F,A,$)};DM1.createImpl=(F,A,$)=>{let B=DM1.create(F,A,$);return g0.implForWrapper(B)};DM1._internalSetup=(F,A)=>{};DM1.setup=(F,A,$=[],B={})=>{if(B.wrapper=F,DM1._internalSetup(F,A),Object.defineProperty(F,R6,{value:new q8.implementation(A,$,B),configurable:!0}),F[R6][g0.wrapperSymbol]=F,q8.init)q8.init(F[R6]);return F};DM1.new=(F,A)=>{let $=nm(F,A);if(DM1._internalSetup($,F),Object.defineProperty($,R6,{value:Object.create(q8.implementation.prototype),configurable:!0}),$[R6][g0.wrapperSymbol]=$,q8.init)q8.init($[R6]);return $[R6]};var YM1=new Set(["Window","Worker"]);DM1.install=(F,A)=>{if(!A.some((J)=>YM1.has(J)))return;let $=g0.initCtorRegistry(F);class B{constructor(){let J=[];{let X=arguments[0];if(X!==void 0)if(g0.isObject(X))if(X[Symbol.iterator]!==void 0)if(!g0.isObject(X))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{let Y=[],D=X;for(let G of D){if(!g0.isObject(G))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{let Z=[],U=G;for(let z of U)z=M3.USVString(z,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:F}),Z.push(z);G=Z}Y.push(G)}X=Y}else if(!g0.isObject(X))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{let Y=Object.create(null);for(let D of Reflect.ownKeys(X)){let G=Object.getOwnPropertyDescriptor(X,D);if(G&&G.enumerable){let Z=D;Z=M3.USVString(Z,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:F});let U=X[D];U=M3.USVString(U,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:F}),Y[Z]=U}}X=Y}else X=M3.USVString(X,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:F});else X="";J.push(X)}return DM1.setup(Object.create(new.target.prototype),F,J)}append(J,X){let Y=this!==null&&this!==void 0?this:F;if(!DM1.is(Y))throw new F.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let D=[];{let G=arguments[0];G=M3.USVString(G,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:F}),D.push(G)}{let G=arguments[1];G=M3.USVString(G,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:F}),D.push(G)}return g0.tryWrapperForImpl(Y[R6].append(...D))}delete(J){let X=this!==null&&this!==void 0?this:F;if(!DM1.is(X))throw new F.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let D=arguments[0];D=M3.USVString(D,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:F}),Y.push(D)}{let D=arguments[1];if(D!==void 0)D=M3.USVString(D,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:F});Y.push(D)}return g0.tryWrapperForImpl(X[R6].delete(...Y))}get(J){let X=this!==null&&this!==void 0?this:F;if(!DM1.is(X))throw new F.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let D=arguments[0];D=M3.USVString(D,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:F}),Y.push(D)}return X[R6].get(...Y)}getAll(J){let X=this!==null&&this!==void 0?this:F;if(!DM1.is(X))throw new F.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let D=arguments[0];D=M3.USVString(D,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:F}),Y.push(D)}return g0.tryWrapperForImpl(X[R6].getAll(...Y))}has(J){let X=this!==null&&this!==void 0?this:F;if(!DM1.is(X))throw new F.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let Y=[];{let D=arguments[0];D=M3.USVString(D,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:F}),Y.push(D)}{let D=arguments[1];if(D!==void 0)D=M3.USVString(D,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:F});Y.push(D)}return X[R6].has(...Y)}set(J,X){let Y=this!==null&&this!==void 0?this:F;if(!DM1.is(Y))throw new F.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let D=[];{let G=arguments[0];G=M3.USVString(G,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:F}),D.push(G)}{let G=arguments[1];G=M3.USVString(G,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:F}),D.push(G)}return g0.tryWrapperForImpl(Y[R6].set(...D))}sort(){let J=this!==null&&this!==void 0?this:F;if(!DM1.is(J))throw new F.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return g0.tryWrapperForImpl(J[R6].sort())}toString(){let J=this!==null&&this!==void 0?this:F;if(!DM1.is(J))throw new F.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return J[R6].toString()}keys(){if(!DM1.is(this))throw new F.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return DM1.createDefaultIterator(F,this,"key")}values(){if(!DM1.is(this))throw new F.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return DM1.createDefaultIterator(F,this,"value")}entries(){if(!DM1.is(this))throw new F.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return DM1.createDefaultIterator(F,this,"key+value")}forEach(J){if(!DM1.is(this))throw new F.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");J=XM1.convert(F,J,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let X=arguments[1],Y=Array.from(this[R6]),D=0;while(D<Y.length){let[G,Z]=Y[D].map(g0.tryWrapperForImpl);J.call(X,Z,G,this),Y=Array.from(this[R6]),D++}}get size(){let J=this!==null&&this!==void 0?this:F;if(!DM1.is(J))throw new F.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return J[R6].size}}Object.defineProperties(B.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:B.prototype.entries,configurable:!0,writable:!0}}),$.URLSearchParams=B,$["URLSearchParams Iterator"]=Object.create($["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),g0.define($["URLSearchParams Iterator"],{next(){let J=this&&this[g0.iterInternalSymbol];if(!J)throw new F.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:X,kind:Y,index:D}=J,G=Array.from(X[R6]),Z=G.length;if(D>=Z)return im(F,{value:void 0,done:!0});let U=G[D];return J.index=D+1,im(F,g0.iteratorResult(U.map(g0.tryWrapperForImpl),Y))}}),Object.defineProperty(F,"URLSearchParams",{configurable:!0,writable:!0,value:B})};var q8=pm()});var om=Q((KM1)=>{var R0=_C(),sm=yC(),HM1=mC();KM1.implementation=class F{constructor(A,[$,B]){let J=null;if(B!==void 0){if(J=R0.basicURLParse(B),J===null)throw TypeError(`Invalid base URL: ${B}`)}let X=R0.basicURLParse($,{baseURL:J});if(X===null)throw TypeError(`Invalid URL: ${$}`);let Y=X.query!==null?X.query:"";this._url=X,this._query=HM1.createImpl(A,[Y],{doNotStripQMark:!0}),this._query._url=this}static parse(A,$,B){try{return new F(A,[$,B])}catch{return null}}static canParse(A,$){let B=null;if($!==void 0){if(B=R0.basicURLParse($),B===null)return!1}if(R0.basicURLParse(A,{baseURL:B})===null)return!1;return!0}get href(){return R0.serializeURL(this._url)}set href(A){let $=R0.basicURLParse(A);if($===null)throw TypeError(`Invalid URL: ${A}`);this._url=$,this._query._list.splice(0);let{query:B}=$;if(B!==null)this._query._list=sm.parseUrlencodedString(B)}get origin(){return R0.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(A){R0.basicURLParse(`${A}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(A){if(R0.cannotHaveAUsernamePasswordPort(this._url))return;R0.setTheUsername(this._url,A)}get password(){return this._url.password}set password(A){if(R0.cannotHaveAUsernamePasswordPort(this._url))return;R0.setThePassword(this._url,A)}get host(){let A=this._url;if(A.host===null)return"";if(A.port===null)return R0.serializeHost(A.host);return`${R0.serializeHost(A.host)}:${R0.serializeInteger(A.port)}`}set host(A){if(R0.hasAnOpaquePath(this._url))return;R0.basicURLParse(A,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return R0.serializeHost(this._url.host)}set hostname(A){if(R0.hasAnOpaquePath(this._url))return;R0.basicURLParse(A,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return R0.serializeInteger(this._url.port)}set port(A){if(R0.cannotHaveAUsernamePasswordPort(this._url))return;if(A==="")this._url.port=null;else R0.basicURLParse(A,{url:this._url,stateOverride:"port"})}get pathname(){return R0.serializePath(this._url)}set pathname(A){if(R0.hasAnOpaquePath(this._url))return;this._url.path=[],R0.basicURLParse(A,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(A){let $=this._url;if(A===""){$.query=null,this._query._list=[];return}let B=A[0]==="?"?A.substring(1):A;$.query="",R0.basicURLParse(B,{url:$,stateOverride:"query"}),this._query._list=sm.parseUrlencodedString(B)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(A){if(A===""){this._url.fragment=null;return}let $=A[0]==="#"?A.substring(1):A;this._url.fragment="",R0.basicURLParse($,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var $d=Q((EM1)=>{var y4=TU(),T3=OU(),z0=T3.implSymbol,QM1=T3.ctorRegistrySymbol;EM1.is=(F)=>{return T3.isObject(F)&&T3.hasOwn(F,z0)&&F[z0]instanceof h2.implementation};EM1.isImpl=(F)=>{return T3.isObject(F)&&F instanceof h2.implementation};EM1.convert=(F,A,{context:$="The provided value"}={})=>{if(EM1.is(A))return T3.implForWrapper(A);throw new F.TypeError(`${$} is not of type 'URL'.`)};function em(F,A){let $;if(A!==void 0)$=A.prototype;if(!T3.isObject($))$=F[QM1].URL.prototype;return Object.create($)}EM1.create=(F,A,$)=>{let B=em(F);return EM1.setup(B,F,A,$)};EM1.createImpl=(F,A,$)=>{let B=EM1.create(F,A,$);return T3.implForWrapper(B)};EM1._internalSetup=(F,A)=>{};EM1.setup=(F,A,$=[],B={})=>{if(B.wrapper=F,EM1._internalSetup(F,A),Object.defineProperty(F,z0,{value:new h2.implementation(A,$,B),configurable:!0}),F[z0][T3.wrapperSymbol]=F,h2.init)h2.init(F[z0]);return F};EM1.new=(F,A)=>{let $=em(F,A);if(EM1._internalSetup($,F),Object.defineProperty($,z0,{value:Object.create(h2.implementation.prototype),configurable:!0}),$[z0][T3.wrapperSymbol]=$,h2.init)h2.init($[z0]);return $[z0]};var VM1=new Set(["Window","Worker"]);EM1.install=(F,A)=>{if(!A.some((J)=>VM1.has(J)))return;let $=T3.initCtorRegistry(F);class B{constructor(J){if(arguments.length<1)throw new F.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let X=[];{let Y=arguments[0];Y=y4.USVString(Y,{context:"Failed to construct 'URL': parameter 1",globals:F}),X.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=y4.USVString(Y,{context:"Failed to construct 'URL': parameter 2",globals:F});X.push(Y)}return EM1.setup(Object.create(new.target.prototype),F,X)}toJSON(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return J[z0].toJSON()}get href(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get href' called on an object that is not a valid instance of URL.");return J[z0].href}set href(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set href' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:F}),X[z0].href=J}toString(){let J=this;if(!EM1.is(J))throw new F.TypeError("'toString' called on an object that is not a valid instance of URL.");return J[z0].href}get origin(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get origin' called on an object that is not a valid instance of URL.");return J[z0].origin}get protocol(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return J[z0].protocol}set protocol(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set protocol' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:F}),X[z0].protocol=J}get username(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get username' called on an object that is not a valid instance of URL.");return J[z0].username}set username(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set username' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:F}),X[z0].username=J}get password(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get password' called on an object that is not a valid instance of URL.");return J[z0].password}set password(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set password' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:F}),X[z0].password=J}get host(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get host' called on an object that is not a valid instance of URL.");return J[z0].host}set host(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set host' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:F}),X[z0].host=J}get hostname(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return J[z0].hostname}set hostname(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set hostname' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:F}),X[z0].hostname=J}get port(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get port' called on an object that is not a valid instance of URL.");return J[z0].port}set port(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set port' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:F}),X[z0].port=J}get pathname(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return J[z0].pathname}set pathname(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set pathname' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:F}),X[z0].pathname=J}get search(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get search' called on an object that is not a valid instance of URL.");return J[z0].search}set search(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set search' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:F}),X[z0].search=J}get searchParams(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return T3.getSameObject(this,"searchParams",()=>{return T3.tryWrapperForImpl(J[z0].searchParams)})}get hash(){let J=this!==null&&this!==void 0?this:F;if(!EM1.is(J))throw new F.TypeError("'get hash' called on an object that is not a valid instance of URL.");return J[z0].hash}set hash(J){let X=this!==null&&this!==void 0?this:F;if(!EM1.is(X))throw new F.TypeError("'set hash' called on an object that is not a valid instance of URL.");J=y4.USVString(J,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:F}),X[z0].hash=J}static parse(J){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let X=[];{let Y=arguments[0];Y=y4.USVString(Y,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:F}),X.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=y4.USVString(Y,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:F});X.push(Y)}return T3.tryWrapperForImpl(h2.implementation.parse(F,...X))}static canParse(J){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let X=[];{let Y=arguments[0];Y=y4.USVString(Y,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:F}),X.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=y4.USVString(Y,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:F});X.push(Y)}return h2.implementation.canParse(...X)}}if(Object.defineProperties(B.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(B,{parse:{enumerable:!0},canParse:{enumerable:!0}}),$.URL=B,Object.defineProperty(F,"URL",{configurable:!0,writable:!0,value:B}),A.includes("Window"))Object.defineProperty(F,"webkitURL",{configurable:!0,writable:!0,value:B})};var h2=om()});var Bd=Q((jM1)=>{var PM1=$d(),RM1=mC();jM1.URL=PM1;jM1.URLSearchParams=RM1});var Xd=Q((SM1)=>{var{URL:kM1,URLSearchParams:OM1}=Bd(),B2=_C(),Jd=uU(),yU={Array,Object,Promise,String,TypeError};kM1.install(yU,["Window"]);OM1.install(yU,["Window"]);SM1.URL=yU.URL;SM1.URLSearchParams=yU.URLSearchParams;SM1.parseURL=B2.parseURL;SM1.basicURLParse=B2.basicURLParse;SM1.serializeURL=B2.serializeURL;SM1.serializePath=B2.serializePath;SM1.serializeHost=B2.serializeHost;SM1.serializeInteger=B2.serializeInteger;SM1.serializeURLOrigin=B2.serializeURLOrigin;SM1.setTheUsername=B2.setTheUsername;SM1.setThePassword=B2.setThePassword;SM1.cannotHaveAUsernamePasswordPort=B2.cannotHaveAUsernamePasswordPort;SM1.hasAnOpaquePath=B2.hasAnOpaquePath;SM1.percentDecodeString=Jd.percentDecodeString;SM1.percentDecodeBytes=Jd.percentDecodeBytes});var Dd=Q((k9)=>{var aM1=k9&&k9.__createBinding||(Object.create?function(F,A,$,B){if(B===void 0)B=$;var J=Object.getOwnPropertyDescriptor(A,$);if(!J||("get"in J?!A.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return A[$]}};Object.defineProperty(F,B,J)}:function(F,A,$,B){if(B===void 0)B=$;F[B]=A[$]}),nM1=k9&&k9.__setModuleDefault||(Object.create?function(F,A){Object.defineProperty(F,"default",{enumerable:!0,value:A})}:function(F,A){F.default=A}),rM1=k9&&k9.__importStar||function(F){if(F&&F.__esModule)return F;var A={};if(F!=null){for(var $ in F)if($!=="default"&&Object.prototype.hasOwnProperty.call(F,$))aM1(A,F,$)}return nM1(A,F),A};Object.defineProperty(k9,"__esModule",{value:!0});k9.redactConnectionString=k9.redactValidConnectionString=void 0;var Yd=rM1(vU());function tM1(F,A){var $,B;let J=F.clone(),X=($=A===null||A===void 0?void 0:A.replacementString)!==null&&$!==void 0?$:"_credentials_",Y=(B=A===null||A===void 0?void 0:A.redactUsernames)!==null&&B!==void 0?B:!0;if((J.username||J.password)&&Y)J.username=X,J.password="";else if(J.password)J.password=X;if(J.searchParams.has("authMechanismProperties")){let D=new Yd.CommaAndColonSeparatedRecord(J.searchParams.get("authMechanismProperties"));if(D.get("AWS_SESSION_TOKEN"))D.set("AWS_SESSION_TOKEN",X),J.searchParams.set("authMechanismProperties",D.toString())}if(J.searchParams.has("tlsCertificateKeyFilePassword"))J.searchParams.set("tlsCertificateKeyFilePassword",X);if(J.searchParams.has("proxyUsername")&&Y)J.searchParams.set("proxyUsername",X);if(J.searchParams.has("proxyPassword"))J.searchParams.set("proxyPassword",X);return J}k9.redactValidConnectionString=tM1;function sM1(F,A){var $,B;let J=($=A===null||A===void 0?void 0:A.replacementString)!==null&&$!==void 0?$:"<credentials>",X=(B=A===null||A===void 0?void 0:A.redactUsernames)!==null&&B!==void 0?B:!0,Y;try{Y=new Yd.default(F)}catch(Z){}if(Y)return A={...A,replacementString:"___credentials___"},Y.redact(A).toString().replace(/___credentials___/g,J);let D=J,G=[(Z)=>Z.replace(X?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${D}$3`),(Z)=>Z.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${D}`),(Z)=>Z.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${D}`),(Z)=>X?Z.replace(/(proxyUsername=)([^&]+)/gi,`$1${D}`):Z,(Z)=>Z.replace(/(proxyPassword=)([^&]+)/gi,`$1${D}`)];for(let Z of G)F=Z(F);return F}k9.redactConnectionString=sM1});var vU=Q((lC)=>{Object.defineProperty(lC,"__esModule",{value:!0});lC.CommaAndColonSeparatedRecord=lC.ConnectionString=lC.redactConnectionString=void 0;var oM1=Xd(),Gd=Dd();Object.defineProperty(lC,"redactConnectionString",{enumerable:!0,get:function(){return Gd.redactConnectionString}});var VX="__this_is_a_placeholder__";function eM1(F){return F.startsWith("mongodb://")||F.startsWith("mongodb+srv://")}var FT1=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class cC extends Map{delete(F){return super.delete(this._normalizeKey(F))}get(F){return super.get(this._normalizeKey(F))}has(F){return super.has(this._normalizeKey(F))}set(F,A){return super.set(this._normalizeKey(F),A)}_normalizeKey(F){F=`${F}`;for(let A of this.keys())if(A.toLowerCase()===F.toLowerCase()){F=A;break}return F}}function AT1(F){return class extends F{append($,B){return super.append(this._normalizeKey($),B)}delete($){return super.delete(this._normalizeKey($))}get($){return super.get(this._normalizeKey($))}getAll($){return super.getAll(this._normalizeKey($))}has($){return super.has(this._normalizeKey($))}set($,B){return super.set(this._normalizeKey($),B)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey($){return cC.prototype._normalizeKey.call(this,$)}}}class Zd extends oM1.URL{}class m2 extends Error{get name(){return"MongoParseError"}}class EX extends Zd{constructor(F,A={}){var $;let{looseValidation:B}=A;if(!B&&!eM1(F))throw new m2('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let J=F.match(FT1);if(!J)throw new m2(`Invalid connection string "${F}"`);let{protocol:X,username:Y,password:D,hosts:G,rest:Z}=($=J.groups)!==null&&$!==void 0?$:{};if(!B){if(!X||!G)throw new m2(`Protocol and host list are required in "${F}"`);try{decodeURIComponent(Y!==null&&Y!==void 0?Y:""),decodeURIComponent(D!==null&&D!==void 0?D:"")}catch(W){throw new m2(W.message)}let z=/[:/?#[\]@]/gi;if(Y===null||Y===void 0?void 0:Y.match(z))throw new m2(`Username contains unescaped characters ${Y}`);if(!Y||!D){let W=F.replace(`${X}://`,"");if(W.startsWith("@")||W.startsWith(":"))throw new m2("URI contained empty userinfo section")}if(D===null||D===void 0?void 0:D.match(z))throw new m2("Password contains unescaped characters")}let U="";if(typeof Y==="string")U+=Y;if(typeof D==="string")U+=`:${D}`;if(U)U+="@";try{super(`${X.toLowerCase()}://${U}${VX}${Z}`)}catch(z){if(B)new EX(F,{...A,looseValidation:!1});if(typeof z.message==="string")z.message=z.message.replace(VX,G);throw z}if(this._hosts=G.split(","),!B){if(this.isSRV&&this.hosts.length!==1)throw new m2("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((z)=>z.includes(":")))throw new m2("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,AT1(this.searchParams.constructor).prototype)}get host(){return VX}set host(F){throw Error("No single host for connection string")}get hostname(){return VX}set hostname(F){throw Error("No single host for connection string")}get port(){return""}set port(F){throw Error("No single host for connection string")}get href(){return this.toString()}set href(F){throw Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(F){this._hosts=F}toString(){return super.toString().replace(VX,this.hosts.join(","))}clone(){return new EX(this.toString(),{looseValidation:!0})}redact(F){return(0,Gd.redactValidConnectionString)(this,F)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:F,origin:A,protocol:$,username:B,password:J,hosts:X,pathname:Y,search:D,searchParams:G,hash:Z}=this;return{href:F,origin:A,protocol:$,username:B,password:J,hosts:X,pathname:Y,search:D,searchParams:G,hash:Z}}}lC.ConnectionString=EX;class Ud extends cC{constructor(F){super();for(let A of(F!==null&&F!==void 0?F:"").split(",")){if(!A)continue;let $=A.indexOf(":");if($===-1)this.set(A,"");else this.set(A.slice(0,$),A.slice($+1))}}toString(){return[...this].map((F)=>F.join(":")).join(",")}}lC.CommaAndColonSeparatedRecord=Ud;lC.default=EX});var wX=Q((Ld)=>{Object.defineProperty(Ld,"__esModule",{value:!0});Ld.OpCompressedRequest=Ld.OpMsgResponse=Ld.OpMsgRequest=Ld.DocumentSequence=Ld.OpReply=Ld.OpQueryRequest=void 0;var dA=J0(),LX=$1(),pC=IX(),hA=Y8(),mA=0,JT1=2,XT1=4,YT1=8,DT1=16,GT1=32,ZT1=64,UT1=128,zT1=1,WT1=2,HT1=4,KT1=8,qT1=dA.BSON.onDemand.ByteUtils.encodeUTF8Into;class aC{constructor(F,A,$){this.moreToCome=!1;let B=`${F}.$cmd`;if(typeof F!=="string")throw new LX.MongoRuntimeError("Database name must be a string for a query");if(A==null)throw new LX.MongoRuntimeError("A query document must be specified for query");if(B.indexOf("\x00")!==-1)throw new LX.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=F,this.query=A,this.ns=B,this.numberToSkip=$.numberToSkip||0,this.numberToReturn=$.numberToReturn||0,this.returnFieldSelector=$.returnFieldSelector||void 0,this.requestId=$.requestId??aC.getRequestId(),this.pre32Limit=$.pre32Limit,this.serializeFunctions=typeof $.serializeFunctions==="boolean"?$.serializeFunctions:!1,this.ignoreUndefined=typeof $.ignoreUndefined==="boolean"?$.ignoreUndefined:!1,this.maxBsonSize=$.maxBsonSize||16777216,this.checkKeys=typeof $.checkKeys==="boolean"?$.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof $.secondaryOk==="boolean"?$.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=mA++}nextRequestId(){return mA+1}static getRequestId(){return++mA}toBin(){let F=[],A=null,$=0;if(this.tailable)$|=JT1;if(this.secondaryOk)$|=XT1;if(this.oplogReplay)$|=YT1;if(this.noCursorTimeout)$|=DT1;if(this.awaitData)$|=GT1;if(this.exhaust)$|=ZT1;if(this.partial)$|=UT1;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let B=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);F.push(B);let J=dA.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(F.push(J),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)A=dA.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),F.push(A);let X=B.length+J.length+(A?A.length:0),Y=4;return B[3]=X>>24&255,B[2]=X>>16&255,B[1]=X>>8&255,B[0]=X&255,B[Y+3]=this.requestId>>24&255,B[Y+2]=this.requestId>>16&255,B[Y+1]=this.requestId>>8&255,B[Y]=this.requestId&255,Y=Y+4,B[Y+3]=0,B[Y+2]=0,B[Y+1]=0,B[Y]=0,Y=Y+4,B[Y+3]=hA.OP_QUERY>>24&255,B[Y+2]=hA.OP_QUERY>>16&255,B[Y+1]=hA.OP_QUERY>>8&255,B[Y]=hA.OP_QUERY&255,Y=Y+4,B[Y+3]=$>>24&255,B[Y+2]=$>>16&255,B[Y+1]=$>>8&255,B[Y]=$&255,Y=Y+4,Y=Y+B.write(this.ns,Y,"utf8")+1,B[Y-1]=0,B[Y+3]=this.numberToSkip>>24&255,B[Y+2]=this.numberToSkip>>16&255,B[Y+1]=this.numberToSkip>>8&255,B[Y]=this.numberToSkip&255,Y=Y+4,B[Y+3]=this.numberToReturn>>24&255,B[Y+2]=this.numberToReturn>>16&255,B[Y+1]=this.numberToReturn>>8&255,B[Y]=this.numberToReturn&255,Y=Y+4,F}}Ld.OpQueryRequest=aC;class Hd{constructor(F,A,$,B){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=F,this.data=$,this.opts=B??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new dA.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&zT1)!==0,this.queryFailure=(this.responseFlags&WT1)!==0,this.shardConfigStale=(this.responseFlags&HT1)!==0,this.awaitCapable=(this.responseFlags&KT1)!==0;for(let F=0;F<this.numberReturned;F++){let A=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,$=this.data.subarray(this.index,this.index+A);this.sections.push($),this.index=this.index+A}return this.parsed=!0,this.sections[0]}}Ld.OpReply=Hd;var Kd=1,qd=2,Qd=65536;class nC{constructor(F,A){this.field=F,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let $=Buffer.allocUnsafe(5+this.field.length+1);if($[0]=1,qT1($,`${this.field}\x00`,5),this.chunks.push($),this.header=$,A)for(let B of A)this.push(B,dA.serialize(B))}push(F,A){return this.serializedDocumentsLength+=A.length,this.documents.push(F),this.chunks.push(A),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}Ld.DocumentSequence=nC;class hU{constructor(F,A,$){if(A==null)throw new LX.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=F,this.command=A,this.command.$db=F,this.options=$??{},this.requestId=$.requestId?$.requestId:hU.getRequestId(),this.serializeFunctions=typeof $.serializeFunctions==="boolean"?$.serializeFunctions:!1,this.ignoreUndefined=typeof $.ignoreUndefined==="boolean"?$.ignoreUndefined:!1,this.checkKeys=typeof $.checkKeys==="boolean"?$.checkKeys:!1,this.maxBsonSize=$.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=$.moreToCome??A.writeConcern?.w===0,this.exhaustAllowed=typeof $.exhaustAllowed==="boolean"?$.exhaustAllowed:!1}toBin(){let F=[],A=0;if(this.checksumPresent)A|=Kd;if(this.moreToCome)A|=qd;if(this.exhaustAllowed)A|=Qd;let $=Buffer.alloc(20);F.push($);let B=$.length,J=this.command;return B+=this.makeSections(F,J),$.writeInt32LE(B,0),$.writeInt32LE(this.requestId,4),$.writeInt32LE(0,8),$.writeInt32LE(hA.OP_MSG,12),$.writeUInt32LE(A,16),F}makeSections(F,A){let $=this.extractDocumentSequences(A),B=Buffer.allocUnsafe(1);B[0]=0;let J=this.serializeBson(A);return F.push(B),F.push(J),F.push($),B.length+J.length+$.length}extractDocumentSequences(F){let A=[];for(let[$,B]of Object.entries(F))if(B instanceof nC)A.push(B.toBin()),delete F[$];if(A.length>0)return Buffer.concat(A);return Buffer.alloc(0)}serializeBson(F){return dA.serialize(F,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return mA=mA+1&2147483647,mA}}Ld.OpMsgRequest=hU;class Vd{constructor(F,A,$,B){this.index=0,this.sections=[],this.parsed=!1,this.raw=F,this.data=$,this.opts=B??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.responseFlags=$.readInt32LE(0),this.checksumPresent=(this.responseFlags&Kd)!==0,this.moreToCome=(this.responseFlags&qd)!==0,this.exhaustAllowed=(this.responseFlags&Qd)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let F=this.data.readUInt8(this.index++);if(F===0){let A=this.data.readUInt32LE(this.index),$=this.data.subarray(this.index,this.index+A);this.sections.push($),this.index+=A}else if(F===1)throw new LX.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}Ld.OpMsgResponse=Vd;var iC=16,Wd=9;class Ed{constructor(F,A){this.command=F,this.options={zlibCompressionLevel:A.zlibCompressionLevel,agreedCompressor:A.agreedCompressor}}static canCompress(F){let A=F instanceof hU?F.command:F.query,$=Object.keys(A)[0];return!pC.uncompressibleCommands.has($)}async toBin(){let F=Buffer.concat(this.command.toBin()),A=F.slice(iC),$=F.readInt32LE(12),B=await(0,pC.compress)(this.options,A),J=Buffer.alloc(iC);J.writeInt32LE(iC+Wd+B.length,0),J.writeInt32LE(this.command.requestId,4),J.writeInt32LE(0,8),J.writeInt32LE(hA.OP_COMPRESSED,12);let X=Buffer.alloc(Wd);return X.writeInt32LE($,0),X.writeInt32LE(A.length,4),X.writeUInt8(pC.Compressor[this.options.agreedCompressor],8),[J,X,B]}}Ld.OpCompressedRequest=Ed});var IX=Q((jd)=>{Object.defineProperty(jd,"__esModule",{value:!0});jd.uncompressibleCommands=jd.Compressor=void 0;jd.compress=RT1;jd.decompress=Pd;jd.compressCommand=jT1;jd.decompressResponse=MT1;var Id=x("util"),mU=x("zlib"),IT1=N6(),Cd=$2(),tC=$1(),cA=wX(),rC=Y8();jd.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});jd.uncompressibleCommands=new Set([IT1.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var CT1=3,NT1=(0,Id.promisify)(mU.inflate.bind(mU)),PT1=(0,Id.promisify)(mU.deflate.bind(mU)),V8,p5=null;function Nd(){if(p5==null){let F=(0,Cd.getSnappy)();if("kModuleError"in F)throw F.kModuleError;p5=F}return p5}async function RT1(F,A){let $={};switch(F.agreedCompressor){case"snappy":return p5??=Nd(),await p5.compress(A);case"zstd":{if(Rd(),"kModuleError"in V8)throw V8.kModuleError;return await V8.compress(A,CT1)}case"zlib":{if(F.zlibCompressionLevel)$.level=F.zlibCompressionLevel;return await PT1(A,$)}default:throw new tC.MongoInvalidArgumentError(`Unknown compressor ${F.agreedCompressor} failed to compress`)}}async function Pd(F,A){if(F!==jd.Compressor.snappy&&F!==jd.Compressor.zstd&&F!==jd.Compressor.zlib&&F!==jd.Compressor.none)throw new tC.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${F})`);switch(F){case jd.Compressor.snappy:return p5??=Nd(),await p5.uncompress(A,{asBuffer:!0});case jd.Compressor.zstd:{if(Rd(),"kModuleError"in V8)throw V8.kModuleError;return await V8.decompress(A)}case jd.Compressor.zlib:return await NT1(A);default:return A}}function Rd(){if(!V8)V8=(0,Cd.getZstdLibrary)()}var CX=16;async function jT1(F,A){let B=await(A.agreedCompressor==="none"||!cA.OpCompressedRequest.canCompress(F)?F:new cA.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0})).toBin();return Buffer.concat(B)}async function MT1(F){let A={length:F.readInt32LE(0),requestId:F.readInt32LE(4),responseTo:F.readInt32LE(8),opCode:F.readInt32LE(12)};if(A.opCode!==rC.OP_COMPRESSED){let D=A.opCode===rC.OP_MSG?cA.OpMsgResponse:cA.OpReply,G=F.subarray(CX);return new D(F,A,G)}let $={...A,fromCompressed:!0,opCode:F.readInt32LE(CX),length:F.readInt32LE(CX+4)},B=F[CX+8],J=F.slice(CX+9),X=$.opCode===rC.OP_MSG?cA.OpMsgResponse:cA.OpReply,Y=await Pd(B,J);if(Y.length!==$.length)throw new tC.MongoDecompressionError("Message body and message header must be the same length");return new X(F,$,Y)}});var oC=Q((Td)=>{Object.defineProperty(Td,"__esModule",{value:!0});Td.hmacSha256Hook=Td.hmacSha512Hook=Td.aes256CtrDecryptHook=Td.aes256CtrEncryptHook=Td.aes256CbcDecryptHook=Td.aes256CbcEncryptHook=void 0;Td.makeAES256Hook=PX;Td.randomHook=uT1;Td.sha256Hook=fT1;Td.makeHmacHook=sC;Td.signRsaSha256Hook=xT1;var NX=x("crypto");function PX(F,A){return function($,B,J,X){let Y;try{let D=NX[F](A,$,B);D.setAutoPadding(!1),Y=D.update(J);let G=D.final();if(G.length>0)Y=Buffer.concat([Y,G])}catch(D){return D}return Y.copy(X),Y.length}}function uT1(F,A){try{NX.randomFillSync(F,0,A)}catch($){return $}return A}function fT1(F,A){let $;try{$=NX.createHash("sha256").update(F).digest()}catch(B){return B}return $.copy(A),$.length}function sC(F){return(A,$,B)=>{let J;try{J=NX.createHmac(F,A).update($).digest()}catch(X){return X}return J.copy(B),J.length}}function xT1(F,A,$){let B;try{let J=NX.createSign("sha256WithRSAEncryption"),X=Buffer.from(`-----BEGIN PRIVATE KEY-----
${F.toString("base64")}
-----END PRIVATE KEY-----
`);B=J.update(A).end().sign(X)}catch(J){return J}return B.copy($),B.length}Td.aes256CbcEncryptHook=PX("createCipheriv","aes-256-cbc");Td.aes256CbcDecryptHook=PX("createDecipheriv","aes-256-cbc");Td.aes256CtrEncryptHook=PX("createCipheriv","aes-256-ctr");Td.aes256CtrDecryptHook=PX("createDecipheriv","aes-256-ctr");Td.hmacSha512Hook=sC("sha512");Td.hmacSha256Hook=sC("sha256")});var lA=Q((bd)=>{Object.defineProperty(bd,"__esModule",{value:!0});bd.MongoCryptKMSRequestNetworkTimeoutError=bd.MongoCryptAzureKMSRequestError=bd.MongoCryptCreateEncryptedCollectionError=bd.MongoCryptCreateDataKeyError=bd.MongoCryptInvalidArgumentError=bd.MongoCryptError=void 0;var pT1=$1();class i5 extends pT1.MongoError{constructor(F,A={}){super(F,A)}get name(){return"MongoCryptError"}}bd.MongoCryptError=i5;class Od extends i5{constructor(F){super(F)}get name(){return"MongoCryptInvalidArgumentError"}}bd.MongoCryptInvalidArgumentError=Od;class Sd extends i5{constructor(F,{cause:A}){super(`Unable to complete creating data keys: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateDataKeyError"}}bd.MongoCryptCreateDataKeyError=Sd;class ud extends i5{constructor(F,{cause:A}){super(`Unable to create collection: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateEncryptedCollectionError"}}bd.MongoCryptCreateEncryptedCollectionError=ud;class fd extends i5{constructor(F,A){super(F);this.body=A}get name(){return"MongoCryptAzureKMSRequestError"}}bd.MongoCryptAzureKMSRequestError=fd;class xd extends i5{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}bd.MongoCryptKMSRequestNetworkTimeoutError=xd});var FN=Q((hd)=>{Object.defineProperty(hd,"__esModule",{value:!0});hd.LegacyAWSTemporaryCredentialProvider=hd.AWSSDKCredentialProvider=hd.AWSTemporaryCredentialProvider=void 0;var sT1=$2(),oT1=$1(),dU=z1(),eT1="http://169.254.170.2",eC="http://169.254.169.254",_d="/latest/meta-data/iam/security-credentials";class J2{static get awsSDK(){return J2._awsSDK??=(0,sT1.getAwsCredentialProvider)(),J2._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in J2.awsSDK)}}hd.AWSTemporaryCredentialProvider=J2;class yd extends J2{constructor(F){super();if(F)this._provider=F}get provider(){if("kModuleError"in J2.awsSDK)throw J2.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:F="",AWS_REGION:A=""}=process.env;F=F.toLowerCase(),A=A.toLowerCase();let $=A.length!==0&&F.length!==0,J=F==="regional"||F==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(A);return this._provider=$&&J?J2.awsSDK.fromNodeProviderChain({clientConfig:{region:A}}):J2.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let F=await this.provider();return{AccessKeyId:F.accessKeyId,SecretAccessKey:F.secretAccessKey,Token:F.sessionToken,Expiration:F.expiration}}catch(F){throw new oT1.MongoAWSError(F.message,{cause:F})}}}hd.AWSSDKCredentialProvider=yd;class vd extends J2{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,dU.request)(`${eT1}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let F=await(0,dU.request)(`${eC}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),A=await(0,dU.request)(`${eC}/${_d}`,{json:!1,headers:{"X-aws-ec2-metadata-token":F}});return await(0,dU.request)(`${eC}/${_d}/${A}`,{headers:{"X-aws-ec2-metadata-token":F}})}}hd.LegacyAWSTemporaryCredentialProvider=vd});var cd=Q((dd)=>{Object.defineProperty(dd,"__esModule",{value:!0});dd.loadAWSCredentials=Bk1;var $k1=FN();async function Bk1(F,A){let $=new $k1.AWSSDKCredentialProvider(A),{SecretAccessKey:B="",AccessKeyId:J="",Token:X}=await $.getCredentials(),Y={secretAccessKey:B,accessKeyId:J};return X!=null&&(Y.sessionToken=X),{...F,aws:Y}}});var BN=Q((ad)=>{Object.defineProperty(ad,"__esModule",{value:!0});ad.tokenCache=ad.AzureCredentialCache=ad.AZURE_BASE_URL=void 0;ad.addAzureParams=ld;ad.prepareRequest=pd;ad.fetchAzureKMSToken=id;ad.loadAzureCredentials=Zk1;var Xk1=$1(),Yk1=z1(),pA=lA(),Dk1=6000;ad.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class AN{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(F){return F.expiresOnTimestamp-Date.now()<=Dk1}resetCache(){this.cachedToken=null}_getToken(){return id()}}ad.AzureCredentialCache=AN;ad.tokenCache=new AN;async function Gk1(F){let{status:A,body:$}=F,B=(()=>{try{return JSON.parse($)}catch{throw new pA.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(A!==200)throw new pA.MongoCryptAzureKMSRequestError("Unable to complete request.",B);if(!B.access_token)throw new pA.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!B.expires_in)throw new pA.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let J=Number(B.expires_in)*1000;if(Number.isNaN(J))throw new pA.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:B.access_token,expiresOnTimestamp:Date.now()+J}}function ld(F,A,$){if(F.searchParams.append("api-version","2018-02-01"),F.searchParams.append("resource",A),$)F.searchParams.append("client_id",$);return F}function pd(F){let A=new URL(F.url?.toString()??ad.AZURE_BASE_URL);return ld(A,"https://vault.azure.net"),{headers:{...F.headers,"Content-Type":"application/json",Metadata:!0},url:A}}async function id(F={}){let{headers:A,url:$}=pd(F);try{let B=await(0,Yk1.get)($,{headers:A});return await Gk1(B)}catch(B){if(B instanceof Xk1.MongoNetworkTimeoutError)throw new pA.MongoCryptAzureKMSRequestError(`[Azure KMS] ${B.message}`);throw B}}async function Zk1(F){let A=await ad.tokenCache.getToken();return{...F,azure:A}}});var td=Q((rd)=>{Object.defineProperty(rd,"__esModule",{value:!0});rd.loadGCPCredentials=Qk1;var qk1=$2();async function Qk1(F){let A=(0,qk1.getGcpMetadata)();if("kModuleError"in A)return F;let{access_token:$}=await A.instance({property:"service-accounts/default/token"});return{...F,gcp:{accessToken:$}}}});var JN=Q((sd)=>{Object.defineProperty(sd,"__esModule",{value:!0});sd.isEmptyCredentials=cU;sd.refreshKMSCredentials=Ik1;var Ek1=cd(),Lk1=BN(),wk1=td();function cU(F,A){let $=A[F];if($==null)return!1;return typeof $==="object"&&Object.keys($).length===0}async function Ik1(F,A){let $=F;if(cU("aws",F))$=await(0,Ek1.loadAWSCredentials)($,A?.aws);if(cU("gcp",F))$=await(0,wk1.loadGCPCredentials)($);if(cU("azure",F))$=await(0,Lk1.loadAzureCredentials)($);return $}});var XN=Q((Uc)=>{Object.defineProperty(Uc,"__esModule",{value:!0});Uc.StateMachine=void 0;var od=x("fs/promises"),Pk1=x("net"),Rk1=x("tls"),Q7=J0(),ed=K4(),jk1=$2(),Mk1=$1(),Fc=l6(),E8=z1(),Tk1=lU(),L8=lA(),RX=null;function kk1(){if(RX==null){let F=(0,jk1.getSocks)();if("kModuleError"in F)throw F.kModuleError;RX=F}return RX}var a5=0,$c=1,Bc=2,Jc=3,Xc=7,Yc=4,Dc=5,Gc=6,Ok1=443,Sk1=new Map([[a5,"MONGOCRYPT_CTX_ERROR"],[$c,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[Bc,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[Jc,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[Xc,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[Yc,"MONGOCRYPT_CTX_NEED_KMS"],[Dc,"MONGOCRYPT_CTX_READY"],[Gc,"MONGOCRYPT_CTX_DONE"]]),uk1=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function Ac(F){if(process.env.MONGODB_CRYPT_DEBUG)console.error(F)}var fk1;class Zc{constructor(F,A=(0,Q7.pluckBSONSerializeOptions)(F)){this.options=F,this.bsonOptions=A}async execute(F,A,$){let{_keyVaultNamespace:B,_keyVaultClient:J,_metaDataClient:X,_mongocryptdClient:Y,_mongocryptdManager:D}=F,G=null,Z=()=>A.status,U=()=>A.state;while(U()!==Gc&&U()!==a5)switch($.signal?.throwIfAborted(),Ac(`[context#${A.id}] ${Sk1.get(U())||U()}`),U()){case $c:{let z=(0,Q7.deserialize)(A.nextMongoOperation());if(!X)throw new L8.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let W=this.fetchCollectionInfo(X,A.ns,z,$);for await(let H of W)if(A.addMongoOperationResponse((0,Q7.serialize)(H)),U()===a5)break;if(U()===a5)break;A.finishMongoOperation();break}case Bc:{let z=A.nextMongoOperation();if(U()===a5)break;if(!Y)throw new L8.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let W=D?await D.withRespawn(this.markCommand.bind(this,Y,A.ns,z,$)):await this.markCommand(Y,A.ns,z,$);A.addMongoOperationResponse(W),A.finishMongoOperation();break}case Jc:{let z=A.nextMongoOperation(),W=await this.fetchKeys(J,B,z,$);if(W.length===0)G=fk1??=(0,Q7.serialize)({v:[]});for(let H of W)A.addMongoOperationResponse((0,Q7.serialize)(H));A.finishMongoOperation();break}case Xc:{let z=await F.askForKMSCredentials();A.provideKMSProviders((0,Q7.serialize)(z));break}case Yc:{await Promise.all(this.requests(A,$)),A.finishKMSRequests();break}case Dc:{let z=A.finalize();if(U()===a5){let W=Z().message||"Finalization error";throw new L8.MongoCryptError(W)}G=z;break}default:throw new L8.MongoCryptError(`Unknown state: ${U()}`)}if(U()===a5||G==null){let z=Z().message;if(!z)Ac("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new L8.MongoCryptError(z??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return G}async kmsRequest(F,A){let $=F.endpoint.split(":"),B=$[1]!=null?Number.parseInt($[1],10):Ok1,J={host:$[0],servername:$[0],port:B,...(0,Tk1.autoSelectSocketOptions)(this.options.socketOptions||{})},X=F.message,Y=new E8.BufferPool,D,G;function Z(){for(let K of[G,D])if(K)K.destroy()}function U(K){return new L8.MongoCryptError("KMS request failed",{cause:K})}function z(){return new L8.MongoCryptError("KMS request closed")}let W=this.options.tlsOptions;if(W){let K=F.kmsProvider,q=W[K];if(q){let V=this.validateTlsOptions(K,q);if(V)throw V;try{await this.setTlsOptions(q,J)}catch(E){throw U(E)}}}let H;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){D=new Pk1.Socket;let{promise:E,reject:L,resolve:w}=(0,E8.promiseWithResolvers)();D.once("error",(P)=>L(U(P))).once("close",()=>L(z())).once("connect",()=>w());let I={...J,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};D.connect(I),await E;try{RX??=kk1(),J.socket=(await RX.SocksClient.createConnection({existing_socket:D,command:"connect",destination:{host:J.host,port:J.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(P){throw U(P)}}G=Rk1.connect(J,()=>{G.write(X)});let{promise:K,reject:q,resolve:V}=(0,E8.promiseWithResolvers)();H=(0,E8.addAbortListener)(A?.signal,function(){Z(),q(this.reason)}),G.once("error",(E)=>q(U(E))).once("close",()=>q(z())).on("data",(E)=>{Y.append(E);while(F.bytesNeeded>0&&Y.length){let L=Math.min(F.bytesNeeded,Y.length);F.addResponse(Y.read(L))}if(F.bytesNeeded<=0)V()}),await(A?.timeoutContext?.csotEnabled()?Promise.all([K,Fc.Timeout.expires(A.timeoutContext?.remainingTimeMS)]):K)}catch(K){if(K instanceof Fc.TimeoutError)throw new Mk1.MongoOperationTimeoutError("KMS request timed out");throw K}finally{Z(),H?.[E8.kDispose]()}}*requests(F,A){for(let $=F.nextKMSRequest();$!=null;$=F.nextKMSRequest())yield this.kmsRequest($,A)}validateTlsOptions(F,A){let $=Object.keys(A);for(let B of uk1)if($.includes(B))return new L8.MongoCryptError(`Insecure TLS options prohibited for ${F}: ${B}`)}async setTlsOptions(F,A){if(F.secureContext)A.secureContext=F.secureContext;if(F.tlsCertificateKeyFile){let $=await od.readFile(F.tlsCertificateKeyFile);A.cert=A.key=$}if(F.tlsCAFile)A.ca=await od.readFile(F.tlsCAFile);if(F.tlsCertificateKeyFilePassword)A.passphrase=F.tlsCertificateKeyFilePassword}fetchCollectionInfo(F,A,$,B){let{db:J}=E8.MongoDBCollectionNamespace.fromString(A);return F.db(J).listCollections($,{promoteLongs:!1,promoteValues:!1,timeoutContext:B?.timeoutContext&&new ed.CursorTimeoutContext(B?.timeoutContext,Symbol()),signal:B?.signal,nameOnly:!1})}async markCommand(F,A,$,B){let{db:J}=E8.MongoDBCollectionNamespace.fromString(A),X={promoteLongs:!1,promoteValues:!1},Y=(0,Q7.deserialize)($,X),D={timeoutMS:void 0,signal:void 0};if(B?.timeoutContext?.csotEnabled())D.timeoutMS=B.timeoutContext.remainingTimeMS;if(B?.signal)D.signal=B.signal;let G=await F.db(J).command(Y,{...X,...D});return(0,Q7.serialize)(G,this.bsonOptions)}fetchKeys(F,A,$,B){let{db:J,collection:X}=E8.MongoDBCollectionNamespace.fromString(A),Y={timeoutContext:void 0,signal:void 0};if(B?.timeoutContext!=null)Y.timeoutContext=new ed.CursorTimeoutContext(B.timeoutContext,Symbol());if(B?.signal!=null)Y.signal=B.signal;return F.db(J).collection(X,{readConcern:{level:"majority"}}).find((0,Q7.deserialize)($),Y).toArray()}}Uc.StateMachine=Zc});var lU=Q((Hc)=>{Object.defineProperty(Hc,"__esModule",{value:!0});Hc.ClientEncryption=void 0;Hc.autoSelectSocketOptions=MX;var U3=J0(),xk1=$2(),jX=l6(),k3=z1(),bk1=oC(),w8=lA(),Wc=JN(),pU=XN();class iU{static getMongoCrypt(){let F=(0,xk1.getMongoDBClientEncryption)();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){this._client=F,this._proxyOptions=A.proxyOptions??{},this._tlsOptions=A.tlsOptions??{},this._kmsProviders=A.kmsProviders||{};let{timeoutMS:$}=(0,k3.resolveTimeoutOptions)(F,A);if(this._timeoutMS=$,this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!(0,Wc.isEmptyCredentials)("aws",this._kmsProviders))throw new w8.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(A.keyVaultNamespace==null)throw new w8.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let B={...A,cryptoCallbacks:bk1,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?(0,U3.serialize)(this._kmsProviders):this._kmsProviders};this._keyVaultNamespace=A.keyVaultNamespace,this._keyVaultClient=A.keyVaultClient||F;let J=iU.getMongoCrypt();this._mongoCrypt=new J(B)}async createDataKey(F,A={}){if(A.keyAltNames&&!Array.isArray(A.keyAltNames))throw new w8.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof A.keyAltNames}.`);let $=void 0;if(A.keyAltNames&&A.keyAltNames.length>0)$=A.keyAltNames.map((W,H)=>{if(typeof W!=="string")throw new w8.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${H} was of type ${typeof W}`);return(0,U3.serialize)({keyAltName:W})});let B=void 0;if(A.keyMaterial)B=(0,U3.serialize)({keyMaterial:A.keyMaterial});let J=(0,U3.serialize)({provider:F,...A.masterKey}),X=this._mongoCrypt.makeDataKeyContext(J,{keyAltNames:$,keyMaterial:B}),Y=new pU.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:MX(this._client.s.options)}),D=A?.timeoutContext??jX.TimeoutContext.create((0,k3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),G=(0,U3.deserialize)(await Y.execute(this,X,{timeoutContext:D})),{db:Z,collection:U}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:z}=await this._keyVaultClient.db(Z).collection(U).insertOne(G,{writeConcern:{w:"majority"},timeoutMS:D?.csotEnabled()?D?.getRemainingTimeMSOrThrow():void 0});return z}async rewrapManyDataKey(F,A){let $=void 0;if(A){let W=Object.assign({provider:A.provider},A.masterKey);$=(0,U3.serialize)(W)}let B=(0,U3.serialize)(F),J=this._mongoCrypt.makeRewrapManyDataKeyContext(B,$),X=new pU.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:MX(this._client.s.options)}),Y=jX.TimeoutContext.create((0,k3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:D}=(0,U3.deserialize)(await X.execute(this,J,{timeoutContext:Y}));if(D.length===0)return{};let{db:G,collection:Z}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),U=D.map((W)=>({updateOne:{filter:{_id:W._id},update:{$set:{masterKey:W.masterKey,keyMaterial:W.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(G).collection(Z).bulkWrite(U,{writeConcern:{w:"majority"},timeoutMS:Y.csotEnabled()?Y?.remainingTimeMS:void 0})}}async deleteKey(F){let{db:A,collection:$}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection($).deleteOne({_id:F},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:F,collection:A}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(F).collection(A).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(F){let{db:A,collection:$}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection($).findOne({_id:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(F){let{db:A,collection:$}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection($).findOne({keyAltNames:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(F,A){let{db:$,collection:B}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db($).collection(B).findOneAndUpdate({_id:F},{$addToSet:{keyAltNames:A}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(F,A){let{db:$,collection:B}=k3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),J=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[A]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",A]}}}]}}}];return await this._keyVaultClient.db($).collection(B).findOneAndUpdate({_id:F},J,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(F,A,$){let{provider:B,masterKey:J,createCollectionOptions:{encryptedFields:{...X},...Y}}=$,D=this._timeoutMS!=null?jX.TimeoutContext.create((0,k3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(X.fields)){let G=X.fields.map(async(z)=>z==null||typeof z!=="object"||z.keyId!=null?z:{...z,keyId:await this.createDataKey(B,{masterKey:J,timeoutContext:D?.csotEnabled()?D?.clone():void 0})}),Z=await Promise.allSettled(G);X.fields=Z.map((z,W)=>z.status==="fulfilled"?z.value:X.fields[W]);let U=Z.find((z)=>z.status==="rejected");if(U!=null)throw new w8.MongoCryptCreateDataKeyError(X,{cause:U.reason})}try{return{collection:await F.createCollection(A,{...Y,encryptedFields:X,timeoutMS:D?.csotEnabled()?D?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:X}}catch(G){throw new w8.MongoCryptCreateEncryptedCollectionError(X,{cause:G})}}async encrypt(F,A){return await this._encrypt(F,!1,A)}async encryptExpression(F,A){return await this._encrypt(F,!0,A)}async decrypt(F){let A=(0,U3.serialize)({v:F}),$=this._mongoCrypt.makeExplicitDecryptionContext(A),B=new pU.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:MX(this._client.s.options)}),J=this._timeoutMS!=null?jX.TimeoutContext.create((0,k3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:X}=(0,U3.deserialize)(await B.execute(this,$,{timeoutContext:J}));return X}async askForKMSCredentials(){return await(0,Wc.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return iU.getMongoCrypt().libmongocryptVersion}async _encrypt(F,A,$){let{algorithm:B,keyId:J,keyAltName:X,contentionFactor:Y,queryType:D,rangeOptions:G,textOptions:Z}=$,U={expressionMode:A,algorithm:B};if(J)U.keyId=J.buffer;if(X){if(J)throw new w8.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof X!=="string")throw new w8.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof X}`);U.keyAltName=(0,U3.serialize)({keyAltName:X})}if(typeof Y==="number"||typeof Y==="bigint")U.contentionFactor=Y;if(typeof D==="string")U.queryType=D;if(typeof G==="object")U.rangeOptions=(0,U3.serialize)(G);if(typeof Z==="object")U.textOptions=(0,U3.serialize)(Z);let z=(0,U3.serialize)({v:F}),W=new pU.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:MX(this._client.s.options)}),H=this._mongoCrypt.makeExplicitEncryptionContext(z,U),K=this._timeoutMS!=null?jX.TimeoutContext.create((0,k3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:q}=(0,U3.deserialize)(await W.execute(this,H,{timeoutContext:K}));return q}}Hc.ClientEncryption=iU;function MX(F){let A={autoSelectFamily:!0};if("autoSelectFamily"in F)A.autoSelectFamily=F.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in F)A.autoSelectFamilyAttemptTimeout=F.autoSelectFamilyAttemptTimeout;return A}});var Vc=Q((qc)=>{Object.defineProperty(qc,"__esModule",{value:!0});qc.MongocryptdManager=void 0;var _k1=$1();class aU{constructor(F={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof F.mongocryptdURI==="string"&&F.mongocryptdURI.length>0?F.mongocryptdURI:aU.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!F.mongocryptdBypassSpawn,Object.hasOwn(F,"mongocryptdSpawnPath")&&F.mongocryptdSpawnPath)this.spawnPath=F.mongocryptdSpawnPath;if(Object.hasOwn(F,"mongocryptdSpawnArgs")&&Array.isArray(F.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(F.mongocryptdSpawnArgs);if(this.spawnArgs.filter((A)=>typeof A==="string").every((A)=>A.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let F=this.spawnPath||"mongocryptd",{spawn:A}=x("child_process");this._child=A(F,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(F){try{return await F()}catch($){if(!($ instanceof _k1.MongoNetworkTimeoutError&&!this.bypassSpawn))throw $}return await this.spawn(),await F()}}qc.MongocryptdManager=aU;aU.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var GN=Q((Nc)=>{var Cc;Object.defineProperty(Nc,"__esModule",{value:!0});Nc.AutoEncrypter=Nc.AutoEncryptionLoggerLevel=void 0;var Ec=x("net"),TX=J0(),yk1=N6(),vk1=$2(),YN=$1(),hk1=I8(),mk1=z1(),DN=lU(),dk1=oC(),Lc=lA(),ck1=Vc(),wc=JN(),Ic=XN();Nc.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class nU{static getMongoCrypt(){let F=(0,vk1.getMongoDBClientEncryption)();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){if(this[Cc]=!1,this._client=F,this._bypassEncryption=A.bypassAutoEncryption===!0,this._keyVaultNamespace=A.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=A.keyVaultClient||F,this._metaDataClient=A.metadataClient||F,this._proxyOptions=A.proxyOptions||{},this._tlsOptions=A.tlsOptions||{},this._kmsProviders=A.kmsProviders||{},this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!(0,wc.isEmptyCredentials)("aws",this._kmsProviders))throw new Lc.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let $={enableMultipleCollinfo:!0,cryptoCallbacks:dk1};if(A.schemaMap)$.schemaMap=Buffer.isBuffer(A.schemaMap)?A.schemaMap:(0,TX.serialize)(A.schemaMap);if(A.encryptedFieldsMap)$.encryptedFieldsMap=Buffer.isBuffer(A.encryptedFieldsMap)?A.encryptedFieldsMap:(0,TX.serialize)(A.encryptedFieldsMap);if($.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?(0,TX.serialize)(this._kmsProviders):this._kmsProviders,A.options?.logger)$.logger=A.options.logger;if(A.extraOptions&&A.extraOptions.cryptSharedLibPath)$.cryptSharedLibPath=A.extraOptions.cryptSharedLibPath;if(A.bypassQueryAnalysis)$.bypassQueryAnalysis=A.bypassQueryAnalysis;if(A.keyExpirationMS!=null)$.keyExpirationMS=A.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!A.bypassQueryAnalysis,A.extraOptions&&A.extraOptions.cryptSharedLibSearchPaths)$.cryptSharedLibSearchPaths=A.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)$.cryptSharedLibSearchPaths=["$SYSTEM"];let B=nU.getMongoCrypt();if(this._mongocrypt=new B($),this._contextCounter=0,A.extraOptions&&A.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new Lc.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new ck1.MongocryptdManager(A.extraOptions);let J={serverSelectionTimeoutMS:1e4};if((A.extraOptions==null||typeof A.extraOptions.mongocryptdURI!=="string")&&!Ec.getDefaultAutoSelectFamily)J.family=4;if(Ec.getDefaultAutoSelectFamily)Object.assign(J,(0,DN.autoSelectSocketOptions)(this._client.s?.options??{}));this._mongocryptdClient=new hk1.MongoClient(this._mongocryptdManager.uri,J)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new YN.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new YN.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(F){throw new YN.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:F})}}async close(){await this._mongocryptdClient?.close()}async encrypt(F,A,$={}){if($.signal?.throwIfAborted(),this._bypassEncryption)return A;let B=Buffer.isBuffer(A)?A:(0,TX.serialize)(A,$),J=this._mongocrypt.makeEncryptionContext(mk1.MongoDBCollectionNamespace.fromString(F).db,B);J.id=this._contextCounter++,J.ns=F,J.document=A;let X=new Ic.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,DN.autoSelectSocketOptions)(this._client.s.options)});return(0,TX.deserialize)(await X.execute(this,J,$),{promoteValues:!1,promoteLongs:!1})}async decrypt(F,A={}){A.signal?.throwIfAborted();let $=this._mongocrypt.makeDecryptionContext(F);return $.id=this._contextCounter++,await new Ic.StateMachine({...A,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,DN.autoSelectSocketOptions)(this._client.s.options)}).execute(this,$,A)}async askForKMSCredentials(){return await(0,wc.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return nU.getMongoCrypt().libmongocryptVersion}}Nc.AutoEncrypter=nU;Cc=yk1.kDecorateResult});var kc=Q((Mc)=>{Object.defineProperty(Mc,"__esModule",{value:!0});Mc.Encrypter=void 0;var pk1=GN(),ik1=N6(),ak1=$2(),Rc=$1(),nk1=I8();class jc{constructor(F,A,$){if(typeof $.autoEncryption!=="object")throw new Rc.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!$.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,$.maxPoolSize===0&&$.autoEncryption.keyVaultClient==null)$.autoEncryption.keyVaultClient=F;else if($.autoEncryption.keyVaultClient==null)$.autoEncryption.keyVaultClient=this.getInternalClient(F,A,$);if(this.bypassAutoEncryption)$.autoEncryption.metadataClient=void 0;else if($.maxPoolSize===0)$.autoEncryption.metadataClient=F;else $.autoEncryption.metadataClient=this.getInternalClient(F,A,$);if($.proxyHost)$.autoEncryption.proxyOptions={proxyHost:$.proxyHost,proxyPort:$.proxyPort,proxyUsername:$.proxyUsername,proxyPassword:$.proxyPassword};this.autoEncrypter=new pk1.AutoEncrypter(F,$.autoEncryption)}getInternalClient(F,A,$){let B=this.internalClient;if(B==null){let J={};for(let X of[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(X))continue;Reflect.set(J,X,Reflect.get($,X))}J.minPoolSize=0,B=new nk1.MongoClient(A,J),this.internalClient=B;for(let X of ik1.MONGO_CLIENT_EVENTS)for(let Y of F.listeners(X))B.on(X,Y);F.on("newListener",(X,Y)=>{B?.on(X,Y)}),this.needsConnecting=!0}return B}async connectInternalClient(){let F=this.internalClient;if(this.needsConnecting&&F!=null)this.needsConnecting=!1,await F.connect()}async close(F){let A;try{await this.autoEncrypter.close()}catch(B){A=B}let $=this.internalClient;if($!=null&&F!==$)return await $.close();if(A!=null)throw A}static checkForMongoCrypt(){let F=(0,ak1.getMongoDBClientEncryption)();if("kModuleError"in F)throw new Rc.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:F.kModuleError,dependencyName:"mongodb-client-encryption"})}}Mc.Encrypter=jc});var ZN=Q((Oc)=>{Object.defineProperty(Oc,"__esModule",{value:!0});Oc.ConnectionPoolMetrics=void 0;class V7{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(F){if(F===V7.TXN)this.txnConnections+=1;else if(F===V7.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(F){if(F===V7.TXN)this.txnConnections-=1;else if(F===V7.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(F){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${F}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}Oc.ConnectionPoolMetrics=V7;V7.TXN="txn";V7.CURSOR="cursor";V7.OTHER="other"});var UN=Q((xc)=>{Object.defineProperty(xc,"__esModule",{value:!0});xc.Transaction=xc.TxnState=void 0;xc.isTransactionCommand=AO1;var uc=$1(),rk1=e9(),tk1=F4(),sk1=J3();xc.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var ok1={[xc.TxnState.NO_TRANSACTION]:[xc.TxnState.NO_TRANSACTION,xc.TxnState.STARTING_TRANSACTION],[xc.TxnState.STARTING_TRANSACTION]:[xc.TxnState.TRANSACTION_IN_PROGRESS,xc.TxnState.TRANSACTION_COMMITTED,xc.TxnState.TRANSACTION_COMMITTED_EMPTY,xc.TxnState.TRANSACTION_ABORTED],[xc.TxnState.TRANSACTION_IN_PROGRESS]:[xc.TxnState.TRANSACTION_IN_PROGRESS,xc.TxnState.TRANSACTION_COMMITTED,xc.TxnState.TRANSACTION_ABORTED],[xc.TxnState.TRANSACTION_COMMITTED]:[xc.TxnState.TRANSACTION_COMMITTED,xc.TxnState.TRANSACTION_COMMITTED_EMPTY,xc.TxnState.STARTING_TRANSACTION,xc.TxnState.NO_TRANSACTION],[xc.TxnState.TRANSACTION_ABORTED]:[xc.TxnState.STARTING_TRANSACTION,xc.TxnState.NO_TRANSACTION],[xc.TxnState.TRANSACTION_COMMITTED_EMPTY]:[xc.TxnState.TRANSACTION_COMMITTED_EMPTY,xc.TxnState.NO_TRANSACTION]},ek1=new Set([xc.TxnState.STARTING_TRANSACTION,xc.TxnState.TRANSACTION_IN_PROGRESS]),FO1=new Set([xc.TxnState.TRANSACTION_COMMITTED,xc.TxnState.TRANSACTION_COMMITTED_EMPTY,xc.TxnState.TRANSACTION_ABORTED]);class fc{constructor(F){F=F??{},this.state=xc.TxnState.NO_TRANSACTION,this.options={};let A=sk1.WriteConcern.fromOptions(F);if(A){if(A.w===0)throw new uc.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=A}if(F.readConcern)this.options.readConcern=rk1.ReadConcern.fromOptions(F);if(F.readPreference)this.options.readPreference=tk1.ReadPreference.fromOptions(F);if(F.maxCommitTimeMS)this.options.maxTimeMS=F.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===xc.TxnState.STARTING_TRANSACTION}get isActive(){return ek1.has(this.state)}get isCommitted(){return FO1.has(this.state)}transition(F){let A=ok1[this.state];if(A&&A.includes(F)){if(this.state=F,this.state===xc.TxnState.NO_TRANSACTION||this.state===xc.TxnState.STARTING_TRANSACTION||this.state===xc.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new uc.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${F}]`)}pinServer(F){if(this.isActive)this._pinnedServer=F}unpinServer(){this._pinnedServer=void 0}}xc.Transaction=fc;function AO1(F){return!!(F.commitTransaction||F.abortTransaction)}});var aA=Q((hc)=>{Object.defineProperty(hc,"__esModule",{value:!0});hc.ServerSessionPool=hc.ServerSession=hc.ClientSession=void 0;hc.maybeClearPinnedConnection=sU;hc.applySession=DO1;hc.updateSessionFromResponse=GO1;var tU=J0(),oU=ZN(),yc=N6(),M1=$1(),BO1=A9(),rU=A4(),zN=BX(),JO1=e9(),WN=F4(),XO1=nA(),KN=s3(),HN=l6(),j0=UN(),q4=z1(),iA=J3();class eU extends BO1.TypedEventEmitter{constructor(F,A,$,B){super();if(this.timeoutContext=null,this.on("error",q4.noop),F==null)throw new M1.MongoRuntimeError("ClientSession requires a MongoClient");if(A==null||!(A instanceof qN))throw new M1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if($=$??{},this.snapshotEnabled=$.snapshot===!0,$.causalConsistency===!0&&this.snapshotEnabled)throw new M1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=F,this.sessionPool=A,this.hasEnded=!1,this.clientOptions=B,this.timeoutMS=$.defaultTimeoutMS??F.s.options?.timeoutMS,this.explicit=!!$.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let J=this.explicit&&$.snapshot!==!0;this.supports={causalConsistency:$.causalConsistency??J},this.clusterTime=$.initialClusterTime,this.operationTime=void 0,this.owner=$.owner,this.defaultTransactionOptions={...$.defaultTransactionOptions},this.transaction=new j0.Transaction}get id(){return this.serverSession?.id}get serverSession(){let F=this._serverSession;if(F==null){if(this.explicit)throw new M1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new M1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");F=this.sessionPool.acquire(),this._serverSession=F}return F}get loadBalanced(){return this.client.topology?.description.type===KN.TopologyType.LoadBalanced}pin(F){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=F,F.emit(yc.PINNED,this.inTransaction()?oU.ConnectionPoolMetrics.TXN:oU.ConnectionPoolMetrics.CURSOR)}unpin(F){if(this.loadBalanced)return sU(this,F);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(F){try{if(this.inTransaction())await this.abortTransaction({...F,throwTimeout:!0})}catch(A){if(A.name==="MongoOperationTimeoutError")throw A;(0,q4.squashError)(A)}finally{if(!this.hasEnded){let A=this.serverSession;if(A!=null)this.sessionPool.release(A),this._serverSession=new Az(A);this.hasEnded=!0,this.emit("ended",this)}sU(this,{force:!0,...F})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(F){if(this.operationTime==null){this.operationTime=F;return}if(F.greaterThan(this.operationTime))this.operationTime=F}advanceClusterTime(F){if(!F||typeof F!=="object")throw new M1.MongoInvalidArgumentError("input cluster time must be an object");if(!F.clusterTime||F.clusterTime._bsontype!=="Timestamp")throw new M1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!F.signature||F.signature.hash?._bsontype!=="Binary"||typeof F.signature.keyId!=="bigint"&&typeof F.signature.keyId!=="number"&&F.signature.keyId?._bsontype!=="Long")throw new M1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,KN._advanceClusterTime)(this,F)}equals(F){if(!(F instanceof eU))return!1;if(this.id==null||F.id==null)return!1;return q4.ByteUtils.equals(this.id.id.buffer,F.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(F){if(this.snapshotEnabled)throw new M1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new M1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new j0.Transaction({readConcern:F?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:F?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:F?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:F?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(j0.TxnState.STARTING_TRANSACTION)}async commitTransaction(F){if(this.transaction.state===j0.TxnState.NO_TRANSACTION)throw new M1.MongoTransactionError("No transaction started");if(this.transaction.state===j0.TxnState.STARTING_TRANSACTION||this.transaction.state===j0.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(j0.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===j0.TxnState.TRANSACTION_ABORTED)throw new M1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let A={commitTransaction:1},$=typeof F?.timeoutMS==="number"?F.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,B=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(B!=null)if($==null&&this.timeoutContext==null)iA.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...B});else{let Y=Object.keys(B);if(Y.length>2||!Y.includes("wtimeoutMS")&&!Y.includes("wTimeoutMS"))iA.WriteConcern.apply(A,{...B,wtimeoutMS:void 0})}if(this.transaction.state===j0.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if($==null&&this.timeoutContext==null)iA.WriteConcern.apply(A,{wtimeoutMS:1e4,...B,w:"majority"});else iA.WriteConcern.apply(A,{w:"majority",...B,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")A.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let J=new zN.RunCommandOperation(new q4.MongoDBNamespace("admin"),A,{session:this,readPreference:WN.ReadPreference.primary,bypassPinningCheck:!0}),X=this.timeoutContext??(typeof $==="number"?HN.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:$}):null);try{await(0,rU.executeOperation)(this.client,J,X),this.commitAttempted=void 0;return}catch(Y){if(this.commitAttempted=!0,Y instanceof M1.MongoError&&(0,M1.isRetryableWriteError)(Y)){iA.WriteConcern.apply(A,{wtimeoutMS:1e4,...B,w:"majority"}),this.unpin({force:!0});try{await(0,rU.executeOperation)(this.client,new zN.RunCommandOperation(new q4.MongoDBNamespace("admin"),A,{session:this,readPreference:WN.ReadPreference.primary,bypassPinningCheck:!0}),X);return}catch(D){if(_c(D))D.addErrorLabel(M1.MongoErrorLabel.UnknownTransactionCommitResult);if(gc(D))this.unpin({error:D});throw D}}if(_c(Y))Y.addErrorLabel(M1.MongoErrorLabel.UnknownTransactionCommitResult);if(gc(Y))this.unpin({error:Y});throw Y}finally{this.transaction.transition(j0.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(F){if(this.transaction.state===j0.TxnState.NO_TRANSACTION)throw new M1.MongoTransactionError("No transaction started");if(this.transaction.state===j0.TxnState.STARTING_TRANSACTION){this.transaction.transition(j0.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===j0.TxnState.TRANSACTION_ABORTED)throw new M1.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===j0.TxnState.TRANSACTION_COMMITTED||this.transaction.state===j0.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new M1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let A={abortTransaction:1},$=typeof F?.timeoutMS==="number"?F.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,B=$!=null?HN.TimeoutContext.create({timeoutMS:$,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,J=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(J!=null&&$==null)iA.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...J});if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let X=new zN.RunCommandOperation(new q4.MongoDBNamespace("admin"),A,{session:this,readPreference:WN.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,rU.executeOperation)(this.client,X,B),this.unpin();return}catch(Y){if(this.unpin(),Y.name==="MongoRuntimeError")throw Y;if(F?.throwTimeout&&Y.name==="MongoOperationTimeoutError")throw Y;if(Y instanceof M1.MongoError&&(0,M1.isRetryableWriteError)(Y))try{await(0,rU.executeOperation)(this.client,X,B);return}catch(D){if(D.name==="MongoRuntimeError")throw D;if(F?.throwTimeout&&D.name==="MongoOperationTimeoutError")throw D}}finally{if(this.transaction.transition(j0.TxnState.TRANSACTION_ABORTED),this.loadBalanced)sU(this,{force:!1})}}toBSON(){throw new M1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(F,A){let B=A?.timeoutMS??this.timeoutMS??null;this.timeoutContext=B!=null?HN.TimeoutContext.create({timeoutMS:B,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let J=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,q4.now)(),X=!1,Y;try{while(!X){this.startTransaction(A);try{let D=F(this);if(!(0,q4.isPromiseLike)(D))throw new M1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(Y=await D,this.transaction.state===j0.TxnState.NO_TRANSACTION||this.transaction.state===j0.TxnState.TRANSACTION_COMMITTED||this.transaction.state===j0.TxnState.TRANSACTION_ABORTED)return Y}catch(D){if(!(D instanceof M1.MongoError)||D instanceof M1.MongoInvalidArgumentError)throw await this.abortTransaction(),D;if(this.transaction.state===j0.TxnState.STARTING_TRANSACTION||this.transaction.state===j0.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if(D.hasErrorLabel(M1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,q4.now)()-J<120000))continue;throw D}while(!X)try{await this.commitTransaction(),X=!0}catch(D){if(!Fz(D)&&D.hasErrorLabel(M1.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,q4.now)()-J<120000))continue;if(D.hasErrorLabel(M1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,q4.now)()-J<120000))break;throw D}}return Y}finally{this.timeoutContext=null}}}hc.ClientSession=eU;(0,XO1.configureResourceManagement)(eU.prototype);var YO1=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function gc(F){if(F instanceof M1.MongoError){if((0,M1.isRetryableWriteError)(F)||F instanceof M1.MongoWriteConcernError||Fz(F)){if(vc(F))return!0}else if(F.hasErrorLabel(M1.MongoErrorLabel.TransientTransactionError))return!0}return!1}function _c(F){let A=(0,M1.isRetryableWriteError)(F);return A||=F instanceof M1.MongoWriteConcernError,A||=Fz(F),A&&=vc(F),A}function vc(F){let A=F instanceof M1.MongoServerError&&F.codeName&&YO1.has(F.codeName);return Fz(F)||!A&&F.code!==M1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&F.code!==M1.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function sU(F,A){let $=F.pinnedConnection,B=A?.error;if(F.inTransaction()&&B&&B instanceof M1.MongoError&&B.hasErrorLabel(M1.MongoErrorLabel.TransientTransactionError))return;let J=F.client.topology;if($&&J!=null){let Y=Array.from(J.s.servers.values())[0];if(A?.error==null||A?.force){if(Y.pool.checkIn($),F.pinnedConnection=void 0,$.emit(yc.UNPINNED,F.transaction.state!==j0.TxnState.NO_TRANSACTION?oU.ConnectionPoolMetrics.TXN:oU.ConnectionPoolMetrics.CURSOR),A?.forceClear)Y.pool.clear({serviceId:$.serviceId})}}}function Fz(F){if(F==null||!(F instanceof M1.MongoServerError))return!1;return F.code===M1.MONGODB_ERROR_CODES.MaxTimeMSExpired||F.writeConcernError?.code===M1.MONGODB_ERROR_CODES.MaxTimeMSExpired}class Az{constructor(F){if(F!=null){let A=Buffer.allocUnsafe(16);A.set(F.id.id.buffer),this.id={id:new tU.Binary(A,F.id.id.sub_type)},this.lastUse=F.lastUse,this.txnNumber=F.txnNumber,this.isDirty=F.isDirty;return}this.id={id:new tU.Binary((0,q4.uuidV4)(),tU.Binary.SUBTYPE_UUID)},this.lastUse=(0,q4.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(F){return Math.round((0,q4.calculateDurationInMs)(this.lastUse)%86400000%3600000/60000)>F-1}}hc.ServerSession=Az;class qN{constructor(F){if(F==null)throw new M1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=F,this.sessions=new q4.List}acquire(){let F=this.client.topology?.logicalSessionTimeoutMinutes??10,A=null;while(this.sessions.length>0){let $=this.sessions.shift();if($!=null&&(!!this.client.topology?.loadBalanced||!$.hasTimedOut(F))){A=$;break}}if(A==null)A=new Az;return A}release(F){let A=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!A)this.sessions.unshift(F);if(!A)return;if(this.sessions.prune(($)=>$.hasTimedOut(A)),!F.hasTimedOut(A)){if(F.isDirty)return;this.sessions.unshift(F)}}}hc.ServerSessionPool=qN;function DO1(F,A,$){if(F.hasEnded)return new M1.MongoExpiredSessionError;let B=F.serverSession;if(B==null)return new M1.MongoRuntimeError("Unable to acquire server session");if($.writeConcern?.w===0){if(F&&F.explicit)return new M1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}B.lastUse=(0,q4.now)(),A.lsid=B.id;let J=F.inTransaction()||(0,j0.isTransactionCommand)(A);if(!!$.willRetryWrite||J)B.txnNumber+=F.txnNumberIncrement,F.txnNumberIncrement=0,A.txnNumber=tU.Long.fromNumber(B.txnNumber);if(!J){if(F.transaction.state!==j0.TxnState.NO_TRANSACTION)F.transaction.transition(j0.TxnState.NO_TRANSACTION);if(F.supports.causalConsistency&&F.operationTime&&(0,q4.commandSupportsReadConcern)(A))A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime});else if(F.snapshotEnabled){if(A.readConcern=A.readConcern||{level:JO1.ReadConcernLevel.snapshot},F.snapshotTime!=null)Object.assign(A.readConcern,{atClusterTime:F.snapshotTime})}return}if(A.autocommit=!1,F.transaction.state===j0.TxnState.STARTING_TRANSACTION){F.transaction.transition(j0.TxnState.TRANSACTION_IN_PROGRESS),A.startTransaction=!0;let Y=F.transaction.options.readConcern||F?.clientOptions?.readConcern;if(Y)A.readConcern=Y;if(F.supports.causalConsistency&&F.operationTime)A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime})}return}function GO1(F,A){if(A.$clusterTime)(0,KN._advanceClusterTime)(F,A.$clusterTime);if(A.operationTime&&F&&F.supports.causalConsistency)F.advanceOperationTime(A.operationTime);if(A.recoveryToken&&F&&F.inTransaction())F.transaction._recoveryToken=A.recoveryToken;if(F?.snapshotEnabled&&F.snapshotTime==null){let $=A.atClusterTime;if($)F.snapshotTime=$}}});var IN=Q((nc)=>{Object.defineProperty(nc,"__esModule",{value:!0});nc.SENSITIVE_COMMANDS=nc.CommandFailedEvent=nc.CommandSucceededEvent=nc.CommandStartedEvent=void 0;var kX=N6(),lc=z1(),QN=wX();class pc{constructor(F,A,$){this.name=kX.COMMAND_STARTED;let B=LN(A),J=VN(B),{address:X,connectionId:Y,serviceId:D}=wN(F);if(nc.SENSITIVE_COMMANDS.has(J))this.commandObj={},this.commandObj[J]=!0;this.address=X,this.connectionId=Y,this.serviceId=D,this.requestId=A.requestId,this.databaseName=A.databaseName,this.commandName=J,this.command=EN(J,B,B),this.serverConnectionId=$}get hasServiceId(){return!!this.serviceId}}nc.CommandStartedEvent=pc;class ic{constructor(F,A,$,B,J){this.name=kX.COMMAND_SUCCEEDED;let X=LN(A),Y=VN(X),{address:D,connectionId:G,serviceId:Z}=wN(F);this.address=D,this.connectionId=G,this.serviceId=Z,this.requestId=A.requestId,this.commandName=Y,this.duration=(0,lc.calculateDurationInMs)(B),this.reply=EN(Y,X,QO1($)),this.serverConnectionId=J,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}nc.CommandSucceededEvent=ic;class ac{constructor(F,A,$,B,J){this.name=kX.COMMAND_FAILED;let X=LN(A),Y=VN(X),{address:D,connectionId:G,serviceId:Z}=wN(F);this.address=D,this.connectionId=G,this.serviceId=Z,this.requestId=A.requestId,this.commandName=Y,this.duration=(0,lc.calculateDurationInMs)(B),this.failure=EN(Y,X,$),this.serverConnectionId=J,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}nc.CommandFailedEvent=ac;nc.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var KO1=new Set(["hello",kX.LEGACY_HELLO_COMMAND,kX.LEGACY_HELLO_COMMAND_CAMEL_CASE]),VN=(F)=>Object.keys(F)[0],qO1=(F)=>F.ns.split(".")[1],EN=(F,A,$)=>nc.SENSITIVE_COMMANDS.has(F)||KO1.has(F)&&A.speculativeAuthenticate?{}:$,dc={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},cc={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function LN(F){if(F instanceof QN.OpMsgRequest){let B={...F.command};if(B.ops instanceof QN.DocumentSequence)B.ops=B.ops.documents;if(B.nsInfo instanceof QN.DocumentSequence)B.nsInfo=B.nsInfo.documents;return B}if(F.query?.$query){let B;if(F.ns==="admin.$cmd")B=Object.assign({},F.query.$query);else B={find:qO1(F)},Object.keys(dc).forEach((J)=>{if(F.query[J]!=null)B[dc[J]]={...F.query[J]}});return Object.keys(cc).forEach((J)=>{let X=J;if(F[X]!=null)B[cc[X]]=F[X]}),B}let A={},$={...F};if(F.query)A={...F.query},$.query=A;return F.query?A:$}function QO1(F){if(!F)return F;return F.result?F.result:F}function wN(F){let A;if("id"in F)A=F.id;return{address:F.address,serviceId:F.serviceId,connectionId:A}}});var OX=Q((oc)=>{Object.defineProperty(oc,"__esModule",{value:!0});oc.ServerDescription=void 0;oc.parseServerType=tc;oc.compareTopologyVersion=sc;var rA=J0(),wO1=$1(),tA=z1(),_6=s3(),IO1=new Set([_6.ServerType.RSPrimary,_6.ServerType.Standalone,_6.ServerType.Mongos,_6.ServerType.LoadBalancer]),CO1=new Set([_6.ServerType.RSPrimary,_6.ServerType.RSSecondary,_6.ServerType.Mongos,_6.ServerType.Standalone,_6.ServerType.LoadBalancer]);class rc{constructor(F,A,$={}){if(F==null||F==="")throw new wO1.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof F==="string"?tA.HostAddress.fromString(F).toString():F.toString(),this.type=tc(A,$),this.hosts=A?.hosts?.map((B)=>B.toLowerCase())??[],this.passives=A?.passives?.map((B)=>B.toLowerCase())??[],this.arbiters=A?.arbiters?.map((B)=>B.toLowerCase())??[],this.tags=A?.tags??{},this.minWireVersion=A?.minWireVersion??0,this.maxWireVersion=A?.maxWireVersion??0,this.roundTripTime=$?.roundTripTime??-1,this.minRoundTripTime=$?.minRoundTripTime??0,this.lastUpdateTime=(0,tA.now)(),this.lastWriteDate=A?.lastWrite?.lastWriteDate??0,this.error=$.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??A?.topologyVersion??null,this.setName=A?.setName??null,this.setVersion=A?.setVersion??null,this.electionId=A?.electionId??null,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=A?.maxMessageSizeBytes??null,this.maxWriteBatchSize=A?.maxWriteBatchSize??null,this.maxBsonObjectSize=A?.maxBsonObjectSize??null,this.primary=A?.primary??null,this.me=A?.me?.toLowerCase()??null,this.$clusterTime=A?.$clusterTime??null,this.iscryptd=Boolean(A?.iscryptd)}get hostAddress(){return tA.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===_6.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return CO1.has(this.type)}get isWritable(){return IO1.has(this.type)}get host(){let F=`:${this.port}`.length;return this.address.slice(0,-F)}get port(){let F=this.address.split(":").pop();return F?Number.parseInt(F,10):27017}equals(F){let A=this.topologyVersion===F?.topologyVersion||sc(this.topologyVersion,F?.topologyVersion)===0,$=this.electionId!=null&&F?.electionId!=null?(0,tA.compareObjectId)(this.electionId,F.electionId)===0:this.electionId===F?.electionId;return F!=null&&F.iscryptd===this.iscryptd&&(0,tA.errorStrictEqual)(this.error,F.error)&&this.type===F.type&&this.minWireVersion===F.minWireVersion&&(0,tA.arrayStrictEqual)(this.hosts,F.hosts)&&NO1(this.tags,F.tags)&&this.setName===F.setName&&this.setVersion===F.setVersion&&$&&this.primary===F.primary&&this.logicalSessionTimeoutMinutes===F.logicalSessionTimeoutMinutes&&A}}oc.ServerDescription=rc;function tc(F,A){if(A?.loadBalanced)return _6.ServerType.LoadBalancer;if(!F||!F.ok)return _6.ServerType.Unknown;if(F.isreplicaset)return _6.ServerType.RSGhost;if(F.msg&&F.msg==="isdbgrid")return _6.ServerType.Mongos;if(F.setName)if(F.hidden)return _6.ServerType.RSOther;else if(F.isWritablePrimary)return _6.ServerType.RSPrimary;else if(F.secondary)return _6.ServerType.RSSecondary;else if(F.arbiterOnly)return _6.ServerType.RSArbiter;else return _6.ServerType.RSOther;return _6.ServerType.Standalone}function NO1(F,A){let $=Object.keys(F),B=Object.keys(A);return $.length===B.length&&$.every((J)=>A[J]===F[J])}function sc(F,A){if(F==null||A==null)return-1;if(!F.processId.equals(A.processId))return-1;let $=typeof F.counter==="bigint"?rA.Long.fromBigInt(F.counter):rA.Long.isLong(F.counter)?F.counter:rA.Long.fromNumber(F.counter),B=typeof A.counter==="bigint"?rA.Long.fromBigInt(A.counter):rA.Long.isLong(A.counter)?A.counter:rA.Long.fromNumber(A.counter);return $.compare(B)}});var Bl=Q((Al)=>{Object.defineProperty(Al,"__esModule",{value:!0});Al.StreamDescription=void 0;var jO1=J0(),MO1=s3(),TO1=OX(),kO1=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class Fl{constructor(F,A){this.hello=null,this.address=F,this.type=MO1.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes,this.loadBalanced=!!A?.loadBalanced,this.compressors=A&&A.compressors&&Array.isArray(A.compressors)?A.compressors:[],this.serverConnectionId=null}receiveResponse(F){if(F==null)return;if(this.hello=F,this.type=(0,TO1.parseServerType)(F),"connectionId"in F)this.serverConnectionId=this.parseServerConnectionID(F.connectionId);else this.serverConnectionId=null;for(let A of kO1){if(F[A]!=null)this[A]=F[A];if("__nodejs_mock_server__"in F)this.__nodejs_mock_server__=F.__nodejs_mock_server__}if(F.compression)this.compressor=this.compressors.filter((A)=>F.compression?.includes(A))[0]}parseServerConnectionID(F){return jO1.Long.isLong(F)?F.toBigInt():BigInt(F)}}Al.StreamDescription=Fl});var Xl=Q((Jl)=>{Object.defineProperty(Jl,"__esModule",{value:!0});Jl.onData=OO1;var SX=z1();function OO1(F,{timeoutContext:A,signal:$}){$?.throwIfAborted();let B=new SX.List,J=new SX.List,X=null,Y=!1,D={next(){let H=B.shift();if(H!=null)return Promise.resolve({value:H,done:!1});if(X!=null){let E=Promise.reject(X);return X=null,E}if(Y)return W();let{promise:K,resolve:q,reject:V}=(0,SX.promiseWithResolvers)();return J.push({resolve:q,reject:V}),K},return(){return W()},throw(H){return z(H),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await W()}};F.on("data",U),F.on("error",z);let G=(0,SX.addAbortListener)($,function(){z(this.reason)}),Z=A?.timeoutForSocketRead;return Z?.throwIfExpired(),Z?.then(void 0,z),D;function U(H){let K=J.shift();if(K!=null)K.resolve({value:H,done:!1});else B.push(H)}function z(H){let K=J.shift();if(K!=null)K.reject(H);else X=H;W()}function W(){F.off("data",U),F.off("error",z),G?.[SX.kDispose](),Y=!0,Z?.clear();let H={value:void 0,done:Y};for(let K of J)K.resolve(H);return Promise.resolve(H)}}});var NN=Q((zl)=>{Object.defineProperty(zl,"__esModule",{value:!0});zl.TopologyDescription=void 0;var uO1=J0(),Jz=Y8(),Bz=$1(),CN=z1(),F0=s3(),C8=OX(),fO1=Jz.MIN_SUPPORTED_SERVER_VERSION,xO1=Jz.MAX_SUPPORTED_SERVER_VERSION,Yl=Jz.MIN_SUPPORTED_WIRE_VERSION,Dl=Jz.MAX_SUPPORTED_WIRE_VERSION,bO1=new Set([F0.ServerType.Mongos,F0.ServerType.Unknown]),Gl=new Set([F0.ServerType.Mongos,F0.ServerType.Standalone]),Zl=new Set([F0.ServerType.RSSecondary,F0.ServerType.RSArbiter,F0.ServerType.RSOther]);class uX{constructor(F,A=null,$=null,B=null,J=null,X=null,Y=null){Y=Y??{},this.type=F??F0.TopologyType.Unknown,this.servers=A??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=Y.heartbeatFrequencyMS??0,this.localThresholdMS=Y.localThresholdMS??15,this.setName=$??null,this.maxElectionId=J??null,this.maxSetVersion=B??null,this.commonWireVersion=X??0;for(let D of this.servers.values()){if(D.type===F0.ServerType.Unknown||D.type===F0.ServerType.LoadBalancer)continue;if(D.minWireVersion>Dl)this.compatible=!1,this.compatibilityError=`Server at ${D.address} requires wire version ${D.minWireVersion}, but this version of the driver only supports up to ${Dl} (MongoDB ${xO1})`;if(D.maxWireVersion<Yl){this.compatible=!1,this.compatibilityError=`Server at ${D.address} reports wire version ${D.maxWireVersion}, but this version of the driver requires at least ${Yl} (MongoDB ${fO1}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,D]of this.servers)if(D.isReadable){if(D.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=D.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,D.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(F,A=0){let $=F.hostnames(),B=new Set(this.servers.keys()),J=new Set($),X=new Set;for(let D of B)if(J.delete(D),!$.has(D))X.add(D);if(J.size===0&&X.size===0)return this;let Y=new Map(this.servers);for(let D of X)Y.delete(D);if(J.size>0){if(A===0)for(let D of J)Y.set(D,new C8.ServerDescription(D));else if(Y.size<A){let D=(0,CN.shuffle)(J,A-Y.size);for(let G of D)Y.set(G,new C8.ServerDescription(G))}}return new uX(this.type,Y,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(F){let A=F.address,{type:$,setName:B,maxSetVersion:J,maxElectionId:X,commonWireVersion:Y}=this,D=F.type,G=new Map(this.servers);if(F.maxWireVersion!==0)if(Y==null)Y=F.maxWireVersion;else Y=Math.min(Y,F.maxWireVersion);if(typeof F.setName==="string"&&typeof B==="string"&&F.setName!==B)if($===F0.TopologyType.Single)F=new C8.ServerDescription(A);else G.delete(A);if(G.set(A,F),$===F0.TopologyType.Single)return new uX(F0.TopologyType.Single,G,B,J,X,Y,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if($===F0.TopologyType.Unknown)if(D===F0.ServerType.Standalone&&this.servers.size!==1)G.delete(A);else $=gO1(D);if($===F0.TopologyType.Sharded){if(!bO1.has(D))G.delete(A)}if($===F0.TopologyType.ReplicaSetNoPrimary){if(Gl.has(D))G.delete(A);if(D===F0.ServerType.RSPrimary){let Z=Ul(G,F,B,J,X);$=Z[0],B=Z[1],J=Z[2],X=Z[3]}else if(Zl.has(D)){let Z=yO1(G,F,B);$=Z[0],B=Z[1]}}if($===F0.TopologyType.ReplicaSetWithPrimary)if(Gl.has(D))G.delete(A),$=n5(G);else if(D===F0.ServerType.RSPrimary){let Z=Ul(G,F,B,J,X);$=Z[0],B=Z[1],J=Z[2],X=Z[3]}else if(Zl.has(D))$=_O1(G,F,B);else $=n5(G);return new uX($,G,B,J,X,Y,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let F=Array.from(this.servers.values()).filter((A)=>A.error);if(F.length>0)return F[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((F)=>F.type!==F0.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((F)=>F.isDataBearing)}hasServer(F){return this.servers.has(F)}toJSON(){return uO1.EJSON.serialize(this)}}zl.TopologyDescription=uX;function gO1(F){switch(F){case F0.ServerType.Standalone:return F0.TopologyType.Single;case F0.ServerType.Mongos:return F0.TopologyType.Sharded;case F0.ServerType.RSPrimary:return F0.TopologyType.ReplicaSetWithPrimary;case F0.ServerType.RSOther:case F0.ServerType.RSSecondary:return F0.TopologyType.ReplicaSetNoPrimary;default:return F0.TopologyType.Unknown}}function Ul(F,A,$=null,B=null,J=null){let X=(G,Z,U)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${G.setVersion}, server electionId: ${G.electionId}, topology setVersion: ${Z}, topology electionId: ${U}`};if($=$||A.setName,$!==A.setName)return F.delete(A.address),[n5(F),$,B,J];if(A.maxWireVersion>=17){let G=(0,CN.compareObjectId)(J,A.electionId),Z=G===0,U=G===-1,z=(B??-1)<=(A.setVersion??-1);if(U||Z&&z)J=A.electionId,B=A.setVersion;else return F.set(A.address,new C8.ServerDescription(A.address,void 0,{error:new Bz.MongoStalePrimaryError(X(A,B,J))})),[n5(F),$,B,J]}else{let G=A.electionId?A.electionId:null;if(A.setVersion&&G){if(B&&J){if(B>A.setVersion||(0,CN.compareObjectId)(J,G)>0)return F.set(A.address,new C8.ServerDescription(A.address,void 0,{error:new Bz.MongoStalePrimaryError(X(A,B,J))})),[n5(F),$,B,J]}J=A.electionId}if(A.setVersion!=null&&(B==null||A.setVersion>B))B=A.setVersion}for(let[G,Z]of F)if(Z.type===F0.ServerType.RSPrimary&&Z.address!==A.address){F.set(G,new C8.ServerDescription(Z.address,void 0,{error:new Bz.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}A.allHosts.forEach((G)=>{if(!F.has(G))F.set(G,new C8.ServerDescription(G))});let Y=Array.from(F.keys()),D=A.allHosts;return Y.filter((G)=>D.indexOf(G)===-1).forEach((G)=>{F.delete(G)}),[n5(F),$,B,J]}function _O1(F,A,$=null){if($==null)throw new Bz.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if($!==A.setName||A.me&&A.address!==A.me)F.delete(A.address);return n5(F)}function yO1(F,A,$=null){let B=F0.TopologyType.ReplicaSetNoPrimary;if($=$??A.setName,$!==A.setName)return F.delete(A.address),[B,$];if(A.allHosts.forEach((J)=>{if(!F.has(J))F.set(J,new C8.ServerDescription(J))}),A.me&&A.address!==A.me)F.delete(A.address);return[B,$]}function n5(F){for(let A of F.values())if(A.type===F0.ServerType.RSPrimary)return F0.TopologyType.ReplicaSetWithPrimary;return F0.TopologyType.ReplicaSetNoPrimary}});var ql=Q((Kl)=>{Object.defineProperty(Kl,"__esModule",{value:!0});Kl.getReadPreference=mO1;Kl.isSharded=dO1;var vO1=$1(),PN=F4(),Hl=s3(),hO1=NN();function mO1(F){let A=F?.readPreference??PN.ReadPreference.primary;if(typeof A==="string")A=PN.ReadPreference.fromString(A);if(!(A instanceof PN.ReadPreference))throw new vO1.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return A}function dO1(F){if(F==null)return!1;if(F.description&&F.description.type===Hl.ServerType.Mongos)return!0;if(F.description&&F.description instanceof hO1.TopologyDescription)return Array.from(F.description.servers.values()).some(($)=>$.type===Hl.ServerType.Mongos);return!1}});var Yz=Q((Il)=>{Object.defineProperty(Il,"__esModule",{value:!0});Il.CryptoConnection=Il.SizedMessageTransform=Il.Connection=void 0;Il.hasSessionSupport=eO1;var pO1=x("stream"),Ll=x("timers"),iO1=J0(),N8=N6(),J6=$1(),Ql=U8(),aO1=A9(),nO1=F4(),rO1=s3(),Vl=aA(),El=l6(),$9=z1(),RN=IN(),Xz=wX(),tO1=Bl(),sO1=IX(),oO1=Xl(),fX=K0(),jN=ql();function eO1(F){return F.description.logicalSessionTimeoutMinutes!=null}function FS1(F,A){if(A.proxyHost)return A.hostAddress.toString();let{remoteAddress:$,remotePort:B}=F;if(typeof $==="string"&&typeof B==="number")return $9.HostAddress.fromHostPort($,B).toString();return(0,$9.uuidV4)().toString("hex")}class Q4 extends aO1.TypedEventEmitter{constructor(F,A){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",$9.noop),this.socket=F,this.id=A.id,this.address=FS1(F,A),this.socketTimeoutMS=A.socketTimeoutMS??0,this.monitorCommands=A.monitorCommands,this.serverApi=A.serverApi,this.mongoLogger=A.mongoLogger,this.established=!1,this.description=new tO1.StreamDescription(this.address,A),this.generation=A.generation,this.lastUseTime=(0,$9.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new MN({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(F){this.description.receiveResponse(F),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,$9.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,$9.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Ql.MongoLoggableComponent.COMMAND,Ql.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,$9.now)()}onSocketError(F){this.onError(new J6.MongoNetworkError(F.message,{cause:F}))}onTransformError(F){this.onError(F)}onError(F){this.cleanup(F)}onClose(){let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new J6.MongoNetworkError(F))}onTimeout(){this.delayedTimeoutId=(0,Ll.setTimeout)(()=>{let F=`connection ${this.id} to ${this.address} timed out`,A=this.hello==null;this.cleanup(new J6.MongoNetworkTimeoutError(F,{beforeHandshake:A}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(Q4.PINNED),this.removeAllListeners(Q4.UNPINNED);let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new J6.MongoNetworkError(F))}cleanup(F){if(this.closed)return;this.socket.destroy(),this.error=F,this.dataEvents?.throw(F).then(void 0,$9.squashError),this.closed=!0,this.emit(Q4.CLOSE)}prepareCommand(F,A,$){let B={...A},J=(0,jN.getReadPreference)($),X=$?.session,Y=this.clusterTime;if(this.serverApi){let{version:Z,strict:U,deprecationErrors:z}=this.serverApi;if(B.apiVersion=Z,U!=null)B.apiStrict=U;if(z!=null)B.apiDeprecationErrors=z}if(this.hasSessionSupport&&X){if(X.clusterTime&&Y&&X.clusterTime.clusterTime.greaterThan(Y.clusterTime))Y=X.clusterTime;let Z=(0,Vl.applySession)(X,B,$);if(Z)throw Z}else if(X?.explicit)throw new J6.MongoCompatibilityError("Current topology does not support sessions");if(Y)B.$clusterTime=Y;if(this.description.type!==rO1.ServerType.Standalone){if(!(0,jN.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&$.directConnection===!0&&J?.mode==="primary")B.$readPreference=nO1.ReadPreference.primaryPreferred.toJSON();else if((0,jN.isSharded)(this)&&!this.supportsOpMsg&&J?.mode!=="primary")B={$query:B,$readPreference:J.toJSON()};else if(J?.mode!=="primary")B.$readPreference=J.toJSON()}let D={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:J.secondaryOk(),...$};return $.timeoutContext?.addMaxTimeMSToCommand(B,$),this.supportsOpMsg?new Xz.OpMsgRequest(F,B,D):new Xz.OpQueryRequest(F,B,D)}async*sendWire(F,A,$){this.throwIfAborted();let B=A.socketTimeoutMS??A?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(B);try{if(await this.writeCommand(F,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:A.timeoutContext,signal:A.signal}),A.noResponse||F.moreToCome){yield fX.MongoDBResponse.empty;return}if(this.throwIfAborted(),A.timeoutContext?.csotEnabled()&&A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new J6.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let J of this.readMany(A)){this.socket.setTimeout(0);let X=J.parse();yield($??fX.MongoDBResponse).make(X),this.throwIfAborted(),this.socket.setTimeout(B)}}finally{this.socket.setTimeout(0)}}async*sendCommand(F,A,$,B){$?.signal?.throwIfAborted();let J=this.prepareCommand(F.db,A,$),X=0;if(this.shouldEmitAndLogCommand)X=(0,$9.now)(),this.emitAndLogCommand(this.monitorCommands,Q4.COMMAND_STARTED,J.databaseName,this.established,new RN.CommandStartedEvent(this,J,this.description.serverConnectionId));let Y=$.documentsReturnedIn==null||!$.raw?$:{...$,raw:!1,fieldsAsRaw:{[$.documentsReturnedIn]:!0}},D=void 0,G=void 0;try{this.throwIfAborted();for await(D of this.sendWire(J,$,B)){if(G=void 0,$.session!=null)(0,Vl.updateSessionFromResponse)($.session,D);if(D.$clusterTime)this.clusterTime=D.$clusterTime,this.emit(Q4.CLUSTER_TIME_RECEIVED,D.$clusterTime);if(D.ok===0){if($.timeoutContext?.csotEnabled()&&D.isMaxTimeExpiredError)throw new J6.MongoOperationTimeoutError("Server reported a timeout error",{cause:new J6.MongoServerError(G??=D.toObject(Y))});throw new J6.MongoServerError(G??=D.toObject(Y))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,Q4.COMMAND_SUCCEEDED,J.databaseName,this.established,new RN.CommandSucceededEvent(this,J,$.noResponse?void 0:J.moreToCome?{ok:1}:G??=D.toObject(Y),X,this.description.serverConnectionId));if(B==null)yield G??=D.toObject(Y);else yield D;this.throwIfAborted()}}catch(Z){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,Q4.COMMAND_FAILED,J.databaseName,this.established,new RN.CommandFailedEvent(this,J,Z,X,this.description.serverConnectionId));throw Z}}async command(F,A,$={},B){this.throwIfAborted(),$.signal?.throwIfAborted();for await(let J of this.sendCommand(F,A,$,B)){if($.timeoutContext?.csotEnabled()){if(fX.MongoDBResponse.is(J)){if(J.isMaxTimeExpiredError)throw new J6.MongoOperationTimeoutError("Server reported a timeout error",{cause:new J6.MongoServerError(J.toObject())})}else if(Array.isArray(J?.writeErrors)&&J.writeErrors.some((X)=>X?.code===J6.MONGODB_ERROR_CODES.MaxTimeMSExpired)||J?.writeConcernError?.code===J6.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new J6.MongoOperationTimeoutError("Server reported a timeout error",{cause:new J6.MongoServerError(J)})}return J}throw new J6.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(F,A,$,B){(async()=>{this.throwIfAborted();for await(let X of this.sendCommand(F,A,$))B(void 0,X),this.throwIfAborted();throw new J6.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,B)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(F,A){let $=A.agreedCompressor==="none"||!Xz.OpCompressedRequest.canCompress(F)?F:new Xz.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0}),B=Buffer.concat(await $.toBin());if(A.timeoutContext?.csotEnabled()){if(A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new J6.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}if(this.socket.write(B))return;let J=(0,$9.once)(this.socket,"drain",A),X=A?.timeoutContext?.timeoutForSocketWrite,Y=X?Promise.race([J,X]):J;try{return await Y}catch(D){if(El.TimeoutError.is(D)){let G=new J6.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(G),G}else if(D===A.signal?.reason)this.onError(D);throw D}finally{X?.clear()}}async*readMany(F){try{this.dataEvents=(0,oO1.onData)(this.messageStream,F),this.messageStream.resume();for await(let A of this.dataEvents){let $=await(0,sO1.decompressResponse)(A);if(yield $,!$.moreToCome)return}}catch(A){if(El.TimeoutError.is(A)){let $=new J6.MongoOperationTimeoutError(`Timed out during socket read (${A.duration}ms)`);throw this.dataEvents=null,this.onError($),$}else if(A===F.signal?.reason)this.onError(A);throw A}finally{this.dataEvents=null,this.messageStream.pause()}}}Il.Connection=Q4;Q4.COMMAND_STARTED=N8.COMMAND_STARTED;Q4.COMMAND_SUCCEEDED=N8.COMMAND_SUCCEEDED;Q4.COMMAND_FAILED=N8.COMMAND_FAILED;Q4.CLUSTER_TIME_RECEIVED=N8.CLUSTER_TIME_RECEIVED;Q4.CLOSE=N8.CLOSE;Q4.PINNED=N8.PINNED;Q4.UNPINNED=N8.UNPINNED;class MN extends pO1.Transform{constructor({connection:F}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new $9.BufferPool,this.connection=F}_transform(F,A,$){if(this.connection.delayedTimeoutId!=null)(0,Ll.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(F);while(this.bufferPool.length){let B=this.bufferPool.getInt32();if(B==null)break;if(B<0)return $(new J6.MongoParseError(`Message size cannot be negative: ${B}`));if(B>this.bufferPool.length)break;let J=this.bufferPool.read(B);if(!this.push(J))return $(new J6.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}$()}}Il.SizedMessageTransform=MN;class wl extends Q4{constructor(F,A){super(F,A);this.autoEncrypter=A.autoEncrypter}async command(F,A,$,B){let{autoEncrypter:J}=this;if(!J)throw new J6.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});if((0,$9.maxWireVersion)(this)===0)return await super.command(F,A,$,B);let Y=A.find||A.findAndModify?A.sort:null,D=A.createIndexes?A.indexes.map((W)=>W.key):null,G=await J.encrypt(F.toString(),A,$);if(Y!=null&&(A.find||A.findAndModify))G.sort=Y;if(D!=null&&A.createIndexes)for(let[W,H]of D.entries())G.indexes[W].key=H;let Z=await super.command(F,G,$,B??fX.MongoDBResponse),U=await J.decrypt(Z.toBytes(),$),z=B?.make(U)??(0,iO1.deserialize)(U,$);if(J[N8.kDecorateResult]){if(B==null)(0,$9.decorateDecryptionResult)(z,Z.toObject(),!0);else if(z instanceof fX.CursorResponse)z.encryptedResponse=Z}return z}}Il.CryptoConnection=wl});var SN=Q((kl)=>{Object.defineProperty(kl,"__esModule",{value:!0});kl.LEGAL_TCP_SOCKET_OPTIONS=kl.LEGAL_TLS_SOCKET_OPTIONS=void 0;kl.connect=DS1;kl.makeConnection=jl;kl.performInitialHandshake=Ml;kl.prepareHandshakeDocument=Tl;kl.makeSocket=Gz;var Pl=x("net"),JS1=x("tls"),Rl=N6(),XS1=$2(),X6=$1(),TN=z1(),YS1=W8(),Dz=y2(),Nl=Yz(),sA=Y8();async function DS1(F){let A=null;try{let $=await Gz(F);return A=jl(F,$),await Ml(A,F),A}catch($){throw A?.destroy(),$}}function jl(F,A){let $=F.connectionType??Nl.Connection;if(F.autoEncrypter)$=Nl.CryptoConnection;return new $(A,F)}function GS1(F,A){let $=Number(F.maxWireVersion),B=Number(F.minWireVersion),J=!Number.isNaN($)&&$>=sA.MIN_SUPPORTED_WIRE_VERSION,X=!Number.isNaN(B)&&B<=sA.MAX_SUPPORTED_WIRE_VERSION;if(J){if(X)return null;let D=`Server at ${A.hostAddress} reports minimum wire version ${JSON.stringify(F.minWireVersion)}, but this version of the Node.js Driver requires at most ${sA.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${sA.MAX_SUPPORTED_SERVER_VERSION})`;return new X6.MongoCompatibilityError(D)}let Y=`Server at ${A.hostAddress} reports maximum wire version ${JSON.stringify(F.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${sA.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${sA.MIN_SUPPORTED_SERVER_VERSION})`;return new X6.MongoCompatibilityError(Y)}async function Ml(F,A){let $=A.credentials;if($){if($.mechanism!==Dz.AuthMechanism.MONGODB_DEFAULT&&!A.authProviders.getOrCreateProvider($.mechanism,$.mechanismProperties))throw new X6.MongoInvalidArgumentError(`AuthMechanism '${$.mechanism}' not supported`)}let B=new YS1.AuthContext(F,$,A);F.authContext=B;let J=await Tl(B),X={...A,raw:!1};if(typeof A.connectTimeoutMS==="number")X.socketTimeoutMS=A.connectTimeoutMS;let Y=new Date().getTime(),D=await Z(J,X);if(!("isWritablePrimary"in D))D.isWritablePrimary=D[Rl.LEGACY_HELLO_COMMAND];if(D.helloOk)F.helloOk=!0;let G=GS1(D,A);if(G)throw G;if(A.loadBalanced){if(!D.serviceId)throw new X6.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(F.hello=D,F.lastHelloMS=new Date().getTime()-Y,!D.arbiterOnly&&$){B.response=D;let U=$.resolveAuthMechanism(D),z=A.authProviders.getOrCreateProvider(U.mechanism,U.mechanismProperties);if(!z)throw new X6.MongoInvalidArgumentError(`No AuthProvider for ${U.mechanism} defined.`);try{await z.auth(B)}catch(W){if(W instanceof X6.MongoError){if(W.addErrorLabel(X6.MongoErrorLabel.HandshakeError),(0,X6.needsRetryableWriteLabel)(W,D.maxWireVersion,F.description.type))W.addErrorLabel(X6.MongoErrorLabel.RetryableWriteError)}throw W}}F.established=!0;async function Z(U,z){try{return await F.command((0,TN.ns)("admin.$cmd"),U,z)}catch(W){if(W instanceof X6.MongoError)W.addErrorLabel(X6.MongoErrorLabel.HandshakeError);throw W}}}async function Tl(F){let A=F.options,$=A.compressors?A.compressors:[],{serverApi:B}=F.connection,J=await A.extendedMetadata,X={[B?.version||A.loadBalanced===!0?"hello":Rl.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:J,compression:$};if(A.loadBalanced===!0)X.loadBalanced=!0;let Y=F.credentials;if(Y){if(Y.mechanism===Dz.AuthMechanism.MONGODB_DEFAULT&&Y.username){X.saslSupportedMechs=`${Y.source}.${Y.username}`;let G=F.options.authProviders.getOrCreateProvider(Dz.AuthMechanism.MONGODB_SCRAM_SHA256,Y.mechanismProperties);if(!G)throw new X6.MongoInvalidArgumentError(`No AuthProvider for ${Dz.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await G.prepare(X,F)}let D=F.options.authProviders.getOrCreateProvider(Y.mechanism,Y.mechanismProperties);if(!D)throw new X6.MongoInvalidArgumentError(`No AuthProvider for ${Y.mechanism} defined.`);return await D.prepare(X,F)}return X}kl.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];kl.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function kN(F){let A=F.hostAddress;if(!A)throw new X6.MongoInvalidArgumentError('Option "hostAddress" is required');let $={};for(let B of kl.LEGAL_TCP_SOCKET_OPTIONS)if(F[B]!=null)$[B]=F[B];if($.keepAliveInitialDelay??=120000,$.keepAlive=!0,$.noDelay=F.noDelay??!0,typeof A.socketPath==="string")return $.path=A.socketPath,$;else if(typeof A.host==="string")return $.host=A.host,$.port=A.port,$;else throw new X6.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(A)}`)}function ZS1(F){let A=kN(F);for(let $ of kl.LEGAL_TLS_SOCKET_OPTIONS)if(F[$]!=null)A[$]=F[$];if(F.existingSocket)A.socket=F.existingSocket;if(A.servername==null&&A.host&&!Pl.isIP(A.host))A.servername=A.host;return A}async function Gz(F){let A=F.tls??!1,$=F.connectTimeoutMS??30000,B=F.existingSocket,J;if(F.proxyHost!=null)return await zS1({...F,connectTimeoutMS:$});if(A){let Z=JS1.connect(ZS1(F));if(typeof Z.disableRenegotiation==="function")Z.disableRenegotiation();J=Z}else if(B)J=B;else J=Pl.createConnection(kN(F));J.setTimeout($);let X=null,{promise:Y,resolve:D,reject:G}=(0,TN.promiseWithResolvers)();if(B)D(J);else{let Z=performance.now(),U=A?"secureConnect":"connect";if(J.once(U,()=>D(J)).once("error",(z)=>G(new X6.MongoNetworkError(X6.MongoError.buildErrorMessage(z),{cause:z}))).once("timeout",()=>{G(new X6.MongoNetworkTimeoutError(`Socket '${U}' timed out after ${performance.now()-Z|0}ms (connectTimeoutMS: ${$})`))}).once("close",()=>G(new X6.MongoNetworkError(`Socket closed after ${performance.now()-Z|0} during connection establishment`))),F.cancellationToken!=null)X=()=>G(new X6.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-Z|0}`)),F.cancellationToken.once("cancel",X)}try{return J=await Y,J}catch(Z){throw J.destroy(),Z}finally{if(J.setTimeout(0),X!=null)F.cancellationToken?.removeListener("cancel",X)}}var xX=null;function US1(){if(xX==null){let F=(0,XS1.getSocks)();if("kModuleError"in F)throw F.kModuleError;xX=F}return xX}async function zS1(F){let A=TN.HostAddress.fromHostPort(F.proxyHost??"",F.proxyPort??1080),$=await Gz({...F,hostAddress:A,tls:!1,proxyHost:void 0}),B=kN(F);if(typeof B.host!=="string"||typeof B.port!=="number")throw new X6.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");xX??=US1();let J;try{J=(await xX.SocksClient.createConnection({existing_socket:$,timeout:F.connectTimeoutMS,command:"connect",destination:{host:B.host,port:B.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:F.proxyUsername||void 0,password:F.proxyPassword||void 0}})).socket}catch(X){throw new X6.MongoNetworkError(X6.MongoError.buildErrorMessage(X),{cause:X})}return await Gz({...F,existingSocket:J,proxyHost:void 0})}});var Zz=Q((hl)=>{Object.defineProperty(hl,"__esModule",{value:!0});hl.ServerHeartbeatFailedEvent=hl.ServerHeartbeatSucceededEvent=hl.ServerHeartbeatStartedEvent=hl.TopologyClosedEvent=hl.TopologyOpeningEvent=hl.TopologyDescriptionChangedEvent=hl.ServerClosedEvent=hl.ServerOpeningEvent=hl.ServerDescriptionChangedEvent=void 0;var E7=N6();class Sl{constructor(F,A,$,B){this.name=E7.SERVER_DESCRIPTION_CHANGED,this.topologyId=F,this.address=A,this.previousDescription=$,this.newDescription=B}}hl.ServerDescriptionChangedEvent=Sl;class ul{constructor(F,A){this.name=E7.SERVER_OPENING,this.topologyId=F,this.address=A}}hl.ServerOpeningEvent=ul;class fl{constructor(F,A){this.name=E7.SERVER_CLOSED,this.topologyId=F,this.address=A}}hl.ServerClosedEvent=fl;class xl{constructor(F,A,$){this.name=E7.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=F,this.previousDescription=A,this.newDescription=$}}hl.TopologyDescriptionChangedEvent=xl;class bl{constructor(F){this.name=E7.TOPOLOGY_OPENING,this.topologyId=F}}hl.TopologyOpeningEvent=bl;class gl{constructor(F){this.name=E7.TOPOLOGY_CLOSED,this.topologyId=F}}hl.TopologyClosedEvent=gl;class _l{constructor(F,A){this.name=E7.SERVER_HEARTBEAT_STARTED,this.connectionId=F,this.awaited=A}}hl.ServerHeartbeatStartedEvent=_l;class yl{constructor(F,A,$,B){this.name=E7.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=F,this.duration=A,this.reply=$??{},this.awaited=B}}hl.ServerHeartbeatSucceededEvent=yl;class vl{constructor(F,A,$,B){this.name=E7.SERVER_HEARTBEAT_FAILED,this.connectionId=F,this.duration=A,this.failure=$,this.awaited=B}}hl.ServerHeartbeatFailedEvent=vl});var fN=Q((el)=>{Object.defineProperty(el,"__esModule",{value:!0});el.ConnectionPoolClearedEvent=el.ConnectionCheckedInEvent=el.ConnectionCheckedOutEvent=el.ConnectionCheckOutFailedEvent=el.ConnectionCheckOutStartedEvent=el.ConnectionClosedEvent=el.ConnectionReadyEvent=el.ConnectionCreatedEvent=el.ConnectionPoolClosedEvent=el.ConnectionPoolReadyEvent=el.ConnectionPoolCreatedEvent=el.ConnectionPoolMonitoringEvent=void 0;var X2=N6(),uN=z1();class B9{constructor(F){this.time=new Date,this.address=F.address}}el.ConnectionPoolMonitoringEvent=B9;class dl extends B9{constructor(F){super(F);this.name=X2.CONNECTION_POOL_CREATED;let{maxConnecting:A,maxPoolSize:$,minPoolSize:B,maxIdleTimeMS:J,waitQueueTimeoutMS:X}=F.options;this.options={maxConnecting:A,maxPoolSize:$,minPoolSize:B,maxIdleTimeMS:J,waitQueueTimeoutMS:X}}}el.ConnectionPoolCreatedEvent=dl;class cl extends B9{constructor(F){super(F);this.name=X2.CONNECTION_POOL_READY}}el.ConnectionPoolReadyEvent=cl;class ll extends B9{constructor(F){super(F);this.name=X2.CONNECTION_POOL_CLOSED}}el.ConnectionPoolClosedEvent=ll;class pl extends B9{constructor(F,A){super(F);this.name=X2.CONNECTION_CREATED,this.connectionId=A.id}}el.ConnectionCreatedEvent=pl;class il extends B9{constructor(F,A,$){super(F);this.name=X2.CONNECTION_READY,this.durationMS=(0,uN.now)()-$,this.connectionId=A.id}}el.ConnectionReadyEvent=il;class al extends B9{constructor(F,A,$,B){super(F);this.name=X2.CONNECTION_CLOSED,this.connectionId=A.id,this.reason=$,this.serviceId=A.serviceId,this.error=B??null}}el.ConnectionClosedEvent=al;class nl extends B9{constructor(F){super(F);this.name=X2.CONNECTION_CHECK_OUT_STARTED}}el.ConnectionCheckOutStartedEvent=nl;class rl extends B9{constructor(F,A,$,B){super(F);this.name=X2.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,uN.now)()-$,this.reason=A,this.error=B}}el.ConnectionCheckOutFailedEvent=rl;class tl extends B9{constructor(F,A,$){super(F);this.name=X2.CONNECTION_CHECKED_OUT,this.durationMS=(0,uN.now)()-$,this.connectionId=A.id}}el.ConnectionCheckedOutEvent=tl;class sl extends B9{constructor(F,A){super(F);this.name=X2.CONNECTION_CHECKED_IN,this.connectionId=A.id}}el.ConnectionCheckedInEvent=sl;class ol extends B9{constructor(F,A={}){super(F);this.name=X2.CONNECTION_POOL_CLEARED,this.serviceId=A.serviceId,this.interruptInUseConnections=A.interruptInUseConnections}}el.ConnectionPoolClearedEvent=ol});var bN=Q((Jp)=>{Object.defineProperty(Jp,"__esModule",{value:!0});Jp.WaitQueueTimeoutError=Jp.PoolClearedOnNetworkError=Jp.PoolClearedError=Jp.PoolClosedError=void 0;var Uz=$1();class Ap extends Uz.MongoDriverError{constructor(F){super("Attempted to check out a connection from closed connection pool");this.address=F.address}get name(){return"MongoPoolClosedError"}}Jp.PoolClosedError=Ap;class xN extends Uz.MongoNetworkError{constructor(F,A){let $=A?A:`Connection pool for ${F.address} was cleared because another operation failed with: "${F.serverError?.message}"`;super($,F.serverError?{cause:F.serverError}:void 0);this.address=F.address,this.addErrorLabel(Uz.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}}Jp.PoolClearedError=xN;class $p extends xN{constructor(F){super(F,`Connection to ${F.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}Jp.PoolClearedOnNetworkError=$p;class Bp extends Uz.MongoDriverError{constructor(F,A){super(F);this.address=A}get name(){return"MongoWaitQueueTimeoutError"}}Jp.WaitQueueTimeoutError=Bp});var Zp=Q((Dp)=>{Object.defineProperty(Dp,"__esModule",{value:!0});Dp.ConnectionPool=Dp.PoolState=void 0;var oA=x("timers"),S9=N6(),Y2=$1(),Yp=A9(),vS1=l6(),L7=z1(),hS1=SN(),zz=Yz(),V4=fN(),eA=bN(),mS1=ZN();Dp.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class V0 extends Yp.TypedEventEmitter{constructor(F,A){super();if(this.on("error",L7.noop),this.options=Object.freeze({connectionType:zz.Connection,...A,maxPoolSize:A.maxPoolSize??100,minPoolSize:A.minPoolSize??0,maxConnecting:A.maxConnecting??2,maxIdleTimeMS:A.maxIdleTimeMS??0,waitQueueTimeoutMS:A.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:A.minPoolSizeCheckFrequencyMS??100,autoEncrypter:A.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new Y2.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=Dp.PoolState.paused,this.server=F,this.connections=new L7.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,L7.makeCounter)(1),this.cancellationToken=new Yp.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new L7.List,this.metrics=new mS1.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(V0.CONNECTION_POOL_CREATED,new V4.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===Dp.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==Dp.PoolState.paused)return;this.poolState=Dp.PoolState.ready,this.emitAndLog(V0.CONNECTION_POOL_READY,new V4.ConnectionPoolReadyEvent(this)),(0,oA.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut(F){let A=(0,L7.now)();this.emitAndLog(V0.CONNECTION_CHECK_OUT_STARTED,new V4.ConnectionCheckOutStartedEvent(this));let{promise:$,resolve:B,reject:J}=(0,L7.promiseWithResolvers)(),X=F.timeoutContext.connectionCheckoutTimeout,Y={resolve:B,reject:J,cancelled:!1,checkoutTime:A},D=(0,L7.addAbortListener)(F.signal,function(){Y.cancelled=!0,J(this.reason)});this.waitQueue.push(Y),process.nextTick(()=>this.processWaitQueue());try{return X?.throwIfExpired(),await(X?Promise.race([$,X]):$)}catch(G){if(vS1.TimeoutError.is(G)){X?.clear(),Y.cancelled=!0,this.emitAndLog(V0.CONNECTION_CHECK_OUT_FAILED,new V4.ConnectionCheckOutFailedEvent(this,"timeout",Y.checkoutTime));let Z=new eA.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if(F.timeoutContext.csotEnabled())throw new Y2.MongoOperationTimeoutError("Timed out during connection checkout",{cause:Z});throw Z}throw G}finally{D?.[L7.kDispose](),X?.clear()}}checkIn(F){if(!this.checkedOut.has(F))return;let A=this.closed,$=this.connectionIsStale(F),B=!!(A||$||F.closed);if(!B)F.markAvailable(),this.connections.unshift(F);if(this.checkedOut.delete(F),this.emitAndLog(V0.CONNECTION_CHECKED_IN,new V4.ConnectionCheckedInEvent(this,F)),B){let J=F.closed?"error":A?"poolClosed":"stale";this.destroyConnection(F,J)}process.nextTick(()=>this.processWaitQueue())}clear(F={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:J}=F;if(!J)throw new Y2.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let X=J.toHexString(),Y=this.serviceGenerations.get(X);if(Y==null)throw new Y2.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(X,Y+1);this.emitAndLog(V0.CONNECTION_POOL_CLEARED,new V4.ConnectionPoolClearedEvent(this,{serviceId:J}));return}let A=F.interruptInUseConnections??!1,$=this.generation;this.generation+=1;let B=this.poolState===Dp.PoolState.paused;if(this.poolState=Dp.PoolState.paused,this.clearMinPoolSizeTimer(),!B)this.emitAndLog(V0.CONNECTION_POOL_CLEARED,new V4.ConnectionPoolClearedEvent(this,{interruptInUseConnections:A}));if(A)process.nextTick(()=>this.interruptInUseConnections($));this.processWaitQueue()}interruptInUseConnections(F){for(let A of this.checkedOut)if(A.generation<=F)A.onError(new eA.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let F of this.checkedOut)F.onError(new Y2.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=Dp.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let F of this.connections)this.emitAndLog(V0.CONNECTION_CLOSED,new V4.ConnectionClosedEvent(this,F,"poolClosed")),F.destroy();this.connections.clear(),this.emitAndLog(V0.CONNECTION_POOL_CLOSED,new V4.ConnectionPoolClosedEvent(this))}async reauthenticate(F){let A=F.authContext;if(!A)throw new Y2.MongoRuntimeError("No auth context found on connection.");let $=A.credentials;if(!$)throw new Y2.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let B=$.resolveAuthMechanism(F.hello),J=this.server.topology.client.s.authProviders.getOrCreateProvider(B.mechanism,B.mechanismProperties);if(!J)throw new Y2.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${$.mechanism}`);await J.reauth(A);return}clearMinPoolSizeTimer(){let F=this.minPoolSizeTimer;if(F)(0,oA.clearTimeout)(F)}destroyConnection(F,A){this.emitAndLog(V0.CONNECTION_CLOSED,new V4.ConnectionClosedEvent(this,F,A)),F.destroy()}connectionIsStale(F){let A=F.serviceId;if(this.loadBalanced&&A){let $=A.toHexString(),B=this.serviceGenerations.get($);return F.generation!==B}return F.generation!==this.generation}connectionIsIdle(F){return!!(this.options.maxIdleTimeMS&&F.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(F){let A=this.connectionIsStale(F),$=this.connectionIsIdle(F);if(!A&&!$&&!F.closed)return!1;let B=F.closed?"error":A?"stale":"idle";return this.destroyConnection(F,B),!0}createConnection(F){let A={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let $=(0,L7.now)();this.emitAndLog(V0.CONNECTION_CREATED,new V4.ConnectionCreatedEvent(this,{id:A.id})),(0,hS1.connect)(A).then((B)=>{if(this.poolState!==Dp.PoolState.ready){this.pending--,B.destroy(),F(this.closed?new eA.PoolClosedError(this):new eA.PoolClearedError(this));return}for(let J of[...S9.APM_EVENTS,zz.Connection.CLUSTER_TIME_RECEIVED])B.on(J,(X)=>this.emit(J,X));if(this.loadBalanced){B.on(zz.Connection.PINNED,(X)=>this.metrics.markPinned(X)),B.on(zz.Connection.UNPINNED,(X)=>this.metrics.markUnpinned(X));let J=B.serviceId;if(J){let X,Y=J.toHexString();if(X=this.serviceGenerations.get(Y))B.generation=X;else this.serviceGenerations.set(Y,0),B.generation=0}}B.markAvailable(),this.emitAndLog(V0.CONNECTION_READY,new V4.ConnectionReadyEvent(this,B,$)),this.pending--,F(void 0,B)},(B)=>{if(this.pending--,this.server.handleError(B),this.emitAndLog(V0.CONNECTION_CLOSED,new V4.ConnectionClosedEvent(this,{id:A.id,serviceId:void 0},"error",B)),B instanceof Y2.MongoNetworkError||B instanceof Y2.MongoServerError)B.connectionGeneration=A.generation;F(B??new Y2.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let F=this.options.minPoolSize;if(this.poolState!==Dp.PoolState.ready)return;if(this.connections.prune((A)=>this.destroyConnectionIfPerished(A)),this.totalConnectionCount<F&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((A,$)=>{if(!A&&$)this.connections.push($),process.nextTick(()=>this.processWaitQueue());if(this.poolState===Dp.PoolState.ready)(0,oA.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,oA.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else(0,oA.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,oA.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let $=this.waitQueue.first();if(!$){this.waitQueue.shift();continue}if($.cancelled){this.waitQueue.shift();continue}if(this.poolState!==Dp.PoolState.ready){let J=this.closed?"poolClosed":"connectionError",X=this.closed?new eA.PoolClosedError(this):new eA.PoolClearedError(this);this.emitAndLog(V0.CONNECTION_CHECK_OUT_FAILED,new V4.ConnectionCheckOutFailedEvent(this,J,$.checkoutTime,X)),this.waitQueue.shift(),$.reject(X);continue}if(!this.availableConnectionCount)break;let B=this.connections.shift();if(!B)break;if(!this.destroyConnectionIfPerished(B))this.checkedOut.add(B),this.emitAndLog(V0.CONNECTION_CHECKED_OUT,new V4.ConnectionCheckedOutEvent(this,B,$.checkoutTime)),this.waitQueue.shift(),$.resolve(B)}let{maxPoolSize:F,maxConnecting:A}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<A&&(F===0||this.totalConnectionCount<F)){let $=this.waitQueue.shift();if(!$||$.cancelled)continue;this.createConnection((B,J)=>{if($.cancelled){if(!B&&J)this.connections.push(J)}else if(B)this.emitAndLog(V0.CONNECTION_CHECK_OUT_FAILED,new V4.ConnectionCheckOutFailedEvent(this,"connectionError",$.checkoutTime,B)),$.reject(B);else if(J)this.checkedOut.add(J),this.emitAndLog(V0.CONNECTION_CHECKED_OUT,new V4.ConnectionCheckedOutEvent(this,J,$.checkoutTime)),$.resolve(J);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}Dp.ConnectionPool=V0;V0.CONNECTION_POOL_CREATED=S9.CONNECTION_POOL_CREATED;V0.CONNECTION_POOL_CLOSED=S9.CONNECTION_POOL_CLOSED;V0.CONNECTION_POOL_CLEARED=S9.CONNECTION_POOL_CLEARED;V0.CONNECTION_POOL_READY=S9.CONNECTION_POOL_READY;V0.CONNECTION_CREATED=S9.CONNECTION_CREATED;V0.CONNECTION_READY=S9.CONNECTION_READY;V0.CONNECTION_CLOSED=S9.CONNECTION_CLOSED;V0.CONNECTION_CHECK_OUT_STARTED=S9.CONNECTION_CHECK_OUT_STARTED;V0.CONNECTION_CHECK_OUT_FAILED=S9.CONNECTION_CHECK_OUT_FAILED;V0.CONNECTION_CHECKED_OUT=S9.CONNECTION_CHECKED_OUT;V0.CONNECTION_CHECKED_IN=S9.CONNECTION_CHECKED_IN});var hN=Q((Wp)=>{Object.defineProperty(Wp,"__esModule",{value:!0});Wp.Server=void 0;var dS1=Yz(),cS1=Zp(),lS1=bN(),d2=N6(),s0=$1(),pS1=A9(),iS1=$X(),yN=UN(),r5=z1(),Up=J3(),_0=s3(),aS1=mN(),vN=OX(),nS1=aJ(),bX=(0,r5.makeStateMachine)({[_0.STATE_CLOSED]:[_0.STATE_CLOSED,_0.STATE_CONNECTING],[_0.STATE_CONNECTING]:[_0.STATE_CONNECTING,_0.STATE_CLOSING,_0.STATE_CONNECTED,_0.STATE_CLOSED],[_0.STATE_CONNECTED]:[_0.STATE_CONNECTED,_0.STATE_CLOSING,_0.STATE_CLOSED],[_0.STATE_CLOSING]:[_0.STATE_CLOSING,_0.STATE_CLOSED]});class O3 extends pS1.TypedEventEmitter{constructor(F,A,$){super();this.on("error",r5.noop),this.serverApi=$.serverApi;let B={hostAddress:A.hostAddress,...$};this.topology=F,this.pool=new cS1.ConnectionPool(this,B),this.s={description:A,options:$,state:_0.STATE_CLOSED,operationCount:0};for(let J of[...d2.CMAP_EVENTS,...d2.APM_EVENTS])this.pool.on(J,(X)=>this.emit(J,X));if(this.pool.on(dS1.Connection.CLUSTER_TIME_RECEIVED,(J)=>{this.clusterTime=J}),this.loadBalanced){this.monitor=null;return}this.monitor=new aS1.Monitor(this,this.s.options);for(let J of d2.HEARTBEAT_EVENTS)this.monitor.on(J,(X)=>this.emit(J,X));this.monitor.on("resetServer",(J)=>gN(this,J)),this.monitor.on(O3.SERVER_HEARTBEAT_SUCCEEDED,(J)=>{if(this.emit(O3.DESCRIPTION_RECEIVED,new vN.ServerDescription(this.description.hostAddress,J.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===_0.STATE_CONNECTING)bX(this,_0.STATE_CONNECTED),this.emit(O3.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(F){this.topology.clusterTime=F}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===_0.TopologyType.LoadBalanced}connect(){if(this.s.state!==_0.STATE_CLOSED)return;if(bX(this,_0.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else bX(this,_0.STATE_CONNECTED),this.emit(O3.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===_0.STATE_CLOSED)return;if(bX(this,_0.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),bX(this,_0.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(F,A){if(this.s.state===_0.STATE_CLOSING||this.s.state===_0.STATE_CLOSED)throw new s0.MongoServerClosedError;let $=F.session,B=$?.pinnedConnection;if(this.incrementOperationCount(),B==null)try{B=await this.pool.checkOut({timeoutContext:A,signal:F.options.signal})}catch(U){if(this.decrementOperationCount(),!(U instanceof lS1.PoolClearedError))this.handleError(U);throw U}let J=null,X=()=>{if(this.decrementOperationCount(),$?.pinnedConnection!==B)if(J!=null){let U=()=>{this.pool.checkIn(B)};J.then(U,U)}else this.pool.checkIn(B)},Y;try{Y=F.buildCommand(B,$)}catch(U){throw X(),U}let D=F.buildOptions(A),G=F.ns;if(this.loadBalanced&&rS1(Y,$)&&!$?.pinnedConnection)$?.pin(B);if(D.directConnection=this.topology.s.options.directConnection,F instanceof iS1.AggregateOperation&&F.hasWriteStage&&(0,r5.maxWireVersion)(B)<nS1.MIN_SECONDARY_WRITE_WIRE_VERSION)delete D.readPreference;if(this.description.iscryptd)D.omitMaxTimeMS=!0;try{try{let U=await B.command(G,Y,D,F.SERVER_COMMAND_RESPONSE_TYPE);return(0,Up.throwIfWriteConcernError)(U),U}catch(U){throw this.decorateCommandError(B,Y,D,U)}}catch(U){if(U instanceof s0.MongoError&&U.code===s0.MONGODB_ERROR_CODES.Reauthenticate){J=this.pool.reauthenticate(B),J.then(void 0,(z)=>{J=null,(0,r5.squashError)(z)}),await(0,r5.abortable)(J,D),J=null;try{let z=await B.command(G,Y,D,F.SERVER_COMMAND_RESPONSE_TYPE);return(0,Up.throwIfWriteConcernError)(z),z}catch(z){throw this.decorateCommandError(B,Y,D,z)}}else throw U}finally{X()}}handleError(F,A){if(!(F instanceof s0.MongoError))return;if(F.connectionGeneration&&F.connectionGeneration<this.pool.generation)return;let B=F instanceof s0.MongoNetworkError&&!(F instanceof s0.MongoNetworkTimeoutError),J=F instanceof s0.MongoNetworkError&&F.beforeHandshake,X=F.hasErrorLabel(s0.MongoErrorLabel.HandshakeError);if(B||J||X){if(!this.loadBalanced)F.addErrorLabel(s0.MongoErrorLabel.ResetPool),gN(this,F);else if(A)this.pool.clear({serviceId:A.serviceId})}else if((0,s0.isSDAMUnrecoverableError)(F)){if(sS1(this,F)){let Y=(0,s0.isNodeShuttingDownError)(F);if(this.loadBalanced&&A&&Y)this.pool.clear({serviceId:A.serviceId});if(!this.loadBalanced){if(Y)F.addErrorLabel(s0.MongoErrorLabel.ResetPool);gN(this,F),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(F,A,$,B){if(typeof B!=="object"||B==null||!("name"in B))throw new s0.MongoRuntimeError("An unexpected error type: "+typeof B);if(B.name==="AbortError"&&"cause"in B&&B.cause instanceof s0.MongoError)B=B.cause;if(!(B instanceof s0.MongoError))return B;if(tS1(this.pool,F))return B;let J=$?.session;if(B instanceof s0.MongoNetworkError){if(J&&!J.hasEnded&&J.serverSession)J.serverSession.isDirty=!0;if(_N(J,A)&&!B.hasErrorLabel(s0.MongoErrorLabel.TransientTransactionError))B.addErrorLabel(s0.MongoErrorLabel.TransientTransactionError);if((zp(this.topology)||(0,yN.isTransactionCommand)(A))&&(0,r5.supportsRetryableWrites)(this)&&!_N(J,A))B.addErrorLabel(s0.MongoErrorLabel.RetryableWriteError)}else if((zp(this.topology)||(0,yN.isTransactionCommand)(A))&&(0,s0.needsRetryableWriteLabel)(B,(0,r5.maxWireVersion)(this),this.description.type)&&!_N(J,A))B.addErrorLabel(s0.MongoErrorLabel.RetryableWriteError);if(J&&J.isPinned&&B.hasErrorLabel(s0.MongoErrorLabel.TransientTransactionError))J.unpin({force:!0});return this.handleError(B,F),B}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}Wp.Server=O3;O3.SERVER_HEARTBEAT_STARTED=d2.SERVER_HEARTBEAT_STARTED;O3.SERVER_HEARTBEAT_SUCCEEDED=d2.SERVER_HEARTBEAT_SUCCEEDED;O3.SERVER_HEARTBEAT_FAILED=d2.SERVER_HEARTBEAT_FAILED;O3.CONNECT=d2.CONNECT;O3.DESCRIPTION_RECEIVED=d2.DESCRIPTION_RECEIVED;O3.CLOSED=d2.CLOSED;O3.ENDED=d2.ENDED;function gN(F,A){if(F.loadBalanced)return;if(A instanceof s0.MongoNetworkError&&!(A instanceof s0.MongoNetworkTimeoutError))F.monitor?.reset();F.emit(O3.DESCRIPTION_RECEIVED,new vN.ServerDescription(F.description.hostAddress,void 0,{error:A}))}function rS1(F,A){if(A)return A.inTransaction()||A.transaction.isCommitted&&"commitTransaction"in F||"aggregate"in F||"find"in F||"getMore"in F||"listCollections"in F||"listIndexes"in F||"bulkWrite"in F;return!1}function tS1(F,A){if(A.serviceId)return A.generation!==F.serviceGenerations.get(A.serviceId.toHexString());return A.generation!==F.generation}function sS1(F,A){let $=A.topologyVersion,B=F.description.topologyVersion;return(0,vN.compareTopologyVersion)(B,$)<0}function _N(F,A){return F&&F.inTransaction()&&!(0,yN.isTransactionCommand)(A)}function zp(F){return F.s.options.retryWrites!==!1}});var mN=Q((Lp)=>{Object.defineProperty(Lp,"__esModule",{value:!0});Lp.RTTSampler=Lp.MonitorInterval=Lp.RTTPinger=Lp.Monitor=Lp.ServerMonitoringMode=void 0;var P8=x("timers"),Kp=J0(),Wz=SN(),oS1=CC(),dN=N6(),F$=$1(),eS1=U8(),qp=A9(),E4=z1(),L4=s3(),gX=Zz(),_X=hN(),A$="idle",t5="monitoring",$$=(0,E4.makeStateMachine)({[L4.STATE_CLOSING]:[L4.STATE_CLOSING,A$,L4.STATE_CLOSED],[L4.STATE_CLOSED]:[L4.STATE_CLOSED,t5],[A$]:[A$,t5,L4.STATE_CLOSING],[t5]:[t5,A$,L4.STATE_CLOSING]}),Fu1=new Set([L4.STATE_CLOSING,L4.STATE_CLOSED,t5]);function yX(F){return F.s.state===L4.STATE_CLOSED||F.s.state===L4.STATE_CLOSING}Lp.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class Ep extends qp.TypedEventEmitter{constructor(F,A){super();this.component=eS1.MongoLoggableComponent.TOPOLOGY,this.on("error",E4.noop),this.server=F,this.connection=null,this.cancellationToken=new qp.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:L4.STATE_CLOSED},this.address=F.description.address,this.options=Object.freeze({connectTimeoutMS:A.connectTimeoutMS??1e4,heartbeatFrequencyMS:A.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:A.minHeartbeatFrequencyMS??500,serverMonitoringMode:A.serverMonitoringMode}),this.isRunningInFaasEnv=(0,oS1.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new iN(10);let $=this.cancellationToken,B={id:"<monitor>",generation:F.pool.generation,cancellationToken:$,hostAddress:F.description.hostAddress,...A,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete B.credentials,B.autoEncrypter)delete B.autoEncrypter;this.connectOptions=Object.freeze(B)}connect(){if(this.s.state!==L4.STATE_CLOSED)return;let F=this.options.heartbeatFrequencyMS,A=this.options.minHeartbeatFrequencyMS;this.monitorId=new Hz(Vp(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:A,immediate:!0})}requestCheck(){if(Fu1.has(this.s.state))return;this.monitorId?.wake()}reset(){let F=this.server.description.topologyVersion;if(yX(this)||F==null)return;$$(this,L4.STATE_CLOSING),Qp(this),$$(this,A$);let A=this.options.heartbeatFrequencyMS,$=this.options.minHeartbeatFrequencyMS;this.monitorId=new Hz(Vp(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:$})}close(){if(yX(this))return;$$(this,L4.STATE_CLOSING),Qp(this),this.emit("close"),$$(this,L4.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(F){this.rttSampler.addSample(F)}clearRttSamples(){this.rttSampler.clear()}}Lp.Monitor=Ep;function Qp(F){F.monitorId?.stop(),F.monitorId=void 0,F.rttPinger?.close(),F.rttPinger=void 0,F.cancellationToken.emit("cancel"),F.connection?.destroy(),F.connection=null,F.clearRttSamples()}function cN(F,A){if(A==null)return!1;let $=F.options.serverMonitoringMode;if($===Lp.ServerMonitoringMode.poll)return!1;if($===Lp.ServerMonitoringMode.stream)return!0;if(F.isRunningInFaasEnv)return!1;return!0}function Au1(F,A){let $,B,J=F.server.description.topologyVersion,X=cN(F,J);F.emitAndLogHeartbeat(_X.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new gX.ServerHeartbeatStartedEvent(F.address,X));function Y(Z){F.connection?.destroy(),F.connection=null,F.emitAndLogHeartbeat(_X.Server.SERVER_HEARTBEAT_FAILED,F.server.topology.s.id,void 0,new gX.ServerHeartbeatFailedEvent(F.address,(0,E4.calculateDurationInMs)($),Z,B));let U=!(Z instanceof F$.MongoError)?new F$.MongoError(F$.MongoError.buildErrorMessage(Z),{cause:Z}):Z;if(U.addErrorLabel(F$.MongoErrorLabel.ResetPool),U instanceof F$.MongoNetworkTimeoutError)U.addErrorLabel(F$.MongoErrorLabel.InterruptInUseConnections);F.emit("resetServer",U),A(Z)}function D(Z){if(!("isWritablePrimary"in Z))Z.isWritablePrimary=Z[dN.LEGACY_HELLO_COMMAND];let U=X&&F.rttPinger?F.rttPinger.latestRtt??(0,E4.calculateDurationInMs)($):(0,E4.calculateDurationInMs)($);if(F.addRttSample(U),F.emitAndLogHeartbeat(_X.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,Z.connectionId,new gX.ServerHeartbeatSucceededEvent(F.address,U,Z,X)),X)F.emitAndLogHeartbeat(_X.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new gX.ServerHeartbeatStartedEvent(F.address,!0)),$=(0,E4.now)();else F.rttPinger?.close(),F.rttPinger=void 0,A(void 0,Z)}let{connection:G}=F;if(G&&!G.closed){let{serverApi:Z,helloOk:U}=G,z=F.options.connectTimeoutMS,W=F.options.heartbeatFrequencyMS,H={[Z?.version||U?"hello":dN.LEGACY_HELLO_COMMAND]:1,...X&&J?{maxAwaitTimeMS:W,topologyVersion:$u1(J)}:{}},K=X?{socketTimeoutMS:z?z+W:0,exhaustAllowed:!0}:{socketTimeoutMS:z};if(X&&F.rttPinger==null)F.rttPinger=new pN(F);if($=(0,E4.now)(),X)return B=!0,G.exhaustCommand((0,E4.ns)("admin.$cmd"),H,K,(q,V)=>{if(q)return Y(q);return D(V)});B=!1,G.command((0,E4.ns)("admin.$cmd"),H,K).then(D,Y);return}(async()=>{let Z=await(0,Wz.makeSocket)(F.connectOptions),U=(0,Wz.makeConnection)(F.connectOptions,Z);$=(0,E4.now)();try{return await(0,Wz.performInitialHandshake)(U,F.connectOptions),U}catch(z){throw U.destroy(),z}})().then((Z)=>{if(yX(F)){Z.destroy();return}let U=(0,E4.calculateDurationInMs)($);F.addRttSample(U),F.connection=Z,F.emitAndLogHeartbeat(_X.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,Z.hello?.connectionId,new gX.ServerHeartbeatSucceededEvent(F.address,U,Z.hello,cN(F,Z.hello?.topologyVersion))),A(void 0,Z.hello)},(Z)=>{F.connection=null,B=!1,Y(Z)})}function Vp(F){return(A)=>{if(F.s.state===t5){process.nextTick(A);return}$$(F,t5);function $(){if(!yX(F))$$(F,A$);A()}Au1(F,(B,J)=>{if(B){if(F.server.description.type===L4.ServerType.Unknown)return $()}if(cN(F,J?.topologyVersion))(0,P8.setTimeout)(()=>{if(!yX(F))F.monitorId?.wake()},0);$()})}}function $u1(F){return{processId:F.processId,counter:Kp.Long.isLong(F.counter)?F.counter:Kp.Long.fromNumber(F.counter)}}class pN{constructor(F){this.connection=void 0,this.cancellationToken=F.cancellationToken,this.closed=!1,this.monitor=F,this.latestRtt=F.latestRtt??void 0;let A=F.options.heartbeatFrequencyMS;this.monitorId=(0,P8.setTimeout)(()=>this.measureRoundTripTime(),A)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,P8.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(F,A){if(this.closed){A?.destroy();return}if(this.connection==null)this.connection=A;this.latestRtt=(0,E4.calculateDurationInMs)(F),this.monitorId=(0,P8.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let F=(0,E4.now)();if(this.closed)return;let A=this.connection;if(A==null){(0,Wz.connect)(this.monitor.connectOptions).then((B)=>{this.measureAndReschedule(F,B)},()=>{this.connection=void 0});return}let $=A.serverApi?.version||A.helloOk?"hello":dN.LEGACY_HELLO_COMMAND;A.command((0,E4.ns)("admin.$cmd"),{[$]:1},void 0).then(()=>this.measureAndReschedule(F),()=>{this.connection?.destroy(),this.connection=void 0;return})}}Lp.RTTPinger=pN;class Hz{constructor(F,A={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)(0,P8.clearTimeout)(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,E4.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=F,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=A.minHeartbeatFrequencyMS??500,A.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let A=(0,E4.now)()-this.lastExecutionEnded;if(A<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(A<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-A);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)(0,P8.clearTimeout)(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let F=(0,E4.now)(),A=F-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:F,timeSinceLastCall:A}}_reschedule(F){if(this.stopped)return;if(this.timerId)(0,P8.clearTimeout)(this.timerId);this.timerId=(0,P8.setTimeout)(this._executeAndReschedule,F||this.heartbeatFrequencyMS)}}Lp.MonitorInterval=Hz;class iN{constructor(F=10){this.rttSamples=new Float64Array(F),this.length=0,this.writeIndex=0}addSample(F){if(this.rttSamples[this.writeIndex++]=F,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let F=this.rttSamples[0];for(let A=1;A<this.length;A++)if(this.rttSamples[A]<F)F=this.rttSamples[A];return F}average(){if(this.length===0)return 0;let F=0;for(let A=0;A<this.length;A++)F+=this.rttSamples[A];return F/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}Lp.RTTSampler=iN});var eN=Q((jp)=>{Object.defineProperty(jp,"__esModule",{value:!0});jp.DEFAULT_OPTIONS=jp.OPTIONS=void 0;jp.resolveSRVRecord=Ku1;jp.parseOptions=Qu1;var aN=x("dns"),Yu1=vU(),Du1=x("url"),B$=RU(),c2=y2(),Ip=IX(),Cp=kc(),H1=$1(),Kz=I8(),tN=U8(),nN=e9(),R8=F4(),Gu1=mN(),v4=z1(),w7=J3(),rN=["authSource","replicaSet","loadBalanced"],Zu1="loadBalanced option only supported with a single host in the URI",Uu1="loadBalanced option not supported with a replicaSet option",zu1="loadBalanced option not supported when directConnection is provided";function Rp(F){return async function($){try{return await aN.promises[F]($)}catch(B){if(B.code===aN.TIMEOUT)return await aN.promises[F]($);else throw B}}}var Wu1=Rp("resolveSrv"),Hu1=Rp("resolveTxt");async function Ku1(F){if(typeof F.srvHost!=="string")throw new H1.MongoAPIError('Option "srvHost" must not be empty');let A=F.srvHost,$=Hu1(A);$.then(void 0,v4.squashError);let B=`_${F.srvServiceName}._tcp.${A}`,J=await Wu1(B);if(J.length===0)throw new H1.MongoAPIError("No addresses found at host");for(let{name:W}of J)(0,v4.checkParentDomainMatch)(W,A);let X=J.map((W)=>v4.HostAddress.fromString(`${W.name}:${W.port??27017}`));sN(X,F,!0);let Y;try{Y=await $}catch(W){if(W.code!=="ENODATA"&&W.code!=="ENOTFOUND")throw W;return X}if(Y.length>1)throw new H1.MongoParseError("Multiple text records not allowed");let D=new Du1.URLSearchParams(Y[0].join(""));if([...D.keys()].some((W)=>!rN.includes(W)))throw new H1.MongoParseError(`Text record may only set any of: ${rN.join(", ")}`);if(rN.some((W)=>D.get(W)===""))throw new H1.MongoParseError("Cannot have empty URI params in DNS TXT Record");let Z=D.get("authSource")??void 0,U=D.get("replicaSet")??void 0,z=D.get("loadBalanced")??void 0;if(!F.userSpecifiedAuthSource&&Z&&F.credentials&&!c2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(F.credentials.mechanism))F.credentials=B$.MongoCredentials.merge(F.credentials,{source:Z});if(!F.userSpecifiedReplicaSet&&U)F.replicaSet=U;if(z==="true")F.loadBalanced=!0;if(F.replicaSet&&F.srvMaxHosts>0)throw new H1.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return sN(X,F,!0),X}function qu1(F){if(!F)return;let A=($,B)=>{if(F.has($)&&F.has(B))throw new H1.MongoAPIError(`The '${$}' option cannot be used with the '${B}' option`)};A("tlsInsecure","tlsAllowInvalidCertificates"),A("tlsInsecure","tlsAllowInvalidHostnames")}function I7(F,A){if(typeof A==="boolean")return A;switch(A){case"true":return!0;case"false":return!1;default:throw new H1.MongoParseError(`${F} must be either "true" or "false"`)}}function oN(F,A){let $=(0,v4.parseInteger)(A);if($!=null)return $;throw new H1.MongoParseError(`Expected ${F} to be stringified int value, got: ${A}`)}function vX(F,A){let $=oN(F,A);if($<0)throw new H1.MongoParseError(`${F} can only be a positive int value, got: ${A}`);return $}function*Np(F){if(F==="")return;let A=F.split(",");for(let $ of A){let[B,J]=$.split(/:(.*)/);if(J==null)throw new H1.MongoParseError("Cannot have undefined values in key value pairs");yield[B,J]}}class hX extends Map{constructor(F=[]){super(F.map(([A,$])=>[A.toLowerCase(),$]))}has(F){return super.has(F.toLowerCase())}get(F){return super.get(F.toLowerCase())}set(F,A){return super.set(F.toLowerCase(),A)}delete(F){return super.delete(F.toLowerCase())}}function Qu1(F,A=void 0,$={}){if(A!=null&&!(A instanceof Kz.MongoClient))$=A,A=void 0;if($.useBigInt64&&typeof $.promoteLongs==="boolean"&&!$.promoteLongs)throw new H1.MongoAPIError("Must request either bigint or Long for int64 deserialization");if($.useBigInt64&&typeof $.promoteValues==="boolean"&&!$.promoteValues)throw new H1.MongoAPIError("Must request either bigint or Long for int64 deserialization");let B=new Yu1.default(F),{hosts:J,isSRV:X}=B,Y=Object.create(null);Y.hosts=X?[]:J.map(v4.HostAddress.fromString);let D=new hX;if(B.pathname!=="/"&&B.pathname!==""){let K=decodeURIComponent(B.pathname[0]==="/"?B.pathname.slice(1):B.pathname);if(K)D.set("dbName",[K])}if(B.username!==""){let K={username:decodeURIComponent(B.username)};if(typeof B.password==="string")K.password=decodeURIComponent(B.password);D.set("auth",[K])}for(let K of B.searchParams.keys()){let q=B.searchParams.getAll(K),V=/readPreferenceTags/i.test(K);if(!V&&q.length>1)throw new H1.MongoInvalidArgumentError(`URI option "${K}" cannot appear more than once in the connection string`);if(!V&&q.includes(""))throw new H1.MongoAPIError(`URI option "${K}" cannot be specified with no value`);if(!D.has(K))D.set(K,q)}let G=new hX(Object.entries($).filter(([,K])=>K!=null));if(D.has("serverApi"))throw new H1.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let Z=D.get("authMechanismProperties");if(Z){for(let K of Z)if(/(^|,)ALLOWED_HOSTS:/.test(K))throw new H1.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(G.has("loadBalanced"))throw new H1.MongoParseError("loadBalanced is only a valid option in the URI");let U=new hX,z=new Set([...D.keys(),...G.keys()]);for(let K of z){let q=[],V=G.get(K);if(V!=null)q.push(V);let E=D.get(K)??[];q.push(...E),U.set(K,q)}if(U.has("tls")||U.has("ssl")){let K=(U.get("tls")||[]).concat(U.get("ssl")||[]).map(I7.bind(null,"tls/ssl"));if(new Set(K).size!==1)throw new H1.MongoParseError("All values of tls/ssl must be the same.")}qu1(U);let W=(0,v4.setDifference)(z,Array.from(Object.keys(jp.OPTIONS)).map((K)=>K.toLowerCase()));if(W.size!==0){let K=W.size>1?"options":"option",q=W.size>1?"are":"is";throw new H1.MongoParseError(`${K} ${Array.from(W).join(", ")} ${q} not supported`)}for(let[K,q]of Object.entries(jp.OPTIONS)){let V=U.get(K);if(!V||V.length===0){if(jp.DEFAULT_OPTIONS.has(K))Pp(Y,K,q,[jp.DEFAULT_OPTIONS.get(K)])}else{let{deprecated:E}=q;if(E){let L=typeof E==="string"?`: ${E}`:"";(0,v4.emitWarning)(`${K} is a deprecated option${L}`)}Pp(Y,K,q,V)}}if(Y.credentials){let K=Y.credentials.mechanism===c2.AuthMechanism.MONGODB_GSSAPI,q=Y.credentials.mechanism===c2.AuthMechanism.MONGODB_X509,V=Y.credentials.mechanism===c2.AuthMechanism.MONGODB_AWS,E=Y.credentials.mechanism===c2.AuthMechanism.MONGODB_OIDC;if((K||q)&&U.has("authSource")&&Y.credentials.source!=="$external")throw new H1.MongoParseError(`authMechanism ${Y.credentials.mechanism} requires an authSource of '$external'`);if(!(K||q||V||E)&&Y.dbName&&!U.has("authSource"))Y.credentials=B$.MongoCredentials.merge(Y.credentials,{source:Y.dbName});if(V&&Y.credentials.username&&!Y.credentials.password)throw new H1.MongoMissingCredentialsError(`When using ${Y.credentials.mechanism} password must be set when a username is specified`);if(Y.credentials.validate(),Y.credentials.password===""&&Y.credentials.username===""&&Y.credentials.mechanism===c2.AuthMechanism.MONGODB_DEFAULT&&Object.keys(Y.credentials.mechanismProperties).length===0)delete Y.credentials}if(!Y.dbName)Y.dbName="test";if(sN(J,Y,X),A&&Y.autoEncryption)Cp.Encrypter.checkForMongoCrypt(),Y.encrypter=new Cp.Encrypter(A,F,$),Y.autoEncrypter=Y.encrypter.autoEncrypter;if(Y.userSpecifiedAuthSource=G.has("authSource")||D.has("authSource"),Y.userSpecifiedReplicaSet=G.has("replicaSet")||D.has("replicaSet"),X){if(Y.srvHost=J[0],Y.directConnection)throw new H1.MongoAPIError("SRV URI does not support directConnection");if(Y.srvMaxHosts>0&&typeof Y.replicaSet==="string")throw new H1.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let K=!G.has("tls")&&!D.has("tls"),q=!G.has("ssl")&&!D.has("ssl");if(K&&q)Y.tls=!0}else if(D.has("srvMaxHosts")||G.has("srvMaxHosts")||D.has("srvServiceName")||G.has("srvServiceName"))throw new H1.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(Y.directConnection&&Y.hosts.length!==1)throw new H1.MongoParseError("directConnection option requires exactly one host");if(!Y.proxyHost&&(Y.proxyPort||Y.proxyUsername||Y.proxyPassword))throw new H1.MongoParseError("Must specify proxyHost if other proxy options are passed");if(Y.proxyUsername&&!Y.proxyPassword||!Y.proxyUsername&&Y.proxyPassword)throw new H1.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((K)=>D.get(K)??[]).some((K)=>K.length>1))throw new H1.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return Y.mongoLoggerOptions=tN.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:Y.mongodbLogPath,mongodbLogComponentSeverities:Y.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:Y.mongodbLogMaxDocumentLength}),Y}function sN(F,A,$){if(A.loadBalanced){if(F.length>1)throw new H1.MongoParseError(Zu1);if(A.replicaSet)throw new H1.MongoParseError(Uu1);if(A.directConnection)throw new H1.MongoParseError(zu1);if($&&A.srvMaxHosts>0)throw new H1.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function Pp(F,A,$,B){let{target:J,type:X,transform:Y}=$,D=J??A;switch(X){case"boolean":F[D]=I7(D,B[0]);break;case"int":F[D]=oN(D,B[0]);break;case"uint":F[D]=vX(D,B[0]);break;case"string":if(B[0]==null)break;F[D]=String(B[0]);break;case"record":if(!(0,v4.isRecord)(B[0]))throw new H1.MongoParseError(`${D} must be an object`);F[D]=B[0];break;case"any":F[D]=B[0];break;default:{if(!Y)throw new H1.MongoParseError("Descriptors missing a type must define a transform");let G=Y({name:D,options:F,values:B});F[D]=G;break}}}jp.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:F,options:A,values:[$]}){if(!(0,v4.isRecord)($,["username","password"]))throw new H1.MongoParseError(`${F} must be an object with 'username' and 'password' properties`);return B$.MongoCredentials.merge(A.credentials,{username:$.username,password:$.password})}},authMechanism:{target:"credentials",transform({options:F,values:[A]}){let $=Object.values(c2.AuthMechanism),[B]=$.filter((Y)=>Y.match(RegExp(String.raw`\b${A}\b`,"i")));if(!B)throw new H1.MongoParseError(`authMechanism one of ${$}, got ${A}`);let J=F.credentials?.source;if(B===c2.AuthMechanism.MONGODB_PLAIN||c2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(B))J="$external";let X=F.credentials?.password;if(B===c2.AuthMechanism.MONGODB_X509&&X==="")X=void 0;return B$.MongoCredentials.merge(F.credentials,{mechanism:B,source:J,password:X})}},authMechanismProperties:{target:"credentials",transform({options:F,values:A}){let $=Object.create(null);for(let B of A)if(typeof B==="string")for(let[J,X]of Np(B))try{$[J]=I7(J,X)}catch{$[J]=X}else{if(!(0,v4.isRecord)(B))throw new H1.MongoParseError("AuthMechanismProperties must be an object");$={...B}}return B$.MongoCredentials.merge(F.credentials,{mechanismProperties:$})}},authSource:{target:"credentials",transform({options:F,values:[A]}){let $=String(A);return B$.MongoCredentials.merge(F.credentials,{source:$})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[F]}){let A=typeof F==="string"?{version:F}:F,$=A&&A.version;if(!$)throw new H1.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(Kz.ServerApiVersion).join('", "')}"]`);if(!Object.values(Kz.ServerApiVersion).some((B)=>B===$))throw new H1.MongoParseError(`Invalid server API version=${$}; must be in the following enum: ["${Object.values(Kz.ServerApiVersion).join('", "')}"]`);return A}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:F}){let A=new Set;for(let $ of F){let B=typeof $==="string"?$.split(","):$;if(!Array.isArray(B))throw new H1.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let J of B)if(Object.keys(Ip.Compressor).includes(String(J)))A.add(String(J));else throw new H1.MongoInvalidArgumentError(`${J} is not a valid compression mechanism. Must be one of: ${Object.keys(Ip.Compressor)}.`)}return[...A]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:F,values:[A]}){let $=oN(F,A);if($===4||$===6)return $;throw new H1.MongoParseError(`Option 'family' must be 4 or 6 got ${$}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[$]}){let B=w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,fsync:I7(F,$)}});if(!B)throw new H1.MongoParseError(`Unable to make a writeConcern from fsync=${$}`);return B}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[$]}){let B=w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:I7(F,$)}});if(!B)throw new H1.MongoParseError(`Unable to make a writeConcern from journal=${$}`);return B}},journal:{target:"writeConcern",transform({name:F,options:A,values:[$]}){let B=w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:I7(F,$)}});if(!B)throw new H1.MongoParseError(`Unable to make a writeConcern from journal=${$}`);return B}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:F,values:[A]}){let $=vX(F,A);if($===0)throw new H1.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return $}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:F,options:A,values:[$]}){let B=vX(F,$);if(A.readPreference)return R8.ReadPreference.fromOptions({readPreference:{...A.readPreference,maxStalenessSeconds:B}});else return new R8.ReadPreference("secondary",void 0,{maxStalenessSeconds:B})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[F],options:A}){return{...A.driverInfo,name:String(F)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:v4.DEFAULT_PK_FACTORY,transform({values:[F]}){if((0,v4.isRecord)(F,["createPk"])&&typeof F.createPk==="function")return F;throw new H1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${F}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[F],options:A}){if(F instanceof nN.ReadConcern||(0,v4.isRecord)(F,["level"]))return nN.ReadConcern.fromOptions({...A.readConcern,...F});throw new H1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(F)}`)}},readConcernLevel:{target:"readConcern",transform({values:[F],options:A}){return nN.ReadConcern.fromOptions({...A.readConcern,level:F})}},readPreference:{default:R8.ReadPreference.primary,transform({values:[F],options:A}){if(F instanceof R8.ReadPreference)return R8.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if((0,v4.isRecord)(F,["mode"])){let $=R8.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if($)return $;else throw new H1.MongoParseError(`Cannot make read preference from ${JSON.stringify(F)}`)}if(typeof F==="string"){let $={hedge:A.readPreference?.hedge,maxStalenessSeconds:A.readPreference?.maxStalenessSeconds};return new R8.ReadPreference(F,A.readPreference?.tags,$)}throw new H1.MongoParseError(`Unknown ReadPreference value: ${F}`)}},readPreferenceTags:{target:"readPreference",transform({values:F,options:A}){let $=Array.isArray(F[0])?F[0]:F,B=[];for(let J of $){let X=Object.create(null);if(typeof J==="string")for(let[Y,D]of Np(J))X[Y]=D;if((0,v4.isRecord)(J))for(let[Y,D]of Object.entries(J))X[Y]=D;B.push(X)}return R8.ReadPreference.fromOptions({readPreference:A.readPreference,readPreferenceTags:B})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[F]}){if(!Object.values(Gu1.ServerMonitoringMode).includes(F))throw new H1.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return F}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:F,values:[A]}){return!I7(F,A)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:F,values:[A]}){return I7(F,A)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:F,options:A,values:[$]}){let B=I7(F,$);if(B)A.checkServerIdentity=()=>{return},A.rejectUnauthorized=!1;else A.checkServerIdentity=A.tlsAllowInvalidHostnames?()=>{return}:void 0,A.rejectUnauthorized=A.tlsAllowInvalidCertificates?!1:!0;return B}},w:{target:"writeConcern",transform({values:[F],options:A}){return w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[F],options:A}){if((0,v4.isRecord)(F)||F instanceof w7.WriteConcern)return w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,...F}});else if(F==="majority"||typeof F==="number")return w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}});throw new H1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(F)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[F],options:A}){let $=w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeout:vX("wtimeout",F)}});if($)return $;throw new H1.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[F],options:A}){let $=w7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeoutMS:vX("wtimeoutMS",F)}});if($)return $;throw new H1.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[F]}){if(!(typeof F==="string"&&["stderr","stdout"].includes(F)||F&&typeof F==="object"&&("write"in F)&&typeof F.write==="function"))throw new H1.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return F}},mongodbLogComponentSeverities:{transform({values:[F]}){if(typeof F!=="object"||!F)throw new H1.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[A,$]of Object.entries(F)){if(typeof $!=="string"||typeof A!=="string")throw new H1.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(tN.MongoLoggableComponent).some((B)=>B===A)&&A!=="default")throw new H1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${A}`);if(!Object.values(tN.SeverityLevel).some((B)=>B===$))throw new H1.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${$} as a value for ${A}`)}return F}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};jp.DEFAULT_OPTIONS=new hX(Object.entries(jp.OPTIONS).filter(([,F])=>F.default!=null).map(([F,A])=>[F,A.default]))});var kp=Q((Mp)=>{Object.defineProperty(Mp,"__esModule",{value:!0});Mp.ListCollectionsOperation=void 0;var FP=K0(),Lu1=z1(),wu1=W6(),mX=N0();class AP extends wu1.CommandOperation{constructor(F,A,$){super(F,$);if(this.SERVER_COMMAND_RESPONSE_TYPE=FP.CursorResponse,this.options={...$},delete this.options.writeConcern,this.db=F,this.filter=A,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize;this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?FP.ExplainedCursorResponse:FP.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(F){let A={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if((0,Lu1.maxWireVersion)(F)>=9&&this.options.comment!==void 0)A.comment=this.options.comment;return A}handleOk(F){return F}}Mp.ListCollectionsOperation=AP;(0,mX.defineAspects)(AP,[mX.Aspect.READ_OPERATION,mX.Aspect.RETRYABLE,mX.Aspect.CURSOR_CREATING,mX.Aspect.SUPPORTS_RAW_DATA])});var BP=Q((Op)=>{Object.defineProperty(Op,"__esModule",{value:!0});Op.ListCollectionsCursor=void 0;var Iu1=A4(),Cu1=kp(),Nu1=K4();class $P extends Nu1.AbstractCursor{constructor(F,A,$){super(F.client,F.s.namespace,$);this.parent=F,this.filter=A,this.options=$}clone(){return new $P(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new Cu1.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:F,signal:this.signal}),$=await(0,Iu1.executeOperation)(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:$}}}Op.ListCollectionsCursor=$P});var gp=Q((xp)=>{Object.defineProperty(xp,"__esModule",{value:!0});xp.RunCommandCursor=void 0;var J$=$1(),up=A4(),Pu1=QC(),Ru1=BX(),ju1=z1(),Mu1=K4();class fp extends Mu1.AbstractCursor{setComment(F){return this.getMoreOptions.comment=F,this}setMaxTimeMS(F){return this.getMoreOptions.maxAwaitTimeMS=F,this}setBatchSize(F){return this.getMoreOptions.batchSize=F,this}clone(){throw new J$.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(F){throw new J$.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(F,A){throw new J$.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(F){throw new J$.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(F){throw new J$.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(F,A,$={}){super(F.client,(0,ju1.ns)(F.namespace),$);this.getMoreOptions={},this.db=F,this.command=Object.freeze({...A})}async _initialize(F){let A=new Ru1.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:F,readPreference:this.cursorOptions.readPreference}),$=await(0,up.executeOperation)(this.client,A,this.timeoutContext);return{server:A.server,session:F,response:$}}async getMore(F){if(!this.session)throw new J$.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let A=new Pu1.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,up.executeOperation)(this.client,A,this.timeoutContext)}}xp.RunCommandCursor=fp});var cX=Q((_p)=>{Object.defineProperty(_p,"__esModule",{value:!0});_p.ListIndexesOperation=_p.DropIndexOperation=_p.CreateIndexesOperation=void 0;var JP=K0(),Tu1=$1(),XP=z1(),YP=W6(),D2=N0(),ku1=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Ou1(F){return typeof F==="number"||F==="2d"||F==="2dsphere"||F==="text"||F==="geoHaystack"}function Su1(F){return Array.isArray(F)&&F.length===2&&Ou1(F[1])}function uu1(F){let A=new Map,$=!Array.isArray(F)||Su1(F)?[F]:F;for(let B of $)if(typeof B==="string")A.set(B,1);else if(Array.isArray(B))A.set(B[0],B[1]??1);else if(B instanceof Map)for(let[J,X]of B)A.set(J,X);else if((0,XP.isObject)(B))for(let[J,X]of Object.entries(B))A.set(J,X);return A}function fu1(F){let A=Object.entries(F).filter(([$])=>ku1.has($));return Object.fromEntries(A.map(([$,B])=>$==="version"?["v",B]:[$,B]))}class dX extends YP.CommandOperation{constructor(F,A,$,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=JP.MongoDBResponse,this.options=B??{},this.options.collation=void 0,this.collectionName=A,this.indexes=$.map((J)=>{let X=J.key instanceof Map?J.key:new Map(Object.entries(J.key)),Y=J.name??Array.from(X).flat().join("_");return{...fu1(J),name:Y,key:X}}),this.ns=F.s.namespace}static fromIndexDescriptionArray(F,A,$,B){return new dX(F,A,$,B)}static fromIndexSpecification(F,A,$,B={}){let J=uu1($),X={...B,key:J};return new dX(F,A,[X],B)}get commandName(){return"createIndexes"}buildCommandDocument(F){let A=this.options,$=this.indexes,B=(0,XP.maxWireVersion)(F),J={createIndexes:this.collectionName,indexes:$};if(A.commitQuorum!=null){if(B<9)throw new Tu1.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");J.commitQuorum=A.commitQuorum}return J}handleOk(F){return this.indexes.map(($)=>$.name||"")}}_p.CreateIndexesOperation=dX;class DP extends YP.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=JP.MongoDBResponse,this.options=$??{},this.collection=F,this.indexName=A,this.ns=F.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(F){return{dropIndexes:this.collection.collectionName,index:this.indexName}}}_p.DropIndexOperation=DP;class GP extends YP.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=JP.CursorResponse,this.options={...A},delete this.options.writeConcern,this.collectionNamespace=F.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(F){let A=(0,XP.maxWireVersion)(F),$=this.options.batchSize?{batchSize:this.options.batchSize}:{},B={listIndexes:this.collectionNamespace.collection,cursor:$};if(A>=9&&this.options.comment!==void 0)B.comment=this.options.comment;return B}handleOk(F){return F}}_p.ListIndexesOperation=GP;(0,D2.defineAspects)(GP,[D2.Aspect.READ_OPERATION,D2.Aspect.RETRYABLE,D2.Aspect.CURSOR_CREATING,D2.Aspect.SUPPORTS_RAW_DATA]);(0,D2.defineAspects)(dX,[D2.Aspect.WRITE_OPERATION,D2.Aspect.SUPPORTS_RAW_DATA]);(0,D2.defineAspects)(DP,[D2.Aspect.WRITE_OPERATION,D2.Aspect.SUPPORTS_RAW_DATA])});var cp=Q((mp)=>{Object.defineProperty(mp,"__esModule",{value:!0});mp.CreateCollectionOperation=void 0;mp.createCollections=pu1;var vp=Y8(),gu1=K0(),_u1=X$(),yu1=$1(),vu1=l6(),hu1=z1(),mu1=W6(),ZP=A4(),du1=cX(),hp=N0(),cu1=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),lu1="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class lX extends mu1.CommandOperation{constructor(F,A,$={}){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=gu1.MongoDBResponse,this.options=$,this.db=F,this.name=A}get commandName(){return"create"}buildCommandDocument(F,A){let $=([B,J])=>J!=null&&typeof J!=="function"&&!cu1.has(B);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter($))}}handleOk(F){return new _u1.Collection(this.db,this.name,this.options)}}mp.CreateCollectionOperation=lX;async function pu1(F,A,$){let B=vu1.TimeoutContext.create({session:$.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:$.timeoutMS}),J=$.encryptedFields??F.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${F.databaseName}.${A}`];if(J){class Y extends lX{buildCommandDocument(Z,U){if(!Z.description.loadBalanced&&(0,hu1.maxWireVersion)(Z)<vp.MIN_SUPPORTED_QE_WIRE_VERSION)throw new yu1.MongoCompatibilityError(`${lu1} The minimum server version required is ${vp.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(Z,U)}}let D=J.escCollection??`enxcol_.${A}.esc`,G=J.ecocCollection??`enxcol_.${A}.ecoc`;for(let Z of[D,G]){let U=new Y(F,Z,{clusteredIndex:{key:{_id:1},unique:!0},session:$.session});await(0,ZP.executeOperation)(F.client,U,B)}if(!$.encryptedFields)$={...$,encryptedFields:J}}let X=await(0,ZP.executeOperation)(F.client,new lX(F,A,$),B);if(J){let Y=du1.CreateIndexesOperation.fromIndexSpecification(F,A,{__safeContent__:1},{session:$.session});await(0,ZP.executeOperation)(F.client,Y,B)}return X}(0,hp.defineAspects)(lX,[hp.Aspect.WRITE_OPERATION])});var rp=Q((ap)=>{Object.defineProperty(ap,"__esModule",{value:!0});ap.DropDatabaseOperation=ap.DropCollectionOperation=void 0;ap.dropCollections=su1;var au1=iX(),pp=K0(),nu1=K4(),ru1=$1(),tu1=l6(),ip=W6(),lp=A4(),Vz=N0();class pX extends ip.CommandOperation{constructor(F,A,$={}){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=pp.MongoDBResponse,this.options=$,this.name=A}get commandName(){return"drop"}buildCommandDocument(F,A){return{drop:this.name}}handleOk(F){return!0}}ap.DropCollectionOperation=pX;async function su1(F,A,$){let B=tu1.TimeoutContext.create({session:$.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:$.timeoutMS}),J=F.client.s.options.autoEncryption?.encryptedFieldsMap,X=$.encryptedFields??J?.[`${F.databaseName}.${A}`];if(!X&&J)X=(await F.listCollections({name:A},{nameOnly:!1,session:$.session,timeoutContext:new nu1.CursorTimeoutContext(B,Symbol())}).toArray())?.[0]?.options?.encryptedFields;if(X){let Y=X.escCollection||`enxcol_.${A}.esc`,D=X.ecocCollection||`enxcol_.${A}.ecoc`;for(let G of[Y,D]){let Z=new pX(F,G,$);try{await(0,lp.executeOperation)(F.client,Z,B)}catch(U){if(!(U instanceof au1.MongoServerError)||U.code!==ru1.MONGODB_ERROR_CODES.NamespaceNotFound)throw U}}}return await(0,lp.executeOperation)(F.client,new pX(F,A,$),B)}class UP extends ip.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=pp.MongoDBResponse,this.options=A}get commandName(){return"dropDatabase"}buildCommandDocument(F,A){return{dropDatabase:1}}handleOk(F){return!0}}ap.DropDatabaseOperation=UP;(0,Vz.defineAspects)(pX,[Vz.Aspect.WRITE_OPERATION]);(0,Vz.defineAspects)(UP,[Vz.Aspect.WRITE_OPERATION])});var Ai=Q((ep)=>{Object.defineProperty(ep,"__esModule",{value:!0});ep.ProfilingLevelOperation=void 0;var Ff1=J0(),Af1=K0(),tp=$1(),$f1=W6();class sp extends Af1.MongoDBResponse{get was(){return this.get("was",Ff1.BSONType.int,!0)}}class op extends $f1.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=sp,this.options=A}get commandName(){return"profile"}buildCommandDocument(F){return{profile:-1}}handleOk(F){if(F.ok===1){let A=F.was;if(A===0)return"off";if(A===1)return"slow_only";if(A===2)return"all";throw new tp.MongoUnexpectedServerResponseError(`Illegal profiling level value ${A}`)}else throw new tp.MongoUnexpectedServerResponseError("Error with profile command")}}ep.ProfilingLevelOperation=op});var WP=Q((Bi)=>{Object.defineProperty(Bi,"__esModule",{value:!0});Bi.RenameOperation=void 0;var Bf1=K0(),Jf1=X$(),Xf1=z1(),Yf1=W6(),$i=N0();class zP extends Yf1.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=Bf1.MongoDBResponse,this.collection=F,this.newName=A,this.options=$,this.ns=new Xf1.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(F,A){let $=this.collection.namespace,B=this.collection.s.namespace.withCollection(this.newName).toString(),J=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1;return{renameCollection:$,to:B,dropTarget:J}}handleOk(F){return new Jf1.Collection(this.collection.db,this.newName,this.collection.s.options)}}Bi.RenameOperation=zP;(0,$i.defineAspects)(zP,[$i.Aspect.WRITE_OPERATION])});var HP=Q((Yi)=>{Object.defineProperty(Yi,"__esModule",{value:!0});Yi.SetProfilingLevelOperation=Yi.ProfilingLevel=void 0;var Df1=K0(),Gf1=$1(),Zf1=z1(),Uf1=W6(),zf1=new Set(["off","slow_only","all"]);Yi.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class Xi extends Uf1.CommandOperation{constructor(F,A,$){super(F,$);switch(this.SERVER_COMMAND_RESPONSE_TYPE=Df1.MongoDBResponse,this.options=$,A){case Yi.ProfilingLevel.off:this.profile=0;break;case Yi.ProfilingLevel.slowOnly:this.profile=1;break;case Yi.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=A}get commandName(){return"profile"}buildCommandDocument(F){let A=this.level;if(!zf1.has(A))throw new Gf1.MongoInvalidArgumentError(`Profiling level must be one of "${(0,Zf1.enumToString)(Yi.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(F){return this.level}}Yi.SetProfilingLevelOperation=Xi});var zi=Q((Zi)=>{Object.defineProperty(Zi,"__esModule",{value:!0});Zi.DbStatsOperation=void 0;var Wf1=K0(),Hf1=W6(),Gi=N0();class KP extends Hf1.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=Wf1.MongoDBResponse,this.options=A}get commandName(){return"dbStats"}buildCommandDocument(F){let A={dbStats:!0};if(this.options.scale!=null)A.scale=this.options.scale;return A}}Zi.DbStatsOperation=KP;(0,Gi.defineAspects)(KP,[Gi.Aspect.READ_OPERATION])});var Ez=Q((Vi)=>{Object.defineProperty(Vi,"__esModule",{value:!0});Vi.Db=void 0;var Kf1=pI(),Wi=J0(),qf1=s5(),Hi=X$(),Y$=N6(),Qf1=nX(),Vf1=BP(),Ef1=gp(),Ki=$1(),Lf1=cp(),qi=rp(),j8=A4(),wf1=cX(),If1=Ai(),Cf1=dI(),Nf1=WP(),Pf1=BX(),Rf1=HP(),jf1=zi(),Mf1=e9(),Qi=F4(),$4=z1(),Tf1=J3(),kf1=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class M8{constructor(F,A,$){if($=$??{},$=(0,$4.filterOptions)($,kf1),typeof A==="string"&&A.includes("."))throw new Ki.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:$,readPreference:Qi.ReadPreference.fromOptions($),bsonOptions:(0,Wi.resolveBSONOptions)($,F),pkFactory:$?.pkFactory??$4.DEFAULT_PK_FACTORY,readConcern:Mf1.ReadConcern.fromOptions($),writeConcern:Tf1.WriteConcern.fromOptions($),namespace:new $4.MongoDBNamespace(A)},this.client=F}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(F,A){return A=(0,$4.resolveOptions)(this,A),await(0,Lf1.createCollections)(this,F,A)}async command(F,A){return await(0,j8.executeOperation)(this.client,new Pf1.RunCommandOperation(this.s.namespace,F,(0,$4.resolveOptions)(void 0,{...(0,Wi.resolveBSONOptions)(A),timeoutMS:A?.timeoutMS??this.timeoutMS,session:A?.session,readPreference:A?.readPreference,signal:A?.signal})))}aggregate(F=[],A){return new Qf1.AggregationCursor(this.client,this.s.namespace,F,(0,$4.resolveOptions)(this,A))}admin(){return new Kf1.Admin(this)}collection(F,A={}){if(typeof A==="function")throw new Ki.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new Hi.Collection(this,F,(0,$4.resolveOptions)(this,A))}async stats(F){return await(0,j8.executeOperation)(this.client,new jf1.DbStatsOperation(this,(0,$4.resolveOptions)(this,F)))}listCollections(F={},A={}){return new Vf1.ListCollectionsCursor(this,F,(0,$4.resolveOptions)(this,A))}async renameCollection(F,A,$){return await(0,j8.executeOperation)(this.client,new Nf1.RenameOperation(this.collection(F),A,(0,$4.resolveOptions)(void 0,{...$,new_collection:!0,readPreference:Qi.ReadPreference.primary})))}async dropCollection(F,A){return A=(0,$4.resolveOptions)(this,A),await(0,qi.dropCollections)(this,F,A)}async dropDatabase(F){return await(0,j8.executeOperation)(this.client,new qi.DropDatabaseOperation(this,(0,$4.resolveOptions)(this,F)))}async collections(F){return F=(0,$4.resolveOptions)(this,F),(await this.listCollections({},{...F,nameOnly:!0}).toArray()).filter(({name:$})=>!$.includes("$")).map(({name:$})=>new Hi.Collection(this,$,this.s.options))}async createIndex(F,A,$){return(await(0,j8.executeOperation)(this.client,wf1.CreateIndexesOperation.fromIndexSpecification(this,F,A,$)))[0]}async removeUser(F,A){return await(0,j8.executeOperation)(this.client,new Cf1.RemoveUserOperation(this,F,(0,$4.resolveOptions)(this,A)))}async setProfilingLevel(F,A){return await(0,j8.executeOperation)(this.client,new Rf1.SetProfilingLevelOperation(this,F,(0,$4.resolveOptions)(this,A)))}async profilingLevel(F){return await(0,j8.executeOperation)(this.client,new If1.ProfilingLevelOperation(this,(0,$4.resolveOptions)(this,F)))}async indexInformation(F,A){return await this.collection(F).indexInformation((0,$4.resolveOptions)(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new qf1.ChangeStream(this,F,(0,$4.resolveOptions)(this,A))}runCursorCommand(F,A){return new Ef1.RunCommandCursor(this,F,A)}}Vi.Db=M8;M8.SYSTEM_NAMESPACE_COLLECTION=Y$.SYSTEM_NAMESPACE_COLLECTION;M8.SYSTEM_INDEX_COLLECTION=Y$.SYSTEM_INDEX_COLLECTION;M8.SYSTEM_PROFILE_COLLECTION=Y$.SYSTEM_PROFILE_COLLECTION;M8.SYSTEM_USER_COLLECTION=Y$.SYSTEM_USER_COLLECTION;M8.SYSTEM_COMMAND_COLLECTION=Y$.SYSTEM_COMMAND_COLLECTION;M8.SYSTEM_JS_COLLECTION=Y$.SYSTEM_JS_COLLECTION});var Ci=Q((wi)=>{Object.defineProperty(wi,"__esModule",{value:!0});wi.MongoDBAWS=void 0;var qP=J0(),QP=$2(),G$=$1(),D$=z1(),Of1=W8(),VP=FN(),Sf1=RU(),uf1=y2(),ff1=110,EP={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class Li extends Of1.AuthProvider{constructor(F){super();this.credentialProvider=F,this.credentialFetcher=VP.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new VP.AWSSDKCredentialProvider(F):new VP.LegacyAWSTemporaryCredentialProvider}async auth(F){let{connection:A}=F;if(!F.credentials)throw new G$.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in QP.aws4)throw QP.aws4.kModuleError;let{sign:$}=QP.aws4;if((0,D$.maxWireVersion)(A)<9)throw new G$.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");if(!F.credentials.username)F.credentials=await xf1(F.credentials,this.credentialFetcher);let{credentials:B}=F,J=B.username,X=B.password,Y=B.mechanismProperties.AWS_SESSION_TOKEN,D=J&&X&&Y?{accessKeyId:J,secretAccessKey:X,sessionToken:Y}:J&&X?{accessKeyId:J,secretAccessKey:X}:void 0,G=B.source,Z=await(0,D$.randomBytes)(32),U={saslStart:1,mechanism:"MONGODB-AWS",payload:qP.serialize({r:Z,p:ff1},EP)},z=await A.command((0,D$.ns)(`${G}.$cmd`),U,void 0),W=qP.deserialize(z.payload.buffer,EP),H=W.h,K=W.s.buffer;if(K.length!==64)throw new G$.MongoRuntimeError(`Invalid server nonce length ${K.length}, expected 64`);if(!D$.ByteUtils.equals(K.subarray(0,Z.byteLength),Z))throw new G$.MongoRuntimeError("Server nonce does not begin with client nonce");if(H.length<1||H.length>255||H.indexOf("..")!==-1)throw new G$.MongoRuntimeError(`Server returned an invalid host: "${H}"`);let q="Action=GetCallerIdentity&Version=2011-06-15",V=$({method:"POST",host:H,region:bf1(W.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":q.length,"X-MongoDB-Server-Nonce":D$.ByteUtils.toBase64(K),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:q},D),E={a:V.headers.Authorization,d:V.headers["X-Amz-Date"]};if(Y)E.t=Y;let L={saslContinue:1,conversationId:z.conversationId,payload:qP.serialize(E,EP)};await A.command((0,D$.ns)(`${G}.$cmd`),L,void 0)}}wi.MongoDBAWS=Li;async function xf1(F,A){function $(J){if(!J.AccessKeyId||!J.SecretAccessKey)throw new G$.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new Sf1.MongoCredentials({username:J.AccessKeyId,password:J.SecretAccessKey,source:F.source,mechanism:uf1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:J.Token}})}let B=await A.getCredentials();return $(B)}function bf1(F){let A=F.split(".");if(A.length===1||A[1]==="amazonaws")return"us-east-1";return A[1]}});var Ri=Q((Pi)=>{Object.defineProperty(Pi,"__esModule",{value:!0});Pi.finishCommandDocument=gf1;Pi.startCommandDocument=_f1;var Z$=J0(),Ni=y2();function gf1(F,A){if(A!=null)return{saslContinue:1,conversationId:A,payload:new Z$.Binary(Z$.BSON.serialize({jwt:F}))};return{saslStart:1,mechanism:Ni.AuthMechanism.MONGODB_OIDC,payload:new Z$.Binary(Z$.BSON.serialize({jwt:F}))}}function _f1(F){let A={};if(F.username)A.n=F.username;return{saslStart:1,autoAuthorize:1,mechanism:Ni.AuthMechanism.MONGODB_OIDC,payload:new Z$.Binary(Z$.BSON.serialize(A))}}});var IP=Q((Ti)=>{Object.defineProperty(Ti,"__esModule",{value:!0});Ti.CallbackWorkflow=Ti.AUTOMATED_TIMEOUT_MS=Ti.HUMAN_TIMEOUT_MS=void 0;var hf1=x("timers/promises"),mf1=$1(),ji=z1(),LP=Ri();Ti.HUMAN_TIMEOUT_MS=300000;Ti.AUTOMATED_TIMEOUT_MS=60000;var df1=["accessToken","expiresInSeconds","refreshToken"],cf1="User provided OIDC callbacks must return a valid object with an accessToken.",wP=100;class Mi{constructor(F,A){this.cache=F,this.callback=this.withLock(A),this.lastExecutionTime=Date.now()-wP}async speculativeAuth(F,A){if(this.cache.hasAccessToken){let $=this.cache.getAccessToken();F.accessToken=$;let B=(0,LP.finishCommandDocument)($);return B.db=A.source,{speculativeAuthenticate:B}}return{}}async reauthenticate(F,A){if(this.cache.hasAccessToken)if(F.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete F.accessToken;else F.accessToken=this.cache.getAccessToken();await this.execute(F,A)}async startAuthentication(F,A,$){let B;if($?.speculativeAuthenticate)B=$.speculativeAuthenticate;else B=await F.command((0,ji.ns)(A.source),(0,LP.startCommandDocument)(A),void 0);return B}async finishAuthentication(F,A,$,B){await F.command((0,ji.ns)(A.source),(0,LP.finishCommandDocument)($,B),void 0)}async executeAndValidateCallback(F){let A=await this.callback(F);if(lf1(A))throw new mf1.MongoMissingCredentialsError(cf1);return A}withLock(F){let A=Promise.resolve();return async($)=>{return await A,A=A.catch(()=>null).then(async()=>{let B=Date.now()-this.lastExecutionTime;if(B<=wP)await(0,hf1.setTimeout)(wP-B,{signal:$.timeoutContext});return this.lastExecutionTime=Date.now(),await F($)}),await A}}}Ti.CallbackWorkflow=Mi;function lf1(F){if(F==null||typeof F!=="object")return!0;if(!("accessToken"in F))return!0;return!Object.getOwnPropertyNames(F).every((A)=>df1.includes(A))}});var PP=Q((ui)=>{Object.defineProperty(ui,"__esModule",{value:!0});ui.AutomatedCallbackWorkflow=void 0;var CP=$1(),Oi=l6(),af1=Lz(),NP=IP();class Si extends NP.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let B=this.cache.getAccessToken();if(!F.accessToken)F.accessToken=B;try{return await this.finishAuthentication(F,A,B)}catch(J){if(J instanceof CP.MongoError&&J.code===CP.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(F,A);else throw J}}let $=await this.fetchAccessToken(A);this.cache.put($),F.accessToken=$.accessToken,await this.finishAuthentication(F,A,$.accessToken)}async fetchAccessToken(F){let A=new AbortController,$={timeoutContext:A.signal,version:af1.OIDC_VERSION};if(F.username)$.username=F.username;if(F.mechanismProperties.TOKEN_RESOURCE)$.tokenAudience=F.mechanismProperties.TOKEN_RESOURCE;let B=Oi.Timeout.expires(NP.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback($),B])}catch(J){if(Oi.TimeoutError.is(J))throw A.abort(),new CP.MongoOIDCError(`OIDC callback timed out after ${NP.AUTOMATED_TIMEOUT_MS}ms.`);throw J}finally{B.clear()}}}ui.AutomatedCallbackWorkflow=Si});var _i=Q((bi)=>{Object.defineProperty(bi,"__esModule",{value:!0});bi.callback=void 0;var xi=BN(),RP=$1(),nf1=z1(),rf1=Object.freeze({Metadata:"true",Accept:"application/json"}),tf1="Azure endpoint did not return a value with only access_token and expires_in properties",sf1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",of1=async(F)=>{let{tokenAudience:A,username:$}=F;if(!A)throw new RP.MongoAzureError(sf1);let B=await ef1(A,$);if(!Fx1(B))throw new RP.MongoAzureError(tf1);return B};bi.callback=of1;async function ef1(F,A){let $=new URL(xi.AZURE_BASE_URL);(0,xi.addAzureParams)($,F,A);let B=await(0,nf1.get)($,{headers:rf1});if(B.status!==200)throw new RP.MongoAzureError(`Status code ${B.status} returned from the Azure endpoint. Response body: ${B.body}`);let J=JSON.parse(B.body);return{accessToken:J.access_token,expiresInSeconds:Number(J.expires_in)}}function Fx1(F){if(F==null||typeof F!=="object")return!1;return"accessToken"in F&&typeof F.accessToken==="string"&&"expiresInSeconds"in F&&typeof F.expiresInSeconds==="number"}});var mi=Q((vi)=>{Object.defineProperty(vi,"__esModule",{value:!0});vi.callback=void 0;var yi=$1(),Ax1=z1(),$x1="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",Bx1=Object.freeze({"Metadata-Flavor":"Google"}),Jx1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",Xx1=async(F)=>{let A=F.tokenAudience;if(!A)throw new yi.MongoGCPError(Jx1);return await Yx1(A)};vi.callback=Xx1;async function Yx1(F){let A=new URL($x1);A.searchParams.append("audience",F);let $=await(0,Ax1.get)(A,{headers:Bx1});if($.status!==200)throw new yi.MongoGCPError(`Status code ${$.status} returned from the GCP endpoint. Response body: ${$.body}`);return{accessToken:$.body}}});var ii=Q((li)=>{Object.defineProperty(li,"__esModule",{value:!0});li.callback=void 0;var Dx1=x("fs/promises"),Gx1="/var/run/secrets/kubernetes.io/serviceaccount/token",di="AZURE_FEDERATED_TOKEN_FILE",ci="AWS_WEB_IDENTITY_TOKEN_FILE",Zx1=async()=>{let F;if(process.env[di])F=process.env[di];else if(process.env[ci])F=process.env[ci];else F=Gx1;return{accessToken:await(0,Dx1.readFile)(F,"utf8")}};li.callback=Zx1});var jP=Q((ni)=>{Object.defineProperty(ni,"__esModule",{value:!0});ni.TokenCache=void 0;var Ux1=$1();class wz extends Ux1.MongoDriverError{}class ai{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new wz("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new wz("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new wz("Attempted to get IDP information when none exists.");return this.idpInfo}put(F,A){if(this.accessToken=F.accessToken,this.refreshToken=F.refreshToken,this.expiresInSeconds=F.expiresInSeconds,A)this.idpInfo=A}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}ni.TokenCache=ai});var oi=Q((ti)=>{Object.defineProperty(ti,"__esModule",{value:!0});ti.callback=void 0;var zx1=x("fs"),Wx1=$1(),Hx1="OIDC_TOKEN_FILE must be set in the environment.",Kx1=async()=>{let F=process.env.OIDC_TOKEN_FILE;if(!F)throw new Wx1.MongoAWSError(Hx1);return{accessToken:await zx1.promises.readFile(F,"utf8")}};ti.callback=Kx1});var Lz=Q(($a)=>{Object.defineProperty($a,"__esModule",{value:!0});$a.MongoDBOIDC=$a.OIDC_WORKFLOWS=$a.OIDC_VERSION=void 0;var Fa=$1(),qx1=W8(),Iz=PP(),Qx1=_i(),Vx1=mi(),Ex1=ii(),Cz=jP(),Lx1=oi(),wx1="AuthContext must provide credentials.";$a.OIDC_VERSION=1;$a.OIDC_WORKFLOWS=new Map;$a.OIDC_WORKFLOWS.set("test",()=>new Iz.AutomatedCallbackWorkflow(new Cz.TokenCache,Lx1.callback));$a.OIDC_WORKFLOWS.set("azure",()=>new Iz.AutomatedCallbackWorkflow(new Cz.TokenCache,Qx1.callback));$a.OIDC_WORKFLOWS.set("gcp",()=>new Iz.AutomatedCallbackWorkflow(new Cz.TokenCache,Vx1.callback));$a.OIDC_WORKFLOWS.set("k8s",()=>new Iz.AutomatedCallbackWorkflow(new Cz.TokenCache,Ex1.callback));class Aa extends qx1.AuthProvider{constructor(F){super();if(!F)throw new Fa.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=F}async auth(F){let{connection:A,reauthenticating:$,response:B}=F;if(B?.speculativeAuthenticate?.done&&!$)return;let J=ei(F);if($)await this.workflow.reauthenticate(A,J);else await this.workflow.execute(A,J,B)}async prepare(F,A){let{connection:$}=A,B=ei(A),J=await this.workflow.speculativeAuth($,B);return{...F,...J}}}$a.MongoDBOIDC=Aa;function ei(F){let{credentials:A}=F;if(!A)throw new Fa.MongoMissingCredentialsError(wx1);return A}});var Ga=Q((Ya)=>{Object.defineProperty(Ya,"__esModule",{value:!0});Ya.HumanCallbackWorkflow=void 0;var Cx1=J0(),tX=$1(),Ja=l6(),Nx1=Lz(),MP=IP();class Xa extends MP.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let Y=this.cache.getAccessToken();F.accessToken=Y;try{return await this.finishAuthentication(F,A,Y)}catch(D){if(D instanceof tX.MongoError&&D.code===tX.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete F.accessToken,await this.execute(F,A);else throw D}}if(this.cache.hasRefreshToken){let Y=this.cache.getRefreshToken(),D=await this.fetchAccessToken(this.cache.getIdpInfo(),A,Y);this.cache.put(D),F.accessToken=D.accessToken;try{return await this.finishAuthentication(F,A,D.accessToken)}catch(G){if(G instanceof tX.MongoError&&G.code===tX.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete F.accessToken,await this.execute(F,A);else throw G}}let $=await this.startAuthentication(F,A),B=$.conversationId,J=Cx1.BSON.deserialize($.payload.buffer),X=await this.fetchAccessToken(J,A);return this.cache.put(X,J),F.accessToken=X.accessToken,await this.finishAuthentication(F,A,X.accessToken,B)}async fetchAccessToken(F,A,$){let B=new AbortController,J={timeoutContext:B.signal,version:Nx1.OIDC_VERSION,idpInfo:F};if(A.username)J.username=A.username;if($)J.refreshToken=$;let X=Ja.Timeout.expires(MP.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(J),X])}catch(Y){if(Ja.TimeoutError.is(Y))throw B.abort(),new tX.MongoOIDCError(`OIDC callback timed out after ${MP.HUMAN_TIMEOUT_MS}ms.`);throw Y}finally{X.clear()}}}Ya.HumanCallbackWorkflow=Xa});var Wa=Q((Ua)=>{Object.defineProperty(Ua,"__esModule",{value:!0});Ua.Plain=void 0;var Px1=J0(),Rx1=$1(),jx1=z1(),Mx1=W8();class Za extends Mx1.AuthProvider{async auth(F){let{connection:A,credentials:$}=F;if(!$)throw new Rx1.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:B,password:J}=$,Y={saslStart:1,mechanism:"PLAIN",payload:new Px1.Binary(Buffer.from(`\x00${B}\x00${J}`)),autoAuthorize:1};await A.command((0,jx1.ns)("$external.$cmd"),Y,void 0)}}Ua.Plain=Za});var Qa=Q((PK0,qa)=>{var Ha=(F)=>F.codePointAt(0),Tx1=(F)=>F[0],kx1=(F)=>F[F.length-1];function Ka(F){let A=[],$=F.length;for(let B=0;B<$;B+=1){let J=F.charCodeAt(B);if(J>=55296&&J<=56319&&$>B+1){let X=F.charCodeAt(B+1);if(X>=56320&&X<=57343){A.push((J-55296)*1024+X-56320+65536),B+=1;continue}}A.push(J)}return A}function sX({unassigned_code_points:F,commonly_mapped_to_nothing:A,non_ASCII_space_characters:$,prohibited_characters:B,bidirectional_r_al:J,bidirectional_l:X},Y,D={}){let G=$,Z=A;if(typeof Y!=="string")throw TypeError("Expected string.");if(Y.length===0)return"";let U=Ka(Y).map((L)=>G.get(L)?32:L).filter((L)=>!Z.get(L)),z=String.fromCodePoint.apply(null,U).normalize("NFKC"),W=Ka(z);if(W.some((L)=>B.get(L)))throw Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(D.allowUnassigned!==!0){if(W.some((w)=>F.get(w)))throw Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}let K=W.some((L)=>J.get(L)),q=W.some((L)=>X.get(L));if(K&&q)throw Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let V=J.get(Ha(Tx1(z))),E=J.get(Ha(kx1(z)));if(K&&!(V&&E))throw Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return z}sX.saslprep=sX;sX.default=sX;qa.exports=sX});var La=Q((RK0,Ea)=>{Ea.exports=C7;function C7(F,A){if(!(this instanceof C7))return new C7(F,A);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=F||1024,this.deduplicate=A?A.deduplicate:null,this.zeros=this.deduplicate?Nz(this.deduplicate.length):null}C7.prototype.updated=function(F){while(this.deduplicate&&F.buffer[F.deduplicate]===this.deduplicate[F.deduplicate])if(F.deduplicate++,F.deduplicate===this.deduplicate.length){if(F.deduplicate=0,F.buffer.equals&&F.buffer.equals(this.deduplicate))F.buffer=this.deduplicate;break}if(F.updated||!this.updates)return;F.updated=!0,this.updates.push(F)};C7.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var F=this.updates.pop();return F.updated=!1,F};C7.prototype._array=function(F,A){if(F>=this.maxPages){if(A)return;Ox1(this,F)}fx1(F,this.path);var $=this.pages;for(var B=this.level;B>0;B--){var J=this.path[B],X=$[J];if(!X){if(A)return;X=$[J]=Array(32768)}$=X}return $};C7.prototype.get=function(F,A){var $=this._array(F,A),B=this.path[0],J=$&&$[B];if(!J&&!A){if(J=$[B]=new Va(F,Nz(this.pageSize)),F>=this.length)this.length=F+1}if(J&&J.buffer===this.deduplicate&&this.deduplicate&&!A)J.buffer=ux1(J.buffer),J.deduplicate=0;return J};C7.prototype.set=function(F,A){var $=this._array(F,!1),B=this.path[0];if(F>=this.length)this.length=F+1;if(!A||this.zeros&&A.equals&&A.equals(this.zeros)){$[B]=void 0;return}if(this.deduplicate&&A.equals&&A.equals(this.deduplicate))A=this.deduplicate;var J=$[B],X=Sx1(A,this.pageSize);if(J)J.buffer=X;else $[B]=new Va(F,X)};C7.prototype.toBuffer=function(){var F=Array(this.length),A=Nz(this.pageSize),$=0;while($<F.length){var B=this._array($,!0);for(var J=0;J<32768&&$<F.length;J++)F[$++]=B&&B[J]?B[J].buffer:A}return Buffer.concat(F)};function Ox1(F,A){while(F.maxPages<A){var $=F.pages;F.pages=Array(32768),F.pages[0]=$,F.level++,F.maxPages*=32768}}function Sx1(F,A){if(F.length===A)return F;if(F.length>A)return F.slice(0,A);var $=Nz(A);return F.copy($),$}function Nz(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A}function ux1(F){var A=Buffer.allocUnsafe?Buffer.allocUnsafe(F.length):new Buffer(F.length);return F.copy(A),A}function Va(F,A){this.offset=F*A.length,this.buffer=A,this.updated=!1,this.deduplicate=0}function fx1(F,A){F=(F-(A[0]=F&32767))/32768,F=(F-(A[1]=F&32767))/32768,A[3]=(F-(A[2]=F&32767))/32768&32767}});var Ia=Q((jK0,wa)=>{var xx1=La();wa.exports=T8;function T8(F){if(!(this instanceof T8))return new T8(F);if(!F)F={};if(Buffer.isBuffer(F))F={buffer:F};if(this.pageOffset=F.pageOffset||0,this.pageSize=F.pageSize||1024,this.pages=F.pages||xx1(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!gx1(this.pageSize))throw Error("The page size should be a power of two");if(this._trackUpdates=!!F.trackUpdates,this._pageMask=this.pageSize-1,F.buffer){for(var A=0;A<F.buffer.length;A+=this.pageSize)this.pages.set(A/this.pageSize,F.buffer.slice(A,A+this.pageSize));this.byteLength=F.buffer.length,this.length=8*this.byteLength}}T8.prototype.get=function(F){var A=F&7,$=(F-A)/8;return!!(this.getByte($)&128>>A)};T8.prototype.getByte=function(F){var A=F&this._pageMask,$=(F-A)/this.pageSize,B=this.pages.get($,!0);return B?B.buffer[A+this.pageOffset]:0};T8.prototype.set=function(F,A){var $=F&7,B=(F-$)/8,J=this.getByte(B);return this.setByte(B,A?J|128>>$:J&(255^128>>$))};T8.prototype.toBuffer=function(){var F=bx1(this.pages.length*this.pageSize);for(var A=0;A<this.pages.length;A++){var $=this.pages.get(A,!0),B=A*this.pageSize;if($)$.buffer.copy(F,B,this.pageOffset,this.pageOffset+this.pageSize)}return F};T8.prototype.setByte=function(F,A){var $=F&this._pageMask,B=(F-$)/this.pageSize,J=this.pages.get(B,!1);if($+=this.pageOffset,J.buffer[$]===A)return!1;if(J.buffer[$]=A,F>=this.byteLength)this.byteLength=F+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated(J);return!0};function bx1(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A}function gx1(F){return!(F&F-1)}});var Ca=Q((oX)=>{var _x1=oX&&oX.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(oX,"__esModule",{value:!0});oX.createMemoryCodePoints=vx1;var yx1=_x1(Ia());function vx1(F){let A=0;function $(){let Z=F.readUInt32BE(A);A+=4;let U=F.slice(A,A+Z);return A+=Z,(0,yx1.default)({buffer:U})}let B=$(),J=$(),X=$(),Y=$(),D=$(),G=$();return{unassigned_code_points:B,commonly_mapped_to_nothing:J,non_ASCII_space_characters:X,prohibited_characters:Y,bidirectional_r_al:D,bidirectional_l:G}}});var Pa=Q((Na)=>{Object.defineProperty(Na,"__esModule",{value:!0});var hx1=x("zlib");Na.default=(0,hx1.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var kP=Q((TP,ja)=>{var Ra=TP&&TP.__importDefault||function(F){return F&&F.__esModule?F:{default:F}},dx1=Ra(Qa()),cx1=Ca(),lx1=Ra(Pa()),px1=(0,cx1.createMemoryCodePoints)(lx1.default);function eX(F,A){return(0,dx1.default)(px1,F,A)}eX.saslprep=eX;eX.default=eX;ja.exports=eX});var _a=Q((ba)=>{Object.defineProperty(ba,"__esModule",{value:!0});ba.ScramSHA256=ba.ScramSHA1=void 0;var ix1=kP(),o5=x("crypto"),OP=J0(),G2=$1(),jz=z1(),ax1=W8(),Ma=y2();class uP extends ax1.AuthProvider{constructor(F){super();this.cryptoMethod=F||"sha1"}async prepare(F,A){let $=this.cryptoMethod,B=A.credentials;if(!B)throw new G2.MongoMissingCredentialsError("AuthContext must provide credentials.");let J=await(0,jz.randomBytes)(24);return A.nonce=J,{...F,speculativeAuthenticate:{...Sa($,B,J),db:B.source}}}async auth(F){let{reauthenticating:A,response:$}=F;if($?.speculativeAuthenticate&&!A)return await ua(this.cryptoMethod,$.speculativeAuthenticate,F);return await nx1(this.cryptoMethod,F)}}function ka(F){return F.replace("=","=3D").replace(",","=2C")}function Oa(F,A){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(F,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(A.toString("base64"),"utf8")])}function Sa(F,A,$){let B=ka(A.username);return{saslStart:1,mechanism:F==="sha1"?Ma.AuthMechanism.MONGODB_SCRAM_SHA1:Ma.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new OP.Binary(Buffer.concat([Buffer.from("n,,","utf8"),Oa(B,$)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function nx1(F,A){let{connection:$,credentials:B}=A;if(!B)throw new G2.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!A.nonce)throw new G2.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let J=A.nonce,X=B.source,Y=Sa(F,B,J),D=await $.command((0,jz.ns)(`${X}.$cmd`),Y,void 0);await ua(F,D,A)}async function ua(F,A,$){let{connection:B,credentials:J}=$;if(!J)throw new G2.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!$.nonce)throw new G2.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let X=$.nonce,Y=J.source,D=ka(J.username),G=J.password,Z=F==="sha256"?(0,ix1.saslprep)(G):rx1(D,G),U=Buffer.isBuffer(A.payload)?new OP.Binary(A.payload):A.payload,z=Ta(U),W=parseInt(z.i,10);if(W&&W<4096)throw new G2.MongoRuntimeError(`Server returned an invalid iteration count ${W}`);let{s:H,r:K}=z;if(K.startsWith("nonce"))throw new G2.MongoRuntimeError(`Server returned an invalid nonce: ${K}`);let q=`c=biws,r=${K}`,V=Fb1(Z,Buffer.from(H,"base64"),W,F),E=Pz(F,V,"Client Key"),L=Pz(F,V,"Server Key"),w=sx1(F,E),I=[Oa(D,X),U.toString("utf8"),q].join(","),P=Pz(F,w,I),M=`p=${tx1(E,P)}`,u=[q,M].join(","),g=Pz(F,L,I),S={saslContinue:1,conversationId:A.conversationId,payload:new OP.Binary(Buffer.from(u))},O=await B.command((0,jz.ns)(`${Y}.$cmd`),S,void 0),p=Ta(O.payload);if(!Ab1(Buffer.from(p.v,"base64"),g))throw new G2.MongoRuntimeError("Server returned an invalid signature");if(O.done!==!1)return;let m={saslContinue:1,conversationId:O.conversationId,payload:Buffer.alloc(0)};await B.command((0,jz.ns)(`${Y}.$cmd`),m,void 0)}function Ta(F){let A=F.toString("utf8"),$={},B=A.split(",");for(let J=0;J<B.length;J++){let X=(B[J].match(/^([^=]*)=(.*)$/)??[]).slice(1);$[X[0]]=X[1]}return $}function rx1(F,A){if(typeof F!=="string")throw new G2.MongoInvalidArgumentError("Username must be a string");if(typeof A!=="string")throw new G2.MongoInvalidArgumentError("Password must be a string");if(A.length===0)throw new G2.MongoInvalidArgumentError("Password cannot be empty");let $;try{$=o5.createHash("md5")}catch(B){if(o5.getFips())throw Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw B}return $.update(`${F}:mongo:${A}`,"utf8"),$.digest("hex")}function tx1(F,A){if(!Buffer.isBuffer(F))F=Buffer.from(F);if(!Buffer.isBuffer(A))A=Buffer.from(A);let $=Math.max(F.length,A.length),B=[];for(let J=0;J<$;J+=1)B.push(F[J]^A[J]);return Buffer.from(B).toString("base64")}function sx1(F,A){return o5.createHash(F).update(A).digest()}function Pz(F,A,$){return o5.createHmac(F,A).update($).digest()}var Rz={},SP=0;function ox1(){Rz={},SP=0}var ex1={sha256:32,sha1:20};function Fb1(F,A,$,B){let J=[F,A.toString("base64"),$].join("_");if(Rz[J]!=null)return Rz[J];let X=o5.pbkdf2Sync(F,A,$,ex1[B],B);if(SP>=200)ox1();return Rz[J]=X,SP+=1,X}function Ab1(F,A){if(F.length!==A.length)return!1;if(typeof o5.timingSafeEqual==="function")return o5.timingSafeEqual(F,A);let $=0;for(let B=0;B<F.length;B++)$|=F[B]^A[B];return $===0}class fa extends uP{constructor(){super("sha1")}}ba.ScramSHA1=fa;class xa extends uP{constructor(){super("sha256")}}ba.ScramSHA256=xa});var ca=Q((ma)=>{Object.defineProperty(ma,"__esModule",{value:!0});ma.X509=void 0;var ya=$1(),Bb1=z1(),Jb1=W8();class ha extends Jb1.AuthProvider{async prepare(F,A){let{credentials:$}=A;if(!$)throw new ya.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...F,speculativeAuthenticate:va($)}}async auth(F){let{connection:A,credentials:$}=F;if(!$)throw new ya.MongoMissingCredentialsError("AuthContext must provide credentials.");if(F.response?.speculativeAuthenticate)return;await A.command((0,Bb1.ns)("$external.$cmd"),va($),void 0)}}ma.X509=ha;function va(F){let A={authenticate:1,mechanism:"MONGODB-X509"};if(F.username)A.user=F.username;return A}});var xP=Q((na)=>{Object.defineProperty(na,"__esModule",{value:!0});na.MongoClientAuthProviders=void 0;var Xb1=NU(),Yb1=Ci(),ia=Lz(),Db1=PP(),Gb1=Ga(),la=jP(),Zb1=Wa(),k8=y2(),pa=_a(),Ub1=ca(),fP=$1(),zb1=new Map([[k8.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:F})=>new Yb1.MongoDBAWS(F)],[k8.AuthMechanism.MONGODB_CR,()=>{throw new fP.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[k8.AuthMechanism.MONGODB_GSSAPI,()=>new Xb1.GSSAPI],[k8.AuthMechanism.MONGODB_OIDC,(F)=>new ia.MongoDBOIDC(Wb1(F))],[k8.AuthMechanism.MONGODB_PLAIN,()=>new Zb1.Plain],[k8.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new pa.ScramSHA1],[k8.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new pa.ScramSHA256],[k8.AuthMechanism.MONGODB_X509,()=>new Ub1.X509]]);class aa{constructor(){this.existingProviders=new Map}getOrCreateProvider(F,A){let $=this.existingProviders.get(F);if($)return $;let B=zb1.get(F);if(!B)throw new fP.MongoInvalidArgumentError(`authMechanism ${F} not supported`);let J=B(A);return this.existingProviders.set(F,J),J}}na.MongoClientAuthProviders=aa;function Wb1(F){if(F.OIDC_HUMAN_CALLBACK)return new Gb1.HumanCallbackWorkflow(new la.TokenCache,F.OIDC_HUMAN_CALLBACK);else if(F.OIDC_CALLBACK)return new Db1.AutomatedCallbackWorkflow(new la.TokenCache,F.OIDC_CALLBACK);else{let A=F.ENVIRONMENT,$=ia.OIDC_WORKFLOWS.get(A)?.();if(!$)throw new fP.MongoInvalidArgumentError(`Could not load workflow for environment ${F.ENVIRONMENT}`);return $}}});var gP=Q((ta)=>{Object.defineProperty(ta,"__esModule",{value:!0});ta.ClientBulkWriteOperation=void 0;var Hb1=K0(),Kb1=z1(),qb1=W6(),e5=N0();class bP extends qb1.CommandOperation{get commandName(){return"bulkWrite"}constructor(F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=Hb1.ClientBulkWriteCursorResponse,this.commandBuilder=F,this.options=A,this.ns=new Kb1.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(F){return F}buildCommandDocument(F,A){let $=this.commandBuilder.buildBatch(F.description.maxMessageSizeBytes,F.description.maxWriteBatchSize,F.description.maxBsonObjectSize);if(!this.canRetryWrite)this.options.willRetryWrite=!1;return $}}ta.ClientBulkWriteOperation=bP;(0,e5.defineAspects)(bP,[e5.Aspect.WRITE_OPERATION,e5.Aspect.SKIP_COLLATION,e5.Aspect.CURSOR_CREATING,e5.Aspect.RETRYABLE,e5.Aspect.COMMAND_BATCHING,e5.Aspect.SUPPORTS_RAW_DATA])});var An=Q((ea)=>{Object.defineProperty(ea,"__esModule",{value:!0});ea.ClientBulkWriteCursor=void 0;var Qb1=gP(),Vb1=A4(),oa=z1(),Eb1=K4();class _P extends Eb1.AbstractCursor{constructor(F,A,$={}){super(F,new oa.MongoDBNamespace("admin","$cmd"),$);this.commandBuilder=A,this.clientBulkWriteOptions=$}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let F=(0,oa.mergeOptions)({},this.clientBulkWriteOptions);return delete F.session,new _P(this.client,this.commandBuilder,{...F})}async _initialize(F){let A=new Qb1.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:F}),$=await(0,Vb1.executeOperation)(this.client,A,this.timeoutContext);return this.cursorResponse=$,{server:A.server,session:F,response:$}}}ea.ClientBulkWriteCursor=_P});var Kn=Q((Gn)=>{Object.defineProperty(Gn,"__esModule",{value:!0});Gn.buildReplaceOneOperation=Gn.buildUpdateManyOperation=Gn.buildUpdateOneOperation=Gn.buildDeleteManyOperation=Gn.buildDeleteOneOperation=Gn.buildInsertOneOperation=Gn.ClientBulkWriteCommandBuilder=void 0;Gn.buildOperation=hP;var yP=J0(),$n=wX(),FY=$1(),Jn=OA(),mP=z1(),Bn=1000;class Xn{constructor(F,A,$){this.models=F,this.options=A,this.pkFactory=$??mP.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(F,A,$){this.isBatchRetryable=!0;let B=0,J=0,X=this.baseCommand(),Y=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let D=this.models[this.currentModelIndex],G=D.namespace,Z=Y.get(G);if(D.name==="deleteMany"||D.name==="updateMany")this.isBatchRetryable=!1;if(Z!=null){let U=hP(D,Z,this.pkFactory,this.options),z;try{z=yP.BSON.serialize(U)}catch(W){throw new FY.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:W})}if(vP("ops",z,$),B+z.length<F&&X.ops.documents.length<A)B=Bn+X.ops.push(U,z),this.currentModelIndex++;else break}else{Y.set(G,J);let U={ns:G},z=hP(D,J,this.pkFactory,this.options),W,H;try{W=yP.BSON.serialize(U),H=yP.BSON.serialize(z)}catch(K){throw new FY.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:K})}if(vP("nsInfo",W,$),vP("ops",H,$),B+W.length+H.length<F&&X.ops.documents.length<A)B=Bn+X.nsInfo.push(U,W)+X.ops.push(z,H),J++,this.currentModelIndex++;else break}}return this.lastOperations=X.ops.documents,X}baseCommand(){let F={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new $n.DocumentSequence("ops"),nsInfo:new $n.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)F.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)F.let=this.options.let;if(this.options.comment!==void 0)F.comment=this.options.comment;return F}}Gn.ClientBulkWriteCommandBuilder=Xn;function vP(F,A,$){if(A.length>$)throw new FY.MongoInvalidArgumentError(`Client bulk write operation ${F} of length ${A.length} exceeds the max bson object size of ${$}`)}var Lb1=(F,A,$)=>{let B={insert:A,document:F.document};return B.document._id=F.document._id??$.createPk(),B};Gn.buildInsertOneOperation=Lb1;var wb1=(F,A)=>{return Yn(F,A,!1)};Gn.buildDeleteOneOperation=wb1;var Ib1=(F,A)=>{return Yn(F,A,!0)};Gn.buildDeleteManyOperation=Ib1;function Yn(F,A,$){let B={delete:A,multi:$,filter:F.filter};if(F.hint)B.hint=F.hint;if(F.collation)B.collation=F.collation;return B}var Cb1=(F,A,$)=>{return Dn(F,A,!1,$)};Gn.buildUpdateOneOperation=Cb1;var Nb1=(F,A,$)=>{return Dn(F,A,!0,$)};Gn.buildUpdateManyOperation=Nb1;function Pb1(F,A){if(!(0,mP.hasAtomicOperators)(F,A))throw new FY.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function Dn(F,A,$,B){Pb1(F.update,B);let J={update:A,multi:$,filter:F.filter,updateMods:F.update};if(F.hint)J.hint=F.hint;if(F.upsert)J.upsert=F.upsert;if(F.arrayFilters)J.arrayFilters=F.arrayFilters;if(F.collation)J.collation=F.collation;if(!$&&"sort"in F&&F.sort!=null)J.sort=(0,Jn.formatSort)(F.sort);return J}var Rb1=(F,A)=>{if((0,mP.hasAtomicOperators)(F.replacement))throw new FY.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let $={update:A,multi:!1,filter:F.filter,updateMods:F.replacement};if(F.hint)$.hint=F.hint;if(F.upsert)$.upsert=F.upsert;if(F.collation)$.collation=F.collation;if(F.sort!=null)$.sort=(0,Jn.formatSort)(F.sort);return $};Gn.buildReplaceOneOperation=Rb1;function hP(F,A,$,B){switch(F.name){case"insertOne":return Gn.buildInsertOneOperation(F,A,$);case"deleteOne":return Gn.buildDeleteOneOperation(F,A);case"deleteMany":return Gn.buildDeleteManyOperation(F,A);case"updateOne":return Gn.buildUpdateOneOperation(F,A,B);case"updateMany":return Gn.buildUpdateManyOperation(F,A,B);case"replaceOne":return Gn.buildReplaceOneOperation(F,A)}}});var En=Q((Qn)=>{Object.defineProperty(Qn,"__esModule",{value:!0});Qn.ClientBulkWriteResultsMerger=void 0;var Tb1=iX(),kb1=$1(),Ob1={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class qn{static unacknowledged(){return Ob1}constructor(F){if(this.options=F,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},F.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(F){let A;try{for await(let $ of F)if($.ok===1){if(this.options.verboseResults)this.processDocument(F,$)}else if(this.options.ordered){let B=new kb1.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw B.writeErrors.set($.idx+this.currentBatchOffset,{code:$.code,message:$.errmsg}),B.partialResult=this.result,B}else this.writeErrors.set($.idx+this.currentBatchOffset,{code:$.code,message:$.errmsg})}catch($){if($ instanceof Tb1.MongoWriteConcernError){let B=$.result;if(A={insertedCount:B.nInserted,upsertedCount:B.nUpserted,matchedCount:B.nMatched,modifiedCount:B.nModified,deletedCount:B.nDeleted,writeConcernError:B.writeConcernError},this.options.verboseResults&&B.cursor.firstBatch){for(let J of B.cursor.firstBatch)if(J.ok===1)this.processDocument(F,J)}}else throw $}finally{if(F.response){let $=F.response;this.incrementCounts($)}this.currentBatchOffset+=F.operations.length}if(A){let $=A.writeConcernError;this.incrementCounts(A),this.writeConcernErrors.push({code:$.code,message:$.errmsg})}return this.result}processDocument(F,A){let $=F.operations[A.idx];if("insert"in $)this.result.insertResults?.set(A.idx+this.currentBatchOffset,{insertedId:$.document._id});if("update"in $){let B={matchedCount:A.n,modifiedCount:A.nModified??0,didUpsert:A.upserted!=null};if(A.upserted)B.upsertedId=A.upserted._id;this.result.updateResults?.set(A.idx+this.currentBatchOffset,B)}if("delete"in $)this.result.deleteResults?.set(A.idx+this.currentBatchOffset,{deletedCount:A.n})}incrementCounts(F){this.result.insertedCount+=F.insertedCount,this.result.upsertedCount+=F.upsertedCount,this.result.matchedCount+=F.matchedCount,this.result.modifiedCount+=F.modifiedCount,this.result.deletedCount+=F.deletedCount}}Qn.ClientBulkWriteResultsMerger=qn});var Pn=Q((Cn)=>{Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ClientBulkWriteExecutor=void 0;var Ln=K4(),Sb1=An(),FF=$1(),ub1=l6(),fb1=z1(),xb1=J3(),bb1=A4(),gb1=gP(),_b1=Kn(),wn=En();class In{constructor(F,A,$){if(A.length===0)throw new FF.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=F,this.operations=A,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...$},!this.options.writeConcern)this.options.writeConcern=xb1.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new FF.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new FF.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let F=this.client.s.options.pkFactory,A=new _b1.ClientBulkWriteCommandBuilder(this.operations,this.options,F),$=(0,fb1.resolveTimeoutOptions)(this.client,this.options),B=ub1.TimeoutContext.create($);if(this.options.writeConcern?.w===0){while(A.hasNextBatch()){let J=new gb1.ClientBulkWriteOperation(A,this.options);await(0,bb1.executeOperation)(this.client,J,B)}return wn.ClientBulkWriteResultsMerger.unacknowledged()}else{let J=new wn.ClientBulkWriteResultsMerger(this.options);while(A.hasNextBatch()){let X=new Ln.CursorTimeoutContext(B,Symbol()),Y={...this.options,timeoutContext:X,...$.timeoutMS!=null&&{timeoutMode:Ln.CursorTimeoutMode.LIFETIME}},D=new Sb1.ClientBulkWriteCursor(this.client,A,Y);try{await J.merge(D)}catch(G){if(G instanceof FF.MongoServerError&&!(G instanceof FF.MongoClientBulkWriteError)){let Z=new FF.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw Z.cause=G,Z.partialResult=J.bulkWriteResult,Z}else throw G}}if(J.writeConcernErrors.length>0||J.writeErrors.size>0){let X=new FF.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw X.writeConcernErrors=J.writeConcernErrors,X.writeErrors=J.writeErrors,X.partialResult=J.bulkWriteResult,X}return J.bulkWriteResult}}}Cn.ClientBulkWriteExecutor=In});var cP=Q((kn)=>{Object.defineProperty(kn,"__esModule",{value:!0});kn.WaitingForSuitableServerEvent=kn.ServerSelectionSucceededEvent=kn.ServerSelectionFailedEvent=kn.ServerSelectionStartedEvent=kn.ServerSelectionEvent=void 0;var yb1=z1(),Mz=N6();class U${constructor(F,A,$){this.selector=F,this.operation=$,this.topologyDescription=A}}kn.ServerSelectionEvent=U$;class Rn extends U${constructor(F,A,$){super(F,A,$);this.name=Mz.SERVER_SELECTION_STARTED,this.message="Server selection started"}}kn.ServerSelectionStartedEvent=Rn;class jn extends U${constructor(F,A,$,B){super(F,A,B);this.name=Mz.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=$}}kn.ServerSelectionFailedEvent=jn;class Mn extends U${constructor(F,A,$,B){super(F,A,B);this.name=Mz.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:J,port:X}=yb1.HostAddress.fromString($).toHostPort();this.serverHost=J,this.serverPort=X}}kn.ServerSelectionSucceededEvent=Mn;class Tn extends U${constructor(F,A,$,B){super(F,A,B);this.name=Mz.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=$}}kn.WaitingForSuitableServerEvent=Tn});var iP=Q((Sn)=>{Object.defineProperty(Sn,"__esModule",{value:!0});Sn.SrvPoller=Sn.SrvPollingEvent=void 0;var cb1=x("dns"),lP=x("timers"),lb1=$1(),pb1=A9(),AY=z1();class pP{constructor(F){this.srvRecords=F}hostnames(){return new Set(this.srvRecords.map((F)=>AY.HostAddress.fromSrvRecord(F).toString()))}}Sn.SrvPollingEvent=pP;class Tz extends pb1.TypedEventEmitter{constructor(F){super();if(this.on("error",AY.noop),!F||!F.srvHost)throw new lb1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=F.srvHost,this.srvMaxHosts=F.srvMaxHosts??0,this.srvServiceName=F.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)(0,lP.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)(0,lP.clearTimeout)(this._timeout);this._timeout=(0,lP.setTimeout)(()=>{this._poll().then(void 0,AY.squashError)},this.intervalMS)}success(F){this.haMode=!1,this.schedule(),this.emit(Tz.SRV_RECORD_DISCOVERY,new pP(F))}failure(){this.haMode=!0,this.schedule()}async _poll(){let F=this.generation,A;try{A=await cb1.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(F!==this.generation)return;let $=[];for(let B of A)try{(0,AY.checkParentDomainMatch)(B.name,this.srvHost),$.push(B)}catch(J){(0,AY.squashError)(J)}if(!$.length){this.failure();return}this.success($)}}Sn.SrvPoller=Tz;Tz.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var dn=Q((hn)=>{Object.defineProperty(hn,"__esModule",{value:!0});hn.ServerCapabilities=hn.Topology=void 0;var ab1=eN(),u3=N6(),l2=$1(),o0=U8(),nb1=A9(),$Y=F4(),aP=l6(),S3=z1(),h1=s3(),O8=Zz(),fn=hN(),rP=OX(),nP=aJ(),S8=cP(),kz=iP(),xn=NN(),rb1=0,BY=(0,S3.makeStateMachine)({[h1.STATE_CLOSED]:[h1.STATE_CLOSED,h1.STATE_CONNECTING],[h1.STATE_CONNECTING]:[h1.STATE_CONNECTING,h1.STATE_CLOSING,h1.STATE_CONNECTED,h1.STATE_CLOSED],[h1.STATE_CONNECTED]:[h1.STATE_CONNECTED,h1.STATE_CLOSING,h1.STATE_CLOSED],[h1.STATE_CLOSING]:[h1.STATE_CLOSING,h1.STATE_CLOSED]});class M0 extends nb1.TypedEventEmitter{constructor(F,A,$){super();if(this.on("error",S3.noop),this.client=F,$=$??{hosts:[S3.HostAddress.fromString("localhost:27017")],...Object.fromEntries(ab1.DEFAULT_OPTIONS.entries())},typeof A==="string")A=[S3.HostAddress.fromString(A)];else if(!Array.isArray(A))A=[A];let B=[];for(let G of A)if(typeof G==="string")B.push(S3.HostAddress.fromString(G));else if(G instanceof S3.HostAddress)B.push(G);else throw new l2.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(G)}`);let J=tb1($),X=rb1++,Y=$.srvMaxHosts==null||$.srvMaxHosts===0||$.srvMaxHosts>=B.length?B:(0,S3.shuffle)(B,$.srvMaxHosts),D=new Map;for(let G of Y)D.set(G.toString(),new rP.ServerDescription(G));if(this.waitQueue=new S3.List,this.s={id:X,options:$,seedlist:B,state:h1.STATE_CLOSED,description:new xn.TopologyDescription(J,D,$.replicaSet,void 0,void 0,void 0,$),serverSelectionTimeoutMS:$.serverSelectionTimeoutMS,heartbeatFrequencyMS:$.heartbeatFrequencyMS,minHeartbeatFrequencyMS:$.minHeartbeatFrequencyMS,servers:new Map,credentials:$?.credentials,clusterTime:void 0,detectShardedTopology:(G)=>this.detectShardedTopology(G),detectSrvRecords:(G)=>this.detectSrvRecords(G)},this.mongoLogger=F.mongoLogger,this.component="topology",$.srvHost&&!$.loadBalanced)this.s.srvPoller=$.srvPoller??new kz.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:$.srvHost,srvMaxHosts:$.srvMaxHosts,srvServiceName:$.srvServiceName}),this.on(M0.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(F){let A=F.previousDescription.type,$=F.newDescription.type,B=A!==h1.TopologyType.Sharded&&$===h1.TopologyType.Sharded,X=!!this.s.srvPoller?.listeners(kz.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(B&&!X)this.s.srvPoller?.on(kz.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(F){let A=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(F,this.s.options.srvMaxHosts),this.s.description===A)return;bn(this),this.emitAndLog(M0.TOPOLOGY_DESCRIPTION_CHANGED,new O8.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new tP(this.lastHello())}async connect(F){this.connectionLock??=this._connect(F);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(F){if(F=F??{},this.s.state===h1.STATE_CONNECTED)return this;BY(this,h1.STATE_CONNECTING),this.emitAndLog(M0.TOPOLOGY_OPENING,new O8.TopologyOpeningEvent(this.s.id)),this.emitAndLog(M0.TOPOLOGY_DESCRIPTION_CHANGED,new O8.TopologyDescriptionChangedEvent(this.s.id,new xn.TopologyDescription(h1.TopologyType.Unknown),this.s.description));let A=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(A.map((Y)=>[Y.address,yn(this,Y)])),this.s.options.loadBalanced)for(let Y of A){let D=new rP.ServerDescription(Y.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(D)}let $=this.client.s.options.serverSelectionTimeoutMS,B=F.readPreference??$Y.ReadPreference.primary,J=aP.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:$,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),X={operationName:"handshake",...F,timeoutContext:J};try{let Y=await this.selectServer((0,nP.readPreferenceServerSelector)(B),X);if(this.s.options.__skipPingOnConnect!==!0&&this.s.credentials){let G=await Y.pool.checkOut({timeoutContext:J});return Y.pool.checkIn(G),BY(this,h1.STATE_CONNECTED),this.emit(M0.OPEN,this),this.emit(M0.CONNECT,this),this}return BY(this,h1.STATE_CONNECTED),this.emit(M0.OPEN,this),this.emit(M0.CONNECT,this),this}catch(Y){throw this.close(),Y}}closeCheckedOutConnections(){for(let F of this.s.servers.values())return F.closeCheckedOutConnections()}close(){if(this.s.state===h1.STATE_CLOSED||this.s.state===h1.STATE_CLOSING)return;for(let F of this.s.servers.values())_n(F,this);if(this.s.servers.clear(),BY(this,h1.STATE_CLOSING),vn(this.waitQueue,new l2.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(kz.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(M0.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),BY(this,h1.STATE_CLOSED),this.emitAndLog(M0.TOPOLOGY_CLOSED,new O8.TopologyClosedEvent(this.s.id))}async selectServer(F,A){let $;if(typeof F!=="function")if(typeof F==="string")$=(0,nP.readPreferenceServerSelector)($Y.ReadPreference.fromString(F));else{let W;if(F instanceof $Y.ReadPreference)W=F;else $Y.ReadPreference.translate(A),W=A.readPreference||$Y.ReadPreference.primary;$=(0,nP.readPreferenceServerSelector)(W)}else $=F;if(A={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...A},this.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionStartedEvent(F,this.description,A.operationName));let B;if(A.timeoutContext)B=A.timeoutContext.serverSelectionTimeout;else B=aP.Timeout.expires(A.serverSelectionTimeoutMS??0);let J=this.description.type===h1.TopologyType.Sharded,X=A.session,Y=X&&X.transaction;if(J&&Y&&Y.server){if(this.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionSucceededEvent(F,this.description,Y.server.pool.address,A.operationName));if(A.timeoutContext?.clearServerSelectionTimeout)B?.clear();return Y.server}let{promise:D,resolve:G,reject:Z}=(0,S3.promiseWithResolvers)(),U={serverSelector:$,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:Y,resolve:G,reject:Z,cancelled:!1,startTime:(0,S3.now)(),operationName:A.operationName,waitingLogged:!1,previousServer:A.previousServer},z=(0,S3.addAbortListener)(A.signal,function(){U.cancelled=!0,Z(this.reason)});this.waitQueue.push(U),gn(this);try{B?.throwIfExpired();let W=await(B?Promise.race([D,B]):D);if(A.timeoutContext?.csotEnabled()&&W.description.minRoundTripTime!==0)A.timeoutContext.minRoundTripTime=W.description.minRoundTripTime;return W}catch(W){if(aP.TimeoutError.is(W)){U.cancelled=!0;let H=new l2.MongoServerSelectionError(`Server selection timed out after ${B?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionFailedEvent(F,this.description,H,A.operationName));if(A.timeoutContext?.csotEnabled())throw new l2.MongoOperationTimeoutError("Timed out during server selection",{cause:H});throw H}throw W}finally{if(z?.[S3.kDispose](),A.timeoutContext?.clearServerSelectionTimeout)B?.clear()}}serverUpdateHandler(F){if(!this.s.description.hasServer(F.address))return;if(sb1(this.s.description,F))return;let A=this.s.description,$=this.s.description.servers.get(F.address);if(!$)return;let B=F.$clusterTime;if(B)(0,h1._advanceClusterTime)(this,B);let J=$&&$.equals(F);if(this.s.description=this.s.description.update(F),this.s.description.compatibilityError){this.emit(M0.ERROR,new l2.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!J){let X=this.s.description.servers.get(F.address);if(X)this.emit(M0.SERVER_DESCRIPTION_CHANGED,new O8.ServerDescriptionChangedEvent(this.s.id,F.address,$,X))}if(bn(this,F),this.waitQueue.length>0)gn(this);if(!J)this.emitAndLog(M0.TOPOLOGY_DESCRIPTION_CHANGED,new O8.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}auth(F,A){if(typeof F==="function")A=F,F=void 0;if(typeof A==="function")A(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===h1.STATE_CONNECTED}isDestroyed(){return this.s.state===h1.STATE_CLOSED}lastHello(){let F=Array.from(this.description.servers.values());if(F.length===0)return{};return F.filter((B)=>B.type!==h1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(F){this.s.clusterTime=F}}hn.Topology=M0;M0.SERVER_OPENING=u3.SERVER_OPENING;M0.SERVER_CLOSED=u3.SERVER_CLOSED;M0.SERVER_DESCRIPTION_CHANGED=u3.SERVER_DESCRIPTION_CHANGED;M0.TOPOLOGY_OPENING=u3.TOPOLOGY_OPENING;M0.TOPOLOGY_CLOSED=u3.TOPOLOGY_CLOSED;M0.TOPOLOGY_DESCRIPTION_CHANGED=u3.TOPOLOGY_DESCRIPTION_CHANGED;M0.ERROR=u3.ERROR;M0.OPEN=u3.OPEN;M0.CONNECT=u3.CONNECT;M0.CLOSE=u3.CLOSE;M0.TIMEOUT=u3.TIMEOUT;function _n(F,A){for(let $ of u3.LOCAL_SERVER_EVENTS)F.removeAllListeners($);F.close(),A.emitAndLog(M0.SERVER_CLOSED,new O8.ServerClosedEvent(A.s.id,F.description.address));for(let $ of u3.SERVER_RELAY_EVENTS)F.removeAllListeners($)}function tb1(F){if(F?.directConnection)return h1.TopologyType.Single;if(F?.replicaSet)return h1.TopologyType.ReplicaSetNoPrimary;if(F?.loadBalanced)return h1.TopologyType.LoadBalanced;return h1.TopologyType.Unknown}function yn(F,A){F.emitAndLog(M0.SERVER_OPENING,new O8.ServerOpeningEvent(F.s.id,A.address));let $=new fn.Server(F,A,F.s.options);for(let B of u3.SERVER_RELAY_EVENTS)$.on(B,(J)=>F.emit(B,J));return $.on(fn.Server.DESCRIPTION_RECEIVED,(B)=>F.serverUpdateHandler(B)),$.connect(),$}function bn(F,A){if(A&&F.s.servers.has(A.address)){let $=F.s.servers.get(A.address);if($){if($.s.description=A,A.error instanceof l2.MongoError&&A.error.hasErrorLabel(l2.MongoErrorLabel.ResetPool)){let B=A.error.hasErrorLabel(l2.MongoErrorLabel.InterruptInUseConnections);$.pool.clear({interruptInUseConnections:B})}else if(A.error==null){let B=F.s.description.type;if(A.isDataBearing||A.type!==h1.ServerType.Unknown&&B===h1.TopologyType.Single)$.pool.ready()}}}for(let $ of F.description.servers.values())if(!F.s.servers.has($.address)){let B=yn(F,$);F.s.servers.set($.address,B)}for(let $ of F.s.servers){let B=$[0];if(F.description.hasServer(B))continue;if(!F.s.servers.has(B))continue;let J=F.s.servers.get(B);if(F.s.servers.delete(B),J)_n(J,F)}}function vn(F,A){while(F.length){let $=F.shift();if(!$)continue;if(!$.cancelled){if($.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))$.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionFailedEvent($.serverSelector,$.topologyDescription,A,$.operationName));$.reject(A)}}}function gn(F){if(F.s.state===h1.STATE_CLOSED){vn(F.waitQueue,new l2.MongoTopologyClosedError);return}let A=F.description.type===h1.TopologyType.Sharded,$=Array.from(F.description.servers.values()),B=F.waitQueue.length;for(let J=0;J<B;++J){let X=F.waitQueue.shift();if(!X)continue;if(X.cancelled)continue;let Y;try{let{serverSelector:Z,previousServer:U}=X;Y=Z?Z(F.description,$,U?[U]:[]):$}catch(Z){if(F.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionFailedEvent(X.serverSelector,F.description,Z,X.operationName));X.reject(Z);continue}let D;if(Y.length===0){if(!X.waitingLogged){if(F.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.INFORMATIONAL))F.client.mongoLogger?.info(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.WaitingForSuitableServerEvent(X.serverSelector,F.description,F.s.serverSelectionTimeoutMS!==0?F.s.serverSelectionTimeoutMS-((0,S3.now)()-X.startTime):-1,X.operationName));X.waitingLogged=!0}F.waitQueue.push(X);continue}else if(Y.length===1)D=F.s.servers.get(Y[0].address);else{let Z=(0,S3.shuffle)(Y,2),U=F.s.servers.get(Z[0].address),z=F.s.servers.get(Z[1].address);D=U&&z&&U.s.operationCount<z.s.operationCount?U:z}if(!D){let Z=new l2.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",F.description);if(F.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionFailedEvent(X.serverSelector,F.description,Z,X.operationName));X.reject(Z);return}let G=X.transaction;if(A&&G&&G.isActive&&D)G.pinServer(D);if(F.client.mongoLogger?.willLog(o0.MongoLoggableComponent.SERVER_SELECTION,o0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(o0.MongoLoggableComponent.SERVER_SELECTION,new S8.ServerSelectionSucceededEvent(X.serverSelector,X.topologyDescription,D.pool.address,X.operationName));X.resolve(D)}if(F.waitQueue.length>0)for(let[,J]of F.s.servers)process.nextTick(function(){return J.requestCheck()})}function sb1(F,A){let B=F.servers.get(A.address)?.topologyVersion;return(0,rP.compareTopologyVersion)(B,A.topologyVersion)>0}class tP{constructor(F){this.minWireVersion=F.minWireVersion||0,this.maxWireVersion=F.maxWireVersion||0}get hasAggregationCursor(){return!0}get hasWriteCommands(){return!0}get hasTextSearch(){return!0}get hasAuthCommands(){return!0}get hasListCollectionsCommand(){return!0}get hasListIndexesCommand(){return!0}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return!0}get commandsTakeCollation(){return!0}}hn.ServerCapabilities=tP});var I8=Q((rn)=>{Object.defineProperty(rn,"__esModule",{value:!0});rn.MongoClient=rn.ServerApiVersion=void 0;var sP=x("fs"),eb1=J0(),Fg1=s5(),Ag1=RU(),$g1=y2(),oP=CC(),Bg1=K0(),cn=eN(),Jg1=N6(),Xg1=Ez(),eP=$1(),Yg1=xP(),ln=U8(),Dg1=A9(),Gg1=Pn(),Zg1=A4(),Ug1=N0(),pn=F4(),zg1=nA(),Wg1=aJ(),an=dn(),nn=aA(),i6=z1();rn.ServerApiVersion=Object.freeze({v1:"1"});class FR extends Dg1.TypedEventEmitter{constructor(F,A){super();this.driverInfoList=[],this.on("error",i6.noop),this.options=(0,cn.parseOptions)(F,this,A),this.appendMetadata(this.options.driverInfo);let $=Object.values(this.options.mongoLoggerOptions.componentSeverities).some((J)=>J!==ln.SeverityLevel.OFF);this.mongoLogger=$?new ln.MongoLogger(this.options.mongoLoggerOptions):void 0;let B=this;this.s={url:F,bsonOptions:(0,eb1.resolveBSONOptions)(this.options),namespace:(0,i6.ns)("admin"),hasBeenClosed:!1,sessionPool:new nn.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new Yg1.MongoClientAuthProviders,get options(){return B.options},get readConcern(){return B.options.readConcern},get writeConcern(){return B.options.writeConcern},get readPreference(){return B.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(F){if(this.driverInfoList.some(($)=>(0,oP.isDriverInfoEqual)($,F)))return;this.driverInfoList.push(F),this.options.metadata=(0,oP.makeClientMetadata)(this.driverInfoList,this.options),this.options.extendedMetadata=(0,oP.addContainerMetadata)(this.options.metadata).then(void 0,i6.squashError).then(($)=>$??{})}checkForNonGenuineHosts(){let F=this.options.hosts.filter((J)=>(0,i6.isHostMatch)(i6.DOCUMENT_DB_CHECK,J.host)),A=(0,i6.isHostMatch)(i6.DOCUMENT_DB_CHECK,this.options.srvHost),$=this.options.hosts.filter((J)=>(0,i6.isHostMatch)(i6.COSMOS_DB_CHECK,J.host)),B=(0,i6.isHostMatch)(i6.COSMOS_DB_CHECK,this.options.srvHost);if(F.length!==0||A)this.mongoLogger?.info("client",i6.DOCUMENT_DB_MSG);else if($.length!==0||B)this.mongoLogger?.info("client",i6.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(F){this.options.monitorCommands=F}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(F,A){if(this.autoEncrypter)throw new eP.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new Gg1.ClientBulkWriteExecutor(this,F,(0,i6.resolveOptions)(this,A)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let F=this.options;if(F.tls){if(typeof F.tlsCAFile==="string")F.ca??=await sP.promises.readFile(F.tlsCAFile);if(typeof F.tlsCRLFile==="string")F.crl??=await sP.promises.readFile(F.tlsCRLFile);if(typeof F.tlsCertificateKeyFile==="string"){if(!F.key||!F.cert){let $=await sP.promises.readFile(F.tlsCertificateKeyFile);F.key??=$,F.cert??=$}}}if(typeof F.srvHost==="string"){let $=await(0,cn.resolveSRVRecord)(F);for(let[B,J]of $.entries())F.hosts[B]=J}if(F.credentials?.mechanism===$g1.AuthMechanism.MONGODB_OIDC){let $=F.credentials?.mechanismProperties?.ALLOWED_HOSTS||Ag1.DEFAULT_ALLOWED_HOSTS;if(!F.credentials?.mechanismProperties?.ENVIRONMENT){for(let J of F.hosts)if(!(0,i6.hostMatchesWildcards)(J.toHostPort().host,$))throw new eP.MongoInvalidArgumentError(`Host '${J}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${$.join(",")}'`)}}this.topology=new an.Topology(this,F.hosts,F),this.topology.once(an.Topology.OPEN,()=>this.emit("open",this));for(let $ of Jg1.MONGO_CLIENT_EVENTS)this.topology.on($,(...B)=>this.emit($,...B));let A=async()=>{try{await this.topology?.connect(F)}catch($){throw this.topology?.close(),$}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await A(),await F.encrypter.connectInternalClient();else await A();return this}async close(F=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let F=Array.from(this.s.activeCursors,(G)=>G.close());this.s.activeCursors.clear(),await Promise.all(F);let A=Array.from(this.s.activeSessions,(G)=>G.endSession());if(this.s.activeSessions.clear(),await Promise.all(A),this.topology==null)return;let $=(0,Wg1.readPreferenceServerSelector)(pn.ReadPreference.primaryPreferred),B=this.topology.description,J=Array.from(B.servers.values());if($(B,J).length!==0){let G=Array.from(this.s.sessionPool.sessions,({id:Z})=>Z);if(G.length!==0)try{class Z extends Ug1.AbstractOperation{constructor(){super(...arguments);this.ns=i6.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=Bg1.MongoDBResponse}buildCommand(U,z){return{endSessions:G}}buildOptions(U){return{timeoutContext:U,readPreference:pn.ReadPreference.primaryPreferred,noResponse:!0}}get commandName(){return"endSessions"}}await(0,Zg1.executeOperation)(this,new Z)}catch(Z){(0,i6.squashError)(Z)}}let Y=this.topology;this.topology=void 0,Y.close();let{encrypter:D}=this.options;if(D)await D.close(this)}db(F,A){if(A=A??{},!F)F=this.s.options.dbName;let $=Object.assign({},this.options,A);return new Xg1.Db(this,F,$)}static async connect(F,A){return await new this(F,A).connect()}startSession(F){let A=new nn.ClientSession(this,this.s.sessionPool,{explicit:!0,...F},this.options);return this.s.activeSessions.add(A),A.once("ended",()=>{this.s.activeSessions.delete(A)}),A}async withSession(F,A){let $={owner:Symbol(),...typeof F==="object"?F:{}},B=typeof F==="function"?F:A;if(B==null)throw new eP.MongoInvalidArgumentError("Missing required callback parameter");let J=this.startSession($);try{return await B(J)}finally{try{await J.endSession()}catch(X){(0,i6.squashError)(X)}}}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new Fg1.ChangeStream(this,F,(0,i6.resolveOptions)(this,A))}}rn.MongoClient=FR;(0,zg1.configureResourceManagement)(FR.prototype)});var nA=Q((sn)=>{Object.defineProperty(sn,"__esModule",{value:!0});sn.configureResourceManagement=JY;sn.configureExplicitResourceManagement=Kg1;function JY(F){Symbol.asyncDispose&&Object.defineProperty(F,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function Kg1(){let{MongoClient:F}=I8(),{ClientSession:A}=aA(),{AbstractCursor:$}=K4(),{ChangeStream:B}=s5();JY(F.prototype),JY(A.prototype),JY($.prototype),JY(B.prototype)}});var K4=Q((Br)=>{Object.defineProperty(Br,"__esModule",{value:!0});Br.CursorTimeoutContext=Br.AbstractCursor=Br.CursorTimeoutMode=Br.CURSOR_FLAGS=void 0;var Ar=x("stream"),z$=J0(),a6=$1(),Vg1=A9(),on=A4(),Eg1=QC(),Lg1=Gh(),en=e9(),Oz=F4(),wg1=nA(),Ig1=aA(),AR=l6(),J9=z1();Br.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function Fr(){this.client.s.activeCursors.delete(this)}Br.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class Sz extends Vg1.TypedEventEmitter{constructor(F,A,$={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",J9.noop),!F.s.isMongoClient)throw new a6.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=F,this.cursorNamespace=A,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:$.readPreference&&$.readPreference instanceof Oz.ReadPreference?$.readPreference:Oz.ReadPreference.primary,...(0,z$.pluckBSONSerializeOptions)($),timeoutMS:$?.timeoutContext?.csotEnabled()?$.timeoutContext.timeoutMS:$.timeoutMS,tailable:$.tailable,awaitData:$.awaitData},this.cursorOptions.timeoutMS!=null)if($.timeoutMode==null)if($.tailable){if($.awaitData){if($.maxAwaitTimeMS!=null&&$.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new a6.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=Br.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Br.CursorTimeoutMode.LIFETIME;else{if($.tailable&&$.timeoutMode===Br.CursorTimeoutMode.LIFETIME)throw new a6.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=$.timeoutMode}else if($.timeoutMode!=null)throw new a6.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let B=en.ReadConcern.fromOptions($);if(B)this.cursorOptions.readConcern=B;if(typeof $.batchSize==="number")this.cursorOptions.batchSize=$.batchSize;if($.comment!==void 0)this.cursorOptions.comment=$.comment;if(typeof $.maxTimeMS==="number")this.cursorOptions.maxTimeMS=$.maxTimeMS;if(typeof $.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=$.maxAwaitTimeMS;this.cursorSession=$.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:$?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=$.timeoutContext,this.signal=$.signal,this.abortListener=(0,J9.addAbortListener)(this.signal,()=>void this.close().then(void 0,J9.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(F){this.cursorSession=F}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(Fr))this.once("close",Fr)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(F){let A=[],$=Math.min(F??this.documents?.length??0,this.documents?.length??0);for(let B=0;B<$;B++){let J=this.documents?.shift(this.deserializationOptions);if(J!=null)A.push(J)}return A}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let F=await this.next();if(F===null)return;yield F,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(F){(0,J9.squashError)(F)}}}stream(F){let A=new $r(this),$=(0,J9.addAbortListener)(this.signal,function(){A.destroy(this.reason)});if(A.once("end",()=>{$?.[J9.kDispose]()}),F?.transform){let B=F.transform,J=A.pipe(new Ar.Transform({objectMode:!0,highWaterMark:1,transform(X,Y,D){try{let G=B(X);D(void 0,G)}catch(G){D(G)}}}));return A.on("error",(X)=>J.emit("error",X)),J}return A}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===z$.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===z$.Long.ZERO)throw new a6.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===z$.Long.ZERO)throw new a6.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}if(await this.fetchBatch(),F=this.documents?.shift(this.deserializationOptions),F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}}finally{if(this.cursorOptions.timeoutMode===Br.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach(F){if(this.signal?.throwIfAborted(),typeof F!=="function")throw new a6.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let A of this)if(F(A)===!1)break}async close(F){await this.cleanup(F?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let F=[];for await(let A of this){F.push(A);let $=this.readBufferedDocuments();if(this.transform!=null)for(let B of $)F.push(await this.transformDocument(B));else F.push(...$)}return F}addCursorFlag(F,A){if(this.throwIfInitialized(),!Br.CURSOR_FLAGS.includes(F))throw new a6.MongoInvalidArgumentError(`Flag ${F} is not one of ${Br.CURSOR_FLAGS}`);if(typeof A!=="boolean")throw new a6.MongoInvalidArgumentError(`Flag ${F} must be a boolean value`);return this.cursorOptions[F]=A,this}map(F){this.throwIfInitialized();let A=this.transform;if(A)this.transform=($)=>{return F(A($))};else this.transform=F;return this}withReadPreference(F){if(this.throwIfInitialized(),F instanceof Oz.ReadPreference)this.cursorOptions.readPreference=F;else if(typeof F==="string")this.cursorOptions.readPreference=Oz.ReadPreference.fromString(F);else throw new a6.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return this}withReadConcern(F){this.throwIfInitialized();let A=en.ReadConcern.fromOptions({readConcern:F});if(A)this.cursorOptions.readConcern=A;return this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new a6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=F,this}batchSize(F){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new a6.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof F!=="number")throw new a6.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=F,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new a6.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,J9.squashError);this.cursorSession=null}}async getMore(F){if(this.cursorId==null)throw new a6.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new a6.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new a6.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let A={...this.cursorOptions,session:this.cursorSession,batchSize:F},$=new Eg1.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,A);return await(0,on.executeOperation)(this.cursorClient,$,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new XY(AR.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let F=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let A=F.response;this.selectedServer=F.server,this.cursorId=A.id,this.cursorNamespace=A.ns??this.namespace,this.documents=A,this.initialized=!0}catch(F){throw this.initialized=!0,await this.cleanup(void 0,F),F}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}let F=this.cursorOptions.batchSize||1000;try{let A=await this.getMore(F);this.cursorId=A.id,this.documents=A}catch(A){try{await this.cleanup(void 0,A)}catch($){(0,J9.squashError)($)}throw A}if(this.isDead)await this.cleanup()}async cleanup(F,A){this.abortListener?.[J9.kDispose](),this.isClosed=!0;let $=()=>{if(F!=null)return this.timeoutContext?.clear(),new XY(AR.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:F}),this);else return this.timeoutContext?.refreshed()};await(async(X)=>{try{await X()}finally{this.emitClose()}})(async()=>{let X=this.cursorSession;if(!X)return;try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!X.hasEnded){this.isKilled=!0;let Y=this.cursorId;this.cursorId=z$.Long.ZERO,await(0,on.executeOperation)(this.cursorClient,new Lg1.KillCursorsOperation(Y,this.cursorNamespace,this.selectedServer,{session:X}),$())}}catch(Y){(0,J9.squashError)(Y)}finally{if(X.owner===this)await X.endSession({error:A});if(!X.inTransaction())(0,Ig1.maybeClearPinnedConnection)(X,{error:A})}})}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(F){if(this.transform==null)return F;try{let A=this.transform(F);if(A===null)throw new a6.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return A}catch(A){try{await this.close()}catch($){(0,J9.squashError)($)}throw A}}throwIfInitialized(){if(this.initialized)throw new a6.MongoCursorInUseError}}Br.AbstractCursor=Sz;Sz.CLOSE="close";class $r extends Ar.Readable{constructor(F){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=F}_read(F){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(F,A){this._cursor.close().then(()=>A(F),($)=>A($))}_readNext(){if(this._cursor.id===z$.Long.ZERO){this.push(null);return}this._cursor.next().then((F)=>{if(F==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,J9.squashError);else{if(this.push(F))return this._readNext();this._readInProgress=!1}},(F)=>{if(F.message.match(/server is closed/))return this._cursor.close().then(void 0,J9.squashError),this.push(null);if(F.message.match(/operation was interrupted/))return this.push(null);return this.destroy(F)}).catch((F)=>{this._readInProgress=!1,this.destroy(F)})}}(0,wg1.configureResourceManagement)(Sz.prototype);class XY extends AR.TimeoutContext{constructor(F,A){super();this.timeoutContext=F,this.owner=A}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new XY(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(F,A){this.timeoutContext.addMaxTimeMSToCommand(F,A)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}Br.CursorTimeoutContext=XY});var uz=Q((Yr)=>{Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ExplainableCursor=void 0;var Ng1=K4();class Xr extends Ng1.AbstractCursor{resolveExplainTimeoutOptions(F,A){let $,B;if(F==null&&A==null)$=void 0,B=void 0;else if(F!=null&&A==null)$=typeof F!=="object"?F:("verbosity"in F)?F:void 0,B=typeof F==="object"&&"timeoutMS"in F?F:void 0;else $=F,B=A;return{timeout:B,explain:$}}}Yr.ExplainableCursor=Xr});var nX=Q((Wr)=>{Object.defineProperty(Wr,"__esModule",{value:!0});Wr.AggregationCursor=void 0;var BR=$1(),Gr=AX(),Zr=$X(),Ur=A4(),Pg1=z1(),zr=K4(),Rg1=uz();class JR extends Rg1.ExplainableCursor{constructor(F,A,$=[],B={}){super(F,A,B);this.pipeline=$,this.aggregateOptions=B;let J=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===zr.CursorTimeoutMode.ITERATION&&(J?.$merge!=null||J?.$out!=null))throw new BR.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let F=(0,Pg1.mergeOptions)({},this.aggregateOptions);return delete F.session,new JR(this.client,this.namespace,this.pipeline,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.aggregateOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{(0,Gr.validateExplainTimeoutOptions)(A,Gr.Explain.fromOptions(A))}catch{throw new BR.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let $=new Zr.AggregateOperation(this.namespace,this.pipeline,A),B=await(0,Ur.executeOperation)(this.client,$,this.timeoutContext);return{server:$.server,session:F,response:B}}async explain(F,A){let{explain:$,timeout:B}=this.resolveExplainTimeoutOptions(F,A);return(await(0,Ur.executeOperation)(this.client,new Zr.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...B,explain:$??!0}))).shift(this.deserializationOptions)}addStage(F){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===zr.CursorTimeoutMode.ITERATION&&(F.$out!=null||F.$merge!=null))throw new BR.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(F),this}group(F){return this.addStage({$group:F})}limit(F){return this.addStage({$limit:F})}match(F){return this.addStage({$match:F})}out(F){return this.addStage({$out:F})}project(F){return this.addStage({$project:F})}lookup(F){return this.addStage({$lookup:F})}redact(F){return this.addStage({$redact:F})}skip(F){return this.addStage({$skip:F})}sort(F){return this.addStage({$sort:F})}unwind(F){return this.addStage({$unwind:F})}geoNear(F){return this.addStage({$geoNear:F})}}Wr.AggregationCursor=JR});var YR=Q((Kr)=>{Object.defineProperty(Kr,"__esModule",{value:!0});Kr.CountOperation=void 0;var jg1=K0(),Mg1=W6(),fz=N0();class XR extends Mg1.CommandOperation{constructor(F,A,$){super({s:{namespace:F}},$);this.SERVER_COMMAND_RESPONSE_TYPE=jg1.MongoDBResponse,this.options=$,this.collectionName=F.collection,this.query=A}get commandName(){return"count"}buildCommandDocument(F,A){let $=this.options,B={count:this.collectionName,query:this.query};if(typeof $.limit==="number")B.limit=$.limit;if(typeof $.skip==="number")B.skip=$.skip;if($.hint!=null)B.hint=$.hint;if(typeof $.maxTimeMS==="number")B.maxTimeMS=$.maxTimeMS;return B}handleOk(F){return F.getNumber("n")??0}}Kr.CountOperation=XR;(0,fz.defineAspects)(XR,[fz.Aspect.READ_OPERATION,fz.Aspect.RETRYABLE,fz.Aspect.SUPPORTS_RAW_DATA])});var Er=Q((Qr)=>{Object.defineProperty(Qr,"__esModule",{value:!0});Qr.FindOperation=void 0;var DR=K0(),Tg1=$1(),kg1=OA(),Og1=z1(),Sg1=W6(),W$=N0();class GR extends Sg1.CommandOperation{constructor(F,A={},$={}){super(void 0,$);if(this.SERVER_COMMAND_RESPONSE_TYPE=DR.CursorResponse,this.options={...$},delete this.options.writeConcern,this.ns=F,typeof A!=="object"||Array.isArray(A))throw new Tg1.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=A!=null&&A._bsontype==="ObjectId"?{_id:A}:A,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?DR.ExplainedCursorResponse:DR.CursorResponse}get commandName(){return"find"}buildOptions(F){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:F}}handleOk(F){return F}buildCommandDocument(){return ug1(this.ns,this.filter,this.options)}}Qr.FindOperation=GR;function ug1(F,A,$){let B={find:F.collection,filter:A};if($.sort)B.sort=(0,kg1.formatSort)($.sort);if($.projection){let J=$.projection;if(J&&Array.isArray(J))J=J.length?J.reduce((X,Y)=>{return X[Y]=1,X},{}):{_id:1};B.projection=J}if($.hint)B.hint=(0,Og1.normalizeHintField)($.hint);if(typeof $.skip==="number")B.skip=$.skip;if(typeof $.limit==="number")if($.limit<0)B.limit=-$.limit,B.singleBatch=!0;else B.limit=$.limit;if(typeof $.batchSize==="number")if($.batchSize<0)B.limit=-$.batchSize;else if($.batchSize===$.limit)B.batchSize=$.batchSize+1;else B.batchSize=$.batchSize;if(typeof $.singleBatch==="boolean")B.singleBatch=$.singleBatch;if($.comment!==void 0)B.comment=$.comment;if($.max)B.max=$.max;if($.min)B.min=$.min;if(typeof $.returnKey==="boolean")B.returnKey=$.returnKey;if(typeof $.showRecordId==="boolean")B.showRecordId=$.showRecordId;if(typeof $.tailable==="boolean")B.tailable=$.tailable;if(typeof $.oplogReplay==="boolean")B.oplogReplay=$.oplogReplay;if(typeof $.timeout==="boolean")B.noCursorTimeout=!$.timeout;else if(typeof $.noCursorTimeout==="boolean")B.noCursorTimeout=$.noCursorTimeout;if(typeof $.awaitData==="boolean")B.awaitData=$.awaitData;if(typeof $.allowPartialResults==="boolean")B.allowPartialResults=$.allowPartialResults;if(typeof $.allowDiskUse==="boolean")B.allowDiskUse=$.allowDiskUse;if($.let)B.let=$.let;return B}(0,W$.defineAspects)(GR,[W$.Aspect.READ_OPERATION,W$.Aspect.RETRYABLE,W$.Aspect.EXPLAINABLE,W$.Aspect.CURSOR_CREATING,W$.Aspect.SUPPORTS_RAW_DATA])});var HR=Q((Ir)=>{Object.defineProperty(Ir,"__esModule",{value:!0});Ir.FindCursor=Ir.FLAGS=void 0;var fg1=K0(),u9=$1(),Lr=AX(),xg1=YR(),ZR=A4(),wr=Er(),UR=OA(),zR=z1(),bg1=uz();Ir.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class WR extends bg1.ExplainableCursor{constructor(F,A,$={},B={}){super(F,A,B);if(this.numReturned=0,this.cursorFilter=$,this.findOptions=B,B.sort!=null)this.findOptions.sort=(0,UR.formatSort)(B.sort)}clone(){let F=(0,zR.mergeOptions)({},this.findOptions);return delete F.session,new WR(this.client,this.namespace,this.cursorFilter,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.findOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{(0,Lr.validateExplainTimeoutOptions)(A,Lr.Explain.fromOptions(A))}catch{throw new u9.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let $=new wr.FindOperation(this.namespace,this.cursorFilter,A),B=await(0,ZR.executeOperation)(this.client,$,this.timeoutContext);return this.numReturned=B.batchSize,{server:$.server,session:F,response:B}}async getMore(F){let A=this.numReturned;if(A){let B=this.findOptions.limit;if(F=B&&B>0&&A+F>B?B-A:F,F<=0){try{await this.close()}catch(J){(0,zR.squashError)(J)}return fg1.CursorResponse.emptyGetMore}}let $=await super.getMore(F);return this.numReturned=this.numReturned+$.batchSize,$}async count(F){if((0,zR.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof F==="boolean")throw new u9.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,ZR.executeOperation)(this.client,new xg1.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...F}))}async explain(F,A){let{explain:$,timeout:B}=this.resolveExplainTimeoutOptions(F,A);return(await(0,ZR.executeOperation)(this.client,new wr.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...B,explain:$??!0}))).shift(this.deserializationOptions)}filter(F){return this.throwIfInitialized(),this.cursorFilter=F,this}hint(F){return this.throwIfInitialized(),this.findOptions.hint=F,this}min(F){return this.throwIfInitialized(),this.findOptions.min=F,this}max(F){return this.throwIfInitialized(),this.findOptions.max=F,this}returnKey(F){return this.throwIfInitialized(),this.findOptions.returnKey=F,this}showRecordId(F){return this.throwIfInitialized(),this.findOptions.showRecordId=F,this}addQueryModifier(F,A){if(this.throwIfInitialized(),F[0]!=="$")throw new u9.MongoInvalidArgumentError(`${F} is not a valid query modifier`);switch(F.substr(1)){case"comment":this.findOptions.comment=A;break;case"explain":this.findOptions.explain=A;break;case"hint":this.findOptions.hint=A;break;case"max":this.findOptions.max=A;break;case"maxTimeMS":this.findOptions.maxTimeMS=A;break;case"min":this.findOptions.min=A;break;case"orderby":this.findOptions.sort=(0,UR.formatSort)(A);break;case"query":this.cursorFilter=A;break;case"returnKey":this.findOptions.returnKey=A;break;case"showDiskLoc":this.findOptions.showRecordId=A;break;default:throw new u9.MongoInvalidArgumentError(`Invalid query modifier: ${F}`)}return this}comment(F){return this.throwIfInitialized(),this.findOptions.comment=F,this}maxAwaitTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new u9.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=F,this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new u9.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=F,this}project(F){return this.throwIfInitialized(),this.findOptions.projection=F,this}sort(F,A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new u9.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,UR.formatSort)(F,A),this}allowDiskUse(F=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new u9.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!F)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation(F){return this.throwIfInitialized(),this.findOptions.collation=F,this}limit(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new u9.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof F!=="number")throw new u9.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=F,this}skip(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new u9.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof F!=="number")throw new u9.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=F,this}}Ir.FindCursor=WR});var qR=Q((Nr)=>{Object.defineProperty(Nr,"__esModule",{value:!0});Nr.ListIndexesCursor=void 0;var _g1=A4(),yg1=cX(),vg1=K4();class KR extends vg1.AbstractCursor{constructor(F,A){super(F.client,F.s.namespace,A);this.parent=F,this.options=A}clone(){return new KR(this.parent,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new yg1.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:F}),$=await(0,_g1.executeOperation)(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:$}}}Nr.ListIndexesCursor=KR});var Tr=Q((jr)=>{Object.defineProperty(jr,"__esModule",{value:!0});jr.ListSearchIndexesCursor=void 0;var hg1=nX();class Rr extends hg1.AggregationCursor{constructor({fullNamespace:F,client:A},$,B={}){let J=$==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:$}}];super(A,F,J,B)}}jr.ListSearchIndexesCursor=Rr});var Sr=Q((kr)=>{Object.defineProperty(kr,"__esModule",{value:!0});kr.DistinctOperation=void 0;var mg1=K0(),dg1=W6(),YY=N0();class QR extends dg1.CommandOperation{constructor(F,A,$,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=mg1.MongoDBResponse,this.options=B??{},this.collection=F,this.key=A,this.query=$}get commandName(){return"distinct"}buildCommandDocument(F){let A={distinct:this.collection.collectionName,key:this.key,query:this.query};if(this.options.comment!==void 0)A.comment=this.options.comment;if(this.options.hint!=null)A.hint=this.options.hint;return A}handleOk(F){if(this.explain)return F.toObject(this.bsonOptions);return F.toObject(this.bsonOptions).values}}kr.DistinctOperation=QR;(0,YY.defineAspects)(QR,[YY.Aspect.READ_OPERATION,YY.Aspect.RETRYABLE,YY.Aspect.EXPLAINABLE,YY.Aspect.SUPPORTS_RAW_DATA])});var xr=Q((ur)=>{Object.defineProperty(ur,"__esModule",{value:!0});ur.EstimatedDocumentCountOperation=void 0;var cg1=K0(),lg1=W6(),DY=N0();class VR extends lg1.CommandOperation{constructor(F,A={}){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=cg1.MongoDBResponse,this.options=A,this.collectionName=F.collectionName}get commandName(){return"count"}buildCommandDocument(F,A){let $={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")$.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)$.comment=this.options.comment;return $}handleOk(F){return F.getNumber("n")??0}}ur.EstimatedDocumentCountOperation=VR;(0,DY.defineAspects)(VR,[DY.Aspect.READ_OPERATION,DY.Aspect.RETRYABLE,DY.Aspect.CURSOR_CREATING,DY.Aspect.SUPPORTS_RAW_DATA])});var ER=Q((vr)=>{Object.defineProperty(vr,"__esModule",{value:!0});vr.FindOneAndUpdateOperation=vr.FindOneAndReplaceOperation=vr.FindOneAndDeleteOperation=vr.FindAndModifyOperation=vr.ReturnDocument=void 0;var pg1=K0(),u8=$1(),ig1=F4(),ag1=OA(),xz=z1(),ng1=W6(),GY=N0();vr.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function br(F,A){if(F.new=A.returnDocument===vr.ReturnDocument.AFTER,F.upsert=A.upsert===!0,A.bypassDocumentValidation===!0)F.bypassDocumentValidation=A.bypassDocumentValidation;return F}class H$ extends ng1.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=pg1.MongoDBResponse,this.options=$,this.readPreference=ig1.ReadPreference.primary,this.collection=F,this.query=A}get commandName(){return"findAndModify"}buildCommandDocument(F,A){let $=this.options,B={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};$.includeResultMetadata??=!1;let J=(0,ag1.formatSort)($.sort);if(J)B.sort=J;if($.projection)B.fields=$.projection;if($.maxTimeMS)B.maxTimeMS=$.maxTimeMS;if($.writeConcern)B.writeConcern=$.writeConcern;if($.let)B.let=$.let;if($.comment!==void 0)B.comment=$.comment;if((0,xz.decorateWithCollation)(B,$),$.hint){if(this.writeConcern?.w===0&&(0,xz.maxWireVersion)(F)<9)throw new u8.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");B.hint=$.hint}return B}handleOk(F){let A=super.handleOk(F);return this.options.includeResultMetadata?A:A.value??null}}vr.FindAndModifyOperation=H$;class gr extends H${constructor(F,A,$){if(A==null||typeof A!=="object")throw new u8.MongoInvalidArgumentError('Argument "filter" must be an object');super(F,A,$)}buildCommandDocument(F,A){let $=super.buildCommandDocument(F,A);return $.remove=!0,$}}vr.FindOneAndDeleteOperation=gr;class _r extends H${constructor(F,A,$,B){if(A==null||typeof A!=="object")throw new u8.MongoInvalidArgumentError('Argument "filter" must be an object');if($==null||typeof $!=="object")throw new u8.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,xz.hasAtomicOperators)($))throw new u8.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(F,A,B);this.replacement=$}buildCommandDocument(F,A){let $=super.buildCommandDocument(F,A);return $.update=this.replacement,br($,this.options),$}}vr.FindOneAndReplaceOperation=_r;class yr extends H${constructor(F,A,$,B){if(A==null||typeof A!=="object")throw new u8.MongoInvalidArgumentError('Argument "filter" must be an object');if($==null||typeof $!=="object")throw new u8.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,xz.hasAtomicOperators)($,B))throw new u8.MongoInvalidArgumentError("Update document requires atomic operators");super(F,A,B);this.update=$,this.options=B}buildCommandDocument(F,A){let $=super.buildCommandDocument(F,A);if($.update=this.update,br($,this.options),this.options.arrayFilters)$.arrayFilters=this.options.arrayFilters;return $}}vr.FindOneAndUpdateOperation=yr;(0,GY.defineAspects)(H$,[GY.Aspect.WRITE_OPERATION,GY.Aspect.RETRYABLE,GY.Aspect.EXPLAINABLE,GY.Aspect.SUPPORTS_RAW_DATA])});var pr=Q((cr)=>{Object.defineProperty(cr,"__esModule",{value:!0});cr.CreateSearchIndexesOperation=void 0;var og1=K0(),eg1=N0();class dr extends eg1.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=og1.MongoDBResponse,this.collection=F,this.descriptions=A,this.ns=F.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(F,A){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(F){return super.handleOk(F).indexesCreated.map((A)=>A.name)}buildOptions(F){return{session:this.session,timeoutContext:F}}}cr.CreateSearchIndexesOperation=dr});var tr=Q((nr)=>{Object.defineProperty(nr,"__esModule",{value:!0});nr.DropSearchIndexOperation=void 0;var F_1=K0(),ir=$1(),A_1=N0();class ar extends A_1.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=F_1.MongoDBResponse,this.collection=F,this.name=A,this.ns=F.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(F,A){let B={dropSearchIndex:this.collection.fullNamespace.collection};if(typeof this.name==="string")B.name=this.name;return B}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){if(!(F instanceof ir.MongoServerError&&F.code===ir.MONGODB_ERROR_CODES.NamespaceNotFound))throw F}}nr.DropSearchIndexOperation=ar});var Ft=Q((or)=>{Object.defineProperty(or,"__esModule",{value:!0});or.UpdateSearchIndexOperation=void 0;var $_1=K0(),B_1=N0();class sr extends B_1.AbstractOperation{constructor(F,A,$){super();this.SERVER_COMMAND_RESPONSE_TYPE=$_1.MongoDBResponse,this.collection=F,this.name=A,this.definition=$,this.ns=F.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(F,A){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}}or.UpdateSearchIndexOperation=sr});var X$=Q((Jt)=>{Object.defineProperty(Jt,"__esModule",{value:!0});Jt.Collection=void 0;var J_1=J0(),X_1=DC(),Y_1=GC(),D_1=s5(),G_1=nX(),Z_1=HR(),U_1=qR(),z_1=Tr(),K$=$1(),W_1=YR(),At=rI(),H_1=Sr(),K_1=xr(),j6=A4(),LR=ER(),bz=cX(),q_1=sI(),Q_1=WP(),V_1=pr(),E_1=tr(),L_1=Ft(),wR=$C(),w_1=e9(),IR=F4(),w0=z1(),$t=J3();class Bt{constructor(F,A,$){this.db=F,this.s={db:F,options:$,namespace:new w0.MongoDBCollectionNamespace(F.databaseName,A),pkFactory:F.options?.pkFactory??w0.DEFAULT_PK_FACTORY,readPreference:IR.ReadPreference.fromOptions($),bsonOptions:(0,J_1.resolveBSONOptions)($,F),readConcern:w_1.ReadConcern.fromOptions($),writeConcern:$t.WriteConcern.fromOptions($)},this.client=F.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(F){this.s.collectionHint=(0,w0.normalizeHintField)(F)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(F,A){return await(0,j6.executeOperation)(this.client,new q_1.InsertOneOperation(this,F,(0,w0.resolveOptions)(this,A)))}async insertMany(F,A){if(!Array.isArray(F))throw new K$.MongoInvalidArgumentError('Argument "docs" must be an array of documents');A=(0,w0.resolveOptions)(this,A??{});let $=$t.WriteConcern.fromOptions(A)?.w!==0;try{let B=await this.bulkWrite(F.map((J)=>({insertOne:{document:J}})),A);return{acknowledged:$,insertedCount:B.insertedCount,insertedIds:B.insertedIds}}catch(B){if(B&&B.message==="Operation must be an object with an operation key")throw new K$.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw B}}async bulkWrite(F,A){if(!Array.isArray(F))throw new K$.MongoInvalidArgumentError('Argument "operations" must be an array of documents');if(A=(0,w0.resolveOptions)(this,A??{}),this.client.topology==null)await(0,j6.autoConnect)(this.client);let B=A.ordered===!1?this.initializeUnorderedBulkOp(A):this.initializeOrderedBulkOp(A);for(let J of F)B.raw(J);return await B.execute({...A})}async updateOne(F,A,$){return await(0,j6.executeOperation)(this.client,new wR.UpdateOneOperation(this.s.namespace,F,A,(0,w0.resolveOptions)(this,$)))}async replaceOne(F,A,$){return await(0,j6.executeOperation)(this.client,new wR.ReplaceOneOperation(this.s.namespace,F,A,(0,w0.resolveOptions)(this,$)))}async updateMany(F,A,$){return await(0,j6.executeOperation)(this.client,new wR.UpdateManyOperation(this.s.namespace,F,A,(0,w0.resolveOptions)(this,$)))}async deleteOne(F={},A={}){return await(0,j6.executeOperation)(this.client,new At.DeleteOneOperation(this.s.namespace,F,(0,w0.resolveOptions)(this,A)))}async deleteMany(F={},A={}){return await(0,j6.executeOperation)(this.client,new At.DeleteManyOperation(this.s.namespace,F,(0,w0.resolveOptions)(this,A)))}async rename(F,A){return await(0,j6.executeOperation)(this.client,new Q_1.RenameOperation(this,F,(0,w0.resolveOptions)(void 0,{...A,readPreference:IR.ReadPreference.PRIMARY})))}async drop(F){return await this.db.dropCollection(this.collectionName,F)}async findOne(F={},A={}){let{batchSize:$,noCursorTimeout:B,...J}=A;J.singleBatch=!0;let X=this.find(F,J).limit(1),Y=await X.next();return await X.close(),Y}find(F={},A={}){return new Z_1.FindCursor(this.client,this.s.namespace,F,(0,w0.resolveOptions)(this,A))}async options(F){F=(0,w0.resolveOptions)(this,F);let[A]=await this.db.listCollections({name:this.collectionName},{...F,nameOnly:!1}).toArray();if(A==null||A.options==null)throw new K$.MongoAPIError(`collection ${this.namespace} not found`);return A.options}async isCapped(F){let{capped:A}=await this.options(F);return Boolean(A)}async createIndex(F,A){return(await(0,j6.executeOperation)(this.client,bz.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,F,(0,w0.resolveOptions)(this,A))))[0]}async createIndexes(F,A){return await(0,j6.executeOperation)(this.client,bz.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,F,(0,w0.resolveOptions)(this,{...A,maxTimeMS:void 0})))}async dropIndex(F,A){return await(0,j6.executeOperation)(this.client,new bz.DropIndexOperation(this,F,{...(0,w0.resolveOptions)(this,A),readPreference:IR.ReadPreference.primary}))}async dropIndexes(F){try{return await(0,j6.executeOperation)(this.client,new bz.DropIndexOperation(this,"*",(0,w0.resolveOptions)(this,F))),!0}catch(A){if(A instanceof K$.MongoOperationTimeoutError)throw A;return!1}}listIndexes(F){return new U_1.ListIndexesCursor(this,(0,w0.resolveOptions)(this,F))}async indexExists(F,A){let $=Array.isArray(F)?F:[F],B=new Set(await this.listIndexes(A).map(({name:J})=>J).toArray());return $.every((J)=>B.has(J))}async indexInformation(F){return await this.indexes({...F,full:F?.full??!1})}async estimatedDocumentCount(F){return await(0,j6.executeOperation)(this.client,new K_1.EstimatedDocumentCountOperation(this,(0,w0.resolveOptions)(this,F)))}async countDocuments(F={},A={}){let $=[];if($.push({$match:F}),typeof A.skip==="number")$.push({$skip:A.skip});if(typeof A.limit==="number")$.push({$limit:A.limit});$.push({$group:{_id:1,n:{$sum:1}}});let B=this.aggregate($,A),J=await B.next();return await B.close(),J?.n??0}async distinct(F,A={},$={}){return await(0,j6.executeOperation)(this.client,new H_1.DistinctOperation(this,F,A,(0,w0.resolveOptions)(this,$)))}async indexes(F){let A=await this.listIndexes(F).toArray();if(F?.full??!0)return A;return Object.fromEntries(A.map(({name:J,key:X})=>[J,Object.entries(X)]))}async findOneAndDelete(F,A){return await(0,j6.executeOperation)(this.client,new LR.FindOneAndDeleteOperation(this,F,(0,w0.resolveOptions)(this,A)))}async findOneAndReplace(F,A,$){return await(0,j6.executeOperation)(this.client,new LR.FindOneAndReplaceOperation(this,F,A,(0,w0.resolveOptions)(this,$)))}async findOneAndUpdate(F,A,$){return await(0,j6.executeOperation)(this.client,new LR.FindOneAndUpdateOperation(this,F,A,(0,w0.resolveOptions)(this,$)))}aggregate(F=[],A){if(!Array.isArray(F))throw new K$.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new G_1.AggregationCursor(this.client,this.s.namespace,F,(0,w0.resolveOptions)(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new D_1.ChangeStream(this,F,(0,w0.resolveOptions)(this,A))}initializeUnorderedBulkOp(F){return new Y_1.UnorderedBulkOperation(this,(0,w0.resolveOptions)(this,F))}initializeOrderedBulkOp(F){return new X_1.OrderedBulkOperation(this,(0,w0.resolveOptions)(this,F))}async count(F={},A={}){return await(0,j6.executeOperation)(this.client,new W_1.CountOperation(this.fullNamespace,F,(0,w0.resolveOptions)(this,A)))}listSearchIndexes(F,A){A=typeof F==="object"?F:A==null?{}:A;let $=F==null?null:typeof F==="object"?null:F;return new z_1.ListSearchIndexesCursor(this,$,A)}async createSearchIndex(F){let[A]=await this.createSearchIndexes([F]);return A}async createSearchIndexes(F){return await(0,j6.executeOperation)(this.client,new V_1.CreateSearchIndexesOperation(this,F))}async dropSearchIndex(F){return await(0,j6.executeOperation)(this.client,new E_1.DropSearchIndexOperation(this,F))}async updateSearchIndex(F,A){return await(0,j6.executeOperation)(this.client,new L_1.UpdateSearchIndexOperation(this,F,A))}}Jt.Collection=Bt});var PR=Q((Gt)=>{Object.defineProperty(Gt,"__esModule",{value:!0});Gt.ChangeStreamCursor=void 0;var CR=s5(),Yt=N6(),I_1=$X(),C_1=A4(),Dt=z1(),N_1=K4();class NR extends N_1.AbstractCursor{constructor(F,A,$=[],B={}){super(F,A,{...B,tailable:!0,awaitData:!0});if(this.pipeline=$,this.changeStreamCursorOptions=B,this._resumeToken=null,this.startAtOperationTime=B.startAtOperationTime??null,B.startAfter)this.resumeToken=B.startAfter;else if(B.resumeAfter)this.resumeToken=B.resumeAfter}set resumeToken(F){this._resumeToken=F,this.emit(CR.ChangeStream.RESUME_TOKEN_CHANGED,F)}get resumeToken(){return this._resumeToken}get resumeOptions(){let F={...this.changeStreamCursorOptions};for(let A of["resumeAfter","startAfter","startAtOperationTime"])delete F[A];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)F.startAfter=this.resumeToken;else F.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null)F.startAtOperationTime=this.startAtOperationTime;return F}cacheResumeToken(F){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=F;this.hasReceived=!0}_processBatch(F){let{postBatchResumeToken:A}=F;if(A){if(this.postBatchResumeToken=A,F.batchSize===0)this.resumeToken=A}}clone(){return new NR(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(F){let A=new I_1.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:F}),$=await(0,C_1.executeOperation)(F.client,A,this.timeoutContext),B=A.server;if(this.maxWireVersion=(0,Dt.maxWireVersion)(B),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null)this.startAtOperationTime=$.operationTime;return this._processBatch($),this.emit(Yt.INIT,$),this.emit(Yt.RESPONSE),{server:B,session:F,response:$}}async getMore(F){let A=await super.getMore(F);return this.maxWireVersion=(0,Dt.maxWireVersion)(this.server),this._processBatch(A),this.emit(CR.ChangeStream.MORE,A),this.emit(CR.ChangeStream.RESPONSE),A}}Gt.ChangeStreamCursor=NR});var s5=Q((Ut)=>{Object.defineProperty(Ut,"__esModule",{value:!0});Ut.ChangeStream=void 0;var P_1=X$(),U2=N6(),R_1=K4(),j_1=PR(),M_1=Ez(),B4=$1(),T_1=I8(),k_1=A9(),O_1=nA(),S_1=l6(),p2=z1(),u_1=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],AF={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},f_1=[U2.RESUME_TOKEN_CHANGED,U2.END,U2.CLOSE],x_1="A change stream document has been received that lacks a resume token (_id).",gz="ChangeStream is closed";class h4 extends k_1.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(F,A=[],$={}){super();this.pipeline=A,this.options={...$};let B;if(delete this.options.writeConcern,F instanceof P_1.Collection)this.type=AF.COLLECTION,B=F.s.db.client.options.serverSelectionTimeoutMS;else if(F instanceof M_1.Db)this.type=AF.DATABASE,B=F.client.options.serverSelectionTimeoutMS;else if(F instanceof T_1.MongoClient)this.type=AF.CLUSTER,B=F.options.serverSelectionTimeoutMS;else throw new B4.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=F,this.namespace=F.s.namespace,!this.options.readPreference&&F.readPreference)this.options.readPreference=F.readPreference;if(this.cursor=this._createChangeStreamCursor($),this.isClosed=!1,this.mode=!1,this.on("newListener",(J)=>{if(J==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(J)=>{if(J==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new S_1.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:B})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof B4.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch($){(0,p2.squashError)($)}throw A}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.next();return this._processChange(F??null)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof B4.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch($){(0,p2.squashError)($)}throw A}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.tryNext();if(!F)return null;return this._processChange(F)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof B4.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch($){(0,p2.squashError)($)}throw A}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(F){(0,p2.squashError)(F)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let F=this.cursor;try{await F.close()}finally{this._endStream()}}stream(F){if(this.closed)throw new B4.MongoChangeStreamError(gz);return this.streamOptions=F,this.cursor.stream(F)}_setIsEmitter(){if(this.mode==="iterator")throw new B4.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new B4.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(F){let A=(0,p2.filterOptions)(F,u_1);if(this.type===AF.CLUSTER)A.allChangesForCluster=!0;let $=[{$changeStream:A},...this.pipeline],B=this.type===AF.CLUSTER?this.parent:this.type===AF.DATABASE?this.parent.client:this.type===AF.COLLECTION?this.parent.client:null;if(B==null)throw new B4.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let J=new j_1.ChangeStreamCursor(B,this.namespace,$,{...F,timeoutContext:this.timeoutContext?new R_1.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let X of f_1)J.on(X,(Y)=>this.emit(X,Y));if(this.listenerCount(h4.CHANGE)>0)this._streamEvents(J);return J}_closeEmitterModeWithError(F){this.emit(h4.ERROR,F),this.close().then(void 0,p2.squashError)}_streamEvents(F){this._setIsEmitter();let A=this.cursorStream??F.stream();this.cursorStream=A,A.on("data",($)=>{try{let B=this._processChange($);this.emit(h4.CHANGE,B)}catch(B){this.emit(h4.ERROR,B)}this.timeoutContext?.refresh()}),A.on("error",($)=>this._processErrorStreamMode($,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(F){if(this.isClosed)throw new B4.MongoAPIError(gz);if(F==null)throw new B4.MongoRuntimeError(gz);if(F&&!F._id)throw new B4.MongoChangeStreamError(x_1);return this.cursor.cacheResumeToken(F._id),this.options.startAtOperationTime=void 0,F}_processErrorStreamMode(F,A){if(this.isClosed)return;if(A&&((0,B4.isResumableError)(F,this.cursor.maxWireVersion)||F instanceof B4.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume(F),($)=>{return(0,p2.squashError)($),this._resume(F)}).then(()=>{if(F instanceof B4.MongoOperationTimeoutError)this.emit(h4.ERROR,F)},()=>this._closeEmitterModeWithError(F));else this._closeEmitterModeWithError(F)}async _processErrorIteratorMode(F,A){if(this.isClosed)throw new B4.MongoAPIError(gz);if(A&&((0,B4.isResumableError)(F,this.cursor.maxWireVersion)||F instanceof B4.MongoOperationTimeoutError)){try{await this.cursor.close()}catch($){(0,p2.squashError)($)}if(await this._resume(F),F instanceof B4.MongoOperationTimeoutError)throw F}else{try{await this.close()}catch($){(0,p2.squashError)($)}throw F}}async _resume(F){this.timeoutContext?.refresh();let A=(0,p2.getTopology)(this.parent);try{await A.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),F}}}Ut.ChangeStream=h4;h4.RESPONSE=U2.RESPONSE;h4.MORE=U2.MORE;h4.INIT=U2.INIT;h4.CLOSE=U2.CLOSE;h4.CHANGE=U2.CHANGE;h4.END=U2.END;h4.ERROR=U2.ERROR;h4.RESUME_TOKEN_CHANGED=U2.RESUME_TOKEN_CHANGED;(0,O_1.configureResourceManagement)(h4.prototype)});var RR=Q((Ht)=>{Object.defineProperty(Ht,"__esModule",{value:!0});Ht.GridFSBucketReadStream=void 0;var b_1=x("stream"),g_1=K4(),X9=$1(),__1=l6();class _z extends b_1.Readable{constructor(F,A,$,B,J){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:F,expected:0,files:A,filter:B,init:!1,expectedEnd:0,options:{start:0,end:0,...J},readPreference:$,timeoutContext:J?.timeoutMS!=null?new __1.CSOTTimeoutContext({timeoutMS:J.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;h_1(this,()=>y_1(this))}start(F=0){return Wt(this),this.s.options.start=F,this}end(F=0){return Wt(this),this.s.options.end=F,this}async abort(){this.push(null),this.destroy();let F=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:F})}}Ht.GridFSBucketReadStream=_z;_z.FILE="file";function Wt(F){if(F.s.init)throw new X9.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function y_1(F){if(F.destroyed)return;if(!F.s.cursor)return;if(!F.s.file)return;let A=($)=>{if(F.destroyed)return;if(!$){F.push(null),F.s.cursor?.close().then(void 0,(z)=>F.destroy(z));return}if(!F.s.file)return;let B=F.s.file.length-F.s.bytesRead,J=F.s.expected++,X=Math.min(F.s.file.chunkSize,B);if($.n>J)return F.destroy(new X9.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${$.n}, expected: ${J}`));if($.n<J)return F.destroy(new X9.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${$.n}, expected: ${J}`));let Y=Buffer.isBuffer($.data)?$.data:$.data.buffer;if(Y.byteLength!==X){if(B<=0)return F.destroy(new X9.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${$.n}, expected file length ${F.s.file.length} bytes but already read ${F.s.bytesRead} bytes`));return F.destroy(new X9.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${Y.byteLength}, expected: ${X}`))}if(F.s.bytesRead+=Y.byteLength,Y.byteLength===0)return F.push(null);let D=null,G=null;if(F.s.bytesToSkip!=null)D=F.s.bytesToSkip,F.s.bytesToSkip=0;let Z=J===F.s.expectedEnd-1,U=F.s.options.end-F.s.bytesToSkip;if(Z&&F.s.bytesToTrim!=null)G=F.s.file.chunkSize-F.s.bytesToTrim;else if(F.s.options.end&&U<$.data.byteLength)G=U;if(D!=null||G!=null)Y=Y.slice(D||0,G||Y.byteLength);F.push(Y);return};F.s.cursor.next().then(A,($)=>{if(F.destroyed)return;F.destroy($)})}function v_1(F){let A={};if(F.s.readPreference)A.readPreference=F.s.readPreference;if(F.s.options&&F.s.options.sort)A.sort=F.s.options.sort;if(F.s.options&&F.s.options.skip)A.skip=F.s.options.skip;let $=(J)=>{if(F.destroyed)return;if(!J){let G=`FileNotFound: file ${F.s.filter._id?F.s.filter._id.toString():F.s.filter.filename} was not found`,Z=new X9.MongoRuntimeError(G);return Z.code="ENOENT",F.destroy(Z)}if(J.length<=0){F.push(null);return}if(F.destroyed){F.destroy();return}try{F.s.bytesToSkip=m_1(F,J,F.s.options)}catch(D){return F.destroy(D)}let X={files_id:J._id};if(F.s.options&&F.s.options.start!=null){let D=Math.floor(F.s.options.start/J.chunkSize);if(D>0)X.n={$gte:D}}let Y;try{Y=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(D){return F.destroy(D)}if(F.s.cursor=F.s.chunks.find(X,{timeoutMode:F.s.options.timeoutMS!=null?g_1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:Y}).sort({n:1}),F.s.readPreference)F.s.cursor.withReadPreference(F.s.readPreference);F.s.expectedEnd=Math.ceil(J.length/J.chunkSize),F.s.file=J;try{F.s.bytesToTrim=d_1(F,J,F.s.cursor,F.s.options)}catch(D){return F.destroy(D)}F.emit(_z.FILE,J);return},B;try{B=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(J){if(!F.destroyed)F.destroy(J);return}A.timeoutMS=B,F.s.files.findOne(F.s.filter,A).then($,(J)=>{if(F.destroyed)return;F.destroy(J)})}function h_1(F,A){if(F.s.file)return A();if(!F.s.init)v_1(F),F.s.init=!0;F.once("file",()=>{A()})}function m_1(F,A,$){if($&&$.start!=null){if($.start>A.length)throw new X9.MongoInvalidArgumentError(`Stream start (${$.start}) must not be more than the length of the file (${A.length})`);if($.start<0)throw new X9.MongoInvalidArgumentError(`Stream start (${$.start}) must not be negative`);if($.end!=null&&$.end<$.start)throw new X9.MongoInvalidArgumentError(`Stream start (${$.start}) must not be greater than stream end (${$.end})`);return F.s.bytesRead=Math.floor($.start/A.chunkSize)*A.chunkSize,F.s.expected=Math.floor($.start/A.chunkSize),$.start-F.s.bytesRead}throw new X9.MongoInvalidArgumentError("Start option must be defined")}function d_1(F,A,$,B){if(B&&B.end!=null){if(B.end>A.length)throw new X9.MongoInvalidArgumentError(`Stream end (${B.end}) must not be more than the length of the file (${A.length})`);if(B.start==null||B.start<0)throw new X9.MongoInvalidArgumentError(`Stream end (${B.end}) must not be negative`);let J=B.start!=null?Math.floor(B.start/A.chunkSize):0;return $.limit(Math.ceil(B.end/A.chunkSize)-J),F.s.expectedEnd=Math.ceil(B.end/A.chunkSize),Math.ceil(B.end/A.chunkSize)*A.chunkSize-B.end}throw new X9.MongoInvalidArgumentError("End option must be defined")}});var MR=Q((wt)=>{Object.defineProperty(wt,"__esModule",{value:!0});wt.GridFSBucketWriteStream=void 0;var c_1=x("stream"),Qt=J0(),Vt=K4(),z2=$1(),l_1=l6(),qt=z1(),p_1=J3();class Et extends c_1.Writable{constructor(F,A,$){super();if(this.gridFSFile=null,$=$??{},this.bucket=F,this.chunks=F.s._chunksCollection,this.filename=A,this.files=F.s._filesCollection,this.options=$,this.writeConcern=p_1.WriteConcern.fromOptions($)||F.s.options.writeConcern,this.done=!1,this.id=$.id?$.id:new Qt.ObjectId,this.chunkSizeBytes=$.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},$.timeoutMS!=null)this.timeoutContext=new l_1.CSOTTimeoutContext({timeoutMS:$.timeoutMS,serverSelectionTimeoutMS:(0,qt.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct(F){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,a_1(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),F()},(A)=>{if(A instanceof z2.MongoOperationTimeoutError)return $F(this,A,F);(0,qt.squashError)(A),F()});else return process.nextTick(F)}_write(F,A,$){r_1(this,F,A,$)}_final(F){if(this.state.streamEnd)return process.nextTick(F);this.state.streamEnd=!0,t_1(this,F)}async abort(){if(this.state.streamEnd)throw new z2.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new z2.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let F=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:F})}}wt.GridFSBucketWriteStream=Et;function $F(F,A,$){if(F.state.errored){process.nextTick($);return}F.state.errored=!0,process.nextTick($,A)}function Lt(F,A,$){return{_id:new Qt.ObjectId,files_id:F,n:A,data:$}}async function i_1(F){let A={files_id:1,n:1},$;$=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let B;try{B=await F.chunks.listIndexes({timeoutMode:$!=null?Vt.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:$}).toArray()}catch(X){if(X instanceof z2.MongoError&&X.code===z2.MONGODB_ERROR_CODES.NamespaceNotFound)B=[];else throw X}if(!B.find((X)=>{if(Object.keys(X.key).length===2&&X.key.files_id===1&&X.key.n===1)return!0;return!1}))$=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.chunks.createIndex(A,{...F.writeConcern,background:!0,unique:!0,timeoutMS:$})}function jR(F,A){if(F.done)return process.nextTick(A);if(F.state.streamEnd&&F.state.outstandingRequests===0&&!F.state.errored){F.done=!0;let $=n_1(F.id,F.length,F.chunkSizeBytes,F.filename,F.options.contentType,F.options.aliases,F.options.metadata);if(yz(F,A))return;let B=F.timeoutContext?.remainingTimeMS;if(B!=null&&B<=0)return $F(F,new z2.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);F.files.insertOne($,{writeConcern:F.writeConcern,timeoutMS:B}).then(()=>{F.gridFSFile=$,A()},(J)=>{return $F(F,J,A)});return}process.nextTick(A)}async function a_1(F){let A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);if(await F.files.findOne({},{projection:{_id:1},timeoutMS:A})!=null)return;let B={filename:1,uploadDate:1},J;A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let X={timeoutMode:A!=null?Vt.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:A};try{J=await F.files.listIndexes(X).toArray()}catch(D){if(D instanceof z2.MongoError&&D.code===z2.MONGODB_ERROR_CODES.NamespaceNotFound)J=[];else throw D}if(!J.find((D)=>{if(Object.keys(D.key).length===2&&D.key.filename===1&&D.key.uploadDate===1)return!0;return!1}))A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.files.createIndex(B,{background:!1,timeoutMS:A});await i_1(F)}function n_1(F,A,$,B,J,X,Y){let D={_id:F,length:A,chunkSize:$,uploadDate:new Date,filename:B};if(J)D.contentType=J;if(X)D.aliases=X;if(Y)D.metadata=Y;return D}function r_1(F,A,$,B){if(yz(F,B))return;let J=Buffer.isBuffer(A)?A:Buffer.from(A,$);if(F.length+=J.length,F.pos+J.length<F.chunkSizeBytes){J.copy(F.bufToStore,F.pos),F.pos+=J.length,process.nextTick(B);return}let X=J.length,Y=F.chunkSizeBytes-F.pos,D=Math.min(Y,J.length),G=0;while(X>0){let Z=J.length-X;J.copy(F.bufToStore,F.pos,Z,Z+D),F.pos+=D,Y-=D;let U;if(Y===0){U=Lt(F.id,F.n,Buffer.from(F.bufToStore));let z=F.timeoutContext?.remainingTimeMS;if(z!=null&&z<=0)return $F(F,new z2.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),B);if(++F.state.outstandingRequests,++G,yz(F,B))return;F.chunks.insertOne(U,{writeConcern:F.writeConcern,timeoutMS:z}).then(()=>{if(--F.state.outstandingRequests,--G,!G)jR(F,B)},(W)=>{return $F(F,W,B)}),Y=F.chunkSizeBytes,F.pos=0,++F.n}X-=D,D=Math.min(Y,X)}}function t_1(F,A){if(F.pos===0)return jR(F,A);let $=Buffer.alloc(F.pos);F.bufToStore.copy($,0,0,F.pos);let B=Lt(F.id,F.n,$);if(yz(F,A))return;let J=F.timeoutContext?.remainingTimeMS;if(J!=null&&J<=0)return $F(F,new z2.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);++F.state.outstandingRequests,F.chunks.insertOne(B,{writeConcern:F.writeConcern,timeoutMS:J}).then(()=>{--F.state.outstandingRequests,jR(F,A)},(X)=>{return $F(F,X,A)})}function yz(F,A){if(F.state.aborted)return process.nextTick(A,new z2.MongoAPIError("Stream has been aborted")),!0;return!1}});var Mt=Q((Rt)=>{Object.defineProperty(Rt,"__esModule",{value:!0});Rt.GridFSBucket=void 0;var TR=$1(),s_1=A9(),Ct=l6(),vz=z1(),o_1=J3(),Nt=RR(),Pt=MR(),e_1={bucketName:"fs",chunkSizeBytes:261120};class kR extends s_1.TypedEventEmitter{constructor(F,A){super();this.on("error",vz.noop),this.setMaxListeners(0);let $=(0,vz.resolveOptions)(F,{...e_1,...A,writeConcern:o_1.WriteConcern.fromOptions(A)});this.s={db:F,options:$,_chunksCollection:F.collection($.bucketName+".chunks"),_filesCollection:F.collection($.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(F,A){return new Pt.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...A})}openUploadStreamWithId(F,A,$){return new Pt.GridFSBucketWriteStream(this,A,{timeoutMS:this.s.options.timeoutMS,...$,id:F})}openDownloadStream(F,A){return new Nt.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:F},{timeoutMS:this.s.options.timeoutMS,...A})}async delete(F,A){let{timeoutMS:$}=(0,vz.resolveOptions)(this.s.db,A),B=void 0;if($)B=new Ct.CSOTTimeoutContext({timeoutMS:$,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:J}=await this.s._filesCollection.deleteOne({_id:F},{timeoutMS:B?.remainingTimeMS}),X=B?.remainingTimeMS;if(X!=null&&X<=0)throw new TR.MongoOperationTimeoutError(`Timed out after ${$}ms`);if(await this.s._chunksCollection.deleteMany({files_id:F},{timeoutMS:X}),J===0)throw new TR.MongoRuntimeError(`File not found for id ${F}`)}find(F={},A={}){return this.s._filesCollection.find(F,A)}openDownloadStreamByName(F,A){let $={uploadDate:-1},B=void 0;if(A&&A.revision!=null)if(A.revision>=0)$={uploadDate:1},B=A.revision;else B=-A.revision-1;return new Nt.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:F},{timeoutMS:this.s.options.timeoutMS,...A,sort:$,skip:B})}async rename(F,A,$){let B={_id:F},J={$set:{filename:A}},{matchedCount:X}=await this.s._filesCollection.updateOne(B,J,$);if(X===0)throw new TR.MongoRuntimeError(`File with id ${F} not found`)}async drop(F){let{timeoutMS:A}=(0,vz.resolveOptions)(this.s.db,F),$=void 0;if(A)$=new Ct.CSOTTimeoutContext({timeoutMS:A,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if($){await this.s._filesCollection.drop({timeoutMS:$.remainingTimeMS});let B=$.getRemainingTimeMSOrThrow(`Timed out after ${A}ms`);await this.s._chunksCollection.drop({timeoutMS:B})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}Rt.GridFSBucket=kR;kR.INDEX="index"});var iX=Q((_)=>{Object.defineProperty(_,"__esModule",{value:!0});_.MongoRuntimeError=_.MongoParseError=_.MongoOperationTimeoutError=_.MongoOIDCError=_.MongoNotConnectedError=_.MongoNetworkTimeoutError=_.MongoNetworkError=_.MongoMissingDependencyError=_.MongoMissingCredentialsError=_.MongoKerberosError=_.MongoInvalidArgumentError=_.MongoGridFSStreamError=_.MongoGridFSChunkError=_.MongoGCPError=_.MongoExpiredSessionError=_.MongoError=_.MongoDriverError=_.MongoDecompressionError=_.MongoCursorInUseError=_.MongoCursorExhaustedError=_.MongoCompatibilityError=_.MongoClientClosedError=_.MongoClientBulkWriteExecutionError=_.MongoClientBulkWriteError=_.MongoClientBulkWriteCursorError=_.MongoChangeStreamError=_.MongoBatchReExecutionError=_.MongoAzureError=_.MongoAWSError=_.MongoAPIError=_.ExplainableCursor=_.ChangeStreamCursor=_.ClientEncryption=_.MongoBulkWriteError=_.UUID=_.Timestamp=_.ObjectId=_.MinKey=_.MaxKey=_.Long=_.Int32=_.Double=_.Decimal128=_.DBRef=_.Code=_.BSONType=_.BSONSymbol=_.BSONRegExp=_.Binary=_.BSON=void 0;_.CommandFailedEvent=_.WriteConcern=_.ReadPreference=_.ReadConcern=_.TopologyType=_.ServerType=_.ReadPreferenceMode=_.ReadConcernLevel=_.ProfilingLevel=_.ReturnDocument=_.SeverityLevel=_.MongoLoggableComponent=_.ServerApiVersion=_.ExplainVerbosity=_.MongoErrorLabel=_.CursorTimeoutMode=_.CURSOR_FLAGS=_.Compressor=_.AuthMechanism=_.GSSAPICanonicalizationValue=_.AutoEncryptionLoggerLevel=_.BatchType=_.UnorderedBulkOperation=_.OrderedBulkOperation=_.MongoClient=_.ListIndexesCursor=_.ListCollectionsCursor=_.GridFSBucketWriteStream=_.GridFSBucketReadStream=_.GridFSBucket=_.FindCursor=_.Db=_.Collection=_.ClientSession=_.ChangeStream=_.CancellationToken=_.AggregationCursor=_.Admin=_.AbstractCursor=_.configureExplicitResourceManagement=_.MongoWriteConcernError=_.MongoUnexpectedServerResponseError=_.MongoTransactionError=_.MongoTopologyClosedError=_.MongoTailableCursorError=_.MongoSystemError=_.MongoStalePrimaryError=_.MongoServerSelectionError=_.MongoServerError=_.MongoServerClosedError=void 0;_.MongoClientAuthProviders=_.MongoCryptKMSRequestNetworkTimeoutError=_.MongoCryptInvalidArgumentError=_.MongoCryptError=_.MongoCryptCreateEncryptedCollectionError=_.MongoCryptCreateDataKeyError=_.MongoCryptAzureKMSRequestError=_.SrvPollingEvent=_.WaitingForSuitableServerEvent=_.ServerSelectionSucceededEvent=_.ServerSelectionStartedEvent=_.ServerSelectionFailedEvent=_.ServerSelectionEvent=_.TopologyOpeningEvent=_.TopologyDescriptionChangedEvent=_.TopologyClosedEvent=_.ServerOpeningEvent=_.ServerHeartbeatSucceededEvent=_.ServerHeartbeatStartedEvent=_.ServerHeartbeatFailedEvent=_.ServerDescriptionChangedEvent=_.ServerClosedEvent=_.ConnectionReadyEvent=_.ConnectionPoolReadyEvent=_.ConnectionPoolMonitoringEvent=_.ConnectionPoolCreatedEvent=_.ConnectionPoolClosedEvent=_.ConnectionPoolClearedEvent=_.ConnectionCreatedEvent=_.ConnectionClosedEvent=_.ConnectionCheckOutStartedEvent=_.ConnectionCheckOutFailedEvent=_.ConnectionCheckedOutEvent=_.ConnectionCheckedInEvent=_.CommandSucceededEvent=_.CommandStartedEvent=void 0;var Fy1=pI();Object.defineProperty(_,"Admin",{enumerable:!0,get:function(){return Fy1.Admin}});var Ay1=DC();Object.defineProperty(_,"OrderedBulkOperation",{enumerable:!0,get:function(){return Ay1.OrderedBulkOperation}});var $y1=GC();Object.defineProperty(_,"UnorderedBulkOperation",{enumerable:!0,get:function(){return $y1.UnorderedBulkOperation}});var By1=s5();Object.defineProperty(_,"ChangeStream",{enumerable:!0,get:function(){return By1.ChangeStream}});var Jy1=X$();Object.defineProperty(_,"Collection",{enumerable:!0,get:function(){return Jy1.Collection}});var Xy1=K4();Object.defineProperty(_,"AbstractCursor",{enumerable:!0,get:function(){return Xy1.AbstractCursor}});var Yy1=nX();Object.defineProperty(_,"AggregationCursor",{enumerable:!0,get:function(){return Yy1.AggregationCursor}});var Dy1=HR();Object.defineProperty(_,"FindCursor",{enumerable:!0,get:function(){return Dy1.FindCursor}});var Gy1=BP();Object.defineProperty(_,"ListCollectionsCursor",{enumerable:!0,get:function(){return Gy1.ListCollectionsCursor}});var Zy1=qR();Object.defineProperty(_,"ListIndexesCursor",{enumerable:!0,get:function(){return Zy1.ListIndexesCursor}});var Uy1=Ez();Object.defineProperty(_,"Db",{enumerable:!0,get:function(){return Uy1.Db}});var zy1=Mt();Object.defineProperty(_,"GridFSBucket",{enumerable:!0,get:function(){return zy1.GridFSBucket}});var Wy1=RR();Object.defineProperty(_,"GridFSBucketReadStream",{enumerable:!0,get:function(){return Wy1.GridFSBucketReadStream}});var Hy1=MR();Object.defineProperty(_,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return Hy1.GridFSBucketWriteStream}});var Ky1=I8();Object.defineProperty(_,"MongoClient",{enumerable:!0,get:function(){return Ky1.MongoClient}});var qy1=A9();Object.defineProperty(_,"CancellationToken",{enumerable:!0,get:function(){return qy1.CancellationToken}});var Qy1=aA();Object.defineProperty(_,"ClientSession",{enumerable:!0,get:function(){return Qy1.ClientSession}});var Vy1=J0();Object.defineProperty(_,"BSON",{enumerable:!0,get:function(){return Vy1.BSON}});var z3=J0();Object.defineProperty(_,"Binary",{enumerable:!0,get:function(){return z3.Binary}});Object.defineProperty(_,"BSONRegExp",{enumerable:!0,get:function(){return z3.BSONRegExp}});Object.defineProperty(_,"BSONSymbol",{enumerable:!0,get:function(){return z3.BSONSymbol}});Object.defineProperty(_,"BSONType",{enumerable:!0,get:function(){return z3.BSONType}});Object.defineProperty(_,"Code",{enumerable:!0,get:function(){return z3.Code}});Object.defineProperty(_,"DBRef",{enumerable:!0,get:function(){return z3.DBRef}});Object.defineProperty(_,"Decimal128",{enumerable:!0,get:function(){return z3.Decimal128}});Object.defineProperty(_,"Double",{enumerable:!0,get:function(){return z3.Double}});Object.defineProperty(_,"Int32",{enumerable:!0,get:function(){return z3.Int32}});Object.defineProperty(_,"Long",{enumerable:!0,get:function(){return z3.Long}});Object.defineProperty(_,"MaxKey",{enumerable:!0,get:function(){return z3.MaxKey}});Object.defineProperty(_,"MinKey",{enumerable:!0,get:function(){return z3.MinKey}});Object.defineProperty(_,"ObjectId",{enumerable:!0,get:function(){return z3.ObjectId}});Object.defineProperty(_,"Timestamp",{enumerable:!0,get:function(){return z3.Timestamp}});Object.defineProperty(_,"UUID",{enumerable:!0,get:function(){return z3.UUID}});var Ey1=ZX();Object.defineProperty(_,"MongoBulkWriteError",{enumerable:!0,get:function(){return Ey1.MongoBulkWriteError}});var Ly1=lU();Object.defineProperty(_,"ClientEncryption",{enumerable:!0,get:function(){return Ly1.ClientEncryption}});var wy1=PR();Object.defineProperty(_,"ChangeStreamCursor",{enumerable:!0,get:function(){return wy1.ChangeStreamCursor}});var Iy1=uz();Object.defineProperty(_,"ExplainableCursor",{enumerable:!0,get:function(){return Iy1.ExplainableCursor}});var m1=$1();Object.defineProperty(_,"MongoAPIError",{enumerable:!0,get:function(){return m1.MongoAPIError}});Object.defineProperty(_,"MongoAWSError",{enumerable:!0,get:function(){return m1.MongoAWSError}});Object.defineProperty(_,"MongoAzureError",{enumerable:!0,get:function(){return m1.MongoAzureError}});Object.defineProperty(_,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return m1.MongoBatchReExecutionError}});Object.defineProperty(_,"MongoChangeStreamError",{enumerable:!0,get:function(){return m1.MongoChangeStreamError}});Object.defineProperty(_,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return m1.MongoClientBulkWriteCursorError}});Object.defineProperty(_,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return m1.MongoClientBulkWriteError}});Object.defineProperty(_,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return m1.MongoClientBulkWriteExecutionError}});Object.defineProperty(_,"MongoClientClosedError",{enumerable:!0,get:function(){return m1.MongoClientClosedError}});Object.defineProperty(_,"MongoCompatibilityError",{enumerable:!0,get:function(){return m1.MongoCompatibilityError}});Object.defineProperty(_,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return m1.MongoCursorExhaustedError}});Object.defineProperty(_,"MongoCursorInUseError",{enumerable:!0,get:function(){return m1.MongoCursorInUseError}});Object.defineProperty(_,"MongoDecompressionError",{enumerable:!0,get:function(){return m1.MongoDecompressionError}});Object.defineProperty(_,"MongoDriverError",{enumerable:!0,get:function(){return m1.MongoDriverError}});Object.defineProperty(_,"MongoError",{enumerable:!0,get:function(){return m1.MongoError}});Object.defineProperty(_,"MongoExpiredSessionError",{enumerable:!0,get:function(){return m1.MongoExpiredSessionError}});Object.defineProperty(_,"MongoGCPError",{enumerable:!0,get:function(){return m1.MongoGCPError}});Object.defineProperty(_,"MongoGridFSChunkError",{enumerable:!0,get:function(){return m1.MongoGridFSChunkError}});Object.defineProperty(_,"MongoGridFSStreamError",{enumerable:!0,get:function(){return m1.MongoGridFSStreamError}});Object.defineProperty(_,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return m1.MongoInvalidArgumentError}});Object.defineProperty(_,"MongoKerberosError",{enumerable:!0,get:function(){return m1.MongoKerberosError}});Object.defineProperty(_,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return m1.MongoMissingCredentialsError}});Object.defineProperty(_,"MongoMissingDependencyError",{enumerable:!0,get:function(){return m1.MongoMissingDependencyError}});Object.defineProperty(_,"MongoNetworkError",{enumerable:!0,get:function(){return m1.MongoNetworkError}});Object.defineProperty(_,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return m1.MongoNetworkTimeoutError}});Object.defineProperty(_,"MongoNotConnectedError",{enumerable:!0,get:function(){return m1.MongoNotConnectedError}});Object.defineProperty(_,"MongoOIDCError",{enumerable:!0,get:function(){return m1.MongoOIDCError}});Object.defineProperty(_,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return m1.MongoOperationTimeoutError}});Object.defineProperty(_,"MongoParseError",{enumerable:!0,get:function(){return m1.MongoParseError}});Object.defineProperty(_,"MongoRuntimeError",{enumerable:!0,get:function(){return m1.MongoRuntimeError}});Object.defineProperty(_,"MongoServerClosedError",{enumerable:!0,get:function(){return m1.MongoServerClosedError}});Object.defineProperty(_,"MongoServerError",{enumerable:!0,get:function(){return m1.MongoServerError}});Object.defineProperty(_,"MongoServerSelectionError",{enumerable:!0,get:function(){return m1.MongoServerSelectionError}});Object.defineProperty(_,"MongoStalePrimaryError",{enumerable:!0,get:function(){return m1.MongoStalePrimaryError}});Object.defineProperty(_,"MongoSystemError",{enumerable:!0,get:function(){return m1.MongoSystemError}});Object.defineProperty(_,"MongoTailableCursorError",{enumerable:!0,get:function(){return m1.MongoTailableCursorError}});Object.defineProperty(_,"MongoTopologyClosedError",{enumerable:!0,get:function(){return m1.MongoTopologyClosedError}});Object.defineProperty(_,"MongoTransactionError",{enumerable:!0,get:function(){return m1.MongoTransactionError}});Object.defineProperty(_,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return m1.MongoUnexpectedServerResponseError}});Object.defineProperty(_,"MongoWriteConcernError",{enumerable:!0,get:function(){return m1.MongoWriteConcernError}});var Cy1=nA();Object.defineProperty(_,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return Cy1.configureExplicitResourceManagement}});var Ny1=ZX();Object.defineProperty(_,"BatchType",{enumerable:!0,get:function(){return Ny1.BatchType}});var Py1=GN();Object.defineProperty(_,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return Py1.AutoEncryptionLoggerLevel}});var Ry1=NU();Object.defineProperty(_,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return Ry1.GSSAPICanonicalizationValue}});var jy1=y2();Object.defineProperty(_,"AuthMechanism",{enumerable:!0,get:function(){return jy1.AuthMechanism}});var My1=IX();Object.defineProperty(_,"Compressor",{enumerable:!0,get:function(){return My1.Compressor}});var Tt=K4();Object.defineProperty(_,"CURSOR_FLAGS",{enumerable:!0,get:function(){return Tt.CURSOR_FLAGS}});Object.defineProperty(_,"CursorTimeoutMode",{enumerable:!0,get:function(){return Tt.CursorTimeoutMode}});var Ty1=$1();Object.defineProperty(_,"MongoErrorLabel",{enumerable:!0,get:function(){return Ty1.MongoErrorLabel}});var ky1=AX();Object.defineProperty(_,"ExplainVerbosity",{enumerable:!0,get:function(){return ky1.ExplainVerbosity}});var Oy1=I8();Object.defineProperty(_,"ServerApiVersion",{enumerable:!0,get:function(){return Oy1.ServerApiVersion}});var kt=U8();Object.defineProperty(_,"MongoLoggableComponent",{enumerable:!0,get:function(){return kt.MongoLoggableComponent}});Object.defineProperty(_,"SeverityLevel",{enumerable:!0,get:function(){return kt.SeverityLevel}});var Sy1=ER();Object.defineProperty(_,"ReturnDocument",{enumerable:!0,get:function(){return Sy1.ReturnDocument}});var uy1=HP();Object.defineProperty(_,"ProfilingLevel",{enumerable:!0,get:function(){return uy1.ProfilingLevel}});var fy1=e9();Object.defineProperty(_,"ReadConcernLevel",{enumerable:!0,get:function(){return fy1.ReadConcernLevel}});var xy1=F4();Object.defineProperty(_,"ReadPreferenceMode",{enumerable:!0,get:function(){return xy1.ReadPreferenceMode}});var Ot=s3();Object.defineProperty(_,"ServerType",{enumerable:!0,get:function(){return Ot.ServerType}});Object.defineProperty(_,"TopologyType",{enumerable:!0,get:function(){return Ot.TopologyType}});var by1=e9();Object.defineProperty(_,"ReadConcern",{enumerable:!0,get:function(){return by1.ReadConcern}});var gy1=F4();Object.defineProperty(_,"ReadPreference",{enumerable:!0,get:function(){return gy1.ReadPreference}});var _y1=J3();Object.defineProperty(_,"WriteConcern",{enumerable:!0,get:function(){return _y1.WriteConcern}});var OR=IN();Object.defineProperty(_,"CommandFailedEvent",{enumerable:!0,get:function(){return OR.CommandFailedEvent}});Object.defineProperty(_,"CommandStartedEvent",{enumerable:!0,get:function(){return OR.CommandStartedEvent}});Object.defineProperty(_,"CommandSucceededEvent",{enumerable:!0,get:function(){return OR.CommandSucceededEvent}});var f9=fN();Object.defineProperty(_,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return f9.ConnectionCheckedInEvent}});Object.defineProperty(_,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return f9.ConnectionCheckedOutEvent}});Object.defineProperty(_,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return f9.ConnectionCheckOutFailedEvent}});Object.defineProperty(_,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return f9.ConnectionCheckOutStartedEvent}});Object.defineProperty(_,"ConnectionClosedEvent",{enumerable:!0,get:function(){return f9.ConnectionClosedEvent}});Object.defineProperty(_,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return f9.ConnectionCreatedEvent}});Object.defineProperty(_,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return f9.ConnectionPoolClearedEvent}});Object.defineProperty(_,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return f9.ConnectionPoolClosedEvent}});Object.defineProperty(_,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return f9.ConnectionPoolCreatedEvent}});Object.defineProperty(_,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return f9.ConnectionPoolMonitoringEvent}});Object.defineProperty(_,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return f9.ConnectionPoolReadyEvent}});Object.defineProperty(_,"ConnectionReadyEvent",{enumerable:!0,get:function(){return f9.ConnectionReadyEvent}});var N7=Zz();Object.defineProperty(_,"ServerClosedEvent",{enumerable:!0,get:function(){return N7.ServerClosedEvent}});Object.defineProperty(_,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return N7.ServerDescriptionChangedEvent}});Object.defineProperty(_,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return N7.ServerHeartbeatFailedEvent}});Object.defineProperty(_,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return N7.ServerHeartbeatStartedEvent}});Object.defineProperty(_,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return N7.ServerHeartbeatSucceededEvent}});Object.defineProperty(_,"ServerOpeningEvent",{enumerable:!0,get:function(){return N7.ServerOpeningEvent}});Object.defineProperty(_,"TopologyClosedEvent",{enumerable:!0,get:function(){return N7.TopologyClosedEvent}});Object.defineProperty(_,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return N7.TopologyDescriptionChangedEvent}});Object.defineProperty(_,"TopologyOpeningEvent",{enumerable:!0,get:function(){return N7.TopologyOpeningEvent}});var ZY=cP();Object.defineProperty(_,"ServerSelectionEvent",{enumerable:!0,get:function(){return ZY.ServerSelectionEvent}});Object.defineProperty(_,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return ZY.ServerSelectionFailedEvent}});Object.defineProperty(_,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return ZY.ServerSelectionStartedEvent}});Object.defineProperty(_,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return ZY.ServerSelectionSucceededEvent}});Object.defineProperty(_,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return ZY.WaitingForSuitableServerEvent}});var yy1=iP();Object.defineProperty(_,"SrvPollingEvent",{enumerable:!0,get:function(){return yy1.SrvPollingEvent}});var q$=lA();Object.defineProperty(_,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return q$.MongoCryptAzureKMSRequestError}});Object.defineProperty(_,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return q$.MongoCryptCreateDataKeyError}});Object.defineProperty(_,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return q$.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(_,"MongoCryptError",{enumerable:!0,get:function(){return q$.MongoCryptError}});Object.defineProperty(_,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return q$.MongoCryptInvalidArgumentError}});Object.defineProperty(_,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return q$.MongoCryptKMSRequestNetworkTimeoutError}});var vy1=xP();Object.defineProperty(_,"MongoClientAuthProviders",{enumerable:!0,get:function(){return vy1.MongoClientAuthProviders}})});var Y0=Q((Y6)=>{Object.defineProperty(Y6,"__esModule",{value:!0});Y6.toUTF8=Y6.getBigInt64LE=Y6.getFloat64LE=Y6.getInt32LE=Y6.UUID=Y6.Timestamp=Y6.serialize=Y6.ObjectId=Y6.MinKey=Y6.MaxKey=Y6.Long=Y6.Int32=Y6.EJSON=Y6.Double=Y6.deserialize=Y6.Decimal128=Y6.DBRef=Y6.Code=Y6.calculateObjectSize=Y6.BSONType=Y6.BSONSymbol=Y6.BSONRegExp=Y6.BSONError=Y6.BSON=Y6.Binary=void 0;Y6.parseToElementsToArray=cy1;Y6.pluckBSONSerializeOptions=ly1;Y6.resolveBSONOptions=py1;Y6.parseUtf8ValidationOption=iy1;var UY=x4(),M6=x4();Object.defineProperty(Y6,"Binary",{enumerable:!0,get:function(){return M6.Binary}});Object.defineProperty(Y6,"BSON",{enumerable:!0,get:function(){return M6.BSON}});Object.defineProperty(Y6,"BSONError",{enumerable:!0,get:function(){return M6.BSONError}});Object.defineProperty(Y6,"BSONRegExp",{enumerable:!0,get:function(){return M6.BSONRegExp}});Object.defineProperty(Y6,"BSONSymbol",{enumerable:!0,get:function(){return M6.BSONSymbol}});Object.defineProperty(Y6,"BSONType",{enumerable:!0,get:function(){return M6.BSONType}});Object.defineProperty(Y6,"calculateObjectSize",{enumerable:!0,get:function(){return M6.calculateObjectSize}});Object.defineProperty(Y6,"Code",{enumerable:!0,get:function(){return M6.Code}});Object.defineProperty(Y6,"DBRef",{enumerable:!0,get:function(){return M6.DBRef}});Object.defineProperty(Y6,"Decimal128",{enumerable:!0,get:function(){return M6.Decimal128}});Object.defineProperty(Y6,"deserialize",{enumerable:!0,get:function(){return M6.deserialize}});Object.defineProperty(Y6,"Double",{enumerable:!0,get:function(){return M6.Double}});Object.defineProperty(Y6,"EJSON",{enumerable:!0,get:function(){return M6.EJSON}});Object.defineProperty(Y6,"Int32",{enumerable:!0,get:function(){return M6.Int32}});Object.defineProperty(Y6,"Long",{enumerable:!0,get:function(){return M6.Long}});Object.defineProperty(Y6,"MaxKey",{enumerable:!0,get:function(){return M6.MaxKey}});Object.defineProperty(Y6,"MinKey",{enumerable:!0,get:function(){return M6.MinKey}});Object.defineProperty(Y6,"ObjectId",{enumerable:!0,get:function(){return M6.ObjectId}});Object.defineProperty(Y6,"serialize",{enumerable:!0,get:function(){return M6.serialize}});Object.defineProperty(Y6,"Timestamp",{enumerable:!0,get:function(){return M6.Timestamp}});Object.defineProperty(Y6,"UUID",{enumerable:!0,get:function(){return M6.UUID}});function cy1(F,A){let $=UY.BSON.onDemand.parseToElements(F,A);return Array.isArray($)?$:[...$]}Y6.getInt32LE=UY.BSON.onDemand.NumberUtils.getInt32LE;Y6.getFloat64LE=UY.BSON.onDemand.NumberUtils.getFloat64LE;Y6.getBigInt64LE=UY.BSON.onDemand.NumberUtils.getBigInt64LE;Y6.toUTF8=UY.BSON.onDemand.ByteUtils.toUTF8;function ly1(F){let{fieldsAsRaw:A,useBigInt64:$,promoteValues:B,promoteBuffers:J,promoteLongs:X,serializeFunctions:Y,ignoreUndefined:D,bsonRegExp:G,raw:Z,enableUtf8Validation:U}=F;return{fieldsAsRaw:A,useBigInt64:$,promoteValues:B,promoteBuffers:J,promoteLongs:X,serializeFunctions:Y,ignoreUndefined:D,bsonRegExp:G,raw:Z,enableUtf8Validation:U}}function py1(F,A){let $=A?.bsonOptions;return{raw:F?.raw??$?.raw??!1,useBigInt64:F?.useBigInt64??$?.useBigInt64??!1,promoteLongs:F?.promoteLongs??$?.promoteLongs??!0,promoteValues:F?.promoteValues??$?.promoteValues??!0,promoteBuffers:F?.promoteBuffers??$?.promoteBuffers??!1,ignoreUndefined:F?.ignoreUndefined??$?.ignoreUndefined??!1,bsonRegExp:F?.bsonRegExp??$?.bsonRegExp??!1,serializeFunctions:F?.serializeFunctions??$?.serializeFunctions??!1,fieldsAsRaw:F?.fieldsAsRaw??$?.fieldsAsRaw??{},enableUtf8Validation:F?.enableUtf8Validation??$?.enableUtf8Validation??!0}}function iy1(F){if(F?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var B1=Q((Us)=>{Object.defineProperty(Us,"__esModule",{value:!0});Us.MongoWriteConcernError=Us.MongoServerSelectionError=Us.MongoSystemError=Us.MongoMissingDependencyError=Us.MongoMissingCredentialsError=Us.MongoCompatibilityError=Us.MongoInvalidArgumentError=Us.MongoParseError=Us.MongoNetworkTimeoutError=Us.MongoNetworkError=Us.MongoClientClosedError=Us.MongoTopologyClosedError=Us.MongoCursorExhaustedError=Us.MongoServerClosedError=Us.MongoCursorInUseError=Us.MongoOperationTimeoutError=Us.MongoUnexpectedServerResponseError=Us.MongoGridFSChunkError=Us.MongoGridFSStreamError=Us.MongoTailableCursorError=Us.MongoChangeStreamError=Us.MongoClientBulkWriteExecutionError=Us.MongoClientBulkWriteCursorError=Us.MongoClientBulkWriteError=Us.MongoGCPError=Us.MongoAzureError=Us.MongoOIDCError=Us.MongoAWSError=Us.MongoKerberosError=Us.MongoExpiredSessionError=Us.MongoTransactionError=Us.MongoNotConnectedError=Us.MongoDecompressionError=Us.MongoBatchReExecutionError=Us.MongoStalePrimaryError=Us.MongoRuntimeError=Us.MongoAPIError=Us.MongoDriverError=Us.MongoServerError=Us.MongoError=Us.MongoErrorLabel=Us.GET_MORE_RESUMABLE_CODES=Us.MONGODB_ERROR_CODES=Us.NODE_IS_RECOVERING_ERROR_MESSAGE=Us.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=Us.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;Us.needsRetryableWriteLabel=Av1;Us.isRetryableWriteError=Gs;Us.isRetryableReadError=$v1;Us.isNodeShuttingDownError=Dv1;Us.isSDAMUnrecoverableError=Gv1;Us.isNetworkTimeoutError=Zv1;Us.isResumableError=Uv1;Us.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");Us.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");Us.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");Us.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});Us.GET_MORE_RESUMABLE_CODES=new Set([Us.MONGODB_ERROR_CODES.HostUnreachable,Us.MONGODB_ERROR_CODES.HostNotFound,Us.MONGODB_ERROR_CODES.NetworkTimeout,Us.MONGODB_ERROR_CODES.ShutdownInProgress,Us.MONGODB_ERROR_CODES.PrimarySteppedDown,Us.MONGODB_ERROR_CODES.ExceededTimeLimit,Us.MONGODB_ERROR_CODES.SocketException,Us.MONGODB_ERROR_CODES.NotWritablePrimary,Us.MONGODB_ERROR_CODES.InterruptedAtShutdown,Us.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,Us.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,Us.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,Us.MONGODB_ERROR_CODES.StaleShardVersion,Us.MONGODB_ERROR_CODES.StaleEpoch,Us.MONGODB_ERROR_CODES.StaleConfig,Us.MONGODB_ERROR_CODES.RetryChangeStream,Us.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,Us.MONGODB_ERROR_CODES.CursorNotFound]);Us.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function Fv1(F){return F!=null&&typeof F==="object"&&"errors"in F&&Array.isArray(F.errors)}class i2 extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(F,A){super(F,A);this.errorLabelSet=new Set}static buildErrorMessage(F){if(typeof F==="string")return F;if(Fv1(F)&&F.message.length===0)return F.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":F.errors.map(({message:A})=>A).join(", ");return F!=null&&typeof F==="object"&&"message"in F&&typeof F.message==="string"?F.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(F){return this.errorLabelSet.has(F)}addErrorLabel(F){this.errorLabelSet.add(F)}}Us.MongoError=i2;class hz extends i2{constructor(F){super(F.message||F.errmsg||F.$err||"n/a");if(F.errorLabels)for(let A of F.errorLabels)this.addErrorLabel(A);this.errorResponse=F;for(let A in F)if(A!=="errorLabels"&&A!=="errmsg"&&A!=="message"&&A!=="errorResponse")this[A]=F[A]}get name(){return"MongoServerError"}}Us.MongoServerError=hz;class Q$ extends i2{constructor(F,A){super(F,A)}get name(){return"MongoDriverError"}}Us.MongoDriverError=Q$;class m4 extends Q${constructor(F,A){super(F,A)}get name(){return"MongoAPIError"}}Us.MongoAPIError=m4;class Y9 extends Q${constructor(F,A){super(F,A)}get name(){return"MongoRuntimeError"}}Us.MongoRuntimeError=Y9;class ut extends Y9{constructor(F,A){super(F,A)}get name(){return"MongoStalePrimaryError"}}Us.MongoStalePrimaryError=ut;class ft extends m4{constructor(F="This batch has already been executed, create new batch to execute"){super(F)}get name(){return"MongoBatchReExecutionError"}}Us.MongoBatchReExecutionError=ft;class xt extends Y9{constructor(F){super(F)}get name(){return"MongoDecompressionError"}}Us.MongoDecompressionError=xt;class bt extends m4{constructor(F){super(F)}get name(){return"MongoNotConnectedError"}}Us.MongoNotConnectedError=bt;class gt extends m4{constructor(F){super(F)}get name(){return"MongoTransactionError"}}Us.MongoTransactionError=gt;class _t extends m4{constructor(F="Cannot use a session that has ended"){super(F)}get name(){return"MongoExpiredSessionError"}}Us.MongoExpiredSessionError=_t;class yt extends Y9{constructor(F){super(F)}get name(){return"MongoKerberosError"}}Us.MongoKerberosError=yt;class vt extends Y9{constructor(F,A){super(F,A)}get name(){return"MongoAWSError"}}Us.MongoAWSError=vt;class mz extends Y9{constructor(F){super(F)}get name(){return"MongoOIDCError"}}Us.MongoOIDCError=mz;class ht extends mz{constructor(F){super(F)}get name(){return"MongoAzureError"}}Us.MongoAzureError=ht;class mt extends mz{constructor(F){super(F)}get name(){return"MongoGCPError"}}Us.MongoGCPError=mt;class dt extends hz{constructor(F){super(F);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}Us.MongoClientBulkWriteError=dt;class ct extends Y9{constructor(F){super(F)}get name(){return"MongoClientBulkWriteCursorError"}}Us.MongoClientBulkWriteCursorError=ct;class lt extends Y9{constructor(F){super(F)}get name(){return"MongoClientBulkWriteExecutionError"}}Us.MongoClientBulkWriteExecutionError=lt;class pt extends Y9{constructor(F){super(F)}get name(){return"MongoChangeStreamError"}}Us.MongoChangeStreamError=pt;class it extends m4{constructor(F="Tailable cursor does not support this operation"){super(F)}get name(){return"MongoTailableCursorError"}}Us.MongoTailableCursorError=it;class at extends Y9{constructor(F){super(F)}get name(){return"MongoGridFSStreamError"}}Us.MongoGridFSStreamError=at;class nt extends Y9{constructor(F){super(F)}get name(){return"MongoGridFSChunkError"}}Us.MongoGridFSChunkError=nt;class rt extends Y9{constructor(F,A){super(F,A)}get name(){return"MongoUnexpectedServerResponseError"}}Us.MongoUnexpectedServerResponseError=rt;class tt extends Q${get name(){return"MongoOperationTimeoutError"}}Us.MongoOperationTimeoutError=tt;class st extends m4{constructor(F="Cursor is already initialized"){super(F)}get name(){return"MongoCursorInUseError"}}Us.MongoCursorInUseError=st;class ot extends m4{constructor(F="Server is closed"){super(F)}get name(){return"MongoServerClosedError"}}Us.MongoServerClosedError=ot;class et extends m4{constructor(F){super(F||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}Us.MongoCursorExhaustedError=et;class Fs extends m4{constructor(F="Topology is closed"){super(F)}get name(){return"MongoTopologyClosedError"}}Us.MongoTopologyClosedError=Fs;class As extends m4{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}Us.MongoClientClosedError=As;class BF extends i2{constructor(F,A){super(F,{cause:A?.cause});this.beforeHandshake=!!A?.beforeHandshake}get name(){return"MongoNetworkError"}}Us.MongoNetworkError=BF;class $s extends BF{constructor(F,A){super(F,A)}get name(){return"MongoNetworkTimeoutError"}}Us.MongoNetworkTimeoutError=$s;class uR extends Q${constructor(F){super(F)}get name(){return"MongoParseError"}}Us.MongoParseError=uR;class Bs extends m4{constructor(F,A){super(F,A)}get name(){return"MongoInvalidArgumentError"}}Us.MongoInvalidArgumentError=Bs;class Js extends m4{constructor(F){super(F)}get name(){return"MongoCompatibilityError"}}Us.MongoCompatibilityError=Js;class Xs extends m4{constructor(F){super(F)}get name(){return"MongoMissingCredentialsError"}}Us.MongoMissingCredentialsError=Xs;class Ys extends m4{constructor(F,A){super(F,A);this.dependencyName=A.dependencyName}get name(){return"MongoMissingDependencyError"}}Us.MongoMissingDependencyError=Ys;class fR extends i2{constructor(F,A){if(A&&A.error)super(i2.buildErrorMessage(A.error.message||A.error),{cause:A.error});else super(F);if(A)this.reason=A;this.code=A.error?.code}get name(){return"MongoSystemError"}}Us.MongoSystemError=fR;class xR extends fR{constructor(F,A){super(F,A)}get name(){return"MongoServerSelectionError"}}Us.MongoServerSelectionError=xR;class bR extends hz{constructor(F){super({...F.writeConcernError,...F});this.errInfo=F.writeConcernError.errInfo,this.result=F}get name(){return"MongoWriteConcernError"}}Us.MongoWriteConcernError=bR;var Ds=new Set([Us.MONGODB_ERROR_CODES.HostUnreachable,Us.MONGODB_ERROR_CODES.HostNotFound,Us.MONGODB_ERROR_CODES.NetworkTimeout,Us.MONGODB_ERROR_CODES.ShutdownInProgress,Us.MONGODB_ERROR_CODES.PrimarySteppedDown,Us.MONGODB_ERROR_CODES.SocketException,Us.MONGODB_ERROR_CODES.NotWritablePrimary,Us.MONGODB_ERROR_CODES.InterruptedAtShutdown,Us.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,Us.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,Us.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,Us.MONGODB_ERROR_CODES.ExceededTimeLimit,Us.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),SR=Ds;function Av1(F,A,$){if(F instanceof BF)return!0;if(F instanceof i2){if((A>=9||Gs(F))&&!F.hasErrorLabel(Us.MongoErrorLabel.HandshakeError))return!1}if(F instanceof bR){if($==="Mongos"&&A<9)return SR.has(F.result.code??0);let X=F.result.writeConcernError.code??Number(F.code);return SR.has(Number.isNaN(X)?0:X)}if(F instanceof i2)return SR.has(Number(F.code));if(Us.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(Us.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}function Gs(F){return F.hasErrorLabel(Us.MongoErrorLabel.RetryableWriteError)||F.hasErrorLabel(Us.MongoErrorLabel.PoolRequstedRetry)}function $v1(F){if(typeof F.code==="number"?Ds.has(F.code):!1)return!0;if(F instanceof BF)return!0;if(Us.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(Us.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}var Bv1=new Set([Us.MONGODB_ERROR_CODES.ShutdownInProgress,Us.MONGODB_ERROR_CODES.PrimarySteppedDown,Us.MONGODB_ERROR_CODES.InterruptedAtShutdown,Us.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,Us.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Jv1=new Set([Us.MONGODB_ERROR_CODES.NotWritablePrimary,Us.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,Us.MONGODB_ERROR_CODES.LegacyNotPrimary]),Xv1=new Set([Us.MONGODB_ERROR_CODES.InterruptedAtShutdown,Us.MONGODB_ERROR_CODES.ShutdownInProgress]);function Zs(F){if(typeof F.code==="number")return Bv1.has(F.code);return Us.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(F.message)||Us.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message)}function Yv1(F){if(typeof F.code==="number")return Jv1.has(F.code);if(Zs(F))return!1;return Us.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message)}function Dv1(F){return!!(typeof F.code==="number"&&Xv1.has(F.code))}function Gv1(F){if(F instanceof uR||F==null)return!0;return Zs(F)||Yv1(F)}function Zv1(F){return!!(F instanceof BF&&F.message.match(/timed out/))}function Uv1(F,A){if(F==null||!(F instanceof i2))return!1;if(F instanceof BF)return!0;if(F instanceof xR)return!0;if(A!=null&&A>=9){if(F.code===Us.MONGODB_ERROR_CODES.CursorNotFound)return!0;return F.hasErrorLabel(Us.MongoErrorLabel.ResumableChangeStreamError)}if(typeof F.code==="number")return Us.GET_MORE_RESUMABLE_CODES.has(F.code);return!1}});var f8=Q((Ks)=>{Object.defineProperty(Ks,"__esModule",{value:!0});Ks.OP_MSG=Ks.OP_COMPRESSED=Ks.OP_DELETE=Ks.OP_QUERY=Ks.OP_INSERT=Ks.OP_UPDATE=Ks.OP_REPLY=Ks.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Ks.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Ks.MIN_SUPPORTED_QE_SERVER_VERSION=Ks.MIN_SUPPORTED_QE_WIRE_VERSION=Ks.MAX_SUPPORTED_WIRE_VERSION=Ks.MIN_SUPPORTED_WIRE_VERSION=Ks.MAX_SUPPORTED_SERVER_VERSION=Ks.MIN_SUPPORTED_SERVER_VERSION=void 0;Ks.MIN_SUPPORTED_SERVER_VERSION="4.2";Ks.MAX_SUPPORTED_SERVER_VERSION="8.2";Ks.MIN_SUPPORTED_WIRE_VERSION=8;Ks.MAX_SUPPORTED_WIRE_VERSION=27;Ks.MIN_SUPPORTED_QE_WIRE_VERSION=21;Ks.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Ks.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Ks.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Ks.OP_REPLY=1;Ks.OP_UPDATE=2001;Ks.OP_INSERT=2002;Ks.OP_QUERY=2004;Ks.OP_DELETE=2006;Ks.OP_COMPRESSED=2012;Ks.OP_MSG=2013});var T6=Q((Qs)=>{Object.defineProperty(Qs,"__esModule",{value:!0});Qs.END=Qs.CHANGE=Qs.INIT=Qs.MORE=Qs.RESPONSE=Qs.SERVER_HEARTBEAT_FAILED=Qs.SERVER_HEARTBEAT_SUCCEEDED=Qs.SERVER_HEARTBEAT_STARTED=Qs.COMMAND_FAILED=Qs.COMMAND_SUCCEEDED=Qs.COMMAND_STARTED=Qs.CLUSTER_TIME_RECEIVED=Qs.CONNECTION_CHECKED_IN=Qs.CONNECTION_CHECKED_OUT=Qs.CONNECTION_CHECK_OUT_FAILED=Qs.CONNECTION_CHECK_OUT_STARTED=Qs.CONNECTION_CLOSED=Qs.CONNECTION_READY=Qs.CONNECTION_CREATED=Qs.CONNECTION_POOL_READY=Qs.CONNECTION_POOL_CLEARED=Qs.CONNECTION_POOL_CLOSED=Qs.CONNECTION_POOL_CREATED=Qs.WAITING_FOR_SUITABLE_SERVER=Qs.SERVER_SELECTION_SUCCEEDED=Qs.SERVER_SELECTION_FAILED=Qs.SERVER_SELECTION_STARTED=Qs.TOPOLOGY_DESCRIPTION_CHANGED=Qs.TOPOLOGY_CLOSED=Qs.TOPOLOGY_OPENING=Qs.SERVER_DESCRIPTION_CHANGED=Qs.SERVER_CLOSED=Qs.SERVER_OPENING=Qs.DESCRIPTION_RECEIVED=Qs.UNPINNED=Qs.PINNED=Qs.MESSAGE=Qs.ENDED=Qs.CLOSED=Qs.CONNECT=Qs.OPEN=Qs.CLOSE=Qs.TIMEOUT=Qs.ERROR=Qs.SYSTEM_JS_COLLECTION=Qs.SYSTEM_COMMAND_COLLECTION=Qs.SYSTEM_USER_COLLECTION=Qs.SYSTEM_PROFILE_COLLECTION=Qs.SYSTEM_INDEX_COLLECTION=Qs.SYSTEM_NAMESPACE_COLLECTION=void 0;Qs.kDecoratedKeys=Qs.kDecorateResult=Qs.LEGACY_HELLO_COMMAND_CAMEL_CASE=Qs.LEGACY_HELLO_COMMAND=Qs.MONGO_CLIENT_EVENTS=Qs.LOCAL_SERVER_EVENTS=Qs.SERVER_RELAY_EVENTS=Qs.APM_EVENTS=Qs.TOPOLOGY_EVENTS=Qs.CMAP_EVENTS=Qs.HEARTBEAT_EVENTS=Qs.RESUME_TOKEN_CHANGED=void 0;Qs.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";Qs.SYSTEM_INDEX_COLLECTION="system.indexes";Qs.SYSTEM_PROFILE_COLLECTION="system.profile";Qs.SYSTEM_USER_COLLECTION="system.users";Qs.SYSTEM_COMMAND_COLLECTION="$cmd";Qs.SYSTEM_JS_COLLECTION="system.js";Qs.ERROR="error";Qs.TIMEOUT="timeout";Qs.CLOSE="close";Qs.OPEN="open";Qs.CONNECT="connect";Qs.CLOSED="closed";Qs.ENDED="ended";Qs.MESSAGE="message";Qs.PINNED="pinned";Qs.UNPINNED="unpinned";Qs.DESCRIPTION_RECEIVED="descriptionReceived";Qs.SERVER_OPENING="serverOpening";Qs.SERVER_CLOSED="serverClosed";Qs.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";Qs.TOPOLOGY_OPENING="topologyOpening";Qs.TOPOLOGY_CLOSED="topologyClosed";Qs.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";Qs.SERVER_SELECTION_STARTED="serverSelectionStarted";Qs.SERVER_SELECTION_FAILED="serverSelectionFailed";Qs.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";Qs.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";Qs.CONNECTION_POOL_CREATED="connectionPoolCreated";Qs.CONNECTION_POOL_CLOSED="connectionPoolClosed";Qs.CONNECTION_POOL_CLEARED="connectionPoolCleared";Qs.CONNECTION_POOL_READY="connectionPoolReady";Qs.CONNECTION_CREATED="connectionCreated";Qs.CONNECTION_READY="connectionReady";Qs.CONNECTION_CLOSED="connectionClosed";Qs.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";Qs.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";Qs.CONNECTION_CHECKED_OUT="connectionCheckedOut";Qs.CONNECTION_CHECKED_IN="connectionCheckedIn";Qs.CLUSTER_TIME_RECEIVED="clusterTimeReceived";Qs.COMMAND_STARTED="commandStarted";Qs.COMMAND_SUCCEEDED="commandSucceeded";Qs.COMMAND_FAILED="commandFailed";Qs.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";Qs.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";Qs.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";Qs.RESPONSE="response";Qs.MORE="more";Qs.INIT="init";Qs.CHANGE="change";Qs.END="end";Qs.RESUME_TOKEN_CHANGED="resumeTokenChanged";Qs.HEARTBEAT_EVENTS=Object.freeze([Qs.SERVER_HEARTBEAT_STARTED,Qs.SERVER_HEARTBEAT_SUCCEEDED,Qs.SERVER_HEARTBEAT_FAILED]);Qs.CMAP_EVENTS=Object.freeze([Qs.CONNECTION_POOL_CREATED,Qs.CONNECTION_POOL_READY,Qs.CONNECTION_POOL_CLEARED,Qs.CONNECTION_POOL_CLOSED,Qs.CONNECTION_CREATED,Qs.CONNECTION_READY,Qs.CONNECTION_CLOSED,Qs.CONNECTION_CHECK_OUT_STARTED,Qs.CONNECTION_CHECK_OUT_FAILED,Qs.CONNECTION_CHECKED_OUT,Qs.CONNECTION_CHECKED_IN]);Qs.TOPOLOGY_EVENTS=Object.freeze([Qs.SERVER_OPENING,Qs.SERVER_CLOSED,Qs.SERVER_DESCRIPTION_CHANGED,Qs.TOPOLOGY_OPENING,Qs.TOPOLOGY_CLOSED,Qs.TOPOLOGY_DESCRIPTION_CHANGED,Qs.ERROR,Qs.TIMEOUT,Qs.CLOSE]);Qs.APM_EVENTS=Object.freeze([Qs.COMMAND_STARTED,Qs.COMMAND_SUCCEEDED,Qs.COMMAND_FAILED]);Qs.SERVER_RELAY_EVENTS=Object.freeze([Qs.SERVER_HEARTBEAT_STARTED,Qs.SERVER_HEARTBEAT_SUCCEEDED,Qs.SERVER_HEARTBEAT_FAILED,Qs.COMMAND_STARTED,Qs.COMMAND_SUCCEEDED,Qs.COMMAND_FAILED,...Qs.CMAP_EVENTS]);Qs.LOCAL_SERVER_EVENTS=Object.freeze([Qs.CONNECT,Qs.DESCRIPTION_RECEIVED,Qs.CLOSED,Qs.ENDED]);Qs.MONGO_CLIENT_EVENTS=Object.freeze([...Qs.CMAP_EVENTS,...Qs.APM_EVENTS,...Qs.TOPOLOGY_EVENTS,...Qs.HEARTBEAT_EVENTS]);Qs.LEGACY_HELLO_COMMAND="ismaster";Qs.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";Qs.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");Qs.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var W2=Q((is)=>{Object.defineProperty(is,"__esModule",{value:!0});is.ReadConcern=is.ReadConcernLevel=void 0;is.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class E${constructor(F){this.level=is.ReadConcernLevel[F]??F}static fromOptions(F){if(F==null)return;if(F.readConcern){let{readConcern:A}=F;if(A instanceof E$)return A;else if(typeof A==="string")return new E$(A);else if("level"in A&&A.level)return new E$(A.level)}if(F.level)return new E$(F.level);return}static get MAJORITY(){return is.ReadConcernLevel.majority}static get AVAILABLE(){return is.ReadConcernLevel.available}static get LINEARIZABLE(){return is.ReadConcernLevel.linearizable}static get SNAPSHOT(){return is.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}is.ReadConcern=E$});var J4=Q((ns)=>{Object.defineProperty(ns,"__esModule",{value:!0});ns.ReadPreference=ns.ReadPreferenceMode=void 0;var JF=B1();ns.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class t1{constructor(F,A,$){if(!t1.isValid(F))throw new JF.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(F)}`);if($==null&&typeof A==="object"&&!Array.isArray(A))$=A,A=void 0;else if(A&&!Array.isArray(A))throw new JF.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=F,this.tags=A,this.hedge=$?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,$=$??{},$.maxStalenessSeconds!=null){if($.maxStalenessSeconds<=0)throw new JF.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=$.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new JF.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new JF.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new JF.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(F){return new t1(F)}static fromOptions(F){if(!F)return;let A=F.readPreference??F.session?.transaction.options.readPreference,$=F.readPreferenceTags;if(A==null)return;if(typeof A==="string")return new t1(A,$,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:F.hedge});else if(!(A instanceof t1)&&typeof A==="object"){let B=A.mode||A.preference;if(B&&typeof B==="string")return new t1(B,A.tags??$,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:F.hedge})}if($)A.tags=$;return A}static translate(F){if(F.readPreference==null)return F;let A=F.readPreference;if(typeof A==="string")F.readPreference=new t1(A);else if(A&&!(A instanceof t1)&&typeof A==="object"){let $=A.mode||A.preference;if($&&typeof $==="string")F.readPreference=new t1($,A.tags,{maxStalenessSeconds:A.maxStalenessSeconds})}else if(!(A instanceof t1))throw new JF.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return F}static isValid(F){return new Set([t1.PRIMARY,t1.PRIMARY_PREFERRED,t1.SECONDARY,t1.SECONDARY_PREFERRED,t1.NEAREST,null]).has(F)}isValid(F){return t1.isValid(typeof F==="string"?F:this.mode)}secondaryOk(){return new Set([t1.PRIMARY_PREFERRED,t1.SECONDARY,t1.SECONDARY_PREFERRED,t1.NEAREST]).has(this.mode)}equals(F){return F.mode===this.mode}toJSON(){let F={mode:this.mode};if(Array.isArray(this.tags))F.tags=this.tags;if(this.maxStalenessSeconds)F.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)F.hedge=this.hedge;return F}}ns.ReadPreference=t1;t1.PRIMARY=ns.ReadPreferenceMode.primary;t1.PRIMARY_PREFERRED=ns.ReadPreferenceMode.primaryPreferred;t1.SECONDARY=ns.ReadPreferenceMode.secondary;t1.SECONDARY_PREFERRED=ns.ReadPreferenceMode.secondaryPreferred;t1.NEAREST=ns.ReadPreferenceMode.nearest;t1.primary=new t1(ns.ReadPreferenceMode.primary);t1.primaryPreferred=new t1(ns.ReadPreferenceMode.primaryPreferred);t1.secondary=new t1(ns.ReadPreferenceMode.secondary);t1.secondaryPreferred=new t1(ns.ReadPreferenceMode.secondaryPreferred);t1.nearest=new t1(ns.ReadPreferenceMode.nearest)});var D9=Q((ss)=>{Object.defineProperty(ss,"__esModule",{value:!0});ss.ServerType=ss.TopologyType=ss.STATE_CONNECTED=ss.STATE_CONNECTING=ss.STATE_CLOSED=ss.STATE_CLOSING=void 0;ss._advanceClusterTime=ch1;ss.STATE_CLOSING="closing";ss.STATE_CLOSED="closed";ss.STATE_CONNECTING="connecting";ss.STATE_CONNECTED="connected";ss.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});ss.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function ch1(F,A){if(F.clusterTime==null)F.clusterTime=A;else if(A.clusterTime.greaterThan(F.clusterTime.clusterTime))F.clusterTime=A}});var W3=Q((Fo)=>{Object.defineProperty(Fo,"__esModule",{value:!0});Fo.WriteConcern=Fo.WRITE_CONCERN_KEYS=void 0;Fo.throwIfWriteConcernError=sh1;var es=q0(),th1=B1();Fo.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class WY{constructor(F,A,$,B){if(F!=null)if(!Number.isNaN(Number(F)))this.w=Number(F);else this.w=F;if(A!=null)this.wtimeoutMS=this.wtimeout=A;if($!=null)this.journal=this.j=$;if(B!=null)this.journal=this.j=B?!0:!1}static apply(F,A){let $={};if(A.w!=null)$.w=A.w;if(A.wtimeoutMS!=null)$.wtimeout=A.wtimeoutMS;if(A.journal!=null)$.j=A.j;return F.writeConcern=$,F}static fromOptions(F,A){if(F==null)return;A=A??{};let $;if(typeof F==="string"||typeof F==="number")$={w:F};else if(F instanceof WY)$=F;else $=F.writeConcern;let J={...A instanceof WY?A:A.writeConcern,...$},{w:X=void 0,wtimeout:Y=void 0,j:D=void 0,fsync:G=void 0,journal:Z=void 0,wtimeoutMS:U=void 0}=J;if(X!=null||Y!=null||U!=null||D!=null||Z!=null||G!=null)return new WY(X,Y??U,D??Z,G);return}}Fo.WriteConcern=WY;function sh1(F){if(typeof F==="object"&&F!=null){let A=es.MongoDBResponse.is(F)&&F.has("writeConcernError")?F.toObject():!es.MongoDBResponse.is(F)&&("writeConcernError"in F)?F:null;if(A!=null)throw new th1.MongoWriteConcernError(A)}}});var W1=Q((Ko)=>{Object.defineProperty(Ko,"__esModule",{value:!0});Ko.kDispose=Ko.randomBytes=Ko.COSMOS_DB_MSG=Ko.DOCUMENT_DB_MSG=Ko.COSMOS_DB_CHECK=Ko.DOCUMENT_DB_CHECK=Ko.MONGODB_WARNING_CODE=Ko.DEFAULT_PK_FACTORY=Ko.HostAddress=Ko.BufferPool=Ko.List=Ko.MongoDBCollectionNamespace=Ko.MongoDBNamespace=Ko.ByteUtils=void 0;Ko.isUint8Array=Dm1;Ko.hostMatchesWildcards=Gm1;Ko.normalizeHintField=Zm1;Ko.isObject=lR;Ko.mergeOptions=zm1;Ko.filterOptions=Wm1;Ko.applyRetryableWrites=Hm1;Ko.isPromiseLike=Km1;Ko.decorateWithCollation=qm1;Ko.decorateWithReadConcern=Qm1;Ko.getTopology=Vm1;Ko.ns=Em1;Ko.makeCounter=Lm1;Ko.uuidV4=wm1;Ko.maxWireVersion=Im1;Ko.arrayStrictEqual=Cm1;Ko.errorStrictEqual=Nm1;Ko.makeStateMachine=Pm1;Ko.now=Do;Ko.calculateDurationInMs=Rm1;Ko.hasAtomicOperators=Go;Ko.resolveTimeoutOptions=jm1;Ko.resolveOptions=Mm1;Ko.isSuperset=Zo;Ko.isHello=Tm1;Ko.setDifference=km1;Ko.isRecord=Sm1;Ko.emitWarning=zo;Ko.emitWarningOnce=um1;Ko.enumToString=fm1;Ko.supportsRetryableWrites=xm1;Ko.shuffle=bm1;Ko.commandSupportsReadConcern=gm1;Ko.compareObjectId=_m1;Ko.parseInteger=Wo;Ko.parseUnsignedInteger=ym1;Ko.checkParentDomainMatch=vm1;Ko.get=hm1;Ko.request=mm1;Ko.isHostMatch=dm1;Ko.promiseWithResolvers=nR;Ko.squashError=cm1;Ko.once=lm1;Ko.maybeAddIdToDocuments=pm1;Ko.fileIsAccessible=im1;Ko.csotMin=am1;Ko.noop=nm1;Ko.decorateDecryptionResult=Ho;Ko.addAbortListener=rR;Ko.abortable=rm1;var Xo=x("crypto"),Fm1=x("fs"),Yo=x("http"),cR=x("timers"),Am1=x("url"),$m1=x("url"),Bm1=x("util"),pR=Y0(),$o=f8(),lz=T6(),H3=B1(),Jm1=W2(),Xm1=J4(),Ym1=D9(),Bo=W3();Ko.ByteUtils={toLocalBufferType(F){return Buffer.isBuffer(F)?F:Buffer.from(F.buffer,F.byteOffset,F.byteLength)},equals(F,A){return Ko.ByteUtils.toLocalBufferType(F).equals(A)},compare(F,A){return Ko.ByteUtils.toLocalBufferType(F).compare(A)},toBase64(F){return Ko.ByteUtils.toLocalBufferType(F).toString("base64")}};function Dm1(F){return F!=null&&typeof F==="object"&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Uint8Array"}function Gm1(F,A){for(let $ of A)if(F===$||$.startsWith("*.")&&F?.endsWith($.substring(2,$.length))||$.startsWith("*/")&&F?.endsWith($.substring(2,$.length)))return!0;return!1}function Zm1(F){let A=void 0;if(typeof F==="string")A=F;else if(Array.isArray(F))A={},F.forEach(($)=>{A[$]=1});else if(F!=null&&typeof F==="object"){A={};for(let $ in F)A[$]=F[$]}return A}var Um1=(F)=>Object.prototype.toString.call(F);function lR(F){return Um1(F)==="[object Object]"}function zm1(F,A){return{...F,...A}}function Wm1(F,A){let $={};for(let B in F)if(A.includes(B))$[B]=F[B];return $}function Hm1(F,A){if(A&&A.s.options?.retryWrites)F.retryWrites=!0;return F}function Km1(F){return F!=null&&typeof F==="object"&&"then"in F&&typeof F.then==="function"}function qm1(F,A){if(A.collation&&typeof A.collation==="object")F.collation=A.collation}function Qm1(F,A,$){if($&&$.session&&$.session.inTransaction())return;let B=Object.assign({},F.readConcern||{});if(A.s.readConcern)Object.assign(B,A.s.readConcern);if(Object.keys(B).length>0)Object.assign(F,{readConcern:B})}function Vm1(F){if("topology"in F&&F.topology)return F.topology;else if("client"in F&&F.client.topology)return F.client.topology;throw new H3.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function Em1(F){return qY.fromString(F)}class qY{constructor(F,A){this.db=F,this.collection=A===""?void 0:A}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(F){return new iR(this.db,F)}static fromString(F){if(typeof F!=="string"||F==="")throw new H3.MongoRuntimeError(`Cannot parse namespace from "${F}"`);let[A,...$]=F.split("."),B=$.join(".");return new qY(A,B===""?void 0:B)}}Ko.MongoDBNamespace=qY;class iR extends qY{constructor(F,A){super(F,A);this.collection=A}static fromString(F){return super.fromString(F)}}Ko.MongoDBCollectionNamespace=iR;function*Lm1(F=0){let A=F;while(!0){let $=A;A+=1,yield $}}function wm1(){let F=Xo.randomBytes(16);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}function Im1(F){if(F){if(F.hello)return F.hello.maxWireVersion;if(F.serverApi?.version)return $o.MAX_SUPPORTED_WIRE_VERSION;if(F.loadBalanced)return $o.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in F&&typeof F.lastHello==="function"){let A=F.lastHello();if(A)return A.maxWireVersion}if(F.description&&"maxWireVersion"in F.description&&F.description.maxWireVersion!=null)return F.description.maxWireVersion}return 0}function Cm1(F,A){if(!Array.isArray(F)||!Array.isArray(A))return!1;return F.length===A.length&&F.every(($,B)=>$===A[B])}function Nm1(F,A){if(F===A)return!0;if(!F||!A)return F===A;if(F==null&&A!=null||F!=null&&A==null)return!1;if(F.constructor.name!==A.constructor.name)return!1;if(F.message!==A.message)return!1;return!0}function Pm1(F){return function($,B){let J=F[$.s.state];if(J&&J.indexOf(B)<0)throw new H3.MongoRuntimeError(`illegal state transition from [${$.s.state}] => [${B}], allowed: [${J}]`);$.emit("stateChanged",$.s.state,B),$.s.state=B}}function Do(){let F=process.hrtime();return Math.floor(F[0]*1000+F[1]/1e6)}function Rm1(F){if(typeof F!=="number")return-1;let A=Do()-F;return A<0?0:A}function Go(F,A){if(Array.isArray(F)){for(let B of F)if(Go(B))return!0;return!1}let $=Object.keys(F);if(A?.ignoreUndefined){let B=!0;for(let J of $)if(F[J]!==void 0){B=!1;break}if(B)throw new H3.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return $.length>0&&$[0][0]==="$"}function jm1(F,A){let{socketTimeoutMS:$,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:J,timeoutMS:X}=F.s.options;return{socketTimeoutMS:$,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:J,timeoutMS:X,...A}}function Mm1(F,A){let $=Object.assign({},A,(0,pR.resolveBSONOptions)(A,F)),B=A?.timeoutMS??F?.timeoutMS,J=A?.session;if(!J?.inTransaction()){let D=Jm1.ReadConcern.fromOptions(A)??F?.readConcern;if(D)$.readConcern=D;let G=Bo.WriteConcern.fromOptions(A)??F?.writeConcern;if(G){if(B!=null)G=Bo.WriteConcern.fromOptions({writeConcern:{...G,wtimeout:void 0,wtimeoutMS:void 0}});$.writeConcern=G}}$.timeoutMS=B;let X=Xm1.ReadPreference.fromOptions(A)??F?.readPreference;if(X)$.readPreference=X;if(J?.explicit&&J?.timeoutContext!=null&&A?.timeoutMS!=null)throw new H3.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return $}function Zo(F,A){F=Array.isArray(F)?new Set(F):F,A=Array.isArray(A)?new Set(A):A;for(let $ of A)if(!F.has($))return!1;return!0}function Tm1(F){return F[lz.LEGACY_HELLO_COMMAND]||F.hello?!0:!1}function km1(F,A){let $=new Set(F);for(let B of A)$.delete(B);return $}var Om1=(F,A)=>Object.prototype.hasOwnProperty.call(F,A);function Sm1(F,A=void 0){if(!lR(F))return!1;let $=F.constructor;if($&&$.prototype){if(!lR($.prototype))return!1;if(!Om1($.prototype,"isPrototypeOf"))return!1}if(A){let B=Object.keys(F);return Zo(B,A)}return!0}class aR{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let F of this.nodes())yield F.value}*nodes(){let F=this.head.next;while(F!==this.head){let{next:A}=F;yield F,F=A}}push(F){this.count+=1;let A={next:this.head,prev:this.head.prev,value:F};this.head.prev.next=A,this.head.prev=A}pushMany(F){for(let A of F)this.push(A)}unshift(F){this.count+=1;let A={next:this.head.next,prev:this.head,value:F};this.head.next.prev=A,this.head.next=A}remove(F){if(F===this.head||this.length===0)return null;this.count-=1;let{prev:A,next:$}=F;return A.next=$,$.prev=A,F.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(F){for(let A of this.nodes())if(F(A.value))this.remove(A)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}Ko.List=aR;class Uo{constructor(){this.buffers=new aR,this.totalByteLength=0}get length(){return this.totalByteLength}append(F){this.buffers.push(F),this.totalByteLength+=F.length}getInt32(){if(this.totalByteLength<4)return null;let F=this.buffers.first();if(F!=null&&F.byteLength>=4)return F.readInt32LE(0);let A=this.read(4),$=A.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(A),$}read(F){if(typeof F!=="number"||F<0)throw new H3.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(F>this.totalByteLength)return Buffer.alloc(0);let A=Buffer.allocUnsafe(F);for(let $=0;$<F;){let B=this.buffers.shift();if(B==null)break;let J=F-$,X=Math.min(J,B.byteLength),Y=B.subarray(0,X);if(A.set(Y,$),$+=X,this.totalByteLength-=X,X<B.byteLength)this.buffers.unshift(B.subarray(X))}return A}}Ko.BufferPool=Uo;class KY{constructor(F){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let A=F.split(" ").join("%20");if(A.endsWith(".sock")){this.socketPath=decodeURIComponent(A);return}let $=`iLoveJS://${A}`,B;try{B=new $m1.URL($)}catch(D){let G=new H3.MongoRuntimeError(`Unable to parse ${A} with URL`);throw G.cause=D,G}let{hostname:J,port:X}=B,Y=decodeURIComponent(J).toLowerCase();if(Y.startsWith("[")&&Y.endsWith("]"))this.isIPv6=!0,Y=Y.substring(1,J.length-1);if(this.host=Y.toLowerCase(),typeof X==="number")this.port=X;else if(typeof X==="string"&&X!=="")this.port=Number.parseInt(X,10);else this.port=27017;if(this.port===0)throw new H3.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(F){return new KY(F)}static fromHostPort(F,A){if(F.includes(":"))F=`[${F}]`;return KY.fromString(`${F}:${A}`)}static fromSrvRecord({name:F,port:A}){return KY.fromHostPort(F,A)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let F=this.host??"",A=this.port??0;return{host:F,port:A}}}Ko.HostAddress=KY;Ko.DEFAULT_PK_FACTORY={createPk(){return new pR.ObjectId}};Ko.MONGODB_WARNING_CODE="MONGODB DRIVER";function zo(F){return process.emitWarning(F,{code:Ko.MONGODB_WARNING_CODE})}var Jo=new Set;function um1(F){if(!Jo.has(F))return Jo.add(F),zo(F)}function fm1(F){return Object.values(F).join(", ")}function xm1(F){if(!F)return!1;if(F.loadBalanced)return!0;if(F.description.logicalSessionTimeoutMinutes!=null){if(F.description.type!==Ym1.ServerType.Standalone)return!0}return!1}function bm1(F,A=0){let $=Array.from(F);if(A>$.length)throw new H3.MongoRuntimeError("Limit must be less than the number of items");let B=$.length,J=A%$.length===0?1:$.length-A;while(B>J){let X=Math.floor(Math.random()*B);B-=1;let Y=$[B];$[B]=$[X],$[X]=Y}return A%$.length===0?$:$.slice(J)}function gm1(F){if(F.aggregate||F.count||F.distinct||F.find||F.geoNear)return!0;return!1}function _m1(F,A){if(F==null&&A==null)return 0;if(F==null)return-1;if(A==null)return 1;return Ko.ByteUtils.compare(F.id,A.id)}function Wo(F){if(typeof F==="number")return Math.trunc(F);let A=Number.parseInt(String(F),10);return Number.isNaN(A)?null:A}function ym1(F){let A=Wo(F);return A!=null&&A>=0?A:null}function vm1(F,A){let $=F.endsWith(".")?F.slice(0,F.length-1):F,B=A.endsWith(".")?A.slice(0,A.length-1):A,J=/^.*?\./,X=B.split(".").length<3,Y=`.${$.replace(J,"")}`,D=X?B:`.${B.replace(J,"")}`;if(!D.startsWith("."))D="."+D;if(X&&$.split(".").length<=B.split(".").length)throw new H3.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!Y.endsWith(D))throw new H3.MongoAPIError("Server record does not share hostname with parent URI")}function hm1(F,A={}){return new Promise(($,B)=>{let J,X=Yo.get(F,A,(Y)=>{Y.setEncoding("utf8");let D="";Y.on("data",(G)=>D+=G),Y.on("end",()=>{(0,cR.clearTimeout)(J),$({status:Y.statusCode,body:D})})}).on("error",(Y)=>{(0,cR.clearTimeout)(J),B(Y)}).end();J=(0,cR.setTimeout)(()=>{X.destroy(new H3.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function mm1(F,A={}){return await new Promise(($,B)=>{let J={method:"GET",timeout:1e4,json:!0,...Am1.parse(F),...A},X=Yo.request(J,(Y)=>{Y.setEncoding("utf8");let D="";Y.on("data",(G)=>{D+=G}),Y.once("end",()=>{if(A.json===!1){$(D);return}try{let G=JSON.parse(D);$(G)}catch{B(new H3.MongoRuntimeError(`Invalid JSON response: "${D}"`))}})});X.once("timeout",()=>X.destroy(new H3.MongoNetworkTimeoutError(`Network request to ${F} timed out after ${A.timeout} ms`))),X.once("error",(Y)=>B(Y)),X.end()})}Ko.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;Ko.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;Ko.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";Ko.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function dm1(F,A){return A&&F.test(A.toLowerCase())?!0:!1}function nR(){let F,A;return{promise:new Promise(function(J,X){F=J,A=X}),resolve:F,reject:A}}function cm1(F){return}Ko.randomBytes=(0,Bm1.promisify)(Xo.randomBytes);async function lm1(F,A,$){$?.signal?.throwIfAborted();let{promise:B,resolve:J,reject:X}=nR(),Y=(Z)=>J(Z),D=(Z)=>X(Z),G=rR($?.signal,function(){X(this.reason)});F.once(A,Y).once("error",D);try{return await B}finally{F.off(A,Y),F.off("error",D),G?.[Ko.kDispose]()}}function pm1(F,A,$){if($.forceServerObjectId??F.db.options?.forceServerObjectId??!1)return A;if(A._id==null)A._id=F.s.pkFactory.createPk();return A}async function im1(F,A){try{return await Fm1.promises.access(F,A),!0}catch{return!1}}function am1(F,A){if(F===0)return A;if(A===0)return F;return Math.min(F,A)}function nm1(){return}function Ho(F,A,$=!0){if($){if(Buffer.isBuffer(A))A=(0,pR.deserialize)(A);if(Buffer.isBuffer(F))throw new H3.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!F||typeof F!=="object")return;for(let B of Object.keys(F)){let J=A[B];if(J&&J._bsontype==="Binary"&&J.sub_type===6){if(!F[lz.kDecoratedKeys])Object.defineProperty(F,lz.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});F[lz.kDecoratedKeys].push(B);continue}Ho(F[B],J,!1)}}Ko.kDispose=Symbol.dispose??Symbol("dispose");function rR(F,A){if(F==null)return;return F.addEventListener("abort",A,{once:!0}),{[Ko.kDispose]:()=>F.removeEventListener("abort",A)}}async function rm1(F,{signal:A}){if(A==null)return await F;let{promise:$,reject:B}=nR(),J=A.aborted?B(A.reason):rR(A,function(){B(this.reason)});try{return await Promise.race([F,$])}finally{J?.[Ko.kDispose]()}}});var Eo=Q((Qo)=>{Object.defineProperty(Qo,"__esModule",{value:!0});Qo.OnDemandDocument=void 0;var a1=Y0(),VY={type:0,nameOffset:1,nameLength:2,offset:3,length:4};class pz{constructor(F,A=0,$=!1,B){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=F,this.offset=A,this.isArray=$,this.elements=B??(0,a1.parseToElementsToArray)(this.bson,A)}isElementName(F,A){let $=A[VY.nameLength],B=A[VY.nameOffset];if(F.length!==$)return!1;let J=B+$;for(let X=B,Y=0;Y<F.length&&X<J;Y++,X++)if(this.bson[X]!==F.charCodeAt(Y))return!1;return!0}getElement(F){let A=this.cache[F];if(A===!1)return null;if(A!=null)return A;if(typeof F==="number")if(this.isArray)if(F<this.elements.length){let B={element:this.elements[F],value:void 0};return this.cache[F]=B,this.indexFound[F]=!0,B}else return null;else return null;for(let $=0;$<this.elements.length;$++){let B=this.elements[$];if(!($ in this.indexFound)&&this.isElementName(F,B)){let J={element:B,value:void 0};return this.cache[F]=J,this.indexFound[$]=!0,J}}return this.cache[F]=!1,null}toJSValue(F,A){let $=F[VY.type],B=F[VY.offset],J=F[VY.length];if(A!==$)return null;switch(A){case a1.BSONType.null:case a1.BSONType.undefined:return null;case a1.BSONType.double:return(0,a1.getFloat64LE)(this.bson,B);case a1.BSONType.int:return(0,a1.getInt32LE)(this.bson,B);case a1.BSONType.long:return(0,a1.getBigInt64LE)(this.bson,B);case a1.BSONType.bool:return Boolean(this.bson[B]);case a1.BSONType.objectId:return new a1.ObjectId(this.bson.subarray(B,B+12));case a1.BSONType.timestamp:return new a1.Timestamp((0,a1.getBigInt64LE)(this.bson,B));case a1.BSONType.string:return(0,a1.toUTF8)(this.bson,B+4,B+J-1,!1);case a1.BSONType.binData:{let X=(0,a1.getInt32LE)(this.bson,B),Y=this.bson[B+4];if(Y===2){let D=(0,a1.getInt32LE)(this.bson,B+1+4);if(D<0)throw new a1.BSONError("Negative binary type element size found for subtype 0x02");if(D>X-4)throw new a1.BSONError("Binary type with subtype 0x02 contains too long binary size");if(D<X-4)throw new a1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new a1.Binary(this.bson.subarray(B+1+4+4,B+1+4+4+D),2)}return new a1.Binary(this.bson.subarray(B+1+4,B+1+4+X),Y)}case a1.BSONType.date:return new Date(Number((0,a1.getBigInt64LE)(this.bson,B)));case a1.BSONType.object:return new pz(this.bson,B);case a1.BSONType.array:return new pz(this.bson,B,!0);default:throw new a1.BSONError(`Unsupported BSON type: ${A}`)}}size(){return this.elements.length}has(F){let A=this.cache[F];if(A===!1)return!1;if(A!=null)return!0;return this.getElement(F)!=null}get(F,A,$){let B=this.getElement(F);if(B==null)if($===!0)throw new a1.BSONError(`BSON element "${F}" is missing`);else return null;if(B.value==null){let J=this.toJSValue(B.element,A);if(J==null)if($===!0)throw new a1.BSONError(`BSON element "${F}" is missing`);else return null;B.value=J}return B.value}getNumber(F,A){let $=this.get(F,a1.BSONType.bool),B=$==null?null:$?1:0,J=this.get(F,a1.BSONType.long),X=J==null?null:Number(J),Y=B??X??this.get(F,a1.BSONType.int)??this.get(F,a1.BSONType.double);if(A===!0&&Y==null)throw new a1.BSONError(`BSON element "${F}" is missing`);return Y}toObject(F){return(0,a1.deserialize)(this.bson,{...F,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let F=(0,a1.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+F)}}Qo.OnDemandDocument=pz});var q0=Q((No)=>{Object.defineProperty(No,"__esModule",{value:!0});No.ClientBulkWriteCursorResponse=No.ExplainedCursorResponse=No.CursorResponse=No.MongoDBResponse=void 0;No.isErrorResponse=wo;var A0=Y0(),XF=B1(),Lo=W1(),Bc1=Eo(),iz={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function wo(F,A){for(let $=0;$<A.length;$++){let B=A[$];if(B[iz.nameLength]===2){let J=B[iz.nameOffset];if(F[J]===111&&F[J+1]===107){let X=B[iz.offset],Y=B[iz.length];for(let D=X;D<X+Y;D++)if(F[D]!==0)return!1;return!0}}}return!0}class DF extends Bc1.OnDemandDocument{get(F,A,$){try{return super.get(F,A,$)}catch(B){throw new XF.MongoUnexpectedServerResponseError(B.message,{cause:B})}}static is(F){return F instanceof DF}static make(F){let A=(0,A0.parseToElementsToArray)(F,0);return wo(F,A)?new DF(F,0,!1,A):new this(F,0,!1,A)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===XF.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",A0.BSONType.object)?.getNumber("code")===XF.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let $=this.get("writeErrors",A0.BSONType.array);if($?.size()){for(let B=0;B<$.size();B++)if($.get(B,A0.BSONType.object)?.getNumber("code")===XF.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",A0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",A0.BSONType.object)?.get("atClusterTime",A0.BSONType.timestamp)??this.get("atClusterTime",A0.BSONType.timestamp)}get operationTime(){return this.get("operationTime",A0.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",A0.BSONType.string)}get errmsg(){return this.get("errmsg",A0.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let F=this.get("$clusterTime",A0.BSONType.object);if(F==null)return this.clusterTime=null,null;let A=F.get("clusterTime",A0.BSONType.timestamp,!0),$=F.get("signature",A0.BSONType.object)?.toObject();this.clusterTime={clusterTime:A,signature:$}}return this.clusterTime??null}toObject(F){let A={...(0,A0.pluckBSONSerializeOptions)(F??{}),validation:(0,A0.parseUtf8ValidationOption)(F)};return super.toObject(A)}}No.MongoDBResponse=DF;DF.empty=new DF(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));class YF extends DF{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new YF((0,A0.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(F){return F instanceof YF||F===YF.emptyGetMore}get cursor(){return this.get("cursor",A0.BSONType.object,!0)}get id(){try{return A0.Long.fromBigInt(this.cursor.get("id",A0.BSONType.long,!0))}catch(F){throw new XF.MongoUnexpectedServerResponseError(F.message,{cause:F})}}get ns(){let F=this.cursor.get("ns",A0.BSONType.string);if(F!=null)return(0,Lo.ns)(F);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let F=this.encryptedResponse?.get("cursor",A0.BSONType.object);if(F?.has("firstBatch"))this._encryptedBatch=F.get("firstBatch",A0.BSONType.array,!0);else if(F?.has("nextBatch"))this._encryptedBatch=F.get("nextBatch",A0.BSONType.array,!0);else throw new XF.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let F=this.cursor;if(F.has("firstBatch"))this._batch=F.get("firstBatch",A0.BSONType.array,!0);else if(F.has("nextBatch"))this._batch=F.get("nextBatch",A0.BSONType.array,!0);else throw new XF.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",A0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(F){if(this.iterated>=this.batchSize)return null;let A=this.batch.get(this.iterated,A0.BSONType.object,!0)??null,$=this.encryptedBatch?.get(this.iterated,A0.BSONType.object,!0)??null;if(this.iterated+=1,F?.raw)return A.toBytes();else{let B=A.toObject(F);if($)(0,Lo.decorateDecryptionResult)(B,$.toObject(F),!0);return B}}clear(){this.iterated=this.batchSize}}No.CursorResponse=YF;class Io extends YF{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return A0.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(F){if(this._length===0)return null;return this._length-=1,this.toObject(F)}}No.ExplainedCursorResponse=Io;class Co extends YF{get insertedCount(){return this.get("nInserted",A0.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",A0.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",A0.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",A0.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",A0.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",A0.BSONType.object,!1)}}No.ClientBulkWriteCursorResponse=Co});var EY=Q((Ro)=>{Object.defineProperty(Ro,"__esModule",{value:!0});Ro.Explain=Ro.ExplainVerbosity=void 0;Ro.validateExplainTimeoutOptions=Zc1;Ro.decorateWithExplain=Uc1;var Gc1=B1();Ro.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class az{constructor(F,A){if(typeof F==="boolean")this.verbosity=F?Ro.ExplainVerbosity.allPlansExecution:Ro.ExplainVerbosity.queryPlanner;else this.verbosity=F;this.maxTimeMS=A}static fromOptions({explain:F}={}){if(F==null)return;if(typeof F==="boolean"||typeof F==="string")return new az(F);let{verbosity:A,maxTimeMS:$}=F;return new az(A,$)}}Ro.Explain=az;function Zc1(F,A){let{maxTimeMS:$,timeoutMS:B}=F;if(B!=null&&($!=null||A?.maxTimeMS!=null))throw new Gc1.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Uc1(F,A){let{verbosity:$,maxTimeMS:B}=A,J={explain:F,verbosity:$};if(typeof B==="number")J.maxTimeMS=B;return J}});var T0=Q((To)=>{Object.defineProperty(To,"__esModule",{value:!0});To.AbstractOperation=To.Aspect=void 0;To.defineAspects=Kc1;var Hc1=Y0(),sR=J4();To.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};class Mo{constructor(F={}){this.readPreference=this.hasAspect(To.Aspect.WRITE_OPERATION)?sR.ReadPreference.primary:sR.ReadPreference.fromOptions(F)??sR.ReadPreference.primary,this.bsonOptions=(0,Hc1.resolveBSONOptions)(F),this._session=F.session!=null?F.session:void 0,this.options=F,this.bypassPinningCheck=!!F.bypassPinningCheck}hasAspect(F){let A=this.constructor;if(A.aspects==null)return!1;return A.aspects.has(F)}get session(){return this._session}set session(F){this._session=F}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(To.Aspect.RETRYABLE)&&this.hasAspect(To.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(To.Aspect.RETRYABLE)&&this.hasAspect(To.Aspect.WRITE_OPERATION)}handleOk(F){return F.toObject(this.bsonOptions)}handleError(F){throw F}}To.AbstractOperation=Mo;function Kc1(F,A){if(!Array.isArray(A)&&!(A instanceof Set))A=[A];return A=new Set(A),Object.defineProperty(F,"aspects",{value:A,writable:!1}),A}});var K6=Q((uo)=>{Object.defineProperty(uo,"__esModule",{value:!0});uo.CommandOperation=void 0;var Qc1=f8(),Vc1=B1(),oR=EY(),Ec1=W2(),nz=W1(),Oo=W3(),GF=T0();class So extends GF.AbstractOperation{constructor(F,A){super(A);this.options=A??{};let $=A?.dbName||A?.authdb;if($)this.ns=new nz.MongoDBNamespace($,"$cmd");else this.ns=F?F.s.namespace.withCollection("$cmd"):new nz.MongoDBNamespace("admin","$cmd");if(this.readConcern=Ec1.ReadConcern.fromOptions(A),this.writeConcern=Oo.WriteConcern.fromOptions(A),this.hasAspect(GF.Aspect.EXPLAINABLE)){if(this.explain=oR.Explain.fromOptions(A),this.explain)(0,oR.validateExplainTimeoutOptions)(this.options,this.explain)}else if(A?.explain!=null)throw new Vc1.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(GF.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}buildOptions(F){return{...this.options,...this.bsonOptions,timeoutContext:F,readPreference:this.readPreference,session:this.session}}buildCommand(F,A){let $=this.buildCommandDocument(F,A),B=this.session&&this.session.inTransaction();if(this.readConcern&&(0,nz.commandSupportsReadConcern)($)&&!B)Object.assign($,{readConcern:this.readConcern});if(this.writeConcern&&this.hasAspect(GF.Aspect.WRITE_OPERATION)&&!B)Oo.WriteConcern.apply($,this.writeConcern);if(this.options.collation&&typeof this.options.collation==="object"&&!this.hasAspect(GF.Aspect.SKIP_COLLATION))Object.assign($,{collation:this.options.collation});if(typeof this.options.maxTimeMS==="number")$.maxTimeMS=this.options.maxTimeMS;if(this.options.rawData!=null&&this.hasAspect(GF.Aspect.SUPPORTS_RAW_DATA)&&(0,nz.maxWireVersion)(F)>=Qc1.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION)$.rawData=this.options.rawData;if(this.hasAspect(GF.Aspect.EXPLAINABLE)&&this.explain)return(0,oR.decorateWithExplain)($,this.explain);return $}}uo.CommandOperation=So});var $j=Q((xo)=>{Object.defineProperty(xo,"__esModule",{value:!0});xo.DeleteManyOperation=xo.DeleteOneOperation=xo.DeleteOperation=void 0;xo.makeDeleteStatement=Aj;var Lc1=q0(),LY=B1(),wc1=W1(),Ic1=K6(),K3=T0();class wY extends Ic1.CommandOperation{constructor(F,A,$){super(void 0,$);this.SERVER_COMMAND_RESPONSE_TYPE=Lc1.MongoDBResponse,this.options=$,this.ns=F,this.statements=A}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.limit!=null?F.limit>0:!0)}buildCommandDocument(F,A){let $=this.options,B=typeof $.ordered==="boolean"?$.ordered:!0,J={delete:this.ns.collection,deletes:this.statements,ordered:B};if($.let)J.let=$.let;if($.comment!==void 0)J.comment=$.comment;if(this.writeConcern&&this.writeConcern.w===0&&(0,wc1.maxWireVersion)(F)<9){if(this.statements.find((Y)=>Y.hint))throw new LY.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+")}return J}}xo.DeleteOperation=wY;class eR extends wY{constructor(F,A,$){super(F,[Aj(A,{...$,limit:1})],$)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new LY.MongoServerError(A);if(A.writeErrors)throw new LY.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}xo.DeleteOneOperation=eR;class Fj extends wY{constructor(F,A,$){super(F,[Aj(A,$)],$)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new LY.MongoServerError(A);if(A.writeErrors)throw new LY.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}xo.DeleteManyOperation=Fj;function Aj(F,A){let $={q:F,limit:typeof A.limit==="number"?A.limit:0};if(A.collation)$.collation=A.collation;if(A.hint)$.hint=A.hint;return $}(0,K3.defineAspects)(wY,[K3.Aspect.RETRYABLE,K3.Aspect.WRITE_OPERATION,K3.Aspect.SUPPORTS_RAW_DATA]);(0,K3.defineAspects)(eR,[K3.Aspect.RETRYABLE,K3.Aspect.WRITE_OPERATION,K3.Aspect.EXPLAINABLE,K3.Aspect.SKIP_COLLATION,K3.Aspect.SUPPORTS_RAW_DATA]);(0,K3.defineAspects)(Fj,[K3.Aspect.WRITE_OPERATION,K3.Aspect.EXPLAINABLE,K3.Aspect.SKIP_COLLATION,K3.Aspect.SUPPORTS_RAW_DATA])});var CY=Q((yo)=>{Object.defineProperty(yo,"__esModule",{value:!0});yo.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;yo.writableServerSelector=jc1;yo.sameServerSelector=Mc1;yo.secondaryWritableServerSelector=Tc1;yo.readPreferenceServerSelector=Jj;var Bj=B1(),IY=J4(),G9=D9(),Rc1=1e4,go=90;yo.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function jc1(){return function(A,$){return rz(A,$.filter((B)=>B.isWritable))}}function Mc1(F){return function($,B){if(!F)return[];return B.filter((J)=>{return J.address===F.address&&J.type!==G9.ServerType.Unknown})}}function Tc1(F,A){if(!A||!F||F&&F<yo.MIN_SECONDARY_WRITE_WIRE_VERSION)return Jj(IY.ReadPreference.primary);return Jj(A)}function kc1(F,A,$){if(F.maxStalenessSeconds==null||F.maxStalenessSeconds<0)return $;let B=F.maxStalenessSeconds,J=(A.heartbeatFrequencyMS+Rc1)/1000;if(B<J)throw new Bj.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${J} seconds`);if(B<go)throw new Bj.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${go} seconds`);if(A.type===G9.TopologyType.ReplicaSetWithPrimary){let X=Array.from(A.servers.values()).filter(tz)[0];return $.reduce((Y,D)=>{let Z=(D.lastUpdateTime-D.lastWriteDate-(X.lastUpdateTime-X.lastWriteDate)+A.heartbeatFrequencyMS)/1000,U=F.maxStalenessSeconds??0;if(Z<=U)Y.push(D);return Y},[])}if(A.type===G9.TopologyType.ReplicaSetNoPrimary){if($.length===0)return $;let X=$.reduce((Y,D)=>D.lastWriteDate>Y.lastWriteDate?D:Y);return $.reduce((Y,D)=>{let Z=(X.lastWriteDate-D.lastWriteDate+A.heartbeatFrequencyMS)/1000,U=F.maxStalenessSeconds??0;if(Z<=U)Y.push(D);return Y},[])}return $}function Oc1(F,A){let $=Object.keys(F),B=Object.keys(A);for(let J=0;J<$.length;++J){let X=$[J];if(B.indexOf(X)===-1||A[X]!==F[X])return!1}return!0}function Sc1(F,A){if(F.tags==null||Array.isArray(F.tags)&&F.tags.length===0)return A;for(let $=0;$<F.tags.length;++$){let B=F.tags[$],J=A.reduce((X,Y)=>{if(Oc1(B,Y.tags))X.push(Y);return X},[]);if(J.length)return J}return[]}function rz(F,A){let $=A.reduce((J,X)=>Math.min(X.roundTripTime,J),1/0),B=$+F.localThresholdMS;return A.reduce((J,X)=>{if(X.roundTripTime<=B&&X.roundTripTime>=$)J.push(X);return J},[])}function tz(F){return F.type===G9.ServerType.RSPrimary}function uc1(F){return F.type===G9.ServerType.RSSecondary}function fc1(F){return F.type===G9.ServerType.RSSecondary||F.type===G9.ServerType.RSPrimary}function _o(F){return F.type!==G9.ServerType.Unknown}function xc1(F){return F.type===G9.ServerType.LoadBalancer}function Jj(F){if(!F.isValid())throw new Bj.MongoInvalidArgumentError("Invalid read preference specified");return function($,B,J=[]){if($.type===G9.TopologyType.LoadBalanced)return B.filter(xc1);if($.type===G9.TopologyType.Unknown)return[];if($.type===G9.TopologyType.Single)return rz($,B.filter(_o));if($.type===G9.TopologyType.Sharded){let G=B.filter((U)=>{return!J.includes(U)}),Z=G.length>0?G:J;return rz($,Z.filter(_o))}let X=F.mode;if(X===IY.ReadPreference.PRIMARY)return B.filter(tz);if(X===IY.ReadPreference.PRIMARY_PREFERRED){let G=B.filter(tz);if(G.length)return G}let Y=X===IY.ReadPreference.NEAREST?fc1:uc1,D=rz($,Sc1(F,kc1(F,$,B.filter(Y))));if(X===IY.ReadPreference.SECONDARY_PREFERRED&&D.length===0)return B.filter(tz);return D}}});var n6=Q((ho)=>{Object.defineProperty(ho,"__esModule",{value:!0});ho.LegacyTimeoutContext=ho.CSOTTimeoutContext=ho.TimeoutContext=ho.Timeout=ho.TimeoutError=void 0;var vo=x("timers"),ZF=B1(),Yj=W1();class sz extends Error{get name(){return"TimeoutError"}constructor(F,A){super(F,A);this.duration=A.duration}static is(F){return F!=null&&typeof F==="object"&&"name"in F&&F.name==="TimeoutError"}}ho.TimeoutError=sz;class Z9 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(F=()=>null,A){let $=A?.duration??0,B=!!A?.unref,J=A?.rejection;if($<0)throw new ZF.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let X;super((Y,D)=>{X=D,F(Yj.noop,D)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=$,this.start=Math.trunc(performance.now()),J==null&&this.duration>0){if(this.id=(0,vo.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,X(new sz(`Expired after ${$}ms`,{duration:$}))},this.duration),typeof this.id.unref==="function"&&B)this.id.unref()}else if(J!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,X(J)}clear(){(0,vo.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,Yj.squashError),new sz("Timed out",{duration:this.duration})}static expires(F,A){return new Z9(void 0,{duration:F,unref:A})}static reject(F){return new Z9(void 0,{duration:0,unref:!0,rejection:F})}}ho.Timeout=Z9;function vc1(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in F&&typeof F.waitQueueTimeoutMS==="number"}function hc1(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"timeoutMS"in F&&typeof F.timeoutMS==="number"}class oz{static create(F){if(F.session?.timeoutContext!=null)return F.session?.timeoutContext;if(hc1(F))return new NY(F);else if(vc1(F))return new ez(F);else throw new ZF.MongoRuntimeError("Unrecognized options")}}ho.TimeoutContext=oz;class NY extends oz{constructor(F){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=F.timeoutMS,this.serverSelectionTimeoutMS=F.serverSelectionTimeoutMS,this.socketTimeoutMS=F.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let F=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-F}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:F,serverSelectionTimeoutMS:A}=this;if(F<=0)return Z9.reject(new ZF.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(A!==0&&(0,Yj.csotMin)(F,A)===A)this._serverSelectionTimeout=Z9.expires(A);else if(F>0&&Number.isFinite(F))this._serverSelectionTimeout=Z9.expires(F);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new ZF.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return Z9.expires(F);return Z9.reject(new ZF.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return Z9.expires(F);return Z9.reject(new ZF.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(F){let{remainingTimeMS:A}=this;if(A<=0)throw new ZF.MongoOperationTimeoutError(F??`Expired after ${this.timeoutMS}ms`);return A}clone(){let F=new NY({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return F.start=this.start,F}refreshed(){return new NY(this)}addMaxTimeMSToCommand(F,A){if(A.omitMaxTimeMS)return;let $=this.remainingTimeMS-this.minRoundTripTime;if($>0&&Number.isFinite($))F.maxTimeMS=$}getSocketTimeoutMS(){return 0}}ho.CSOTTimeoutContext=NY;class ez extends oz{constructor(F){super();this.options=F,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return Z9.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return Z9.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new ez(this.options)}addMaxTimeMSToCommand(F,A){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}ho.LegacyTimeoutContext=ez});var PY=Q((lo)=>{Object.defineProperty(lo,"__esModule",{value:!0});lo.AggregateOperation=lo.DB_AGGREGATE_COLLECTION=void 0;var Dj=q0(),co=B1(),pc1=W3(),ic1=K6(),w$=T0();lo.DB_AGGREGATE_COLLECTION=1;class Gj extends ic1.CommandOperation{constructor(F,A,$){super(void 0,{...$,dbName:F.db});if(this.SERVER_COMMAND_RESPONSE_TYPE=Dj.CursorResponse,this.options={...$},this.target=F.collection||lo.DB_AGGREGATE_COLLECTION,this.pipeline=A,this.hasWriteStage=!1,typeof $?.out==="string")this.pipeline=this.pipeline.concat({$out:$.out}),this.hasWriteStage=!0;else if(A.length>0){let B=A[A.length-1];if(B.$out||B.$merge)this.hasWriteStage=!0}if(!this.hasWriteStage)delete this.options.writeConcern;if(this.explain&&this.writeConcern)throw new co.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if($?.cursor!=null&&typeof $.cursor!=="object")throw new co.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?Dj.ExplainedCursorResponse:Dj.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(F){this.pipeline.push(F)}buildCommandDocument(){let F=this.options,A={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&this.writeConcern)pc1.WriteConcern.apply(A,this.writeConcern);if(F.bypassDocumentValidation===!0)A.bypassDocumentValidation=F.bypassDocumentValidation;if(typeof F.allowDiskUse==="boolean")A.allowDiskUse=F.allowDiskUse;if(F.hint)A.hint=F.hint;if(F.let)A.let=F.let;if(F.comment!==void 0)A.comment=F.comment;if(A.cursor=F.cursor||{},F.batchSize&&!this.hasWriteStage)A.cursor.batchSize=F.batchSize;return A}handleOk(F){return F}}lo.AggregateOperation=Gj;(0,w$.defineAspects)(Gj,[w$.Aspect.READ_OPERATION,w$.Aspect.RETRYABLE,w$.Aspect.EXPLAINABLE,w$.Aspect.CURSOR_CREATING,w$.Aspect.SUPPORTS_RAW_DATA])});var X4=Q((so)=>{Object.defineProperty(so,"__esModule",{value:!0});so.executeOperation=tc1;so.autoConnect=to;var d4=B1(),ao=J4(),no=CY(),ac1=n6(),Zj=W1(),nc1=PY(),P7=T0(),rc1=d4.MONGODB_ERROR_CODES.IllegalOperation,ro="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function tc1(F,A,$){if(!(A instanceof P7.AbstractOperation))throw new d4.MongoRuntimeError("This method requires a valid operation instance");let B=F.topology==null?await(0,Zj.abortable)(to(F),A.options):F.topology,J=A.session,X;if(J==null)X=Symbol(),J=F.startSession({owner:X,explicit:!1});else if(J.hasEnded)throw new d4.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(J.snapshotEnabled&&!B.capabilities.supportsSnapshotReads)throw new d4.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(J.client!==F)throw new d4.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");A.session??=J;let Y=A.readPreference??ao.ReadPreference.primary,D=!!J?.inTransaction(),G=A.hasAspect(P7.Aspect.READ_OPERATION);if(D&&!Y.equals(ao.ReadPreference.primary)&&(G||A.commandName==="runCommand"))throw new d4.MongoTransactionError(`Read preference in a transaction must be primary, not: ${Y.mode}`);if(J?.isPinned&&J.transaction.isCommitted&&!A.bypassPinningCheck)J.unpin();$??=ac1.TimeoutContext.create({session:J,serverSelectionTimeoutMS:F.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.s.options.waitQueueTimeoutMS,timeoutMS:A.options.timeoutMS});try{return await sc1(A,{topology:B,timeoutContext:$,session:J,readPreference:Y})}finally{if(J?.owner!=null&&J.owner===X)await J.endSession()}}async function to(F){if(F.topology==null){if(F.s.hasBeenClosed)throw new d4.MongoNotConnectedError("Client must be connected before running operations");F.s.options.__skipPingOnConnect=!0;try{if(await F.connect(),F.topology==null)throw new d4.MongoRuntimeError("client.connect did not create a topology but also did not throw");return F.topology}finally{delete F.s.options.__skipPingOnConnect}}return F.topology}async function sc1(F,{topology:A,timeoutContext:$,session:B,readPreference:J}){let X;if(F.hasAspect(P7.Aspect.MUST_SELECT_SAME_SERVER))X=(0,no.sameServerSelector)(F.server?.description);else if(F instanceof nc1.AggregateOperation&&F.hasWriteStage)X=(0,no.secondaryWritableServerSelector)(A.commonWireVersion,J);else X=J;let Y=await A.selectServer(X,{session:B,operationName:F.commandName,timeoutContext:$,signal:F.options.signal}),D=F.hasAspect(P7.Aspect.READ_OPERATION),G=F.hasAspect(P7.Aspect.WRITE_OPERATION),Z=B?.inTransaction()??!1,U=A.s.options.retryReads&&!Z&&F.canRetryRead,z=A.s.options.retryWrites&&!Z&&(0,Zj.supportsRetryableWrites)(Y)&&F.canRetryWrite,W=F.hasAspect(P7.Aspect.RETRYABLE)&&B!=null&&(D&&U||G&&z);if(G&&z&&B!=null)F.options.willRetryWrite=!0,B.incrementTransactionNumber();let H=W?$.csotEnabled()?1/0:2:1,K,q;for(let V=0;V<H;V++){if(K){if(G&&K.code===rc1)throw new d4.MongoServerError({message:ro,errmsg:ro,originalError:K});if(F.hasAspect(P7.Aspect.COMMAND_BATCHING)&&!F.canRetryWrite)throw K;if(G&&!(0,d4.isRetryableWriteError)(K))throw K;if(D&&!(0,d4.isRetryableReadError)(K))throw K;if(K instanceof d4.MongoNetworkError&&F.hasAspect(P7.Aspect.CURSOR_CREATING)&&B!=null&&B.isPinned&&!B.inTransaction())B.unpin({force:!0,forceClear:!0});if(Y=await A.selectServer(X,{session:B,operationName:F.commandName,previousServer:q,signal:F.options.signal}),G&&!(0,Zj.supportsRetryableWrites)(Y))throw new d4.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}F.server=Y;try{if(V>0&&F.hasAspect(P7.Aspect.COMMAND_BATCHING))F.resetBatch();try{let E=await Y.command(F,$);return F.handleOk(E)}catch(E){return F.handleError(E)}}catch(E){if(!(E instanceof d4.MongoError))throw E;if(K!=null&&E.hasErrorLabel(d4.MongoErrorLabel.NoWritesPerformed))throw K;q=Y.description,K=E,$.clear()}}throw K??new d4.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var zj=Q((eo)=>{Object.defineProperty(eo,"__esModule",{value:!0});eo.InsertOneOperation=eo.InsertOperation=void 0;var Fl1=q0(),oo=B1(),Al1=W1(),$l1=K6(),x8=T0();class FW extends $l1.CommandOperation{constructor(F,A,$){super(void 0,$);this.SERVER_COMMAND_RESPONSE_TYPE=Fl1.MongoDBResponse,this.options={...$,checkKeys:$.checkKeys??!1},this.ns=F,this.documents=A}get commandName(){return"insert"}buildCommandDocument(F,A){let $=this.options??{},B=typeof $.ordered==="boolean"?$.ordered:!0,J={insert:this.ns.collection,documents:this.documents,ordered:B};if(typeof $.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=$.bypassDocumentValidation;if($.comment!==void 0)J.comment=$.comment;return J}}eo.InsertOperation=FW;class Uj extends FW{constructor(F,A,$){super(F.s.namespace,[(0,Al1.maybeAddIdToDocuments)(F,A,$)],$)}handleOk(F){let A=super.handleOk(F);if(A.code)throw new oo.MongoServerError(A);if(A.writeErrors)throw new oo.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}eo.InsertOneOperation=Uj;(0,x8.defineAspects)(FW,[x8.Aspect.RETRYABLE,x8.Aspect.WRITE_OPERATION,x8.Aspect.SUPPORTS_RAW_DATA]);(0,x8.defineAspects)(Uj,[x8.Aspect.RETRYABLE,x8.Aspect.WRITE_OPERATION,x8.Aspect.SUPPORTS_RAW_DATA])});var C$=Q(($e)=>{Object.defineProperty($e,"__esModule",{value:!0});$e.formatSort=Kl1;var Ae=B1();function I$(F=1){let A=`${F}`.toLowerCase();if(Jl1(F))return F;switch(A){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Ae.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(F)}`)}}function Jl1(F){return typeof F==="object"&&F!=null&&"$meta"in F&&typeof F.$meta==="string"}function Xl1(F){if(Array.isArray(F)&&F.length===2)try{return I$(F[1]),!0}catch{return!1}return!1}function Yl1(F){return Array.isArray(F)&&Array.isArray(F[0])}function Dl1(F){return F instanceof Map&&F.size>0}function Gl1(F){return Array.isArray(F)}function Zl1(F){return new Map([[`${F[0]}`,I$([F[1]])]])}function Ul1(F){let A=F.map(([$,B])=>[`${$}`,I$(B)]);return new Map(A)}function zl1(F){let A=F.map(($)=>[`${$}`,1]);return new Map(A)}function Wl1(F){let A=Object.entries(F).map(([$,B])=>[`${$}`,I$(B)]);return new Map(A)}function Hl1(F){let A=Array.from(F).map(([$,B])=>[`${$}`,I$(B)]);return new Map(A)}function Kl1(F,A){if(F==null)return;if(typeof F==="string")return new Map([[F,I$(A)]]);if(typeof F!=="object")throw new Ae.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(F)} Sort must be a valid object`);if(!Gl1(F)){if(Dl1(F))return Hl1(F);if(Object.keys(F).length)return Wl1(F);return}if(!F.length)return;if(Yl1(F))return Ul1(F);if(Xl1(F))return Zl1(F);return zl1(F)}});var Qj=Q((Be)=>{Object.defineProperty(Be,"__esModule",{value:!0});Be.ReplaceOneOperation=Be.UpdateManyOperation=Be.UpdateOneOperation=Be.UpdateOperation=void 0;Be.makeUpdateStatement=AW;var Ql1=q0(),K2=B1(),Vl1=C$(),Wj=W1(),El1=K6(),k6=T0();class N$ extends El1.CommandOperation{constructor(F,A,$){super(void 0,$);this.SERVER_COMMAND_RESPONSE_TYPE=Ql1.MongoDBResponse,this.options=$,this.ns=F,this.statements=A}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.multi==null||F.multi===!1)}buildCommandDocument(F,A){let $=this.options,B={update:this.ns.collection,updates:this.statements,ordered:$.ordered??!0};if(typeof $.bypassDocumentValidation==="boolean")B.bypassDocumentValidation=$.bypassDocumentValidation;if($.let)B.let=$.let;if($.comment!==void 0)B.comment=$.comment;return B}}Be.UpdateOperation=N$;class Hj extends N${constructor(F,A,$,B){super(F,[AW(A,$,{...B,multi:!1})],B);if(!(0,Wj.hasAtomicOperators)($,B))throw new K2.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new K2.MongoServerError(A);if(A.writeErrors)throw new K2.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}Be.UpdateOneOperation=Hj;class Kj extends N${constructor(F,A,$,B){super(F,[AW(A,$,{...B,multi:!0})],B);if(!(0,Wj.hasAtomicOperators)($,B))throw new K2.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new K2.MongoServerError(A);if(A.writeErrors)throw new K2.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}Be.UpdateManyOperation=Kj;class qj extends N${constructor(F,A,$,B){super(F,[AW(A,$,{...B,multi:!1})],B);if((0,Wj.hasAtomicOperators)($))throw new K2.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new K2.MongoServerError(A);if(A.writeErrors)throw new K2.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}Be.ReplaceOneOperation=qj;function AW(F,A,$){if(F==null||typeof F!=="object")throw new K2.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(A==null||typeof A!=="object")throw new K2.MongoInvalidArgumentError("Document must be a valid JavaScript object");let B={q:F,u:A};if(typeof $.upsert==="boolean")B.upsert=$.upsert;if($.multi)B.multi=$.multi;if($.hint)B.hint=$.hint;if($.arrayFilters)B.arrayFilters=$.arrayFilters;if($.collation)B.collation=$.collation;if(!$.multi&&$.sort!=null)B.sort=(0,Vl1.formatSort)($.sort);return B}(0,k6.defineAspects)(N$,[k6.Aspect.RETRYABLE,k6.Aspect.WRITE_OPERATION,k6.Aspect.SKIP_COLLATION,k6.Aspect.SUPPORTS_RAW_DATA]);(0,k6.defineAspects)(Hj,[k6.Aspect.RETRYABLE,k6.Aspect.WRITE_OPERATION,k6.Aspect.EXPLAINABLE,k6.Aspect.SKIP_COLLATION,k6.Aspect.SUPPORTS_RAW_DATA]);(0,k6.defineAspects)(Kj,[k6.Aspect.WRITE_OPERATION,k6.Aspect.EXPLAINABLE,k6.Aspect.SKIP_COLLATION,k6.Aspect.SUPPORTS_RAW_DATA]);(0,k6.defineAspects)(qj,[k6.Aspect.RETRYABLE,k6.Aspect.WRITE_OPERATION,k6.Aspect.SKIP_COLLATION,k6.Aspect.SUPPORTS_RAW_DATA])});var R$=Q((ze)=>{Object.defineProperty(ze,"__esModule",{value:!0});ze.BulkOperationBase=ze.FindOperators=ze.MongoBulkWriteError=ze.WriteError=ze.WriteConcernError=ze.BulkWriteResult=ze.Batch=ze.BatchType=void 0;ze.mergeBatchResults=Vj;var De=Y0(),r6=B1(),jY=$j(),Nl1=X4(),Pl1=zj(),UF=Qj(),Rl1=n6(),q2=W1(),Xe=W3();ze.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class Ge{constructor(F,A){this.originalZeroIndex=A,this.currentIndex=0,this.originalIndexes=[],this.batchType=F,this.operations=[],this.size=0,this.sizeBytes=0}}ze.Batch=Ge;class R7{static generateIdMap(F){let A={};for(let $ of F)A[$.index]=$._id;return A}constructor(F,A){this.result=F,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=R7.generateIdMap(this.result.upserted),this.insertedIds=R7.generateIdMap(this.getSuccessfullyInsertedIds(F,A)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(F,A){if(F.writeErrors.length===0)return F.insertedIds;if(A)return F.insertedIds.slice(0,F.writeErrors[0].index);return F.insertedIds.filter(({index:$})=>!F.writeErrors.some((B)=>$===B.index))}getUpsertedIdAt(F){return this.result.upserted[F]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(F){return F<this.result.writeErrors.length?this.result.writeErrors[F]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let F="";for(let A=0;A<this.result.writeConcernErrors.length;A++){let $=this.result.writeConcernErrors[A];if(F=F+$.errmsg,A===0)F=F+" and "}return new MY({errmsg:F,code:r6.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${De.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}ze.BulkWriteResult=R7;class MY{constructor(F){this.serverError=F}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}ze.WriteConcernError=MY;class $W{constructor(F){this.err=F}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}ze.WriteError=$W;function Vj(F,A,$,B){if($)B=$;else if(B&&B.result)B=B.result;if(B==null)return;if(B.ok===0&&A.ok===1){A.ok=0;let X={index:0,code:B.code||0,errmsg:B.message,errInfo:B.errInfo,op:F.operations[0]};A.writeErrors.push(new $W(X));return}else if(B.ok===0&&A.ok===0)return;if(Ue(F)&&B.n)A.nInserted=A.nInserted+B.n;if(Lj(F)&&B.n)A.nRemoved=A.nRemoved+B.n;let J=0;if(Array.isArray(B.upserted)){J=B.upserted.length;for(let X=0;X<B.upserted.length;X++)A.upserted.push({index:B.upserted[X].index+F.originalZeroIndex,_id:B.upserted[X]._id})}else if(B.upserted)J=1,A.upserted.push({index:F.originalZeroIndex,_id:B.upserted});if(Ej(F)&&B.n){let X=B.nModified;if(A.nUpserted=A.nUpserted+J,A.nMatched=A.nMatched+(B.n-J),typeof X==="number")A.nModified=A.nModified+X;else A.nModified=0}if(Array.isArray(B.writeErrors))for(let X=0;X<B.writeErrors.length;X++){let Y={index:F.originalIndexes[B.writeErrors[X].index],code:B.writeErrors[X].code,errmsg:B.writeErrors[X].errmsg,errInfo:B.writeErrors[X].errInfo,op:F.operations[B.writeErrors[X].index]};A.writeErrors.push(new $W(Y))}if(B.writeConcernError)A.writeConcernErrors.push(new MY(B.writeConcernError))}async function Ye(F,A){if(F.s.batches.length===0)return new R7(F.s.bulkResult,F.isOrdered);for(let B of F.s.batches){let J=(0,q2.resolveOptions)(F,{...A,ordered:F.isOrdered});if(J.bypassDocumentValidation!==!0)delete J.bypassDocumentValidation;if(F.s.bypassDocumentValidation===!0)J.bypassDocumentValidation=!0;if(F.s.checkKeys===!1)J.checkKeys=!1;if(J.retryWrites){if(Ej(B))J.retryWrites=J.retryWrites&&!B.operations.some((Z)=>Z.multi);if(Lj(B))J.retryWrites=J.retryWrites&&!B.operations.some((Z)=>Z.limit===0)}let X=Ue(B)?new Pl1.InsertOperation(F.s.namespace,B.operations,J):Ej(B)?new UF.UpdateOperation(F.s.namespace,B.operations,J):Lj(B)?new jY.DeleteOperation(F.s.namespace,B.operations,J):null;if(X==null)throw new r6.MongoRuntimeError(`Unknown batchType: ${B.batchType}`);let Y=null,D;try{D=await(0,Nl1.executeOperation)(F.s.collection.client,X,J.timeoutContext)}catch(Z){Y=Z}if(Y!=null)if(Y instanceof r6.MongoWriteConcernError){Vj(B,F.s.bulkResult,Y,D);let Z=new R7(F.s.bulkResult,F.isOrdered);throw new P$({message:Y.result.writeConcernError.errmsg,code:Y.result.writeConcernError.code},Z)}else throw new P$(Y,new R7(F.s.bulkResult,F.isOrdered));Vj(B,F.s.bulkResult,Y,D);let G=new R7(F.s.bulkResult,F.isOrdered);F.handleWriteError(G)}F.s.batches.length=0;let $=new R7(F.s.bulkResult,F.isOrdered);return F.handleWriteError($),$}class P$ extends r6.MongoServerError{constructor(F,A){super(F);if(this.writeErrors=[],F instanceof MY)this.err=F;else if(!(F instanceof Error))this.message=F.message,this.code=F.code,this.writeErrors=F.writeErrors??[];this.result=A,Object.assign(this,F)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}ze.MongoBulkWriteError=P$;class wj{constructor(F){this.bulkOperation=F}update(F){let A=RY(this.bulkOperation);return this.bulkOperation.addToOperationsList(ze.BatchType.UPDATE,(0,UF.makeUpdateStatement)(A.selector,F,{...A,multi:!0}))}updateOne(F){if(!(0,q2.hasAtomicOperators)(F,this.bulkOperation.bsonOptions))throw new r6.MongoInvalidArgumentError("Update document requires atomic operators");let A=RY(this.bulkOperation);return this.bulkOperation.addToOperationsList(ze.BatchType.UPDATE,(0,UF.makeUpdateStatement)(A.selector,F,{...A,multi:!1}))}replaceOne(F){if((0,q2.hasAtomicOperators)(F))throw new r6.MongoInvalidArgumentError("Replacement document must not use atomic operators");let A=RY(this.bulkOperation);return this.bulkOperation.addToOperationsList(ze.BatchType.UPDATE,(0,UF.makeUpdateStatement)(A.selector,F,{...A,multi:!1}))}deleteOne(){let F=RY(this.bulkOperation);return this.bulkOperation.addToOperationsList(ze.BatchType.DELETE,(0,jY.makeDeleteStatement)(F.selector,{...F,limit:1}))}delete(){let F=RY(this.bulkOperation);return this.bulkOperation.addToOperationsList(ze.BatchType.DELETE,(0,jY.makeDeleteStatement)(F.selector,{...F,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=F,this}arrayFilters(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=F,this}hint(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=F,this}}ze.FindOperators=wj;class Ze{constructor(F,A,$){this.collection=F,this.isOrdered=$;let B=(0,q2.getTopology)(F);A=A==null?{}:A;let J=F.s.namespace,X=!1,Y=void 0,D=B.lastHello(),G=!!(B.s.options&&B.s.options.autoEncrypter),Z=D&&D.maxBsonObjectSize?D.maxBsonObjectSize:16777216,U=G?2097152:Z,z=D&&D.maxWriteBatchSize?D.maxWriteBatchSize:1000,W=(z-1).toString(10).length+2,H=Object.assign({},A);H=(0,q2.applyRetryableWrites)(H,F.db);let K={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:K,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:Xe.WriteConcern.fromOptions(A),maxBsonObjectSize:Z,maxBatchSizeBytes:U,maxWriteBatchSize:z,maxKeySize:W,namespace:J,topology:B,options:H,bsonOptions:(0,De.resolveBSONOptions)(A),currentOp:Y,executed:X,collection:F,err:void 0,checkKeys:typeof A.checkKeys==="boolean"?A.checkKeys:!1},A.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(F){return(0,q2.maybeAddIdToDocuments)(this.collection,F,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(ze.BatchType.INSERT,F)}find(F){if(!F)throw new r6.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:F},new wj(this)}raw(F){if(F==null||typeof F!=="object")throw new r6.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in F){let A=this.shouldForceServerObjectId(),$=F.insertOne&&F.insertOne.document==null?F.insertOne:F.insertOne.document;return(0,q2.maybeAddIdToDocuments)(this.collection,$,{forceServerObjectId:A}),this.addToOperationsList(ze.BatchType.INSERT,$)}if("replaceOne"in F||"updateOne"in F||"updateMany"in F){if("replaceOne"in F){if("q"in F.replaceOne)throw new r6.MongoInvalidArgumentError("Raw operations are not allowed");let A=(0,UF.makeUpdateStatement)(F.replaceOne.filter,F.replaceOne.replacement,{...F.replaceOne,multi:!1});if((0,q2.hasAtomicOperators)(A.u))throw new r6.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(ze.BatchType.UPDATE,A)}if("updateOne"in F){if("q"in F.updateOne)throw new r6.MongoInvalidArgumentError("Raw operations are not allowed");let A=(0,UF.makeUpdateStatement)(F.updateOne.filter,F.updateOne.update,{...F.updateOne,multi:!1});if(!(0,q2.hasAtomicOperators)(A.u,this.bsonOptions))throw new r6.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(ze.BatchType.UPDATE,A)}if("updateMany"in F){if("q"in F.updateMany)throw new r6.MongoInvalidArgumentError("Raw operations are not allowed");let A=(0,UF.makeUpdateStatement)(F.updateMany.filter,F.updateMany.update,{...F.updateMany,multi:!0});if(!(0,q2.hasAtomicOperators)(A.u,this.bsonOptions))throw new r6.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(ze.BatchType.UPDATE,A)}}if("deleteOne"in F){if("q"in F.deleteOne)throw new r6.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(ze.BatchType.DELETE,(0,jY.makeDeleteStatement)(F.deleteOne.filter,{...F.deleteOne,limit:1}))}if("deleteMany"in F){if("q"in F.deleteMany)throw new r6.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(ze.BatchType.DELETE,(0,jY.makeDeleteStatement)(F.deleteMany.filter,{...F.deleteMany,limit:0}))}throw new r6.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let F=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)F.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)F.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)F.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)F.push(this.s.currentRemoveBatch)}return F}async execute(F={}){if(this.s.executed)throw new r6.MongoBatchReExecutionError;let A=Xe.WriteConcern.fromOptions(F);if(A)this.s.writeConcern=A;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new r6.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let $=(0,q2.resolveOptions)(this.collection,{...this.s.options,...F});if($.timeoutContext??=Rl1.TimeoutContext.create({session:$.session,timeoutMS:$.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),$.session==null)return await this.collection.client.withSession({explicit:!1},async(B)=>{return await Ye(this,{...$,session:B})});return await Ye(this,{...$})}handleWriteError(F){if(this.s.bulkResult.writeErrors.length>0){let $=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new P$({message:$,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},F)}let A=F.getWriteConcernError();if(A)throw new P$(A,F)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}}ze.BulkOperationBase=Ze;function Ue(F){return F.batchType===ze.BatchType.INSERT}function Ej(F){return F.batchType===ze.BatchType.UPDATE}function Lj(F){return F.batchType===ze.BatchType.DELETE}function RY(F){let{currentOp:A}=F.s;if(F.s.currentOp=void 0,!A)A={};return A}});var Ke=Q((PE0,He)=>{var fl1=R$().BulkWriteResult;He.exports=fl1});var TY=Q((qe,Qe)=>{/*!
 * Connection states
 */var a2=Qe.exports=qe=Object.create(null);a2[0]="disconnected";a2[1]="connected";a2[2]="connecting";a2[3]="disconnecting";a2[99]="uninitialized";a2.disconnected=0;a2.connected=1;a2.connecting=2;a2.disconnecting=3;a2.uninitialized=99});var x9=Q((RE0,Ve)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var xl1=typeof process<"u"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(F)=>setTimeout(F,0);Ve.exports=function(A){return xl1(A)}});var Ij=Q((jE0,Le)=>{/*!
 * Module dependencies.
 */var bl1=x("events").EventEmitter,gl1=TY(),Ee=x9();function I0(F,A,$){if($===void 0)$={};if(this.opts=$,this.name=F,this.collectionName=F,this.conn=A,this.queue=[],this.buffer=!A?._hasOpened,this.emitter=new bl1,gl1.connected===this.conn.readyState)this.onOpen()}I0.prototype.name;I0.prototype.collectionName;I0.prototype.conn;I0.prototype.onOpen=function(){this.buffer=!1,Ee(()=>this.doQueue())};I0.prototype.onClose=function(){};I0.prototype.addQueue=function(F,A){return this.queue.push([F,A]),this};I0.prototype.removeQueue=function(F,A){let $=this.queue.findIndex((B)=>B[0]===F&&B[1]===A);if($===-1)return!1;return this.queue.splice($,1),!0};I0.prototype.doQueue=function(){for(let A of this.queue)if(typeof A[0]==="function")A[0].apply(this,A[1]);else this[A[0]].apply(this,A[1]);this.queue=[];let F=this;return Ee(function(){F.emitter.emit("queue")}),this};I0.prototype.ensureIndex=function(){throw Error("Collection#ensureIndex unimplemented by driver")};I0.prototype.createIndex=function(){throw Error("Collection#createIndex unimplemented by driver")};I0.prototype.findAndModify=function(){throw Error("Collection#findAndModify unimplemented by driver")};I0.prototype.findOneAndUpdate=function(){throw Error("Collection#findOneAndUpdate unimplemented by driver")};I0.prototype.findOneAndDelete=function(){throw Error("Collection#findOneAndDelete unimplemented by driver")};I0.prototype.findOneAndReplace=function(){throw Error("Collection#findOneAndReplace unimplemented by driver")};I0.prototype.findOne=function(){throw Error("Collection#findOne unimplemented by driver")};I0.prototype.find=function(){throw Error("Collection#find unimplemented by driver")};I0.prototype.insert=function(){throw Error("Collection#insert unimplemented by driver")};I0.prototype.insertOne=function(){throw Error("Collection#insertOne unimplemented by driver")};I0.prototype.insertMany=function(){throw Error("Collection#insertMany unimplemented by driver")};I0.prototype.save=function(){throw Error("Collection#save unimplemented by driver")};I0.prototype.updateOne=function(){throw Error("Collection#updateOne unimplemented by driver")};I0.prototype.updateMany=function(){throw Error("Collection#updateMany unimplemented by driver")};I0.prototype.deleteOne=function(){throw Error("Collection#deleteOne unimplemented by driver")};I0.prototype.deleteMany=function(){throw Error("Collection#deleteMany unimplemented by driver")};I0.prototype.getIndexes=function(){throw Error("Collection#getIndexes unimplemented by driver")};I0.prototype.watch=function(){throw Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */I0.prototype._shouldBufferCommands=function(){let A=this.opts;if(A.bufferCommands!=null)return A.bufferCommands;if(A&&A.schemaUserProvidedOptions!=null&&A.schemaUserProvidedOptions.bufferCommands!=null)return A.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */I0.prototype._getBufferTimeoutMS=function(){let A=this.conn,$=this.opts;if($.bufferTimeoutMS!=null)return $.bufferTimeoutMS;if($&&$.schemaUserProvidedOptions!=null&&$.schemaUserProvidedOptions.bufferTimeoutMS!=null)return $.schemaUserProvidedOptions.bufferTimeoutMS;return A._getBufferTimeoutMS()};/*!
 * Module exports.
 */Le.exports=I0});var d1=Q((ME0,we)=>{/*!
 * ignore
 */class Cj extends Error{}Object.defineProperty(Cj.prototype,"name",{value:"MongooseError"});we.exports=Cj});var Pe=Q((Ce)=>{Object.defineProperty(Ce,"__esModule",{value:!0});Ce.ListDatabasesOperation=void 0;var _l1=q0(),Ie=W1(),yl1=K6(),Nj=T0();class Pj extends yl1.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=_l1.MongoDBResponse,this.options=A??{},this.ns=new Ie.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(F,A){let $={listDatabases:1};if(typeof this.options.nameOnly==="boolean")$.nameOnly=this.options.nameOnly;if(this.options.filter)$.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")$.authorizedDatabases=this.options.authorizedDatabases;if((0,Ie.maxWireVersion)(F)>=9&&this.options.comment!==void 0)$.comment=this.options.comment;return $}}Ce.ListDatabasesOperation=Pj;(0,Nj.defineAspects)(Pj,[Nj.Aspect.READ_OPERATION,Nj.Aspect.RETRYABLE])});var jj=Q((je)=>{Object.defineProperty(je,"__esModule",{value:!0});je.RemoveUserOperation=void 0;var vl1=q0(),hl1=K6(),Re=T0();class Rj extends hl1.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=vl1.MongoDBResponse,this.options=$,this.username=A}get commandName(){return"dropUser"}buildCommandDocument(F){return{dropUser:this.username}}handleOk(F){return!0}}je.RemoveUserOperation=Rj;(0,Re.defineAspects)(Rj,[Re.Aspect.WRITE_OPERATION])});var kY=Q((Oe)=>{Object.defineProperty(Oe,"__esModule",{value:!0});Oe.RunCursorCommandOperation=Oe.RunCommandOperation=void 0;var Te=q0(),ml1=T0();class Mj extends ml1.AbstractOperation{constructor(F,A,$){super($);this.SERVER_COMMAND_RESPONSE_TYPE=Te.MongoDBResponse,this.command=A,this.options=$,this.ns=F.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(F,A){return this.command}buildOptions(F){return{...this.options,session:this.session,timeoutContext:F,signal:this.options.signal,readPreference:this.options.readPreference}}}Oe.RunCommandOperation=Mj;class ke extends Mj{constructor(){super(...arguments);this.SERVER_COMMAND_RESPONSE_TYPE=Te.CursorResponse}handleOk(F){return F}}Oe.RunCursorCommandOperation=ke});var be=Q((fe)=>{Object.defineProperty(fe,"__esModule",{value:!0});fe.ValidateCollectionOperation=void 0;var cl1=q0(),Tj=B1(),ll1=K6();class ue extends ll1.CommandOperation{constructor(F,A,$){super(F.s.db,$);this.SERVER_COMMAND_RESPONSE_TYPE=cl1.MongoDBResponse,this.options=$,this.collectionName=A}get commandName(){return"validate"}buildCommandDocument(F,A){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(($)=>$[0]!=="session"))}}handleOk(F){let A=super.handleOk(F);if(A.result!=null&&typeof A.result!=="string")throw new Tj.MongoUnexpectedServerResponseError("Error with validation data");if(A.result!=null&&A.result.match(/exception|corrupt/)!=null)throw new Tj.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(A.valid!=null&&!A.valid)throw new Tj.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return F}}fe.ValidateCollectionOperation=ue});var kj=Q((_e)=>{Object.defineProperty(_e,"__esModule",{value:!0});_e.Admin=void 0;var pl1=Y0(),BW=X4(),il1=Pe(),al1=jj(),nl1=kY(),rl1=be(),tl1=W1();class ge{constructor(F){this.s={db:F}}async command(F,A){return await(0,BW.executeOperation)(this.s.db.client,new nl1.RunCommandOperation(new tl1.MongoDBNamespace("admin"),F,{...(0,pl1.resolveBSONOptions)(A),session:A?.session,readPreference:A?.readPreference,timeoutMS:A?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(F){return await this.command({buildinfo:1},F)}async serverInfo(F){return await this.command({buildinfo:1},F)}async serverStatus(F){return await this.command({serverStatus:1},F)}async ping(F){return await this.command({ping:1},F)}async removeUser(F,A){return await(0,BW.executeOperation)(this.s.db.client,new al1.RemoveUserOperation(this.s.db,F,{dbName:"admin",...A}))}async validateCollection(F,A={}){return await(0,BW.executeOperation)(this.s.db.client,new rl1.ValidateCollectionOperation(this,F,A))}async listDatabases(F){return await(0,BW.executeOperation)(this.s.db.client,new il1.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...F}))}async replSetGetStatus(F){return await this.command({replSetGetStatus:1},F)}}_e.Admin=ge});var Oj=Q((me)=>{Object.defineProperty(me,"__esModule",{value:!0});me.OrderedBulkOperation=void 0;var sl1=Y0(),ve=B1(),JW=R$();class he extends JW.BulkOperationBase{constructor(F,A){super(F,A,!0)}addToOperationsList(F,A){let $=sl1.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if($>=this.s.maxBsonObjectSize)throw new ve.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new JW.Batch(F,this.s.currentIndex);let B=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+B+$>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new JW.Batch(F,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(F===JW.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:A._id});if(Array.isArray(A))throw new ve.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(A),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=B+$,this.s.currentIndex+=1,this}}me.OrderedBulkOperation=he});var Sj=Q((pe)=>{Object.defineProperty(pe,"__esModule",{value:!0});pe.UnorderedBulkOperation=void 0;var ol1=Y0(),ce=B1(),j7=R$();class le extends j7.BulkOperationBase{constructor(F,A){super(F,A,!1)}handleWriteError(F){if(this.s.batches.length)return;return super.handleWriteError(F)}addToOperationsList(F,A){let $=ol1.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if($>=this.s.maxBsonObjectSize)throw new ce.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,F===j7.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(F===j7.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(F===j7.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let B=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new j7.Batch(F,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+B+$>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new j7.Batch(F,this.s.currentIndex);if(Array.isArray(A))throw new ce.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(A),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,F===j7.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:A._id});else if(F===j7.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(F===j7.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=B+$,this}}pe.UnorderedBulkOperation=le});var _8=Q((oe)=>{Object.defineProperty(oe,"__esModule",{value:!0});oe.MongoLogger=oe.MongoLoggableComponent=oe.SEVERITY_LEVEL_MAP=oe.DEFAULT_MAX_DOCUMENT_LENGTH=oe.SeverityLevel=void 0;oe.parseSeverityFromString=xj;oe.createStdioLogger=zF;oe.stringifyWithMaxLen=g8;oe.defaultLogTransform=te;var ae=x("util"),ne=Y0(),l0=T6(),WF=W1();oe.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});oe.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class re extends Map{constructor(F){let A=[];for(let[$,B]of F)A.push([B,$]);A.push(...F);super(A)}getNumericSeverityLevel(F){return this.get(F)}getSeverityLevelName(F){return this.get(F)}}oe.SEVERITY_LEVEL_MAP=new re([[oe.SeverityLevel.OFF,-1/0],[oe.SeverityLevel.EMERGENCY,0],[oe.SeverityLevel.ALERT,1],[oe.SeverityLevel.CRITICAL,2],[oe.SeverityLevel.ERROR,3],[oe.SeverityLevel.WARNING,4],[oe.SeverityLevel.NOTICE,5],[oe.SeverityLevel.INFORMATIONAL,6],[oe.SeverityLevel.DEBUG,7],[oe.SeverityLevel.TRACE,8]]);oe.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function xj(F){let A=Object.values(oe.SeverityLevel),$=F?.toLowerCase();if($!=null&&A.includes($))return $;return null}function zF(F){return{write:(0,ae.promisify)((A,$)=>{let B=(0,ae.inspect)(A,{compact:!0,breakLength:1/0});F.write(`${B}
`,"utf-8",$);return})}}function el1({MONGODB_LOG_PATH:F},{mongodbLogPath:A}){if(typeof A==="string"&&/^stderr$/i.test(A))return{mongodbLogPath:zF(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof A==="string"&&/^stdout$/i.test(A))return{mongodbLogPath:zF(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof A==="object"&&typeof A?.write==="function")return{mongodbLogPath:A,mongodbLogPathIsStdErr:!1};if(F&&/^stderr$/i.test(F))return{mongodbLogPath:zF(process.stderr),mongodbLogPathIsStdErr:!0};if(F&&/^stdout$/i.test(F))return{mongodbLogPath:zF(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:zF(process.stderr),mongodbLogPathIsStdErr:!0}}function j$(F,A,$){return xj(F)??xj(A)??$}function Fp1(F,A){let $=oe.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F),B=oe.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A);return $<B?-1:$>B?1:0}function g8(F,A,$={}){let B="",J=0,X=function(D,G){if(J>=A)return;if(D==="")return J+=1,G;if(J+=D.length+4,G==null)return G;switch(typeof G){case"string":J+=G.length+2;break;case"number":case"bigint":J+=String(G).length;break;case"boolean":J+=G?4:5;break;case"object":if((0,WF.isUint8Array)(G))J+=22+G.byteLength+G.byteLength*0.33+18|0;else if("_bsontype"in G){let Z=G;switch(Z._bsontype){case"Int32":J+=String(Z.value).length;break;case"Double":J+=(Z.value|0)===Z.value?String(Z.value).length+2:String(Z.value).length;break;case"Long":J+=Z.toString().length;break;case"ObjectId":J+=35;break;case"MaxKey":case"MinKey":J+=13;break;case"Binary":J+=22+G.position+G.position*0.33+18|0;break;case"Timestamp":J+=19+String(Z.t).length+5+String(Z.i).length+2;break;case"Code":if(Z.scope==null)J+=Z.code.length+10+2;else J+=Z.code.length+10+11;break;case"BSONRegExp":J+=34+Z.pattern.length+13+Z.options.length+3;break}}}return G};if(typeof F==="string")B=F;else if(typeof F==="function")B=F.name;else try{if(A!==0)B=ne.EJSON.stringify(F,X,0,$);else B=ne.EJSON.stringify(F,$)}catch(Y){B=`Extended JSON serialization failed with: ${Y.message}`}if(A!==0&&B.length>A&&B.charCodeAt(A-1)!==B.codePointAt(A-1)){if(A--,A===0)return""}return A!==0&&B.length>A?`${B.slice(0,A)}...`:B}function Ap1(F){let A=F;return A.toLog!==void 0&&typeof A.toLog==="function"}function XW(F,A,$=oe.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:B,operation:J,topologyDescription:X,message:Y}=A;return F.selector=g8(B,$),F.operation=J,F.topologyDescription=g8(X,$),F.message=Y,F}function uj(F,A){F.commandName=A.commandName,F.requestId=A.requestId,F.driverConnectionId=A.connectionId;let{host:$,port:B}=WF.HostAddress.fromString(A.address).toHostPort();if(F.serverHost=$,F.serverPort=B,A?.serviceId)F.serviceId=A.serviceId.toHexString();return F.databaseName=A.databaseName,F.serverConnectionId=A.serverConnectionId,F}function U9(F,A){let{host:$,port:B}=WF.HostAddress.fromString(A.address).toHostPort();return F.serverHost=$,F.serverPort=B,F}function b8(F,A){return F.topologyId=A.topologyId,F}function fj(F,A){let{awaited:$,connectionId:B}=A;F.awaited=$,F.driverConnectionId=A.connectionId;let{host:J,port:X}=WF.HostAddress.fromString(B).toHostPort();return F.serverHost=J,F.serverPort=X,F}function te(F,A=oe.DEFAULT_MAX_DOCUMENT_LENGTH){let $=Object.create(null);switch(F.name){case l0.SERVER_SELECTION_STARTED:return $=XW($,F,A),$;case l0.SERVER_SELECTION_FAILED:return $=XW($,F,A),$.failure=F.failure?.message,$;case l0.SERVER_SELECTION_SUCCEEDED:return $=XW($,F,A),$.serverHost=F.serverHost,$.serverPort=F.serverPort,$;case l0.WAITING_FOR_SUITABLE_SERVER:return $=XW($,F,A),$.remainingTimeMS=F.remainingTimeMS,$;case l0.COMMAND_STARTED:return $=uj($,F),$.message="Command started",$.command=g8(F.command,A,{relaxed:!0}),$.databaseName=F.databaseName,$;case l0.COMMAND_SUCCEEDED:return $=uj($,F),$.message="Command succeeded",$.durationMS=F.duration,$.reply=g8(F.reply,A,{relaxed:!0}),$;case l0.COMMAND_FAILED:return $=uj($,F),$.message="Command failed",$.durationMS=F.duration,$.failure=F.failure?.message??"(redacted)",$;case l0.CONNECTION_POOL_CREATED:if($=U9($,F),$.message="Connection pool created",F.options){let{maxIdleTimeMS:B,minPoolSize:J,maxPoolSize:X,maxConnecting:Y,waitQueueTimeoutMS:D}=F.options;$={...$,maxIdleTimeMS:B,minPoolSize:J,maxPoolSize:X,maxConnecting:Y,waitQueueTimeoutMS:D}}return $;case l0.CONNECTION_POOL_READY:return $=U9($,F),$.message="Connection pool ready",$;case l0.CONNECTION_POOL_CLEARED:if($=U9($,F),$.message="Connection pool cleared",F.serviceId?._bsontype==="ObjectId")$.serviceId=F.serviceId?.toHexString();return $;case l0.CONNECTION_POOL_CLOSED:return $=U9($,F),$.message="Connection pool closed",$;case l0.CONNECTION_CREATED:return $=U9($,F),$.message="Connection created",$.driverConnectionId=F.connectionId,$;case l0.CONNECTION_READY:return $=U9($,F),$.message="Connection ready",$.driverConnectionId=F.connectionId,$.durationMS=F.durationMS,$;case l0.CONNECTION_CLOSED:switch($=U9($,F),$.message="Connection closed",$.driverConnectionId=F.connectionId,F.reason){case"stale":$.reason="Connection became stale because the pool was cleared";break;case"idle":$.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if($.reason="An error occurred while using the connection",F.error)$.error=F.error;break;case"poolClosed":$.reason="Connection pool was closed";break;default:$.reason=`Unknown close reason: ${F.reason}`}return $;case l0.CONNECTION_CHECK_OUT_STARTED:return $=U9($,F),$.message="Connection checkout started",$;case l0.CONNECTION_CHECK_OUT_FAILED:switch($=U9($,F),$.message="Connection checkout failed",F.reason){case"poolClosed":$.reason="Connection pool was closed";break;case"timeout":$.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if($.reason="An error occurred while trying to establish a new connection",F.error)$.error=F.error;break;default:$.reason=`Unknown close reason: ${F.reason}`}return $.durationMS=F.durationMS,$;case l0.CONNECTION_CHECKED_OUT:return $=U9($,F),$.message="Connection checked out",$.driverConnectionId=F.connectionId,$.durationMS=F.durationMS,$;case l0.CONNECTION_CHECKED_IN:return $=U9($,F),$.message="Connection checked in",$.driverConnectionId=F.connectionId,$;case l0.SERVER_OPENING:return $=b8($,F),$=U9($,F),$.message="Starting server monitoring",$;case l0.SERVER_CLOSED:return $=b8($,F),$=U9($,F),$.message="Stopped server monitoring",$;case l0.SERVER_HEARTBEAT_STARTED:return $=b8($,F),$=fj($,F),$.message="Server heartbeat started",$;case l0.SERVER_HEARTBEAT_SUCCEEDED:return $=b8($,F),$=fj($,F),$.message="Server heartbeat succeeded",$.durationMS=F.duration,$.serverConnectionId=F.serverConnectionId,$.reply=g8(F.reply,A,{relaxed:!0}),$;case l0.SERVER_HEARTBEAT_FAILED:return $=b8($,F),$=fj($,F),$.message="Server heartbeat failed",$.durationMS=F.duration,$.failure=F.failure?.message,$;case l0.TOPOLOGY_OPENING:return $=b8($,F),$.message="Starting topology monitoring",$;case l0.TOPOLOGY_CLOSED:return $=b8($,F),$.message="Stopped topology monitoring",$;case l0.TOPOLOGY_DESCRIPTION_CHANGED:return $=b8($,F),$.message="Topology description changed",$.previousDescription=$.reply=g8(F.previousDescription,A),$.newDescription=$.reply=g8(F.newDescription,A),$;default:for(let[B,J]of Object.entries(F))if(J!=null)$[B]=J}return $}class se{constructor(F){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=F.componentSeverities,this.maxDocumentLength=F.maxDocumentLength,this.logDestination=F.logDestination,this.logDestinationIsStdErr=F.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let F=Object();for(let A of Object.values(oe.MongoLoggableComponent)){F[A]={};for(let $ of Object.values(oe.SeverityLevel))F[A][$]=Fp1($,this.componentSeverities[A])<=0}return F}turnOffSeverities(){for(let F of Object.values(oe.MongoLoggableComponent)){this.componentSeverities[F]=oe.SeverityLevel.OFF;for(let A of Object.values(oe.SeverityLevel))this.severities[F][A]=!1}}logWriteFailureHandler(F){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=zF(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(oe.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:F.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(F,A){if(A===oe.SeverityLevel.OFF)return!1;return this.severities[F][A]}log(F,A,$){if(!this.willLog(A,F))return;let B={t:new Date,c:A,s:F};if(typeof $==="string")B.message=$;else if(typeof $==="object")if(Ap1($))B={...B,...$.toLog()};else B={...B,...te($,this.maxDocumentLength)};if((0,WF.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(B)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let J=this.logDestination.write(B);if((0,WF.isPromiseLike)(J))this.pendingLog=J.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(J){this.logWriteFailureHandler(J)}}static resolveOptions(F,A){let $=el1(F,A),B={...F,...A,mongodbLogPath:$.mongodbLogPath,mongodbLogPathIsStdErr:$.mongodbLogPathIsStdErr},J=j$(B.mongodbLogComponentSeverities?.default,B.MONGODB_LOG_ALL,oe.SeverityLevel.OFF);return{componentSeverities:{command:j$(B.mongodbLogComponentSeverities?.command,B.MONGODB_LOG_COMMAND,J),topology:j$(B.mongodbLogComponentSeverities?.topology,B.MONGODB_LOG_TOPOLOGY,J),serverSelection:j$(B.mongodbLogComponentSeverities?.serverSelection,B.MONGODB_LOG_SERVER_SELECTION,J),connection:j$(B.mongodbLogComponentSeverities?.connection,B.MONGODB_LOG_CONNECTION,J),client:j$(B.mongodbLogComponentSeverities?.client,B.MONGODB_LOG_CLIENT,J),default:J},maxDocumentLength:B.mongodbLogMaxDocumentLength??(0,WF.parseUnsignedInteger)(B.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:B.mongodbLogPath,logDestinationIsStdErr:B.mongodbLogPathIsStdErr}}}oe.MongoLogger=se});var z9=Q((A11)=>{Object.defineProperty(A11,"__esModule",{value:!0});A11.CancellationToken=A11.TypedEventEmitter=void 0;var Yp1=x("events"),Dp1=_8(),Gp1=W1();class _j extends Yp1.EventEmitter{emitAndLog(F,...A){if(this.emit(F,...A),this.component)this.mongoLogger?.debug(this.component,A[0])}emitAndLogHeartbeat(F,A,$,...B){if(this.emit(F,...B),this.component){let J={topologyId:A,serverConnectionId:$??null,...B[0]};this.mongoLogger?.debug(this.component,J)}}emitAndLogCommand(F,A,$,B,...J){if(F)this.emit(A,...J);if(B){let X={databaseName:$,...J[0]};this.mongoLogger?.debug(Dp1.MongoLoggableComponent.COMMAND,X)}}}A11.TypedEventEmitter=_j;class F11 extends _j{constructor(...F){super(...F);this.on("error",Gp1.noop)}}A11.CancellationToken=F11});var vj=Q((J11)=>{Object.defineProperty(J11,"__esModule",{value:!0});J11.GetMoreOperation=void 0;var Up1=q0(),B11=B1(),zp1=W1(),DW=T0();class yj extends DW.AbstractOperation{constructor(F,A,$,B){super(B);this.SERVER_COMMAND_RESPONSE_TYPE=Up1.CursorResponse,this.options=B,this.ns=F,this.cursorId=A,this.server=$}get commandName(){return"getMore"}buildCommand(F){if(this.cursorId==null||this.cursorId.isZero())throw new B11.MongoRuntimeError("Unable to iterate cursor with no id");let A=this.ns.collection;if(A==null)throw new B11.MongoRuntimeError("A collection name must be determined before getMore");let $={getMore:this.cursorId,collection:A};if(typeof this.options.batchSize==="number")$.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")$.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&(0,zp1.maxWireVersion)(F)>=9)$.comment=this.options.comment;return $}buildOptions(F){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:F,...this.options}}handleOk(F){return F}}J11.GetMoreOperation=yj;(0,DW.defineAspects)(yj,[DW.Aspect.READ_OPERATION,DW.Aspect.MUST_SELECT_SAME_SERVER])});var G11=Q((Y11)=>{Object.defineProperty(Y11,"__esModule",{value:!0});Y11.KillCursorsOperation=void 0;var Wp1=q0(),Hp1=B1(),hj=T0();class mj extends hj.AbstractOperation{constructor(F,A,$,B){super(B);this.SERVER_COMMAND_RESPONSE_TYPE=Wp1.MongoDBResponse,this.ns=A,this.cursorId=F,this.server=$}get commandName(){return"killCursors"}buildCommand(F,A){let $=this.ns.collection;if($==null)throw new Hp1.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:$,cursors:[this.cursorId]}}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){}}Y11.KillCursorsOperation=mj;(0,hj.defineAspects)(mj,[hj.Aspect.MUST_SELECT_SAME_SERVER])});var Q2=Q((Z11)=>{Object.defineProperty(Z11,"__esModule",{value:!0});Z11.aws4=void 0;Z11.getKerberos=Kp1;Z11.getZstdLibrary=qp1;Z11.getAwsCredentialProvider=Qp1;Z11.getGcpMetadata=Vp1;Z11.getSnappy=Ep1;Z11.getSocks=Lp1;Z11.getMongoDBClientEncryption=Ip1;var y8=B1();function OY(F){return new Proxy(F?{kModuleError:F}:{},{get:($,B)=>{if(B==="kModuleError")return F;throw F},set:()=>{throw F}})}function Kp1(){let F;try{F=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(A){F=OY(new y8.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:A,dependencyName:"kerberos"}))}return F}function qp1(){let F;try{F=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(A){F=OY(new y8.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:A,dependencyName:"zstd"}))}return F}function Qp1(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch(F){return OY(new y8.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:F,dependencyName:"@aws-sdk/credential-providers"}))}}function Vp1(){try{return (()=>{throw new Error("Cannot require module "+"gcp-metadata");})()}catch(F){return OY(new y8.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:F,dependencyName:"gcp-metadata"}))}}function Ep1(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch(F){return{kModuleError:new y8.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:F,dependencyName:"snappy"})}}}function Lp1(){try{return (()=>{throw new Error("Cannot require module "+"socks");})()}catch(F){return{kModuleError:new y8.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:F,dependencyName:"socks"})}}}Z11.aws4=wp1();function wp1(){let F;try{F=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(A){F=OY(new y8.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:A,dependencyName:"aws4"}))}return F}function Ip1(){let F=null;try{F=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(A){return{kModuleError:new y8.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:A,dependencyName:"mongodb-client-encryption"})}}return F}});var v8=Q((H11)=>{Object.defineProperty(H11,"__esModule",{value:!0});H11.AuthProvider=H11.AuthContext=void 0;var kp1=B1();class z11{constructor(F,A,$){this.reauthenticating=!1,this.connection=F,this.credentials=A,this.options=$}}H11.AuthContext=z11;class W11{async prepare(F,A){return F}async reauth(F){if(F.reauthenticating)throw new kp1.MongoRuntimeError("Reauthentication already in progress.");try{F.reauthenticating=!0,await this.auth(F)}finally{F.reauthenticating=!1}}}H11.AuthProvider=W11});var ZW=Q((L11)=>{Object.defineProperty(L11,"__esModule",{value:!0});L11.GSSAPI=L11.GSSAPICanonicalizationValue=void 0;L11.performGSSAPICanonicalizeHostName=E11;L11.resolveCname=lj;var cj=x("dns"),Sp1=Q2(),q11=B1(),up1=W1(),fp1=v8();L11.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function dj(F,A){return await F.command((0,up1.ns)("$external.$cmd"),A)}var SY;class Q11 extends fp1.AuthProvider{async auth(F){let{connection:A,credentials:$}=F;if($==null)throw new q11.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:B}=$,J=await xp1(F),X=await J.step(""),Y=await dj(A,bp1(X)),D=await V11(J,10,Y.payload),G=await dj(A,gp1(D,Y.conversationId)),Z=await _p1(J,B,G.payload);await dj(A,{saslContinue:1,conversationId:G.conversationId,payload:Z})}}L11.GSSAPI=Q11;async function xp1(F){let{hostAddress:A}=F.options,{credentials:$}=F;if(!A||typeof A.host!=="string"||!$)throw new q11.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(yp1(),"kModuleError"in SY)throw SY.kModuleError;let{initializeClient:B}=SY,{username:J,password:X}=$,Y=$.mechanismProperties,D=Y.SERVICE_NAME??"mongodb",G=await E11(A.host,Y),Z={};if(X!=null)Object.assign(Z,{user:J,password:X});let U=Y.SERVICE_HOST??G,z=`${D}${process.platform==="win32"?"/":"@"}${U}`;if("SERVICE_REALM"in Y)z=`${z}@${Y.SERVICE_REALM}`;return await B(z,Z)}function bp1(F){return{saslStart:1,mechanism:"GSSAPI",payload:F,autoAuthorize:1}}function gp1(F,A){return{saslContinue:1,conversationId:A,payload:F}}async function V11(F,A,$){try{return await F.step($)||""}catch(B){if(A===0)throw B;return await V11(F,A-1,$)}}async function _p1(F,A,$){let B=await F.unwrap($);return await F.wrap(B||"",{user:A})}async function E11(F,A){let $=A.CANONICALIZE_HOST_NAME;if(!$||$===L11.GSSAPICanonicalizationValue.none)return F;if($===L11.GSSAPICanonicalizationValue.on||$===L11.GSSAPICanonicalizationValue.forwardAndReverse){let{address:B}=await cj.promises.lookup(F);try{let J=await cj.promises.resolvePtr(B);return J.length>0?J[0]:F}catch{return await lj(F)}}else return await lj(F)}async function lj(F){try{let A=await cj.promises.resolveCname(F);return A.length>0?A[0]:F}catch{return F}}function yp1(){if(!SY)SY=(0,Sp1.getKerberos)()}});var n2=Q((I11)=>{Object.defineProperty(I11,"__esModule",{value:!0});I11.AUTH_MECHS_AUTH_SRC_EXTERNAL=I11.AuthMechanism=void 0;I11.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});I11.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([I11.AuthMechanism.MONGODB_GSSAPI,I11.AuthMechanism.MONGODB_AWS,I11.AuthMechanism.MONGODB_OIDC,I11.AuthMechanism.MONGODB_X509])});var zW=Q((R11)=>{Object.defineProperty(R11,"__esModule",{value:!0});R11.MongoCredentials=R11.DEFAULT_ALLOWED_HOSTS=void 0;var b9=B1(),mp1=ZW(),q3=n2();function dp1(F){if(F){if(Array.isArray(F.saslSupportedMechs))return F.saslSupportedMechs.includes(q3.AuthMechanism.MONGODB_SCRAM_SHA256)?q3.AuthMechanism.MONGODB_SCRAM_SHA256:q3.AuthMechanism.MONGODB_SCRAM_SHA1}return q3.AuthMechanism.MONGODB_SCRAM_SHA256}var N11=["test","azure","gcp","k8s"],P11="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";R11.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var cp1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class UW{constructor(F){if(this.username=F.username??"",this.password=F.password,this.source=F.source,!this.source&&F.db)this.source=F.db;if(this.mechanism=F.mechanism||q3.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=F.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)){if(!this.username&&process.env.AWS_ACCESS_KEY_ID)this.username=process.env.AWS_ACCESS_KEY_ID;if(!this.password&&process.env.AWS_SECRET_ACCESS_KEY)this.password=process.env.AWS_SECRET_ACCESS_KEY;if(this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null)this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN}}if(this.mechanism===q3.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:R11.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(F){return this.mechanism===F.mechanism&&this.username===F.username&&this.password===F.password&&this.source===F.source}resolveAuthMechanism(F){if(this.mechanism.match(/DEFAULT/i))return new UW({username:this.username,password:this.password,source:this.source,mechanism:dp1(F),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===q3.AuthMechanism.MONGODB_GSSAPI||this.mechanism===q3.AuthMechanism.MONGODB_PLAIN||this.mechanism===q3.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===q3.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new b9.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===q3.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new b9.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new b9.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new b9.MongoInvalidArgumentError(cp1);if(this.mechanismProperties.ENVIRONMENT&&!N11.includes(this.mechanismProperties.ENVIRONMENT))throw new b9.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${N11.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new b9.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let A=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(A))throw new b9.MongoInvalidArgumentError(P11);for(let $ of A)if(typeof $!=="string")throw new b9.MongoInvalidArgumentError(P11)}}if(q3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new b9.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===q3.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new b9.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===q3.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new b9.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let F=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(mp1.GSSAPICanonicalizationValue).includes(F))throw new b9.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${F}`)}static merge(F,A){return new UW({username:A.username??F?.username??"",password:A.password??F?.password??"",mechanism:A.mechanism??F?.mechanism??q3.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:A.mechanismProperties??F?.mechanismProperties??{},source:A.source??A.db??F?.source??"admin"})}}R11.MongoCredentials=UW});var T11=Q((lE0,lp1)=>{lp1.exports={name:"mongodb",version:"6.20.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.2"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.3.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.5.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var pj=Q((u11)=>{Object.defineProperty(u11,"__esModule",{value:!0});u11.LimitedSizeDocument=void 0;u11.isDriverInfoEqual=ap1;u11.makeClientMetadata=np1;u11.addContainerMetadata=tp1;u11.getFAASEnv=S11;var fY=x("os"),xY=x("process"),M$=Y0(),k11=B1(),pp1=W1(),ip1=T11().version;function ap1(F,A){let $=(B,J)=>{return B||=void 0,J||=void 0,B===J};return $(F.name,A.name)&&$(F.platform,A.platform)&&$(F.version,A.version)}class WW{constructor(F){this.document=new Map,this.documentSize=5,this.maxSize=F}ifItFitsItSits(F,A){let $=M$.BSON.serialize(new Map().set(F,A)).byteLength-5;if($+this.documentSize>this.maxSize)return!1;return this.documentSize+=$,this.document.set(F,A),!0}toObject(){return M$.BSON.deserialize(M$.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}u11.LimitedSizeDocument=WW;function np1(F,{appName:A=""}){let $=new WW(512);if(A.length>0){let D=Buffer.byteLength(A,"utf8")<=128?A:Buffer.from(A,"utf8").subarray(0,128).toString("utf8");$.ifItFitsItSits("application",{name:D})}let B={name:"nodejs",version:ip1};for(let{name:D="",version:G=""}of F){if(D.length>0)B.name=`${B.name}|${D}`;if(G.length>0)B.version=`${B.version}|${G}`}if(!$.ifItFitsItSits("driver",B))throw new k11.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let J=sp1();for(let{platform:D=""}of F)if(D.length>0)J=`${J}|${D}`;if(!$.ifItFitsItSits("platform",J))throw new k11.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let X=new Map().set("name",xY.platform).set("architecture",xY.arch).set("version",fY.release()).set("type",fY.type());if(!$.ifItFitsItSits("os",X))for(let D of X.keys()){if(X.delete(D),X.size===0)break;if($.ifItFitsItSits("os",X))break}let Y=S11();if(Y!=null){if(!$.ifItFitsItSits("env",Y))for(let D of Y.keys()){if(Y.delete(D),Y.size===0)break;if($.ifItFitsItSits("env",Y))break}}return $.toObject()}var O11;async function rp1(){let F={};O11??=(0,pp1.fileIsAccessible)("/.dockerenv");let A=await O11,{KUBERNETES_SERVICE_HOST:$=""}=xY.env,B=$.length>0?!0:!1;if(A)F.runtime="docker";if(B)F.orchestrator="kubernetes";return F}async function tp1(F){let A=await rp1();if(Object.keys(A).length===0)return F;let $=new WW(512),B={...F?.env,container:A};for(let[J,X]of Object.entries(F))if(J!=="env")$.ifItFitsItSits(J,X);else if(!$.ifItFitsItSits("env",B))$.ifItFitsItSits("env",X);if(!("env"in F))$.ifItFitsItSits("env",B);return $.toObject()}function S11(){let{AWS_EXECUTION_ENV:F="",AWS_LAMBDA_RUNTIME_API:A="",FUNCTIONS_WORKER_RUNTIME:$="",K_SERVICE:B="",FUNCTION_NAME:J="",VERCEL:X="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:Y="",AWS_REGION:D="",FUNCTION_MEMORY_MB:G="",FUNCTION_REGION:Z="",FUNCTION_TIMEOUT_SEC:U="",VERCEL_REGION:z=""}=xY.env,W=F.startsWith("AWS_Lambda_")||A.length>0,H=$.length>0,K=B.length>0||J.length>0,q=X.length>0,V=new Map;if(q&&!(H||K)){if(z.length>0)V.set("region",z);return V.set("name","vercel"),V}if(W&&!(H||K||q)){if(D.length>0)V.set("region",D);if(Y.length>0&&Number.isInteger(+Y))V.set("memory_mb",new M$.Int32(Y));return V.set("name","aws.lambda"),V}if(H&&!(K||W||q))return V.set("name","azure.func"),V;if(K&&!(H||W||q)){if(Z.length>0)V.set("region",Z);if(G.length>0&&Number.isInteger(+G))V.set("memory_mb",new M$.Int32(G));if(U.length>0&&Number.isInteger(+U))V.set("timeout_sec",new M$.Int32(U));return V.set("name","gcp.func"),V}return null}function sp1(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${fY.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${fY.endianness()}`;return`Node.js ${xY.version}, ${fY.endianness()}`}});var gY=Q((m11)=>{Object.defineProperty(m11,"__esModule",{value:!0});m11.OpCompressedRequest=m11.OpMsgResponse=m11.OpMsgRequest=m11.DocumentSequence=m11.OpReply=m11.OpQueryRequest=void 0;var O$=Y0(),bY=B1(),ij=_Y(),T$=f8(),k$=0,$i1=2,Bi1=4,Ji1=8,Xi1=16,Yi1=32,Di1=64,Gi1=128,Zi1=1,Ui1=2,zi1=4,Wi1=8,Hi1=O$.BSON.onDemand.ByteUtils.encodeUTF8Into;class nj{constructor(F,A,$){this.moreToCome=!1;let B=`${F}.$cmd`;if(typeof F!=="string")throw new bY.MongoRuntimeError("Database name must be a string for a query");if(A==null)throw new bY.MongoRuntimeError("A query document must be specified for query");if(B.indexOf("\x00")!==-1)throw new bY.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=F,this.query=A,this.ns=B,this.numberToSkip=$.numberToSkip||0,this.numberToReturn=$.numberToReturn||0,this.returnFieldSelector=$.returnFieldSelector||void 0,this.requestId=$.requestId??nj.getRequestId(),this.pre32Limit=$.pre32Limit,this.serializeFunctions=typeof $.serializeFunctions==="boolean"?$.serializeFunctions:!1,this.ignoreUndefined=typeof $.ignoreUndefined==="boolean"?$.ignoreUndefined:!1,this.maxBsonSize=$.maxBsonSize||16777216,this.checkKeys=typeof $.checkKeys==="boolean"?$.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof $.secondaryOk==="boolean"?$.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=k$++}nextRequestId(){return k$+1}static getRequestId(){return++k$}toBin(){let F=[],A=null,$=0;if(this.tailable)$|=$i1;if(this.secondaryOk)$|=Bi1;if(this.oplogReplay)$|=Ji1;if(this.noCursorTimeout)$|=Xi1;if(this.awaitData)$|=Yi1;if(this.exhaust)$|=Di1;if(this.partial)$|=Gi1;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let B=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);F.push(B);let J=O$.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(F.push(J),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)A=O$.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),F.push(A);let X=B.length+J.length+(A?A.length:0),Y=4;return B[3]=X>>24&255,B[2]=X>>16&255,B[1]=X>>8&255,B[0]=X&255,B[Y+3]=this.requestId>>24&255,B[Y+2]=this.requestId>>16&255,B[Y+1]=this.requestId>>8&255,B[Y]=this.requestId&255,Y=Y+4,B[Y+3]=0,B[Y+2]=0,B[Y+1]=0,B[Y]=0,Y=Y+4,B[Y+3]=T$.OP_QUERY>>24&255,B[Y+2]=T$.OP_QUERY>>16&255,B[Y+1]=T$.OP_QUERY>>8&255,B[Y]=T$.OP_QUERY&255,Y=Y+4,B[Y+3]=$>>24&255,B[Y+2]=$>>16&255,B[Y+1]=$>>8&255,B[Y]=$&255,Y=Y+4,Y=Y+B.write(this.ns,Y,"utf8")+1,B[Y-1]=0,B[Y+3]=this.numberToSkip>>24&255,B[Y+2]=this.numberToSkip>>16&255,B[Y+1]=this.numberToSkip>>8&255,B[Y]=this.numberToSkip&255,Y=Y+4,B[Y+3]=this.numberToReturn>>24&255,B[Y+2]=this.numberToReturn>>16&255,B[Y+1]=this.numberToReturn>>8&255,B[Y]=this.numberToReturn&255,Y=Y+4,F}}m11.OpQueryRequest=nj;class b11{constructor(F,A,$,B){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=F,this.data=$,this.opts=B??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new O$.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&Zi1)!==0,this.queryFailure=(this.responseFlags&Ui1)!==0,this.shardConfigStale=(this.responseFlags&zi1)!==0,this.awaitCapable=(this.responseFlags&Wi1)!==0;for(let F=0;F<this.numberReturned;F++){let A=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,$=this.data.subarray(this.index,this.index+A);this.sections.push($),this.index=this.index+A}return this.parsed=!0,this.sections[0]}}m11.OpReply=b11;var g11=1,_11=2,y11=65536;class rj{constructor(F,A){this.field=F,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let $=Buffer.allocUnsafe(5+this.field.length+1);if($[0]=1,Hi1($,`${this.field}\x00`,5),this.chunks.push($),this.header=$,A)for(let B of A)this.push(B,O$.serialize(B))}push(F,A){return this.serializedDocumentsLength+=A.length,this.documents.push(F),this.chunks.push(A),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}m11.DocumentSequence=rj;class HW{constructor(F,A,$){if(A==null)throw new bY.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=F,this.command=A,this.command.$db=F,this.options=$??{},this.requestId=$.requestId?$.requestId:HW.getRequestId(),this.serializeFunctions=typeof $.serializeFunctions==="boolean"?$.serializeFunctions:!1,this.ignoreUndefined=typeof $.ignoreUndefined==="boolean"?$.ignoreUndefined:!1,this.checkKeys=typeof $.checkKeys==="boolean"?$.checkKeys:!1,this.maxBsonSize=$.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=$.moreToCome??A.writeConcern?.w===0,this.exhaustAllowed=typeof $.exhaustAllowed==="boolean"?$.exhaustAllowed:!1}toBin(){let F=[],A=0;if(this.checksumPresent)A|=g11;if(this.moreToCome)A|=_11;if(this.exhaustAllowed)A|=y11;let $=Buffer.alloc(20);F.push($);let B=$.length,J=this.command;return B+=this.makeSections(F,J),$.writeInt32LE(B,0),$.writeInt32LE(this.requestId,4),$.writeInt32LE(0,8),$.writeInt32LE(T$.OP_MSG,12),$.writeUInt32LE(A,16),F}makeSections(F,A){let $=this.extractDocumentSequences(A),B=Buffer.allocUnsafe(1);B[0]=0;let J=this.serializeBson(A);return F.push(B),F.push(J),F.push($),B.length+J.length+$.length}extractDocumentSequences(F){let A=[];for(let[$,B]of Object.entries(F))if(B instanceof rj)A.push(B.toBin()),delete F[$];if(A.length>0)return Buffer.concat(A);return Buffer.alloc(0)}serializeBson(F){return O$.serialize(F,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return k$=k$+1&2147483647,k$}}m11.OpMsgRequest=HW;class v11{constructor(F,A,$,B){this.index=0,this.sections=[],this.parsed=!1,this.raw=F,this.data=$,this.opts=B??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.responseFlags=$.readInt32LE(0),this.checksumPresent=(this.responseFlags&g11)!==0,this.moreToCome=(this.responseFlags&_11)!==0,this.exhaustAllowed=(this.responseFlags&y11)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let F=this.data.readUInt8(this.index++);if(F===0){let A=this.data.readUInt32LE(this.index),$=this.data.subarray(this.index,this.index+A);this.sections.push($),this.index+=A}else if(F===1)throw new bY.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}m11.OpMsgResponse=v11;var aj=16,x11=9;class h11{constructor(F,A){this.command=F,this.options={zlibCompressionLevel:A.zlibCompressionLevel,agreedCompressor:A.agreedCompressor}}static canCompress(F){let A=F instanceof HW?F.command:F.query,$=Object.keys(A)[0];return!ij.uncompressibleCommands.has($)}async toBin(){let F=Buffer.concat(this.command.toBin()),A=F.slice(aj),$=F.readInt32LE(12),B=await(0,ij.compress)(this.options,A),J=Buffer.alloc(aj);J.writeInt32LE(aj+x11+B.length,0),J.writeInt32LE(this.command.requestId,4),J.writeInt32LE(0,8),J.writeInt32LE(T$.OP_COMPRESSED,12);let X=Buffer.alloc(x11);return X.writeInt32LE($,0),X.writeInt32LE(A.length,4),X.writeUInt8(ij.Compressor[this.options.agreedCompressor],8),[J,X,B]}}m11.OpCompressedRequest=h11});var _Y=Q((n11)=>{Object.defineProperty(n11,"__esModule",{value:!0});n11.uncompressibleCommands=n11.Compressor=void 0;n11.compress=Ni1;n11.decompress=i11;n11.compressCommand=Pi1;n11.decompressResponse=Ri1;var c11=x("util"),KW=x("zlib"),Li1=T6(),l11=Q2(),sj=B1(),S$=gY(),tj=f8();n11.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});n11.uncompressibleCommands=new Set([Li1.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var wi1=3,Ii1=(0,c11.promisify)(KW.inflate.bind(KW)),Ci1=(0,c11.promisify)(KW.deflate.bind(KW)),m8,HF=null;function p11(){if(HF==null){let F=(0,l11.getSnappy)();if("kModuleError"in F)throw F.kModuleError;HF=F}return HF}async function Ni1(F,A){let $={};switch(F.agreedCompressor){case"snappy":return HF??=p11(),await HF.compress(A);case"zstd":{if(a11(),"kModuleError"in m8)throw m8.kModuleError;return await m8.compress(A,wi1)}case"zlib":{if(F.zlibCompressionLevel)$.level=F.zlibCompressionLevel;return await Ci1(A,$)}default:throw new sj.MongoInvalidArgumentError(`Unknown compressor ${F.agreedCompressor} failed to compress`)}}async function i11(F,A){if(F!==n11.Compressor.snappy&&F!==n11.Compressor.zstd&&F!==n11.Compressor.zlib&&F!==n11.Compressor.none)throw new sj.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${F})`);switch(F){case n11.Compressor.snappy:return HF??=p11(),await HF.uncompress(A,{asBuffer:!0});case n11.Compressor.zstd:{if(a11(),"kModuleError"in m8)throw m8.kModuleError;return await m8.decompress(A)}case n11.Compressor.zlib:return await Ii1(A);default:return A}}function a11(){if(!m8)m8=(0,l11.getZstdLibrary)()}var yY=16;async function Pi1(F,A){let B=await(A.agreedCompressor==="none"||!S$.OpCompressedRequest.canCompress(F)?F:new S$.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0})).toBin();return Buffer.concat(B)}async function Ri1(F){let A={length:F.readInt32LE(0),requestId:F.readInt32LE(4),responseTo:F.readInt32LE(8),opCode:F.readInt32LE(12)};if(A.opCode!==tj.OP_COMPRESSED){let D=A.opCode===tj.OP_MSG?S$.OpMsgResponse:S$.OpReply,G=F.subarray(yY);return new D(F,A,G)}let $={...A,fromCompressed:!0,opCode:F.readInt32LE(yY),length:F.readInt32LE(yY+4)},B=F[yY+8],J=F.slice(yY+9),X=$.opCode===tj.OP_MSG?S$.OpMsgResponse:S$.OpReply,Y=await i11(B,J);if(Y.length!==$.length)throw new sj.MongoDecompressionError("Message body and message header must be the same length");return new X(F,$,Y)}});var ej=Q((t11)=>{Object.defineProperty(t11,"__esModule",{value:!0});t11.hmacSha256Hook=t11.hmacSha512Hook=t11.aes256CtrDecryptHook=t11.aes256CtrEncryptHook=t11.aes256CbcDecryptHook=t11.aes256CbcEncryptHook=void 0;t11.makeAES256Hook=hY;t11.randomHook=Oi1;t11.sha256Hook=Si1;t11.makeHmacHook=oj;t11.signRsaSha256Hook=ui1;var vY=x("crypto");function hY(F,A){return function($,B,J,X){let Y;try{let D=vY[F](A,$,B);D.setAutoPadding(!1),Y=D.update(J);let G=D.final();if(G.length>0)Y=Buffer.concat([Y,G])}catch(D){return D}return Y.copy(X),Y.length}}function Oi1(F,A){try{vY.randomFillSync(F,0,A)}catch($){return $}return A}function Si1(F,A){let $;try{$=vY.createHash("sha256").update(F).digest()}catch(B){return B}return $.copy(A),$.length}function oj(F){return(A,$,B)=>{let J;try{J=vY.createHmac(F,A).update($).digest()}catch(X){return X}return J.copy(B),J.length}}function ui1(F,A,$){let B;try{let J=vY.createSign("sha256WithRSAEncryption"),X=Buffer.from(`-----BEGIN PRIVATE KEY-----
${F.toString("base64")}
-----END PRIVATE KEY-----
`);B=J.update(A).end().sign(X)}catch(J){return J}return B.copy($),B.length}t11.aes256CbcEncryptHook=hY("createCipheriv","aes-256-cbc");t11.aes256CbcDecryptHook=hY("createDecipheriv","aes-256-cbc");t11.aes256CtrEncryptHook=hY("createCipheriv","aes-256-ctr");t11.aes256CtrDecryptHook=hY("createDecipheriv","aes-256-ctr");t11.hmacSha512Hook=oj("sha512");t11.hmacSha256Hook=oj("sha256")});var u$=Q((B01)=>{Object.defineProperty(B01,"__esModule",{value:!0});B01.MongoCryptKMSRequestNetworkTimeoutError=B01.MongoCryptAzureKMSRequestError=B01.MongoCryptCreateEncryptedCollectionError=B01.MongoCryptCreateDataKeyError=B01.MongoCryptInvalidArgumentError=B01.MongoCryptError=void 0;var ci1=B1();class KF extends ci1.MongoError{constructor(F,A={}){super(F,A)}get name(){return"MongoCryptError"}}B01.MongoCryptError=KF;class o11 extends KF{constructor(F){super(F)}get name(){return"MongoCryptInvalidArgumentError"}}B01.MongoCryptInvalidArgumentError=o11;class e11 extends KF{constructor(F,{cause:A}){super(`Unable to complete creating data keys: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateDataKeyError"}}B01.MongoCryptCreateDataKeyError=e11;class F01 extends KF{constructor(F,{cause:A}){super(`Unable to create collection: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateEncryptedCollectionError"}}B01.MongoCryptCreateEncryptedCollectionError=F01;class A01 extends KF{constructor(F,A){super(F);this.body=A}get name(){return"MongoCryptAzureKMSRequestError"}}B01.MongoCryptAzureKMSRequestError=A01;class $01 extends KF{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}B01.MongoCryptKMSRequestNetworkTimeoutError=$01});var AM=Q((G01)=>{Object.defineProperty(G01,"__esModule",{value:!0});G01.LegacyAWSTemporaryCredentialProvider=G01.AWSSDKCredentialProvider=G01.AWSTemporaryCredentialProvider=void 0;var ri1=Q2(),ti1=B1(),qW=W1(),si1="http://169.254.170.2",FM="http://169.254.169.254",X01="/latest/meta-data/iam/security-credentials";class V2{static get awsSDK(){return V2._awsSDK??=(0,ri1.getAwsCredentialProvider)(),V2._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in V2.awsSDK)}}G01.AWSTemporaryCredentialProvider=V2;class Y01 extends V2{constructor(F){super();if(F)this._provider=F}get provider(){if("kModuleError"in V2.awsSDK)throw V2.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:F="",AWS_REGION:A=""}=process.env;F=F.toLowerCase(),A=A.toLowerCase();let $=A.length!==0&&F.length!==0,J=F==="regional"||F==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(A);return this._provider=$&&J?V2.awsSDK.fromNodeProviderChain({clientConfig:{region:A}}):V2.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let F=await this.provider();return{AccessKeyId:F.accessKeyId,SecretAccessKey:F.secretAccessKey,Token:F.sessionToken,Expiration:F.expiration}}catch(F){throw new ti1.MongoAWSError(F.message,{cause:F})}}}G01.AWSSDKCredentialProvider=Y01;class D01 extends V2{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,qW.request)(`${si1}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let F=await(0,qW.request)(`${FM}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),A=await(0,qW.request)(`${FM}/${X01}`,{json:!1,headers:{"X-aws-ec2-metadata-token":F}});return await(0,qW.request)(`${FM}/${X01}/${A}`,{headers:{"X-aws-ec2-metadata-token":F}})}}G01.LegacyAWSTemporaryCredentialProvider=D01});var z01=Q((U01)=>{Object.defineProperty(U01,"__esModule",{value:!0});U01.loadAWSCredentials=Aa1;var Fa1=AM();async function Aa1(F,A){let $=new Fa1.AWSSDKCredentialProvider(A),{SecretAccessKey:B="",AccessKeyId:J="",Token:X}=await $.getCredentials(),Y={secretAccessKey:B,accessKeyId:J};return X!=null&&(Y.sessionToken=X),{...F,aws:Y}}});var JM=Q((q01)=>{Object.defineProperty(q01,"__esModule",{value:!0});q01.tokenCache=q01.AzureCredentialCache=q01.AZURE_BASE_URL=void 0;q01.addAzureParams=W01;q01.prepareRequest=H01;q01.fetchAzureKMSToken=K01;q01.loadAzureCredentials=Da1;var Ba1=B1(),Ja1=W1(),f$=u$(),Xa1=6000;q01.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class $M{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(F){return F.expiresOnTimestamp-Date.now()<=Xa1}resetCache(){this.cachedToken=null}_getToken(){return K01()}}q01.AzureCredentialCache=$M;q01.tokenCache=new $M;async function Ya1(F){let{status:A,body:$}=F,B=(()=>{try{return JSON.parse($)}catch{throw new f$.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(A!==200)throw new f$.MongoCryptAzureKMSRequestError("Unable to complete request.",B);if(!B.access_token)throw new f$.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!B.expires_in)throw new f$.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let J=Number(B.expires_in)*1000;if(Number.isNaN(J))throw new f$.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:B.access_token,expiresOnTimestamp:Date.now()+J}}function W01(F,A,$){if(F.searchParams.append("api-version","2018-02-01"),F.searchParams.append("resource",A),$)F.searchParams.append("client_id",$);return F}function H01(F){let A=new URL(F.url?.toString()??q01.AZURE_BASE_URL);return W01(A,"https://vault.azure.net"),{headers:{...F.headers,"Content-Type":"application/json",Metadata:!0},url:A}}async function K01(F={}){let{headers:A,url:$}=H01(F);try{let B=await(0,Ja1.get)($,{headers:A});return await Ya1(B)}catch(B){if(B instanceof Ba1.MongoNetworkTimeoutError)throw new f$.MongoCryptAzureKMSRequestError(`[Azure KMS] ${B.message}`);throw B}}async function Da1(F){let A=await q01.tokenCache.getToken();return{...F,azure:A}}});var E01=Q((V01)=>{Object.defineProperty(V01,"__esModule",{value:!0});V01.loadGCPCredentials=Ka1;var Ha1=Q2();async function Ka1(F){let A=(0,Ha1.getGcpMetadata)();if("kModuleError"in A)return F;let{access_token:$}=await A.instance({property:"service-accounts/default/token"});return{...F,gcp:{accessToken:$}}}});var XM=Q((L01)=>{Object.defineProperty(L01,"__esModule",{value:!0});L01.isEmptyCredentials=QW;L01.refreshKMSCredentials=La1;var Qa1=z01(),Va1=JM(),Ea1=E01();function QW(F,A){let $=A[F];if($==null)return!1;return typeof $==="object"&&Object.keys($).length===0}async function La1(F,A){let $=F;if(QW("aws",F))$=await(0,Qa1.loadAWSCredentials)($,A?.aws);if(QW("gcp",F))$=await(0,Ea1.loadGCPCredentials)($);if(QW("azure",F))$=await(0,Va1.loadAzureCredentials)($);return $}});var YM=Q((u01)=>{Object.defineProperty(u01,"__esModule",{value:!0});u01.StateMachine=void 0;var w01=x("fs/promises"),Ca1=x("net"),Na1=x("tls"),M7=Y0(),I01=I4(),Pa1=Q2(),Ra1=B1(),C01=n6(),d8=W1(),ja1=VW(),c8=u$(),mY=null;function Ma1(){if(mY==null){let F=(0,Pa1.getSocks)();if("kModuleError"in F)throw F.kModuleError;mY=F}return mY}var qF=0,P01=1,R01=2,j01=3,M01=7,T01=4,k01=5,O01=6,Ta1=443,ka1=new Map([[qF,"MONGOCRYPT_CTX_ERROR"],[P01,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[R01,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[j01,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[M01,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[T01,"MONGOCRYPT_CTX_NEED_KMS"],[k01,"MONGOCRYPT_CTX_READY"],[O01,"MONGOCRYPT_CTX_DONE"]]),Oa1=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function N01(F){if(process.env.MONGODB_CRYPT_DEBUG)console.error(F)}var Sa1;class S01{constructor(F,A=(0,M7.pluckBSONSerializeOptions)(F)){this.options=F,this.bsonOptions=A}async execute(F,A,$){let{_keyVaultNamespace:B,_keyVaultClient:J,_metaDataClient:X,_mongocryptdClient:Y,_mongocryptdManager:D}=F,G=null,Z=()=>A.status,U=()=>A.state;while(U()!==O01&&U()!==qF)switch($.signal?.throwIfAborted(),N01(`[context#${A.id}] ${ka1.get(U())||U()}`),U()){case P01:{let z=(0,M7.deserialize)(A.nextMongoOperation());if(!X)throw new c8.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let W=this.fetchCollectionInfo(X,A.ns,z,$);for await(let H of W)if(A.addMongoOperationResponse((0,M7.serialize)(H)),U()===qF)break;if(U()===qF)break;A.finishMongoOperation();break}case R01:{let z=A.nextMongoOperation();if(U()===qF)break;if(!Y)throw new c8.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let W=D?await D.withRespawn(this.markCommand.bind(this,Y,A.ns,z,$)):await this.markCommand(Y,A.ns,z,$);A.addMongoOperationResponse(W),A.finishMongoOperation();break}case j01:{let z=A.nextMongoOperation(),W=await this.fetchKeys(J,B,z,$);if(W.length===0)G=Sa1??=(0,M7.serialize)({v:[]});for(let H of W)A.addMongoOperationResponse((0,M7.serialize)(H));A.finishMongoOperation();break}case M01:{let z=await F.askForKMSCredentials();A.provideKMSProviders((0,M7.serialize)(z));break}case T01:{await Promise.all(this.requests(A,$)),A.finishKMSRequests();break}case k01:{let z=A.finalize();if(U()===qF){let W=Z().message||"Finalization error";throw new c8.MongoCryptError(W)}G=z;break}default:throw new c8.MongoCryptError(`Unknown state: ${U()}`)}if(U()===qF||G==null){let z=Z().message;if(!z)N01("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new c8.MongoCryptError(z??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return G}async kmsRequest(F,A){let $=F.endpoint.split(":"),B=$[1]!=null?Number.parseInt($[1],10):Ta1,J={host:$[0],servername:$[0],port:B,...(0,ja1.autoSelectSocketOptions)(this.options.socketOptions||{})},X=F.message,Y=new d8.BufferPool,D,G;function Z(){for(let K of[G,D])if(K)K.destroy()}function U(K){return new c8.MongoCryptError("KMS request failed",{cause:K})}function z(){return new c8.MongoCryptError("KMS request closed")}let W=this.options.tlsOptions;if(W){let K=F.kmsProvider,q=W[K];if(q){let V=this.validateTlsOptions(K,q);if(V)throw V;try{await this.setTlsOptions(q,J)}catch(E){throw U(E)}}}let H;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){D=new Ca1.Socket;let{promise:E,reject:L,resolve:w}=(0,d8.promiseWithResolvers)();D.once("error",(P)=>L(U(P))).once("close",()=>L(z())).once("connect",()=>w());let I={...J,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};D.connect(I),await E;try{mY??=Ma1(),J.socket=(await mY.SocksClient.createConnection({existing_socket:D,command:"connect",destination:{host:J.host,port:J.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(P){throw U(P)}}G=Na1.connect(J,()=>{G.write(X)});let{promise:K,reject:q,resolve:V}=(0,d8.promiseWithResolvers)();H=(0,d8.addAbortListener)(A?.signal,function(){Z(),q(this.reason)}),G.once("error",(E)=>q(U(E))).once("close",()=>q(z())).on("data",(E)=>{Y.append(E);while(F.bytesNeeded>0&&Y.length){let L=Math.min(F.bytesNeeded,Y.length);F.addResponse(Y.read(L))}if(F.bytesNeeded<=0)V()}),await(A?.timeoutContext?.csotEnabled()?Promise.all([K,C01.Timeout.expires(A.timeoutContext?.remainingTimeMS)]):K)}catch(K){if(K instanceof C01.TimeoutError)throw new Ra1.MongoOperationTimeoutError("KMS request timed out");throw K}finally{Z(),H?.[d8.kDispose]()}}*requests(F,A){for(let $=F.nextKMSRequest();$!=null;$=F.nextKMSRequest())yield this.kmsRequest($,A)}validateTlsOptions(F,A){let $=Object.keys(A);for(let B of Oa1)if($.includes(B))return new c8.MongoCryptError(`Insecure TLS options prohibited for ${F}: ${B}`)}async setTlsOptions(F,A){if(F.secureContext)A.secureContext=F.secureContext;if(F.tlsCertificateKeyFile){let $=await w01.readFile(F.tlsCertificateKeyFile);A.cert=A.key=$}if(F.tlsCAFile)A.ca=await w01.readFile(F.tlsCAFile);if(F.tlsCertificateKeyFilePassword)A.passphrase=F.tlsCertificateKeyFilePassword}fetchCollectionInfo(F,A,$,B){let{db:J}=d8.MongoDBCollectionNamespace.fromString(A);return F.db(J).listCollections($,{promoteLongs:!1,promoteValues:!1,timeoutContext:B?.timeoutContext&&new I01.CursorTimeoutContext(B?.timeoutContext,Symbol()),signal:B?.signal,nameOnly:!1})}async markCommand(F,A,$,B){let{db:J}=d8.MongoDBCollectionNamespace.fromString(A),X={promoteLongs:!1,promoteValues:!1},Y=(0,M7.deserialize)($,X),D={timeoutMS:void 0,signal:void 0};if(B?.timeoutContext?.csotEnabled())D.timeoutMS=B.timeoutContext.remainingTimeMS;if(B?.signal)D.signal=B.signal;let G=await F.db(J).command(Y,{...X,...D});return(0,M7.serialize)(G,this.bsonOptions)}fetchKeys(F,A,$,B){let{db:J,collection:X}=d8.MongoDBCollectionNamespace.fromString(A),Y={timeoutContext:void 0,signal:void 0};if(B?.timeoutContext!=null)Y.timeoutContext=new I01.CursorTimeoutContext(B.timeoutContext,Symbol());if(B?.signal!=null)Y.signal=B.signal;return F.db(J).collection(X,{readConcern:{level:"majority"}}).find((0,M7.deserialize)($),Y).toArray()}}u01.StateMachine=S01});var VW=Q((b01)=>{Object.defineProperty(b01,"__esModule",{value:!0});b01.ClientEncryption=void 0;b01.autoSelectSocketOptions=cY;var Q3=Y0(),ua1=Q2(),dY=n6(),f3=W1(),fa1=ej(),l8=u$(),x01=XM(),EW=YM();class LW{static getMongoCrypt(){let F=(0,ua1.getMongoDBClientEncryption)();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){this._client=F,this._proxyOptions=A.proxyOptions??{},this._tlsOptions=A.tlsOptions??{},this._kmsProviders=A.kmsProviders||{};let{timeoutMS:$}=(0,f3.resolveTimeoutOptions)(F,A);if(this._timeoutMS=$,this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!(0,x01.isEmptyCredentials)("aws",this._kmsProviders))throw new l8.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(A.keyVaultNamespace==null)throw new l8.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let B={...A,cryptoCallbacks:fa1,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?(0,Q3.serialize)(this._kmsProviders):this._kmsProviders};this._keyVaultNamespace=A.keyVaultNamespace,this._keyVaultClient=A.keyVaultClient||F;let J=LW.getMongoCrypt();this._mongoCrypt=new J(B)}async createDataKey(F,A={}){if(A.keyAltNames&&!Array.isArray(A.keyAltNames))throw new l8.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof A.keyAltNames}.`);let $=void 0;if(A.keyAltNames&&A.keyAltNames.length>0)$=A.keyAltNames.map((W,H)=>{if(typeof W!=="string")throw new l8.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${H} was of type ${typeof W}`);return(0,Q3.serialize)({keyAltName:W})});let B=void 0;if(A.keyMaterial)B=(0,Q3.serialize)({keyMaterial:A.keyMaterial});let J=(0,Q3.serialize)({provider:F,...A.masterKey}),X=this._mongoCrypt.makeDataKeyContext(J,{keyAltNames:$,keyMaterial:B}),Y=new EW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:cY(this._client.s.options)}),D=A?.timeoutContext??dY.TimeoutContext.create((0,f3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),G=(0,Q3.deserialize)(await Y.execute(this,X,{timeoutContext:D})),{db:Z,collection:U}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:z}=await this._keyVaultClient.db(Z).collection(U).insertOne(G,{writeConcern:{w:"majority"},timeoutMS:D?.csotEnabled()?D?.getRemainingTimeMSOrThrow():void 0});return z}async rewrapManyDataKey(F,A){let $=void 0;if(A){let W=Object.assign({provider:A.provider},A.masterKey);$=(0,Q3.serialize)(W)}let B=(0,Q3.serialize)(F),J=this._mongoCrypt.makeRewrapManyDataKeyContext(B,$),X=new EW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:cY(this._client.s.options)}),Y=dY.TimeoutContext.create((0,f3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:D}=(0,Q3.deserialize)(await X.execute(this,J,{timeoutContext:Y}));if(D.length===0)return{};let{db:G,collection:Z}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),U=D.map((W)=>({updateOne:{filter:{_id:W._id},update:{$set:{masterKey:W.masterKey,keyMaterial:W.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(G).collection(Z).bulkWrite(U,{writeConcern:{w:"majority"},timeoutMS:Y.csotEnabled()?Y?.remainingTimeMS:void 0})}}async deleteKey(F){let{db:A,collection:$}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection($).deleteOne({_id:F},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:F,collection:A}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(F).collection(A).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(F){let{db:A,collection:$}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection($).findOne({_id:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(F){let{db:A,collection:$}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection($).findOne({keyAltNames:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(F,A){let{db:$,collection:B}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db($).collection(B).findOneAndUpdate({_id:F},{$addToSet:{keyAltNames:A}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(F,A){let{db:$,collection:B}=f3.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),J=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[A]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",A]}}}]}}}];return await this._keyVaultClient.db($).collection(B).findOneAndUpdate({_id:F},J,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(F,A,$){let{provider:B,masterKey:J,createCollectionOptions:{encryptedFields:{...X},...Y}}=$,D=this._timeoutMS!=null?dY.TimeoutContext.create((0,f3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(X.fields)){let G=X.fields.map(async(z)=>z==null||typeof z!=="object"||z.keyId!=null?z:{...z,keyId:await this.createDataKey(B,{masterKey:J,timeoutContext:D?.csotEnabled()?D?.clone():void 0})}),Z=await Promise.allSettled(G);X.fields=Z.map((z,W)=>z.status==="fulfilled"?z.value:X.fields[W]);let U=Z.find((z)=>z.status==="rejected");if(U!=null)throw new l8.MongoCryptCreateDataKeyError(X,{cause:U.reason})}try{return{collection:await F.createCollection(A,{...Y,encryptedFields:X,timeoutMS:D?.csotEnabled()?D?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:X}}catch(G){throw new l8.MongoCryptCreateEncryptedCollectionError(X,{cause:G})}}async encrypt(F,A){return await this._encrypt(F,!1,A)}async encryptExpression(F,A){return await this._encrypt(F,!0,A)}async decrypt(F){let A=(0,Q3.serialize)({v:F}),$=this._mongoCrypt.makeExplicitDecryptionContext(A),B=new EW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:cY(this._client.s.options)}),J=this._timeoutMS!=null?dY.TimeoutContext.create((0,f3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:X}=(0,Q3.deserialize)(await B.execute(this,$,{timeoutContext:J}));return X}async askForKMSCredentials(){return await(0,x01.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return LW.getMongoCrypt().libmongocryptVersion}async _encrypt(F,A,$){let{algorithm:B,keyId:J,keyAltName:X,contentionFactor:Y,queryType:D,rangeOptions:G,textOptions:Z}=$,U={expressionMode:A,algorithm:B};if(J)U.keyId=J.buffer;if(X){if(J)throw new l8.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof X!=="string")throw new l8.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof X}`);U.keyAltName=(0,Q3.serialize)({keyAltName:X})}if(typeof Y==="number"||typeof Y==="bigint")U.contentionFactor=Y;if(typeof D==="string")U.queryType=D;if(typeof G==="object")U.rangeOptions=(0,Q3.serialize)(G);if(typeof Z==="object")U.textOptions=(0,Q3.serialize)(Z);let z=(0,Q3.serialize)({v:F}),W=new EW.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:cY(this._client.s.options)}),H=this._mongoCrypt.makeExplicitEncryptionContext(z,U),K=this._timeoutMS!=null?dY.TimeoutContext.create((0,f3.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:q}=(0,Q3.deserialize)(await W.execute(this,H,{timeoutContext:K}));return q}}b01.ClientEncryption=LW;function cY(F){let A={autoSelectFamily:!0};if("autoSelectFamily"in F)A.autoSelectFamily=F.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in F)A.autoSelectFamilyAttemptTimeout=F.autoSelectFamilyAttemptTimeout;return A}});var v01=Q((_01)=>{Object.defineProperty(_01,"__esModule",{value:!0});_01.MongocryptdManager=void 0;var ba1=B1();class wW{constructor(F={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof F.mongocryptdURI==="string"&&F.mongocryptdURI.length>0?F.mongocryptdURI:wW.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!F.mongocryptdBypassSpawn,Object.hasOwn(F,"mongocryptdSpawnPath")&&F.mongocryptdSpawnPath)this.spawnPath=F.mongocryptdSpawnPath;if(Object.hasOwn(F,"mongocryptdSpawnArgs")&&Array.isArray(F.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(F.mongocryptdSpawnArgs);if(this.spawnArgs.filter((A)=>typeof A==="string").every((A)=>A.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let F=this.spawnPath||"mongocryptd",{spawn:A}=x("child_process");this._child=A(F,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(F){try{return await F()}catch($){if(!($ instanceof ba1.MongoNetworkTimeoutError&&!this.bypassSpawn))throw $}return await this.spawn(),await F()}}_01.MongocryptdManager=wW;wW.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var ZM=Q((p01)=>{var l01;Object.defineProperty(p01,"__esModule",{value:!0});p01.AutoEncrypter=p01.AutoEncryptionLoggerLevel=void 0;var h01=x("net"),lY=Y0(),ga1=T6(),_a1=Q2(),DM=B1(),ya1=p8(),va1=W1(),GM=VW(),ha1=ej(),m01=u$(),ma1=v01(),d01=XM(),c01=YM();p01.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class IW{static getMongoCrypt(){let F=(0,_a1.getMongoDBClientEncryption)();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){if(this[l01]=!1,this._client=F,this._bypassEncryption=A.bypassAutoEncryption===!0,this._keyVaultNamespace=A.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=A.keyVaultClient||F,this._metaDataClient=A.metadataClient||F,this._proxyOptions=A.proxyOptions||{},this._tlsOptions=A.tlsOptions||{},this._kmsProviders=A.kmsProviders||{},this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!(0,d01.isEmptyCredentials)("aws",this._kmsProviders))throw new m01.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let $={enableMultipleCollinfo:!0,cryptoCallbacks:ha1};if(A.schemaMap)$.schemaMap=Buffer.isBuffer(A.schemaMap)?A.schemaMap:(0,lY.serialize)(A.schemaMap);if(A.encryptedFieldsMap)$.encryptedFieldsMap=Buffer.isBuffer(A.encryptedFieldsMap)?A.encryptedFieldsMap:(0,lY.serialize)(A.encryptedFieldsMap);if($.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?(0,lY.serialize)(this._kmsProviders):this._kmsProviders,A.options?.logger)$.logger=A.options.logger;if(A.extraOptions&&A.extraOptions.cryptSharedLibPath)$.cryptSharedLibPath=A.extraOptions.cryptSharedLibPath;if(A.bypassQueryAnalysis)$.bypassQueryAnalysis=A.bypassQueryAnalysis;if(A.keyExpirationMS!=null)$.keyExpirationMS=A.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!A.bypassQueryAnalysis,A.extraOptions&&A.extraOptions.cryptSharedLibSearchPaths)$.cryptSharedLibSearchPaths=A.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)$.cryptSharedLibSearchPaths=["$SYSTEM"];let B=IW.getMongoCrypt();if(this._mongocrypt=new B($),this._contextCounter=0,A.extraOptions&&A.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new m01.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new ma1.MongocryptdManager(A.extraOptions);let J={serverSelectionTimeoutMS:1e4};if((A.extraOptions==null||typeof A.extraOptions.mongocryptdURI!=="string")&&!h01.getDefaultAutoSelectFamily)J.family=4;if(h01.getDefaultAutoSelectFamily)Object.assign(J,(0,GM.autoSelectSocketOptions)(this._client.s?.options??{}));this._mongocryptdClient=new ya1.MongoClient(this._mongocryptdManager.uri,J)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new DM.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new DM.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(F){throw new DM.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:F})}}async close(){await this._mongocryptdClient?.close()}async encrypt(F,A,$={}){if($.signal?.throwIfAborted(),this._bypassEncryption)return A;let B=Buffer.isBuffer(A)?A:(0,lY.serialize)(A,$),J=this._mongocrypt.makeEncryptionContext(va1.MongoDBCollectionNamespace.fromString(F).db,B);J.id=this._contextCounter++,J.ns=F,J.document=A;let X=new c01.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,GM.autoSelectSocketOptions)(this._client.s.options)});return(0,lY.deserialize)(await X.execute(this,J,$),{promoteValues:!1,promoteLongs:!1})}async decrypt(F,A={}){A.signal?.throwIfAborted();let $=this._mongocrypt.makeDecryptionContext(F);return $.id=this._contextCounter++,await new c01.StateMachine({...A,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,GM.autoSelectSocketOptions)(this._client.s.options)}).execute(this,$,A)}async askForKMSCredentials(){return await(0,d01.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return IW.getMongoCrypt().libmongocryptVersion}}p01.AutoEncrypter=IW;l01=ga1.kDecorateResult});var s01=Q((r01)=>{Object.defineProperty(r01,"__esModule",{value:!0});r01.Encrypter=void 0;var ca1=ZM(),la1=T6(),pa1=Q2(),a01=B1(),ia1=p8();class n01{constructor(F,A,$){if(typeof $.autoEncryption!=="object")throw new a01.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!$.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,$.maxPoolSize===0&&$.autoEncryption.keyVaultClient==null)$.autoEncryption.keyVaultClient=F;else if($.autoEncryption.keyVaultClient==null)$.autoEncryption.keyVaultClient=this.getInternalClient(F,A,$);if(this.bypassAutoEncryption)$.autoEncryption.metadataClient=void 0;else if($.maxPoolSize===0)$.autoEncryption.metadataClient=F;else $.autoEncryption.metadataClient=this.getInternalClient(F,A,$);if($.proxyHost)$.autoEncryption.proxyOptions={proxyHost:$.proxyHost,proxyPort:$.proxyPort,proxyUsername:$.proxyUsername,proxyPassword:$.proxyPassword};this.autoEncrypter=new ca1.AutoEncrypter(F,$.autoEncryption)}getInternalClient(F,A,$){let B=this.internalClient;if(B==null){let J={};for(let X of[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(X))continue;Reflect.set(J,X,Reflect.get($,X))}J.minPoolSize=0,B=new ia1.MongoClient(A,J),this.internalClient=B;for(let X of la1.MONGO_CLIENT_EVENTS)for(let Y of F.listeners(X))B.on(X,Y);F.on("newListener",(X,Y)=>{B?.on(X,Y)}),this.needsConnecting=!0}return B}async connectInternalClient(){let F=this.internalClient;if(this.needsConnecting&&F!=null)this.needsConnecting=!1,await F.connect()}async close(F){let A;try{await this.autoEncrypter.close()}catch(B){A=B}let $=this.internalClient;if($!=null&&F!==$)return await $.close();if(A!=null)throw A}static checkForMongoCrypt(){let F=(0,pa1.getMongoDBClientEncryption)();if("kModuleError"in F)throw new a01.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:F.kModuleError,dependencyName:"mongodb-client-encryption"})}}r01.Encrypter=n01});var UM=Q((o01)=>{Object.defineProperty(o01,"__esModule",{value:!0});o01.ConnectionPoolMetrics=void 0;class T7{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(F){if(F===T7.TXN)this.txnConnections+=1;else if(F===T7.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(F){if(F===T7.TXN)this.txnConnections-=1;else if(F===T7.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(F){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${F}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}o01.ConnectionPoolMetrics=T7;T7.TXN="txn";T7.CURSOR="cursor";T7.OTHER="other"});var zM=Q(($61)=>{Object.defineProperty($61,"__esModule",{value:!0});$61.Transaction=$61.TxnState=void 0;$61.isTransactionCommand=ea1;var F61=B1(),aa1=W2(),na1=J4(),ra1=W3();$61.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var ta1={[$61.TxnState.NO_TRANSACTION]:[$61.TxnState.NO_TRANSACTION,$61.TxnState.STARTING_TRANSACTION],[$61.TxnState.STARTING_TRANSACTION]:[$61.TxnState.TRANSACTION_IN_PROGRESS,$61.TxnState.TRANSACTION_COMMITTED,$61.TxnState.TRANSACTION_COMMITTED_EMPTY,$61.TxnState.TRANSACTION_ABORTED],[$61.TxnState.TRANSACTION_IN_PROGRESS]:[$61.TxnState.TRANSACTION_IN_PROGRESS,$61.TxnState.TRANSACTION_COMMITTED,$61.TxnState.TRANSACTION_ABORTED],[$61.TxnState.TRANSACTION_COMMITTED]:[$61.TxnState.TRANSACTION_COMMITTED,$61.TxnState.TRANSACTION_COMMITTED_EMPTY,$61.TxnState.STARTING_TRANSACTION,$61.TxnState.NO_TRANSACTION],[$61.TxnState.TRANSACTION_ABORTED]:[$61.TxnState.STARTING_TRANSACTION,$61.TxnState.NO_TRANSACTION],[$61.TxnState.TRANSACTION_COMMITTED_EMPTY]:[$61.TxnState.TRANSACTION_COMMITTED_EMPTY,$61.TxnState.NO_TRANSACTION]},sa1=new Set([$61.TxnState.STARTING_TRANSACTION,$61.TxnState.TRANSACTION_IN_PROGRESS]),oa1=new Set([$61.TxnState.TRANSACTION_COMMITTED,$61.TxnState.TRANSACTION_COMMITTED_EMPTY,$61.TxnState.TRANSACTION_ABORTED]);class A61{constructor(F){F=F??{},this.state=$61.TxnState.NO_TRANSACTION,this.options={};let A=ra1.WriteConcern.fromOptions(F);if(A){if(A.w===0)throw new F61.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=A}if(F.readConcern)this.options.readConcern=aa1.ReadConcern.fromOptions(F);if(F.readPreference)this.options.readPreference=na1.ReadPreference.fromOptions(F);if(F.maxCommitTimeMS)this.options.maxTimeMS=F.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===$61.TxnState.STARTING_TRANSACTION}get isActive(){return sa1.has(this.state)}get isCommitted(){return oa1.has(this.state)}transition(F){let A=ta1[this.state];if(A&&A.includes(F)){if(this.state=F,this.state===$61.TxnState.NO_TRANSACTION||this.state===$61.TxnState.STARTING_TRANSACTION||this.state===$61.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new F61.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${F}]`)}pinServer(F){if(this.isActive)this._pinnedServer=F}unpinServer(){this._pinnedServer=void 0}}$61.Transaction=A61;function ea1(F){return!!(F.commitTransaction||F.abortTransaction)}});var b$=Q((G61)=>{Object.defineProperty(G61,"__esModule",{value:!0});G61.ServerSessionPool=G61.ServerSession=G61.ClientSession=void 0;G61.maybeClearPinnedConnection=PW;G61.applySession=Xn1;G61.updateSessionFromResponse=Yn1;var NW=Y0(),RW=UM(),Y61=T6(),T1=B1(),An1=z9(),CW=X4(),WM=kY(),$n1=W2(),HM=J4(),Bn1=g$(),qM=D9(),KM=n6(),k0=zM(),C4=W1(),x$=W3();class jW extends An1.TypedEventEmitter{constructor(F,A,$,B){super();if(this.timeoutContext=null,this.on("error",C4.noop),F==null)throw new T1.MongoRuntimeError("ClientSession requires a MongoClient");if(A==null||!(A instanceof QM))throw new T1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if($=$??{},this.snapshotEnabled=$.snapshot===!0,$.causalConsistency===!0&&this.snapshotEnabled)throw new T1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=F,this.sessionPool=A,this.hasEnded=!1,this.clientOptions=B,this.timeoutMS=$.defaultTimeoutMS??F.s.options?.timeoutMS,this.explicit=!!$.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let J=this.explicit&&$.snapshot!==!0;this.supports={causalConsistency:$.causalConsistency??J},this.clusterTime=$.initialClusterTime,this.operationTime=void 0,this.owner=$.owner,this.defaultTransactionOptions={...$.defaultTransactionOptions},this.transaction=new k0.Transaction}get id(){return this.serverSession?.id}get serverSession(){let F=this._serverSession;if(F==null){if(this.explicit)throw new T1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new T1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");F=this.sessionPool.acquire(),this._serverSession=F}return F}get loadBalanced(){return this.client.topology?.description.type===qM.TopologyType.LoadBalanced}pin(F){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=F,F.emit(Y61.PINNED,this.inTransaction()?RW.ConnectionPoolMetrics.TXN:RW.ConnectionPoolMetrics.CURSOR)}unpin(F){if(this.loadBalanced)return PW(this,F);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(F){try{if(this.inTransaction())await this.abortTransaction({...F,throwTimeout:!0})}catch(A){if(A.name==="MongoOperationTimeoutError")throw A;(0,C4.squashError)(A)}finally{if(!this.hasEnded){let A=this.serverSession;if(A!=null)this.sessionPool.release(A),this._serverSession=new TW(A);this.hasEnded=!0,this.emit("ended",this)}PW(this,{force:!0,...F})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(F){if(this.operationTime==null){this.operationTime=F;return}if(F.greaterThan(this.operationTime))this.operationTime=F}advanceClusterTime(F){if(!F||typeof F!=="object")throw new T1.MongoInvalidArgumentError("input cluster time must be an object");if(!F.clusterTime||F.clusterTime._bsontype!=="Timestamp")throw new T1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!F.signature||F.signature.hash?._bsontype!=="Binary"||typeof F.signature.keyId!=="bigint"&&typeof F.signature.keyId!=="number"&&F.signature.keyId?._bsontype!=="Long")throw new T1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,qM._advanceClusterTime)(this,F)}equals(F){if(!(F instanceof jW))return!1;if(this.id==null||F.id==null)return!1;return C4.ByteUtils.equals(this.id.id.buffer,F.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(F){if(this.snapshotEnabled)throw new T1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new T1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new k0.Transaction({readConcern:F?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:F?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:F?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:F?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(k0.TxnState.STARTING_TRANSACTION)}async commitTransaction(F){if(this.transaction.state===k0.TxnState.NO_TRANSACTION)throw new T1.MongoTransactionError("No transaction started");if(this.transaction.state===k0.TxnState.STARTING_TRANSACTION||this.transaction.state===k0.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(k0.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===k0.TxnState.TRANSACTION_ABORTED)throw new T1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let A={commitTransaction:1},$=typeof F?.timeoutMS==="number"?F.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,B=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(B!=null)if($==null&&this.timeoutContext==null)x$.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...B});else{let Y=Object.keys(B);if(Y.length>2||!Y.includes("wtimeoutMS")&&!Y.includes("wTimeoutMS"))x$.WriteConcern.apply(A,{...B,wtimeoutMS:void 0})}if(this.transaction.state===k0.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if($==null&&this.timeoutContext==null)x$.WriteConcern.apply(A,{wtimeoutMS:1e4,...B,w:"majority"});else x$.WriteConcern.apply(A,{w:"majority",...B,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")A.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let J=new WM.RunCommandOperation(new C4.MongoDBNamespace("admin"),A,{session:this,readPreference:HM.ReadPreference.primary,bypassPinningCheck:!0}),X=this.timeoutContext??(typeof $==="number"?KM.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:$}):null);try{await(0,CW.executeOperation)(this.client,J,X),this.commitAttempted=void 0;return}catch(Y){if(this.commitAttempted=!0,Y instanceof T1.MongoError&&(0,T1.isRetryableWriteError)(Y)){x$.WriteConcern.apply(A,{wtimeoutMS:1e4,...B,w:"majority"}),this.unpin({force:!0});try{await(0,CW.executeOperation)(this.client,new WM.RunCommandOperation(new C4.MongoDBNamespace("admin"),A,{session:this,readPreference:HM.ReadPreference.primary,bypassPinningCheck:!0}),X);return}catch(D){if(X61(D))D.addErrorLabel(T1.MongoErrorLabel.UnknownTransactionCommitResult);if(J61(D))this.unpin({error:D});throw D}}if(X61(Y))Y.addErrorLabel(T1.MongoErrorLabel.UnknownTransactionCommitResult);if(J61(Y))this.unpin({error:Y});throw Y}finally{this.transaction.transition(k0.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(F){if(this.transaction.state===k0.TxnState.NO_TRANSACTION)throw new T1.MongoTransactionError("No transaction started");if(this.transaction.state===k0.TxnState.STARTING_TRANSACTION){this.transaction.transition(k0.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===k0.TxnState.TRANSACTION_ABORTED)throw new T1.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===k0.TxnState.TRANSACTION_COMMITTED||this.transaction.state===k0.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new T1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let A={abortTransaction:1},$=typeof F?.timeoutMS==="number"?F.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,B=$!=null?KM.TimeoutContext.create({timeoutMS:$,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,J=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(J!=null&&$==null)x$.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...J});if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let X=new WM.RunCommandOperation(new C4.MongoDBNamespace("admin"),A,{session:this,readPreference:HM.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,CW.executeOperation)(this.client,X,B),this.unpin();return}catch(Y){if(this.unpin(),Y.name==="MongoRuntimeError")throw Y;if(F?.throwTimeout&&Y.name==="MongoOperationTimeoutError")throw Y;if(Y instanceof T1.MongoError&&(0,T1.isRetryableWriteError)(Y))try{await(0,CW.executeOperation)(this.client,X,B);return}catch(D){if(D.name==="MongoRuntimeError")throw D;if(F?.throwTimeout&&D.name==="MongoOperationTimeoutError")throw D}}finally{if(this.transaction.transition(k0.TxnState.TRANSACTION_ABORTED),this.loadBalanced)PW(this,{force:!1})}}toBSON(){throw new T1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(F,A){let B=A?.timeoutMS??this.timeoutMS??null;this.timeoutContext=B!=null?KM.TimeoutContext.create({timeoutMS:B,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let J=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,C4.now)(),X=!1,Y;try{while(!X){this.startTransaction(A);try{let D=F(this);if(!(0,C4.isPromiseLike)(D))throw new T1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(Y=await D,this.transaction.state===k0.TxnState.NO_TRANSACTION||this.transaction.state===k0.TxnState.TRANSACTION_COMMITTED||this.transaction.state===k0.TxnState.TRANSACTION_ABORTED)return Y}catch(D){if(!(D instanceof T1.MongoError)||D instanceof T1.MongoInvalidArgumentError)throw await this.abortTransaction(),D;if(this.transaction.state===k0.TxnState.STARTING_TRANSACTION||this.transaction.state===k0.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if(D.hasErrorLabel(T1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,C4.now)()-J<120000))continue;throw D}while(!X)try{await this.commitTransaction(),X=!0}catch(D){if(!MW(D)&&D.hasErrorLabel(T1.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,C4.now)()-J<120000))continue;if(D.hasErrorLabel(T1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,C4.now)()-J<120000))break;throw D}}return Y}finally{this.timeoutContext=null}}}G61.ClientSession=jW;(0,Bn1.configureResourceManagement)(jW.prototype);var Jn1=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function J61(F){if(F instanceof T1.MongoError){if((0,T1.isRetryableWriteError)(F)||F instanceof T1.MongoWriteConcernError||MW(F)){if(D61(F))return!0}else if(F.hasErrorLabel(T1.MongoErrorLabel.TransientTransactionError))return!0}return!1}function X61(F){let A=(0,T1.isRetryableWriteError)(F);return A||=F instanceof T1.MongoWriteConcernError,A||=MW(F),A&&=D61(F),A}function D61(F){let A=F instanceof T1.MongoServerError&&F.codeName&&Jn1.has(F.codeName);return MW(F)||!A&&F.code!==T1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&F.code!==T1.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function PW(F,A){let $=F.pinnedConnection,B=A?.error;if(F.inTransaction()&&B&&B instanceof T1.MongoError&&B.hasErrorLabel(T1.MongoErrorLabel.TransientTransactionError))return;let J=F.client.topology;if($&&J!=null){let Y=Array.from(J.s.servers.values())[0];if(A?.error==null||A?.force){if(Y.pool.checkIn($),F.pinnedConnection=void 0,$.emit(Y61.UNPINNED,F.transaction.state!==k0.TxnState.NO_TRANSACTION?RW.ConnectionPoolMetrics.TXN:RW.ConnectionPoolMetrics.CURSOR),A?.forceClear)Y.pool.clear({serviceId:$.serviceId})}}}function MW(F){if(F==null||!(F instanceof T1.MongoServerError))return!1;return F.code===T1.MONGODB_ERROR_CODES.MaxTimeMSExpired||F.writeConcernError?.code===T1.MONGODB_ERROR_CODES.MaxTimeMSExpired}class TW{constructor(F){if(F!=null){let A=Buffer.allocUnsafe(16);A.set(F.id.id.buffer),this.id={id:new NW.Binary(A,F.id.id.sub_type)},this.lastUse=F.lastUse,this.txnNumber=F.txnNumber,this.isDirty=F.isDirty;return}this.id={id:new NW.Binary((0,C4.uuidV4)(),NW.Binary.SUBTYPE_UUID)},this.lastUse=(0,C4.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(F){return Math.round((0,C4.calculateDurationInMs)(this.lastUse)%86400000%3600000/60000)>F-1}}G61.ServerSession=TW;class QM{constructor(F){if(F==null)throw new T1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=F,this.sessions=new C4.List}acquire(){let F=this.client.topology?.logicalSessionTimeoutMinutes??10,A=null;while(this.sessions.length>0){let $=this.sessions.shift();if($!=null&&(!!this.client.topology?.loadBalanced||!$.hasTimedOut(F))){A=$;break}}if(A==null)A=new TW;return A}release(F){let A=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!A)this.sessions.unshift(F);if(!A)return;if(this.sessions.prune(($)=>$.hasTimedOut(A)),!F.hasTimedOut(A)){if(F.isDirty)return;this.sessions.unshift(F)}}}G61.ServerSessionPool=QM;function Xn1(F,A,$){if(F.hasEnded)return new T1.MongoExpiredSessionError;let B=F.serverSession;if(B==null)return new T1.MongoRuntimeError("Unable to acquire server session");if($.writeConcern?.w===0){if(F&&F.explicit)return new T1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}B.lastUse=(0,C4.now)(),A.lsid=B.id;let J=F.inTransaction()||(0,k0.isTransactionCommand)(A);if(!!$.willRetryWrite||J)B.txnNumber+=F.txnNumberIncrement,F.txnNumberIncrement=0,A.txnNumber=NW.Long.fromNumber(B.txnNumber);if(!J){if(F.transaction.state!==k0.TxnState.NO_TRANSACTION)F.transaction.transition(k0.TxnState.NO_TRANSACTION);if(F.supports.causalConsistency&&F.operationTime&&(0,C4.commandSupportsReadConcern)(A))A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime});else if(F.snapshotEnabled){if(A.readConcern=A.readConcern||{level:$n1.ReadConcernLevel.snapshot},F.snapshotTime!=null)Object.assign(A.readConcern,{atClusterTime:F.snapshotTime})}return}if(A.autocommit=!1,F.transaction.state===k0.TxnState.STARTING_TRANSACTION){F.transaction.transition(k0.TxnState.TRANSACTION_IN_PROGRESS),A.startTransaction=!0;let Y=F.transaction.options.readConcern||F?.clientOptions?.readConcern;if(Y)A.readConcern=Y;if(F.supports.causalConsistency&&F.operationTime)A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime})}return}function Yn1(F,A){if(A.$clusterTime)(0,qM._advanceClusterTime)(F,A.$clusterTime);if(A.operationTime&&F&&F.supports.causalConsistency)F.advanceOperationTime(A.operationTime);if(A.recoveryToken&&F&&F.inTransaction())F.transaction._recoveryToken=A.recoveryToken;if(F?.snapshotEnabled&&F.snapshotTime==null){let $=A.atClusterTime;if($)F.snapshotTime=$}}});var CM=Q((Q61)=>{Object.defineProperty(Q61,"__esModule",{value:!0});Q61.SENSITIVE_COMMANDS=Q61.CommandFailedEvent=Q61.CommandSucceededEvent=Q61.CommandStartedEvent=void 0;var pY=T6(),W61=W1(),VM=gY();class H61{constructor(F,A,$){this.name=pY.COMMAND_STARTED;let B=wM(A),J=EM(B),{address:X,connectionId:Y,serviceId:D}=IM(F);if(Q61.SENSITIVE_COMMANDS.has(J))this.commandObj={},this.commandObj[J]=!0;this.address=X,this.connectionId=Y,this.serviceId=D,this.requestId=A.requestId,this.databaseName=A.databaseName,this.commandName=J,this.command=LM(J,B,B),this.serverConnectionId=$}get hasServiceId(){return!!this.serviceId}}Q61.CommandStartedEvent=H61;class K61{constructor(F,A,$,B,J){this.name=pY.COMMAND_SUCCEEDED;let X=wM(A),Y=EM(X),{address:D,connectionId:G,serviceId:Z}=IM(F);this.address=D,this.connectionId=G,this.serviceId=Z,this.requestId=A.requestId,this.commandName=Y,this.duration=(0,W61.calculateDurationInMs)(B),this.reply=LM(Y,X,Kn1($)),this.serverConnectionId=J,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}Q61.CommandSucceededEvent=K61;class q61{constructor(F,A,$,B,J){this.name=pY.COMMAND_FAILED;let X=wM(A),Y=EM(X),{address:D,connectionId:G,serviceId:Z}=IM(F);this.address=D,this.connectionId=G,this.serviceId=Z,this.requestId=A.requestId,this.commandName=Y,this.duration=(0,W61.calculateDurationInMs)(B),this.failure=LM(Y,X,$),this.serverConnectionId=J,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}Q61.CommandFailedEvent=q61;Q61.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var Wn1=new Set(["hello",pY.LEGACY_HELLO_COMMAND,pY.LEGACY_HELLO_COMMAND_CAMEL_CASE]),EM=(F)=>Object.keys(F)[0],Hn1=(F)=>F.ns.split(".")[1],LM=(F,A,$)=>Q61.SENSITIVE_COMMANDS.has(F)||Wn1.has(F)&&A.speculativeAuthenticate?{}:$,U61={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},z61={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function wM(F){if(F instanceof VM.OpMsgRequest){let B={...F.command};if(B.ops instanceof VM.DocumentSequence)B.ops=B.ops.documents;if(B.nsInfo instanceof VM.DocumentSequence)B.nsInfo=B.nsInfo.documents;return B}if(F.query?.$query){let B;if(F.ns==="admin.$cmd")B=Object.assign({},F.query.$query);else B={find:Hn1(F)},Object.keys(U61).forEach((J)=>{if(F.query[J]!=null)B[U61[J]]={...F.query[J]}});return Object.keys(z61).forEach((J)=>{let X=J;if(F[X]!=null)B[z61[X]]=F[X]}),B}let A={},$={...F};if(F.query)A={...F.query},$.query=A;return F.query?A:$}function Kn1(F){if(!F)return F;return F.result?F.result:F}function IM(F){let A;if("id"in F)A=F.id;return{address:F.address,serviceId:F.serviceId,connectionId:A}}});var iY=Q((w61)=>{Object.defineProperty(w61,"__esModule",{value:!0});w61.ServerDescription=void 0;w61.parseServerType=E61;w61.compareTopologyVersion=L61;var _$=Y0(),En1=B1(),y$=W1(),y6=D9(),Ln1=new Set([y6.ServerType.RSPrimary,y6.ServerType.Standalone,y6.ServerType.Mongos,y6.ServerType.LoadBalancer]),wn1=new Set([y6.ServerType.RSPrimary,y6.ServerType.RSSecondary,y6.ServerType.Mongos,y6.ServerType.Standalone,y6.ServerType.LoadBalancer]);class V61{constructor(F,A,$={}){if(F==null||F==="")throw new En1.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof F==="string"?y$.HostAddress.fromString(F).toString():F.toString(),this.type=E61(A,$),this.hosts=A?.hosts?.map((B)=>B.toLowerCase())??[],this.passives=A?.passives?.map((B)=>B.toLowerCase())??[],this.arbiters=A?.arbiters?.map((B)=>B.toLowerCase())??[],this.tags=A?.tags??{},this.minWireVersion=A?.minWireVersion??0,this.maxWireVersion=A?.maxWireVersion??0,this.roundTripTime=$?.roundTripTime??-1,this.minRoundTripTime=$?.minRoundTripTime??0,this.lastUpdateTime=(0,y$.now)(),this.lastWriteDate=A?.lastWrite?.lastWriteDate??0,this.error=$.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??A?.topologyVersion??null,this.setName=A?.setName??null,this.setVersion=A?.setVersion??null,this.electionId=A?.electionId??null,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=A?.maxMessageSizeBytes??null,this.maxWriteBatchSize=A?.maxWriteBatchSize??null,this.maxBsonObjectSize=A?.maxBsonObjectSize??null,this.primary=A?.primary??null,this.me=A?.me?.toLowerCase()??null,this.$clusterTime=A?.$clusterTime??null,this.iscryptd=Boolean(A?.iscryptd)}get hostAddress(){return y$.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===y6.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return wn1.has(this.type)}get isWritable(){return Ln1.has(this.type)}get host(){let F=`:${this.port}`.length;return this.address.slice(0,-F)}get port(){let F=this.address.split(":").pop();return F?Number.parseInt(F,10):27017}equals(F){let A=this.topologyVersion===F?.topologyVersion||L61(this.topologyVersion,F?.topologyVersion)===0,$=this.electionId!=null&&F?.electionId!=null?(0,y$.compareObjectId)(this.electionId,F.electionId)===0:this.electionId===F?.electionId;return F!=null&&F.iscryptd===this.iscryptd&&(0,y$.errorStrictEqual)(this.error,F.error)&&this.type===F.type&&this.minWireVersion===F.minWireVersion&&(0,y$.arrayStrictEqual)(this.hosts,F.hosts)&&In1(this.tags,F.tags)&&this.setName===F.setName&&this.setVersion===F.setVersion&&$&&this.primary===F.primary&&this.logicalSessionTimeoutMinutes===F.logicalSessionTimeoutMinutes&&A}}w61.ServerDescription=V61;function E61(F,A){if(A?.loadBalanced)return y6.ServerType.LoadBalancer;if(!F||!F.ok)return y6.ServerType.Unknown;if(F.isreplicaset)return y6.ServerType.RSGhost;if(F.msg&&F.msg==="isdbgrid")return y6.ServerType.Mongos;if(F.setName)if(F.hidden)return y6.ServerType.RSOther;else if(F.isWritablePrimary)return y6.ServerType.RSPrimary;else if(F.secondary)return y6.ServerType.RSSecondary;else if(F.arbiterOnly)return y6.ServerType.RSArbiter;else return y6.ServerType.RSOther;return y6.ServerType.Standalone}function In1(F,A){let $=Object.keys(F),B=Object.keys(A);return $.length===B.length&&$.every((J)=>A[J]===F[J])}function L61(F,A){if(F==null||A==null)return-1;if(!F.processId.equals(A.processId))return-1;let $=typeof F.counter==="bigint"?_$.Long.fromBigInt(F.counter):_$.Long.isLong(F.counter)?F.counter:_$.Long.fromNumber(F.counter),B=typeof A.counter==="bigint"?_$.Long.fromBigInt(A.counter):_$.Long.isLong(A.counter)?A.counter:_$.Long.fromNumber(A.counter);return $.compare(B)}});var R61=Q((N61)=>{Object.defineProperty(N61,"__esModule",{value:!0});N61.StreamDescription=void 0;var Pn1=Y0(),Rn1=D9(),jn1=iY(),Mn1=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class C61{constructor(F,A){this.hello=null,this.address=F,this.type=Rn1.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes,this.loadBalanced=!!A?.loadBalanced,this.compressors=A&&A.compressors&&Array.isArray(A.compressors)?A.compressors:[],this.serverConnectionId=null}receiveResponse(F){if(F==null)return;if(this.hello=F,this.type=(0,jn1.parseServerType)(F),"connectionId"in F)this.serverConnectionId=this.parseServerConnectionID(F.connectionId);else this.serverConnectionId=null;for(let A of Mn1){if(F[A]!=null)this[A]=F[A];if("__nodejs_mock_server__"in F)this.__nodejs_mock_server__=F.__nodejs_mock_server__}if(F.compression)this.compressor=this.compressors.filter((A)=>F.compression?.includes(A))[0]}parseServerConnectionID(F){return Pn1.Long.isLong(F)?F.toBigInt():BigInt(F)}}N61.StreamDescription=C61});var M61=Q((j61)=>{Object.defineProperty(j61,"__esModule",{value:!0});j61.onData=Tn1;var aY=W1();function Tn1(F,{timeoutContext:A,signal:$}){$?.throwIfAborted();let B=new aY.List,J=new aY.List,X=null,Y=!1,D={next(){let H=B.shift();if(H!=null)return Promise.resolve({value:H,done:!1});if(X!=null){let E=Promise.reject(X);return X=null,E}if(Y)return W();let{promise:K,resolve:q,reject:V}=(0,aY.promiseWithResolvers)();return J.push({resolve:q,reject:V}),K},return(){return W()},throw(H){return z(H),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await W()}};F.on("data",U),F.on("error",z);let G=(0,aY.addAbortListener)($,function(){z(this.reason)}),Z=A?.timeoutForSocketRead;return Z?.throwIfExpired(),Z?.then(void 0,z),D;function U(H){let K=J.shift();if(K!=null)K.resolve({value:H,done:!1});else B.push(H)}function z(H){let K=J.shift();if(K!=null)K.reject(H);else X=H;W()}function W(){F.off("data",U),F.off("error",z),G?.[aY.kDispose](),Y=!0,Z?.clear();let H={value:void 0,done:Y};for(let K of J)K.resolve(H);return Promise.resolve(H)}}});var PM=Q((f61)=>{Object.defineProperty(f61,"__esModule",{value:!0});f61.TopologyDescription=void 0;var On1=Y0(),SW=f8(),OW=B1(),NM=W1(),$0=D9(),i8=iY(),Sn1=SW.MIN_SUPPORTED_SERVER_VERSION,un1=SW.MAX_SUPPORTED_SERVER_VERSION,T61=SW.MIN_SUPPORTED_WIRE_VERSION,k61=SW.MAX_SUPPORTED_WIRE_VERSION,fn1=new Set([$0.ServerType.Mongos,$0.ServerType.Unknown]),O61=new Set([$0.ServerType.Mongos,$0.ServerType.Standalone]),S61=new Set([$0.ServerType.RSSecondary,$0.ServerType.RSArbiter,$0.ServerType.RSOther]);class nY{constructor(F,A=null,$=null,B=null,J=null,X=null,Y=null){Y=Y??{},this.type=F??$0.TopologyType.Unknown,this.servers=A??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=Y.heartbeatFrequencyMS??0,this.localThresholdMS=Y.localThresholdMS??15,this.setName=$??null,this.maxElectionId=J??null,this.maxSetVersion=B??null,this.commonWireVersion=X??0;for(let D of this.servers.values()){if(D.type===$0.ServerType.Unknown||D.type===$0.ServerType.LoadBalancer)continue;if(D.minWireVersion>k61)this.compatible=!1,this.compatibilityError=`Server at ${D.address} requires wire version ${D.minWireVersion}, but this version of the driver only supports up to ${k61} (MongoDB ${un1})`;if(D.maxWireVersion<T61){this.compatible=!1,this.compatibilityError=`Server at ${D.address} reports wire version ${D.maxWireVersion}, but this version of the driver requires at least ${T61} (MongoDB ${Sn1}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,D]of this.servers)if(D.isReadable){if(D.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=D.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,D.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(F,A=0){let $=F.hostnames(),B=new Set(this.servers.keys()),J=new Set($),X=new Set;for(let D of B)if(J.delete(D),!$.has(D))X.add(D);if(J.size===0&&X.size===0)return this;let Y=new Map(this.servers);for(let D of X)Y.delete(D);if(J.size>0){if(A===0)for(let D of J)Y.set(D,new i8.ServerDescription(D));else if(Y.size<A){let D=(0,NM.shuffle)(J,A-Y.size);for(let G of D)Y.set(G,new i8.ServerDescription(G))}}return new nY(this.type,Y,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(F){let A=F.address,{type:$,setName:B,maxSetVersion:J,maxElectionId:X,commonWireVersion:Y}=this,D=F.type,G=new Map(this.servers);if(F.maxWireVersion!==0)if(Y==null)Y=F.maxWireVersion;else Y=Math.min(Y,F.maxWireVersion);if(typeof F.setName==="string"&&typeof B==="string"&&F.setName!==B)if($===$0.TopologyType.Single)F=new i8.ServerDescription(A);else G.delete(A);if(G.set(A,F),$===$0.TopologyType.Single)return new nY($0.TopologyType.Single,G,B,J,X,Y,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if($===$0.TopologyType.Unknown)if(D===$0.ServerType.Standalone&&this.servers.size!==1)G.delete(A);else $=xn1(D);if($===$0.TopologyType.Sharded){if(!fn1.has(D))G.delete(A)}if($===$0.TopologyType.ReplicaSetNoPrimary){if(O61.has(D))G.delete(A);if(D===$0.ServerType.RSPrimary){let Z=u61(G,F,B,J,X);$=Z[0],B=Z[1],J=Z[2],X=Z[3]}else if(S61.has(D)){let Z=gn1(G,F,B);$=Z[0],B=Z[1]}}if($===$0.TopologyType.ReplicaSetWithPrimary)if(O61.has(D))G.delete(A),$=QF(G);else if(D===$0.ServerType.RSPrimary){let Z=u61(G,F,B,J,X);$=Z[0],B=Z[1],J=Z[2],X=Z[3]}else if(S61.has(D))$=bn1(G,F,B);else $=QF(G);return new nY($,G,B,J,X,Y,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let F=Array.from(this.servers.values()).filter((A)=>A.error);if(F.length>0)return F[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((F)=>F.type!==$0.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((F)=>F.isDataBearing)}hasServer(F){return this.servers.has(F)}toJSON(){return On1.EJSON.serialize(this)}}f61.TopologyDescription=nY;function xn1(F){switch(F){case $0.ServerType.Standalone:return $0.TopologyType.Single;case $0.ServerType.Mongos:return $0.TopologyType.Sharded;case $0.ServerType.RSPrimary:return $0.TopologyType.ReplicaSetWithPrimary;case $0.ServerType.RSOther:case $0.ServerType.RSSecondary:return $0.TopologyType.ReplicaSetNoPrimary;default:return $0.TopologyType.Unknown}}function u61(F,A,$=null,B=null,J=null){let X=(G,Z,U)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${G.setVersion}, server electionId: ${G.electionId}, topology setVersion: ${Z}, topology electionId: ${U}`};if($=$||A.setName,$!==A.setName)return F.delete(A.address),[QF(F),$,B,J];if(A.maxWireVersion>=17){let G=(0,NM.compareObjectId)(J,A.electionId),Z=G===0,U=G===-1,z=(B??-1)<=(A.setVersion??-1);if(U||Z&&z)J=A.electionId,B=A.setVersion;else return F.set(A.address,new i8.ServerDescription(A.address,void 0,{error:new OW.MongoStalePrimaryError(X(A,B,J))})),[QF(F),$,B,J]}else{let G=A.electionId?A.electionId:null;if(A.setVersion&&G){if(B&&J){if(B>A.setVersion||(0,NM.compareObjectId)(J,G)>0)return F.set(A.address,new i8.ServerDescription(A.address,void 0,{error:new OW.MongoStalePrimaryError(X(A,B,J))})),[QF(F),$,B,J]}J=A.electionId}if(A.setVersion!=null&&(B==null||A.setVersion>B))B=A.setVersion}for(let[G,Z]of F)if(Z.type===$0.ServerType.RSPrimary&&Z.address!==A.address){F.set(G,new i8.ServerDescription(Z.address,void 0,{error:new OW.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}A.allHosts.forEach((G)=>{if(!F.has(G))F.set(G,new i8.ServerDescription(G))});let Y=Array.from(F.keys()),D=A.allHosts;return Y.filter((G)=>D.indexOf(G)===-1).forEach((G)=>{F.delete(G)}),[QF(F),$,B,J]}function bn1(F,A,$=null){if($==null)throw new OW.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if($!==A.setName||A.me&&A.address!==A.me)F.delete(A.address);return QF(F)}function gn1(F,A,$=null){let B=$0.TopologyType.ReplicaSetNoPrimary;if($=$??A.setName,$!==A.setName)return F.delete(A.address),[B,$];if(A.allHosts.forEach((J)=>{if(!F.has(J))F.set(J,new i8.ServerDescription(J))}),A.me&&A.address!==A.me)F.delete(A.address);return[B,$]}function QF(F){for(let A of F.values())if(A.type===$0.ServerType.RSPrimary)return $0.TopologyType.ReplicaSetWithPrimary;return $0.TopologyType.ReplicaSetNoPrimary}});var _61=Q((g61)=>{Object.defineProperty(g61,"__esModule",{value:!0});g61.getReadPreference=vn1;g61.isSharded=hn1;var _n1=B1(),RM=J4(),b61=D9(),yn1=PM();function vn1(F){let A=F?.readPreference??RM.ReadPreference.primary;if(typeof A==="string")A=RM.ReadPreference.fromString(A);if(!(A instanceof RM.ReadPreference))throw new _n1.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return A}function hn1(F){if(F==null)return!1;if(F.description&&F.description.type===b61.ServerType.Mongos)return!0;if(F.description&&F.description instanceof yn1.TopologyDescription)return Array.from(F.description.servers.values()).some(($)=>$.type===b61.ServerType.Mongos);return!1}});var fW=Q((c61)=>{Object.defineProperty(c61,"__esModule",{value:!0});c61.CryptoConnection=c61.SizedMessageTransform=c61.Connection=void 0;c61.hasSessionSupport=sn1;var cn1=x("stream"),m61=x("timers"),ln1=Y0(),a8=T6(),D6=B1(),y61=_8(),pn1=z9(),in1=J4(),an1=D9(),v61=b$(),h61=n6(),W9=W1(),jM=CM(),uW=gY(),nn1=R61(),rn1=_Y(),tn1=M61(),rY=q0(),MM=_61();function sn1(F){return F.description.logicalSessionTimeoutMinutes!=null}function on1(F,A){if(A.proxyHost)return A.hostAddress.toString();let{remoteAddress:$,remotePort:B}=F;if(typeof $==="string"&&typeof B==="number")return W9.HostAddress.fromHostPort($,B).toString();return(0,W9.uuidV4)().toString("hex")}class N4 extends pn1.TypedEventEmitter{constructor(F,A){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",W9.noop),this.socket=F,this.id=A.id,this.address=on1(F,A),this.socketTimeoutMS=A.socketTimeoutMS??0,this.monitorCommands=A.monitorCommands,this.serverApi=A.serverApi,this.mongoLogger=A.mongoLogger,this.established=!1,this.description=new nn1.StreamDescription(this.address,A),this.generation=A.generation,this.lastUseTime=(0,W9.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new TM({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(F){this.description.receiveResponse(F),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,W9.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,W9.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(y61.MongoLoggableComponent.COMMAND,y61.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,W9.now)()}onSocketError(F){this.onError(new D6.MongoNetworkError(F.message,{cause:F}))}onTransformError(F){this.onError(F)}onError(F){this.cleanup(F)}onClose(){let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new D6.MongoNetworkError(F))}onTimeout(){this.delayedTimeoutId=(0,m61.setTimeout)(()=>{let F=`connection ${this.id} to ${this.address} timed out`,A=this.hello==null;this.cleanup(new D6.MongoNetworkTimeoutError(F,{beforeHandshake:A}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(N4.PINNED),this.removeAllListeners(N4.UNPINNED);let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new D6.MongoNetworkError(F))}cleanup(F){if(this.closed)return;this.socket.destroy(),this.error=F,this.dataEvents?.throw(F).then(void 0,W9.squashError),this.closed=!0,this.emit(N4.CLOSE)}prepareCommand(F,A,$){let B={...A},J=(0,MM.getReadPreference)($),X=$?.session,Y=this.clusterTime;if(this.serverApi){let{version:Z,strict:U,deprecationErrors:z}=this.serverApi;if(B.apiVersion=Z,U!=null)B.apiStrict=U;if(z!=null)B.apiDeprecationErrors=z}if(this.hasSessionSupport&&X){if(X.clusterTime&&Y&&X.clusterTime.clusterTime.greaterThan(Y.clusterTime))Y=X.clusterTime;let Z=(0,v61.applySession)(X,B,$);if(Z)throw Z}else if(X?.explicit)throw new D6.MongoCompatibilityError("Current topology does not support sessions");if(Y)B.$clusterTime=Y;if(this.description.type!==an1.ServerType.Standalone){if(!(0,MM.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&$.directConnection===!0&&J?.mode==="primary")B.$readPreference=in1.ReadPreference.primaryPreferred.toJSON();else if((0,MM.isSharded)(this)&&!this.supportsOpMsg&&J?.mode!=="primary")B={$query:B,$readPreference:J.toJSON()};else if(J?.mode!=="primary")B.$readPreference=J.toJSON()}let D={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:J.secondaryOk(),...$};return $.timeoutContext?.addMaxTimeMSToCommand(B,$),this.supportsOpMsg?new uW.OpMsgRequest(F,B,D):new uW.OpQueryRequest(F,B,D)}async*sendWire(F,A,$){this.throwIfAborted();let B=A.socketTimeoutMS??A?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(B);try{if(await this.writeCommand(F,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:A.timeoutContext,signal:A.signal}),A.noResponse||F.moreToCome){yield rY.MongoDBResponse.empty;return}if(this.throwIfAborted(),A.timeoutContext?.csotEnabled()&&A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new D6.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let J of this.readMany(A)){this.socket.setTimeout(0);let X=J.parse();yield($??rY.MongoDBResponse).make(X),this.throwIfAborted(),this.socket.setTimeout(B)}}finally{this.socket.setTimeout(0)}}async*sendCommand(F,A,$,B){$?.signal?.throwIfAborted();let J=this.prepareCommand(F.db,A,$),X=0;if(this.shouldEmitAndLogCommand)X=(0,W9.now)(),this.emitAndLogCommand(this.monitorCommands,N4.COMMAND_STARTED,J.databaseName,this.established,new jM.CommandStartedEvent(this,J,this.description.serverConnectionId));let Y=$.documentsReturnedIn==null||!$.raw?$:{...$,raw:!1,fieldsAsRaw:{[$.documentsReturnedIn]:!0}},D=void 0,G=void 0;try{this.throwIfAborted();for await(D of this.sendWire(J,$,B)){if(G=void 0,$.session!=null)(0,v61.updateSessionFromResponse)($.session,D);if(D.$clusterTime)this.clusterTime=D.$clusterTime,this.emit(N4.CLUSTER_TIME_RECEIVED,D.$clusterTime);if(D.ok===0){if($.timeoutContext?.csotEnabled()&&D.isMaxTimeExpiredError)throw new D6.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D6.MongoServerError(G??=D.toObject(Y))});throw new D6.MongoServerError(G??=D.toObject(Y))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,N4.COMMAND_SUCCEEDED,J.databaseName,this.established,new jM.CommandSucceededEvent(this,J,$.noResponse?void 0:J.moreToCome?{ok:1}:G??=D.toObject(Y),X,this.description.serverConnectionId));if(B==null)yield G??=D.toObject(Y);else yield D;this.throwIfAborted()}}catch(Z){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,N4.COMMAND_FAILED,J.databaseName,this.established,new jM.CommandFailedEvent(this,J,Z,X,this.description.serverConnectionId));throw Z}}async command(F,A,$={},B){this.throwIfAborted(),$.signal?.throwIfAborted();for await(let J of this.sendCommand(F,A,$,B)){if($.timeoutContext?.csotEnabled()){if(rY.MongoDBResponse.is(J)){if(J.isMaxTimeExpiredError)throw new D6.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D6.MongoServerError(J.toObject())})}else if(Array.isArray(J?.writeErrors)&&J.writeErrors.some((X)=>X?.code===D6.MONGODB_ERROR_CODES.MaxTimeMSExpired)||J?.writeConcernError?.code===D6.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new D6.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D6.MongoServerError(J)})}return J}throw new D6.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(F,A,$,B){(async()=>{this.throwIfAborted();for await(let X of this.sendCommand(F,A,$))B(void 0,X),this.throwIfAborted();throw new D6.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,B)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(F,A){let $=A.agreedCompressor==="none"||!uW.OpCompressedRequest.canCompress(F)?F:new uW.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0}),B=Buffer.concat(await $.toBin());if(A.timeoutContext?.csotEnabled()){if(A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new D6.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}if(this.socket.write(B))return;let J=(0,W9.once)(this.socket,"drain",A),X=A?.timeoutContext?.timeoutForSocketWrite,Y=X?Promise.race([J,X]):J;try{return await Y}catch(D){if(h61.TimeoutError.is(D)){let G=new D6.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(G),G}else if(D===A.signal?.reason)this.onError(D);throw D}finally{X?.clear()}}async*readMany(F){try{this.dataEvents=(0,tn1.onData)(this.messageStream,F),this.messageStream.resume();for await(let A of this.dataEvents){let $=await(0,rn1.decompressResponse)(A);if(yield $,!$.moreToCome)return}}catch(A){if(h61.TimeoutError.is(A)){let $=new D6.MongoOperationTimeoutError(`Timed out during socket read (${A.duration}ms)`);throw this.dataEvents=null,this.onError($),$}else if(A===F.signal?.reason)this.onError(A);throw A}finally{this.dataEvents=null,this.messageStream.pause()}}}c61.Connection=N4;N4.COMMAND_STARTED=a8.COMMAND_STARTED;N4.COMMAND_SUCCEEDED=a8.COMMAND_SUCCEEDED;N4.COMMAND_FAILED=a8.COMMAND_FAILED;N4.CLUSTER_TIME_RECEIVED=a8.CLUSTER_TIME_RECEIVED;N4.CLOSE=a8.CLOSE;N4.PINNED=a8.PINNED;N4.UNPINNED=a8.UNPINNED;class TM extends cn1.Transform{constructor({connection:F}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new W9.BufferPool,this.connection=F}_transform(F,A,$){if(this.connection.delayedTimeoutId!=null)(0,m61.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(F);while(this.bufferPool.length){let B=this.bufferPool.getInt32();if(B==null)break;if(B<0)return $(new D6.MongoParseError(`Message size cannot be negative: ${B}`));if(B>this.bufferPool.length)break;let J=this.bufferPool.read(B);if(!this.push(J))return $(new D6.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}$()}}c61.SizedMessageTransform=TM;class d61 extends N4{constructor(F,A){super(F,A);this.autoEncrypter=A.autoEncrypter}async command(F,A,$,B){let{autoEncrypter:J}=this;if(!J)throw new D6.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});if((0,W9.maxWireVersion)(this)===0)return await super.command(F,A,$,B);let Y=A.find||A.findAndModify?A.sort:null,D=A.createIndexes?A.indexes.map((W)=>W.key):null,G=await J.encrypt(F.toString(),A,$);if(Y!=null&&(A.find||A.findAndModify))G.sort=Y;if(D!=null&&A.createIndexes)for(let[W,H]of D.entries())G.indexes[W].key=H;let Z=await super.command(F,G,$,B??rY.MongoDBResponse),U=await J.decrypt(Z.toBytes(),$),z=B?.make(U)??(0,ln1.deserialize)(U,$);if(J[a8.kDecorateResult]){if(B==null)(0,W9.decorateDecryptionResult)(z,Z.toObject(),!0);else if(z instanceof rY.CursorResponse)z.encryptedResponse=Z}return z}}c61.CryptoConnection=d61});var uM=Q((s61)=>{Object.defineProperty(s61,"__esModule",{value:!0});s61.LEGAL_TCP_SOCKET_OPTIONS=s61.LEGAL_TLS_SOCKET_OPTIONS=void 0;s61.connect=Xr1;s61.makeConnection=n61;s61.performInitialHandshake=r61;s61.prepareHandshakeDocument=t61;s61.makeSocket=bW;var i61=x("net"),$r1=x("tls"),a61=T6(),Br1=Q2(),G6=B1(),kM=W1(),Jr1=v8(),xW=n2(),p61=fW(),v$=f8();async function Xr1(F){let A=null;try{let $=await bW(F);return A=n61(F,$),await r61(A,F),A}catch($){throw A?.destroy(),$}}function n61(F,A){let $=F.connectionType??p61.Connection;if(F.autoEncrypter)$=p61.CryptoConnection;return new $(A,F)}function Yr1(F,A){let $=Number(F.maxWireVersion),B=Number(F.minWireVersion),J=!Number.isNaN($)&&$>=v$.MIN_SUPPORTED_WIRE_VERSION,X=!Number.isNaN(B)&&B<=v$.MAX_SUPPORTED_WIRE_VERSION;if(J){if(X)return null;let D=`Server at ${A.hostAddress} reports minimum wire version ${JSON.stringify(F.minWireVersion)}, but this version of the Node.js Driver requires at most ${v$.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${v$.MAX_SUPPORTED_SERVER_VERSION})`;return new G6.MongoCompatibilityError(D)}let Y=`Server at ${A.hostAddress} reports maximum wire version ${JSON.stringify(F.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${v$.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${v$.MIN_SUPPORTED_SERVER_VERSION})`;return new G6.MongoCompatibilityError(Y)}async function r61(F,A){let $=A.credentials;if($){if($.mechanism!==xW.AuthMechanism.MONGODB_DEFAULT&&!A.authProviders.getOrCreateProvider($.mechanism,$.mechanismProperties))throw new G6.MongoInvalidArgumentError(`AuthMechanism '${$.mechanism}' not supported`)}let B=new Jr1.AuthContext(F,$,A);F.authContext=B;let J=await t61(B),X={...A,raw:!1};if(typeof A.connectTimeoutMS==="number")X.socketTimeoutMS=A.connectTimeoutMS;let Y=new Date().getTime(),D=await Z(J,X);if(!("isWritablePrimary"in D))D.isWritablePrimary=D[a61.LEGACY_HELLO_COMMAND];if(D.helloOk)F.helloOk=!0;let G=Yr1(D,A);if(G)throw G;if(A.loadBalanced){if(!D.serviceId)throw new G6.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(F.hello=D,F.lastHelloMS=new Date().getTime()-Y,!D.arbiterOnly&&$){B.response=D;let U=$.resolveAuthMechanism(D),z=A.authProviders.getOrCreateProvider(U.mechanism,U.mechanismProperties);if(!z)throw new G6.MongoInvalidArgumentError(`No AuthProvider for ${U.mechanism} defined.`);try{await z.auth(B)}catch(W){if(W instanceof G6.MongoError){if(W.addErrorLabel(G6.MongoErrorLabel.HandshakeError),(0,G6.needsRetryableWriteLabel)(W,D.maxWireVersion,F.description.type))W.addErrorLabel(G6.MongoErrorLabel.RetryableWriteError)}throw W}}F.established=!0;async function Z(U,z){try{return await F.command((0,kM.ns)("admin.$cmd"),U,z)}catch(W){if(W instanceof G6.MongoError)W.addErrorLabel(G6.MongoErrorLabel.HandshakeError);throw W}}}async function t61(F){let A=F.options,$=A.compressors?A.compressors:[],{serverApi:B}=F.connection,J=await A.extendedMetadata,X={[B?.version||A.loadBalanced===!0?"hello":a61.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:J,compression:$};if(A.loadBalanced===!0)X.loadBalanced=!0;let Y=F.credentials;if(Y){if(Y.mechanism===xW.AuthMechanism.MONGODB_DEFAULT&&Y.username){X.saslSupportedMechs=`${Y.source}.${Y.username}`;let G=F.options.authProviders.getOrCreateProvider(xW.AuthMechanism.MONGODB_SCRAM_SHA256,Y.mechanismProperties);if(!G)throw new G6.MongoInvalidArgumentError(`No AuthProvider for ${xW.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await G.prepare(X,F)}let D=F.options.authProviders.getOrCreateProvider(Y.mechanism,Y.mechanismProperties);if(!D)throw new G6.MongoInvalidArgumentError(`No AuthProvider for ${Y.mechanism} defined.`);return await D.prepare(X,F)}return X}s61.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];s61.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function OM(F){let A=F.hostAddress;if(!A)throw new G6.MongoInvalidArgumentError('Option "hostAddress" is required');let $={};for(let B of s61.LEGAL_TCP_SOCKET_OPTIONS)if(F[B]!=null)$[B]=F[B];if($.keepAliveInitialDelay??=120000,$.keepAlive=!0,$.noDelay=F.noDelay??!0,typeof A.socketPath==="string")return $.path=A.socketPath,$;else if(typeof A.host==="string")return $.host=A.host,$.port=A.port,$;else throw new G6.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(A)}`)}function Dr1(F){let A=OM(F);for(let $ of s61.LEGAL_TLS_SOCKET_OPTIONS)if(F[$]!=null)A[$]=F[$];if(F.existingSocket)A.socket=F.existingSocket;if(A.servername==null&&A.host&&!i61.isIP(A.host))A.servername=A.host;return A}async function bW(F){let A=F.tls??!1,$=F.connectTimeoutMS??30000,B=F.existingSocket,J;if(F.proxyHost!=null)return await Zr1({...F,connectTimeoutMS:$});if(A){let Z=$r1.connect(Dr1(F));if(typeof Z.disableRenegotiation==="function")Z.disableRenegotiation();J=Z}else if(B)J=B;else J=i61.createConnection(OM(F));J.setTimeout($);let X=null,{promise:Y,resolve:D,reject:G}=(0,kM.promiseWithResolvers)();if(B)D(J);else{let Z=performance.now(),U=A?"secureConnect":"connect";if(J.once(U,()=>D(J)).once("error",(z)=>G(new G6.MongoNetworkError(G6.MongoError.buildErrorMessage(z),{cause:z}))).once("timeout",()=>{G(new G6.MongoNetworkTimeoutError(`Socket '${U}' timed out after ${performance.now()-Z|0}ms (connectTimeoutMS: ${$})`))}).once("close",()=>G(new G6.MongoNetworkError(`Socket closed after ${performance.now()-Z|0} during connection establishment`))),F.cancellationToken!=null)X=()=>G(new G6.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-Z|0}`)),F.cancellationToken.once("cancel",X)}try{return J=await Y,J}catch(Z){throw J.destroy(),Z}finally{if(J.setTimeout(0),X!=null)F.cancellationToken?.removeListener("cancel",X)}}var tY=null;function Gr1(){if(tY==null){let F=(0,Br1.getSocks)();if("kModuleError"in F)throw F.kModuleError;tY=F}return tY}async function Zr1(F){let A=kM.HostAddress.fromHostPort(F.proxyHost??"",F.proxyPort??1080),$=await bW({...F,hostAddress:A,tls:!1,proxyHost:void 0}),B=OM(F);if(typeof B.host!=="string"||typeof B.port!=="number")throw new G6.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");tY??=Gr1();let J;try{J=(await tY.SocksClient.createConnection({existing_socket:$,timeout:F.connectTimeoutMS,command:"connect",destination:{host:B.host,port:B.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:F.proxyUsername||void 0,password:F.proxyPassword||void 0}})).socket}catch(X){throw new G6.MongoNetworkError(G6.MongoError.buildErrorMessage(X),{cause:X})}return await bW({...F,existingSocket:J,proxyHost:void 0})}});var gW=Q((G41)=>{Object.defineProperty(G41,"__esModule",{value:!0});G41.ServerHeartbeatFailedEvent=G41.ServerHeartbeatSucceededEvent=G41.ServerHeartbeatStartedEvent=G41.TopologyClosedEvent=G41.TopologyOpeningEvent=G41.TopologyDescriptionChangedEvent=G41.ServerClosedEvent=G41.ServerOpeningEvent=G41.ServerDescriptionChangedEvent=void 0;var k7=T6();class e61{constructor(F,A,$,B){this.name=k7.SERVER_DESCRIPTION_CHANGED,this.topologyId=F,this.address=A,this.previousDescription=$,this.newDescription=B}}G41.ServerDescriptionChangedEvent=e61;class F41{constructor(F,A){this.name=k7.SERVER_OPENING,this.topologyId=F,this.address=A}}G41.ServerOpeningEvent=F41;class A41{constructor(F,A){this.name=k7.SERVER_CLOSED,this.topologyId=F,this.address=A}}G41.ServerClosedEvent=A41;class $41{constructor(F,A,$){this.name=k7.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=F,this.previousDescription=A,this.newDescription=$}}G41.TopologyDescriptionChangedEvent=$41;class B41{constructor(F){this.name=k7.TOPOLOGY_OPENING,this.topologyId=F}}G41.TopologyOpeningEvent=B41;class J41{constructor(F){this.name=k7.TOPOLOGY_CLOSED,this.topologyId=F}}G41.TopologyClosedEvent=J41;class X41{constructor(F,A){this.name=k7.SERVER_HEARTBEAT_STARTED,this.connectionId=F,this.awaited=A}}G41.ServerHeartbeatStartedEvent=X41;class Y41{constructor(F,A,$,B){this.name=k7.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=F,this.duration=A,this.reply=$??{},this.awaited=B}}G41.ServerHeartbeatSucceededEvent=Y41;class D41{constructor(F,A,$,B){this.name=k7.SERVER_HEARTBEAT_FAILED,this.connectionId=F,this.duration=A,this.failure=$,this.awaited=B}}G41.ServerHeartbeatFailedEvent=D41});var xM=Q((I41)=>{Object.defineProperty(I41,"__esModule",{value:!0});I41.ConnectionPoolClearedEvent=I41.ConnectionCheckedInEvent=I41.ConnectionCheckedOutEvent=I41.ConnectionCheckOutFailedEvent=I41.ConnectionCheckOutStartedEvent=I41.ConnectionClosedEvent=I41.ConnectionReadyEvent=I41.ConnectionCreatedEvent=I41.ConnectionPoolClosedEvent=I41.ConnectionPoolReadyEvent=I41.ConnectionPoolCreatedEvent=I41.ConnectionPoolMonitoringEvent=void 0;var E2=T6(),fM=W1();class H9{constructor(F){this.time=new Date,this.address=F.address}}I41.ConnectionPoolMonitoringEvent=H9;class U41 extends H9{constructor(F){super(F);this.name=E2.CONNECTION_POOL_CREATED;let{maxConnecting:A,maxPoolSize:$,minPoolSize:B,maxIdleTimeMS:J,waitQueueTimeoutMS:X}=F.options;this.options={maxConnecting:A,maxPoolSize:$,minPoolSize:B,maxIdleTimeMS:J,waitQueueTimeoutMS:X}}}I41.ConnectionPoolCreatedEvent=U41;class z41 extends H9{constructor(F){super(F);this.name=E2.CONNECTION_POOL_READY}}I41.ConnectionPoolReadyEvent=z41;class W41 extends H9{constructor(F){super(F);this.name=E2.CONNECTION_POOL_CLOSED}}I41.ConnectionPoolClosedEvent=W41;class H41 extends H9{constructor(F,A){super(F);this.name=E2.CONNECTION_CREATED,this.connectionId=A.id}}I41.ConnectionCreatedEvent=H41;class K41 extends H9{constructor(F,A,$){super(F);this.name=E2.CONNECTION_READY,this.durationMS=(0,fM.now)()-$,this.connectionId=A.id}}I41.ConnectionReadyEvent=K41;class q41 extends H9{constructor(F,A,$,B){super(F);this.name=E2.CONNECTION_CLOSED,this.connectionId=A.id,this.reason=$,this.serviceId=A.serviceId,this.error=B??null}}I41.ConnectionClosedEvent=q41;class Q41 extends H9{constructor(F){super(F);this.name=E2.CONNECTION_CHECK_OUT_STARTED}}I41.ConnectionCheckOutStartedEvent=Q41;class V41 extends H9{constructor(F,A,$,B){super(F);this.name=E2.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,fM.now)()-$,this.reason=A,this.error=B}}I41.ConnectionCheckOutFailedEvent=V41;class E41 extends H9{constructor(F,A,$){super(F);this.name=E2.CONNECTION_CHECKED_OUT,this.durationMS=(0,fM.now)()-$,this.connectionId=A.id}}I41.ConnectionCheckedOutEvent=E41;class L41 extends H9{constructor(F,A){super(F);this.name=E2.CONNECTION_CHECKED_IN,this.connectionId=A.id}}I41.ConnectionCheckedInEvent=L41;class w41 extends H9{constructor(F,A={}){super(F);this.name=E2.CONNECTION_POOL_CLEARED,this.serviceId=A.serviceId,this.interruptInUseConnections=A.interruptInUseConnections}}I41.ConnectionPoolClearedEvent=w41});var gM=Q((j41)=>{Object.defineProperty(j41,"__esModule",{value:!0});j41.WaitQueueTimeoutError=j41.PoolClearedOnNetworkError=j41.PoolClearedError=j41.PoolClosedError=void 0;var _W=B1();class N41 extends _W.MongoDriverError{constructor(F){super("Attempted to check out a connection from closed connection pool");this.address=F.address}get name(){return"MongoPoolClosedError"}}j41.PoolClosedError=N41;class bM extends _W.MongoNetworkError{constructor(F,A){let $=A?A:`Connection pool for ${F.address} was cleared because another operation failed with: "${F.serverError?.message}"`;super($,F.serverError?{cause:F.serverError}:void 0);this.address=F.address,this.addErrorLabel(_W.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}}j41.PoolClearedError=bM;class P41 extends bM{constructor(F){super(F,`Connection to ${F.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}j41.PoolClearedOnNetworkError=P41;class R41 extends _W.MongoDriverError{constructor(F,A){super(F);this.address=A}get name(){return"MongoWaitQueueTimeoutError"}}j41.WaitQueueTimeoutError=R41});var S41=Q((k41)=>{Object.defineProperty(k41,"__esModule",{value:!0});k41.ConnectionPool=k41.PoolState=void 0;var h$=x("timers"),_9=T6(),L2=B1(),T41=z9(),_r1=n6(),O7=W1(),yr1=uM(),yW=fW(),P4=xM(),m$=gM(),vr1=UM();k41.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class E0 extends T41.TypedEventEmitter{constructor(F,A){super();if(this.on("error",O7.noop),this.options=Object.freeze({connectionType:yW.Connection,...A,maxPoolSize:A.maxPoolSize??100,minPoolSize:A.minPoolSize??0,maxConnecting:A.maxConnecting??2,maxIdleTimeMS:A.maxIdleTimeMS??0,waitQueueTimeoutMS:A.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:A.minPoolSizeCheckFrequencyMS??100,autoEncrypter:A.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new L2.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=k41.PoolState.paused,this.server=F,this.connections=new O7.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,O7.makeCounter)(1),this.cancellationToken=new T41.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new O7.List,this.metrics=new vr1.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(E0.CONNECTION_POOL_CREATED,new P4.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===k41.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==k41.PoolState.paused)return;this.poolState=k41.PoolState.ready,this.emitAndLog(E0.CONNECTION_POOL_READY,new P4.ConnectionPoolReadyEvent(this)),(0,h$.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut(F){let A=(0,O7.now)();this.emitAndLog(E0.CONNECTION_CHECK_OUT_STARTED,new P4.ConnectionCheckOutStartedEvent(this));let{promise:$,resolve:B,reject:J}=(0,O7.promiseWithResolvers)(),X=F.timeoutContext.connectionCheckoutTimeout,Y={resolve:B,reject:J,cancelled:!1,checkoutTime:A},D=(0,O7.addAbortListener)(F.signal,function(){Y.cancelled=!0,J(this.reason)});this.waitQueue.push(Y),process.nextTick(()=>this.processWaitQueue());try{return X?.throwIfExpired(),await(X?Promise.race([$,X]):$)}catch(G){if(_r1.TimeoutError.is(G)){X?.clear(),Y.cancelled=!0,this.emitAndLog(E0.CONNECTION_CHECK_OUT_FAILED,new P4.ConnectionCheckOutFailedEvent(this,"timeout",Y.checkoutTime));let Z=new m$.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if(F.timeoutContext.csotEnabled())throw new L2.MongoOperationTimeoutError("Timed out during connection checkout",{cause:Z});throw Z}throw G}finally{D?.[O7.kDispose](),X?.clear()}}checkIn(F){if(!this.checkedOut.has(F))return;let A=this.closed,$=this.connectionIsStale(F),B=!!(A||$||F.closed);if(!B)F.markAvailable(),this.connections.unshift(F);if(this.checkedOut.delete(F),this.emitAndLog(E0.CONNECTION_CHECKED_IN,new P4.ConnectionCheckedInEvent(this,F)),B){let J=F.closed?"error":A?"poolClosed":"stale";this.destroyConnection(F,J)}process.nextTick(()=>this.processWaitQueue())}clear(F={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:J}=F;if(!J)throw new L2.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let X=J.toHexString(),Y=this.serviceGenerations.get(X);if(Y==null)throw new L2.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(X,Y+1);this.emitAndLog(E0.CONNECTION_POOL_CLEARED,new P4.ConnectionPoolClearedEvent(this,{serviceId:J}));return}let A=F.interruptInUseConnections??!1,$=this.generation;this.generation+=1;let B=this.poolState===k41.PoolState.paused;if(this.poolState=k41.PoolState.paused,this.clearMinPoolSizeTimer(),!B)this.emitAndLog(E0.CONNECTION_POOL_CLEARED,new P4.ConnectionPoolClearedEvent(this,{interruptInUseConnections:A}));if(A)process.nextTick(()=>this.interruptInUseConnections($));this.processWaitQueue()}interruptInUseConnections(F){for(let A of this.checkedOut)if(A.generation<=F)A.onError(new m$.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let F of this.checkedOut)F.onError(new L2.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=k41.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let F of this.connections)this.emitAndLog(E0.CONNECTION_CLOSED,new P4.ConnectionClosedEvent(this,F,"poolClosed")),F.destroy();this.connections.clear(),this.emitAndLog(E0.CONNECTION_POOL_CLOSED,new P4.ConnectionPoolClosedEvent(this))}async reauthenticate(F){let A=F.authContext;if(!A)throw new L2.MongoRuntimeError("No auth context found on connection.");let $=A.credentials;if(!$)throw new L2.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let B=$.resolveAuthMechanism(F.hello),J=this.server.topology.client.s.authProviders.getOrCreateProvider(B.mechanism,B.mechanismProperties);if(!J)throw new L2.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${$.mechanism}`);await J.reauth(A);return}clearMinPoolSizeTimer(){let F=this.minPoolSizeTimer;if(F)(0,h$.clearTimeout)(F)}destroyConnection(F,A){this.emitAndLog(E0.CONNECTION_CLOSED,new P4.ConnectionClosedEvent(this,F,A)),F.destroy()}connectionIsStale(F){let A=F.serviceId;if(this.loadBalanced&&A){let $=A.toHexString(),B=this.serviceGenerations.get($);return F.generation!==B}return F.generation!==this.generation}connectionIsIdle(F){return!!(this.options.maxIdleTimeMS&&F.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(F){let A=this.connectionIsStale(F),$=this.connectionIsIdle(F);if(!A&&!$&&!F.closed)return!1;let B=F.closed?"error":A?"stale":"idle";return this.destroyConnection(F,B),!0}createConnection(F){let A={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let $=(0,O7.now)();this.emitAndLog(E0.CONNECTION_CREATED,new P4.ConnectionCreatedEvent(this,{id:A.id})),(0,yr1.connect)(A).then((B)=>{if(this.poolState!==k41.PoolState.ready){this.pending--,B.destroy(),F(this.closed?new m$.PoolClosedError(this):new m$.PoolClearedError(this));return}for(let J of[..._9.APM_EVENTS,yW.Connection.CLUSTER_TIME_RECEIVED])B.on(J,(X)=>this.emit(J,X));if(this.loadBalanced){B.on(yW.Connection.PINNED,(X)=>this.metrics.markPinned(X)),B.on(yW.Connection.UNPINNED,(X)=>this.metrics.markUnpinned(X));let J=B.serviceId;if(J){let X,Y=J.toHexString();if(X=this.serviceGenerations.get(Y))B.generation=X;else this.serviceGenerations.set(Y,0),B.generation=0}}B.markAvailable(),this.emitAndLog(E0.CONNECTION_READY,new P4.ConnectionReadyEvent(this,B,$)),this.pending--,F(void 0,B)},(B)=>{if(this.pending--,this.server.handleError(B),this.emitAndLog(E0.CONNECTION_CLOSED,new P4.ConnectionClosedEvent(this,{id:A.id,serviceId:void 0},"error",B)),B instanceof L2.MongoNetworkError||B instanceof L2.MongoServerError)B.connectionGeneration=A.generation;F(B??new L2.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let F=this.options.minPoolSize;if(this.poolState!==k41.PoolState.ready)return;if(this.connections.prune((A)=>this.destroyConnectionIfPerished(A)),this.totalConnectionCount<F&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((A,$)=>{if(!A&&$)this.connections.push($),process.nextTick(()=>this.processWaitQueue());if(this.poolState===k41.PoolState.ready)(0,h$.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,h$.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else(0,h$.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,h$.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let $=this.waitQueue.first();if(!$){this.waitQueue.shift();continue}if($.cancelled){this.waitQueue.shift();continue}if(this.poolState!==k41.PoolState.ready){let J=this.closed?"poolClosed":"connectionError",X=this.closed?new m$.PoolClosedError(this):new m$.PoolClearedError(this);this.emitAndLog(E0.CONNECTION_CHECK_OUT_FAILED,new P4.ConnectionCheckOutFailedEvent(this,J,$.checkoutTime,X)),this.waitQueue.shift(),$.reject(X);continue}if(!this.availableConnectionCount)break;let B=this.connections.shift();if(!B)break;if(!this.destroyConnectionIfPerished(B))this.checkedOut.add(B),this.emitAndLog(E0.CONNECTION_CHECKED_OUT,new P4.ConnectionCheckedOutEvent(this,B,$.checkoutTime)),this.waitQueue.shift(),$.resolve(B)}let{maxPoolSize:F,maxConnecting:A}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<A&&(F===0||this.totalConnectionCount<F)){let $=this.waitQueue.shift();if(!$||$.cancelled)continue;this.createConnection((B,J)=>{if($.cancelled){if(!B&&J)this.connections.push(J)}else if(B)this.emitAndLog(E0.CONNECTION_CHECK_OUT_FAILED,new P4.ConnectionCheckOutFailedEvent(this,"connectionError",$.checkoutTime,B)),$.reject(B);else if(J)this.checkedOut.add(J),this.emitAndLog(E0.CONNECTION_CHECKED_OUT,new P4.ConnectionCheckedOutEvent(this,J,$.checkoutTime)),$.resolve(J);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}k41.ConnectionPool=E0;E0.CONNECTION_POOL_CREATED=_9.CONNECTION_POOL_CREATED;E0.CONNECTION_POOL_CLOSED=_9.CONNECTION_POOL_CLOSED;E0.CONNECTION_POOL_CLEARED=_9.CONNECTION_POOL_CLEARED;E0.CONNECTION_POOL_READY=_9.CONNECTION_POOL_READY;E0.CONNECTION_CREATED=_9.CONNECTION_CREATED;E0.CONNECTION_READY=_9.CONNECTION_READY;E0.CONNECTION_CLOSED=_9.CONNECTION_CLOSED;E0.CONNECTION_CHECK_OUT_STARTED=_9.CONNECTION_CHECK_OUT_STARTED;E0.CONNECTION_CHECK_OUT_FAILED=_9.CONNECTION_CHECK_OUT_FAILED;E0.CONNECTION_CHECKED_OUT=_9.CONNECTION_CHECKED_OUT;E0.CONNECTION_CHECKED_IN=_9.CONNECTION_CHECKED_IN});var mM=Q((x41)=>{Object.defineProperty(x41,"__esModule",{value:!0});x41.Server=void 0;var hr1=fW(),mr1=S41(),dr1=gM(),r2=T6(),e0=B1(),cr1=z9(),lr1=PY(),vM=zM(),VF=W1(),u41=W3(),y0=D9(),pr1=dM(),hM=iY(),ir1=CY(),sY=(0,VF.makeStateMachine)({[y0.STATE_CLOSED]:[y0.STATE_CLOSED,y0.STATE_CONNECTING],[y0.STATE_CONNECTING]:[y0.STATE_CONNECTING,y0.STATE_CLOSING,y0.STATE_CONNECTED,y0.STATE_CLOSED],[y0.STATE_CONNECTED]:[y0.STATE_CONNECTED,y0.STATE_CLOSING,y0.STATE_CLOSED],[y0.STATE_CLOSING]:[y0.STATE_CLOSING,y0.STATE_CLOSED]});class x3 extends cr1.TypedEventEmitter{constructor(F,A,$){super();this.on("error",VF.noop),this.serverApi=$.serverApi;let B={hostAddress:A.hostAddress,...$};this.topology=F,this.pool=new mr1.ConnectionPool(this,B),this.s={description:A,options:$,state:y0.STATE_CLOSED,operationCount:0};for(let J of[...r2.CMAP_EVENTS,...r2.APM_EVENTS])this.pool.on(J,(X)=>this.emit(J,X));if(this.pool.on(hr1.Connection.CLUSTER_TIME_RECEIVED,(J)=>{this.clusterTime=J}),this.loadBalanced){this.monitor=null;return}this.monitor=new pr1.Monitor(this,this.s.options);for(let J of r2.HEARTBEAT_EVENTS)this.monitor.on(J,(X)=>this.emit(J,X));this.monitor.on("resetServer",(J)=>_M(this,J)),this.monitor.on(x3.SERVER_HEARTBEAT_SUCCEEDED,(J)=>{if(this.emit(x3.DESCRIPTION_RECEIVED,new hM.ServerDescription(this.description.hostAddress,J.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===y0.STATE_CONNECTING)sY(this,y0.STATE_CONNECTED),this.emit(x3.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(F){this.topology.clusterTime=F}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===y0.TopologyType.LoadBalanced}connect(){if(this.s.state!==y0.STATE_CLOSED)return;if(sY(this,y0.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else sY(this,y0.STATE_CONNECTED),this.emit(x3.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===y0.STATE_CLOSED)return;if(sY(this,y0.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),sY(this,y0.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(F,A){if(this.s.state===y0.STATE_CLOSING||this.s.state===y0.STATE_CLOSED)throw new e0.MongoServerClosedError;let $=F.session,B=$?.pinnedConnection;if(this.incrementOperationCount(),B==null)try{B=await this.pool.checkOut({timeoutContext:A,signal:F.options.signal})}catch(U){if(this.decrementOperationCount(),!(U instanceof dr1.PoolClearedError))this.handleError(U);throw U}let J=null,X=()=>{if(this.decrementOperationCount(),$?.pinnedConnection!==B)if(J!=null){let U=()=>{this.pool.checkIn(B)};J.then(U,U)}else this.pool.checkIn(B)},Y;try{Y=F.buildCommand(B,$)}catch(U){throw X(),U}let D=F.buildOptions(A),G=F.ns;if(this.loadBalanced&&ar1(Y,$)&&!$?.pinnedConnection)$?.pin(B);if(D.directConnection=this.topology.s.options.directConnection,F instanceof lr1.AggregateOperation&&F.hasWriteStage&&(0,VF.maxWireVersion)(B)<ir1.MIN_SECONDARY_WRITE_WIRE_VERSION)delete D.readPreference;if(this.description.iscryptd)D.omitMaxTimeMS=!0;try{try{let U=await B.command(G,Y,D,F.SERVER_COMMAND_RESPONSE_TYPE);return(0,u41.throwIfWriteConcernError)(U),U}catch(U){throw this.decorateCommandError(B,Y,D,U)}}catch(U){if(U instanceof e0.MongoError&&U.code===e0.MONGODB_ERROR_CODES.Reauthenticate){J=this.pool.reauthenticate(B),J.then(void 0,(z)=>{J=null,(0,VF.squashError)(z)}),await(0,VF.abortable)(J,D),J=null;try{let z=await B.command(G,Y,D,F.SERVER_COMMAND_RESPONSE_TYPE);return(0,u41.throwIfWriteConcernError)(z),z}catch(z){throw this.decorateCommandError(B,Y,D,z)}}else throw U}finally{X()}}handleError(F,A){if(!(F instanceof e0.MongoError))return;if(F.connectionGeneration&&F.connectionGeneration<this.pool.generation)return;let B=F instanceof e0.MongoNetworkError&&!(F instanceof e0.MongoNetworkTimeoutError),J=F instanceof e0.MongoNetworkError&&F.beforeHandshake,X=F.hasErrorLabel(e0.MongoErrorLabel.HandshakeError);if(B||J||X){if(!this.loadBalanced)F.addErrorLabel(e0.MongoErrorLabel.ResetPool),_M(this,F);else if(A)this.pool.clear({serviceId:A.serviceId})}else if((0,e0.isSDAMUnrecoverableError)(F)){if(rr1(this,F)){let Y=(0,e0.isNodeShuttingDownError)(F);if(this.loadBalanced&&A&&Y)this.pool.clear({serviceId:A.serviceId});if(!this.loadBalanced){if(Y)F.addErrorLabel(e0.MongoErrorLabel.ResetPool);_M(this,F),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(F,A,$,B){if(typeof B!=="object"||B==null||!("name"in B))throw new e0.MongoRuntimeError("An unexpected error type: "+typeof B);if(B.name==="AbortError"&&"cause"in B&&B.cause instanceof e0.MongoError)B=B.cause;if(!(B instanceof e0.MongoError))return B;if(nr1(this.pool,F))return B;let J=$?.session;if(B instanceof e0.MongoNetworkError){if(J&&!J.hasEnded&&J.serverSession)J.serverSession.isDirty=!0;if(yM(J,A)&&!B.hasErrorLabel(e0.MongoErrorLabel.TransientTransactionError))B.addErrorLabel(e0.MongoErrorLabel.TransientTransactionError);if((f41(this.topology)||(0,vM.isTransactionCommand)(A))&&(0,VF.supportsRetryableWrites)(this)&&!yM(J,A))B.addErrorLabel(e0.MongoErrorLabel.RetryableWriteError)}else if((f41(this.topology)||(0,vM.isTransactionCommand)(A))&&(0,e0.needsRetryableWriteLabel)(B,(0,VF.maxWireVersion)(this),this.description.type)&&!yM(J,A))B.addErrorLabel(e0.MongoErrorLabel.RetryableWriteError);if(J&&J.isPinned&&B.hasErrorLabel(e0.MongoErrorLabel.TransientTransactionError))J.unpin({force:!0});return this.handleError(B,F),B}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}x41.Server=x3;x3.SERVER_HEARTBEAT_STARTED=r2.SERVER_HEARTBEAT_STARTED;x3.SERVER_HEARTBEAT_SUCCEEDED=r2.SERVER_HEARTBEAT_SUCCEEDED;x3.SERVER_HEARTBEAT_FAILED=r2.SERVER_HEARTBEAT_FAILED;x3.CONNECT=r2.CONNECT;x3.DESCRIPTION_RECEIVED=r2.DESCRIPTION_RECEIVED;x3.CLOSED=r2.CLOSED;x3.ENDED=r2.ENDED;function _M(F,A){if(F.loadBalanced)return;if(A instanceof e0.MongoNetworkError&&!(A instanceof e0.MongoNetworkTimeoutError))F.monitor?.reset();F.emit(x3.DESCRIPTION_RECEIVED,new hM.ServerDescription(F.description.hostAddress,void 0,{error:A}))}function ar1(F,A){if(A)return A.inTransaction()||A.transaction.isCommitted&&"commitTransaction"in F||"aggregate"in F||"find"in F||"getMore"in F||"listCollections"in F||"listIndexes"in F||"bulkWrite"in F;return!1}function nr1(F,A){if(A.serviceId)return A.generation!==F.serviceGenerations.get(A.serviceId.toHexString());return A.generation!==F.generation}function rr1(F,A){let $=A.topologyVersion,B=F.description.topologyVersion;return(0,hM.compareTopologyVersion)(B,$)<0}function yM(F,A){return F&&F.inTransaction()&&!(0,vM.isTransactionCommand)(A)}function f41(F){return F.s.options.retryWrites!==!1}});var dM=Q((m41)=>{Object.defineProperty(m41,"__esModule",{value:!0});m41.RTTSampler=m41.MonitorInterval=m41.RTTPinger=m41.Monitor=m41.ServerMonitoringMode=void 0;var n8=x("timers"),g41=Y0(),vW=uM(),tr1=pj(),cM=T6(),d$=B1(),sr1=_8(),_41=z9(),R4=W1(),j4=D9(),oY=gW(),eY=mM(),c$="idle",EF="monitoring",l$=(0,R4.makeStateMachine)({[j4.STATE_CLOSING]:[j4.STATE_CLOSING,c$,j4.STATE_CLOSED],[j4.STATE_CLOSED]:[j4.STATE_CLOSED,EF],[c$]:[c$,EF,j4.STATE_CLOSING],[EF]:[EF,c$,j4.STATE_CLOSING]}),or1=new Set([j4.STATE_CLOSING,j4.STATE_CLOSED,EF]);function FD(F){return F.s.state===j4.STATE_CLOSED||F.s.state===j4.STATE_CLOSING}m41.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class h41 extends _41.TypedEventEmitter{constructor(F,A){super();this.component=sr1.MongoLoggableComponent.TOPOLOGY,this.on("error",R4.noop),this.server=F,this.connection=null,this.cancellationToken=new _41.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:j4.STATE_CLOSED},this.address=F.description.address,this.options=Object.freeze({connectTimeoutMS:A.connectTimeoutMS??1e4,heartbeatFrequencyMS:A.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:A.minHeartbeatFrequencyMS??500,serverMonitoringMode:A.serverMonitoringMode}),this.isRunningInFaasEnv=(0,tr1.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new aM(10);let $=this.cancellationToken,B={id:"<monitor>",generation:F.pool.generation,cancellationToken:$,hostAddress:F.description.hostAddress,...A,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete B.credentials,B.autoEncrypter)delete B.autoEncrypter;this.connectOptions=Object.freeze(B)}connect(){if(this.s.state!==j4.STATE_CLOSED)return;let F=this.options.heartbeatFrequencyMS,A=this.options.minHeartbeatFrequencyMS;this.monitorId=new hW(v41(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:A,immediate:!0})}requestCheck(){if(or1.has(this.s.state))return;this.monitorId?.wake()}reset(){let F=this.server.description.topologyVersion;if(FD(this)||F==null)return;l$(this,j4.STATE_CLOSING),y41(this),l$(this,c$);let A=this.options.heartbeatFrequencyMS,$=this.options.minHeartbeatFrequencyMS;this.monitorId=new hW(v41(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:$})}close(){if(FD(this))return;l$(this,j4.STATE_CLOSING),y41(this),this.emit("close"),l$(this,j4.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(F){this.rttSampler.addSample(F)}clearRttSamples(){this.rttSampler.clear()}}m41.Monitor=h41;function y41(F){F.monitorId?.stop(),F.monitorId=void 0,F.rttPinger?.close(),F.rttPinger=void 0,F.cancellationToken.emit("cancel"),F.connection?.destroy(),F.connection=null,F.clearRttSamples()}function lM(F,A){if(A==null)return!1;let $=F.options.serverMonitoringMode;if($===m41.ServerMonitoringMode.poll)return!1;if($===m41.ServerMonitoringMode.stream)return!0;if(F.isRunningInFaasEnv)return!1;return!0}function er1(F,A){let $,B,J=F.server.description.topologyVersion,X=lM(F,J);F.emitAndLogHeartbeat(eY.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new oY.ServerHeartbeatStartedEvent(F.address,X));function Y(Z){F.connection?.destroy(),F.connection=null,F.emitAndLogHeartbeat(eY.Server.SERVER_HEARTBEAT_FAILED,F.server.topology.s.id,void 0,new oY.ServerHeartbeatFailedEvent(F.address,(0,R4.calculateDurationInMs)($),Z,B));let U=!(Z instanceof d$.MongoError)?new d$.MongoError(d$.MongoError.buildErrorMessage(Z),{cause:Z}):Z;if(U.addErrorLabel(d$.MongoErrorLabel.ResetPool),U instanceof d$.MongoNetworkTimeoutError)U.addErrorLabel(d$.MongoErrorLabel.InterruptInUseConnections);F.emit("resetServer",U),A(Z)}function D(Z){if(!("isWritablePrimary"in Z))Z.isWritablePrimary=Z[cM.LEGACY_HELLO_COMMAND];let U=X&&F.rttPinger?F.rttPinger.latestRtt??(0,R4.calculateDurationInMs)($):(0,R4.calculateDurationInMs)($);if(F.addRttSample(U),F.emitAndLogHeartbeat(eY.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,Z.connectionId,new oY.ServerHeartbeatSucceededEvent(F.address,U,Z,X)),X)F.emitAndLogHeartbeat(eY.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new oY.ServerHeartbeatStartedEvent(F.address,!0)),$=(0,R4.now)();else F.rttPinger?.close(),F.rttPinger=void 0,A(void 0,Z)}let{connection:G}=F;if(G&&!G.closed){let{serverApi:Z,helloOk:U}=G,z=F.options.connectTimeoutMS,W=F.options.heartbeatFrequencyMS,H={[Z?.version||U?"hello":cM.LEGACY_HELLO_COMMAND]:1,...X&&J?{maxAwaitTimeMS:W,topologyVersion:Ft1(J)}:{}},K=X?{socketTimeoutMS:z?z+W:0,exhaustAllowed:!0}:{socketTimeoutMS:z};if(X&&F.rttPinger==null)F.rttPinger=new iM(F);if($=(0,R4.now)(),X)return B=!0,G.exhaustCommand((0,R4.ns)("admin.$cmd"),H,K,(q,V)=>{if(q)return Y(q);return D(V)});B=!1,G.command((0,R4.ns)("admin.$cmd"),H,K).then(D,Y);return}(async()=>{let Z=await(0,vW.makeSocket)(F.connectOptions),U=(0,vW.makeConnection)(F.connectOptions,Z);$=(0,R4.now)();try{return await(0,vW.performInitialHandshake)(U,F.connectOptions),U}catch(z){throw U.destroy(),z}})().then((Z)=>{if(FD(F)){Z.destroy();return}let U=(0,R4.calculateDurationInMs)($);F.addRttSample(U),F.connection=Z,F.emitAndLogHeartbeat(eY.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,Z.hello?.connectionId,new oY.ServerHeartbeatSucceededEvent(F.address,U,Z.hello,lM(F,Z.hello?.topologyVersion))),A(void 0,Z.hello)},(Z)=>{F.connection=null,B=!1,Y(Z)})}function v41(F){return(A)=>{if(F.s.state===EF){process.nextTick(A);return}l$(F,EF);function $(){if(!FD(F))l$(F,c$);A()}er1(F,(B,J)=>{if(B){if(F.server.description.type===j4.ServerType.Unknown)return $()}if(lM(F,J?.topologyVersion))(0,n8.setTimeout)(()=>{if(!FD(F))F.monitorId?.wake()},0);$()})}}function Ft1(F){return{processId:F.processId,counter:g41.Long.isLong(F.counter)?F.counter:g41.Long.fromNumber(F.counter)}}class iM{constructor(F){this.connection=void 0,this.cancellationToken=F.cancellationToken,this.closed=!1,this.monitor=F,this.latestRtt=F.latestRtt??void 0;let A=F.options.heartbeatFrequencyMS;this.monitorId=(0,n8.setTimeout)(()=>this.measureRoundTripTime(),A)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,n8.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(F,A){if(this.closed){A?.destroy();return}if(this.connection==null)this.connection=A;this.latestRtt=(0,R4.calculateDurationInMs)(F),this.monitorId=(0,n8.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let F=(0,R4.now)();if(this.closed)return;let A=this.connection;if(A==null){(0,vW.connect)(this.monitor.connectOptions).then((B)=>{this.measureAndReschedule(F,B)},()=>{this.connection=void 0});return}let $=A.serverApi?.version||A.helloOk?"hello":cM.LEGACY_HELLO_COMMAND;A.command((0,R4.ns)("admin.$cmd"),{[$]:1},void 0).then(()=>this.measureAndReschedule(F),()=>{this.connection?.destroy(),this.connection=void 0;return})}}m41.RTTPinger=iM;class hW{constructor(F,A={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)(0,n8.clearTimeout)(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,R4.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=F,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=A.minHeartbeatFrequencyMS??500,A.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let A=(0,R4.now)()-this.lastExecutionEnded;if(A<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(A<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-A);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)(0,n8.clearTimeout)(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let F=(0,R4.now)(),A=F-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:F,timeSinceLastCall:A}}_reschedule(F){if(this.stopped)return;if(this.timerId)(0,n8.clearTimeout)(this.timerId);this.timerId=(0,n8.setTimeout)(this._executeAndReschedule,F||this.heartbeatFrequencyMS)}}m41.MonitorInterval=hW;class aM{constructor(F=10){this.rttSamples=new Float64Array(F),this.length=0,this.writeIndex=0}addSample(F){if(this.rttSamples[this.writeIndex++]=F,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let F=this.rttSamples[0];for(let A=1;A<this.length;A++)if(this.rttSamples[A]<F)F=this.rttSamples[A];return F}average(){if(this.length===0)return 0;let F=0;for(let A=0;A<this.length;A++)F+=this.rttSamples[A];return F/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}m41.RTTSampler=aM});var FT=Q((n41)=>{Object.defineProperty(n41,"__esModule",{value:!0});n41.DEFAULT_OPTIONS=n41.OPTIONS=void 0;n41.resolveSRVRecord=Wt1;n41.parseOptions=Kt1;var nM=x("dns"),Jt1=vU(),Xt1=x("url"),p$=zW(),t2=n2(),c41=_Y(),l41=s01(),K1=B1(),mW=p8(),sM=_8(),rM=W2(),r8=J4(),Yt1=dM(),l4=W1(),S7=W3(),tM=["authSource","replicaSet","loadBalanced"],Dt1="loadBalanced option only supported with a single host in the URI",Gt1="loadBalanced option not supported with a replicaSet option",Zt1="loadBalanced option not supported when directConnection is provided";function a41(F){return async function($){try{return await nM.promises[F]($)}catch(B){if(B.code===nM.TIMEOUT)return await nM.promises[F]($);else throw B}}}var Ut1=a41("resolveSrv"),zt1=a41("resolveTxt");async function Wt1(F){if(typeof F.srvHost!=="string")throw new K1.MongoAPIError('Option "srvHost" must not be empty');let A=F.srvHost,$=zt1(A);$.then(void 0,l4.squashError);let B=`_${F.srvServiceName}._tcp.${A}`,J=await Ut1(B);if(J.length===0)throw new K1.MongoAPIError("No addresses found at host");for(let{name:W}of J)(0,l4.checkParentDomainMatch)(W,A);let X=J.map((W)=>l4.HostAddress.fromString(`${W.name}:${W.port??27017}`));oM(X,F,!0);let Y;try{Y=await $}catch(W){if(W.code!=="ENODATA"&&W.code!=="ENOTFOUND")throw W;return X}if(Y.length>1)throw new K1.MongoParseError("Multiple text records not allowed");let D=new Xt1.URLSearchParams(Y[0].join(""));if([...D.keys()].some((W)=>!tM.includes(W)))throw new K1.MongoParseError(`Text record may only set any of: ${tM.join(", ")}`);if(tM.some((W)=>D.get(W)===""))throw new K1.MongoParseError("Cannot have empty URI params in DNS TXT Record");let Z=D.get("authSource")??void 0,U=D.get("replicaSet")??void 0,z=D.get("loadBalanced")??void 0;if(!F.userSpecifiedAuthSource&&Z&&F.credentials&&!t2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(F.credentials.mechanism))F.credentials=p$.MongoCredentials.merge(F.credentials,{source:Z});if(!F.userSpecifiedReplicaSet&&U)F.replicaSet=U;if(z==="true")F.loadBalanced=!0;if(F.replicaSet&&F.srvMaxHosts>0)throw new K1.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return oM(X,F,!0),X}function Ht1(F){if(!F)return;let A=($,B)=>{if(F.has($)&&F.has(B))throw new K1.MongoAPIError(`The '${$}' option cannot be used with the '${B}' option`)};A("tlsInsecure","tlsAllowInvalidCertificates"),A("tlsInsecure","tlsAllowInvalidHostnames")}function u7(F,A){if(typeof A==="boolean")return A;switch(A){case"true":return!0;case"false":return!1;default:throw new K1.MongoParseError(`${F} must be either "true" or "false"`)}}function eM(F,A){let $=(0,l4.parseInteger)(A);if($!=null)return $;throw new K1.MongoParseError(`Expected ${F} to be stringified int value, got: ${A}`)}function AD(F,A){let $=eM(F,A);if($<0)throw new K1.MongoParseError(`${F} can only be a positive int value, got: ${A}`);return $}function*p41(F){if(F==="")return;let A=F.split(",");for(let $ of A){let[B,J]=$.split(/:(.*)/);if(J==null)throw new K1.MongoParseError("Cannot have undefined values in key value pairs");yield[B,J]}}class $D extends Map{constructor(F=[]){super(F.map(([A,$])=>[A.toLowerCase(),$]))}has(F){return super.has(F.toLowerCase())}get(F){return super.get(F.toLowerCase())}set(F,A){return super.set(F.toLowerCase(),A)}delete(F){return super.delete(F.toLowerCase())}}function Kt1(F,A=void 0,$={}){if(A!=null&&!(A instanceof mW.MongoClient))$=A,A=void 0;if($.useBigInt64&&typeof $.promoteLongs==="boolean"&&!$.promoteLongs)throw new K1.MongoAPIError("Must request either bigint or Long for int64 deserialization");if($.useBigInt64&&typeof $.promoteValues==="boolean"&&!$.promoteValues)throw new K1.MongoAPIError("Must request either bigint or Long for int64 deserialization");let B=new Jt1.default(F),{hosts:J,isSRV:X}=B,Y=Object.create(null);Y.hosts=X?[]:J.map(l4.HostAddress.fromString);let D=new $D;if(B.pathname!=="/"&&B.pathname!==""){let K=decodeURIComponent(B.pathname[0]==="/"?B.pathname.slice(1):B.pathname);if(K)D.set("dbName",[K])}if(B.username!==""){let K={username:decodeURIComponent(B.username)};if(typeof B.password==="string")K.password=decodeURIComponent(B.password);D.set("auth",[K])}for(let K of B.searchParams.keys()){let q=B.searchParams.getAll(K),V=/readPreferenceTags/i.test(K);if(!V&&q.length>1)throw new K1.MongoInvalidArgumentError(`URI option "${K}" cannot appear more than once in the connection string`);if(!V&&q.includes(""))throw new K1.MongoAPIError(`URI option "${K}" cannot be specified with no value`);if(!D.has(K))D.set(K,q)}let G=new $D(Object.entries($).filter(([,K])=>K!=null));if(D.has("serverApi"))throw new K1.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let Z=D.get("authMechanismProperties");if(Z){for(let K of Z)if(/(^|,)ALLOWED_HOSTS:/.test(K))throw new K1.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(G.has("loadBalanced"))throw new K1.MongoParseError("loadBalanced is only a valid option in the URI");let U=new $D,z=new Set([...D.keys(),...G.keys()]);for(let K of z){let q=[],V=G.get(K);if(V!=null)q.push(V);let E=D.get(K)??[];q.push(...E),U.set(K,q)}if(U.has("tls")||U.has("ssl")){let K=(U.get("tls")||[]).concat(U.get("ssl")||[]).map(u7.bind(null,"tls/ssl"));if(new Set(K).size!==1)throw new K1.MongoParseError("All values of tls/ssl must be the same.")}Ht1(U);let W=(0,l4.setDifference)(z,Array.from(Object.keys(n41.OPTIONS)).map((K)=>K.toLowerCase()));if(W.size!==0){let K=W.size>1?"options":"option",q=W.size>1?"are":"is";throw new K1.MongoParseError(`${K} ${Array.from(W).join(", ")} ${q} not supported`)}for(let[K,q]of Object.entries(n41.OPTIONS)){let V=U.get(K);if(!V||V.length===0){if(n41.DEFAULT_OPTIONS.has(K))i41(Y,K,q,[n41.DEFAULT_OPTIONS.get(K)])}else{let{deprecated:E}=q;if(E){let L=typeof E==="string"?`: ${E}`:"";(0,l4.emitWarning)(`${K} is a deprecated option${L}`)}i41(Y,K,q,V)}}if(Y.credentials){let K=Y.credentials.mechanism===t2.AuthMechanism.MONGODB_GSSAPI,q=Y.credentials.mechanism===t2.AuthMechanism.MONGODB_X509,V=Y.credentials.mechanism===t2.AuthMechanism.MONGODB_AWS,E=Y.credentials.mechanism===t2.AuthMechanism.MONGODB_OIDC;if((K||q)&&U.has("authSource")&&Y.credentials.source!=="$external")throw new K1.MongoParseError(`authMechanism ${Y.credentials.mechanism} requires an authSource of '$external'`);if(!(K||q||V||E)&&Y.dbName&&!U.has("authSource"))Y.credentials=p$.MongoCredentials.merge(Y.credentials,{source:Y.dbName});if(V&&Y.credentials.username&&!Y.credentials.password)throw new K1.MongoMissingCredentialsError(`When using ${Y.credentials.mechanism} password must be set when a username is specified`);if(Y.credentials.validate(),Y.credentials.password===""&&Y.credentials.username===""&&Y.credentials.mechanism===t2.AuthMechanism.MONGODB_DEFAULT&&Object.keys(Y.credentials.mechanismProperties).length===0)delete Y.credentials}if(!Y.dbName)Y.dbName="test";if(oM(J,Y,X),A&&Y.autoEncryption)l41.Encrypter.checkForMongoCrypt(),Y.encrypter=new l41.Encrypter(A,F,$),Y.autoEncrypter=Y.encrypter.autoEncrypter;if(Y.userSpecifiedAuthSource=G.has("authSource")||D.has("authSource"),Y.userSpecifiedReplicaSet=G.has("replicaSet")||D.has("replicaSet"),X){if(Y.srvHost=J[0],Y.directConnection)throw new K1.MongoAPIError("SRV URI does not support directConnection");if(Y.srvMaxHosts>0&&typeof Y.replicaSet==="string")throw new K1.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let K=!G.has("tls")&&!D.has("tls"),q=!G.has("ssl")&&!D.has("ssl");if(K&&q)Y.tls=!0}else if(D.has("srvMaxHosts")||G.has("srvMaxHosts")||D.has("srvServiceName")||G.has("srvServiceName"))throw new K1.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(Y.directConnection&&Y.hosts.length!==1)throw new K1.MongoParseError("directConnection option requires exactly one host");if(!Y.proxyHost&&(Y.proxyPort||Y.proxyUsername||Y.proxyPassword))throw new K1.MongoParseError("Must specify proxyHost if other proxy options are passed");if(Y.proxyUsername&&!Y.proxyPassword||!Y.proxyUsername&&Y.proxyPassword)throw new K1.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((K)=>D.get(K)??[]).some((K)=>K.length>1))throw new K1.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return Y.mongoLoggerOptions=sM.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:Y.mongodbLogPath,mongodbLogComponentSeverities:Y.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:Y.mongodbLogMaxDocumentLength}),Y}function oM(F,A,$){if(A.loadBalanced){if(F.length>1)throw new K1.MongoParseError(Dt1);if(A.replicaSet)throw new K1.MongoParseError(Gt1);if(A.directConnection)throw new K1.MongoParseError(Zt1);if($&&A.srvMaxHosts>0)throw new K1.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function i41(F,A,$,B){let{target:J,type:X,transform:Y}=$,D=J??A;switch(X){case"boolean":F[D]=u7(D,B[0]);break;case"int":F[D]=eM(D,B[0]);break;case"uint":F[D]=AD(D,B[0]);break;case"string":if(B[0]==null)break;F[D]=String(B[0]);break;case"record":if(!(0,l4.isRecord)(B[0]))throw new K1.MongoParseError(`${D} must be an object`);F[D]=B[0];break;case"any":F[D]=B[0];break;default:{if(!Y)throw new K1.MongoParseError("Descriptors missing a type must define a transform");let G=Y({name:D,options:F,values:B});F[D]=G;break}}}n41.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:F,options:A,values:[$]}){if(!(0,l4.isRecord)($,["username","password"]))throw new K1.MongoParseError(`${F} must be an object with 'username' and 'password' properties`);return p$.MongoCredentials.merge(A.credentials,{username:$.username,password:$.password})}},authMechanism:{target:"credentials",transform({options:F,values:[A]}){let $=Object.values(t2.AuthMechanism),[B]=$.filter((Y)=>Y.match(RegExp(String.raw`\b${A}\b`,"i")));if(!B)throw new K1.MongoParseError(`authMechanism one of ${$}, got ${A}`);let J=F.credentials?.source;if(B===t2.AuthMechanism.MONGODB_PLAIN||t2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(B))J="$external";let X=F.credentials?.password;if(B===t2.AuthMechanism.MONGODB_X509&&X==="")X=void 0;return p$.MongoCredentials.merge(F.credentials,{mechanism:B,source:J,password:X})}},authMechanismProperties:{target:"credentials",transform({options:F,values:A}){let $=Object.create(null);for(let B of A)if(typeof B==="string")for(let[J,X]of p41(B))try{$[J]=u7(J,X)}catch{$[J]=X}else{if(!(0,l4.isRecord)(B))throw new K1.MongoParseError("AuthMechanismProperties must be an object");$={...B}}return p$.MongoCredentials.merge(F.credentials,{mechanismProperties:$})}},authSource:{target:"credentials",transform({options:F,values:[A]}){let $=String(A);return p$.MongoCredentials.merge(F.credentials,{source:$})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[F]}){let A=typeof F==="string"?{version:F}:F,$=A&&A.version;if(!$)throw new K1.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(mW.ServerApiVersion).join('", "')}"]`);if(!Object.values(mW.ServerApiVersion).some((B)=>B===$))throw new K1.MongoParseError(`Invalid server API version=${$}; must be in the following enum: ["${Object.values(mW.ServerApiVersion).join('", "')}"]`);return A}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:F}){let A=new Set;for(let $ of F){let B=typeof $==="string"?$.split(","):$;if(!Array.isArray(B))throw new K1.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let J of B)if(Object.keys(c41.Compressor).includes(String(J)))A.add(String(J));else throw new K1.MongoInvalidArgumentError(`${J} is not a valid compression mechanism. Must be one of: ${Object.keys(c41.Compressor)}.`)}return[...A]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:F,values:[A]}){let $=eM(F,A);if($===4||$===6)return $;throw new K1.MongoParseError(`Option 'family' must be 4 or 6 got ${$}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[$]}){let B=S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,fsync:u7(F,$)}});if(!B)throw new K1.MongoParseError(`Unable to make a writeConcern from fsync=${$}`);return B}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[$]}){let B=S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:u7(F,$)}});if(!B)throw new K1.MongoParseError(`Unable to make a writeConcern from journal=${$}`);return B}},journal:{target:"writeConcern",transform({name:F,options:A,values:[$]}){let B=S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:u7(F,$)}});if(!B)throw new K1.MongoParseError(`Unable to make a writeConcern from journal=${$}`);return B}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:F,values:[A]}){let $=AD(F,A);if($===0)throw new K1.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return $}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:F,options:A,values:[$]}){let B=AD(F,$);if(A.readPreference)return r8.ReadPreference.fromOptions({readPreference:{...A.readPreference,maxStalenessSeconds:B}});else return new r8.ReadPreference("secondary",void 0,{maxStalenessSeconds:B})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[F],options:A}){return{...A.driverInfo,name:String(F)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:l4.DEFAULT_PK_FACTORY,transform({values:[F]}){if((0,l4.isRecord)(F,["createPk"])&&typeof F.createPk==="function")return F;throw new K1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${F}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[F],options:A}){if(F instanceof rM.ReadConcern||(0,l4.isRecord)(F,["level"]))return rM.ReadConcern.fromOptions({...A.readConcern,...F});throw new K1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(F)}`)}},readConcernLevel:{target:"readConcern",transform({values:[F],options:A}){return rM.ReadConcern.fromOptions({...A.readConcern,level:F})}},readPreference:{default:r8.ReadPreference.primary,transform({values:[F],options:A}){if(F instanceof r8.ReadPreference)return r8.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if((0,l4.isRecord)(F,["mode"])){let $=r8.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if($)return $;else throw new K1.MongoParseError(`Cannot make read preference from ${JSON.stringify(F)}`)}if(typeof F==="string"){let $={hedge:A.readPreference?.hedge,maxStalenessSeconds:A.readPreference?.maxStalenessSeconds};return new r8.ReadPreference(F,A.readPreference?.tags,$)}throw new K1.MongoParseError(`Unknown ReadPreference value: ${F}`)}},readPreferenceTags:{target:"readPreference",transform({values:F,options:A}){let $=Array.isArray(F[0])?F[0]:F,B=[];for(let J of $){let X=Object.create(null);if(typeof J==="string")for(let[Y,D]of p41(J))X[Y]=D;if((0,l4.isRecord)(J))for(let[Y,D]of Object.entries(J))X[Y]=D;B.push(X)}return r8.ReadPreference.fromOptions({readPreference:A.readPreference,readPreferenceTags:B})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[F]}){if(!Object.values(Yt1.ServerMonitoringMode).includes(F))throw new K1.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return F}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:F,values:[A]}){return!u7(F,A)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:F,values:[A]}){return u7(F,A)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:F,options:A,values:[$]}){let B=u7(F,$);if(B)A.checkServerIdentity=()=>{return},A.rejectUnauthorized=!1;else A.checkServerIdentity=A.tlsAllowInvalidHostnames?()=>{return}:void 0,A.rejectUnauthorized=A.tlsAllowInvalidCertificates?!1:!0;return B}},w:{target:"writeConcern",transform({values:[F],options:A}){return S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[F],options:A}){if((0,l4.isRecord)(F)||F instanceof S7.WriteConcern)return S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,...F}});else if(F==="majority"||typeof F==="number")return S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}});throw new K1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(F)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[F],options:A}){let $=S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeout:AD("wtimeout",F)}});if($)return $;throw new K1.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[F],options:A}){let $=S7.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeoutMS:AD("wtimeoutMS",F)}});if($)return $;throw new K1.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[F]}){if(!(typeof F==="string"&&["stderr","stdout"].includes(F)||F&&typeof F==="object"&&("write"in F)&&typeof F.write==="function"))throw new K1.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return F}},mongodbLogComponentSeverities:{transform({values:[F]}){if(typeof F!=="object"||!F)throw new K1.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[A,$]of Object.entries(F)){if(typeof $!=="string"||typeof A!=="string")throw new K1.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(sM.MongoLoggableComponent).some((B)=>B===A)&&A!=="default")throw new K1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${A}`);if(!Object.values(sM.SeverityLevel).some((B)=>B===$))throw new K1.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${$} as a value for ${A}`)}return F}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};n41.DEFAULT_OPTIONS=new $D(Object.entries(n41.OPTIONS).filter(([,F])=>F.default!=null).map(([F,A])=>[F,A.default]))});var s41=Q((r41)=>{Object.defineProperty(r41,"__esModule",{value:!0});r41.ListCollectionsOperation=void 0;var AT=q0(),Vt1=W1(),Et1=K6(),BD=T0();class $T extends Et1.CommandOperation{constructor(F,A,$){super(F,$);if(this.SERVER_COMMAND_RESPONSE_TYPE=AT.CursorResponse,this.options={...$},delete this.options.writeConcern,this.db=F,this.filter=A,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize;this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?AT.ExplainedCursorResponse:AT.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(F){let A={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if((0,Vt1.maxWireVersion)(F)>=9&&this.options.comment!==void 0)A.comment=this.options.comment;return A}handleOk(F){return F}}r41.ListCollectionsOperation=$T;(0,BD.defineAspects)($T,[BD.Aspect.READ_OPERATION,BD.Aspect.RETRYABLE,BD.Aspect.CURSOR_CREATING,BD.Aspect.SUPPORTS_RAW_DATA])});var JT=Q((o41)=>{Object.defineProperty(o41,"__esModule",{value:!0});o41.ListCollectionsCursor=void 0;var Lt1=X4(),wt1=s41(),It1=I4();class BT extends It1.AbstractCursor{constructor(F,A,$){super(F.client,F.s.namespace,$);this.parent=F,this.filter=A,this.options=$}clone(){return new BT(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new wt1.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:F,signal:this.signal}),$=await(0,Lt1.executeOperation)(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:$}}}o41.ListCollectionsCursor=BT});var J31=Q(($31)=>{Object.defineProperty($31,"__esModule",{value:!0});$31.RunCommandCursor=void 0;var i$=B1(),F31=X4(),Ct1=vj(),Nt1=kY(),Pt1=W1(),Rt1=I4();class A31 extends Rt1.AbstractCursor{setComment(F){return this.getMoreOptions.comment=F,this}setMaxTimeMS(F){return this.getMoreOptions.maxAwaitTimeMS=F,this}setBatchSize(F){return this.getMoreOptions.batchSize=F,this}clone(){throw new i$.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(F){throw new i$.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(F,A){throw new i$.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(F){throw new i$.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(F){throw new i$.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(F,A,$={}){super(F.client,(0,Pt1.ns)(F.namespace),$);this.getMoreOptions={},this.db=F,this.command=Object.freeze({...A})}async _initialize(F){let A=new Nt1.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:F,readPreference:this.cursorOptions.readPreference}),$=await(0,F31.executeOperation)(this.client,A,this.timeoutContext);return{server:A.server,session:F,response:$}}async getMore(F){if(!this.session)throw new i$.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let A=new Ct1.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,F31.executeOperation)(this.client,A,this.timeoutContext)}}$31.RunCommandCursor=A31});var XD=Q((X31)=>{Object.defineProperty(X31,"__esModule",{value:!0});X31.ListIndexesOperation=X31.DropIndexOperation=X31.CreateIndexesOperation=void 0;var XT=q0(),jt1=B1(),YT=W1(),DT=K6(),w2=T0(),Mt1=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Tt1(F){return typeof F==="number"||F==="2d"||F==="2dsphere"||F==="text"||F==="geoHaystack"}function kt1(F){return Array.isArray(F)&&F.length===2&&Tt1(F[1])}function Ot1(F){let A=new Map,$=!Array.isArray(F)||kt1(F)?[F]:F;for(let B of $)if(typeof B==="string")A.set(B,1);else if(Array.isArray(B))A.set(B[0],B[1]??1);else if(B instanceof Map)for(let[J,X]of B)A.set(J,X);else if((0,YT.isObject)(B))for(let[J,X]of Object.entries(B))A.set(J,X);return A}function St1(F){let A=Object.entries(F).filter(([$])=>Mt1.has($));return Object.fromEntries(A.map(([$,B])=>$==="version"?["v",B]:[$,B]))}class JD extends DT.CommandOperation{constructor(F,A,$,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=XT.MongoDBResponse,this.options=B??{},this.options.collation=void 0,this.collectionName=A,this.indexes=$.map((J)=>{let X=J.key instanceof Map?J.key:new Map(Object.entries(J.key)),Y=J.name??Array.from(X).flat().join("_");return{...St1(J),name:Y,key:X}}),this.ns=F.s.namespace}static fromIndexDescriptionArray(F,A,$,B){return new JD(F,A,$,B)}static fromIndexSpecification(F,A,$,B={}){let J=Ot1($),X={...B,key:J};return new JD(F,A,[X],B)}get commandName(){return"createIndexes"}buildCommandDocument(F){let A=this.options,$=this.indexes,B=(0,YT.maxWireVersion)(F),J={createIndexes:this.collectionName,indexes:$};if(A.commitQuorum!=null){if(B<9)throw new jt1.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");J.commitQuorum=A.commitQuorum}return J}handleOk(F){return this.indexes.map(($)=>$.name||"")}}X31.CreateIndexesOperation=JD;class GT extends DT.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=XT.MongoDBResponse,this.options=$??{},this.collection=F,this.indexName=A,this.ns=F.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(F){return{dropIndexes:this.collection.collectionName,index:this.indexName}}}X31.DropIndexOperation=GT;class ZT extends DT.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=XT.CursorResponse,this.options={...A},delete this.options.writeConcern,this.collectionNamespace=F.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(F){let A=(0,YT.maxWireVersion)(F),$=this.options.batchSize?{batchSize:this.options.batchSize}:{},B={listIndexes:this.collectionNamespace.collection,cursor:$};if(A>=9&&this.options.comment!==void 0)B.comment=this.options.comment;return B}handleOk(F){return F}}X31.ListIndexesOperation=ZT;(0,w2.defineAspects)(ZT,[w2.Aspect.READ_OPERATION,w2.Aspect.RETRYABLE,w2.Aspect.CURSOR_CREATING,w2.Aspect.SUPPORTS_RAW_DATA]);(0,w2.defineAspects)(JD,[w2.Aspect.WRITE_OPERATION,w2.Aspect.SUPPORTS_RAW_DATA]);(0,w2.defineAspects)(GT,[w2.Aspect.WRITE_OPERATION,w2.Aspect.SUPPORTS_RAW_DATA])});var z31=Q((Z31)=>{Object.defineProperty(Z31,"__esModule",{value:!0});Z31.CreateCollectionOperation=void 0;Z31.createCollections=ct1;var D31=f8(),xt1=q0(),bt1=a$(),gt1=B1(),_t1=n6(),yt1=W1(),vt1=K6(),UT=X4(),ht1=XD(),G31=T0(),mt1=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),dt1="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class YD extends vt1.CommandOperation{constructor(F,A,$={}){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=xt1.MongoDBResponse,this.options=$,this.db=F,this.name=A}get commandName(){return"create"}buildCommandDocument(F,A){let $=([B,J])=>J!=null&&typeof J!=="function"&&!mt1.has(B);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter($))}}handleOk(F){return new bt1.Collection(this.db,this.name,this.options)}}Z31.CreateCollectionOperation=YD;async function ct1(F,A,$){let B=_t1.TimeoutContext.create({session:$.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:$.timeoutMS}),J=$.encryptedFields??F.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${F.databaseName}.${A}`];if(J){class Y extends YD{buildCommandDocument(Z,U){if(!Z.description.loadBalanced&&(0,yt1.maxWireVersion)(Z)<D31.MIN_SUPPORTED_QE_WIRE_VERSION)throw new gt1.MongoCompatibilityError(`${dt1} The minimum server version required is ${D31.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(Z,U)}}let D=J.escCollection??`enxcol_.${A}.esc`,G=J.ecocCollection??`enxcol_.${A}.ecoc`;for(let Z of[D,G]){let U=new Y(F,Z,{clusteredIndex:{key:{_id:1},unique:!0},session:$.session});await(0,UT.executeOperation)(F.client,U,B)}if(!$.encryptedFields)$={...$,encryptedFields:J}}let X=await(0,UT.executeOperation)(F.client,new YD(F,A,$),B);if(J){let Y=ht1.CreateIndexesOperation.fromIndexSpecification(F,A,{__safeContent__:1},{session:$.session});await(0,UT.executeOperation)(F.client,Y,B)}return X}(0,G31.defineAspects)(YD,[G31.Aspect.WRITE_OPERATION])});var V31=Q((q31)=>{Object.defineProperty(q31,"__esModule",{value:!0});q31.DropDatabaseOperation=q31.DropCollectionOperation=void 0;q31.dropCollections=rt1;var pt1=LF(),H31=q0(),it1=I4(),at1=B1(),nt1=n6(),K31=K6(),W31=X4(),lW=T0();class DD extends K31.CommandOperation{constructor(F,A,$={}){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=H31.MongoDBResponse,this.options=$,this.name=A}get commandName(){return"drop"}buildCommandDocument(F,A){return{drop:this.name}}handleOk(F){return!0}}q31.DropCollectionOperation=DD;async function rt1(F,A,$){let B=nt1.TimeoutContext.create({session:$.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:$.timeoutMS}),J=F.client.s.options.autoEncryption?.encryptedFieldsMap,X=$.encryptedFields??J?.[`${F.databaseName}.${A}`];if(!X&&J)X=(await F.listCollections({name:A},{nameOnly:!1,session:$.session,timeoutContext:new it1.CursorTimeoutContext(B,Symbol())}).toArray())?.[0]?.options?.encryptedFields;if(X){let Y=X.escCollection||`enxcol_.${A}.esc`,D=X.ecocCollection||`enxcol_.${A}.ecoc`;for(let G of[Y,D]){let Z=new DD(F,G,$);try{await(0,W31.executeOperation)(F.client,Z,B)}catch(U){if(!(U instanceof pt1.MongoServerError)||U.code!==at1.MONGODB_ERROR_CODES.NamespaceNotFound)throw U}}}return await(0,W31.executeOperation)(F.client,new DD(F,A,$),B)}class zT extends K31.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=H31.MongoDBResponse,this.options=A}get commandName(){return"dropDatabase"}buildCommandDocument(F,A){return{dropDatabase:1}}handleOk(F){return!0}}q31.DropDatabaseOperation=zT;(0,lW.defineAspects)(DD,[lW.Aspect.WRITE_OPERATION]);(0,lW.defineAspects)(zT,[lW.Aspect.WRITE_OPERATION])});var N31=Q((I31)=>{Object.defineProperty(I31,"__esModule",{value:!0});I31.ProfilingLevelOperation=void 0;var ot1=Y0(),et1=q0(),E31=B1(),Fs1=K6();class L31 extends et1.MongoDBResponse{get was(){return this.get("was",ot1.BSONType.int,!0)}}class w31 extends Fs1.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=L31,this.options=A}get commandName(){return"profile"}buildCommandDocument(F){return{profile:-1}}handleOk(F){if(F.ok===1){let A=F.was;if(A===0)return"off";if(A===1)return"slow_only";if(A===2)return"all";throw new E31.MongoUnexpectedServerResponseError(`Illegal profiling level value ${A}`)}else throw new E31.MongoUnexpectedServerResponseError("Error with profile command")}}I31.ProfilingLevelOperation=w31});var HT=Q((R31)=>{Object.defineProperty(R31,"__esModule",{value:!0});R31.RenameOperation=void 0;var As1=q0(),$s1=a$(),Bs1=W1(),Js1=K6(),P31=T0();class WT extends Js1.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=As1.MongoDBResponse,this.collection=F,this.newName=A,this.options=$,this.ns=new Bs1.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(F,A){let $=this.collection.namespace,B=this.collection.s.namespace.withCollection(this.newName).toString(),J=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1;return{renameCollection:$,to:B,dropTarget:J}}handleOk(F){return new $s1.Collection(this.collection.db,this.newName,this.collection.s.options)}}R31.RenameOperation=WT;(0,P31.defineAspects)(WT,[P31.Aspect.WRITE_OPERATION])});var KT=Q((T31)=>{Object.defineProperty(T31,"__esModule",{value:!0});T31.SetProfilingLevelOperation=T31.ProfilingLevel=void 0;var Xs1=q0(),Ys1=B1(),Ds1=W1(),Gs1=K6(),Zs1=new Set(["off","slow_only","all"]);T31.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class M31 extends Gs1.CommandOperation{constructor(F,A,$){super(F,$);switch(this.SERVER_COMMAND_RESPONSE_TYPE=Xs1.MongoDBResponse,this.options=$,A){case T31.ProfilingLevel.off:this.profile=0;break;case T31.ProfilingLevel.slowOnly:this.profile=1;break;case T31.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=A}get commandName(){return"profile"}buildCommandDocument(F){let A=this.level;if(!Zs1.has(A))throw new Ys1.MongoInvalidArgumentError(`Profiling level must be one of "${(0,Ds1.enumToString)(T31.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(F){return this.level}}T31.SetProfilingLevelOperation=M31});var f31=Q((S31)=>{Object.defineProperty(S31,"__esModule",{value:!0});S31.DbStatsOperation=void 0;var Us1=q0(),zs1=K6(),O31=T0();class qT extends zs1.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=Us1.MongoDBResponse,this.options=A}get commandName(){return"dbStats"}buildCommandDocument(F){let A={dbStats:!0};if(this.options.scale!=null)A.scale=this.options.scale;return A}}S31.DbStatsOperation=qT;(0,O31.defineAspects)(qT,[O31.Aspect.READ_OPERATION])});var pW=Q((v31)=>{Object.defineProperty(v31,"__esModule",{value:!0});v31.Db=void 0;var Ws1=kj(),x31=Y0(),Hs1=wF(),b31=a$(),n$=T6(),Ks1=ZD(),qs1=JT(),Qs1=J31(),g31=B1(),Vs1=z31(),_31=V31(),t8=X4(),Es1=XD(),Ls1=N31(),ws1=jj(),Is1=HT(),Cs1=kY(),Ns1=KT(),Ps1=f31(),Rs1=W2(),y31=J4(),Y4=W1(),js1=W3(),Ms1=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class s8{constructor(F,A,$){if($=$??{},$=(0,Y4.filterOptions)($,Ms1),typeof A==="string"&&A.includes("."))throw new g31.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:$,readPreference:y31.ReadPreference.fromOptions($),bsonOptions:(0,x31.resolveBSONOptions)($,F),pkFactory:$?.pkFactory??Y4.DEFAULT_PK_FACTORY,readConcern:Rs1.ReadConcern.fromOptions($),writeConcern:js1.WriteConcern.fromOptions($),namespace:new Y4.MongoDBNamespace(A)},this.client=F}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(F,A){return A=(0,Y4.resolveOptions)(this,A),await(0,Vs1.createCollections)(this,F,A)}async command(F,A){return await(0,t8.executeOperation)(this.client,new Cs1.RunCommandOperation(this.s.namespace,F,(0,Y4.resolveOptions)(void 0,{...(0,x31.resolveBSONOptions)(A),timeoutMS:A?.timeoutMS??this.timeoutMS,session:A?.session,readPreference:A?.readPreference,signal:A?.signal})))}aggregate(F=[],A){return new Ks1.AggregationCursor(this.client,this.s.namespace,F,(0,Y4.resolveOptions)(this,A))}admin(){return new Ws1.Admin(this)}collection(F,A={}){if(typeof A==="function")throw new g31.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new b31.Collection(this,F,(0,Y4.resolveOptions)(this,A))}async stats(F){return await(0,t8.executeOperation)(this.client,new Ps1.DbStatsOperation(this,(0,Y4.resolveOptions)(this,F)))}listCollections(F={},A={}){return new qs1.ListCollectionsCursor(this,F,(0,Y4.resolveOptions)(this,A))}async renameCollection(F,A,$){return await(0,t8.executeOperation)(this.client,new Is1.RenameOperation(this.collection(F),A,(0,Y4.resolveOptions)(void 0,{...$,new_collection:!0,readPreference:y31.ReadPreference.primary})))}async dropCollection(F,A){return A=(0,Y4.resolveOptions)(this,A),await(0,_31.dropCollections)(this,F,A)}async dropDatabase(F){return await(0,t8.executeOperation)(this.client,new _31.DropDatabaseOperation(this,(0,Y4.resolveOptions)(this,F)))}async collections(F){return F=(0,Y4.resolveOptions)(this,F),(await this.listCollections({},{...F,nameOnly:!0}).toArray()).filter(({name:$})=>!$.includes("$")).map(({name:$})=>new b31.Collection(this,$,this.s.options))}async createIndex(F,A,$){return(await(0,t8.executeOperation)(this.client,Es1.CreateIndexesOperation.fromIndexSpecification(this,F,A,$)))[0]}async removeUser(F,A){return await(0,t8.executeOperation)(this.client,new ws1.RemoveUserOperation(this,F,(0,Y4.resolveOptions)(this,A)))}async setProfilingLevel(F,A){return await(0,t8.executeOperation)(this.client,new Ns1.SetProfilingLevelOperation(this,F,(0,Y4.resolveOptions)(this,A)))}async profilingLevel(F){return await(0,t8.executeOperation)(this.client,new Ls1.ProfilingLevelOperation(this,(0,Y4.resolveOptions)(this,F)))}async indexInformation(F,A){return await this.collection(F).indexInformation((0,Y4.resolveOptions)(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new Hs1.ChangeStream(this,F,(0,Y4.resolveOptions)(this,A))}runCursorCommand(F,A){return new Qs1.RunCommandCursor(this,F,A)}}v31.Db=s8;s8.SYSTEM_NAMESPACE_COLLECTION=n$.SYSTEM_NAMESPACE_COLLECTION;s8.SYSTEM_INDEX_COLLECTION=n$.SYSTEM_INDEX_COLLECTION;s8.SYSTEM_PROFILE_COLLECTION=n$.SYSTEM_PROFILE_COLLECTION;s8.SYSTEM_USER_COLLECTION=n$.SYSTEM_USER_COLLECTION;s8.SYSTEM_COMMAND_COLLECTION=n$.SYSTEM_COMMAND_COLLECTION;s8.SYSTEM_JS_COLLECTION=n$.SYSTEM_JS_COLLECTION});var l31=Q((d31)=>{Object.defineProperty(d31,"__esModule",{value:!0});d31.MongoDBAWS=void 0;var QT=Y0(),VT=Q2(),t$=B1(),r$=W1(),Ts1=v8(),ET=AM(),ks1=zW(),Os1=n2(),Ss1=110,LT={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class m31 extends Ts1.AuthProvider{constructor(F){super();this.credentialProvider=F,this.credentialFetcher=ET.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new ET.AWSSDKCredentialProvider(F):new ET.LegacyAWSTemporaryCredentialProvider}async auth(F){let{connection:A}=F;if(!F.credentials)throw new t$.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in VT.aws4)throw VT.aws4.kModuleError;let{sign:$}=VT.aws4;if((0,r$.maxWireVersion)(A)<9)throw new t$.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");if(!F.credentials.username)F.credentials=await us1(F.credentials,this.credentialFetcher);let{credentials:B}=F,J=B.username,X=B.password,Y=B.mechanismProperties.AWS_SESSION_TOKEN,D=J&&X&&Y?{accessKeyId:J,secretAccessKey:X,sessionToken:Y}:J&&X?{accessKeyId:J,secretAccessKey:X}:void 0,G=B.source,Z=await(0,r$.randomBytes)(32),U={saslStart:1,mechanism:"MONGODB-AWS",payload:QT.serialize({r:Z,p:Ss1},LT)},z=await A.command((0,r$.ns)(`${G}.$cmd`),U,void 0),W=QT.deserialize(z.payload.buffer,LT),H=W.h,K=W.s.buffer;if(K.length!==64)throw new t$.MongoRuntimeError(`Invalid server nonce length ${K.length}, expected 64`);if(!r$.ByteUtils.equals(K.subarray(0,Z.byteLength),Z))throw new t$.MongoRuntimeError("Server nonce does not begin with client nonce");if(H.length<1||H.length>255||H.indexOf("..")!==-1)throw new t$.MongoRuntimeError(`Server returned an invalid host: "${H}"`);let q="Action=GetCallerIdentity&Version=2011-06-15",V=$({method:"POST",host:H,region:fs1(W.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":q.length,"X-MongoDB-Server-Nonce":r$.ByteUtils.toBase64(K),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:q},D),E={a:V.headers.Authorization,d:V.headers["X-Amz-Date"]};if(Y)E.t=Y;let L={saslContinue:1,conversationId:z.conversationId,payload:QT.serialize(E,LT)};await A.command((0,r$.ns)(`${G}.$cmd`),L,void 0)}}d31.MongoDBAWS=m31;async function us1(F,A){function $(J){if(!J.AccessKeyId||!J.SecretAccessKey)throw new t$.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new ks1.MongoCredentials({username:J.AccessKeyId,password:J.SecretAccessKey,source:F.source,mechanism:Os1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:J.Token}})}let B=await A.getCredentials();return $(B)}function fs1(F){let A=F.split(".");if(A.length===1||A[1]==="amazonaws")return"us-east-1";return A[1]}});var a31=Q((i31)=>{Object.defineProperty(i31,"__esModule",{value:!0});i31.finishCommandDocument=xs1;i31.startCommandDocument=bs1;var s$=Y0(),p31=n2();function xs1(F,A){if(A!=null)return{saslContinue:1,conversationId:A,payload:new s$.Binary(s$.BSON.serialize({jwt:F}))};return{saslStart:1,mechanism:p31.AuthMechanism.MONGODB_OIDC,payload:new s$.Binary(s$.BSON.serialize({jwt:F}))}}function bs1(F){let A={};if(F.username)A.n=F.username;return{saslStart:1,autoAuthorize:1,mechanism:p31.AuthMechanism.MONGODB_OIDC,payload:new s$.Binary(s$.BSON.serialize(A))}}});var CT=Q((t31)=>{Object.defineProperty(t31,"__esModule",{value:!0});t31.CallbackWorkflow=t31.AUTOMATED_TIMEOUT_MS=t31.HUMAN_TIMEOUT_MS=void 0;var ys1=x("timers/promises"),vs1=B1(),n31=W1(),wT=a31();t31.HUMAN_TIMEOUT_MS=300000;t31.AUTOMATED_TIMEOUT_MS=60000;var hs1=["accessToken","expiresInSeconds","refreshToken"],ms1="User provided OIDC callbacks must return a valid object with an accessToken.",IT=100;class r31{constructor(F,A){this.cache=F,this.callback=this.withLock(A),this.lastExecutionTime=Date.now()-IT}async speculativeAuth(F,A){if(this.cache.hasAccessToken){let $=this.cache.getAccessToken();F.accessToken=$;let B=(0,wT.finishCommandDocument)($);return B.db=A.source,{speculativeAuthenticate:B}}return{}}async reauthenticate(F,A){if(this.cache.hasAccessToken)if(F.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete F.accessToken;else F.accessToken=this.cache.getAccessToken();await this.execute(F,A)}async startAuthentication(F,A,$){let B;if($?.speculativeAuthenticate)B=$.speculativeAuthenticate;else B=await F.command((0,n31.ns)(A.source),(0,wT.startCommandDocument)(A),void 0);return B}async finishAuthentication(F,A,$,B){await F.command((0,n31.ns)(A.source),(0,wT.finishCommandDocument)($,B),void 0)}async executeAndValidateCallback(F){let A=await this.callback(F);if(ds1(A))throw new vs1.MongoMissingCredentialsError(ms1);return A}withLock(F){let A=Promise.resolve();return async($)=>{return await A,A=A.catch(()=>null).then(async()=>{let B=Date.now()-this.lastExecutionTime;if(B<=IT)await(0,ys1.setTimeout)(IT-B,{signal:$.timeoutContext});return this.lastExecutionTime=Date.now(),await F($)}),await A}}}t31.CallbackWorkflow=r31;function ds1(F){if(F==null||typeof F!=="object")return!0;if(!("accessToken"in F))return!0;return!Object.getOwnPropertyNames(F).every((A)=>hs1.includes(A))}});var RT=Q((F91)=>{Object.defineProperty(F91,"__esModule",{value:!0});F91.AutomatedCallbackWorkflow=void 0;var NT=B1(),o31=n6(),ps1=iW(),PT=CT();class e31 extends PT.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let B=this.cache.getAccessToken();if(!F.accessToken)F.accessToken=B;try{return await this.finishAuthentication(F,A,B)}catch(J){if(J instanceof NT.MongoError&&J.code===NT.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(F,A);else throw J}}let $=await this.fetchAccessToken(A);this.cache.put($),F.accessToken=$.accessToken,await this.finishAuthentication(F,A,$.accessToken)}async fetchAccessToken(F){let A=new AbortController,$={timeoutContext:A.signal,version:ps1.OIDC_VERSION};if(F.username)$.username=F.username;if(F.mechanismProperties.TOKEN_RESOURCE)$.tokenAudience=F.mechanismProperties.TOKEN_RESOURCE;let B=o31.Timeout.expires(PT.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback($),B])}catch(J){if(o31.TimeoutError.is(J))throw A.abort(),new NT.MongoOIDCError(`OIDC callback timed out after ${PT.AUTOMATED_TIMEOUT_MS}ms.`);throw J}finally{B.clear()}}}F91.AutomatedCallbackWorkflow=e31});var X91=Q((B91)=>{Object.defineProperty(B91,"__esModule",{value:!0});B91.callback=void 0;var $91=JM(),jT=B1(),is1=W1(),as1=Object.freeze({Metadata:"true",Accept:"application/json"}),ns1="Azure endpoint did not return a value with only access_token and expires_in properties",rs1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",ts1=async(F)=>{let{tokenAudience:A,username:$}=F;if(!A)throw new jT.MongoAzureError(rs1);let B=await ss1(A,$);if(!os1(B))throw new jT.MongoAzureError(ns1);return B};B91.callback=ts1;async function ss1(F,A){let $=new URL($91.AZURE_BASE_URL);(0,$91.addAzureParams)($,F,A);let B=await(0,is1.get)($,{headers:as1});if(B.status!==200)throw new jT.MongoAzureError(`Status code ${B.status} returned from the Azure endpoint. Response body: ${B.body}`);let J=JSON.parse(B.body);return{accessToken:J.access_token,expiresInSeconds:Number(J.expires_in)}}function os1(F){if(F==null||typeof F!=="object")return!1;return"accessToken"in F&&typeof F.accessToken==="string"&&"expiresInSeconds"in F&&typeof F.expiresInSeconds==="number"}});var Z91=Q((D91)=>{Object.defineProperty(D91,"__esModule",{value:!0});D91.callback=void 0;var Y91=B1(),es1=W1(),Fo1="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",Ao1=Object.freeze({"Metadata-Flavor":"Google"}),$o1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",Bo1=async(F)=>{let A=F.tokenAudience;if(!A)throw new Y91.MongoGCPError($o1);return await Jo1(A)};D91.callback=Bo1;async function Jo1(F){let A=new URL(Fo1);A.searchParams.append("audience",F);let $=await(0,es1.get)(A,{headers:Ao1});if($.status!==200)throw new Y91.MongoGCPError(`Status code ${$.status} returned from the GCP endpoint. Response body: ${$.body}`);return{accessToken:$.body}}});var K91=Q((W91)=>{Object.defineProperty(W91,"__esModule",{value:!0});W91.callback=void 0;var Xo1=x("fs/promises"),Yo1="/var/run/secrets/kubernetes.io/serviceaccount/token",U91="AZURE_FEDERATED_TOKEN_FILE",z91="AWS_WEB_IDENTITY_TOKEN_FILE",Do1=async()=>{let F;if(process.env[U91])F=process.env[U91];else if(process.env[z91])F=process.env[z91];else F=Yo1;return{accessToken:await(0,Xo1.readFile)(F,"utf8")}};W91.callback=Do1});var MT=Q((Q91)=>{Object.defineProperty(Q91,"__esModule",{value:!0});Q91.TokenCache=void 0;var Go1=B1();class aW extends Go1.MongoDriverError{}class q91{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new aW("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new aW("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new aW("Attempted to get IDP information when none exists.");return this.idpInfo}put(F,A){if(this.accessToken=F.accessToken,this.refreshToken=F.refreshToken,this.expiresInSeconds=F.expiresInSeconds,A)this.idpInfo=A}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}Q91.TokenCache=q91});var w91=Q((E91)=>{Object.defineProperty(E91,"__esModule",{value:!0});E91.callback=void 0;var Zo1=x("fs"),Uo1=B1(),zo1="OIDC_TOKEN_FILE must be set in the environment.",Wo1=async()=>{let F=process.env.OIDC_TOKEN_FILE;if(!F)throw new Uo1.MongoAWSError(zo1);return{accessToken:await Zo1.promises.readFile(F,"utf8")}};E91.callback=Wo1});var iW=Q((P91)=>{Object.defineProperty(P91,"__esModule",{value:!0});P91.MongoDBOIDC=P91.OIDC_WORKFLOWS=P91.OIDC_VERSION=void 0;var C91=B1(),Ho1=v8(),nW=RT(),Ko1=X91(),qo1=Z91(),Qo1=K91(),rW=MT(),Vo1=w91(),Eo1="AuthContext must provide credentials.";P91.OIDC_VERSION=1;P91.OIDC_WORKFLOWS=new Map;P91.OIDC_WORKFLOWS.set("test",()=>new nW.AutomatedCallbackWorkflow(new rW.TokenCache,Vo1.callback));P91.OIDC_WORKFLOWS.set("azure",()=>new nW.AutomatedCallbackWorkflow(new rW.TokenCache,Ko1.callback));P91.OIDC_WORKFLOWS.set("gcp",()=>new nW.AutomatedCallbackWorkflow(new rW.TokenCache,qo1.callback));P91.OIDC_WORKFLOWS.set("k8s",()=>new nW.AutomatedCallbackWorkflow(new rW.TokenCache,Qo1.callback));class N91 extends Ho1.AuthProvider{constructor(F){super();if(!F)throw new C91.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=F}async auth(F){let{connection:A,reauthenticating:$,response:B}=F;if(B?.speculativeAuthenticate?.done&&!$)return;let J=I91(F);if($)await this.workflow.reauthenticate(A,J);else await this.workflow.execute(A,J,B)}async prepare(F,A){let{connection:$}=A,B=I91(A),J=await this.workflow.speculativeAuth($,B);return{...F,...J}}}P91.MongoDBOIDC=N91;function I91(F){let{credentials:A}=F;if(!A)throw new C91.MongoMissingCredentialsError(Eo1);return A}});var O91=Q((T91)=>{Object.defineProperty(T91,"__esModule",{value:!0});T91.HumanCallbackWorkflow=void 0;var wo1=Y0(),zD=B1(),j91=n6(),Io1=iW(),TT=CT();class M91 extends TT.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let Y=this.cache.getAccessToken();F.accessToken=Y;try{return await this.finishAuthentication(F,A,Y)}catch(D){if(D instanceof zD.MongoError&&D.code===zD.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete F.accessToken,await this.execute(F,A);else throw D}}if(this.cache.hasRefreshToken){let Y=this.cache.getRefreshToken(),D=await this.fetchAccessToken(this.cache.getIdpInfo(),A,Y);this.cache.put(D),F.accessToken=D.accessToken;try{return await this.finishAuthentication(F,A,D.accessToken)}catch(G){if(G instanceof zD.MongoError&&G.code===zD.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete F.accessToken,await this.execute(F,A);else throw G}}let $=await this.startAuthentication(F,A),B=$.conversationId,J=wo1.BSON.deserialize($.payload.buffer),X=await this.fetchAccessToken(J,A);return this.cache.put(X,J),F.accessToken=X.accessToken,await this.finishAuthentication(F,A,X.accessToken,B)}async fetchAccessToken(F,A,$){let B=new AbortController,J={timeoutContext:B.signal,version:Io1.OIDC_VERSION,idpInfo:F};if(A.username)J.username=A.username;if($)J.refreshToken=$;let X=j91.Timeout.expires(TT.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(J),X])}catch(Y){if(j91.TimeoutError.is(Y))throw B.abort(),new zD.MongoOIDCError(`OIDC callback timed out after ${TT.HUMAN_TIMEOUT_MS}ms.`);throw Y}finally{X.clear()}}}T91.HumanCallbackWorkflow=M91});var x91=Q((u91)=>{Object.defineProperty(u91,"__esModule",{value:!0});u91.Plain=void 0;var Co1=Y0(),No1=B1(),Po1=W1(),Ro1=v8();class S91 extends Ro1.AuthProvider{async auth(F){let{connection:A,credentials:$}=F;if(!$)throw new No1.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:B,password:J}=$,Y={saslStart:1,mechanism:"PLAIN",payload:new Co1.Binary(Buffer.from(`\x00${B}\x00${J}`)),autoAuthorize:1};await A.command((0,Po1.ns)("$external.$cmd"),Y,void 0)}}u91.Plain=S91});var p91=Q((c91)=>{Object.defineProperty(c91,"__esModule",{value:!0});c91.ScramSHA256=c91.ScramSHA1=void 0;var jo1=kP(),IF=x("crypto"),kT=Y0(),I2=B1(),oW=W1(),Mo1=v8(),b91=n2();class ST extends Mo1.AuthProvider{constructor(F){super();this.cryptoMethod=F||"sha1"}async prepare(F,A){let $=this.cryptoMethod,B=A.credentials;if(!B)throw new I2.MongoMissingCredentialsError("AuthContext must provide credentials.");let J=await(0,oW.randomBytes)(24);return A.nonce=J,{...F,speculativeAuthenticate:{...v91($,B,J),db:B.source}}}async auth(F){let{reauthenticating:A,response:$}=F;if($?.speculativeAuthenticate&&!A)return await h91(this.cryptoMethod,$.speculativeAuthenticate,F);return await To1(this.cryptoMethod,F)}}function _91(F){return F.replace("=","=3D").replace(",","=2C")}function y91(F,A){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(F,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(A.toString("base64"),"utf8")])}function v91(F,A,$){let B=_91(A.username);return{saslStart:1,mechanism:F==="sha1"?b91.AuthMechanism.MONGODB_SCRAM_SHA1:b91.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new kT.Binary(Buffer.concat([Buffer.from("n,,","utf8"),y91(B,$)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function To1(F,A){let{connection:$,credentials:B}=A;if(!B)throw new I2.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!A.nonce)throw new I2.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let J=A.nonce,X=B.source,Y=v91(F,B,J),D=await $.command((0,oW.ns)(`${X}.$cmd`),Y,void 0);await h91(F,D,A)}async function h91(F,A,$){let{connection:B,credentials:J}=$;if(!J)throw new I2.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!$.nonce)throw new I2.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let X=$.nonce,Y=J.source,D=_91(J.username),G=J.password,Z=F==="sha256"?(0,jo1.saslprep)(G):ko1(D,G),U=Buffer.isBuffer(A.payload)?new kT.Binary(A.payload):A.payload,z=g91(U),W=parseInt(z.i,10);if(W&&W<4096)throw new I2.MongoRuntimeError(`Server returned an invalid iteration count ${W}`);let{s:H,r:K}=z;if(K.startsWith("nonce"))throw new I2.MongoRuntimeError(`Server returned an invalid nonce: ${K}`);let q=`c=biws,r=${K}`,V=xo1(Z,Buffer.from(H,"base64"),W,F),E=tW(F,V,"Client Key"),L=tW(F,V,"Server Key"),w=So1(F,E),I=[y91(D,X),U.toString("utf8"),q].join(","),P=tW(F,w,I),M=`p=${Oo1(E,P)}`,u=[q,M].join(","),g=tW(F,L,I),S={saslContinue:1,conversationId:A.conversationId,payload:new kT.Binary(Buffer.from(u))},O=await B.command((0,oW.ns)(`${Y}.$cmd`),S,void 0),p=g91(O.payload);if(!bo1(Buffer.from(p.v,"base64"),g))throw new I2.MongoRuntimeError("Server returned an invalid signature");if(O.done!==!1)return;let m={saslContinue:1,conversationId:O.conversationId,payload:Buffer.alloc(0)};await B.command((0,oW.ns)(`${Y}.$cmd`),m,void 0)}function g91(F){let A=F.toString("utf8"),$={},B=A.split(",");for(let J=0;J<B.length;J++){let X=(B[J].match(/^([^=]*)=(.*)$/)??[]).slice(1);$[X[0]]=X[1]}return $}function ko1(F,A){if(typeof F!=="string")throw new I2.MongoInvalidArgumentError("Username must be a string");if(typeof A!=="string")throw new I2.MongoInvalidArgumentError("Password must be a string");if(A.length===0)throw new I2.MongoInvalidArgumentError("Password cannot be empty");let $;try{$=IF.createHash("md5")}catch(B){if(IF.getFips())throw Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw B}return $.update(`${F}:mongo:${A}`,"utf8"),$.digest("hex")}function Oo1(F,A){if(!Buffer.isBuffer(F))F=Buffer.from(F);if(!Buffer.isBuffer(A))A=Buffer.from(A);let $=Math.max(F.length,A.length),B=[];for(let J=0;J<$;J+=1)B.push(F[J]^A[J]);return Buffer.from(B).toString("base64")}function So1(F,A){return IF.createHash(F).update(A).digest()}function tW(F,A,$){return IF.createHmac(F,A).update($).digest()}var sW={},OT=0;function uo1(){sW={},OT=0}var fo1={sha256:32,sha1:20};function xo1(F,A,$,B){let J=[F,A.toString("base64"),$].join("_");if(sW[J]!=null)return sW[J];let X=IF.pbkdf2Sync(F,A,$,fo1[B],B);if(OT>=200)uo1();return sW[J]=X,OT+=1,X}function bo1(F,A){if(F.length!==A.length)return!1;if(typeof IF.timingSafeEqual==="function")return IF.timingSafeEqual(F,A);let $=0;for(let B=0;B<F.length;B++)$|=F[B]^A[B];return $===0}class m91 extends ST{constructor(){super("sha1")}}c91.ScramSHA1=m91;class d91 extends ST{constructor(){super("sha256")}}c91.ScramSHA256=d91});var s91=Q((r91)=>{Object.defineProperty(r91,"__esModule",{value:!0});r91.X509=void 0;var i91=B1(),_o1=W1(),yo1=v8();class n91 extends yo1.AuthProvider{async prepare(F,A){let{credentials:$}=A;if(!$)throw new i91.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...F,speculativeAuthenticate:a91($)}}async auth(F){let{connection:A,credentials:$}=F;if(!$)throw new i91.MongoMissingCredentialsError("AuthContext must provide credentials.");if(F.response?.speculativeAuthenticate)return;await A.command((0,_o1.ns)("$external.$cmd"),a91($),void 0)}}r91.X509=n91;function a91(F){let A={authenticate:1,mechanism:"MONGODB-X509"};if(F.username)A.user=F.username;return A}});var fT=Q(($21)=>{Object.defineProperty($21,"__esModule",{value:!0});$21.MongoClientAuthProviders=void 0;var vo1=ZW(),ho1=l31(),F21=iW(),mo1=RT(),do1=O91(),o91=MT(),co1=x91(),o8=n2(),e91=p91(),lo1=s91(),uT=B1(),po1=new Map([[o8.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:F})=>new ho1.MongoDBAWS(F)],[o8.AuthMechanism.MONGODB_CR,()=>{throw new uT.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[o8.AuthMechanism.MONGODB_GSSAPI,()=>new vo1.GSSAPI],[o8.AuthMechanism.MONGODB_OIDC,(F)=>new F21.MongoDBOIDC(io1(F))],[o8.AuthMechanism.MONGODB_PLAIN,()=>new co1.Plain],[o8.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new e91.ScramSHA1],[o8.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new e91.ScramSHA256],[o8.AuthMechanism.MONGODB_X509,()=>new lo1.X509]]);class A21{constructor(){this.existingProviders=new Map}getOrCreateProvider(F,A){let $=this.existingProviders.get(F);if($)return $;let B=po1.get(F);if(!B)throw new uT.MongoInvalidArgumentError(`authMechanism ${F} not supported`);let J=B(A);return this.existingProviders.set(F,J),J}}$21.MongoClientAuthProviders=A21;function io1(F){if(F.OIDC_HUMAN_CALLBACK)return new do1.HumanCallbackWorkflow(new o91.TokenCache,F.OIDC_HUMAN_CALLBACK);else if(F.OIDC_CALLBACK)return new mo1.AutomatedCallbackWorkflow(new o91.TokenCache,F.OIDC_CALLBACK);else{let A=F.ENVIRONMENT,$=F21.OIDC_WORKFLOWS.get(A)?.();if(!$)throw new uT.MongoInvalidArgumentError(`Could not load workflow for environment ${F.ENVIRONMENT}`);return $}}});var bT=Q((J21)=>{Object.defineProperty(J21,"__esModule",{value:!0});J21.ClientBulkWriteOperation=void 0;var ao1=q0(),no1=W1(),ro1=K6(),CF=T0();class xT extends ro1.CommandOperation{get commandName(){return"bulkWrite"}constructor(F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=ao1.ClientBulkWriteCursorResponse,this.commandBuilder=F,this.options=A,this.ns=new no1.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(F){return F}buildCommandDocument(F,A){let $=this.commandBuilder.buildBatch(F.description.maxMessageSizeBytes,F.description.maxWriteBatchSize,F.description.maxBsonObjectSize);if(!this.canRetryWrite)this.options.willRetryWrite=!1;return $}}J21.ClientBulkWriteOperation=xT;(0,CF.defineAspects)(xT,[CF.Aspect.WRITE_OPERATION,CF.Aspect.SKIP_COLLATION,CF.Aspect.CURSOR_CREATING,CF.Aspect.RETRYABLE,CF.Aspect.COMMAND_BATCHING,CF.Aspect.SUPPORTS_RAW_DATA])});var Z21=Q((D21)=>{Object.defineProperty(D21,"__esModule",{value:!0});D21.ClientBulkWriteCursor=void 0;var to1=bT(),so1=X4(),Y21=W1(),oo1=I4();class gT extends oo1.AbstractCursor{constructor(F,A,$={}){super(F,new Y21.MongoDBNamespace("admin","$cmd"),$);this.commandBuilder=A,this.clientBulkWriteOptions=$}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let F=(0,Y21.mergeOptions)({},this.clientBulkWriteOptions);return delete F.session,new gT(this.client,this.commandBuilder,{...F})}async _initialize(F){let A=new to1.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:F}),$=await(0,so1.executeOperation)(this.client,A,this.timeoutContext);return this.cursorResponse=$,{server:A.server,session:F,response:$}}}D21.ClientBulkWriteCursor=gT});var C21=Q((Q21)=>{Object.defineProperty(Q21,"__esModule",{value:!0});Q21.buildReplaceOneOperation=Q21.buildUpdateManyOperation=Q21.buildUpdateOneOperation=Q21.buildDeleteManyOperation=Q21.buildDeleteOneOperation=Q21.buildInsertOneOperation=Q21.ClientBulkWriteCommandBuilder=void 0;Q21.buildOperation=vT;var _T=Y0(),U21=gY(),WD=B1(),W21=C$(),hT=W1(),z21=1000;class H21{constructor(F,A,$){this.models=F,this.options=A,this.pkFactory=$??hT.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(F,A,$){this.isBatchRetryable=!0;let B=0,J=0,X=this.baseCommand(),Y=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let D=this.models[this.currentModelIndex],G=D.namespace,Z=Y.get(G);if(D.name==="deleteMany"||D.name==="updateMany")this.isBatchRetryable=!1;if(Z!=null){let U=vT(D,Z,this.pkFactory,this.options),z;try{z=_T.BSON.serialize(U)}catch(W){throw new WD.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:W})}if(yT("ops",z,$),B+z.length<F&&X.ops.documents.length<A)B=z21+X.ops.push(U,z),this.currentModelIndex++;else break}else{Y.set(G,J);let U={ns:G},z=vT(D,J,this.pkFactory,this.options),W,H;try{W=_T.BSON.serialize(U),H=_T.BSON.serialize(z)}catch(K){throw new WD.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:K})}if(yT("nsInfo",W,$),yT("ops",H,$),B+W.length+H.length<F&&X.ops.documents.length<A)B=z21+X.nsInfo.push(U,W)+X.ops.push(z,H),J++,this.currentModelIndex++;else break}}return this.lastOperations=X.ops.documents,X}baseCommand(){let F={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new U21.DocumentSequence("ops"),nsInfo:new U21.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)F.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)F.let=this.options.let;if(this.options.comment!==void 0)F.comment=this.options.comment;return F}}Q21.ClientBulkWriteCommandBuilder=H21;function yT(F,A,$){if(A.length>$)throw new WD.MongoInvalidArgumentError(`Client bulk write operation ${F} of length ${A.length} exceeds the max bson object size of ${$}`)}var eo1=(F,A,$)=>{let B={insert:A,document:F.document};return B.document._id=F.document._id??$.createPk(),B};Q21.buildInsertOneOperation=eo1;var Fe1=(F,A)=>{return K21(F,A,!1)};Q21.buildDeleteOneOperation=Fe1;var Ae1=(F,A)=>{return K21(F,A,!0)};Q21.buildDeleteManyOperation=Ae1;function K21(F,A,$){let B={delete:A,multi:$,filter:F.filter};if(F.hint)B.hint=F.hint;if(F.collation)B.collation=F.collation;return B}var $e1=(F,A,$)=>{return q21(F,A,!1,$)};Q21.buildUpdateOneOperation=$e1;var Be1=(F,A,$)=>{return q21(F,A,!0,$)};Q21.buildUpdateManyOperation=Be1;function Je1(F,A){if(!(0,hT.hasAtomicOperators)(F,A))throw new WD.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function q21(F,A,$,B){Je1(F.update,B);let J={update:A,multi:$,filter:F.filter,updateMods:F.update};if(F.hint)J.hint=F.hint;if(F.upsert)J.upsert=F.upsert;if(F.arrayFilters)J.arrayFilters=F.arrayFilters;if(F.collation)J.collation=F.collation;if(!$&&"sort"in F&&F.sort!=null)J.sort=(0,W21.formatSort)(F.sort);return J}var Xe1=(F,A)=>{if((0,hT.hasAtomicOperators)(F.replacement))throw new WD.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let $={update:A,multi:!1,filter:F.filter,updateMods:F.replacement};if(F.hint)$.hint=F.hint;if(F.upsert)$.upsert=F.upsert;if(F.collation)$.collation=F.collation;if(F.sort!=null)$.sort=(0,W21.formatSort)(F.sort);return $};Q21.buildReplaceOneOperation=Xe1;function vT(F,A,$,B){switch(F.name){case"insertOne":return Q21.buildInsertOneOperation(F,A,$);case"deleteOne":return Q21.buildDeleteOneOperation(F,A);case"deleteMany":return Q21.buildDeleteManyOperation(F,A);case"updateOne":return Q21.buildUpdateOneOperation(F,A,B);case"updateMany":return Q21.buildUpdateManyOperation(F,A,B);case"replaceOne":return Q21.buildReplaceOneOperation(F,A)}}});var j21=Q((P21)=>{Object.defineProperty(P21,"__esModule",{value:!0});P21.ClientBulkWriteResultsMerger=void 0;var Ge1=LF(),Ze1=B1(),Ue1={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class N21{static unacknowledged(){return Ue1}constructor(F){if(this.options=F,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},F.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(F){let A;try{for await(let $ of F)if($.ok===1){if(this.options.verboseResults)this.processDocument(F,$)}else if(this.options.ordered){let B=new Ze1.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw B.writeErrors.set($.idx+this.currentBatchOffset,{code:$.code,message:$.errmsg}),B.partialResult=this.result,B}else this.writeErrors.set($.idx+this.currentBatchOffset,{code:$.code,message:$.errmsg})}catch($){if($ instanceof Ge1.MongoWriteConcernError){let B=$.result;if(A={insertedCount:B.nInserted,upsertedCount:B.nUpserted,matchedCount:B.nMatched,modifiedCount:B.nModified,deletedCount:B.nDeleted,writeConcernError:B.writeConcernError},this.options.verboseResults&&B.cursor.firstBatch){for(let J of B.cursor.firstBatch)if(J.ok===1)this.processDocument(F,J)}}else throw $}finally{if(F.response){let $=F.response;this.incrementCounts($)}this.currentBatchOffset+=F.operations.length}if(A){let $=A.writeConcernError;this.incrementCounts(A),this.writeConcernErrors.push({code:$.code,message:$.errmsg})}return this.result}processDocument(F,A){let $=F.operations[A.idx];if("insert"in $)this.result.insertResults?.set(A.idx+this.currentBatchOffset,{insertedId:$.document._id});if("update"in $){let B={matchedCount:A.n,modifiedCount:A.nModified??0,didUpsert:A.upserted!=null};if(A.upserted)B.upsertedId=A.upserted._id;this.result.updateResults?.set(A.idx+this.currentBatchOffset,B)}if("delete"in $)this.result.deleteResults?.set(A.idx+this.currentBatchOffset,{deletedCount:A.n})}incrementCounts(F){this.result.insertedCount+=F.insertedCount,this.result.upsertedCount+=F.upsertedCount,this.result.matchedCount+=F.matchedCount,this.result.modifiedCount+=F.modifiedCount,this.result.deletedCount+=F.deletedCount}}P21.ClientBulkWriteResultsMerger=N21});var u21=Q((O21)=>{Object.defineProperty(O21,"__esModule",{value:!0});O21.ClientBulkWriteExecutor=void 0;var M21=I4(),ze1=Z21(),NF=B1(),We1=n6(),He1=W1(),Ke1=W3(),qe1=X4(),Qe1=bT(),Ve1=C21(),T21=j21();class k21{constructor(F,A,$){if(A.length===0)throw new NF.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=F,this.operations=A,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...$},!this.options.writeConcern)this.options.writeConcern=Ke1.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new NF.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new NF.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let F=this.client.s.options.pkFactory,A=new Ve1.ClientBulkWriteCommandBuilder(this.operations,this.options,F),$=(0,He1.resolveTimeoutOptions)(this.client,this.options),B=We1.TimeoutContext.create($);if(this.options.writeConcern?.w===0){while(A.hasNextBatch()){let J=new Qe1.ClientBulkWriteOperation(A,this.options);await(0,qe1.executeOperation)(this.client,J,B)}return T21.ClientBulkWriteResultsMerger.unacknowledged()}else{let J=new T21.ClientBulkWriteResultsMerger(this.options);while(A.hasNextBatch()){let X=new M21.CursorTimeoutContext(B,Symbol()),Y={...this.options,timeoutContext:X,...$.timeoutMS!=null&&{timeoutMode:M21.CursorTimeoutMode.LIFETIME}},D=new ze1.ClientBulkWriteCursor(this.client,A,Y);try{await J.merge(D)}catch(G){if(G instanceof NF.MongoServerError&&!(G instanceof NF.MongoClientBulkWriteError)){let Z=new NF.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw Z.cause=G,Z.partialResult=J.bulkWriteResult,Z}else throw G}}if(J.writeConcernErrors.length>0||J.writeErrors.size>0){let X=new NF.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw X.writeConcernErrors=J.writeConcernErrors,X.writeErrors=J.writeErrors,X.partialResult=J.bulkWriteResult,X}return J.bulkWriteResult}}}O21.ClientBulkWriteExecutor=k21});var dT=Q((_21)=>{Object.defineProperty(_21,"__esModule",{value:!0});_21.WaitingForSuitableServerEvent=_21.ServerSelectionSucceededEvent=_21.ServerSelectionFailedEvent=_21.ServerSelectionStartedEvent=_21.ServerSelectionEvent=void 0;var Ee1=W1(),eW=T6();class o${constructor(F,A,$){this.selector=F,this.operation=$,this.topologyDescription=A}}_21.ServerSelectionEvent=o$;class f21 extends o${constructor(F,A,$){super(F,A,$);this.name=eW.SERVER_SELECTION_STARTED,this.message="Server selection started"}}_21.ServerSelectionStartedEvent=f21;class x21 extends o${constructor(F,A,$,B){super(F,A,B);this.name=eW.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=$}}_21.ServerSelectionFailedEvent=x21;class b21 extends o${constructor(F,A,$,B){super(F,A,B);this.name=eW.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:J,port:X}=Ee1.HostAddress.fromString($).toHostPort();this.serverHost=J,this.serverPort=X}}_21.ServerSelectionSucceededEvent=b21;class g21 extends o${constructor(F,A,$,B){super(F,A,B);this.name=eW.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=$}}_21.WaitingForSuitableServerEvent=g21});var pT=Q((v21)=>{Object.defineProperty(v21,"__esModule",{value:!0});v21.SrvPoller=v21.SrvPollingEvent=void 0;var Ne1=x("dns"),cT=x("timers"),Pe1=B1(),Re1=z9(),HD=W1();class lT{constructor(F){this.srvRecords=F}hostnames(){return new Set(this.srvRecords.map((F)=>HD.HostAddress.fromSrvRecord(F).toString()))}}v21.SrvPollingEvent=lT;class FH extends Re1.TypedEventEmitter{constructor(F){super();if(this.on("error",HD.noop),!F||!F.srvHost)throw new Pe1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=F.srvHost,this.srvMaxHosts=F.srvMaxHosts??0,this.srvServiceName=F.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)(0,cT.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)(0,cT.clearTimeout)(this._timeout);this._timeout=(0,cT.setTimeout)(()=>{this._poll().then(void 0,HD.squashError)},this.intervalMS)}success(F){this.haMode=!1,this.schedule(),this.emit(FH.SRV_RECORD_DISCOVERY,new lT(F))}failure(){this.haMode=!0,this.schedule()}async _poll(){let F=this.generation,A;try{A=await Ne1.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(F!==this.generation)return;let $=[];for(let B of A)try{(0,HD.checkParentDomainMatch)(B.name,this.srvHost),$.push(B)}catch(J){(0,HD.squashError)(J)}if(!$.length){this.failure();return}this.success($)}}v21.SrvPoller=FH;FH.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var t21=Q((n21)=>{Object.defineProperty(n21,"__esModule",{value:!0});n21.ServerCapabilities=n21.Topology=void 0;var Me1=FT(),g3=T6(),s2=B1(),F6=_8(),Te1=z9(),KD=J4(),iT=n6(),b3=W1(),c1=D9(),e8=gW(),m21=mM(),nT=iY(),aT=CY(),F5=dT(),AH=pT(),d21=PM(),ke1=0,qD=(0,b3.makeStateMachine)({[c1.STATE_CLOSED]:[c1.STATE_CLOSED,c1.STATE_CONNECTING],[c1.STATE_CONNECTING]:[c1.STATE_CONNECTING,c1.STATE_CLOSING,c1.STATE_CONNECTED,c1.STATE_CLOSED],[c1.STATE_CONNECTED]:[c1.STATE_CONNECTED,c1.STATE_CLOSING,c1.STATE_CLOSED],[c1.STATE_CLOSING]:[c1.STATE_CLOSING,c1.STATE_CLOSED]});class O0 extends Te1.TypedEventEmitter{constructor(F,A,$){super();if(this.on("error",b3.noop),this.client=F,$=$??{hosts:[b3.HostAddress.fromString("localhost:27017")],...Object.fromEntries(Me1.DEFAULT_OPTIONS.entries())},typeof A==="string")A=[b3.HostAddress.fromString(A)];else if(!Array.isArray(A))A=[A];let B=[];for(let G of A)if(typeof G==="string")B.push(b3.HostAddress.fromString(G));else if(G instanceof b3.HostAddress)B.push(G);else throw new s2.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(G)}`);let J=Oe1($),X=ke1++,Y=$.srvMaxHosts==null||$.srvMaxHosts===0||$.srvMaxHosts>=B.length?B:(0,b3.shuffle)(B,$.srvMaxHosts),D=new Map;for(let G of Y)D.set(G.toString(),new nT.ServerDescription(G));if(this.waitQueue=new b3.List,this.s={id:X,options:$,seedlist:B,state:c1.STATE_CLOSED,description:new d21.TopologyDescription(J,D,$.replicaSet,void 0,void 0,void 0,$),serverSelectionTimeoutMS:$.serverSelectionTimeoutMS,heartbeatFrequencyMS:$.heartbeatFrequencyMS,minHeartbeatFrequencyMS:$.minHeartbeatFrequencyMS,servers:new Map,credentials:$?.credentials,clusterTime:void 0,detectShardedTopology:(G)=>this.detectShardedTopology(G),detectSrvRecords:(G)=>this.detectSrvRecords(G)},this.mongoLogger=F.mongoLogger,this.component="topology",$.srvHost&&!$.loadBalanced)this.s.srvPoller=$.srvPoller??new AH.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:$.srvHost,srvMaxHosts:$.srvMaxHosts,srvServiceName:$.srvServiceName}),this.on(O0.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(F){let A=F.previousDescription.type,$=F.newDescription.type,B=A!==c1.TopologyType.Sharded&&$===c1.TopologyType.Sharded,X=!!this.s.srvPoller?.listeners(AH.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(B&&!X)this.s.srvPoller?.on(AH.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(F){let A=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(F,this.s.options.srvMaxHosts),this.s.description===A)return;c21(this),this.emitAndLog(O0.TOPOLOGY_DESCRIPTION_CHANGED,new e8.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new rT(this.lastHello())}async connect(F){this.connectionLock??=this._connect(F);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(F){if(F=F??{},this.s.state===c1.STATE_CONNECTED)return this;qD(this,c1.STATE_CONNECTING),this.emitAndLog(O0.TOPOLOGY_OPENING,new e8.TopologyOpeningEvent(this.s.id)),this.emitAndLog(O0.TOPOLOGY_DESCRIPTION_CHANGED,new e8.TopologyDescriptionChangedEvent(this.s.id,new d21.TopologyDescription(c1.TopologyType.Unknown),this.s.description));let A=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(A.map((Y)=>[Y.address,i21(this,Y)])),this.s.options.loadBalanced)for(let Y of A){let D=new nT.ServerDescription(Y.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(D)}let $=this.client.s.options.serverSelectionTimeoutMS,B=F.readPreference??KD.ReadPreference.primary,J=iT.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:$,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),X={operationName:"handshake",...F,timeoutContext:J};try{let Y=await this.selectServer((0,aT.readPreferenceServerSelector)(B),X);if(this.s.options.__skipPingOnConnect!==!0&&this.s.credentials){let G=await Y.pool.checkOut({timeoutContext:J});return Y.pool.checkIn(G),qD(this,c1.STATE_CONNECTED),this.emit(O0.OPEN,this),this.emit(O0.CONNECT,this),this}return qD(this,c1.STATE_CONNECTED),this.emit(O0.OPEN,this),this.emit(O0.CONNECT,this),this}catch(Y){throw this.close(),Y}}closeCheckedOutConnections(){for(let F of this.s.servers.values())return F.closeCheckedOutConnections()}close(){if(this.s.state===c1.STATE_CLOSED||this.s.state===c1.STATE_CLOSING)return;for(let F of this.s.servers.values())p21(F,this);if(this.s.servers.clear(),qD(this,c1.STATE_CLOSING),a21(this.waitQueue,new s2.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(AH.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(O0.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),qD(this,c1.STATE_CLOSED),this.emitAndLog(O0.TOPOLOGY_CLOSED,new e8.TopologyClosedEvent(this.s.id))}async selectServer(F,A){let $;if(typeof F!=="function")if(typeof F==="string")$=(0,aT.readPreferenceServerSelector)(KD.ReadPreference.fromString(F));else{let W;if(F instanceof KD.ReadPreference)W=F;else KD.ReadPreference.translate(A),W=A.readPreference||KD.ReadPreference.primary;$=(0,aT.readPreferenceServerSelector)(W)}else $=F;if(A={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...A},this.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionStartedEvent(F,this.description,A.operationName));let B;if(A.timeoutContext)B=A.timeoutContext.serverSelectionTimeout;else B=iT.Timeout.expires(A.serverSelectionTimeoutMS??0);let J=this.description.type===c1.TopologyType.Sharded,X=A.session,Y=X&&X.transaction;if(J&&Y&&Y.server){if(this.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionSucceededEvent(F,this.description,Y.server.pool.address,A.operationName));if(A.timeoutContext?.clearServerSelectionTimeout)B?.clear();return Y.server}let{promise:D,resolve:G,reject:Z}=(0,b3.promiseWithResolvers)(),U={serverSelector:$,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:Y,resolve:G,reject:Z,cancelled:!1,startTime:(0,b3.now)(),operationName:A.operationName,waitingLogged:!1,previousServer:A.previousServer},z=(0,b3.addAbortListener)(A.signal,function(){U.cancelled=!0,Z(this.reason)});this.waitQueue.push(U),l21(this);try{B?.throwIfExpired();let W=await(B?Promise.race([D,B]):D);if(A.timeoutContext?.csotEnabled()&&W.description.minRoundTripTime!==0)A.timeoutContext.minRoundTripTime=W.description.minRoundTripTime;return W}catch(W){if(iT.TimeoutError.is(W)){U.cancelled=!0;let H=new s2.MongoServerSelectionError(`Server selection timed out after ${B?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionFailedEvent(F,this.description,H,A.operationName));if(A.timeoutContext?.csotEnabled())throw new s2.MongoOperationTimeoutError("Timed out during server selection",{cause:H});throw H}throw W}finally{if(z?.[b3.kDispose](),A.timeoutContext?.clearServerSelectionTimeout)B?.clear()}}serverUpdateHandler(F){if(!this.s.description.hasServer(F.address))return;if(Se1(this.s.description,F))return;let A=this.s.description,$=this.s.description.servers.get(F.address);if(!$)return;let B=F.$clusterTime;if(B)(0,c1._advanceClusterTime)(this,B);let J=$&&$.equals(F);if(this.s.description=this.s.description.update(F),this.s.description.compatibilityError){this.emit(O0.ERROR,new s2.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!J){let X=this.s.description.servers.get(F.address);if(X)this.emit(O0.SERVER_DESCRIPTION_CHANGED,new e8.ServerDescriptionChangedEvent(this.s.id,F.address,$,X))}if(c21(this,F),this.waitQueue.length>0)l21(this);if(!J)this.emitAndLog(O0.TOPOLOGY_DESCRIPTION_CHANGED,new e8.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}auth(F,A){if(typeof F==="function")A=F,F=void 0;if(typeof A==="function")A(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===c1.STATE_CONNECTED}isDestroyed(){return this.s.state===c1.STATE_CLOSED}lastHello(){let F=Array.from(this.description.servers.values());if(F.length===0)return{};return F.filter((B)=>B.type!==c1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(F){this.s.clusterTime=F}}n21.Topology=O0;O0.SERVER_OPENING=g3.SERVER_OPENING;O0.SERVER_CLOSED=g3.SERVER_CLOSED;O0.SERVER_DESCRIPTION_CHANGED=g3.SERVER_DESCRIPTION_CHANGED;O0.TOPOLOGY_OPENING=g3.TOPOLOGY_OPENING;O0.TOPOLOGY_CLOSED=g3.TOPOLOGY_CLOSED;O0.TOPOLOGY_DESCRIPTION_CHANGED=g3.TOPOLOGY_DESCRIPTION_CHANGED;O0.ERROR=g3.ERROR;O0.OPEN=g3.OPEN;O0.CONNECT=g3.CONNECT;O0.CLOSE=g3.CLOSE;O0.TIMEOUT=g3.TIMEOUT;function p21(F,A){for(let $ of g3.LOCAL_SERVER_EVENTS)F.removeAllListeners($);F.close(),A.emitAndLog(O0.SERVER_CLOSED,new e8.ServerClosedEvent(A.s.id,F.description.address));for(let $ of g3.SERVER_RELAY_EVENTS)F.removeAllListeners($)}function Oe1(F){if(F?.directConnection)return c1.TopologyType.Single;if(F?.replicaSet)return c1.TopologyType.ReplicaSetNoPrimary;if(F?.loadBalanced)return c1.TopologyType.LoadBalanced;return c1.TopologyType.Unknown}function i21(F,A){F.emitAndLog(O0.SERVER_OPENING,new e8.ServerOpeningEvent(F.s.id,A.address));let $=new m21.Server(F,A,F.s.options);for(let B of g3.SERVER_RELAY_EVENTS)$.on(B,(J)=>F.emit(B,J));return $.on(m21.Server.DESCRIPTION_RECEIVED,(B)=>F.serverUpdateHandler(B)),$.connect(),$}function c21(F,A){if(A&&F.s.servers.has(A.address)){let $=F.s.servers.get(A.address);if($){if($.s.description=A,A.error instanceof s2.MongoError&&A.error.hasErrorLabel(s2.MongoErrorLabel.ResetPool)){let B=A.error.hasErrorLabel(s2.MongoErrorLabel.InterruptInUseConnections);$.pool.clear({interruptInUseConnections:B})}else if(A.error==null){let B=F.s.description.type;if(A.isDataBearing||A.type!==c1.ServerType.Unknown&&B===c1.TopologyType.Single)$.pool.ready()}}}for(let $ of F.description.servers.values())if(!F.s.servers.has($.address)){let B=i21(F,$);F.s.servers.set($.address,B)}for(let $ of F.s.servers){let B=$[0];if(F.description.hasServer(B))continue;if(!F.s.servers.has(B))continue;let J=F.s.servers.get(B);if(F.s.servers.delete(B),J)p21(J,F)}}function a21(F,A){while(F.length){let $=F.shift();if(!$)continue;if(!$.cancelled){if($.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))$.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionFailedEvent($.serverSelector,$.topologyDescription,A,$.operationName));$.reject(A)}}}function l21(F){if(F.s.state===c1.STATE_CLOSED){a21(F.waitQueue,new s2.MongoTopologyClosedError);return}let A=F.description.type===c1.TopologyType.Sharded,$=Array.from(F.description.servers.values()),B=F.waitQueue.length;for(let J=0;J<B;++J){let X=F.waitQueue.shift();if(!X)continue;if(X.cancelled)continue;let Y;try{let{serverSelector:Z,previousServer:U}=X;Y=Z?Z(F.description,$,U?[U]:[]):$}catch(Z){if(F.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionFailedEvent(X.serverSelector,F.description,Z,X.operationName));X.reject(Z);continue}let D;if(Y.length===0){if(!X.waitingLogged){if(F.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.INFORMATIONAL))F.client.mongoLogger?.info(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.WaitingForSuitableServerEvent(X.serverSelector,F.description,F.s.serverSelectionTimeoutMS!==0?F.s.serverSelectionTimeoutMS-((0,b3.now)()-X.startTime):-1,X.operationName));X.waitingLogged=!0}F.waitQueue.push(X);continue}else if(Y.length===1)D=F.s.servers.get(Y[0].address);else{let Z=(0,b3.shuffle)(Y,2),U=F.s.servers.get(Z[0].address),z=F.s.servers.get(Z[1].address);D=U&&z&&U.s.operationCount<z.s.operationCount?U:z}if(!D){let Z=new s2.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",F.description);if(F.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionFailedEvent(X.serverSelector,F.description,Z,X.operationName));X.reject(Z);return}let G=X.transaction;if(A&&G&&G.isActive&&D)G.pinServer(D);if(F.client.mongoLogger?.willLog(F6.MongoLoggableComponent.SERVER_SELECTION,F6.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(F6.MongoLoggableComponent.SERVER_SELECTION,new F5.ServerSelectionSucceededEvent(X.serverSelector,X.topologyDescription,D.pool.address,X.operationName));X.resolve(D)}if(F.waitQueue.length>0)for(let[,J]of F.s.servers)process.nextTick(function(){return J.requestCheck()})}function Se1(F,A){let B=F.servers.get(A.address)?.topologyVersion;return(0,nT.compareTopologyVersion)(B,A.topologyVersion)>0}class rT{constructor(F){this.minWireVersion=F.minWireVersion||0,this.maxWireVersion=F.maxWireVersion||0}get hasAggregationCursor(){return!0}get hasWriteCommands(){return!0}get hasTextSearch(){return!0}get hasAuthCommands(){return!0}get hasListCollectionsCommand(){return!0}get hasListIndexesCommand(){return!0}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return!0}get commandsTakeCollation(){return!0}}n21.ServerCapabilities=rT});var p8=Q(($71)=>{Object.defineProperty($71,"__esModule",{value:!0});$71.MongoClient=$71.ServerApiVersion=void 0;var tT=x("fs"),fe1=Y0(),xe1=wF(),be1=zW(),ge1=n2(),sT=pj(),_e1=q0(),s21=FT(),ye1=T6(),ve1=pW(),oT=B1(),he1=fT(),o21=_8(),me1=z9(),de1=u21(),ce1=X4(),le1=T0(),e21=J4(),pe1=g$(),ie1=CY(),F71=t21(),A71=b$(),t6=W1();$71.ServerApiVersion=Object.freeze({v1:"1"});class eT extends me1.TypedEventEmitter{constructor(F,A){super();this.driverInfoList=[],this.on("error",t6.noop),this.options=(0,s21.parseOptions)(F,this,A),this.appendMetadata(this.options.driverInfo);let $=Object.values(this.options.mongoLoggerOptions.componentSeverities).some((J)=>J!==o21.SeverityLevel.OFF);this.mongoLogger=$?new o21.MongoLogger(this.options.mongoLoggerOptions):void 0;let B=this;this.s={url:F,bsonOptions:(0,fe1.resolveBSONOptions)(this.options),namespace:(0,t6.ns)("admin"),hasBeenClosed:!1,sessionPool:new A71.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new he1.MongoClientAuthProviders,get options(){return B.options},get readConcern(){return B.options.readConcern},get writeConcern(){return B.options.writeConcern},get readPreference(){return B.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(F){if(this.driverInfoList.some(($)=>(0,sT.isDriverInfoEqual)($,F)))return;this.driverInfoList.push(F),this.options.metadata=(0,sT.makeClientMetadata)(this.driverInfoList,this.options),this.options.extendedMetadata=(0,sT.addContainerMetadata)(this.options.metadata).then(void 0,t6.squashError).then(($)=>$??{})}checkForNonGenuineHosts(){let F=this.options.hosts.filter((J)=>(0,t6.isHostMatch)(t6.DOCUMENT_DB_CHECK,J.host)),A=(0,t6.isHostMatch)(t6.DOCUMENT_DB_CHECK,this.options.srvHost),$=this.options.hosts.filter((J)=>(0,t6.isHostMatch)(t6.COSMOS_DB_CHECK,J.host)),B=(0,t6.isHostMatch)(t6.COSMOS_DB_CHECK,this.options.srvHost);if(F.length!==0||A)this.mongoLogger?.info("client",t6.DOCUMENT_DB_MSG);else if($.length!==0||B)this.mongoLogger?.info("client",t6.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(F){this.options.monitorCommands=F}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(F,A){if(this.autoEncrypter)throw new oT.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new de1.ClientBulkWriteExecutor(this,F,(0,t6.resolveOptions)(this,A)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let F=this.options;if(F.tls){if(typeof F.tlsCAFile==="string")F.ca??=await tT.promises.readFile(F.tlsCAFile);if(typeof F.tlsCRLFile==="string")F.crl??=await tT.promises.readFile(F.tlsCRLFile);if(typeof F.tlsCertificateKeyFile==="string"){if(!F.key||!F.cert){let $=await tT.promises.readFile(F.tlsCertificateKeyFile);F.key??=$,F.cert??=$}}}if(typeof F.srvHost==="string"){let $=await(0,s21.resolveSRVRecord)(F);for(let[B,J]of $.entries())F.hosts[B]=J}if(F.credentials?.mechanism===ge1.AuthMechanism.MONGODB_OIDC){let $=F.credentials?.mechanismProperties?.ALLOWED_HOSTS||be1.DEFAULT_ALLOWED_HOSTS;if(!F.credentials?.mechanismProperties?.ENVIRONMENT){for(let J of F.hosts)if(!(0,t6.hostMatchesWildcards)(J.toHostPort().host,$))throw new oT.MongoInvalidArgumentError(`Host '${J}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${$.join(",")}'`)}}this.topology=new F71.Topology(this,F.hosts,F),this.topology.once(F71.Topology.OPEN,()=>this.emit("open",this));for(let $ of ye1.MONGO_CLIENT_EVENTS)this.topology.on($,(...B)=>this.emit($,...B));let A=async()=>{try{await this.topology?.connect(F)}catch($){throw this.topology?.close(),$}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await A(),await F.encrypter.connectInternalClient();else await A();return this}async close(F=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let F=Array.from(this.s.activeCursors,(G)=>G.close());this.s.activeCursors.clear(),await Promise.all(F);let A=Array.from(this.s.activeSessions,(G)=>G.endSession());if(this.s.activeSessions.clear(),await Promise.all(A),this.topology==null)return;let $=(0,ie1.readPreferenceServerSelector)(e21.ReadPreference.primaryPreferred),B=this.topology.description,J=Array.from(B.servers.values());if($(B,J).length!==0){let G=Array.from(this.s.sessionPool.sessions,({id:Z})=>Z);if(G.length!==0)try{class Z extends le1.AbstractOperation{constructor(){super(...arguments);this.ns=t6.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=_e1.MongoDBResponse}buildCommand(U,z){return{endSessions:G}}buildOptions(U){return{timeoutContext:U,readPreference:e21.ReadPreference.primaryPreferred,noResponse:!0}}get commandName(){return"endSessions"}}await(0,ce1.executeOperation)(this,new Z)}catch(Z){(0,t6.squashError)(Z)}}let Y=this.topology;this.topology=void 0,Y.close();let{encrypter:D}=this.options;if(D)await D.close(this)}db(F,A){if(A=A??{},!F)F=this.s.options.dbName;let $=Object.assign({},this.options,A);return new ve1.Db(this,F,$)}static async connect(F,A){return await new this(F,A).connect()}startSession(F){let A=new A71.ClientSession(this,this.s.sessionPool,{explicit:!0,...F},this.options);return this.s.activeSessions.add(A),A.once("ended",()=>{this.s.activeSessions.delete(A)}),A}async withSession(F,A){let $={owner:Symbol(),...typeof F==="object"?F:{}},B=typeof F==="function"?F:A;if(B==null)throw new oT.MongoInvalidArgumentError("Missing required callback parameter");let J=this.startSession($);try{return await B(J)}finally{try{await J.endSession()}catch(X){(0,t6.squashError)(X)}}}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new xe1.ChangeStream(this,F,(0,t6.resolveOptions)(this,A))}}$71.MongoClient=eT;(0,pe1.configureResourceManagement)(eT.prototype)});var g$=Q((J71)=>{Object.defineProperty(J71,"__esModule",{value:!0});J71.configureResourceManagement=QD;J71.configureExplicitResourceManagement=ne1;function QD(F){Symbol.asyncDispose&&Object.defineProperty(F,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function ne1(){let{MongoClient:F}=p8(),{ClientSession:A}=b$(),{AbstractCursor:$}=I4(),{ChangeStream:B}=wF();QD(F.prototype),QD(A.prototype),QD($.prototype),QD(B.prototype)}});var I4=Q((U71)=>{Object.defineProperty(U71,"__esModule",{value:!0});U71.CursorTimeoutContext=U71.AbstractCursor=U71.CursorTimeoutMode=U71.CURSOR_FLAGS=void 0;var G71=x("stream"),e$=Y0(),s6=B1(),se1=z9(),X71=X4(),oe1=vj(),ee1=G11(),Y71=W2(),$H=J4(),F10=g$(),A10=b$(),Fk=n6(),K9=W1();U71.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function D71(){this.client.s.activeCursors.delete(this)}U71.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class BH extends se1.TypedEventEmitter{constructor(F,A,$={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",K9.noop),!F.s.isMongoClient)throw new s6.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=F,this.cursorNamespace=A,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:$.readPreference&&$.readPreference instanceof $H.ReadPreference?$.readPreference:$H.ReadPreference.primary,...(0,e$.pluckBSONSerializeOptions)($),timeoutMS:$?.timeoutContext?.csotEnabled()?$.timeoutContext.timeoutMS:$.timeoutMS,tailable:$.tailable,awaitData:$.awaitData},this.cursorOptions.timeoutMS!=null)if($.timeoutMode==null)if($.tailable){if($.awaitData){if($.maxAwaitTimeMS!=null&&$.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new s6.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=U71.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=U71.CursorTimeoutMode.LIFETIME;else{if($.tailable&&$.timeoutMode===U71.CursorTimeoutMode.LIFETIME)throw new s6.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=$.timeoutMode}else if($.timeoutMode!=null)throw new s6.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let B=Y71.ReadConcern.fromOptions($);if(B)this.cursorOptions.readConcern=B;if(typeof $.batchSize==="number")this.cursorOptions.batchSize=$.batchSize;if($.comment!==void 0)this.cursorOptions.comment=$.comment;if(typeof $.maxTimeMS==="number")this.cursorOptions.maxTimeMS=$.maxTimeMS;if(typeof $.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=$.maxAwaitTimeMS;this.cursorSession=$.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:$?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=$.timeoutContext,this.signal=$.signal,this.abortListener=(0,K9.addAbortListener)(this.signal,()=>void this.close().then(void 0,K9.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(F){this.cursorSession=F}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(D71))this.once("close",D71)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(F){let A=[],$=Math.min(F??this.documents?.length??0,this.documents?.length??0);for(let B=0;B<$;B++){let J=this.documents?.shift(this.deserializationOptions);if(J!=null)A.push(J)}return A}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let F=await this.next();if(F===null)return;yield F,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(F){(0,K9.squashError)(F)}}}stream(F){let A=new Z71(this),$=(0,K9.addAbortListener)(this.signal,function(){A.destroy(this.reason)});if(A.once("end",()=>{$?.[K9.kDispose]()}),F?.transform){let B=F.transform,J=A.pipe(new G71.Transform({objectMode:!0,highWaterMark:1,transform(X,Y,D){try{let G=B(X);D(void 0,G)}catch(G){D(G)}}}));return A.on("error",(X)=>J.emit("error",X)),J}return A}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===e$.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===e$.Long.ZERO)throw new s6.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===e$.Long.ZERO)throw new s6.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}if(await this.fetchBatch(),F=this.documents?.shift(this.deserializationOptions),F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}}finally{if(this.cursorOptions.timeoutMode===U71.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach(F){if(this.signal?.throwIfAborted(),typeof F!=="function")throw new s6.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let A of this)if(F(A)===!1)break}async close(F){await this.cleanup(F?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let F=[];for await(let A of this){F.push(A);let $=this.readBufferedDocuments();if(this.transform!=null)for(let B of $)F.push(await this.transformDocument(B));else F.push(...$)}return F}addCursorFlag(F,A){if(this.throwIfInitialized(),!U71.CURSOR_FLAGS.includes(F))throw new s6.MongoInvalidArgumentError(`Flag ${F} is not one of ${U71.CURSOR_FLAGS}`);if(typeof A!=="boolean")throw new s6.MongoInvalidArgumentError(`Flag ${F} must be a boolean value`);return this.cursorOptions[F]=A,this}map(F){this.throwIfInitialized();let A=this.transform;if(A)this.transform=($)=>{return F(A($))};else this.transform=F;return this}withReadPreference(F){if(this.throwIfInitialized(),F instanceof $H.ReadPreference)this.cursorOptions.readPreference=F;else if(typeof F==="string")this.cursorOptions.readPreference=$H.ReadPreference.fromString(F);else throw new s6.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return this}withReadConcern(F){this.throwIfInitialized();let A=Y71.ReadConcern.fromOptions({readConcern:F});if(A)this.cursorOptions.readConcern=A;return this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new s6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=F,this}batchSize(F){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new s6.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof F!=="number")throw new s6.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=F,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new s6.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,K9.squashError);this.cursorSession=null}}async getMore(F){if(this.cursorId==null)throw new s6.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new s6.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new s6.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let A={...this.cursorOptions,session:this.cursorSession,batchSize:F},$=new oe1.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,A);return await(0,X71.executeOperation)(this.cursorClient,$,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new VD(Fk.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let F=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let A=F.response;this.selectedServer=F.server,this.cursorId=A.id,this.cursorNamespace=A.ns??this.namespace,this.documents=A,this.initialized=!0}catch(F){throw this.initialized=!0,await this.cleanup(void 0,F),F}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}let F=this.cursorOptions.batchSize||1000;try{let A=await this.getMore(F);this.cursorId=A.id,this.documents=A}catch(A){try{await this.cleanup(void 0,A)}catch($){(0,K9.squashError)($)}throw A}if(this.isDead)await this.cleanup()}async cleanup(F,A){this.abortListener?.[K9.kDispose](),this.isClosed=!0;let $=()=>{if(F!=null)return this.timeoutContext?.clear(),new VD(Fk.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:F}),this);else return this.timeoutContext?.refreshed()};await(async(X)=>{try{await X()}finally{this.emitClose()}})(async()=>{let X=this.cursorSession;if(!X)return;try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!X.hasEnded){this.isKilled=!0;let Y=this.cursorId;this.cursorId=e$.Long.ZERO,await(0,X71.executeOperation)(this.cursorClient,new ee1.KillCursorsOperation(Y,this.cursorNamespace,this.selectedServer,{session:X}),$())}}catch(Y){(0,K9.squashError)(Y)}finally{if(X.owner===this)await X.endSession({error:A});if(!X.inTransaction())(0,A10.maybeClearPinnedConnection)(X,{error:A})}})}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(F){if(this.transform==null)return F;try{let A=this.transform(F);if(A===null)throw new s6.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return A}catch(A){try{await this.close()}catch($){(0,K9.squashError)($)}throw A}}throwIfInitialized(){if(this.initialized)throw new s6.MongoCursorInUseError}}U71.AbstractCursor=BH;BH.CLOSE="close";class Z71 extends G71.Readable{constructor(F){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=F}_read(F){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(F,A){this._cursor.close().then(()=>A(F),($)=>A($))}_readNext(){if(this._cursor.id===e$.Long.ZERO){this.push(null);return}this._cursor.next().then((F)=>{if(F==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,K9.squashError);else{if(this.push(F))return this._readNext();this._readInProgress=!1}},(F)=>{if(F.message.match(/server is closed/))return this._cursor.close().then(void 0,K9.squashError),this.push(null);if(F.message.match(/operation was interrupted/))return this.push(null);return this.destroy(F)}).catch((F)=>{this._readInProgress=!1,this.destroy(F)})}}(0,F10.configureResourceManagement)(BH.prototype);class VD extends Fk.TimeoutContext{constructor(F,A){super();this.timeoutContext=F,this.owner=A}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new VD(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(F,A){this.timeoutContext.addMaxTimeMSToCommand(F,A)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}U71.CursorTimeoutContext=VD});var JH=Q((H71)=>{Object.defineProperty(H71,"__esModule",{value:!0});H71.ExplainableCursor=void 0;var B10=I4();class W71 extends B10.AbstractCursor{resolveExplainTimeoutOptions(F,A){let $,B;if(F==null&&A==null)$=void 0,B=void 0;else if(F!=null&&A==null)$=typeof F!=="object"?F:("verbosity"in F)?F:void 0,B=typeof F==="object"&&"timeoutMS"in F?F:void 0;else $=F,B=A;return{timeout:B,explain:$}}}H71.ExplainableCursor=W71});var ZD=Q((L71)=>{Object.defineProperty(L71,"__esModule",{value:!0});L71.AggregationCursor=void 0;var $k=B1(),q71=EY(),Q71=PY(),V71=X4(),J10=W1(),E71=I4(),X10=JH();class Bk extends X10.ExplainableCursor{constructor(F,A,$=[],B={}){super(F,A,B);this.pipeline=$,this.aggregateOptions=B;let J=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===E71.CursorTimeoutMode.ITERATION&&(J?.$merge!=null||J?.$out!=null))throw new $k.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let F=(0,J10.mergeOptions)({},this.aggregateOptions);return delete F.session,new Bk(this.client,this.namespace,this.pipeline,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.aggregateOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{(0,q71.validateExplainTimeoutOptions)(A,q71.Explain.fromOptions(A))}catch{throw new $k.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let $=new Q71.AggregateOperation(this.namespace,this.pipeline,A),B=await(0,V71.executeOperation)(this.client,$,this.timeoutContext);return{server:$.server,session:F,response:B}}async explain(F,A){let{explain:$,timeout:B}=this.resolveExplainTimeoutOptions(F,A);return(await(0,V71.executeOperation)(this.client,new Q71.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...B,explain:$??!0}))).shift(this.deserializationOptions)}addStage(F){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===E71.CursorTimeoutMode.ITERATION&&(F.$out!=null||F.$merge!=null))throw new $k.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(F),this}group(F){return this.addStage({$group:F})}limit(F){return this.addStage({$limit:F})}match(F){return this.addStage({$match:F})}out(F){return this.addStage({$out:F})}project(F){return this.addStage({$project:F})}lookup(F){return this.addStage({$lookup:F})}redact(F){return this.addStage({$redact:F})}skip(F){return this.addStage({$skip:F})}sort(F){return this.addStage({$sort:F})}unwind(F){return this.addStage({$unwind:F})}geoNear(F){return this.addStage({$geoNear:F})}}L71.AggregationCursor=Bk});var Xk=Q((I71)=>{Object.defineProperty(I71,"__esModule",{value:!0});I71.CountOperation=void 0;var Y10=q0(),D10=K6(),XH=T0();class Jk extends D10.CommandOperation{constructor(F,A,$){super({s:{namespace:F}},$);this.SERVER_COMMAND_RESPONSE_TYPE=Y10.MongoDBResponse,this.options=$,this.collectionName=F.collection,this.query=A}get commandName(){return"count"}buildCommandDocument(F,A){let $=this.options,B={count:this.collectionName,query:this.query};if(typeof $.limit==="number")B.limit=$.limit;if(typeof $.skip==="number")B.skip=$.skip;if($.hint!=null)B.hint=$.hint;if(typeof $.maxTimeMS==="number")B.maxTimeMS=$.maxTimeMS;return B}handleOk(F){return F.getNumber("n")??0}}I71.CountOperation=Jk;(0,XH.defineAspects)(Jk,[XH.Aspect.READ_OPERATION,XH.Aspect.RETRYABLE,XH.Aspect.SUPPORTS_RAW_DATA])});var R71=Q((N71)=>{Object.defineProperty(N71,"__esModule",{value:!0});N71.FindOperation=void 0;var Yk=q0(),G10=B1(),Z10=C$(),U10=W1(),z10=K6(),FB=T0();class Dk extends z10.CommandOperation{constructor(F,A={},$={}){super(void 0,$);if(this.SERVER_COMMAND_RESPONSE_TYPE=Yk.CursorResponse,this.options={...$},delete this.options.writeConcern,this.ns=F,typeof A!=="object"||Array.isArray(A))throw new G10.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=A!=null&&A._bsontype==="ObjectId"?{_id:A}:A,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?Yk.ExplainedCursorResponse:Yk.CursorResponse}get commandName(){return"find"}buildOptions(F){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:F}}handleOk(F){return F}buildCommandDocument(){return W10(this.ns,this.filter,this.options)}}N71.FindOperation=Dk;function W10(F,A,$){let B={find:F.collection,filter:A};if($.sort)B.sort=(0,Z10.formatSort)($.sort);if($.projection){let J=$.projection;if(J&&Array.isArray(J))J=J.length?J.reduce((X,Y)=>{return X[Y]=1,X},{}):{_id:1};B.projection=J}if($.hint)B.hint=(0,U10.normalizeHintField)($.hint);if(typeof $.skip==="number")B.skip=$.skip;if(typeof $.limit==="number")if($.limit<0)B.limit=-$.limit,B.singleBatch=!0;else B.limit=$.limit;if(typeof $.batchSize==="number")if($.batchSize<0)B.limit=-$.batchSize;else if($.batchSize===$.limit)B.batchSize=$.batchSize+1;else B.batchSize=$.batchSize;if(typeof $.singleBatch==="boolean")B.singleBatch=$.singleBatch;if($.comment!==void 0)B.comment=$.comment;if($.max)B.max=$.max;if($.min)B.min=$.min;if(typeof $.returnKey==="boolean")B.returnKey=$.returnKey;if(typeof $.showRecordId==="boolean")B.showRecordId=$.showRecordId;if(typeof $.tailable==="boolean")B.tailable=$.tailable;if(typeof $.oplogReplay==="boolean")B.oplogReplay=$.oplogReplay;if(typeof $.timeout==="boolean")B.noCursorTimeout=!$.timeout;else if(typeof $.noCursorTimeout==="boolean")B.noCursorTimeout=$.noCursorTimeout;if(typeof $.awaitData==="boolean")B.awaitData=$.awaitData;if(typeof $.allowPartialResults==="boolean")B.allowPartialResults=$.allowPartialResults;if(typeof $.allowDiskUse==="boolean")B.allowDiskUse=$.allowDiskUse;if($.let)B.let=$.let;return B}(0,FB.defineAspects)(Dk,[FB.Aspect.READ_OPERATION,FB.Aspect.RETRYABLE,FB.Aspect.EXPLAINABLE,FB.Aspect.CURSOR_CREATING,FB.Aspect.SUPPORTS_RAW_DATA])});var Wk=Q((T71)=>{Object.defineProperty(T71,"__esModule",{value:!0});T71.FindCursor=T71.FLAGS=void 0;var H10=q0(),y9=B1(),j71=EY(),K10=Xk(),Gk=X4(),M71=R71(),Zk=C$(),Uk=W1(),q10=JH();T71.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class zk extends q10.ExplainableCursor{constructor(F,A,$={},B={}){super(F,A,B);if(this.numReturned=0,this.cursorFilter=$,this.findOptions=B,B.sort!=null)this.findOptions.sort=(0,Zk.formatSort)(B.sort)}clone(){let F=(0,Uk.mergeOptions)({},this.findOptions);return delete F.session,new zk(this.client,this.namespace,this.cursorFilter,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.findOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{(0,j71.validateExplainTimeoutOptions)(A,j71.Explain.fromOptions(A))}catch{throw new y9.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let $=new M71.FindOperation(this.namespace,this.cursorFilter,A),B=await(0,Gk.executeOperation)(this.client,$,this.timeoutContext);return this.numReturned=B.batchSize,{server:$.server,session:F,response:B}}async getMore(F){let A=this.numReturned;if(A){let B=this.findOptions.limit;if(F=B&&B>0&&A+F>B?B-A:F,F<=0){try{await this.close()}catch(J){(0,Uk.squashError)(J)}return H10.CursorResponse.emptyGetMore}}let $=await super.getMore(F);return this.numReturned=this.numReturned+$.batchSize,$}async count(F){if((0,Uk.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof F==="boolean")throw new y9.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,Gk.executeOperation)(this.client,new K10.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...F}))}async explain(F,A){let{explain:$,timeout:B}=this.resolveExplainTimeoutOptions(F,A);return(await(0,Gk.executeOperation)(this.client,new M71.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...B,explain:$??!0}))).shift(this.deserializationOptions)}filter(F){return this.throwIfInitialized(),this.cursorFilter=F,this}hint(F){return this.throwIfInitialized(),this.findOptions.hint=F,this}min(F){return this.throwIfInitialized(),this.findOptions.min=F,this}max(F){return this.throwIfInitialized(),this.findOptions.max=F,this}returnKey(F){return this.throwIfInitialized(),this.findOptions.returnKey=F,this}showRecordId(F){return this.throwIfInitialized(),this.findOptions.showRecordId=F,this}addQueryModifier(F,A){if(this.throwIfInitialized(),F[0]!=="$")throw new y9.MongoInvalidArgumentError(`${F} is not a valid query modifier`);switch(F.substr(1)){case"comment":this.findOptions.comment=A;break;case"explain":this.findOptions.explain=A;break;case"hint":this.findOptions.hint=A;break;case"max":this.findOptions.max=A;break;case"maxTimeMS":this.findOptions.maxTimeMS=A;break;case"min":this.findOptions.min=A;break;case"orderby":this.findOptions.sort=(0,Zk.formatSort)(A);break;case"query":this.cursorFilter=A;break;case"returnKey":this.findOptions.returnKey=A;break;case"showDiskLoc":this.findOptions.showRecordId=A;break;default:throw new y9.MongoInvalidArgumentError(`Invalid query modifier: ${F}`)}return this}comment(F){return this.throwIfInitialized(),this.findOptions.comment=F,this}maxAwaitTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new y9.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=F,this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new y9.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=F,this}project(F){return this.throwIfInitialized(),this.findOptions.projection=F,this}sort(F,A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new y9.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,Zk.formatSort)(F,A),this}allowDiskUse(F=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new y9.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!F)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation(F){return this.throwIfInitialized(),this.findOptions.collation=F,this}limit(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new y9.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof F!=="number")throw new y9.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=F,this}skip(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new y9.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof F!=="number")throw new y9.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=F,this}}T71.FindCursor=zk});var Kk=Q((O71)=>{Object.defineProperty(O71,"__esModule",{value:!0});O71.ListIndexesCursor=void 0;var V10=X4(),E10=XD(),L10=I4();class Hk extends L10.AbstractCursor{constructor(F,A){super(F.client,F.s.namespace,A);this.parent=F,this.options=A}clone(){return new Hk(this.parent,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new E10.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:F}),$=await(0,V10.executeOperation)(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:$}}}O71.ListIndexesCursor=Hk});var b71=Q((f71)=>{Object.defineProperty(f71,"__esModule",{value:!0});f71.ListSearchIndexesCursor=void 0;var w10=ZD();class u71 extends w10.AggregationCursor{constructor({fullNamespace:F,client:A},$,B={}){let J=$==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:$}}];super(A,F,J,B)}}f71.ListSearchIndexesCursor=u71});var y71=Q((g71)=>{Object.defineProperty(g71,"__esModule",{value:!0});g71.DistinctOperation=void 0;var I10=q0(),C10=K6(),ED=T0();class qk extends C10.CommandOperation{constructor(F,A,$,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=I10.MongoDBResponse,this.options=B??{},this.collection=F,this.key=A,this.query=$}get commandName(){return"distinct"}buildCommandDocument(F){let A={distinct:this.collection.collectionName,key:this.key,query:this.query};if(this.options.comment!==void 0)A.comment=this.options.comment;if(this.options.hint!=null)A.hint=this.options.hint;return A}handleOk(F){if(this.explain)return F.toObject(this.bsonOptions);return F.toObject(this.bsonOptions).values}}g71.DistinctOperation=qk;(0,ED.defineAspects)(qk,[ED.Aspect.READ_OPERATION,ED.Aspect.RETRYABLE,ED.Aspect.EXPLAINABLE,ED.Aspect.SUPPORTS_RAW_DATA])});var m71=Q((v71)=>{Object.defineProperty(v71,"__esModule",{value:!0});v71.EstimatedDocumentCountOperation=void 0;var N10=q0(),P10=K6(),LD=T0();class Qk extends P10.CommandOperation{constructor(F,A={}){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=N10.MongoDBResponse,this.options=A,this.collectionName=F.collectionName}get commandName(){return"count"}buildCommandDocument(F,A){let $={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")$.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)$.comment=this.options.comment;return $}handleOk(F){return F.getNumber("n")??0}}v71.EstimatedDocumentCountOperation=Qk;(0,LD.defineAspects)(Qk,[LD.Aspect.READ_OPERATION,LD.Aspect.RETRYABLE,LD.Aspect.CURSOR_CREATING,LD.Aspect.SUPPORTS_RAW_DATA])});var Vk=Q((i71)=>{Object.defineProperty(i71,"__esModule",{value:!0});i71.FindOneAndUpdateOperation=i71.FindOneAndReplaceOperation=i71.FindOneAndDeleteOperation=i71.FindAndModifyOperation=i71.ReturnDocument=void 0;var R10=q0(),A5=B1(),j10=J4(),M10=C$(),YH=W1(),T10=K6(),wD=T0();i71.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function d71(F,A){if(F.new=A.returnDocument===i71.ReturnDocument.AFTER,F.upsert=A.upsert===!0,A.bypassDocumentValidation===!0)F.bypassDocumentValidation=A.bypassDocumentValidation;return F}class AB extends T10.CommandOperation{constructor(F,A,$){super(F,$);this.SERVER_COMMAND_RESPONSE_TYPE=R10.MongoDBResponse,this.options=$,this.readPreference=j10.ReadPreference.primary,this.collection=F,this.query=A}get commandName(){return"findAndModify"}buildCommandDocument(F,A){let $=this.options,B={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};$.includeResultMetadata??=!1;let J=(0,M10.formatSort)($.sort);if(J)B.sort=J;if($.projection)B.fields=$.projection;if($.maxTimeMS)B.maxTimeMS=$.maxTimeMS;if($.writeConcern)B.writeConcern=$.writeConcern;if($.let)B.let=$.let;if($.comment!==void 0)B.comment=$.comment;if((0,YH.decorateWithCollation)(B,$),$.hint){if(this.writeConcern?.w===0&&(0,YH.maxWireVersion)(F)<9)throw new A5.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");B.hint=$.hint}return B}handleOk(F){let A=super.handleOk(F);return this.options.includeResultMetadata?A:A.value??null}}i71.FindAndModifyOperation=AB;class c71 extends AB{constructor(F,A,$){if(A==null||typeof A!=="object")throw new A5.MongoInvalidArgumentError('Argument "filter" must be an object');super(F,A,$)}buildCommandDocument(F,A){let $=super.buildCommandDocument(F,A);return $.remove=!0,$}}i71.FindOneAndDeleteOperation=c71;class l71 extends AB{constructor(F,A,$,B){if(A==null||typeof A!=="object")throw new A5.MongoInvalidArgumentError('Argument "filter" must be an object');if($==null||typeof $!=="object")throw new A5.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,YH.hasAtomicOperators)($))throw new A5.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(F,A,B);this.replacement=$}buildCommandDocument(F,A){let $=super.buildCommandDocument(F,A);return $.update=this.replacement,d71($,this.options),$}}i71.FindOneAndReplaceOperation=l71;class p71 extends AB{constructor(F,A,$,B){if(A==null||typeof A!=="object")throw new A5.MongoInvalidArgumentError('Argument "filter" must be an object');if($==null||typeof $!=="object")throw new A5.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,YH.hasAtomicOperators)($,B))throw new A5.MongoInvalidArgumentError("Update document requires atomic operators");super(F,A,B);this.update=$,this.options=B}buildCommandDocument(F,A){let $=super.buildCommandDocument(F,A);if($.update=this.update,d71($,this.options),this.options.arrayFilters)$.arrayFilters=this.options.arrayFilters;return $}}i71.FindOneAndUpdateOperation=p71;(0,wD.defineAspects)(AB,[wD.Aspect.WRITE_OPERATION,wD.Aspect.RETRYABLE,wD.Aspect.EXPLAINABLE,wD.Aspect.SUPPORTS_RAW_DATA])});var o71=Q((t71)=>{Object.defineProperty(t71,"__esModule",{value:!0});t71.CreateSearchIndexesOperation=void 0;var u10=q0(),f10=T0();class r71 extends f10.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=u10.MongoDBResponse,this.collection=F,this.descriptions=A,this.ns=F.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(F,A){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(F){return super.handleOk(F).indexesCreated.map((A)=>A.name)}buildOptions(F){return{session:this.session,timeoutContext:F}}}t71.CreateSearchIndexesOperation=r71});var B81=Q((A81)=>{Object.defineProperty(A81,"__esModule",{value:!0});A81.DropSearchIndexOperation=void 0;var x10=q0(),e71=B1(),b10=T0();class F81 extends b10.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=x10.MongoDBResponse,this.collection=F,this.name=A,this.ns=F.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(F,A){let B={dropSearchIndex:this.collection.fullNamespace.collection};if(typeof this.name==="string")B.name=this.name;return B}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){if(!(F instanceof e71.MongoServerError&&F.code===e71.MONGODB_ERROR_CODES.NamespaceNotFound))throw F}}A81.DropSearchIndexOperation=F81});var D81=Q((X81)=>{Object.defineProperty(X81,"__esModule",{value:!0});X81.UpdateSearchIndexOperation=void 0;var g10=q0(),_10=T0();class J81 extends _10.AbstractOperation{constructor(F,A,$){super();this.SERVER_COMMAND_RESPONSE_TYPE=g10.MongoDBResponse,this.collection=F,this.name=A,this.definition=$,this.ns=F.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(F,A){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}}X81.UpdateSearchIndexOperation=J81});var a$=Q((z81)=>{Object.defineProperty(z81,"__esModule",{value:!0});z81.Collection=void 0;var y10=Y0(),v10=Oj(),h10=Sj(),m10=wF(),d10=ZD(),c10=Wk(),l10=Kk(),p10=b71(),$B=B1(),i10=Xk(),G81=$j(),a10=y71(),n10=m71(),O6=X4(),Ek=Vk(),DH=XD(),r10=zj(),t10=HT(),s10=o71(),o10=B81(),e10=D81(),Lk=Qj(),F00=W2(),wk=J4(),C0=W1(),Z81=W3();class U81{constructor(F,A,$){this.db=F,this.s={db:F,options:$,namespace:new C0.MongoDBCollectionNamespace(F.databaseName,A),pkFactory:F.options?.pkFactory??C0.DEFAULT_PK_FACTORY,readPreference:wk.ReadPreference.fromOptions($),bsonOptions:(0,y10.resolveBSONOptions)($,F),readConcern:F00.ReadConcern.fromOptions($),writeConcern:Z81.WriteConcern.fromOptions($)},this.client=F.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(F){this.s.collectionHint=(0,C0.normalizeHintField)(F)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(F,A){return await(0,O6.executeOperation)(this.client,new r10.InsertOneOperation(this,F,(0,C0.resolveOptions)(this,A)))}async insertMany(F,A){if(!Array.isArray(F))throw new $B.MongoInvalidArgumentError('Argument "docs" must be an array of documents');A=(0,C0.resolveOptions)(this,A??{});let $=Z81.WriteConcern.fromOptions(A)?.w!==0;try{let B=await this.bulkWrite(F.map((J)=>({insertOne:{document:J}})),A);return{acknowledged:$,insertedCount:B.insertedCount,insertedIds:B.insertedIds}}catch(B){if(B&&B.message==="Operation must be an object with an operation key")throw new $B.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw B}}async bulkWrite(F,A){if(!Array.isArray(F))throw new $B.MongoInvalidArgumentError('Argument "operations" must be an array of documents');if(A=(0,C0.resolveOptions)(this,A??{}),this.client.topology==null)await(0,O6.autoConnect)(this.client);let B=A.ordered===!1?this.initializeUnorderedBulkOp(A):this.initializeOrderedBulkOp(A);for(let J of F)B.raw(J);return await B.execute({...A})}async updateOne(F,A,$){return await(0,O6.executeOperation)(this.client,new Lk.UpdateOneOperation(this.s.namespace,F,A,(0,C0.resolveOptions)(this,$)))}async replaceOne(F,A,$){return await(0,O6.executeOperation)(this.client,new Lk.ReplaceOneOperation(this.s.namespace,F,A,(0,C0.resolveOptions)(this,$)))}async updateMany(F,A,$){return await(0,O6.executeOperation)(this.client,new Lk.UpdateManyOperation(this.s.namespace,F,A,(0,C0.resolveOptions)(this,$)))}async deleteOne(F={},A={}){return await(0,O6.executeOperation)(this.client,new G81.DeleteOneOperation(this.s.namespace,F,(0,C0.resolveOptions)(this,A)))}async deleteMany(F={},A={}){return await(0,O6.executeOperation)(this.client,new G81.DeleteManyOperation(this.s.namespace,F,(0,C0.resolveOptions)(this,A)))}async rename(F,A){return await(0,O6.executeOperation)(this.client,new t10.RenameOperation(this,F,(0,C0.resolveOptions)(void 0,{...A,readPreference:wk.ReadPreference.PRIMARY})))}async drop(F){return await this.db.dropCollection(this.collectionName,F)}async findOne(F={},A={}){let{batchSize:$,noCursorTimeout:B,...J}=A;J.singleBatch=!0;let X=this.find(F,J).limit(1),Y=await X.next();return await X.close(),Y}find(F={},A={}){return new c10.FindCursor(this.client,this.s.namespace,F,(0,C0.resolveOptions)(this,A))}async options(F){F=(0,C0.resolveOptions)(this,F);let[A]=await this.db.listCollections({name:this.collectionName},{...F,nameOnly:!1}).toArray();if(A==null||A.options==null)throw new $B.MongoAPIError(`collection ${this.namespace} not found`);return A.options}async isCapped(F){let{capped:A}=await this.options(F);return Boolean(A)}async createIndex(F,A){return(await(0,O6.executeOperation)(this.client,DH.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,F,(0,C0.resolveOptions)(this,A))))[0]}async createIndexes(F,A){return await(0,O6.executeOperation)(this.client,DH.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,F,(0,C0.resolveOptions)(this,{...A,maxTimeMS:void 0})))}async dropIndex(F,A){return await(0,O6.executeOperation)(this.client,new DH.DropIndexOperation(this,F,{...(0,C0.resolveOptions)(this,A),readPreference:wk.ReadPreference.primary}))}async dropIndexes(F){try{return await(0,O6.executeOperation)(this.client,new DH.DropIndexOperation(this,"*",(0,C0.resolveOptions)(this,F))),!0}catch(A){if(A instanceof $B.MongoOperationTimeoutError)throw A;return!1}}listIndexes(F){return new l10.ListIndexesCursor(this,(0,C0.resolveOptions)(this,F))}async indexExists(F,A){let $=Array.isArray(F)?F:[F],B=new Set(await this.listIndexes(A).map(({name:J})=>J).toArray());return $.every((J)=>B.has(J))}async indexInformation(F){return await this.indexes({...F,full:F?.full??!1})}async estimatedDocumentCount(F){return await(0,O6.executeOperation)(this.client,new n10.EstimatedDocumentCountOperation(this,(0,C0.resolveOptions)(this,F)))}async countDocuments(F={},A={}){let $=[];if($.push({$match:F}),typeof A.skip==="number")$.push({$skip:A.skip});if(typeof A.limit==="number")$.push({$limit:A.limit});$.push({$group:{_id:1,n:{$sum:1}}});let B=this.aggregate($,A),J=await B.next();return await B.close(),J?.n??0}async distinct(F,A={},$={}){return await(0,O6.executeOperation)(this.client,new a10.DistinctOperation(this,F,A,(0,C0.resolveOptions)(this,$)))}async indexes(F){let A=await this.listIndexes(F).toArray();if(F?.full??!0)return A;return Object.fromEntries(A.map(({name:J,key:X})=>[J,Object.entries(X)]))}async findOneAndDelete(F,A){return await(0,O6.executeOperation)(this.client,new Ek.FindOneAndDeleteOperation(this,F,(0,C0.resolveOptions)(this,A)))}async findOneAndReplace(F,A,$){return await(0,O6.executeOperation)(this.client,new Ek.FindOneAndReplaceOperation(this,F,A,(0,C0.resolveOptions)(this,$)))}async findOneAndUpdate(F,A,$){return await(0,O6.executeOperation)(this.client,new Ek.FindOneAndUpdateOperation(this,F,A,(0,C0.resolveOptions)(this,$)))}aggregate(F=[],A){if(!Array.isArray(F))throw new $B.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new d10.AggregationCursor(this.client,this.s.namespace,F,(0,C0.resolveOptions)(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new m10.ChangeStream(this,F,(0,C0.resolveOptions)(this,A))}initializeUnorderedBulkOp(F){return new h10.UnorderedBulkOperation(this,(0,C0.resolveOptions)(this,F))}initializeOrderedBulkOp(F){return new v10.OrderedBulkOperation(this,(0,C0.resolveOptions)(this,F))}async count(F={},A={}){return await(0,O6.executeOperation)(this.client,new i10.CountOperation(this.fullNamespace,F,(0,C0.resolveOptions)(this,A)))}listSearchIndexes(F,A){A=typeof F==="object"?F:A==null?{}:A;let $=F==null?null:typeof F==="object"?null:F;return new p10.ListSearchIndexesCursor(this,$,A)}async createSearchIndex(F){let[A]=await this.createSearchIndexes([F]);return A}async createSearchIndexes(F){return await(0,O6.executeOperation)(this.client,new s10.CreateSearchIndexesOperation(this,F))}async dropSearchIndex(F){return await(0,O6.executeOperation)(this.client,new o10.DropSearchIndexOperation(this,F))}async updateSearchIndex(F,A){return await(0,O6.executeOperation)(this.client,new e10.UpdateSearchIndexOperation(this,F,A))}}z81.Collection=U81});var Nk=Q((q81)=>{Object.defineProperty(q81,"__esModule",{value:!0});q81.ChangeStreamCursor=void 0;var Ik=wF(),H81=T6(),A00=PY(),$00=X4(),K81=W1(),B00=I4();class Ck extends B00.AbstractCursor{constructor(F,A,$=[],B={}){super(F,A,{...B,tailable:!0,awaitData:!0});if(this.pipeline=$,this.changeStreamCursorOptions=B,this._resumeToken=null,this.startAtOperationTime=B.startAtOperationTime??null,B.startAfter)this.resumeToken=B.startAfter;else if(B.resumeAfter)this.resumeToken=B.resumeAfter}set resumeToken(F){this._resumeToken=F,this.emit(Ik.ChangeStream.RESUME_TOKEN_CHANGED,F)}get resumeToken(){return this._resumeToken}get resumeOptions(){let F={...this.changeStreamCursorOptions};for(let A of["resumeAfter","startAfter","startAtOperationTime"])delete F[A];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)F.startAfter=this.resumeToken;else F.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null)F.startAtOperationTime=this.startAtOperationTime;return F}cacheResumeToken(F){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=F;this.hasReceived=!0}_processBatch(F){let{postBatchResumeToken:A}=F;if(A){if(this.postBatchResumeToken=A,F.batchSize===0)this.resumeToken=A}}clone(){return new Ck(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(F){let A=new A00.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:F}),$=await(0,$00.executeOperation)(F.client,A,this.timeoutContext),B=A.server;if(this.maxWireVersion=(0,K81.maxWireVersion)(B),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null)this.startAtOperationTime=$.operationTime;return this._processBatch($),this.emit(H81.INIT,$),this.emit(H81.RESPONSE),{server:B,session:F,response:$}}async getMore(F){let A=await super.getMore(F);return this.maxWireVersion=(0,K81.maxWireVersion)(this.server),this._processBatch(A),this.emit(Ik.ChangeStream.MORE,A),this.emit(Ik.ChangeStream.RESPONSE),A}}q81.ChangeStreamCursor=Ck});var wF=Q((V81)=>{Object.defineProperty(V81,"__esModule",{value:!0});V81.ChangeStream=void 0;var J00=a$(),N2=T6(),X00=I4(),Y00=Nk(),D00=pW(),D4=B1(),G00=p8(),Z00=z9(),U00=g$(),z00=n6(),o2=W1(),W00=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],PF={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},H00=[N2.RESUME_TOKEN_CHANGED,N2.END,N2.CLOSE],K00="A change stream document has been received that lacks a resume token (_id).",GH="ChangeStream is closed";class p4 extends Z00.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(F,A=[],$={}){super();this.pipeline=A,this.options={...$};let B;if(delete this.options.writeConcern,F instanceof J00.Collection)this.type=PF.COLLECTION,B=F.s.db.client.options.serverSelectionTimeoutMS;else if(F instanceof D00.Db)this.type=PF.DATABASE,B=F.client.options.serverSelectionTimeoutMS;else if(F instanceof G00.MongoClient)this.type=PF.CLUSTER,B=F.options.serverSelectionTimeoutMS;else throw new D4.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=F,this.namespace=F.s.namespace,!this.options.readPreference&&F.readPreference)this.options.readPreference=F.readPreference;if(this.cursor=this._createChangeStreamCursor($),this.isClosed=!1,this.mode=!1,this.on("newListener",(J)=>{if(J==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(J)=>{if(J==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new z00.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:B})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof D4.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch($){(0,o2.squashError)($)}throw A}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.next();return this._processChange(F??null)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof D4.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch($){(0,o2.squashError)($)}throw A}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.tryNext();if(!F)return null;return this._processChange(F)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof D4.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch($){(0,o2.squashError)($)}throw A}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(F){(0,o2.squashError)(F)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let F=this.cursor;try{await F.close()}finally{this._endStream()}}stream(F){if(this.closed)throw new D4.MongoChangeStreamError(GH);return this.streamOptions=F,this.cursor.stream(F)}_setIsEmitter(){if(this.mode==="iterator")throw new D4.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new D4.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(F){let A=(0,o2.filterOptions)(F,W00);if(this.type===PF.CLUSTER)A.allChangesForCluster=!0;let $=[{$changeStream:A},...this.pipeline],B=this.type===PF.CLUSTER?this.parent:this.type===PF.DATABASE?this.parent.client:this.type===PF.COLLECTION?this.parent.client:null;if(B==null)throw new D4.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let J=new Y00.ChangeStreamCursor(B,this.namespace,$,{...F,timeoutContext:this.timeoutContext?new X00.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let X of H00)J.on(X,(Y)=>this.emit(X,Y));if(this.listenerCount(p4.CHANGE)>0)this._streamEvents(J);return J}_closeEmitterModeWithError(F){this.emit(p4.ERROR,F),this.close().then(void 0,o2.squashError)}_streamEvents(F){this._setIsEmitter();let A=this.cursorStream??F.stream();this.cursorStream=A,A.on("data",($)=>{try{let B=this._processChange($);this.emit(p4.CHANGE,B)}catch(B){this.emit(p4.ERROR,B)}this.timeoutContext?.refresh()}),A.on("error",($)=>this._processErrorStreamMode($,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(F){if(this.isClosed)throw new D4.MongoAPIError(GH);if(F==null)throw new D4.MongoRuntimeError(GH);if(F&&!F._id)throw new D4.MongoChangeStreamError(K00);return this.cursor.cacheResumeToken(F._id),this.options.startAtOperationTime=void 0,F}_processErrorStreamMode(F,A){if(this.isClosed)return;if(A&&((0,D4.isResumableError)(F,this.cursor.maxWireVersion)||F instanceof D4.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume(F),($)=>{return(0,o2.squashError)($),this._resume(F)}).then(()=>{if(F instanceof D4.MongoOperationTimeoutError)this.emit(p4.ERROR,F)},()=>this._closeEmitterModeWithError(F));else this._closeEmitterModeWithError(F)}async _processErrorIteratorMode(F,A){if(this.isClosed)throw new D4.MongoAPIError(GH);if(A&&((0,D4.isResumableError)(F,this.cursor.maxWireVersion)||F instanceof D4.MongoOperationTimeoutError)){try{await this.cursor.close()}catch($){(0,o2.squashError)($)}if(await this._resume(F),F instanceof D4.MongoOperationTimeoutError)throw F}else{try{await this.close()}catch($){(0,o2.squashError)($)}throw F}}async _resume(F){this.timeoutContext?.refresh();let A=(0,o2.getTopology)(this.parent);try{await A.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),F}}}V81.ChangeStream=p4;p4.RESPONSE=N2.RESPONSE;p4.MORE=N2.MORE;p4.INIT=N2.INIT;p4.CLOSE=N2.CLOSE;p4.CHANGE=N2.CHANGE;p4.END=N2.END;p4.ERROR=N2.ERROR;p4.RESUME_TOKEN_CHANGED=N2.RESUME_TOKEN_CHANGED;(0,U00.configureResourceManagement)(p4.prototype)});var Pk=Q((w81)=>{Object.defineProperty(w81,"__esModule",{value:!0});w81.GridFSBucketReadStream=void 0;var q00=x("stream"),Q00=I4(),q9=B1(),V00=n6();class ZH extends q00.Readable{constructor(F,A,$,B,J){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:F,expected:0,files:A,filter:B,init:!1,expectedEnd:0,options:{start:0,end:0,...J},readPreference:$,timeoutContext:J?.timeoutMS!=null?new V00.CSOTTimeoutContext({timeoutMS:J.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;w00(this,()=>E00(this))}start(F=0){return L81(this),this.s.options.start=F,this}end(F=0){return L81(this),this.s.options.end=F,this}async abort(){this.push(null),this.destroy();let F=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:F})}}w81.GridFSBucketReadStream=ZH;ZH.FILE="file";function L81(F){if(F.s.init)throw new q9.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function E00(F){if(F.destroyed)return;if(!F.s.cursor)return;if(!F.s.file)return;let A=($)=>{if(F.destroyed)return;if(!$){F.push(null),F.s.cursor?.close().then(void 0,(z)=>F.destroy(z));return}if(!F.s.file)return;let B=F.s.file.length-F.s.bytesRead,J=F.s.expected++,X=Math.min(F.s.file.chunkSize,B);if($.n>J)return F.destroy(new q9.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${$.n}, expected: ${J}`));if($.n<J)return F.destroy(new q9.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${$.n}, expected: ${J}`));let Y=Buffer.isBuffer($.data)?$.data:$.data.buffer;if(Y.byteLength!==X){if(B<=0)return F.destroy(new q9.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${$.n}, expected file length ${F.s.file.length} bytes but already read ${F.s.bytesRead} bytes`));return F.destroy(new q9.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${Y.byteLength}, expected: ${X}`))}if(F.s.bytesRead+=Y.byteLength,Y.byteLength===0)return F.push(null);let D=null,G=null;if(F.s.bytesToSkip!=null)D=F.s.bytesToSkip,F.s.bytesToSkip=0;let Z=J===F.s.expectedEnd-1,U=F.s.options.end-F.s.bytesToSkip;if(Z&&F.s.bytesToTrim!=null)G=F.s.file.chunkSize-F.s.bytesToTrim;else if(F.s.options.end&&U<$.data.byteLength)G=U;if(D!=null||G!=null)Y=Y.slice(D||0,G||Y.byteLength);F.push(Y);return};F.s.cursor.next().then(A,($)=>{if(F.destroyed)return;F.destroy($)})}function L00(F){let A={};if(F.s.readPreference)A.readPreference=F.s.readPreference;if(F.s.options&&F.s.options.sort)A.sort=F.s.options.sort;if(F.s.options&&F.s.options.skip)A.skip=F.s.options.skip;let $=(J)=>{if(F.destroyed)return;if(!J){let G=`FileNotFound: file ${F.s.filter._id?F.s.filter._id.toString():F.s.filter.filename} was not found`,Z=new q9.MongoRuntimeError(G);return Z.code="ENOENT",F.destroy(Z)}if(J.length<=0){F.push(null);return}if(F.destroyed){F.destroy();return}try{F.s.bytesToSkip=I00(F,J,F.s.options)}catch(D){return F.destroy(D)}let X={files_id:J._id};if(F.s.options&&F.s.options.start!=null){let D=Math.floor(F.s.options.start/J.chunkSize);if(D>0)X.n={$gte:D}}let Y;try{Y=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(D){return F.destroy(D)}if(F.s.cursor=F.s.chunks.find(X,{timeoutMode:F.s.options.timeoutMS!=null?Q00.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:Y}).sort({n:1}),F.s.readPreference)F.s.cursor.withReadPreference(F.s.readPreference);F.s.expectedEnd=Math.ceil(J.length/J.chunkSize),F.s.file=J;try{F.s.bytesToTrim=C00(F,J,F.s.cursor,F.s.options)}catch(D){return F.destroy(D)}F.emit(ZH.FILE,J);return},B;try{B=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(J){if(!F.destroyed)F.destroy(J);return}A.timeoutMS=B,F.s.files.findOne(F.s.filter,A).then($,(J)=>{if(F.destroyed)return;F.destroy(J)})}function w00(F,A){if(F.s.file)return A();if(!F.s.init)L00(F),F.s.init=!0;F.once("file",()=>{A()})}function I00(F,A,$){if($&&$.start!=null){if($.start>A.length)throw new q9.MongoInvalidArgumentError(`Stream start (${$.start}) must not be more than the length of the file (${A.length})`);if($.start<0)throw new q9.MongoInvalidArgumentError(`Stream start (${$.start}) must not be negative`);if($.end!=null&&$.end<$.start)throw new q9.MongoInvalidArgumentError(`Stream start (${$.start}) must not be greater than stream end (${$.end})`);return F.s.bytesRead=Math.floor($.start/A.chunkSize)*A.chunkSize,F.s.expected=Math.floor($.start/A.chunkSize),$.start-F.s.bytesRead}throw new q9.MongoInvalidArgumentError("Start option must be defined")}function C00(F,A,$,B){if(B&&B.end!=null){if(B.end>A.length)throw new q9.MongoInvalidArgumentError(`Stream end (${B.end}) must not be more than the length of the file (${A.length})`);if(B.start==null||B.start<0)throw new q9.MongoInvalidArgumentError(`Stream end (${B.end}) must not be negative`);let J=B.start!=null?Math.floor(B.start/A.chunkSize):0;return $.limit(Math.ceil(B.end/A.chunkSize)-J),F.s.expectedEnd=Math.ceil(B.end/A.chunkSize),Math.ceil(B.end/A.chunkSize)*A.chunkSize-B.end}throw new q9.MongoInvalidArgumentError("End option must be defined")}});var jk=Q((M81)=>{Object.defineProperty(M81,"__esModule",{value:!0});M81.GridFSBucketWriteStream=void 0;var N00=x("stream"),N81=Y0(),P81=I4(),P2=B1(),P00=n6(),C81=W1(),R00=W3();class R81 extends N00.Writable{constructor(F,A,$){super();if(this.gridFSFile=null,$=$??{},this.bucket=F,this.chunks=F.s._chunksCollection,this.filename=A,this.files=F.s._filesCollection,this.options=$,this.writeConcern=R00.WriteConcern.fromOptions($)||F.s.options.writeConcern,this.done=!1,this.id=$.id?$.id:new N81.ObjectId,this.chunkSizeBytes=$.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},$.timeoutMS!=null)this.timeoutContext=new P00.CSOTTimeoutContext({timeoutMS:$.timeoutMS,serverSelectionTimeoutMS:(0,C81.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct(F){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,M00(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),F()},(A)=>{if(A instanceof P2.MongoOperationTimeoutError)return RF(this,A,F);(0,C81.squashError)(A),F()});else return process.nextTick(F)}_write(F,A,$){k00(this,F,A,$)}_final(F){if(this.state.streamEnd)return process.nextTick(F);this.state.streamEnd=!0,O00(this,F)}async abort(){if(this.state.streamEnd)throw new P2.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new P2.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let F=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:F})}}M81.GridFSBucketWriteStream=R81;function RF(F,A,$){if(F.state.errored){process.nextTick($);return}F.state.errored=!0,process.nextTick($,A)}function j81(F,A,$){return{_id:new N81.ObjectId,files_id:F,n:A,data:$}}async function j00(F){let A={files_id:1,n:1},$;$=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let B;try{B=await F.chunks.listIndexes({timeoutMode:$!=null?P81.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:$}).toArray()}catch(X){if(X instanceof P2.MongoError&&X.code===P2.MONGODB_ERROR_CODES.NamespaceNotFound)B=[];else throw X}if(!B.find((X)=>{if(Object.keys(X.key).length===2&&X.key.files_id===1&&X.key.n===1)return!0;return!1}))$=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.chunks.createIndex(A,{...F.writeConcern,background:!0,unique:!0,timeoutMS:$})}function Rk(F,A){if(F.done)return process.nextTick(A);if(F.state.streamEnd&&F.state.outstandingRequests===0&&!F.state.errored){F.done=!0;let $=T00(F.id,F.length,F.chunkSizeBytes,F.filename,F.options.contentType,F.options.aliases,F.options.metadata);if(UH(F,A))return;let B=F.timeoutContext?.remainingTimeMS;if(B!=null&&B<=0)return RF(F,new P2.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);F.files.insertOne($,{writeConcern:F.writeConcern,timeoutMS:B}).then(()=>{F.gridFSFile=$,A()},(J)=>{return RF(F,J,A)});return}process.nextTick(A)}async function M00(F){let A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);if(await F.files.findOne({},{projection:{_id:1},timeoutMS:A})!=null)return;let B={filename:1,uploadDate:1},J;A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let X={timeoutMode:A!=null?P81.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:A};try{J=await F.files.listIndexes(X).toArray()}catch(D){if(D instanceof P2.MongoError&&D.code===P2.MONGODB_ERROR_CODES.NamespaceNotFound)J=[];else throw D}if(!J.find((D)=>{if(Object.keys(D.key).length===2&&D.key.filename===1&&D.key.uploadDate===1)return!0;return!1}))A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.files.createIndex(B,{background:!1,timeoutMS:A});await j00(F)}function T00(F,A,$,B,J,X,Y){let D={_id:F,length:A,chunkSize:$,uploadDate:new Date,filename:B};if(J)D.contentType=J;if(X)D.aliases=X;if(Y)D.metadata=Y;return D}function k00(F,A,$,B){if(UH(F,B))return;let J=Buffer.isBuffer(A)?A:Buffer.from(A,$);if(F.length+=J.length,F.pos+J.length<F.chunkSizeBytes){J.copy(F.bufToStore,F.pos),F.pos+=J.length,process.nextTick(B);return}let X=J.length,Y=F.chunkSizeBytes-F.pos,D=Math.min(Y,J.length),G=0;while(X>0){let Z=J.length-X;J.copy(F.bufToStore,F.pos,Z,Z+D),F.pos+=D,Y-=D;let U;if(Y===0){U=j81(F.id,F.n,Buffer.from(F.bufToStore));let z=F.timeoutContext?.remainingTimeMS;if(z!=null&&z<=0)return RF(F,new P2.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),B);if(++F.state.outstandingRequests,++G,UH(F,B))return;F.chunks.insertOne(U,{writeConcern:F.writeConcern,timeoutMS:z}).then(()=>{if(--F.state.outstandingRequests,--G,!G)Rk(F,B)},(W)=>{return RF(F,W,B)}),Y=F.chunkSizeBytes,F.pos=0,++F.n}X-=D,D=Math.min(Y,X)}}function O00(F,A){if(F.pos===0)return Rk(F,A);let $=Buffer.alloc(F.pos);F.bufToStore.copy($,0,0,F.pos);let B=j81(F.id,F.n,$);if(UH(F,A))return;let J=F.timeoutContext?.remainingTimeMS;if(J!=null&&J<=0)return RF(F,new P2.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);++F.state.outstandingRequests,F.chunks.insertOne(B,{writeConcern:F.writeConcern,timeoutMS:J}).then(()=>{--F.state.outstandingRequests,Rk(F,A)},(X)=>{return RF(F,X,A)})}function UH(F,A){if(F.state.aborted)return process.nextTick(A,new P2.MongoAPIError("Stream has been aborted")),!0;return!1}});var x81=Q((u81)=>{Object.defineProperty(u81,"__esModule",{value:!0});u81.GridFSBucket=void 0;var Mk=B1(),S00=z9(),k81=n6(),zH=W1(),u00=W3(),O81=Pk(),S81=jk(),f00={bucketName:"fs",chunkSizeBytes:261120};class Tk extends S00.TypedEventEmitter{constructor(F,A){super();this.on("error",zH.noop),this.setMaxListeners(0);let $=(0,zH.resolveOptions)(F,{...f00,...A,writeConcern:u00.WriteConcern.fromOptions(A)});this.s={db:F,options:$,_chunksCollection:F.collection($.bucketName+".chunks"),_filesCollection:F.collection($.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(F,A){return new S81.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...A})}openUploadStreamWithId(F,A,$){return new S81.GridFSBucketWriteStream(this,A,{timeoutMS:this.s.options.timeoutMS,...$,id:F})}openDownloadStream(F,A){return new O81.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:F},{timeoutMS:this.s.options.timeoutMS,...A})}async delete(F,A){let{timeoutMS:$}=(0,zH.resolveOptions)(this.s.db,A),B=void 0;if($)B=new k81.CSOTTimeoutContext({timeoutMS:$,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:J}=await this.s._filesCollection.deleteOne({_id:F},{timeoutMS:B?.remainingTimeMS}),X=B?.remainingTimeMS;if(X!=null&&X<=0)throw new Mk.MongoOperationTimeoutError(`Timed out after ${$}ms`);if(await this.s._chunksCollection.deleteMany({files_id:F},{timeoutMS:X}),J===0)throw new Mk.MongoRuntimeError(`File not found for id ${F}`)}find(F={},A={}){return this.s._filesCollection.find(F,A)}openDownloadStreamByName(F,A){let $={uploadDate:-1},B=void 0;if(A&&A.revision!=null)if(A.revision>=0)$={uploadDate:1},B=A.revision;else B=-A.revision-1;return new O81.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:F},{timeoutMS:this.s.options.timeoutMS,...A,sort:$,skip:B})}async rename(F,A,$){let B={_id:F},J={$set:{filename:A}},{matchedCount:X}=await this.s._filesCollection.updateOne(B,J,$);if(X===0)throw new Mk.MongoRuntimeError(`File with id ${F} not found`)}async drop(F){let{timeoutMS:A}=(0,zH.resolveOptions)(this.s.db,F),$=void 0;if(A)$=new k81.CSOTTimeoutContext({timeoutMS:A,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if($){await this.s._filesCollection.drop({timeoutMS:$.remainingTimeMS});let B=$.getRemainingTimeMSOrThrow(`Timed out after ${A}ms`);await this.s._chunksCollection.drop({timeoutMS:B})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}u81.GridFSBucket=Tk;Tk.INDEX="index"});var LF=Q((y)=>{Object.defineProperty(y,"__esModule",{value:!0});y.MongoRuntimeError=y.MongoParseError=y.MongoOperationTimeoutError=y.MongoOIDCError=y.MongoNotConnectedError=y.MongoNetworkTimeoutError=y.MongoNetworkError=y.MongoMissingDependencyError=y.MongoMissingCredentialsError=y.MongoKerberosError=y.MongoInvalidArgumentError=y.MongoGridFSStreamError=y.MongoGridFSChunkError=y.MongoGCPError=y.MongoExpiredSessionError=y.MongoError=y.MongoDriverError=y.MongoDecompressionError=y.MongoCursorInUseError=y.MongoCursorExhaustedError=y.MongoCompatibilityError=y.MongoClientClosedError=y.MongoClientBulkWriteExecutionError=y.MongoClientBulkWriteError=y.MongoClientBulkWriteCursorError=y.MongoChangeStreamError=y.MongoBatchReExecutionError=y.MongoAzureError=y.MongoAWSError=y.MongoAPIError=y.ExplainableCursor=y.ChangeStreamCursor=y.ClientEncryption=y.MongoBulkWriteError=y.UUID=y.Timestamp=y.ObjectId=y.MinKey=y.MaxKey=y.Long=y.Int32=y.Double=y.Decimal128=y.DBRef=y.Code=y.BSONType=y.BSONSymbol=y.BSONRegExp=y.Binary=y.BSON=void 0;y.CommandFailedEvent=y.WriteConcern=y.ReadPreference=y.ReadConcern=y.TopologyType=y.ServerType=y.ReadPreferenceMode=y.ReadConcernLevel=y.ProfilingLevel=y.ReturnDocument=y.SeverityLevel=y.MongoLoggableComponent=y.ServerApiVersion=y.ExplainVerbosity=y.MongoErrorLabel=y.CursorTimeoutMode=y.CURSOR_FLAGS=y.Compressor=y.AuthMechanism=y.GSSAPICanonicalizationValue=y.AutoEncryptionLoggerLevel=y.BatchType=y.UnorderedBulkOperation=y.OrderedBulkOperation=y.MongoClient=y.ListIndexesCursor=y.ListCollectionsCursor=y.GridFSBucketWriteStream=y.GridFSBucketReadStream=y.GridFSBucket=y.FindCursor=y.Db=y.Collection=y.ClientSession=y.ChangeStream=y.CancellationToken=y.AggregationCursor=y.Admin=y.AbstractCursor=y.configureExplicitResourceManagement=y.MongoWriteConcernError=y.MongoUnexpectedServerResponseError=y.MongoTransactionError=y.MongoTopologyClosedError=y.MongoTailableCursorError=y.MongoSystemError=y.MongoStalePrimaryError=y.MongoServerSelectionError=y.MongoServerError=y.MongoServerClosedError=void 0;y.MongoClientAuthProviders=y.MongoCryptKMSRequestNetworkTimeoutError=y.MongoCryptInvalidArgumentError=y.MongoCryptError=y.MongoCryptCreateEncryptedCollectionError=y.MongoCryptCreateDataKeyError=y.MongoCryptAzureKMSRequestError=y.SrvPollingEvent=y.WaitingForSuitableServerEvent=y.ServerSelectionSucceededEvent=y.ServerSelectionStartedEvent=y.ServerSelectionFailedEvent=y.ServerSelectionEvent=y.TopologyOpeningEvent=y.TopologyDescriptionChangedEvent=y.TopologyClosedEvent=y.ServerOpeningEvent=y.ServerHeartbeatSucceededEvent=y.ServerHeartbeatStartedEvent=y.ServerHeartbeatFailedEvent=y.ServerDescriptionChangedEvent=y.ServerClosedEvent=y.ConnectionReadyEvent=y.ConnectionPoolReadyEvent=y.ConnectionPoolMonitoringEvent=y.ConnectionPoolCreatedEvent=y.ConnectionPoolClosedEvent=y.ConnectionPoolClearedEvent=y.ConnectionCreatedEvent=y.ConnectionClosedEvent=y.ConnectionCheckOutStartedEvent=y.ConnectionCheckOutFailedEvent=y.ConnectionCheckedOutEvent=y.ConnectionCheckedInEvent=y.CommandSucceededEvent=y.CommandStartedEvent=void 0;var x00=kj();Object.defineProperty(y,"Admin",{enumerable:!0,get:function(){return x00.Admin}});var b00=Oj();Object.defineProperty(y,"OrderedBulkOperation",{enumerable:!0,get:function(){return b00.OrderedBulkOperation}});var g00=Sj();Object.defineProperty(y,"UnorderedBulkOperation",{enumerable:!0,get:function(){return g00.UnorderedBulkOperation}});var _00=wF();Object.defineProperty(y,"ChangeStream",{enumerable:!0,get:function(){return _00.ChangeStream}});var y00=a$();Object.defineProperty(y,"Collection",{enumerable:!0,get:function(){return y00.Collection}});var v00=I4();Object.defineProperty(y,"AbstractCursor",{enumerable:!0,get:function(){return v00.AbstractCursor}});var h00=ZD();Object.defineProperty(y,"AggregationCursor",{enumerable:!0,get:function(){return h00.AggregationCursor}});var m00=Wk();Object.defineProperty(y,"FindCursor",{enumerable:!0,get:function(){return m00.FindCursor}});var d00=JT();Object.defineProperty(y,"ListCollectionsCursor",{enumerable:!0,get:function(){return d00.ListCollectionsCursor}});var c00=Kk();Object.defineProperty(y,"ListIndexesCursor",{enumerable:!0,get:function(){return c00.ListIndexesCursor}});var l00=pW();Object.defineProperty(y,"Db",{enumerable:!0,get:function(){return l00.Db}});var p00=x81();Object.defineProperty(y,"GridFSBucket",{enumerable:!0,get:function(){return p00.GridFSBucket}});var i00=Pk();Object.defineProperty(y,"GridFSBucketReadStream",{enumerable:!0,get:function(){return i00.GridFSBucketReadStream}});var a00=jk();Object.defineProperty(y,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return a00.GridFSBucketWriteStream}});var n00=p8();Object.defineProperty(y,"MongoClient",{enumerable:!0,get:function(){return n00.MongoClient}});var r00=z9();Object.defineProperty(y,"CancellationToken",{enumerable:!0,get:function(){return r00.CancellationToken}});var t00=b$();Object.defineProperty(y,"ClientSession",{enumerable:!0,get:function(){return t00.ClientSession}});var s00=Y0();Object.defineProperty(y,"BSON",{enumerable:!0,get:function(){return s00.BSON}});var V3=Y0();Object.defineProperty(y,"Binary",{enumerable:!0,get:function(){return V3.Binary}});Object.defineProperty(y,"BSONRegExp",{enumerable:!0,get:function(){return V3.BSONRegExp}});Object.defineProperty(y,"BSONSymbol",{enumerable:!0,get:function(){return V3.BSONSymbol}});Object.defineProperty(y,"BSONType",{enumerable:!0,get:function(){return V3.BSONType}});Object.defineProperty(y,"Code",{enumerable:!0,get:function(){return V3.Code}});Object.defineProperty(y,"DBRef",{enumerable:!0,get:function(){return V3.DBRef}});Object.defineProperty(y,"Decimal128",{enumerable:!0,get:function(){return V3.Decimal128}});Object.defineProperty(y,"Double",{enumerable:!0,get:function(){return V3.Double}});Object.defineProperty(y,"Int32",{enumerable:!0,get:function(){return V3.Int32}});Object.defineProperty(y,"Long",{enumerable:!0,get:function(){return V3.Long}});Object.defineProperty(y,"MaxKey",{enumerable:!0,get:function(){return V3.MaxKey}});Object.defineProperty(y,"MinKey",{enumerable:!0,get:function(){return V3.MinKey}});Object.defineProperty(y,"ObjectId",{enumerable:!0,get:function(){return V3.ObjectId}});Object.defineProperty(y,"Timestamp",{enumerable:!0,get:function(){return V3.Timestamp}});Object.defineProperty(y,"UUID",{enumerable:!0,get:function(){return V3.UUID}});var o00=R$();Object.defineProperty(y,"MongoBulkWriteError",{enumerable:!0,get:function(){return o00.MongoBulkWriteError}});var e00=VW();Object.defineProperty(y,"ClientEncryption",{enumerable:!0,get:function(){return e00.ClientEncryption}});var F60=Nk();Object.defineProperty(y,"ChangeStreamCursor",{enumerable:!0,get:function(){return F60.ChangeStreamCursor}});var A60=JH();Object.defineProperty(y,"ExplainableCursor",{enumerable:!0,get:function(){return A60.ExplainableCursor}});var l1=B1();Object.defineProperty(y,"MongoAPIError",{enumerable:!0,get:function(){return l1.MongoAPIError}});Object.defineProperty(y,"MongoAWSError",{enumerable:!0,get:function(){return l1.MongoAWSError}});Object.defineProperty(y,"MongoAzureError",{enumerable:!0,get:function(){return l1.MongoAzureError}});Object.defineProperty(y,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return l1.MongoBatchReExecutionError}});Object.defineProperty(y,"MongoChangeStreamError",{enumerable:!0,get:function(){return l1.MongoChangeStreamError}});Object.defineProperty(y,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return l1.MongoClientBulkWriteCursorError}});Object.defineProperty(y,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return l1.MongoClientBulkWriteError}});Object.defineProperty(y,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return l1.MongoClientBulkWriteExecutionError}});Object.defineProperty(y,"MongoClientClosedError",{enumerable:!0,get:function(){return l1.MongoClientClosedError}});Object.defineProperty(y,"MongoCompatibilityError",{enumerable:!0,get:function(){return l1.MongoCompatibilityError}});Object.defineProperty(y,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return l1.MongoCursorExhaustedError}});Object.defineProperty(y,"MongoCursorInUseError",{enumerable:!0,get:function(){return l1.MongoCursorInUseError}});Object.defineProperty(y,"MongoDecompressionError",{enumerable:!0,get:function(){return l1.MongoDecompressionError}});Object.defineProperty(y,"MongoDriverError",{enumerable:!0,get:function(){return l1.MongoDriverError}});Object.defineProperty(y,"MongoError",{enumerable:!0,get:function(){return l1.MongoError}});Object.defineProperty(y,"MongoExpiredSessionError",{enumerable:!0,get:function(){return l1.MongoExpiredSessionError}});Object.defineProperty(y,"MongoGCPError",{enumerable:!0,get:function(){return l1.MongoGCPError}});Object.defineProperty(y,"MongoGridFSChunkError",{enumerable:!0,get:function(){return l1.MongoGridFSChunkError}});Object.defineProperty(y,"MongoGridFSStreamError",{enumerable:!0,get:function(){return l1.MongoGridFSStreamError}});Object.defineProperty(y,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return l1.MongoInvalidArgumentError}});Object.defineProperty(y,"MongoKerberosError",{enumerable:!0,get:function(){return l1.MongoKerberosError}});Object.defineProperty(y,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return l1.MongoMissingCredentialsError}});Object.defineProperty(y,"MongoMissingDependencyError",{enumerable:!0,get:function(){return l1.MongoMissingDependencyError}});Object.defineProperty(y,"MongoNetworkError",{enumerable:!0,get:function(){return l1.MongoNetworkError}});Object.defineProperty(y,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return l1.MongoNetworkTimeoutError}});Object.defineProperty(y,"MongoNotConnectedError",{enumerable:!0,get:function(){return l1.MongoNotConnectedError}});Object.defineProperty(y,"MongoOIDCError",{enumerable:!0,get:function(){return l1.MongoOIDCError}});Object.defineProperty(y,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return l1.MongoOperationTimeoutError}});Object.defineProperty(y,"MongoParseError",{enumerable:!0,get:function(){return l1.MongoParseError}});Object.defineProperty(y,"MongoRuntimeError",{enumerable:!0,get:function(){return l1.MongoRuntimeError}});Object.defineProperty(y,"MongoServerClosedError",{enumerable:!0,get:function(){return l1.MongoServerClosedError}});Object.defineProperty(y,"MongoServerError",{enumerable:!0,get:function(){return l1.MongoServerError}});Object.defineProperty(y,"MongoServerSelectionError",{enumerable:!0,get:function(){return l1.MongoServerSelectionError}});Object.defineProperty(y,"MongoStalePrimaryError",{enumerable:!0,get:function(){return l1.MongoStalePrimaryError}});Object.defineProperty(y,"MongoSystemError",{enumerable:!0,get:function(){return l1.MongoSystemError}});Object.defineProperty(y,"MongoTailableCursorError",{enumerable:!0,get:function(){return l1.MongoTailableCursorError}});Object.defineProperty(y,"MongoTopologyClosedError",{enumerable:!0,get:function(){return l1.MongoTopologyClosedError}});Object.defineProperty(y,"MongoTransactionError",{enumerable:!0,get:function(){return l1.MongoTransactionError}});Object.defineProperty(y,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return l1.MongoUnexpectedServerResponseError}});Object.defineProperty(y,"MongoWriteConcernError",{enumerable:!0,get:function(){return l1.MongoWriteConcernError}});var $60=g$();Object.defineProperty(y,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return $60.configureExplicitResourceManagement}});var B60=R$();Object.defineProperty(y,"BatchType",{enumerable:!0,get:function(){return B60.BatchType}});var J60=ZM();Object.defineProperty(y,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return J60.AutoEncryptionLoggerLevel}});var X60=ZW();Object.defineProperty(y,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return X60.GSSAPICanonicalizationValue}});var Y60=n2();Object.defineProperty(y,"AuthMechanism",{enumerable:!0,get:function(){return Y60.AuthMechanism}});var D60=_Y();Object.defineProperty(y,"Compressor",{enumerable:!0,get:function(){return D60.Compressor}});var b81=I4();Object.defineProperty(y,"CURSOR_FLAGS",{enumerable:!0,get:function(){return b81.CURSOR_FLAGS}});Object.defineProperty(y,"CursorTimeoutMode",{enumerable:!0,get:function(){return b81.CursorTimeoutMode}});var G60=B1();Object.defineProperty(y,"MongoErrorLabel",{enumerable:!0,get:function(){return G60.MongoErrorLabel}});var Z60=EY();Object.defineProperty(y,"ExplainVerbosity",{enumerable:!0,get:function(){return Z60.ExplainVerbosity}});var U60=p8();Object.defineProperty(y,"ServerApiVersion",{enumerable:!0,get:function(){return U60.ServerApiVersion}});var g81=_8();Object.defineProperty(y,"MongoLoggableComponent",{enumerable:!0,get:function(){return g81.MongoLoggableComponent}});Object.defineProperty(y,"SeverityLevel",{enumerable:!0,get:function(){return g81.SeverityLevel}});var z60=Vk();Object.defineProperty(y,"ReturnDocument",{enumerable:!0,get:function(){return z60.ReturnDocument}});var W60=KT();Object.defineProperty(y,"ProfilingLevel",{enumerable:!0,get:function(){return W60.ProfilingLevel}});var H60=W2();Object.defineProperty(y,"ReadConcernLevel",{enumerable:!0,get:function(){return H60.ReadConcernLevel}});var K60=J4();Object.defineProperty(y,"ReadPreferenceMode",{enumerable:!0,get:function(){return K60.ReadPreferenceMode}});var _81=D9();Object.defineProperty(y,"ServerType",{enumerable:!0,get:function(){return _81.ServerType}});Object.defineProperty(y,"TopologyType",{enumerable:!0,get:function(){return _81.TopologyType}});var q60=W2();Object.defineProperty(y,"ReadConcern",{enumerable:!0,get:function(){return q60.ReadConcern}});var Q60=J4();Object.defineProperty(y,"ReadPreference",{enumerable:!0,get:function(){return Q60.ReadPreference}});var V60=W3();Object.defineProperty(y,"WriteConcern",{enumerable:!0,get:function(){return V60.WriteConcern}});var kk=CM();Object.defineProperty(y,"CommandFailedEvent",{enumerable:!0,get:function(){return kk.CommandFailedEvent}});Object.defineProperty(y,"CommandStartedEvent",{enumerable:!0,get:function(){return kk.CommandStartedEvent}});Object.defineProperty(y,"CommandSucceededEvent",{enumerable:!0,get:function(){return kk.CommandSucceededEvent}});var v9=xM();Object.defineProperty(y,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return v9.ConnectionCheckedInEvent}});Object.defineProperty(y,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return v9.ConnectionCheckedOutEvent}});Object.defineProperty(y,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return v9.ConnectionCheckOutFailedEvent}});Object.defineProperty(y,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return v9.ConnectionCheckOutStartedEvent}});Object.defineProperty(y,"ConnectionClosedEvent",{enumerable:!0,get:function(){return v9.ConnectionClosedEvent}});Object.defineProperty(y,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return v9.ConnectionCreatedEvent}});Object.defineProperty(y,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return v9.ConnectionPoolClearedEvent}});Object.defineProperty(y,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return v9.ConnectionPoolClosedEvent}});Object.defineProperty(y,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return v9.ConnectionPoolCreatedEvent}});Object.defineProperty(y,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return v9.ConnectionPoolMonitoringEvent}});Object.defineProperty(y,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return v9.ConnectionPoolReadyEvent}});Object.defineProperty(y,"ConnectionReadyEvent",{enumerable:!0,get:function(){return v9.ConnectionReadyEvent}});var f7=gW();Object.defineProperty(y,"ServerClosedEvent",{enumerable:!0,get:function(){return f7.ServerClosedEvent}});Object.defineProperty(y,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return f7.ServerDescriptionChangedEvent}});Object.defineProperty(y,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return f7.ServerHeartbeatFailedEvent}});Object.defineProperty(y,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return f7.ServerHeartbeatStartedEvent}});Object.defineProperty(y,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return f7.ServerHeartbeatSucceededEvent}});Object.defineProperty(y,"ServerOpeningEvent",{enumerable:!0,get:function(){return f7.ServerOpeningEvent}});Object.defineProperty(y,"TopologyClosedEvent",{enumerable:!0,get:function(){return f7.TopologyClosedEvent}});Object.defineProperty(y,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return f7.TopologyDescriptionChangedEvent}});Object.defineProperty(y,"TopologyOpeningEvent",{enumerable:!0,get:function(){return f7.TopologyOpeningEvent}});var ID=dT();Object.defineProperty(y,"ServerSelectionEvent",{enumerable:!0,get:function(){return ID.ServerSelectionEvent}});Object.defineProperty(y,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return ID.ServerSelectionFailedEvent}});Object.defineProperty(y,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return ID.ServerSelectionStartedEvent}});Object.defineProperty(y,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return ID.ServerSelectionSucceededEvent}});Object.defineProperty(y,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return ID.WaitingForSuitableServerEvent}});var E60=pT();Object.defineProperty(y,"SrvPollingEvent",{enumerable:!0,get:function(){return E60.SrvPollingEvent}});var BB=u$();Object.defineProperty(y,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return BB.MongoCryptAzureKMSRequestError}});Object.defineProperty(y,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return BB.MongoCryptCreateDataKeyError}});Object.defineProperty(y,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return BB.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(y,"MongoCryptError",{enumerable:!0,get:function(){return BB.MongoCryptError}});Object.defineProperty(y,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return BB.MongoCryptInvalidArgumentError}});Object.defineProperty(y,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return BB.MongoCryptKMSRequestNetworkTimeoutError}});var L60=fT();Object.defineProperty(y,"MongoClientAuthProviders",{enumerable:!0,get:function(){return L60.MongoClientAuthProviders}})});var q1=Q((N60)=>{N60.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");N60.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");N60.arrayParentSymbol=Symbol("mongoose#Array#_parent");N60.arrayPathSymbol=Symbol("mongoose#Array#_path");N60.arraySchemaSymbol=Symbol("mongoose#Array#_schema");N60.documentArrayParent=Symbol("mongoose#documentArrayParent");N60.documentIsSelected=Symbol("mongoose#Document#isSelected");N60.documentIsModified=Symbol("mongoose#Document#isModified");N60.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");N60.documentSchemaSymbol=Symbol("mongoose#Document#schema");N60.getSymbol=Symbol("mongoose#Document#get");N60.modelSymbol=Symbol("mongoose#Model");N60.objectIdSymbol=Symbol("mongoose#ObjectId");N60.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");N60.schemaTypeSymbol=Symbol("mongoose#schemaType");N60.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");N60.scopeSymbol=Symbol("mongoose#Document#scope");N60.validatorErrorSymbol=Symbol("mongoose#validatorError")});var x7=Q((eC0,y81)=>{var CD=x4().ObjectId,d60=q1().objectIdSymbol;Object.defineProperty(CD.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!CD.prototype.hasOwnProperty("valueOf"))CD.prototype.valueOf=function(){return this.toString()};CD.prototype[d60]=!0;y81.exports=CD});var E3=Q((FN0,v81)=>{v81.exports=function(A){if(A==null)return;if(typeof A.constructor!=="function")return;return A.constructor.name}});var R2=Q((c60)=>{/*!
 * ignore
 */c60.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var WH=Q(($N0,h81)=>{h81.exports=x4().Decimal128});var jF=Q((BN0,m81)=>{m81.exports=new Set(["__proto__","constructor","prototype"])});var HH=Q((p60)=>{p60.isMongooseArray=function(F){return Array.isArray(F)&&F.isMongooseArray}});var ND=Q((XN0,d81)=>{var a60=HH().isMongooseArray;d81.exports=function(F){return F!=null&&(a60(F)||F.$__!=null||F.isMongooseBuffer||F.$isMongooseMap)}});var Ok=Q((YN0,c81)=>{var n60=/^function\s*([^\s(]+)/;c81.exports=function(F){return F.name||(F.toString().trim().match(n60)||[])[1]}});var M4=Q((DN0,l81)=>{function r60(F,A){return F!=null&&F._bsontype===A}l81.exports=r60});var $5=Q((GN0,p81)=>{p81.exports=function(F){return Buffer.isBuffer(F)||Object.prototype.toString.call(F)==="[object Object]"}});var JB=Q((ZN0,i81)=>{i81.exports=function(A){if(A==null||typeof A!=="object")return!1;let $=Object.getPrototypeOf(A);return!$||$.constructor.name==="Object"}});var XB=Q((t60)=>{var a81=Symbol("mongoose#trustedSymbol");t60.trustedSymbol=a81;t60.trusted=function(A){if(A==null||typeof A!=="object")return A;return A[a81]=!0,A}});var Z6=Q((zN0,n81)=>{var e60=WH(),F40=x7(),A40=jF(),$40=ND(),B40=Ok(),Sk=M4(),J40=HH().isMongooseArray,X40=$5(),Y40=JB(),D40=q1(),uk=XB().trustedSymbol,G40=x4();function xk(F,A,$){if(F==null)return F;if(Sk(F,"Double"))return new G40.Double(F.value);if(typeof F==="number"||typeof F==="string"||typeof F==="boolean"||typeof F==="bigint")return F;if(Array.isArray(F))return Z40(F,A);if($40(F)){if(A){if(A.retainDocuments&&F.$__!=null){let X=F.$clone();if(F.__index!=null)X.__index=F.__index;if(F.__parentArray!=null)X.__parentArray=F.__parentArray;return X.$__parent=F.$__parent,X}}if(Y40(F)&&F.$__!=null&&F._doc!=null)return F._doc;let J;if(A&&A.json&&typeof F.toJSON==="function")J=F.toJSON(A);else J=F.toObject(A);return J}let B=F.constructor;if(B)switch(B40(B)){case"Object":return fk(F,A,$);case"Date":return new B(+F);case"RegExp":return U40(F);default:break}if(Sk(F,"ObjectId")){if(A&&A.flattenObjectIds)return F.toJSON();return new F40(F.id)}if(Sk(F,"Decimal128")){if(A&&A.flattenDecimals)return F.toJSON();return e60.fromString(F.toString())}if(!B&&X40(F))return fk(F,A,$);if(typeof F==="object"&&F[D40.schemaTypeSymbol])return F.clone();if(A&&A.bson&&typeof F.toBSON==="function")return F;if(typeof F.valueOf==="function")return F.valueOf();return fk(F,A,$)}n81.exports=xk;/*!
 * ignore
 */function fk(F,A,$){let B=A&&A.minimize,J=A&&A.omitUndefined,X=A&&A._seen,Y={},D;if(X&&X.has(F))return X.get(F);else if(X)X.set(F,Y);if(uk in F&&A?.copyTrustedSymbol!==!1)Y[uk]=F[uk];let G=Object.keys(F),Z=G.length;for(let U=0;U<Z;++U){let z=G[U];if(A40.has(z))continue;let W=xk(F[z],A,!1);if((B===!1||J)&&typeof W>"u")delete Y[z];else if(B!==!0||typeof W<"u")D||(D=!0),Y[z]=W}return B&&!$?D&&Y:Y}function Z40(F,A){let $=0,B=F.length,J=null;if(A?.retainDocuments)if(F.isMongooseDocumentArray)J=new(F.$schemaType()).schema.base.Types.DocumentArray([],F.$path(),F.$parent(),F.$schemaType());else if(F.isMongooseArray)J=new(F.$parent()).schema.base.Types.Array([],F.$path(),F.$parent(),F.$schemaType());else J=Array(B);else J=Array(B);F=J40(F)?F.__array:F;for($=0;$<B;++$)J[$]=xk(F[$],A,!0);return J}function U40(F){let A=new RegExp(F.source,F.flags);if(A.lastIndex!==F.lastIndex)A.lastIndex=F.lastIndex;return A}});var s81=Q((WN0,t81)=>{/*!
 * Module dependencies.
 */var KH=Ij(),bk=d1(),gk=LF().Collection,z40=x7(),r81=E3(),W40=R2().internalToObjectOptions,H40=x("stream"),_k=x("util"),K40=Object.freeze({...W40,copyTrustedSymbol:!1});function j2(F,A,$){this.collection=null,this.Promise=$.Promise||Promise,this.modelName=$.modelName,delete $.modelName,this._closed=!1,KH.apply(this,arguments)}/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(j2.prototype,KH.prototype);j2.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),KH.prototype.onOpen.call(this),this.collection};j2.prototype.onClose=function(F){KH.prototype.onClose.call(this,F)};j2.prototype._getCollection=function(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};/*!
 * ignore
 */var PD={watch:!0,find:!0,aggregate:!0};function q40(F){j2.prototype[F]=function(){let A=this._getCollection(),$=Array.from(arguments),B=this,J=B&&B.conn&&B.conn.base&&B.conn.base.options&&B.conn.base.options.debug,X=B&&B.conn&&B.conn.options&&B.conn.options.debug,Y=X==null?J:X,D=arguments[arguments.length-1],G=new z40;if(this.conn.$wasForceClosed){let z=new bk("Connection was force closed");if($.length>0&&typeof $[$.length-1]==="function"){$[$.length-1](z);return}else throw z}let Z=$,U=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:G,modelName:B.modelName,collectionName:B.name,method:F,args:$});let z,W=$,H=null,K=null;if(PD[F]&&typeof D==="function")this.addQueue(F,W),z=D;else if(PD[F])H=new this.Promise((V,E)=>{z=function(w,I){if(K!=null)clearTimeout(K);if(w!=null)return E(w);V(I)},W=$.concat([z]),this.addQueue(F,W)});else if(typeof D==="function")z=function(){if(K!=null)clearTimeout(K);return D.apply(this,arguments)},W=$.slice(0,$.length-1).concat([z]);else H=new Promise((V,E)=>{z=function(w,I){if(K!=null)clearTimeout(K);if(w!=null)return E(w);V(I)},W=$.concat([z]),this.addQueue(F,W)});let q=this._getBufferTimeoutMS();if(K=setTimeout(()=>{if(this.removeQueue(F,W)){let E="Operation `"+this.name+"."+F+"()` buffering timed out after "+q+"ms",L=new bk(E);this.conn.emit("buffer-end",{_id:G,modelName:B.modelName,collectionName:B.name,method:F,error:L}),z(L)}},q),!PD[F]&&typeof D==="function"){this.addQueue(F,W);return}return H}else if(!PD[F]&&typeof D==="function")U=function(W,H){if(W!=null)B.conn.emit("operation-end",{_id:G,modelName:B.modelName,collectionName:B.name,method:F,error:W});else B.conn.emit("operation-end",{_id:G,modelName:B.modelName,collectionName:B.name,method:F,result:H});return D.apply(this,arguments)},Z=$.slice(0,$.length-1).concat([U]);if(Y)if(typeof Y==="function"){let z=null;if(typeof $[$.length-1]=="function")z=$.slice(0,$.length-1);else z=$;Y.apply(B,[B.name,F].concat(z))}else if(Y instanceof H40.Writable)this.$printToStream(B.name,F,$,Y);else{let z=Y.color==null?!0:Y.color,W=Y.shell==null?!1:Y.shell;this.$print(B.name,F,$,z,W)}this.conn.emit("operation-start",{_id:G,modelName:B.modelName,collectionName:this.name,method:F,params:Z});try{if(A==null){let W="Cannot call `"+this.name+"."+F+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new bk(W)}if(PD[F]&&typeof D==="function"){let W=A[F].apply(A,Z.slice(0,Z.length-1));return this.conn.emit("operation-end",{_id:G,modelName:B.modelName,collectionName:this.name,method:F,result:W}),D.call(this,null,W)}let z=A[F].apply(A,Z);if(z!=null&&typeof z.then==="function")return z.then((W)=>{if(typeof D==="function")D(null,W);else this.conn.emit("operation-end",{_id:G,modelName:B.modelName,collectionName:this.name,method:F,result:W});return W},(W)=>{if(typeof D==="function"){D(W);return}else this.conn.emit("operation-end",{_id:G,modelName:B.modelName,collectionName:this.name,method:F,error:W});throw W});return z}catch(z){if(typeof D==="function")return D(z);else throw this.conn.emit("operation-end",{_id:G,modelName:B.modelName,collectionName:this.name,method:F,error:z}),z}}}for(let F of Object.getOwnPropertyNames(gk.prototype)){if(Object.getOwnPropertyDescriptor(gk.prototype,F).get!==void 0)continue;if(typeof gk.prototype[F]!=="function")continue;q40(F)}j2.prototype.$print=function(F,A,$,B,J){let X=B?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",Y=[F,A].join("."),D=[];for(let Z=$.length-1;Z>=0;--Z)if(this.$format($[Z])||D.length)D.unshift(this.$format($[Z],B,J));let G="("+D.join(", ")+")";console.info(X+Y+G)};j2.prototype.$printToStream=function(F,A,$,B){let J=[F,A].join("."),X=[];for(let D=$.length-1;D>=0;--D)if(this.$format($[D])||X.length)X.unshift(this.$format($[D]));let Y="("+X.join(", ")+")";B.write(J+Y,"utf8")};j2.prototype.$format=function(F,A,$){let B=typeof F;if(B==="function"||B==="undefined")return"";return yk(F,!1,A,$)};function YB(F){let A={inspect:function(){return F}};if(_k.inspect.custom)A[_k.inspect.custom]=A.inspect;return A}function Q40(F){return yk(F,!0)}function V40(F,A){F[A]=YB('ObjectId("'+F[A].toHexString()+'")')}function E40(F,A,$){if($)F[A]=YB('ISODate("'+F[A].toUTCString()+'")');else F[A]=YB('new Date("'+F[A].toUTCString()+'")')}function yk(F,A,$,B){if(F&&typeof F.toBSON==="function")F=F.toBSON();if(F==null)return F;let J=Z6(),X=A?F:J(F,K40),Y=r81(X);if(Y==="Binary")X="BinData("+X.sub_type+', "'+X.toString("base64")+'")';else if(Y==="ObjectId")X=YB('ObjectId("'+X.toHexString()+'")');else if(Y==="Date")X=YB('new Date("'+X.toUTCString()+'")');else if(Y==="Object"){let D=Object.keys(X),G=D.length,Z;for(let U=0;U<G;++U)if(Z=D[U],X[Z]){let z;if(typeof X[Z].toBSON==="function")try{X[Z]=X[Z].toBSON()}catch(H){z=H}let W=r81(X[Z]);if(W==="Binary")X[Z]="BinData("+X[Z].sub_type+', "'+X[Z].buffer.toString("base64")+'")';else if(W==="Object")X[Z]=yk(X[Z],!0);else if(W==="ObjectId")V40(X,Z);else if(W==="Date")E40(X,Z,B);else if(W==="ClientSession")X[Z]=YB('ClientSession("'+(X[Z]&&X[Z].id&&X[Z].id.id&&X[Z].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(X[Z]))X[Z]=X[Z].map(Q40);else if(z!=null)throw z}}if(A)return X;return _k.inspect(X,!1,10,$).replace(/\n/g,"").replace(/\s{2,}/g," ")}j2.prototype.getIndexes=j2.prototype.indexInformation;/*!
 * Module exports.
 */t81.exports=j2});var vk=Q((HN0,F51)=>{/*!
 * Module dependencies.
 */var L40=x("events").EventEmitter,RD=d1();/*!
 * ignore
 */var o81=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class e81 extends L40{constructor(F,A,$){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=A,this.options=$,this.errored=!1,$&&$.hydrate&&!$.model)throw Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let B=null;if(this.$driverChangeStreamPromise=new Promise((J,X)=>{try{F((Y,D)=>{if(Y!=null)return this.errored=!0,this.emit("error",Y),X(Y);this.driverChangeStream=D,this.emit("ready"),J()})}catch(Y){B=Y,this.errored=!0,this.emit("error",Y),X(Y)}}),B!=null)throw B}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),o81.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A!=null&&A.fullDocument!=null&&this.options&&this.options.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),o81.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A!=null&&A.fullDocument!=null&&this.options&&this.options.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})}hasNext(F){if(this.errored)throw new RD("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(F)}next(F){if(this.errored)throw new RD("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(F!=null){let $=F;F=(B,J)=>{if(B!=null)return $(B);if(J.fullDocument!=null)J.fullDocument=this.options.model.hydrate(J.fullDocument);return $(null,J)}}let A=this.driverChangeStream.next(F);if(A&&typeof A.then==="function")A=A.then(($)=>{if($.fullDocument!=null)$.fullDocument=this.options.model.hydrate($.fullDocument);return $});return A}return this.driverChangeStream.next(F)}addListener(F,A){if(this.errored)throw new RD("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(F,A)}on(F,A){if(this.errored)throw new RD("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(F,A)}once(F,A){if(this.errored)throw new RD("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(F,A)}_queue(F){this.once("ready",()=>F())}close(){if(this.closed=!0,this.driverChangeStream)return this.driverChangeStream.close();else return this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}}/*!
 * ignore
 */F51.exports=e81});var MF=Q((KN0,B51)=>{function L0(){this._pres=new Map,this._posts=new Map}L0.skipWrappedFunction=function(){if(!(this instanceof L0.skipWrappedFunction))return new L0.skipWrappedFunction(...arguments);this.args=[...arguments]};L0.overwriteResult=function(){if(!(this instanceof L0.overwriteResult))return new L0.overwriteResult(...arguments);this.args=[...arguments]};L0.prototype.execPre=function(F,A,$,B){if(arguments.length===3)B=$,$=[];let J=this._pres.get(F)||[],X=J.length,Y=J.numAsync||0,D=0,G=Y,Z=!1,U=$,z=null;if(!X)return MD(function(){B(null)});function W(){if(D>=X)return;let K=J[D];if(K.isAsync){let q=[jD(H),jD(function(V){if(V){if(Z)return;if(V instanceof L0.skipWrappedFunction)z=V;else return Z=!0,B(V)}if(--G===0&&D>=X)return B(z)})];qH(K.fn,A,q,q[0])}else if(K.fn.length>0){let q=[jD(H)],V=arguments.length>=2?arguments:[null].concat(U);for(let E=1;E<V.length;++E){if(E===V.length-1&&typeof V[E]==="function")continue;q.push(V[E])}qH(K.fn,A,q,q[0])}else{let q=null;try{q=K.fn.call(A)}catch(V){if(V!=null)return B(V)}if(QH(q))q.then(()=>H(),(V)=>H(V));else{if(++D>=X)if(G>0)return;else return MD(function(){B(z)});W()}}}W.apply(null,[null].concat($));function H(K){if(K){if(Z)return;if(K instanceof L0.skipWrappedFunction)z=K;else return Z=!0,B(K)}if(++D>=X)if(G>0)return;else return B(z);W.apply(A,arguments)}};L0.prototype.execPreSync=function(F,A,$){let B=this._pres.get(F)||[],J=B.length;for(let X=0;X<J;++X)B[X].fn.apply(A,$||[])};L0.prototype.execPost=function(F,A,$,B,J){if(arguments.length<5)J=B,B=null;let X=this._posts.get(F)||[],Y=X.length,D=0,G=null;if(B&&B.error)G=B.error;if(!Y)return MD(function(){J.apply(null,[G].concat($))});function Z(){let U=X[D].fn,z=0,W=$.length,H=[];for(let K=0;K<W;++K)if(z+=$[K]&&$[K]._kareemIgnore?0:1,!$[K]||!$[K]._kareemIgnore)H.push($[K]);if(G)if($51(X[D],z)){let K=jD(function(q){if(q){if(q instanceof L0.overwriteResult){if($=q.args,++D>=Y)return J.call(null,G);return Z()}G=q}if(++D>=Y)return J.call(null,G);Z()});qH(U,A,[G].concat(H).concat([K]),K)}else{if(++D>=Y)return J.call(null,G);Z()}else{let K=jD(function(q){if(q){if(q instanceof L0.overwriteResult){if($=q.args,++D>=Y)return J.apply(null,[null].concat($));return Z()}return G=q,Z()}if(++D>=Y)return J.apply(null,[null].concat($));Z()});if($51(X[D],z)){if(++D>=Y)return J.apply(null,[null].concat($));return Z()}if(U.length===z+1)qH(U,A,H.concat([K]),K);else{let q,V;try{V=U.apply(A,H)}catch(E){q=E,G=E}if(QH(V))return V.then((E)=>{K(E instanceof L0.overwriteResult?E:null)},(E)=>K(E));if(V instanceof L0.overwriteResult)$=V.args;if(++D>=Y)return J.apply(null,[q].concat($));Z()}}}Z()};L0.prototype.execPostSync=function(F,A,$){let B=this._posts.get(F)||[],J=B.length;for(let X=0;X<J;++X){let Y=B[X].fn.apply(A,$||[]);if(Y instanceof L0.overwriteResult)$=Y.args}return $};L0.prototype.createWrapperSync=function(F,A){let $=this;return function(){$.execPreSync(F,this,arguments);let J=A.apply(this,arguments);return $.execPostSync(F,this,[J])[0]}};function A51(F,A,$,B,J,X,Y){if(X.useErrorHandlers)return F.execPost($,B,J,{error:A},function(D){return typeof Y==="function"&&Y(D)});else return typeof Y==="function"&&Y(A)}L0.prototype.wrap=function(F,A,$,B,J){let X=B.length>0?B[B.length-1]:null,Y=Array.from(B);typeof X==="function"&&Y.pop();let D=this;J=J||{};let G=J.checkForPromise;this.execPre(F,$,B,function(Z){if(Z&&!(Z instanceof L0.skipWrappedFunction)){let H=J.numCallbackParams||0,K=J.contextParameter?[$]:[];for(let q=K.length;q<H;++q)K.push(null);return A51(D,Z,F,$,K,J,X)}let U=A.length,z;if(Z instanceof L0.skipWrappedFunction)return z=Z.args[0],W(null,...Z.args);else try{z=A.apply($,Y.concat(W))}catch(H){return W(H)}if(G){if(QH(z))return z.then((H)=>W(null,H),(H)=>W(H));if(U<Y.length+1)return W(null,z)}function W(){let H=Array.from(arguments);if(H.shift(),J.nullResultByDefault&&H.length===0)H.push(null);if(arguments[0])return A51(D,arguments[0],F,$,H,J,X);else D.execPost(F,$,H,function(){if(X===null)return;arguments[0]?X(arguments[0]):X.apply($,arguments)})}})};L0.prototype.filter=function(F){let A=this.clone(),$=Array.from(A._pres.keys());for(let J of $){let X=this._pres.get(J).map((Y)=>Object.assign({},Y,{name:J})).filter(F);if(X.length===0){A._pres.delete(J);continue}X.numAsync=X.filter((Y)=>Y.isAsync).length,A._pres.set(J,X)}let B=Array.from(A._posts.keys());for(let J of B){let X=this._posts.get(J).map((Y)=>Object.assign({},Y,{name:J})).filter(F);if(X.length===0){A._posts.delete(J);continue}A._posts.set(J,X)}return A};L0.prototype.hasHooks=function(F){return this._pres.has(F)||this._posts.has(F)};L0.prototype.createWrapper=function(F,A,$,B){let J=this;if(!this.hasHooks(F))return function(){MD(()=>A.apply(this,arguments))};return function(){let X=$||this;J.wrap(F,A,X,Array.from(arguments),B)}};L0.prototype.pre=function(F,A,$,B,J){let X={};if(typeof A==="object"&&A!==null)X=A,A=X.isAsync;else if(typeof arguments[1]!=="boolean")$=A,A=!1;let Y=this._pres.get(F)||[];if(this._pres.set(F,Y),A)Y.numAsync=Y.numAsync||0,++Y.numAsync;if(typeof $!=="function")throw Error('pre() requires a function, got "'+typeof $+'"');if(J)Y.unshift(Object.assign({},X,{fn:$,isAsync:A}));else Y.push(Object.assign({},X,{fn:$,isAsync:A}));return this};L0.prototype.post=function(F,A,$,B){let J=this._posts.get(F)||[];if(typeof A==="function")B=!!$,$=A,A={};if(typeof $!=="function")throw Error('post() requires a function, got "'+typeof $+'"');if(B)J.unshift(Object.assign({},A,{fn:$}));else J.push(Object.assign({},A,{fn:$}));return this._posts.set(F,J),this};L0.prototype.clone=function(){let F=new L0;for(let A of this._pres.keys()){let $=this._pres.get(A).slice();$.numAsync=this._pres.get(A).numAsync,F._pres.set(A,$)}for(let A of this._posts.keys())F._posts.set(A,this._posts.get(A).slice());return F};L0.prototype.merge=function(F,A){A=arguments.length===1?!0:A;let $=A?this.clone():this;for(let B of F._pres.keys()){let J=$._pres.get(B)||[],X=F._pres.get(B).filter((D)=>J.map((G)=>G.fn).indexOf(D.fn)===-1),Y=J.concat(X);Y.numAsync=J.numAsync||0,Y.numAsync+=X.filter((D)=>D.isAsync).length,$._pres.set(B,Y)}for(let B of F._posts.keys()){let J=$._posts.get(B)||[],X=F._posts.get(B).filter((Y)=>J.indexOf(Y)===-1);$._posts.set(B,J.concat(X))}return $};function qH(F,A,$,B){let J;try{J=F.apply(A,$)}catch(X){return B(X)}if(QH(J))J.then(()=>B(),(X)=>B(X))}function QH(F){return typeof F==="object"&&F!==null&&typeof F.then==="function"}function jD(F){let A=!1,$=this;return function(){if(A)return;return A=!0,MD(()=>F.apply($,arguments))}}var MD=typeof process==="object"&&process!==null&&process.nextTick||function(A){setTimeout(A,0)};function $51(F,A){if(F.errorHandler)return!0;return F.fn.length===A+2}B51.exports=L0});var Y51=Q((J51,X51)=>{var i4=X51.exports=J51={};i4.DocumentNotFoundError=null;i4.general={};i4.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";i4.general.required="Path `{PATH}` is required.";i4.Number={};i4.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";i4.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";i4.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";i4.Date={};i4.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";i4.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";i4.String={};i4.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";i4.String.match="Path `{PATH}` is invalid ({VALUE}).";i4.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";i4.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var a4=Q((qN0,Z51)=>{/*!
 * Module dependencies.
 */var w40=d1(),I40=x("util");class dk extends w40{constructor(F,A,$,B,J){if(arguments.length>0){let X=D51(A),Y=G51(J),D=hk(null,F,A,$,Y,X,B);super(D);this.init(F,A,$,B,J)}else super(hk())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(F,A,$,B,J){/*!
   * ignore
   */this.stringValue=mk(A),this.messageFormat=G51(J),this.kind=F,this.value=A,this.path=$,this.reason=B,this.valueType=D51(A)}copy(F){this.messageFormat=F.messageFormat,this.stringValue=F.stringValue,this.kind=F.kind,this.value=F.value,this.path=F.path,this.reason=F.reason,this.message=F.message,this.valueType=F.valueType}setModel(F){/*!
   * ignore
   */this.message=hk(F,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(dk.prototype,"name",{value:"CastError"});function mk(F){let A=I40.inspect(F);if(A=A.replace(/^'|'$/g,'"'),!A.startsWith('"'))A='"'+A+'"';return A}function D51(F){if(F==null)return""+F;let A=typeof F;if(A!=="object")return A;if(typeof F.constructor!=="function")return A;return F.constructor.name}function G51(F){let A=F&&F._castErrorMessage||null;if(typeof A==="string"||typeof A==="function")return A}/*!
 * ignore
 */function hk(F,A,$,B,J,X,Y){if(typeof J==="string"){let D=mk($),G=J.replace("{KIND}",A).replace("{VALUE}",D).replace("{PATH}",B);if(F!=null)G=G.replace("{MODEL}",F.modelName);return G}else if(typeof J==="function")return J($,B,F,A);else{let D=mk($),G=X?" (type "+X+")":"",Z="Cast to "+A+" failed for value "+D+G+' at path "'+B+'"';if(F!=null)Z+=' for model "'+F.modelName+'"';if(Y!=null&&typeof Y.constructor==="function"&&Y.constructor.name!=="AssertionError"&&Y.constructor.name!=="Error")Z+=' because of "'+Y.constructor.name+'"';return Z}}/*!
 * exports
 */Z51.exports=dk});var VH=Q((QN0,z51)=>{/*!
 * Module dependencies.
 */var U51=d1(),C40=x("util");class ck extends U51{constructor(F,A,$,B){let J,X=U51.messages;if(X.DocumentNotFoundError!=null)J=typeof X.DocumentNotFoundError==="function"?X.DocumentNotFoundError(F,A):X.DocumentNotFoundError;else J='No document found for query "'+C40.inspect(F)+'" on model "'+A+'"';super(J);this.result=B,this.numAffected=$,this.filter=F,this.query=F}}Object.defineProperty(ck.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */z51.exports=ck});var lk=Q((VN0,W51)=>{/*!
 * ignore
 */W51.exports=function(A){let $=Object.keys(A.errors||{}),B=$.length,J=[],X;for(let Y=0;Y<B;++Y){if(X=$[Y],A===A.errors[X])continue;J.push(X+": "+A.errors[X].message)}return J.join(", ")}});var kF=Q((EN0,q51)=>{/*!
 * Module requirements
 */var N40=d1(),P40=E3(),H51=x("util"),K51=lk();class TF extends N40{constructor(F){let A;if(P40(F)==="model")A=F.constructor.modelName+" validation failed";else A="Validation failed";super(A);if(this.errors={},this._message=A,F)F.$errors=this.errors}toString(){return this.name+": "+K51(this)}inspect(){return Object.assign(Error(this.message),this)}addError(F,A){if(A instanceof TF){let{errors:$}=A;for(let B of Object.keys($))this.addError(`${F}.${B}`,$[B]);return}this.errors[F]=A,this.message=this._message+": "+K51(this)}}if(H51.inspect.custom)TF.prototype[H51.inspect.custom]=TF.prototype.inspect;Object.defineProperty(TF.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(TF.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */q51.exports=TF});var pk=Q((LN0,E51)=>{/*!
 * Module dependencies.
 */var Q51=d1();class TD extends Q51{constructor(F,A){let $=F.message;if(!$)$=Q51.messages.general.default;let B=V51($,F,A);super(B);F=Object.assign({},F,{message:B}),this.properties=F,this.kind=F.type,this.path=F.path,this.value=F.value,this.reason=F.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(TD.prototype,"name",{value:"ValidatorError"});Object.defineProperty(TD.prototype,"properties",{enumerable:!1,writable:!0,value:null});TD.prototype.formatMessage=V51;function V51(F,A,$){if(typeof F==="function")return F(A,$);let B=Object.keys(A);for(let J of B){if(J==="message")continue;F=F.replace("{"+J.toUpperCase()+"}",A[J])}return F}/*!
 * exports
 */E51.exports=TD});var ak=Q((wN0,L51)=>{/*!
 * Module dependencies.
 */var R40=d1();class ik extends R40{constructor(F,A,$){let B=$.join(", ");super('No matching document found for id "'+F._doc._id+'" version '+A+' modifiedPaths "'+B+'"');this.version=A,this.modifiedPaths=$}}Object.defineProperty(ik.prototype,"name",{value:"VersionError"});/*!
 * exports
 */L51.exports=ik});var rk=Q((IN0,w51)=>{/*!
 * Module dependencies.
 */var j40=d1();class nk extends j40{constructor(F){super("Can't save() the same doc multiple times in parallel. Document: "+F._doc._id)}}Object.defineProperty(nk.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */w51.exports=nk});var sk=Q((CN0,I51)=>{/*!
 * Module dependencies.
 */var M40=d1();class tk extends M40{constructor(F){super("Cannot overwrite `"+F+"` model once compiled.")}}Object.defineProperty(tk.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */I51.exports=tk});var N51=Q((NN0,C51)=>{/*!
 * Module dependencies.
 */var T40=d1();class ok extends T40{constructor(F){let A=`Schema hasn't been registered for model "`+F+`".
Use mongoose.model(name, schema)`;super(A)}}Object.defineProperty(ok.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */C51.exports=ok});var FO=Q((PN0,P51)=>{/*!
 * Module dependencies.
 */var k40=d1();class ek extends k40{constructor(F,A,$){let B=$?.matchedCount??0,J=$?.insertedCount??0,X=A.map((D)=>D._id).join(", ");if(X.length>100)X=X.slice(0,100)+"...";let Y=A.length-B-J;super(`${F}.bulkSave() was not able to update ${Y} of the given documents due to incorrect version or optimistic concurrency, document ids: ${X}`);this.modelName=F,this.documents=A,this.bulkWriteResult=$,this.numDocumentsNotUpdated=Y}}Object.defineProperty(ek.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});/*!
 * exports
 */P51.exports=ek});var j51=Q((RN0,R51)=>{var O40=E3();R51.exports=function(A){if(O40(A)!=="TopologyDescription")return!1;let $=Array.from(A.servers.values());return $.length>0&&$.every((B)=>B.type==="Unknown")}});var T51=Q((jN0,M51)=>{var S40=E3();M51.exports=function(A){if(S40(A)!=="TopologyDescription")return!1;if(A.servers.size===0)return!1;for(let $ of A.servers.values())if($.host.endsWith(".mongodb.net")===!1||$.port!==27017)return!1;return!0}});var O51=Q((MN0,k51)=>{var u40=E3(),f40="Client network socket disconnected before secure TLS connection was established";k51.exports=function(A){if(u40(A)!=="TopologyDescription")return!1;let $=Array.from(A.servers.values());return $.length>0&&$.every((B)=>B.error&&B.error.message.indexOf(f40)!==-1)}});var $O=Q((TN0,S51)=>{/*!
 * Module dependencies.
 */var x40=d1(),b40=j51(),g40=T51(),_40=O51();/*!
 * ignore
 */var y40="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",v40="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class AO extends x40{assimilateError(F){let A=F.reason;if(g40(A)&&b40(A)&&F.message.indexOf("bad auth")===-1&&F.message.indexOf("Authentication failed")===-1)this.message=y40;else if(_40(A))this.message=v40;else this.message=F.message;for(let B in F)if(B!=="name")this[B]=F[B];return this.cause=A,this}}Object.defineProperty(AO.prototype,"name",{value:"MongooseServerSelectionError"});S51.exports=AO});var JO=Q((kN0,u51)=>{/*!
 * Module dependencies.
 */var h40=d1();class BO extends h40{constructor(F){let A="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+F.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(A)}}Object.defineProperty(BO.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */u51.exports=BO});var B5=Q((ON0,f51)=>{/*!
 * Module dependencies.
 */var m40=d1();class XO extends m40{constructor(F,A,$){A=A||"Field `"+F+"` is not in schema and strict mode is set to throw.";super(A);this.isImmutableError=!!$,this.path=F}}Object.defineProperty(XO.prototype,"name",{value:"StrictModeError"});f51.exports=XO});var DO=Q((SN0,x51)=>{/*!
 * Module dependencies.
 */var d40=d1();class YO extends d40{constructor(F,A){A=A||"Cannot populate path `"+F+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(A);this.path=F}}Object.defineProperty(YO.prototype,"name",{value:"StrictPopulateError"});x51.exports=YO});var _3=Q((b51,g51)=>{var T4=d1();/*!
 * Module exports.
 */g51.exports=b51=T4;T4.messages=Y51();T4.Messages=T4.messages;T4.CastError=a4();T4.DocumentNotFoundError=VH();T4.ValidationError=kF();T4.ValidatorError=pk();T4.VersionError=ak();T4.ParallelSaveError=rk();T4.OverwriteModelError=sk();T4.MissingSchemaError=N51();T4.MongooseBulkSaveIncompleteError=FO();T4.MongooseServerSelectionError=$O();T4.DivergentArrayError=JO();T4.StrictModeError=B5();T4.StrictPopulateError=DO()});var Q9=Q((uN0,_51)=>{_51.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var v3=Q((fN0,y51)=>{var c40=Z6();class n4{constructor(F){if(F==null)return this;Object.assign(this,c40(F))}}var y3=Q9();Object.defineProperty(n4.prototype,"type",y3);Object.defineProperty(n4.prototype,"validate",y3);Object.defineProperty(n4.prototype,"cast",y3);Object.defineProperty(n4.prototype,"required",y3);Object.defineProperty(n4.prototype,"default",y3);Object.defineProperty(n4.prototype,"ref",y3);Object.defineProperty(n4.prototype,"refPath",y3);Object.defineProperty(n4.prototype,"select",y3);Object.defineProperty(n4.prototype,"index",y3);Object.defineProperty(n4.prototype,"unique",y3);Object.defineProperty(n4.prototype,"immutable",y3);Object.defineProperty(n4.prototype,"sparse",y3);Object.defineProperty(n4.prototype,"text",y3);Object.defineProperty(n4.prototype,"transform",y3);y51.exports=n4});var EH=Q((xN0,DB)=>{var l40=a4();DB.exports=function(A,$){if(DB.exports.convertToTrue.has(A))return!0;if(DB.exports.convertToFalse.has(A))return!1;if(A==null)return A;throw new l40("boolean",A,$)};DB.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);DB.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var LH=Q((bN0,v51)=>{var p40=EH();/*!
 * ignore
 */v51.exports=function(F){let A=this!=null?this.path:null;return p40(F,A)}});var GO=Q((gN0,h51)=>{/*!
 * ignore
 */h51.exports=function(F){if(Array.isArray(F)){if(!F.every((A)=>typeof A==="number"||typeof A==="string"))throw Error("$type array values must be strings or numbers");return F}if(typeof F!=="number"&&typeof F!=="string")throw Error("$type parameter must be number, string, or array of numbers and strings");return F}});var d51=Q((_N0,m51)=>{var i40=B5();/*!
 * ignore
 */m51.exports=function(F){if(F.$immutable)F.$immutableSetter=a40(F.path,F.options.immutable),F.set(F.$immutableSetter);else if(F.$immutableSetter)F.setters=F.setters.filter((A)=>A!==F.$immutableSetter),delete F.$immutableSetter};function a40(F,A){return function(B,J,X,Y){if(this==null||this.$__==null)return B;if(this.isNew)return B;if(Y&&Y.overwriteImmutable)return B;if(!(typeof A==="function"?A.call(this,this):A))return B;let G=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(F):this.$__getValue(F);if(this.$__.strictMode==="throw"&&B!==G)throw new i40(F,"Path `"+F+"` is immutable and strict mode is set to throw.",!0);return G}}});var l51=Q((yN0,c51)=>{c51.exports=function(A){return typeof A==="function"&&A.constructor&&A.constructor.name==="AsyncFunction"}});var i51=Q((vN0,p51)=>{p51.exports=function(A){let $=Object.keys(A),B=!0;for(let J=0,X=$.length;J<X;++J)if(typeof A[$[J]]==="object"&&A[$[J]]!==null){B=!1;break}return B}});var ZO=Q((hN0,a51)=>{var GB=1000,ZB=GB*60,UB=ZB*60,OF=UB*24,n40=OF*7,r40=OF*365.25;a51.exports=function(F,A){A=A||{};var $=typeof F;if($==="string"&&F.length>0)return t40(F);else if($==="number"&&isFinite(F))return A.long?o40(F):s40(F);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))};function t40(F){if(F=String(F),F.length>100)return;var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(!A)return;var $=parseFloat(A[1]),B=(A[2]||"ms").toLowerCase();switch(B){case"years":case"year":case"yrs":case"yr":case"y":return $*r40;case"weeks":case"week":case"w":return $*n40;case"days":case"day":case"d":return $*OF;case"hours":case"hour":case"hrs":case"hr":case"h":return $*UB;case"minutes":case"minute":case"mins":case"min":case"m":return $*ZB;case"seconds":case"second":case"secs":case"sec":case"s":return $*GB;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}function s40(F){var A=Math.abs(F);if(A>=OF)return Math.round(F/OF)+"d";if(A>=UB)return Math.round(F/UB)+"h";if(A>=ZB)return Math.round(F/ZB)+"m";if(A>=GB)return Math.round(F/GB)+"s";return F+"ms"}function o40(F){var A=Math.abs(F);if(A>=OF)return wH(F,A,OF,"day");if(A>=UB)return wH(F,A,UB,"hour");if(A>=ZB)return wH(F,A,ZB,"minute");if(A>=GB)return wH(F,A,GB,"second");return F+" ms"}function wH(F,A,$,B){var J=A>=$*1.5;return Math.round(F/$)+" "+B+(J?"s":"")}});var r51=Q((mN0,n51)=>{n51.exports=function(A){let $=[],B="",J="DEFAULT";for(let X=0;X<A.length;++X){if(J==="IN_SQUARE_BRACKETS"&&!/\d/.test(A[X])&&A[X]!=="]")J="DEFAULT",B=$[$.length-1]+"["+B,$.splice($.length-1,1);if(A[X]==="["){if(J!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")$.push(B),B="";J="IN_SQUARE_BRACKETS"}else if(A[X]==="]")if(J==="IN_SQUARE_BRACKETS")J="IMMEDIATELY_AFTER_SQUARE_BRACKETS",$.push(B),B="";else J="DEFAULT",B+=A[X];else if(A[X]==="."){if(J!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")$.push(B),B="";J="DEFAULT"}else B+=A[X]}if(J!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")$.push(B);return $}});var FF1=Q((e40)=>{var kD=r51(),s51=["__proto__","constructor","prototype"];e40.get=function(F,A,$,B){var J;if(typeof $=="function")if($.length<2)B=$,$=void 0;else J=$,$=void 0;B||(B=e51);var X=typeof F=="string"?kD(F):F;if(!Array.isArray(X))throw TypeError("Invalid `path`. Must be either string or array");var Y=A,D;for(var G=0;G<X.length;++G){if(D=X[G],typeof X[G]!=="string"&&typeof X[G]!=="number")throw TypeError("Each segment of path to `get()` must be a string or number, got "+typeof X[G]);if(Array.isArray(Y)&&!/^\d+$/.test(D)){var Z=X.slice(G);return[].concat(Y).map(function(z){return z?e40.get(Z,z,$||J,B):B(void 0)})}if(J)Y=J(Y,D);else{var U=$&&Y[$]?Y[$]:Y;Y=U instanceof Map?U.get(D):U[D]}if(!Y)return B(Y)}return B(Y)};e40.has=function(F,A){var $=typeof F==="string"?kD(F):F;if(!Array.isArray($))throw TypeError("Invalid `path`. Must be either string or array");var B=$.length,J=A;for(var X=0;X<B;++X){if(typeof $[X]!=="string"&&typeof $[X]!=="number")throw TypeError("Each segment of path to `has()` must be a string or number, got "+typeof $[X]);if(J==null||typeof J!=="object"||!($[X]in J))return!1;J=J[$[X]]}return!0};e40.unset=function(F,A){var $=typeof F==="string"?kD(F):F;if(!Array.isArray($))throw TypeError("Invalid `path`. Must be either string or array");var B=$.length,J=A;for(var X=0;X<B;++X){if(J==null||typeof J!=="object"||!($[X]in J))return!1;if(typeof $[X]!=="string"&&typeof $[X]!=="number")throw TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof $[X]);if(s51.indexOf($[X])!==-1)return!1;if(X===B-1)return delete J[$[X]],!0;J=J instanceof Map?J.get($[X]):J[$[X]]}return!0};e40.set=function(F,A,$,B,J,X){var Y;if(typeof B=="function")if(B.length<2)J=B,B=void 0;else Y=B,B=void 0;J||(J=e51);var D=typeof F=="string"?kD(F):F;if(!Array.isArray(D))throw TypeError("Invalid `path`. Must be either string or array");if($==null)return;for(var G=0;G<D.length;++G){if(typeof D[G]!=="string"&&typeof D[G]!=="number")throw TypeError("Each segment of path to `set()` must be a string or number, got "+typeof D[G]);if(s51.indexOf(D[G])!==-1)return}var Z=X||/\$/.test(F)&&X!==!1,U=$,z;for(var G=0,W=D.length-1;G<W;++G){if(z=D[G],z=="$")if(G==W-1)break;else continue;if(Array.isArray(U)&&!/^\d+$/.test(z)){var H=D.slice(G);if(!Z&&Array.isArray(A))for(var K=0;K<U.length&&K<A.length;++K)e40.set(H,A[K],U[K],B||Y,J,Z);else for(var K=0;K<U.length;++K)e40.set(H,A,U[K],B||Y,J,Z);return}if(Y)U=Y(U,z);else{var q=B&&U[B]?U[B]:U;U=q instanceof Map?q.get(z):q[z]}if(!U)return}if(z=D[W],B&&U[B])U=U[B];if(Array.isArray(U)&&!/^\d+$/.test(z))if(!Z&&Array.isArray(A))o51(U,A,z,Y,B,J);else for(var K=0;K<U.length;++K){var V=U[K];if(V)if(Y)Y(V,z,J(A));else{if(V[B])V=V[B];V[z]=J(A)}}else if(Y)Y(U,z,J(A));else if(U instanceof Map)U.set(z,J(A));else U[z]=J(A)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */e40.stringToParts=kD;/*!
 * Recursively set nested arrays
 */function o51(F,A,$,B,J,X){for(var Y,D=0;D<F.length&&D<A.length;++D)if(Y=F[D],Array.isArray(Y)&&Array.isArray(A[D]))o51(Y,A[D],$,B,J,X);else if(Y)if(B)B(Y,$,X(A[D]));else{if(Y[J])Y=Y[J];Y[$]=X(A[D])}}/*!
 * Returns the value passed to it.
 */function e51(F){return F}});var V9=Q((AF1,$F1)=>{$F1.exports=AF1=FF1()});var zO=Q((cN0,JF1)=>{var B30=Z6();class BF1{constructor(F){if(this._docs={},this._childDocs=[],F==null)return;if(F=B30(F),Object.assign(this,F),typeof F.subPopulate==="object")this.populate=F.subPopulate;if(F.perDocumentLimit!=null&&F.limit!=null)throw Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+F.path+"`.")}}JF1.exports=BF1});var XF1=Q((J30)=>{J30.isMongooseDocumentArray=function(F){return Array.isArray(F)&&F.isMongooseDocumentArray}});var IH=Q((pN0,YF1)=>{var Y30=x9(),zB=Symbol("mongoose#emitted");YF1.exports=function(A,$,B,J){if(typeof A==="function")try{return $(function(X){if(X!=null){if(B!=null&&B.listeners!=null&&B.listeners("error").length>0&&!X[zB])X[zB]=!0,B.emit("error",X);try{A(X)}catch(Y){return Y30(()=>{throw Y})}return}A.apply(this,arguments)})}catch(X){if(B!=null&&B.listeners!=null&&B.listeners("error").length>0&&!X[zB])X[zB]=!0,B.emit("error",X);return A(X)}return J=J||global.Promise,new J((X,Y)=>{$(function(D,G){if(D!=null){if(B!=null&&B.listeners!=null&&B.listeners("error").length>0&&!D[zB])D[zB]=!0,B.emit("error",D);return Y(D)}if(arguments.length>2)return X(Array.prototype.slice.call(arguments,1));X(G)})})}});var CH=Q((iN0,DF1)=>{DF1.exports=function(A,$,B){let J=Object.keys($.tree),X={};for(let Y of J){if(B&&(A.paths[Y]||A.nested[Y]||A.singleNestedPaths[Y]))continue;X[Y]=$.tree[Y]}A.options._isMerging=!0,A.add(X,null),delete A.options._isMerging,A.callQueue=A.callQueue.concat($.callQueue),A.method($.methods),A.static($.statics);for(let[Y,D]of Object.entries($._userProvidedOptions))if(!(Y in A._userProvidedOptions))A.set(Y,D);for(let Y in $.query)A.query[Y]=$.query[Y];for(let Y in $.virtuals)A.virtuals[Y]=$.virtuals[Y].clone();A._indexes=A._indexes.concat($._indexes||[]),A.s.hooks.merge($.s.hooks,!1)}});var UF1=Q((GF1,ZF1)=>{/*!
 * Module dependencies.
 */var aN0=P1(),h9=ZF1.exports=GF1=function(){};h9.ctor=function(){let F=[...arguments],A=function(){h9.apply(this,arguments),this.paths={},this.states={}};return A.prototype=new h9,A.prototype.constructor=A,A.prototype.stateNames=F,F.forEach(function($){A.prototype[$]=function(B){this._changeState(B,$)}}),A};h9.prototype._changeState=function(A,$){let B=this.paths[A];if(B===$)return;let J=this.states[B];if(J)delete J[A];this.paths[A]=$,this.states[$]=this.states[$]||{},this.states[$][A]=!0};/*!
 * ignore
 */h9.prototype.clear=function(A){if(this.states[A]==null)return;let $=Object.keys(this.states[A]),B=$.length,J;while(B--)J=$[B],delete this.states[A][J],delete this.paths[J]};/*!
 * ignore
 */h9.prototype.clearPath=function(A){let $=this.paths[A];if(!$)return;delete this.paths[A],delete this.states[$][A]};h9.prototype.getStatePaths=function(A){if(this.states[A]!=null)return this.states[A];return{}};h9.prototype.some=function(){let A=this,$=arguments.length?arguments:this.stateNames;return Array.prototype.some.call($,function(B){if(A.states[B]==null)return!1;return Object.keys(A.states[B]).length})};h9.prototype._iter=function(A){return function(){let $=[...arguments],B=$.pop();if(!$.length)$=this.stateNames;let J=this;return $.reduce(function(Y,D){if(J.states[D]==null)return Y;return Y.concat(Object.keys(J.states[D]))},[])[A](function(Y,D,G){return B(Y,D,G)})}};h9.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};h9.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};h9.prototype.clone=function(){let A=new this.constructor;A.paths={...this.paths};for(let $ of this.stateNames){if(!($ in this.states))continue;A.states[$]=this.states[$]==null?this.states[$]:{...this.states[$]}}return A}});var HF1=Q((zF1,WF1)=>{/*!
 * Dependencies
 */var D30=UF1(),G30=D30.ctor("require","modify","init","default","ignore");WF1.exports=zF1=q6;function q6(){this.activePaths=new G30}q6.prototype.strictMode=!0;q6.prototype.fullPath=void 0;q6.prototype.selected=void 0;q6.prototype.shardval=void 0;q6.prototype.saveError=void 0;q6.prototype.validationError=void 0;q6.prototype.adhocPaths=void 0;q6.prototype.removing=void 0;q6.prototype.inserting=void 0;q6.prototype.saving=void 0;q6.prototype.version=void 0;q6.prototype._id=void 0;q6.prototype.ownerDocument=void 0;q6.prototype.populate=void 0;q6.prototype.populated=void 0;q6.prototype.primitiveAtomics=void 0;q6.prototype.wasPopulated=!1;q6.prototype.scope=void 0;q6.prototype.session=null;q6.prototype.pathsToScopes=null;q6.prototype.cachedRequired=null});var WB=Q((nN0,QF1)=>{/*!
 * Module dependencies.
 */var WO=x4().Binary,Z30=x4().UUID,KF1=P1();function L3(F,A,$){let B=F;if(F==null)B=0;let J,X,Y;if(Array.isArray(A))X=A[0],Y=A[1];else J=A;let D;if(typeof B==="number"||B instanceof Number)D=Buffer.alloc(B);else D=Buffer.from(B,J,$);return KF1.decorate(D,L3.mixin),D.isMongooseBuffer=!0,D[L3.pathSymbol]=X,D[qF1]=Y,D._subtype=0,D}var U30=Symbol.for("mongoose#Buffer#_path"),qF1=Symbol.for("mongoose#Buffer#_parent");L3.pathSymbol=U30;/*!
 * Inherit from Buffer.
 */L3.mixin={_subtype:void 0,_markModified:function(){let F=this[qF1];if(F)F.markModified(this[L3.pathSymbol]);return this},write:function(){let F=Buffer.prototype.write.apply(this,arguments);if(F>0)this._markModified();return F},copy:function(F){let A=Buffer.prototype.copy.apply(this,arguments);if(F&&F.isMongooseBuffer)F._markModified();return A}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */KF1.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(F){if(!Buffer.prototype[F])return;L3.mixin[F]=function(){let A=Buffer.prototype[F].apply(this,arguments);return this._markModified(),A}});L3.mixin.toObject=function(F){let A=typeof F==="number"?F:this._subtype||0;return new WO(Buffer.from(this),A)};L3.mixin.$toObject=L3.mixin.toObject;L3.mixin.toBSON=function(){return new WO(this,this._subtype||0)};L3.mixin.toUUID=function(){if(this._subtype!==4)throw Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new Z30(this)};L3.mixin.equals=function(F){if(!Buffer.isBuffer(F))return!1;if(this.length!==F.length)return!1;for(let A=0;A<this.length;++A)if(this[A]!==F[A])return!1;return!0};L3.mixin.subtype=function(F){if(typeof F!=="number")throw TypeError("Invalid subtype. Expected a number");if(this._subtype!==F)this._markModified();this._subtype=F};/*!
 * Module exports.
 */L3.Binary=WO;QF1.exports=L3});var SF=Q((z30)=>{z30.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");z30.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var HB=Q((tN0,VF1)=>{/*!
 * Module dependencies.
 */var NH=Q6(),K30=SF(),q30=$5(),Q30=P1();function m9(F,A,$,B){if(A&&A.default){let J=A.default;if(Array.isArray(J)&&J.length===0)A.default=Array;else if(!A.shared&&q30(J)&&Object.keys(J).length===0)A.default=function(){return{}}}NH.call(this,F,A,"Mixed",B),this[K30.schemaMixedSymbol]=!0}m9.schemaName="Mixed";m9.defaultOptions={};/*!
 * Inherits from SchemaType.
 */m9.prototype=Object.create(NH.prototype);m9.prototype.constructor=m9;m9.get=NH.get;m9.set=NH.set;m9.setters=[];m9.prototype.cast=function(F){if(F instanceof Error)return Q30.errorToPOJO(F);return F};m9.prototype.castForQuery=function(F,A){return A};m9.prototype.toJSONSchema=function(A){return{}};/*!
 * Module exports.
 */VF1.exports=m9});var LF1=Q((sN0,EF1)=>{EF1.exports=class{constructor(A,$,B){this.subdocSnapshot=A,this.activePaths=$,this.version=B}}});var PH=Q((oN0,wF1)=>{/*!
 * Module dependencies.
 */var V30=d1();class HO extends V30{constructor(F,A){let $=Array.isArray(A)?"array":"primitive value";super("Tried to set nested object field `"+F+`\` to ${$} \``+A+"`");this.path=F}}Object.defineProperty(HO.prototype,"name",{value:"ObjectExpectedError"});wF1.exports=HO});var RH=Q((eN0,IF1)=>{/*!
 * Module dependencies.
 */var E30=d1();class KO extends E30{constructor(F,A,$){super('Parameter "'+A+'" to '+$+'() must be an object, got "'+F.toString()+'" (type '+typeof F+")")}}Object.defineProperty(KO.prototype,"name",{value:"ObjectParameterError"});IF1.exports=KO});var NF1=Q((FP0,CF1)=>{/*!
 * Module dependencies.
 */var L30=d1();class qO extends L30{constructor(F){super("Can't validate() the same doc multiple times in parallel. Document: "+F._doc._id)}}Object.defineProperty(qO.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */CF1.exports=qO});var QO=Q((AP0,PF1)=>{PF1.exports=function(A){let $={},B=Object.keys(A);for(let J of B){if(J.indexOf(".")===-1){$[J]=1;continue}let X=J.split("."),Y=X[0];for(let D=0;D<X.length;++D)if($[Y]=1,D+1<X.length)Y=Y+"."+X[D+1]}return $}});var jF1=Q(($P0,RF1)=>{RF1.exports=function(A){if(A==null||typeof A!=="object")return!1;return A.$slice==null&&A.$elemMatch==null&&A.$meta==null&&A.$==null}});var jH=Q((BP0,MF1)=>{var w30=jF1();MF1.exports=function(A,$,B,J,X,Y,D){let G=Object.keys(A.$__schema.paths),Z=G.length,U=D&&D.skipParentChangeTracking;for(let z=0;z<Z;++z){let W,H="",K=G[z];if(K==="_id"&&A.$__.skipId)continue;let q=A.$__schema.paths[K],V=q.splitPath(),E=V.length;if(V[E-1]==="$*")continue;let L=!1,w=A._doc;for(let I=0;I<E;++I){if(w==null)break;let P=V[I];if(H+=(!H.length?"":".")+P,B===!0){if(H in $)break}else if(B===!1&&$&&!L){let M=q.$isSingleNested||q.$isMongooseDocumentArray;if(H in $&&!w30($[H])||I===E-1&&M&&J!=null&&J[H])L=!0;else if(J!=null&&!J[H])break}if(I===E-1){if(w[P]!==void 0)break;if(X!=null){if(typeof q.defaultValue==="function"){if(!q.defaultValue.$runBeforeSetters&&X)break;if(q.defaultValue.$runBeforeSetters&&!X)break}else if(!X)continue}if(Y&&Y[H])break;if($&&B!==null){if(B===!0){if(K in $)continue;try{W=q.getDefault(A,!1)}catch(M){A.invalidate(K,M);break}if(typeof W<"u")w[P]=W,VO(A,K,U)}else if(L){try{W=q.getDefault(A,!1)}catch(M){A.invalidate(K,M);break}if(typeof W<"u")w[P]=W,VO(A,K,U)}}else{try{W=q.getDefault(A,!1)}catch(M){A.invalidate(K,M);break}if(typeof W<"u")w[P]=W,VO(A,K,U)}}else w=w[P]}}};/*!
 * ignore
 */function VO(F,A,$){if(F.$__.activePaths.default(A),!$&&F.$isSubdocument&&F.$isSingleNested&&F.$parent()!=null)F.$parent().$__.activePaths.default(F.$__pathRelativeToParent(A))}});var MH=Q((JP0,kF1)=>{/*!
 * ignore
 */kF1.exports=function(A,$,B){B=B||{};let J=B.skipDocArrays,X=0;if(!A)return X;for(let Y of Object.keys(A.$__.activePaths.getStatePaths("modify"))){if(J){let D=A.$__schema.path(Y);if(D&&D.$isMongooseDocumentArray)continue}if(Y.startsWith($+".")){if(A.$__.activePaths.clearPath(Y),++X,A.$isSubdocument)TF1(A,Y)}}return X};function TF1(F,A,$=new Set){if($.has(F))throw Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");let B=F.$parent(),J=F.$__pathRelativeToParent(void 0,!1)+"."+A;if(B.$__.activePaths.clearPath(J),B.$isSubdocument)TF1(B,J,$)}});var kH=Q((k30)=>{var I30=Z6(),C30=q1().documentSchemaSymbol,N30=R2().internalToObjectOptions,P30=P1(),KB,R30=q1().getSymbol,TH=q1().scopeSymbol,OF1=P30.isPOJO;/*!
 * exports
 */k30.compile=SF1;k30.defineKey=uF1;var j30=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),M30=Object.freeze({noDottedPath:!0});function SF1(F,A,$,B){KB=KB||d9();let J=B.typeKey;for(let X of Object.keys(F)){let Y=F[X],G=OF1(Y)&&Object.keys(Y).length>0&&(!Y[J]||J==="type"&&OF1(Y.type)&&Y.type.type)?Y:null;uF1({prop:X,subprops:G,prototype:A,prefix:$,options:B})}}function uF1({prop:F,subprops:A,prototype:$,prefix:B,options:J}){KB=KB||d9();let X=(B?B+".":"")+F;B=B||"";let Y=B?Object.freeze({}):M30;if(A)Object.defineProperty($,F,{enumerable:!0,configurable:!0,get:function(){let D=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[X]){let G=Object.create(KB.prototype,T30(this));if(!B)G.$__[TH]=this;G.$__.nestedPath=X,Object.defineProperty(G,"schema",{enumerable:!1,configurable:!0,writable:!1,value:$.schema}),Object.defineProperty(G,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:$.schema}),Object.defineProperty(G,C30,{enumerable:!1,configurable:!0,writable:!1,value:$.schema}),Object.defineProperty(G,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return I30(D.get(X,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(G,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return D.get(X,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(G,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return D.get(X,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(G,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(G,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(X,null,j30)||{}).length===0}}),Object.defineProperty(G,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),SF1(A,G,X,J),this.$__.getters[X]=G}return this.$__.getters[X]},set:function(D){if(D!=null&&D.$__isNested)D=D.$__get();else if(D instanceof KB&&!D.$__isNested)D=D.$toObject(N30);(this.$__[TH]||this).$set(X,D)}});else Object.defineProperty($,F,{enumerable:!0,configurable:!0,get:function(){return this[R30].call(this.$__[TH]||this,X,null,Y)},set:function(D){this.$set.call(this.$__[TH]||this,X,D)}})}function T30(F){let A={};return Object.getOwnPropertyNames(F).forEach(function($){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf($)===-1)return;A[$]=Object.getOwnPropertyDescriptor(F,$),A[$].enumerable=!1}),A}});var xF1=Q((YP0,fF1)=>{fF1.exports=function(A){if(A==null)return null;return Object.keys(A)[0]}});var OH=Q((b30)=>{/*!
 * Module dependencies.
 */var u30=x4().Binary,bF1=M4(),gF1=ND(),f30=_3(),x30=x("util");b30.flatten=_F1;b30.modifiedPaths=yF1;/*!
 * ignore
 */function _F1(F,A,$,B){let J;if(F&&gF1(F)&&!Buffer.isBuffer(F))J=Object.keys(F.toObject({transform:!1,virtuals:!1})||{});else J=Object.keys(F||{});let X=J.length,Y={};A=A?A+".":"";for(let D=0;D<X;++D){let G=J[D],Z=F[G];Y[A+G]=Z;let U=B&&B.path&&B.path(A+G),z=B&&B.nested&&B.nested[A+G];if(U&&U.instance==="Mixed")continue;if(vF1(Z)){if($&&$.skipArrays&&Array.isArray(Z))continue;let W=_F1(Z,A+G,$,B);for(let H in W)Y[H]=W[H];if(Array.isArray(Z))Y[A+G]=Z}if(z){let W=Object.keys(B.paths);for(let H of W)if(H.startsWith(A+G+".")&&!Y.hasOwnProperty(H))Y[H]=void 0}}return Y}/*!
 * ignore
 */function yF1(F,A,$,B=null){if(F==null||typeof F!=="object")return;if(B==null)B={raw:{update:F,path:A},trace:new WeakSet};if(B.trace.has(F))throw new f30(`a circular reference in the update value, updateValue:
${x30.inspect(B.raw.update,{showHidden:!1,depth:1})}
updatePath: '${B.raw.path}'`);B.trace.add(F);let J=Object.keys(F||{}),X=J.length;$=$||{},A=A?A+".":"";for(let Y=0;Y<X;++Y){let D=J[Y],G=F[D],Z=A+D;if($[Z]=!0,!Buffer.isBuffer(G)&&gF1(G))G=G.toObject({transform:!1,virtuals:!1});if(vF1(G))yF1(G,A+D,$,B)}return B.trace.delete(F),$}/*!
 * ignore
 */function vF1(F){return F&&typeof F==="object"&&!(F instanceof Date)&&!bF1(F,"ObjectId")&&(!Array.isArray(F)||F.length!==0)&&!(F instanceof Buffer)&&!bF1(F,"Decimal128")&&!(F instanceof u30)}});var V6=Q((GP0,hF1)=>{hF1.exports=function(A,$,B){let J,X=!1;if(typeof $==="string"){if($.indexOf(".")===-1){let G=EO(A,$);if(G==null)return B;return G}J=$.split(".")}else if(X=!0,J=$,J.length===1){let G=EO(A,J[0]);if(G==null)return B;return G}let Y=$,D=A;for(let G of J){if(D==null)return B;if(!X&&D[Y]!=null)return D[Y];if(D=EO(D,G),!X)Y=Y.substr(G.length+1)}return D==null?B:D};function EO(F,A){if(F==null)return F;if(F instanceof Map)return F.get(A);return F[A]}});var LO=Q((ZP0,dF1)=>{var mF1=M4();dF1.exports=function(A,$){if(typeof A==="string"&&typeof $==="string")return A===$;if(typeof A==="number"&&typeof $==="number")return A===$;if(mF1(A,"ObjectId")&&mF1($,"ObjectId"))return A.toString()===$.toString();return!1}});var SH=Q((UP0,cF1)=>{var y30=LO();cF1.exports=function(A,$){if(A==null||A.discriminators==null)return null;for(let B of Object.keys(A.discriminators)){let J=A.discriminators[B];if(J.discriminatorMapping==null)continue;if(y30(J.discriminatorMapping.value,$))return J}return null}});var pF1=Q((zP0,lF1)=>{var v30=V6(),h30=SH();lF1.exports=function F(A,$,B){B=B||{};let J=B.typeOnly,X=Array.isArray($)?$:$.indexOf(".")===-1?[$]:$.split("."),Y=null,D="adhocOrUndefined",G=h30(A.schema,A.get(A.schema.options.discriminatorKey))||A.schema;for(let Z=0;Z<X.length;++Z){let U=X.slice(0,Z+1).join(".");if(Y=G.path(U),Y==null){D="adhocOrUndefined";continue}if(Y.instance==="Mixed")return J?"real":Y;if(D=G.pathType(U),(Y.$isSingleNested||Y.$isMongooseDocumentArrayElement)&&Y.schema.discriminators!=null){let z=Y.schema.discriminators,W=A.get(U+"."+v30(Y,"schema.options.discriminatorKey"));if(W==null||z[W]==null)continue;let H=X.slice(Z+1).join(".");return F(A.get(U),H,B)}}return J?D:Y}});var aF1=Q((WP0,iF1)=>{var m30=V6();iF1.exports=function(A,$,B){let J=B!=null?Object.keys(m30(A.tree,B,{})):Object.keys(A.tree),X=new Set(Object.keys($)),Y;if(X.size>1){Y=new Set;for(let D of J)if(X.has(D))Y.add(D);for(let D of X)if(!Y.has(D))Y.add(D);Y=Array.from(Y)}else Y=Array.from(X);return Y}});var rF1=Q((HP0,nF1)=>{nF1.exports=function(A,$){if($.length===1)return;let B=$[0],J=void 0;for(let X=0;X<$.length-1;++X){let Y=A.path(B);if(Y&&Y.schema)J=Y.schema.options.strict,A=Y.schema,B=Y.$isMongooseDocumentArray&&!isNaN($[X+1])?"":$[X+1];else B+=B.length?"."+$[X+1]:$[X+1]}return J}});var uH=Q((KP0,tF1)=>{var d30=P1(),c30=new Set(["__index","__parentArray","_doc"]);tF1.exports=function(A,$){if(d30.isPOJO(A)&&A.$__!=null&&A._doc!=null){if($){let B={};for(let J of Object.keys(A)){if(typeof J==="symbol")continue;if(J[0]==="$")continue;if(c30.has(J))continue;B[J]=A[J]}return{...A._doc,...B}}return A._doc}return A}});var qB=Q((qP0,sF1)=>{/*!
 * ignore
 */sF1.exports=function(A){if(A==null)return!0;if(typeof A==="object")return!("$meta"in A)&&!("$slice"in A);return!0}});var QB=Q((QP0,oF1)=>{var l30=qB(),p30=JB();/*!
 * ignore
 */oF1.exports=function F(A){if(A==null)return null;let $=Object.keys(A),B=null;if($.length===1&&$[0]==="_id")B=!A._id;else for(let J=0;J<$.length;++J){let X=$[J];if(X!=="_id"&&l30(A[X])){if(B=p30(A[X])?F(A[X])??B:!A[X],B!=null)break}}return B}});var wO=Q((VP0,eF1)=>{var i30=qB();eF1.exports=function(A,$){if(A==null)return!1;if($==="_id")return A._id===0;let B=Object.keys(A),J=null;for(let X of B)if(i30(A[X])){J=A[$]===1?"inclusive":"exclusive";break}if(J==="inclusive")return A[$]!==1;if(J==="exclusive")return A[$]===0;return!1}});var IO=Q((EP0,FA1)=>{var a30=P1();FA1.exports=function(A,$){if(A._doc._id==null||$==null||$.length===0)return;let B=String(A._doc._id);for(let J of $){if(J.isVirtual)continue;let Y=J.path.split(".");for(let D=0;D<Y.length-1;++D){let G=Y.slice(0,D+1).join("."),Z=Y.slice(D+1).join("."),U=A.get(G);if(U==null)continue;if(a30.isMongooseDocumentArray(U)){for(let z=0;z<U.length;++z)if(U[z])U[z].populated(Z,J._docs[B]==null?void 0:J._docs[B][z],J);break}}}}});var CO=Q((LP0,$A1)=>{var{isPOJO:n30}=P1();$A1.exports=AA1;function AA1(F){let A=Object.keys(F),$=A.length,B,J,X;while($--){if(J=A[$],X=F[J],n30(X))F[J]=AA1(X);if(F[J]===void 0){delete F[J];continue}B=!0}return B?F:void 0}});var NO=Q((wP0,BA1)=>{var r30=/\./g;BA1.exports=function(A){if(A.indexOf(".")===-1)return[A];let $=A.split(r30),B=$.length,J=Array(B),X="";for(let Y=0;Y<B;++Y)X+=X.length!==0?"."+$[Y]:$[Y],J[Y]=X;return J}});var XA1=Q((IP0,JA1)=>{JA1.exports=function(A,$,B,J,X){let Y=Object.keys(A).reduce((G,Z)=>G||Z.startsWith($+"."),!1),D=$+"."+B.options.discriminatorKey;if(!Y&&X.length===1&&X[0]===D)J.splice(J.indexOf(D),1)}});var c9=Q((CP0,YA1)=>{var t30=LO();YA1.exports=function(A,$){if(A==null)return null;for(let B of Object.keys(A)){let J=A[B];if(J.schema&&J.schema.discriminatorMapping&&t30(J.schema.discriminatorMapping.value,$))return J}return null}});var fH=Q((NP0,DA1)=>{/*!
 * ignore
 */DA1.exports=function(A,$){let B=$.split("."),J="",X,Y,D;for(let G=0;G<B.length;++G)if(J+=J.length?".":""+B[G],A[J]){Y=Object.keys(A),D=Y.length;for(X=0;X<D;++X)if(Y[G].indexOf(J+".")===0&&Y[G].indexOf($)!==0)continue;return!0}return!1}});var OD=Q((B90)=>{/*!
 * Module dependencies
 */var GA1=zO(),s30=XA1(),ZA1=V6(),o30=c9(),e30=qB(),F90=Z6(),A90=fH();B90.preparePopulationOptionsMQ=function(A,$){let B=A._mongooseOptions.populate,J=Object.keys(B).reduce((D,G)=>D.concat([B[G]]),[]);if($.lean!=null)J.filter((D)=>(D&&D.options&&D.options.lean)==null).forEach($90($.lean));let X=A&&A.options&&A.options.session||null;if(X!=null)J.forEach((D)=>{if(D.options==null){D.options={session:X};return}if(!("session"in D.options))D.options.session=X});let Y=A._fieldsForExec();for(let D=0;D<J.length;++D)if(J[D]instanceof GA1)J[D]=new GA1({...J[D],_queryProjection:Y,_localModel:A.model});else J[D]._queryProjection=Y,J[D]._localModel=A.model;return J};B90.createModel=function(A,$,B,J,X){A.hooks.execPreSync("createModel",$);let Y=A.schema?A.schema.discriminatorMapping:null,D=Y&&Y.isRoot?Y.key:null,G=$[D];if(D&&G&&A.discriminators){let U=A.discriminators[G]||o30(A.discriminators,G);if(U){let z=F90(J);return B90.applyPaths(z,U.schema),new U(void 0,z,!0)}}let Z={skipId:!0,isNew:!1,willInit:!0};if(X!=null&&"defaults"in X)Z.defaults=X.defaults;return new A(void 0,B,Z)};/*!
 * ignore
 */B90.createModelAndInit=function(A,$,B,J,X,Y,D){let G=Y?{populated:Y}:void 0,Z=B90.createModel(A,$,B,J,X);try{Z.$init($,G,D)}catch(U){D(U,Z)}};/*!
 * ignore
 */B90.applyPaths=function(A,$,B){let J,X,Y=new Set;if(A){X=Object.keys(A);let W=[];for(let H=0;H<X.length;++H){let K=X[H];if(X[H][0]!=="-")continue;if(delete A[K],K==="-_id")A._id=0;else W.push(K.slice(1))}X=Object.keys(A);for(let H=0;H<X.length;++H){if(X[H][0]==="+")continue;let K=A[X[H]];if(!e30(K))continue;if(X[H]==="_id"&&X.length>1)continue;if(X[H]===$.options.discriminatorKey&&X.length>1&&K!=null&&!K)continue;J=!K;break}for(let H of W){let K=$.path(H);if(!K||!K.selected||J!==!1)A[H]=0,J=!0;else if(K&&K.selected&&J===!1)Y.add(H)}}let D=[],G=[],Z=[];switch(U($),J){case!0:for(let W of G)A[W]=0;break;case!1:if($&&$.paths._id&&$.paths._id.options&&$.paths._id.options.select===!1)A._id=0;for(let W of D){if(Y.has(W))continue;if(A90(A,W))continue;A[W]=A[W]||1}break;case void 0:if(A==null)break;for(let W of Object.keys(A||{}))if(W.startsWith("+"))delete A[W];for(let W of G){if(A[W]!=null)continue;A[W]=0}break}function U(W,H){if(H||(H=""),Z.indexOf(W)!==-1)return[];Z.push(W);let K=[];return W.eachPath(function(q,V){if(H)q=H+"."+q;if(V.$isSchemaMap||q.endsWith(".$*")){let L="+"+q,w=A&&L in A;if(V.options&&V.options.select===!1&&!w)G.push(q);return}let E=z(q,V);if(E==null&&!Array.isArray(V)&&V.$isMongooseArray&&!V.$isMongooseDocumentArray)E=z(q,V.caster);if(E!=null)K.push(E);if(V.schema){let L=U(V.schema,q);if(J===!1)s30(A,q,V.schema,D,L)}}),Z.pop(),K}function z(W,H){if(A==null)return;if(typeof H.selected!=="boolean")return;if(H.selected===!1&&A[W]){if(B)A[W]=0;return}if(!J&&H.selected&&W===$.options.discriminatorKey&&A[W]!=null&&!A[W]){delete A[W];return}if(J===!1&&H.selected&&A[W]!=null&&!A[W]){delete A[W];return}let K="+"+W;if(A&&K in A){if(delete A[K],J===!1&&X.length>1&&!~X.indexOf(W)&&!B)A[W]=1;else if(J==null&&B&&H.selected===!1)A[W]=0;return}let V=W.split("."),E="";for(let L=0;L<V.length;++L)if(E+=E.length?"."+V[L]:V[L],G.indexOf(E)!==-1)return;if(!J&&(H&&H.options&&H.options.$skipDiscriminatorCheck||!1)){let L="";for(let w=0;w<V.length;++w){L+=(L.length===0?"":".")+V[w];let I=ZA1(A,L,!1)||ZA1(A,L+".$",!1);if(I&&typeof I!=="object")return}}return(H.selected?D:G).push(W),W}};function $90(F){return function(A){if(A.options||(A.options={}),F!=null&&Array.isArray(F.virtuals))F=Object.assign({},F),F.virtuals=F.virtuals.filter(($)=>typeof $==="string"&&$.startsWith(A.path+".")).map(($)=>$.slice(A.path.length+1));A.options.lean=F}}});var PO=Q((RP0,zA1)=>{function D90(F){return!!F&&(typeof F==="object"||typeof F==="function")&&typeof F.then==="function"}zA1.exports=D90});var HA1=Q((jP0,WA1)=>{WA1.exports=function(A,$,B){let J=$[0],X=B,Y=A;for(let D=0;D<$.length-1;++D){let G=X.path(J);if(G&&G.schema){let Z=Y.get(J);if(X=G.schema,J=$[D+1],Array.isArray(Z)&&!isNaN(J))Z=Z[J],J="";if(Z==null)break;Y=Z}else J+=J.length?"."+$[D+1]:$[D+1]}return Y}});var xH=Q((MP0,qA1)=>{var b7=d9(),G90=x9(),Z90=R2().internalToObjectOptions,KA1=x("util"),U90=P1();qA1.exports=S0;function S0(F,A,$,B,J){if(typeof B==="object"&&B!=null&&J==null)J=B,B=void 0;if($!=null){let Y={isNew:$.isNew};if("defaults"in $.$__)Y.defaults=$.$__.defaults;J=Object.assign(Y,J)}if(J!=null&&J.path!=null)this.$basePath=J.path;if(J!=null&&J.pathRelativeToParent!=null)this.$pathRelativeToParent=J.pathRelativeToParent;let X=J;if(J!=null&&J.path!=null)X=Object.assign({},J),delete X.path;b7.call(this,F,A,B,X),delete this.$__.priorDoc}S0.prototype=Object.create(b7.prototype);Object.defineProperty(S0.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(S0.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */S0.prototype.toBSON=function(){return this.toObject(Z90)};S0.prototype.save=async function(A){if(A=A||{},!A.suppressWarning)U90.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.");return new Promise(($,B)=>{this.$__save((J)=>{if(J!=null)return B(J);$(this)})})};S0.prototype.$__fullPath=function(F){if(!this.$__.fullPath)this.ownerDocument();return F?this.$__.fullPath+"."+F:this.$__.fullPath};S0.prototype.$__pathRelativeToParent=function(F){if(this.$pathRelativeToParent!=null)return F==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+F;if(F==null)return this.$basePath;if(!this.$basePath)return F;return[this.$basePath,F].join(".")};S0.prototype.$__save=function(F){return G90(()=>F(null,this))};/*!
 * ignore
 */S0.prototype.$isValid=function(F){let A=this.$parent(),$=this.$__pathRelativeToParent(F);if(A!=null&&$!=null)return A.$isValid($);return b7.prototype.$isValid.call(this,F)};/*!
 * ignore
 */S0.prototype.markModified=function(F){b7.prototype.markModified.call(this,F);let A=this.$parent();if(A==null)return;let $=this.$__pathRelativeToParent(F);if($==null)return;let B=this.$__pathRelativeToParent().replace(/\.$/,"");if(A.isDirectModified(B)||this.isNew)return;this.$__parent.markModified($,this)};/*!
 * ignore
 */S0.prototype.isModified=function(F,A,$){let B=this.$parent();if(B!=null){if(Array.isArray(F)||typeof F==="string")F=Array.isArray(F)?F:F.split(" "),F=F.map((J)=>this.$__pathRelativeToParent(J)).filter((J)=>J!=null);else if(!F)F=this.$__pathRelativeToParent();return B.$isModified(F,A,$)}return b7.prototype.isModified.call(this,F,A,$)};S0.prototype.$markValid=function(F){b7.prototype.$markValid.call(this,F);let A=this.$parent(),$=this.$__pathRelativeToParent(F);if(A!=null&&$!=null)A.$markValid($)};/*!
 * ignore
 */S0.prototype.invalidate=function(F,A,$){b7.prototype.invalidate.call(this,F,A,$);let B=this.$parent(),J=this.$__pathRelativeToParent(F);if(B!=null&&J!=null)B.invalidate(J,A,$);else if(A.kind==="cast"||A.name==="CastError"||J==null)throw A;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */S0.prototype.$ignore=function(F){b7.prototype.$ignore.call(this,F);let A=this.$parent(),$=this.$__pathRelativeToParent(F);if(A!=null&&$!=null)A.$ignore($)};S0.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let F=this,A=[],$=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!0));let B=F.$parent();if(B==null)break;if(F=B,$.has(F))throw Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");$.add(F)}return this.$__.fullPath=A.join("."),this.$__.ownerDocument=F,this.$__.ownerDocument};/*!
 * ignore
 */S0.prototype.$__fullPathWithIndexes=function(){let F=this,A=[],$=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!1));let B=F.$parent();if(B==null)break;if(F=B,$.has(F))throw Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");$.add(F)}return A.join(".")};S0.prototype.parent=function(){return this.$__parent};S0.prototype.$parent=S0.prototype.parent;S0.prototype.$__deleteOne=function(F){if(F==null)return;return F(null,this)};S0.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};S0.prototype.deleteOne=function(F,A){if(typeof F==="function")A=F,F=null;if(z90(this),!F||!F.noop){this.$__removeFromParent();let $=this.ownerDocument();$.$__.removedSubdocs=$.$__.removedSubdocs||[],$.$__.removedSubdocs.push(this)}return this.$__deleteOne(A)};/*!
 * ignore
 */S0.prototype.populate=function(){throw Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};S0.prototype.inspect=function(){return this.toObject()};if(KA1.inspect.custom)S0.prototype[KA1.inspect.custom]=S0.prototype.inspect;S0.prototype.$toObject=function(A,$){let B=b7.prototype.$toObject.call(this,A,$);if(Object.keys(B).length===0&&A?._calledWithOptions!=null){if((A._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??A.minimize)&&!this.constructor.$__required)return}return B};function z90(F){let A=F.ownerDocument();function $(){A.$removeListener("save",$),A.$removeListener("deleteOne",$),F.emit("deleteOne",F),F.constructor.emit("deleteOne",F)}A.$on("save",$),A.$on("deleteOne",$)}});var VB=Q((TP0,EA1)=>{/*!
 * Module dependencies.
 */var QA1=x("events").EventEmitter,VA1=xH(),W90=P1(),SD=q1().documentArrayParent;function h3(F,A,$,B,J){if(W90.isMongooseDocumentArray(A))this.__parentArray=A,this[SD]=A.$parent();else this.__parentArray=void 0,this[SD]=void 0;this.$setIndex(J),this.$__parent=this[SD];let X;if(typeof $==="object"&&$!=null)X={isNew:!0,...$},$=void 0;else X={isNew:!0};VA1.call(this,F,B,this[SD],$,X)}/*!
 * Inherit from Subdocument
 */h3.prototype=Object.create(VA1.prototype);h3.prototype.constructor=h3;Object.defineProperty(h3.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(h3.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let F in QA1.prototype)h3[F]=QA1.prototype[F];/*!
 * ignore
 */h3.prototype.$setIndex=function(F){if(this.__index=F,this.$__!=null&&this.$__.validationError!=null){let A=Object.keys(this.$__.validationError.errors);for(let $ of A)this.invalidate($,this.$__.validationError.errors[$])}};/*!
 * ignore
 */h3.prototype.populate=function(){throw Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */h3.prototype.$__removeFromParent=function(){let F=this._doc._id;if(!F)throw Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:F})};h3.prototype.$__fullPath=function(F,A){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(A)return F?this.$__.fullPath+"."+F:this.$__.fullPath;return F?this.$__.fullPath+"."+this.__index+"."+F:this.$__.fullPath+"."+this.__index};h3.prototype.$__pathRelativeToParent=function(F,A){if(this.__index==null||(!this.__parentArray||!this.__parentArray.$path))return null;if(A)return F==null?this.__parentArray.$path():this.__parentArray.$path()+"."+F;if(F==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+F};h3.prototype.$parent=function(){return this[SD]};h3.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */EA1.exports=h3});var _H=Q((kP0,jA1)=>{var MO=d9(),RO=VB(),H90=d1(),LA1=MH(),K90=Z6(),wA1=R2().internalToObjectOptions,NA1=V9(),r4=P1(),jO=M4(),g7=q1().arrayAtomicsSymbol,J5=q1().arrayParentSymbol,X5=q1().arrayPathSymbol,w3=q1().arraySchemaSymbol,PA1=q1().populateModelSymbol,q90=Symbol("mongoose#Array#sliced"),IA1=Array.prototype.push;/*!
 * ignore
 */var gH={$__getAtomics(){let F=[],A=Object.keys(this[g7]||{}),$=A.length,B=Object.assign({},wA1,{_isNested:!0});if($===0)return F[0]=["$set",this.toObject(B)],F;while($--){let J=A[$],X=this[g7][J];if(r4.isMongooseObject(X))X=X.toObject(B);else if(Array.isArray(X))X=this.toObject.call(X,B);else if(X!=null&&Array.isArray(X.$each))X.$each=this.toObject.call(X.$each,B);else if(X!=null&&typeof X.valueOf==="function")X=X.valueOf();if(J==="$addToSet")X={$each:X};F.push([J,X])}return F},$atomics(){/*!
   * ignore
   */return this[g7]},$parent(){/*!
   * ignore
   */return this[J5]},$path(){/*!
   * ignore
   */return this[X5]},$schemaType(){/*!
   * ignore
   */return this[w3]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let F=this.__array;if(F._shifted)return;return F._shifted=!0,[].shift.call(F)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[w3]},_cast(F){let A=!1,$,B=this[J5];if(B)A=B.$populated(this[X5],!0);if(A&&F!==null&&F!==void 0){if($=A.options[PA1],$==null)throw new H90("No populated model found for path `"+this[X5]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(F)||jO(F,"ObjectId")||!r4.isObject(F))F={_id:F};if(!(F.schema&&F.schema.discriminatorMapping&&F.schema.discriminatorMapping.key!==void 0))F=new $(F);return this[w3].caster.applySetters(F,B,!0)}return this[w3].caster.applySetters(F,B,!1)},_mapCast(F,A){return this._cast(F,this.length+A)},_markModified(F){let A=this[J5],$;if(A){if($=this[X5],arguments.length)$=$+"."+F;if($!=null&&$.endsWith(".$"))return this;A.markModified($,arguments.length!==0?F:A)}return this},_registerAtomic(F,A){if(this[q90])return;if(F==="$set")return this[g7]={$set:A},LA1(this[J5],this[X5]),this._markModified(),this;let $=this[g7];if(F==="$pop"&&!("$pop"in $)){let J=this;this[J5].once("save",function(){J._popped=J._shifted=null})}if($.$set||Object.keys($).length&&!(F in $))return this[g7]={$set:this},this;let B;if(F==="$pullAll"||F==="$addToSet")$[F]||($[F]=[]),$[F]=$[F].concat(A);else if(F==="$pullDocs"){let J=$.$pull||($.$pull={});if(A[0]instanceof RO)B=J.$or||(J.$or=[]),Array.prototype.push.apply(B,A.map((X)=>{return X.toObject({transform:(Y,D)=>{if(X==null||X.$__==null)return D;return Object.keys(X.$__.activePaths.getStatePaths("default")).forEach((G)=>{NA1.unset(G,D),RA1(D,G)}),D},virtuals:!1})}));else B=J._id||(J._id={$in:[]}),B.$in=B.$in.concat(A)}else if(F==="$push")if($.$push=$.$push||{$each:[]},A!=null&&r4.hasUserDefinedProperty(A,"$each"))$.$push=A;else if(A.length===1)$.$push.$each.push(A[0]);else if(A.length<1e4)$.$push.$each.push(...A);else for(let J of A)$.$push.$each.push(J);else $[F]=A;return this},addToSet(){bH(this,arguments),CA1(this,arguments);let F=[].map.call(arguments,this._mapCast,this),A=[],$="";if(F[0]instanceof RO)$="doc";else if(F[0]instanceof Date)$="date";else if(jO(F[0],"ObjectId"))$="ObjectId";let B=r4.isMongooseArray(F)?F.__array:F,J=r4.isMongooseArray(this)?this.__array:this;return B.forEach(function(X){let Y,D=+X;switch($){case"doc":Y=this.some(function(G){return G.equals(X)});break;case"date":Y=this.some(function(G){return+G===D});break;case"ObjectId":Y=this.find((G)=>G.toString()===X.toString());break;default:Y=~this.indexOf(X);break}if(!Y)this._markModified(),J.push(X),this._registerAtomic("$addToSet",X),[].push.call(A,X)},this),A},hasAtomics(){if(!r4.isPOJO(this[g7]))return 0;return Object.keys(this[g7]).length},includes(F,A){return this.indexOf(F,A)!==-1},indexOf(F,A){if(jO(F,"ObjectId"))F=F.toString();A=A==null?0:A;let $=this.length;for(let B=A;B<$;++B)if(F==this[B])return B;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let F=[].map.call(arguments,this._mapCast,this);this._markModified();let A=[].push.apply(this,F);return this._registerAtomic("$set",this),A},pop(){this._markModified();let F=[].pop.call(this);return this._registerAtomic("$set",this),F},pull(){let F=[].map.call(arguments,(J,X)=>this._cast(J,X,{defaults:!1}),this),A=this;if(r4.isMongooseArray(A))A=A.__array;let $=A.length,B;this._markModified();while($--)if(B=A[$],B instanceof MO){if(F.some(function(X){return B.equals(X)}))A.splice($,1)}else if(~this.indexOf.call(F,B))A.splice($,1);if(F[0]instanceof RO)this._registerAtomic("$pullDocs",F.map(function(J){let X=J.$__getValue("_id");if(X===void 0||J.$isDefault("_id"))return J;return X}));else this._registerAtomic("$pullAll",F);if(LA1(this[J5],this[X5])>0)this._registerAtomic("$set",this);return this},push(){let F=arguments,A=F,$=F[0]!=null&&r4.hasUserDefinedProperty(F[0],"$each"),B=r4.isMongooseArray(this)?this.__array:this;if($)A=F[0],F=F[0].$each;if(this[w3]==null)return IA1.apply(this,F);bH(this,F),CA1(this,F),F=[].map.call(F,this._mapCast,this);let J,X=this[g7];if(this._markModified(),$)if(A.$each=F,(X.$push&&X.$push.$each&&X.$push.$each.length||0)!==0&&X.$push.$position!=A.$position){if(A.$position!=null)[].splice.apply(B,[A.$position,0].concat(F)),J=B.length;else J=[].push.apply(B,F);this._registerAtomic("$set",this)}else if(A.$position!=null)[].splice.apply(B,[A.$position,0].concat(F)),J=this.length;else J=[].push.apply(B,F);else A=F,J=IA1.apply(B,F);return this._registerAtomic("$push",A),J},remove(){return this.pull.apply(this,arguments)},set(F,A,$){let B=this.__array;if($)return B[F]=A,this;let J=gH._cast.call(this,A,F);return gH._markModified.call(this,F),B[F]=J,this},shift(){let F=r4.isMongooseArray(this)?this.__array:this;this._markModified();let A=[].shift.call(F);return this._registerAtomic("$set",this),A},sort(){let F=r4.isMongooseArray(this)?this.__array:this,A=[].sort.apply(F,arguments);return this._registerAtomic("$set",this),A},splice(){let F,A=r4.isMongooseArray(this)?this.__array:this;if(this._markModified(),bH(this,Array.prototype.slice.call(arguments,2)),arguments.length){let $;if(this[w3]==null)$=arguments;else{$=[];for(let B=0;B<arguments.length;++B)$[B]=B<2?arguments[B]:this._cast(arguments[B],arguments[0]+(B-2))}F=[].splice.apply(A,$),this._registerAtomic("$set",this)}return F},toBSON(){/*!
   * ignore
   */return this.toObject(wA1)},toObject(F){let A=r4.isMongooseArray(this)?this.__array:this;if(F&&F.depopulate)return F=K90(F),F._isNested=!0,[].concat(A).map(function($){return $ instanceof MO?$.toObject(F):$});return[].concat(A)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){bH(this,arguments);let F;if(this[w3]==null)F=arguments;else F=[].map.call(arguments,this._cast,this);let A=r4.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(A,F),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 */function Q90(F,A){if(!A)return!1;for(let $ of F){if($==null)return!1;let B=$.constructor;if(!($ instanceof MO)||B.modelName!==A&&B.baseModelName!==A)return!1}return!0}/*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 */function RA1(F,A,$){if(typeof A==="string"){if(A.indexOf(".")===-1)return;A=NA1.stringToParts(A)}if($=$||0,$>=A.length)return;if(F==null||typeof F!=="object")return;if(RA1(F[A[0]],A,$+1),F[A[0]]!=null&&typeof F[A[0]]==="object"&&Object.keys(F[A[0]]).length===0)delete F[A[0]]}/*!
 * ignore
 */function bH(F,A){let $=F==null?null:F[w3]&&F[w3].caster&&F[w3].caster.options&&F[w3].caster.options.ref||null;if(F.length===0&&A.length!==0){if(Q90(A,$))F[J5].$populated(F[X5],[],{[PA1]:A[0].constructor})}}/*!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 */function CA1(F,A){let $=F==null?null:F[w3]&&F[w3].caster&&F[w3].caster.options&&F[w3].caster.options.ref||null,B=F[J5],J=F[X5];if(!$||!B.populated(J))return;for(let X of A){if(X==null)continue;if(typeof X!=="object"||X instanceof String||X instanceof Number||X instanceof Buffer||r4.isMongooseType(X)){B.depopulate(J);break}}}var V90=["filter","flat","flatMap","map","slice"];for(let F of V90){if(Array.prototype[F]==null)continue;gH[F]=function(){let A=r4.isMongooseArray(this)?this.__array:this,$=[].concat(A);return $[F].apply($,arguments)}}jA1.exports=gH});var kO=Q((SA1,uA1)=>{/*!
 * Module dependencies.
 */var TO=_H(),yH=q1().arrayAtomicsSymbol,E90=q1().arrayAtomicsBackupSymbol,MA1=q1().arrayParentSymbol,L90=q1().arrayPathSymbol,TA1=q1().arraySchemaSymbol,kA1=Array.prototype.push,OA1=/^\d+$/;function w90(F,A,$,B){let J;if(Array.isArray(F)){let D=F.length;if(D===0)J=[];else if(D===1)J=[,],J[0]=F[0];else if(D<1e4)J=[],kA1.apply(J,F);else{J=[];for(let G=0;G<D;++G)kA1.call(J,F[G])}}else J=[];let X={[yH]:{},[E90]:void 0,[L90]:A,[TA1]:B,[MA1]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:J};if(F&&F[yH]!=null)X[yH]=F[yH];if($!=null&&$.$__)X[MA1]=$,X[TA1]=B||$.schema.path(A);let Y=new Proxy(J,{get:function(D,G){if(X.hasOwnProperty(G))return X[G];if(TO.hasOwnProperty(G))return TO[G];if(B&&B.virtuals&&B.virtuals.hasOwnProperty(G))return B.virtuals[G].applyGetters(void 0,D);if(typeof G==="string"&&OA1.test(G)&&B?.$embeddedSchemaType!=null)return B.$embeddedSchemaType.applyGetters(J[G],$);return J[G]},set:function(D,G,Z){if(typeof G==="string"&&OA1.test(G))TO.set.call(Y,G,Z,!1);else if(X.hasOwnProperty(G))X[G]=Z;else if(B&&B.virtuals&&B.virtuals.hasOwnProperty(G))B.virtuals[G].applySetters(Z,D);else J[G]=Z;return!0}});return Y}/*!
 * Module exports.
 */uA1.exports=SA1=w90});var gA1=Q((OP0,bA1)=>{var vH=_H(),I90=d9(),fA1=c9(),C90=R2().internalToObjectOptions,uF=P1(),N90=M4(),mH=q1().arrayParentSymbol,OO=q1().arrayPathSymbol,uD=q1().arraySchemaSymbol,xA1=q1().documentArrayParent,P90=Array.prototype.toString,SO={toBSON(){/*!
   * ignore
   */return this.toObject(C90)},toString(){return P90.call(this.__array.map((F)=>{if(F!=null&&F.$__!=null)return F.toString();return F}))},getArrayParent(){/*!
   * ignore
   */return this[mH]},$schemaType(){/*!
   * ignore
   */return this[uD]},_cast(F,A,$){if(this[uD]==null)return F;let B=this[uD].casterConstructor;if((B.$isMongooseDocumentArray?uF.isMongooseDocumentArray(F):F instanceof B)||F&&F.constructor&&F.constructor.baseCasterConstructor===B){if(!(F[xA1]&&F.__parentArray))F[xA1]=this[mH],F.__parentArray=this;return F.$setIndex(A),F}if(F===void 0||F===null)return null;if(Buffer.isBuffer(F)||N90(F,"ObjectId")||!uF.isObject(F))F={_id:F};if(F&&B.discriminators&&B.schema&&B.schema.options&&B.schema.options.discriminatorKey)if(typeof F[B.schema.options.discriminatorKey]==="string"&&B.discriminators[F[B.schema.options.discriminatorKey]])B=B.discriminators[F[B.schema.options.discriminatorKey]];else{let Y=fA1(B.discriminators,F[B.schema.options.discriminatorKey]);if(Y)B=Y}if(B.$isMongooseDocumentArray)return B.cast(F,this,void 0,void 0,A);let X=new B(F,this,$,void 0,A);return X.isNew=!0,X},id(F){if(F==null)return null;let A=this[uD],$=null;if(A&&A.schema)$=A.schema.path("_id");else if(A&&A.casterConstructor&&A.casterConstructor.schema)$=A.casterConstructor.schema.path("_id");let B=null;if($)try{B=$.cast(F)}catch(X){}let J;for(let X of this){if(!X)continue;if(J=X.get("_id"),J==null)continue;else if(J instanceof I90){if(J=J.get("_id"),B!=null&&uF.deepEqual(B,J))return X;else if(B==null&&(F==J||uF.deepEqual(F,J)))return X}else if(B!=null&&uF.deepEqual(B,J))return X;else if(B==null&&(J==F||uF.deepEqual(F,J)))return X}return null},toObject(F){return[].concat(this.map(function(A){if(A==null)return null;if(typeof A.toObject!=="function")return A;return A.toObject(F)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let F=vH.push.apply(this,arguments);return hH(this),F},pull(){let F=vH.pull.apply(this,arguments);return hH(this),F},shift(){let F=vH.shift.apply(this,arguments);return hH(this),F},splice(){let F=vH.splice.apply(this,arguments);return hH(this),F},inspect(){return this.toObject()},create(F){let A=this[uD].casterConstructor;if(F&&A.discriminators&&A.schema&&A.schema.options&&A.schema.options.discriminatorKey)if(typeof F[A.schema.options.discriminatorKey]==="string"&&A.discriminators[F[A.schema.options.discriminatorKey]])A=A.discriminators[F[A.schema.options.discriminatorKey]];else{let $=fA1(A.discriminators,F[A.schema.options.discriminatorKey]);if($)A=$}return new A(F,this)},notify(F){/*!
   * ignore
   */let A=this;return function $(B,J){J=J||A;let X=J.length;while(X--){if(J[X]==null)continue;switch(F){case"save":B=A[X];break;default:break}if(uF.isMongooseArray(J[X]))$(B,J[X]);else if(J[X])J[X].emit(F,B)}}},set(F,A,$){let B=this.__array;if($)return B[F]=A,this;let J=SO._cast.call(this,A,F);return SO._markModified.call(this,F),B[F]=J,this},_markModified(F,A){let $=this[mH],B;if($){if(B=this[OO],arguments.length)if(A!=null){let J=F.__index;B=B+"."+J+"."+A}else B=B+"."+F;if(B!=null&&B.endsWith(".$"))return this;$.markModified(B,arguments.length!==0?F:$)}return this}};bA1.exports=SO;function hH(F){let A=F[mH];if(!A||A.$__.populated==null)return;let $=Object.keys(A.$__.populated).filter((B)=>B.startsWith(F[OO]+"."));for(let B of $){let J=B.slice((F[OO]+".").length);if(!Array.isArray(A.$__.populated[B].value))continue;A.$__.populated[B].value=F.map((X)=>X.$populated(J))}}});var xF=Q((SP0,yA1)=>{/*!
 * Module dependencies.
 */var _A1=_H(),uO=gA1(),fO=q1().arrayAtomicsSymbol,R90=q1().arrayAtomicsBackupSymbol,xO=q1().arrayParentSymbol,bO=q1().arrayPathSymbol,fF=q1().arraySchemaSymbol,j90=Array.prototype.push,M90=/^\d+$/;function T90(F,A,$,B){let J=[],X={[fO]:{},[R90]:void 0,[bO]:A,[fF]:void 0,[xO]:void 0};if(Array.isArray(F)){if(F[bO]===A&&F[xO]===$)X[fO]=Object.assign({},F[fO]);F.forEach((D)=>{j90.call(J,D)})}if(X[bO]=A,X.__array=J,$&&$.$__){X[xO]=$,X[fF]=$.$__schema.path(A);while(X[fF]!=null&&X[fF].$isMongooseArray&&!X[fF].$isMongooseDocumentArray)X[fF]=X[fF].casterConstructor}let Y=new Proxy(J,{get:function(D,G){if(G==="isMongooseArray"||G==="isMongooseArrayProxy"||G==="isMongooseDocumentArray"||G==="isMongooseDocumentArrayProxy")return!0;if(X.hasOwnProperty(G))return X[G];if(uO.hasOwnProperty(G))return uO[G];if(B&&B.virtuals&&B.virtuals.hasOwnProperty(G))return B.virtuals[G].applyGetters(void 0,D);if(_A1.hasOwnProperty(G))return _A1[G];return J[G]},set:function(D,G,Z){if(typeof G==="string"&&M90.test(G))uO.set.call(Y,G,Z,!1);else if(X.hasOwnProperty(G))X[G]=Z;else if(B&&B.virtuals&&B.virtuals.hasOwnProperty(G))B.virtuals[G].applySetters(Z,D);else J[G]=Z;return!0}});return Y}/*!
 * Module exports.
 */yA1.exports=T90});var d9=Q(($$1,B$1)=>{/*!
 * Module dependencies.
 */var k90=JO(),_O=x("events").EventEmitter,O90=HF1(),S90=WB(),m3=_3(),vA1=HB(),u90=LF1(),f90=PH(),x90=RH(),b90=NF1(),g90=D5(),yO=B5(),iH=kF(),aA1=pk(),nA1=QO(),vO=jH(),dH=MH(),M2=Z6(),_90=kH().compile,y90=kH().defineKey,v90=xF1(),h90=OH().flatten,gO=pF1(),hA1=aF1(),m90=rF1(),d90=uH(),mA1=x9(),dA1=M4(),rA1=qB(),c90=QB(),cA1=wO(),hO=x("util").inspect,tA1=R2().internalToObjectOptions,l90=IO(),p90=CO(),i90=V9(),mO=NO(),a90=OD(),_1=P1(),n90=PO(),lH=_1.deepEqual,r90=_1.isMongooseObject,xD=q1().arrayAtomicsBackupSymbol,I3=q1().arrayAtomicsSymbol,t90=q1().documentArrayParent,s90=q1().documentIsModified,sA1=q1().documentModifiedPaths,o90=q1().documentSchemaSymbol,e90=q1().getSymbol,F20=q1().modelSymbol,lA1=q1().populateModelSymbol,A20=q1().scopeSymbol,$20=SF().schemaMixedSymbol,B20=HA1(),cH=q1().sessionNewDocuments,pH,pA1,fD,oA1=_1.specialProperties;function i(F,A,$,B){if(typeof $==="object"&&$!=null)B=$,$=B.skipId;if(B=Object.assign({},B),this.$__schema==null){let Z=_1.isObject(A)&&!A.instanceOfSchema?new g90(A):A;this.$__setSchema(Z),A=$,$=B,B=arguments[4]||{}}if(this.$__=new O90,B.isNew!=null&&B.isNew!==!0)this.$isNew=B.isNew;if(B.priorDoc!=null)this.$__.priorDoc=B.priorDoc;if($)this.$__.skipId=$;if(F!=null&&typeof F!=="object")throw new x90(F,"obj","Document");let J=!0;if(B.defaults!==void 0)this.$__.defaults=B.defaults,J=B.defaults;let X=this.$__schema;if(typeof A==="boolean"||A==="throw"){if(A!==!0)this.$__.strictMode=A;A=void 0}else if(X.options.strict!==!0)this.$__.strictMode=X.options.strict;let Y=X.requiredPaths(!0);for(let Z of Y)this.$__.activePaths.require(Z);let D=null;if(_1.isPOJO(A)&&Object.keys(A).length>0)D=c90(A),this.$__.selected=A,this.$__.exclude=D;let G=D===!1&&A?nA1(A):null;if(this._doc==null){if(this.$__buildDoc(F,A,$,D,G,!1),J)vO(this,A,D,G,!0,null,{skipParentChangeTracking:!0})}if(F){if(this.$__original_set)this.$__original_set(F,void 0,!0,B);else this.$set(F,void 0,!0,B);if(F instanceof i)this.$isNew=F.$isNew}if(B.willInit&&J){if(B.skipDefaults)this.$__.skipDefaults=B.skipDefaults}else if(J)vO(this,A,D,G,!1,B.skipDefaults);if(!this.$__.strictMode&&F){let Z=this;Object.keys(this._doc).forEach(function(z){if(!(z in X.tree)&&!(z in X.methods)&&!(z in X.virtuals)&&!z.startsWith("$"))y90({prop:z,subprops:null,prototype:Z})})}W20(this)}i.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(i.prototype,"isNew",{get:function(){return this.$isNew},set:function(F){this.$isNew=F}});Object.defineProperty(i.prototype,"errors",{get:function(){return this.$errors},set:function(F){this.$errors=F}});/*!
 * ignore
 */i.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */_1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(F){i.prototype[F]=function(){if(!this.$__.emitter){if(F==="emit")return;this.$__.emitter=new _O,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[F].apply(this.$__.emitter,arguments)},i.prototype[`$${F}`]=i.prototype[F]});i.prototype.constructor=i;for(let F in _O.prototype)i[F]=_O.prototype[F];i.prototype.$__schema;i.prototype.schema;Object.defineProperty(i.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(F){this.$__.locals=F}});i.prototype.isNew;Object.defineProperty(i.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});i.prototype.id;i.prototype.$errors;Object.defineProperty(i.prototype,"$op",{get:function(){return this.$__.op||null},set:function(F){this.$__.op=F}});/*!
 * ignore
 */function J20(F,A,$){if(F==null)return;let B=Object.keys($.$__schema.paths),J=B.length,X=A.indexOf(".")===-1?[A]:A.split(".");for(let Y=0;Y<J;++Y){let D="",G=B[Y];if(!G.startsWith(A+"."))continue;let Z=$.$__schema.paths[G],U=Z.splitPath().slice(X.length),z=U.length;if(Z.defaultValue===void 0)continue;let W=F;for(let H=0;H<z;++H){if(W==null)break;let K=U[H];if(H===z-1){if(W[K]!==void 0)break;try{let q=Z.getDefault($,!1);if(q!==void 0)W[K]=q}catch(q){$.invalidate(A+"."+D,q);break}break}D+=(!D.length?"":".")+K,W[K]=W[K]||{},W=W[K]}}}i.prototype.$__buildDoc=function(F,A,$,B,J){let X={},Y=Object.keys(this.$__schema.paths).filter((Z)=>!Z.includes("$*")),D=Y.length,G=0;for(;G<D;++G){let Z=Y[G];if(Z==="_id"){if($)continue;if(F&&"_id"in F)continue}let U=this.$__schema.paths[Z].splitPath(),z=U.length,W=z-1,H="",K=X,q=!1;for(let V=0;V<z;++V){let E=U[V];if(!H.length)H=E;else H+="."+E;if(B===!0){if(H in A)break}else if(B===!1&&A&&!q){if(H in A)q=!0;else if(!J[H])break}if(V<W)K=K[E]||(K[E]={})}}this._doc=X};/*!
 * Converts to POJO when you use the document for querying
 */i.prototype.toBSON=function(){return this.toObject(tA1)};i.prototype.init=function(F,A,$){if(typeof A==="function")$=A,A=null;if(this.$__init(F,A),$)$(null,this);return this};i.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};i.prototype.$__init=function(F,A){if(this.$isNew=!1,A=A||{},F._id!=null&&A.populated&&A.populated.length){let B=String(F._id);for(let J of A.populated){if(J.isVirtual)this.$populated(J.path,_1.getValue(J.path,F),J);else this.$populated(J.path,J._docs[B],J);if(J._childDocs==null)continue;for(let X of J._childDocs){if(X==null||X.$__==null)continue;X.$__.parent=this}J._childDocs=[]}}eA1(this,F,this._doc,A),l90(this,A.populated),this.$emit("init",this),this.constructor.emit("init",this);let $=this.$__.exclude===!1&&this.$__.selected?nA1(this.$__.selected):null;return vO(this,this.$__.selected,this.$__.exclude,$,!1,this.$__.skipDefaults),this};function eA1(F,A,$,B,J){if(J=J||"",A.$__!=null)A=A._doc;let X=Object.keys(A),Y=X.length,D,G,Z,U=F.$__.strictMode,z=F.$__schema;for(let W=0;W<Y;++W){if(Z=X[W],oA1.has(Z))continue;if(G=J?J+Z:Z,D=z.path(G),z.$isRootDiscriminator&&!F.$__isSelected(G))continue;let H=A[Z];if(!D&&_1.isPOJO(H)){if(!$[Z]){if($[Z]={},!U&&!(Z in z.tree)&&!(Z in z.methods)&&!(Z in z.virtuals))F[Z]=$[Z];else if(B?.virtuals&&Z in z.virtuals)F[Z]=$[Z]}eA1(F,H,$[Z],B,G+".")}else if(!D){if($[Z]=H,!U&&!J)F[Z]=H;else if(B?.virtuals&&Z in z.virtuals)F[Z]=H}else{if($.hasOwnProperty(Z)&&H!==void 0&&!B.hydratedPopulatedDocs)delete $[Z];if(H===null)$[Z]=D._castNullish(null);else if(H!==void 0){let K=H.$__==null?null:H.$__.wasPopulated;if(D&&!K&&!B.hydratedPopulatedDocs)try{if(B&&B.setters)$[Z]=D.applySetters(H,F,!1,null,B);else $[Z]=D.cast(H,F,!0,void 0,B)}catch(q){F.invalidate(q.path,new aA1({path:q.path,message:q.message,type:"cast",value:q.value,reason:q}))}else if(D&&B.hydratedPopulatedDocs){if($[Z]=D.cast(H,F,!0,void 0,{hydratedPopulatedDocs:!0}),$[Z]&&$[Z].$__&&$[Z].$__.wasPopulated)F.$populated(G,$[Z].$__.wasPopulated.value,$[Z].$__.wasPopulated.options);else if(Array.isArray($[Z])&&$[Z].length&&$[Z][0]?.$__?.wasPopulated)F.$populated(G,$[Z].map((q)=>q?.$__?.wasPopulated?.value).filter((q)=>q!=null),$[Z][0].$__.wasPopulated.options)}else $[Z]=H}if(!F.$isModified(G))F.$__.activePaths.init(G)}}}i.prototype.updateOne=function(A,$,B){let J=this.constructor.updateOne({_id:this._doc._id},A,$),X=this;if(J.pre(function(D){X.constructor._middleware.execPre("updateOne",X,[X],D)}),J.post(function(D){X.constructor._middleware.execPost("updateOne",X,[X],{},D)}),this.$session()!=null){if(!("session"in J.options))J.options.session=this.$session()}if(B!=null)return J.exec(B);return J};i.prototype.replaceOne=function(){let A=[...arguments];return A.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,A)};i.prototype.$session=function(A){if(arguments.length===0){if(this.$__.session!=null&&this.$__.session.hasEnded)return this.$__.session=null,null;return this.$__.session}if(A!=null&&A.hasEnded)throw new m3("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(A==null&&this.$__.session==null)return;if(this.$__.session=A,!this.$isSubdocument){let $=this.$getAllSubdocs();for(let B of $)B.$session(A)}return A};i.prototype.$timestamps=function(A){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}let $=this.$timestamps();if(A!==$)this.$__.timestamps=A;return this};i.prototype.overwrite=function(A){let $=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(A))));for(let B of $){if(B==="_id")continue;if(this.$__schema.options.versionKey&&B===this.$__schema.options.versionKey)continue;if(this.$__schema.options.discriminatorKey&&B===this.$__schema.options.discriminatorKey)continue;this.$set(B,A[B])}return this};i.prototype.$set=function(A,$,B,J){if(_1.isPOJO(B))J=B,B=void 0;let X=J&&J.merge,Y=B&&B!==!0,D=B===!0,G,Z,U=0,z,W,H,K=J&&"strict"in J,q=K?J.strict:this.$__.strictMode;if(Y)G=this.$__.adhocPaths||(this.$__.adhocPaths={}),G[A]=this.$__schema.interpretAsType(A,B,this.$__schema.options);if(A==null)[A,$]=[$,A];else if(typeof A!=="string"){if(A instanceof i)if(A.$__isNested)A=A.toObject();else A=A.$__schema===this.$__schema?dO(A,{...A._doc}):A._doc;if(A==null)[A,$]=[$,A];H=$?$+".":"",Z=hA1(this.$__schema,A);let g=Z.length,S=J&&J._skipMinimizeTopLevel||!1;if(g===0&&S){if(delete J._skipMinimizeTopLevel,$)this.$set($,{});return this}J=Object.assign({},J,{_skipMinimizeTopLevel:!1});for(let m=0;m<g;++m){W=Z[m];let r=H?H+W:W;z=this.$__schema.pathType(r);let w1=A[W];if(B===!0&&!H&&w1!=null&&z==="nested"&&this._doc[W]!=null)delete this._doc[W];if(_1.isNonBuiltinObject(w1)&&z==="nested"){this.$set(r,w1,D,J),J20(this.$get(r),r,this);continue}else if(q){if(D&&w1===void 0&&this.$get(r)!==void 0)continue;if(z==="adhocOrUndefined")z=gO(this,r,{typeOnly:!0});if(z==="real"||z==="virtual")this.$set(r,w1,D,J);else if(z==="nested"&&w1 instanceof i)this.$set(r,w1.toObject({transform:!1}),D,J);else if(q==="throw")if(z==="nested")throw new f90(W,w1);else throw new yO(W);else if(z==="nested"&&w1==null)this.$set(r,w1,D,J)}else this.$set(r,w1,D,J)}let O={},p=Object.keys(this.$__schema.tree);for(let m=0,r=p.length;m<r;++m)(W=p[m])&&this._doc.hasOwnProperty(W)&&(O[W]=void 0);return this._doc=Object.assign(O,this._doc),this}let V=this.$__schema.pathType(A),E=null;if(V==="adhocOrUndefined")E=A.indexOf(".")===-1?[A]:A.split("."),V=gO(this,E,{typeOnly:!0});if(V==="adhocOrUndefined"&&!K){if(E==null)E=A.indexOf(".")===-1?[A]:A.split(".");let g=m90(this.$__schema,E);if(g!==void 0)q=g}$=d90($,!0);let L=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(A);if(D)return;return this.$__getValue(A)})();if(V==="nested"&&$){if(typeof $==="object"&&$!=null){if($.$__!=null)$=$.toObject(tA1);if($==null)return this.invalidate(A,new m3.CastError("Object",$,A)),this;let g=this.$isModified(A),S=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(A);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(A)){let p=this.$__getValue(A);this.$__.savedState[A]=p;let m=Object.keys(p||{});for(let r of m)this.$__.savedState[A+"."+r]=p[r]}if(!X)this.$__setValue(A,null),dH(this,A);else return this.$set($,A,D,J);let O=hA1(this.$__schema,$,A);this.$__setValue(A,{});for(let p of O)this.$set(A+"."+p,$[p],D,{...J,_skipMarkModified:!0});if(L!=null&&(!g||S)&&_1.deepEqual(S?this.$__.savedState[A]:L,$))this.unmarkModified(A);else this.markModified(A);return this}return this.invalidate(A,new m3.CastError("Object",$,A)),this}let w;if(E==null)E=A.indexOf(".")===-1?[A]:A.split(".");if(typeof this.$__schema.aliases[E[0]]==="string")E[0]=this.$__schema.aliases[E[0]];if(V==="adhocOrUndefined"&&q){let g;for(U=0;U<E.length;++U){let S=E.slice(0,U+1).join(".");if(U+1<E.length&&this.$__schema.pathType(S)==="virtual")return i90.set(A,$,this),this;if(w=this.$__schema.path(S),w==null)continue;if(w instanceof vA1){g=!0;break}else if(w.$isSchemaMap&&w.$__schemaType instanceof vA1&&U<E.length-1){g=!0,w=w.$__schemaType;break}}if(w==null)w=gO(this,A);if(!g&&!w){if(q==="throw")throw new yO(A);return this}}else if(V==="virtual")return w=this.$__schema.virtualpath(A),w.applySetters($,this),this;else w=this.$__path(A);let I=this._doc,P="";for(U=0;U<E.length-1;++U)if(I=I instanceof Map?I.get(E[U]):I[E[U]],P+=(P.length!==0?".":"")+E[U],!I){if(this.$set(P,{}),!this.$__isSelected(P))this.unmarkModified(P);I=this.$__getValue(P)}let M;if(E.length<=1)M=A;else{let g=E.length;for(U=0;U<g;++U){let S=E.slice(0,U+1).join(".");if(this.$get(S,null,{getters:!1})===null){M=S;break}}if(!M)M=A}if(!w){if(this.$__set(M,A,J,D,E,w,$,L),V==="nested"&&$==null)dH(this,A);return this}if(w.$isSingleNested||w.$isMongooseArray)U20(this,A);if($!=null&&X&&w.$isSingleNested){if($ instanceof i)$=$.toObject({virtuals:!1,transform:!1});let g=Object.keys($);for(let S of g)this.$set(A+"."+S,$[S],D,J);return this}let u=!0;try{let g=(()=>{if(w.options==null)return!1;if(!($ instanceof i))return!1;let m=$.constructor,r=typeof w.options.ref==="function"&&!w.options.ref[F20]?w.options.ref.call(this,this):w.options.ref,w1=r?.modelName||r;if(w1!=null&&(w1===m.modelName||w1===m.baseModelName))return!0;let u0=w.options.refPath;if(u0==null)return!1;let w9=$.get(u0);return w9===m.modelName||w9===m.baseModelName})(),S=!1;if(g&&$ instanceof i&&(!$.$__.wasPopulated||_1.deepEqual($.$__.wasPopulated.value,$._doc._id))){let m=w&&w.$isSingleNested?w.cast($,this):$._doc._id;this.$populated(A,m,{[lA1]:$.constructor}),$.$__.wasPopulated={value:m},S=!0}let O,p=this.$__schema.options.typeKey;if(w.options&&Array.isArray(w.options[p])&&w.options[p].length&&w.options[p][0]&&w.options[p][0].ref&&X20($,w.options[p][0].ref)){O={[lA1]:$[0].constructor},this.$populated(A,$.map(function(m){return m._doc._id}),O);for(let m of $)m.$__.wasPopulated={value:m._doc._id};S=!0}if(!g||!w.$isSingleNested||!$.$__){let m=this;if(this.$__schema.singleNestedPaths[A]!=null&&E.length>1)m=B20(this,E,this.schema);if(J!=null&&J.overwriteImmutable)$=w.applySetters($,m,!1,L,{path:A,overwriteImmutable:!0});else $=w.applySetters($,m,!1,L,{path:A})}if(Array.isArray($)&&!Array.isArray(w)&&w.$isMongooseDocumentArray&&$.length!==0&&$[0]!=null&&$[0].$__!=null&&$[0].$__.populated!=null){let m=Object.keys($[0].$__.populated);for(let r of m)this.$populated(A+"."+r,$.map((w1)=>w1.$populated(r)),$[0].$__.populated[r].options);S=!0}if(!S&&this.$__.populated){if(Array.isArray($)&&this.$__.populated[A]){for(let m=0;m<$.length;++m)if($[m]instanceof i)$.set(m,$[m]._doc._id,!0)}delete this.$__.populated[A]}if($!=null&&w.$isSingleNested)z20($,w,L);this.$markValid(A)}catch(g){if(g instanceof m3.StrictModeError&&g.isImmutableError)this.invalidate(A,g);else if(g instanceof m3.CastError){if(this.invalidate(g.path,g),g.$originalErrorPath)this.invalidate(A,new m3.CastError(w.instance,$,A,g.$originalErrorPath))}else this.invalidate(A,new m3.CastError(w.instance,$,A,g));u=!1}if(u){let g=null,S=null;if(!D){let m=this.$isSubdocument?this.ownerDocument():this;g=m.$__.savedState,S=this.$isSubdocument?this.$__.fullPath+"."+A:A,m.$__saveInitialState(S)}this.$__set(M,A,J,D,E,w,$,L);let O=!!this.$__.session?.transaction,p=this.$__.session&&this.$__.session[cH]&&this.$__.session[cH].has(this)&&this.$__.session[cH].get(this).modifiedPaths&&!this.$__.session[cH].get(this).modifiedPaths.has(S);if(g!=null&&g.hasOwnProperty(S)&&(!O||p)&&_1.deepEqual($,g[S]))this.unmarkModified(A)}if(w.$isSingleNested&&(this.isDirectModified(A)||$==null))dH(this,A);else if(w.$isSchemaMap&&$==null)dH(this,A);return this};/*!
 * ignore
 */function X20(F,A){if(!Array.isArray(F))return!1;if(F.length===0)return!1;for(let $ of F){if(!($ instanceof i))return!1;if($.constructor.modelName==null)return!1;if($.constructor.modelName!=A&&$.constructor.baseModelName!=A)return!1}return!0}i.prototype.set=i.prototype.$set;i.prototype.$__shouldModify=function(F,A,$,B,J,X,Y,D){if($&&$._skipMarkModified)return!1;if(this.$isNew)return!0;if(A in this.$__.activePaths.getStatePaths("modify"))return!0;if(Y===void 0&&!this.$__isSelected(A))return!0;if(Y===void 0&&A in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(A)&&Y instanceof i&&lH(Y._doc._id,D))return!1;if(!lH(Y,D!==void 0?D:_1.getValue(A,this)))return!0;if(!B&&Y!==null&&Y!==void 0&&A in this.$__.activePaths.getStatePaths("default")&&lH(Y,X.getDefault(this,B)))return!0;return!1};i.prototype.$__set=function(F,A,$,B,J,X,Y,D){fD=fD||VB();let G=this.$__shouldModify(F,A,$,B,J,X,Y,D);if(G){if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[A]){if(delete this.$__.primitiveAtomics[A],Object.keys(this.$__.primitiveAtomics).length===0)delete this.$__.primitiveAtomics}if(this.markModified(F),pA1||(pA1=kO()),Y&&_1.isMongooseArray(Y)){if(Y._registerAtomic("$set",Y),_1.isMongooseDocumentArray(Y))Y.forEach(function(H){H&&H.__parentArray&&(H.__parentArray=Y)})}}else if(Array.isArray(Y)&&Array.isArray(D)&&_1.isMongooseArray(Y)&&_1.isMongooseArray(D)){if(Y[I3]=D[I3],Y[xD]=D[xD],_1.isMongooseDocumentArray(Y))Y.forEach((H)=>{if(H!=null)H.$isNew=!1})}let Z=this._doc,U=0,z=J.length,W="";for(;U<z;U++){let K=U+1===z;if(W+=W?"."+J[U]:J[U],oA1.has(J[U]))continue;if(K)if(Z instanceof Map)Z.set(J[U],Y);else if(Z.$isSingleNested){if(!(J[U]in Z))Z[J[U]]=Y,Z._doc[J[U]]=Y;else Z._doc[J[U]]=Y;if(G)Z.markModified(J[U])}else Z[J[U]]=Y;else{let q=Z instanceof Map,V=q?Z.get(J[U]):Z[J[U]];if(_1.isPOJO(V))Z=V;else if(V&&V instanceof fD)Z=V;else if(V&&!Array.isArray(V)&&V.$isSingleNested)Z=V;else if(V&&Array.isArray(V))Z=V;else if(V==null){if(V={},q)Z.set(J[U],V);else Z[J[U]]=V;Z=V}else Z=V}}};i.prototype.$__getValue=function(F){if(typeof F!=="string"&&!Array.isArray(F))throw TypeError(`Invalid \`path\`. Must be either string or array. Got "${F}" (type ${typeof F})`);return _1.getValue(F,this._doc)};i.prototype.$inc=function(A,$){if($==null)$=1;if(Array.isArray(A))return A.forEach((G)=>this.$inc(G,$)),this;let B=this.$__path(A);if(B==null){if(this.$__.strictMode==="throw")throw new yO(A);else if(this.$__.strictMode===!0)return this}else if(B.instance!=="Number")return this.invalidate(A,new m3.CastError(B.instance,$,A)),this;let J=this.$__getValue(A)||0,X=!1,Y=null,D=$;try{$=B.cast($),Y=B.applySetters(J+$,this),D=Y-J,X=!0}catch(G){this.invalidate(A,new m3.CastError("number",$,A,G))}if(X){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[A]==null)this.$__.primitiveAtomics[A]={$inc:D};else this.$__.primitiveAtomics[A].$inc+=D;this.markModified(A),this.$__setValue(A,Y)}return this};i.prototype.$__setValue=function(F,A){return _1.setValue(F,A,this._doc),this};i.prototype.get=function(F,A,$){let B;if($==null)$={};if(A)B=this.$__schema.interpretAsType(F,A,this.$__schema.options);let J=$.noDottedPath,X=J?this.$__schema.paths[F]:this.$__path(F);if(X==null){if(X=this.$__schema.virtualpath(F),X!=null)return X.applyGetters(void 0,this)}if(J){let Z=this._doc[F];if(B)Z=B.cast(Z);if(X!=null&&$.getters!==!1)return X.applyGetters(Z,this);return Z}if(X!=null&&X.instance==="Mixed"){let Z=this.$__schema.virtualpath(F);if(Z!=null)X=Z}let Y=F.indexOf(".")!==-1,D=this._doc,G=Y?F.split("."):[F];if(typeof this.$__schema.aliases[G[0]]==="string")G[0]=this.$__schema.aliases[G[0]];for(let Z=0,U=G.length;Z<U;Z++){if(D&&D._doc)D=D._doc;if(D==null)D=void 0;else if(D instanceof Map)D=D.get(G[Z],{getters:!1});else if(Z===U-1)D=_1.getValue(G[Z],D);else D=D[G[Z]]}if(B)D=B.cast(D);if(X!=null&&$.getters!==!1)D=X.applyGetters(D,this);else if(this.$__schema.nested[F]&&$.virtuals)return dO(this,M2(D)||{},{path:F});return D};/*!
 * ignore
 */i.prototype[e90]=i.prototype.get;i.prototype.$get=i.prototype.get;i.prototype.$__path=function(F){let A=this.$__.adhocPaths,$=A&&A.hasOwnProperty(F)?A[F]:null;if($)return $;return this.$__schema.path(F)};i.prototype.markModified=function(F,A){if(this.$__saveInitialState(F),this.$__.activePaths.modify(F),A!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[F]=A};/*!
 * ignore
 */i.prototype.$__saveInitialState=function(A){let $=this.$__.savedState,B=A;if($!=null){let J=B.indexOf("."),X=J===-1?B:B.slice(0,J);if(!$.hasOwnProperty(X))$[X]=M2(this.$__getValue(X))}};i.prototype.unmarkModified=function(F){if(this.$__.activePaths.init(F),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[F]};i.prototype.$ignore=function(F){this.$__.activePaths.ignore(F)};i.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};i.prototype.$isEmpty=function(F){let A={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let $=this.$get(F);if($==null)return!0;if(typeof $!=="object")return!1;if(_1.isPOJO($))return F$1($);return Object.keys($.toObject(A)).length===0}return Object.keys(this.toObject(A)).length===0};/*!
 * ignore
 */function F$1(F){if(F==null)return!0;if(typeof F!=="object"||Array.isArray(F))return!1;for(let A of Object.keys(F))if(!F$1(F[A]))return!1;return!0}i.prototype.modifiedPaths=function(F){F=F||{};let A=Object.keys(this.$__.activePaths.getStatePaths("modify")),$=new Set,B=0,J=0,X=A.length;for(B=0;B<X;++B){let Y=A[B],D=mO(Y),G=D.length;for(J=0;J<G;++J)$.add(D[J]);if(!F.includeChildren)continue;let Z=0,U=this.$get(Y);if(typeof U==="object"&&U!==null){if(U._doc)U=U._doc;let z=U.length;if(Array.isArray(U))for(Z=0;Z<z;++Z){let W=Y+"."+Z;if(!$.has(W)){if($.add(W),U[Z]!=null&&U[Z].$__){let H=U[Z].modifiedPaths(),K=0,q=H.length;for(K=0;K<q;++K)$.add(W+"."+H[K])}}}else{let W=Object.keys(U),H=0,K=W.length;for(H=0;H<K;++H)$.add(Y+"."+W[H])}}}return Array.from($)};i.prototype[sA1]=i.prototype.modifiedPaths;i.prototype.isModified=function(F,A,$){if(F){let B=A&&A.ignoreAtomics,J=this.$__.activePaths.states.modify;if(J==null)return!1;if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");for(let G of F)if(J[G]!=null)return!0;let X=$||this[sA1](),Y=F.some(function(G){return!!~X.indexOf(G)}),D=Object.keys(J);if(B)D=D.filter((G)=>{let Z=this.$__getValue(G);if(Z!=null&&Z[I3]!=null&&Z[I3].$set===void 0)return!1;return!0});return Y||F.some(function(G){return D.some(function(Z){return Z===G||G.startsWith(Z+".")})})}return this.$__.activePaths.some("modify")};i.prototype.$isModified=i.prototype.isModified;i.prototype[s90]=i.prototype.isModified;i.prototype.$isDefault=function(F){if(F==null)return this.$__.activePaths.some("default");if(typeof F==="string"&&F.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some(($)=>this.$__.activePaths.getStatePaths("default").hasOwnProperty($))};i.prototype.$isDeleted=function(F){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!F,this};i.prototype.isDirectModified=function(F){if(F==null)return this.$__.activePaths.some("modify");if(typeof F==="string"&&F.indexOf(" ")===-1){let $=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(F);if($||F.indexOf(".")===-1)return $;let B=F.split(".");for(let J=0;J<B.length-1;++J){let X=B.slice(0,J+1).join("."),Y=this.$get(X);if(Y!=null&&Y.$__!=null&&Y.isDirectModified(B.slice(J+1).join(".")))return!0}return!1}let A=F;if(typeof A==="string")A=A.split(" ");return A.some(($)=>this.isDirectModified($))};i.prototype.isInit=function(F){if(F==null)return this.$__.activePaths.some("init");if(typeof F==="string"&&F.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some(($)=>this.$__.activePaths.getStatePaths("init").hasOwnProperty($))};i.prototype.isSelected=function(A){if(this.$__.selected==null)return!0;if(!A)return!1;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((X)=>this.$__isSelected(X));let $=Object.keys(this.$__.selected),B=null;if($.length===1&&$[0]==="_id")return this.$__.selected._id===0;for(let X of $){if(X==="_id")continue;if(!rA1(this.$__.selected[X]))continue;B=!!this.$__.selected[X];break}if(B===null)return!0;if(A in this.$__.selected)return B;let J=A+".";for(let X of $){if(X==="_id")continue;if(X.startsWith(J))return B||X!==J;if(J.startsWith(X+"."))return B}return!B};i.prototype.$__isSelected=i.prototype.isSelected;i.prototype.isDirectSelected=function(A){if(this.$__.selected==null)return!0;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((J)=>this.isDirectSelected(J));let $=Object.keys(this.$__.selected),B=null;if($.length===1&&$[0]==="_id")return this.$__.selected._id===0;for(let J of $){if(J==="_id")continue;if(!rA1(this.$__.selected[J]))continue;B=!!this.$__.selected[J];break}if(B===null)return!0;if(this.$__.selected.hasOwnProperty(A))return B;return!B};i.prototype.validate=async function(A,$){if(typeof A==="function"||typeof $==="function"||typeof arguments[2]==="function")throw new m3("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))$=arguments[0],A=null}if($&&typeof $.pathsToSkip==="string"){let J=$.pathsToSkip.indexOf(" ")===-1;$.pathsToSkip=J?[$.pathsToSkip]:$.pathsToSkip.split(" ")}let B=$&&$._skipParallelValidateCheck;if(this.$isSubdocument!=null);else if(this.$__.validating&&!B)throw new b90(this);else if(!B)this.$__.validating=!0;return new Promise((J,X)=>{this.$__validate(A,$,(Y)=>{if(this.$op=null,this.$__.validating=null,Y!=null)return X(Y);J()})})};i.prototype.$validate=i.prototype.validate;/*!
 * ignore
 */function Y20(F){let A=Object.keys(F.$__.activePaths.getStatePaths("require")),$=0,B=A.length;for($=0;$<B;++$){let J=A[$],X=F.$__schema.path(J);if(X!=null&&typeof X.originalRequiredValue==="function"){F.$__.cachedRequired=F.$__.cachedRequired||{};try{F.$__.cachedRequired[J]=X.originalRequiredValue.call(F,F)}catch(Y){F.invalidate(J,Y)}}}}/*!
 * ignore
 */function A$1(F,A,$,B){let J={};Y20(F);let X=new Set(Object.keys(F.$__.activePaths.getStatePaths("require")).filter(function(G){if(!F.$__isSelected(G)&&!F.$isModified(G))return!1;if(G.endsWith(".$*"))return!1;if(F.$__.cachedRequired!=null&&G in F.$__.cachedRequired)return F.$__.cachedRequired[G];return!0}));Object.keys(F.$__.activePaths.getStatePaths("init")).forEach(Y),Object.keys(F.$__.activePaths.getStatePaths("modify")).forEach(Y),Object.keys(F.$__.activePaths.getStatePaths("default")).forEach(Y);function Y(G){if(G.endsWith(".$*"))return;X.add(G)}if(!B){let G=[];for(let U of Object.keys(F.$__schema.paths)){let z=F.$__schema.path(U);if(z.$isSingleNested){let W=F.$get(U);if(W)G.push(W)}else if(z.$isMongooseDocumentArray){let W=F.$get(U);if(W&&W.length){for(let H of W)if(H)G.push(H)}}}let Z=F.modifiedPaths();for(let U of G)if(U.$basePath){let z=U.$__pathRelativeToParent();for(let H of U.modifiedPaths())X.delete(z+"."+H);let W=U.$parent();if(W==null)throw Error("Cannot validate subdocument that does not have a parent");if(F.$isModified(z,null,Z)&&!W.$__.activePaths.getStatePaths("modify").hasOwnProperty(z)&&!W.$isDefault(z)){if(X.add(z),F.$__.pathsToScopes==null)F.$__.pathsToScopes={};if(F.$__.pathsToScopes[z]=U.$isDocumentArrayElement?U.__parentArray:U.$parent(),J[z]={skipSchemaValidators:!0},U.$isDocumentArrayElement&&U.__index!=null)J[z].index=U.__index}}}for(let G of X){let Z=F.$__schema.path(G);if(!Z)continue;if(Z.$isMongooseDocumentArray){for(let U of X)if(U==null||U.startsWith(Z.path+"."))X.delete(U)}if(!Z.caster&&Z.validators.length===0&&!Z.$parentSchemaDocArray)X.delete(G);else if(Z.$isMongooseArray&&!Z.$isMongooseDocumentArray&&!Z.$embeddedSchemaType.$isMongooseArray&&Z.validators.length===0&&Z.$embeddedSchemaType.validators.length===0)X.delete(G)}if(Array.isArray(A))X=G20(X,A);else if(Array.isArray($))X=Z20(X,$);D20(F,X);let D={skipArrays:!0};for(let G of X)if(F.$__schema.nested[G]){let Z=F.$__getValue(G);if(r90(Z))Z=Z.toObject({transform:!1});let U=h90(Z,G,D,F.$__schema);Object.keys(U).filter((z)=>!F.$__schema.singleNestedPaths.hasOwnProperty(z)).forEach(Y)}for(let G of X){let Z=F.$__schema.path(G);if(!Z)continue;if(Z.$parentSchemaDocArray&&typeof Z.$parentSchemaDocArray.path==="string")X.add(Z.$parentSchemaDocArray.path);if(!Z.$isSchemaMap)continue;let U=F.$__getValue(G);if(U==null)continue;for(let z of U.keys())X.add(G+"."+z)}return X=Array.from(X),[X,J]}function D20(F,A){for(let $ of A){let B=F.$__schema.path($);if(!B)continue;if(!B.$isMongooseArray||!Array.isArray(B)&&B.$isMongooseDocumentArray&&!(B&&B.schemaOptions&&B.schemaOptions.required))continue;if(B.$isMongooseArray&&!B.$isMongooseDocumentArray&&!B.$embeddedSchemaType.$isMongooseArray&&B.$embeddedSchemaType.validators.length===0)continue;let J=F.$__getValue($);aH(J,A,$)}}function aH(F,A,$){if(F!=null){let B=F.length;for(let J=0;J<B;++J)if(Array.isArray(F[J]))aH(F[J],A,$+"."+J);else A.add($+"."+J)}}/*!
 * ignore
 */i.prototype.$__validate=function(F,A,$){if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!F)F=[...this.$__.saveOptions.pathsToSave];else if(typeof F==="function")$=F,A=null,F=null;else if(typeof A==="function")$=A,A=null;let B=A&&typeof A==="object"&&"validateModifiedOnly"in A,J=A&&A.pathsToSkip||null,X;if(B)X=!!A.validateModifiedOnly;else X=this.$__schema.options.validateModifiedOnly;let Y=A&&A.validateAllPaths;if(Y){if(J)throw TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(B&&X)throw TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let D=this,G=()=>{let V=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,X&&V!=null){let E=Object.keys(V.errors);for(let L of E)if(!this.$isModified(L))delete V.errors[L];if(Object.keys(V.errors).length===0)V=void 0}if(this.$__.cachedRequired={},this.$emit("validate",D),this.constructor.emit("validate",D),V){for(let E in V.errors)if(!this[t90]&&V.errors[E]instanceof m3.CastError)this.invalidate(E,V.errors[E]);return V}},Z,U;if(Y){Z=new Set(Object.keys(this.$__schema.paths));for(let V of Z){let E=this.$__schema.path(V);if(!E||!E.$isMongooseArray)continue;let L=this.$__getValue(V);if(!L)continue;aH(L,Z,V)}Z=[...Z],U={}}else{let V=A$1(this,F,J,A&&A._nestedValidate);Z=X?V[0].filter((E)=>this.$isModified(E)):V[0],U=V[1]}if(typeof F==="string")F=F.split(" ");if(Z.length===0)return mA1(function(){let V=G();if(V)return D.$__schema.s.hooks.execPost("validate:error",D,[D],{error:V},function(E){$(E)});$(null,D)});let z={},W=0,H=this.$__.saveOptions?.pathsToSave;if(Array.isArray(H)){H=new Set(H);for(let V of Z){if(!H.has(V))continue;K(V)}}else for(let V of Z)K(V);function K(V){if(V==null||z[V])return;z[V]=!0,W++,mA1(function(){let E=D.$__schema.path(V);if(!E)return--W||q();if(!D.$isValid(V)){--W||q();return}if(E[$20]!=null&&V!==E.path)return--W||q();let L=D.$__getValue(V),w;if(w=D.$populated(V))L=w;else if(L!=null&&L.$__!=null&&L.$__.wasPopulated)L=L._doc._id;let I=D.$__.pathsToScopes!=null&&V in D.$__.pathsToScopes?D.$__.pathsToScopes[V]:D,P={...U[V],path:V,validateAllPaths:Y,_nestedValidate:!0};E.doValidate(L,function(M){if(M){if((E.$isSingleNested||E.$isArraySubdocument||E.$isMongooseDocumentArray)&&M instanceof iH)return--W||q();D.invalidate(V,M,void 0,!0)}--W||q()},I,P)})}function q(){let V=G();if(V)return D.$__schema.s.hooks.execPost("validate:error",D,[D],{error:V},function(E){$(E)});$(null,D)}};/*!
 * ignore
 */function G20(F,A){let $=new Set(A),B=new Map([]);for(let X of A){if(X.indexOf(".")===-1)continue;let Y=X.split("."),D=Y[0];for(let G=1;G<Y.length;++G)B.set(D,X),D=D+"."+Y[G]}let J=new Set;for(let X of F)if($.has(X))J.add(X);else if(B.has(X))J.add(B.get(X));return J}/*!
 * ignore
 */function Z20(F,A){return A=new Set(A),F=Array.from(F).filter(($)=>!A.has($)),new Set(F)}i.prototype.validateSync=function(F,A){let $=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))A=arguments[0],F=null;let B=A&&typeof A==="object"&&"validateModifiedOnly"in A,J;if(B)J=!!A.validateModifiedOnly;else J=this.$__schema.options.validateModifiedOnly;let X=A&&A.pathsToSkip,Y=A&&A.validateAllPaths;if(Y){if(X)throw TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");else if(typeof X==="string"&&X.indexOf(" ")!==-1)X=X.split(" ");let D,G;if(Y){D=new Set(Object.keys(this.$__schema.paths));for(let z of D){let W=this.$__schema.path(z);if(!W||!W.$isMongooseArray)continue;let H=this.$__getValue(z);if(!H)continue;aH(H,D,z)}D=[...D],G={}}else{let z=A$1(this,F,X);D=J?z[0].filter((W)=>this.$isModified(W)):z[0],G=z[1]}let Z={};for(let z=0,W=D.length;z<W;++z){let H=D[z];if(Z[H])continue;Z[H]=!0;let K=$.$__schema.path(H);if(!K)continue;if(!$.$isValid(H))continue;let q=$.$__getValue(H),V=K.doValidateSync(q,$,{skipSchemaValidators:G[H],path:H,validateModifiedOnly:J,validateAllPaths:Y});if(V){if((K.$isSingleNested||K.$isArraySubdocument||K.$isMongooseDocumentArray)&&V instanceof iH)continue;$.invalidate(H,V,void 0,!0)}}let U=$.$__.validationError;if($.$__.validationError=void 0,$.$emit("validate",$),$.constructor.emit("validate",$),U){for(let z in U.errors)if(U.errors[z]instanceof m3.CastError)$.invalidate(z,U.errors[z])}return U};i.prototype.invalidate=function(F,A,$,B){if(!this.$__.validationError)this.$__.validationError=new iH(this);if(this.$__.validationError.errors[F])return;if(!A||typeof A==="string")A=new aA1({path:F,message:A,type:B||"user defined",value:$});if(this.$__.validationError===A)return this.$__.validationError;return this.$__.validationError.addError(F,A),this.$__.validationError};i.prototype.$markValid=function(F){if(!this.$__.validationError||!this.$__.validationError.errors[F])return;if(delete this.$__.validationError.errors[F],Object.keys(this.$__.validationError.errors).length===0)this.$__.validationError=null};/*!
 * ignore
 */function U20(F,A){if(!F.$__.validationError)return;let $=Object.keys(F.$__.validationError.errors);for(let B of $)if(B.startsWith(A+"."))delete F.$__.validationError.errors[B];if(Object.keys(F.$__.validationError.errors).length===0)F.$__.validationError=null}/*!
 * ignore
 */function z20(F,A,$){let B=A.schema;if(B==null)return;for(let J of Object.keys(B.paths)){let X=B.paths[J];if(X.$immutableSetter==null)continue;let Y=$==null?void 0:$.$__getValue(J);X.$immutableSetter.call(F,Y)}}i.prototype.$isValid=function(F){if(this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0)return!0;if(F==null)return!1;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((A)=>this.$__.validationError.errors[A]==null);return this.$__.validationError.errors[F]==null};i.prototype.$__reset=function(){let A=this,$=!this.$isSubdocument?this.$getAllSubdocs({useCache:!0}):null;if($&&$.length>0)for(let B of $)B.$__reset();return this.$__dirty().forEach(function(B){let J=B.value;if(J&&J[I3])J[xD]=J[I3],J[I3]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,A=this,this.$__schema.requiredPaths().forEach(function(B){A.$__.activePaths.require(B)}),this};/*!
 * ignore
 */i.prototype.$__undoReset=function(){if(this.$__.backup==null||this.$__.backup.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let A of this.$__dirty()){let $=A.value;if($&&$[I3]&&$[xD])$[I3]=$[xD]}if(!this.$isSubdocument)for(let A of this.$getAllSubdocs())A.$__undoReset()};i.prototype.$__dirty=function(){let F=this,A=this.$__.activePaths.map("modify",function(J){return{path:J,value:F.$__getValue(J),schema:F.$__path(J)}});A=A.concat(this.$__.activePaths.map("default",function(J){if(J==="_id"||F.$__getValue(J)==null)return;return{path:J,value:F.$__getValue(J),schema:F.$__path(J)}}));let $=new Map(A.filter((J)=>J!=null).map((J)=>[J.path,J.value])),B=[];return A.forEach(function(J){if(!J)return;let X=null,Y=mO(J.path);for(let D=0;D<Y.length-1;D++)if($.has(Y[D])){X=$.get(Y[D]);break}if(X==null)B.push(J);else if(X!=null&&X[I3]!=null&&X.hasAtomics())X[I3]={},X[I3].$set=X}),B};i.prototype.$__setSchema=function(F){_90(F.tree,this,void 0,F.options);for(let A of Object.keys(F.virtuals))F.virtuals[A]._applyDefaultGetters();if(F.path("schema")==null)this.schema=F;this.$__schema=F,this[o90]=F};i.prototype.$__getArrayPathsToValidate=function(){return pH||(pH=xF()),this.$__.activePaths.map("init","modify",function(F){return this.$__getValue(F)}.bind(this)).filter(function(F){return F&&Array.isArray(F)&&_1.isMongooseDocumentArray(F)&&F.length}).reduce(function(F,A){return F.concat(A)},[]).filter(function(F){return F})};i.prototype.$getAllSubdocs=function(F){if(F?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;pH||(pH=xF()),fD=fD||VB();let A=[];function $(B){let J=[];for(let{model:X}of B.$__schema.childSchemas){let Y=B.$__getValue(X.path);if(Y==null)continue;if(Y.$__)J.push(Y);if(Array.isArray(Y)){for(let D of Y)if(D!=null&&D.$__)J.push(D)}if(Y instanceof Map){for(let D of Y.values())if(D!=null&&D.$__)J.push(D)}}for(let X of J)$(X);A.push(...J)}if($(this),this.$__.saveOptions)this.$__.saveOptions.__subdocs=A;return A};/*!
 * Runs queued functions
 */function W20(F){let A=F.$__schema&&F.$__schema.callQueue;if(!A.length)return;for(let $ of A)if($[0]!=="pre"&&$[0]!=="post"&&$[0]!=="on")F[$[0]].apply(F,$[1])}/*!
 * ignore
 */i.prototype.$__handleReject=function(A){if(this.$listeners("error").length)this.$emit("error",A);else if(this.constructor.listeners&&this.constructor.listeners("error").length)this.constructor.emit("error",A)};i.prototype.$toObject=function(F,A){let $=this.$__schema._defaultToObjectOptions(A),B=this.$__hasOnlyPrimitiveValues();F=_1.isPOJO(F)?{...F}:{},F._calledWithOptions=F._calledWithOptions||{...F};let J;if(F._calledWithOptions.minimize!=null)J=F.minimize;else if(this.$__schemaTypeOptions?.minimize!=null)J=this.$__schemaTypeOptions.minimize;else if($!=null&&$.minimize!=null)J=$.minimize;else J=this.$__schema.options.minimize;if(F.minimize=J,!B)F._seen=F._seen||new Map;let X=F._calledWithOptions.depopulate??$?.depopulate??F.depopulate??!1;if(X&&F._isNested&&this.$__.wasPopulated)return M2(this.$__.wasPopulated.value||this._doc._id,F);if(X)F.depopulate=!0;if($!=null){for(let H of Object.keys($))if(F[H]==null)F[H]=$[H]}F._isNested=!0,F.json=A,F.minimize=J;let Y=F._parentOptions;F._parentOptions=this.$isSubdocument?F:null;let D=F._calledWithOptions.schemaFieldsOnly??F.schemaFieldsOnly??$.schemaFieldsOnly??!1,G;if(B&&!F.flattenObjectIds)G=this.$__toObjectShallow(D);else if(D){G={};for(let H of Object.keys(this.$__schema.paths)){let K=this.$__getValue(H);if(K===void 0)continue;let q=H,V=G;if(H.indexOf(".")!==-1){let E=H.split(".");q=E[E.length-1];for(let L=0;L<E.length-1;++L)V[E[L]]=V[E[L]]??{},V=V[E[L]]}if(K===null){V[q]=null;continue}V[q]=M2(K,F)}}else G=M2(this._doc,F)||{};let Z=F._calledWithOptions.getters??F.getters??$.getters??!1;if(Z){if(H20(this,G),F.minimize)G=p90(G)||{}}let U=F._calledWithOptions.virtuals??$.virtuals??Y?.virtuals??void 0;if(U||Z&&U!==!1)dO(this,G,F,F);if(F.versionKey===!1&&this.$__schema.options.versionKey)delete G[this.$__schema.options.versionKey];let z=F._calledWithOptions.transform??!0,W=void 0;if(z===!0)W=$.transform;else if(typeof z==="function")W=z;if(z)K20(this,G);if(F.useProjection)q20(this,G);if(typeof W==="function"){let H=W(this,G,F);if(typeof H<"u")G=H}return G};/*!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
 */i.prototype.$__toObjectShallow=function(A){let $={};if(this._doc!=null){let B=A?Object.keys(this.$__schema.paths):Object.keys(this._doc);for(let J of B){let X=this._doc[J];if(X instanceof Date)$[J]=new Date(X);else if(X!==void 0)$[J]=X}}return $};i.prototype.toObject=function(F){return this.$toObject(F)};/*!
 * Applies virtuals properties to `json`.
 */function dO(F,A,$,B){let J=F.$__schema,X=J.virtuals,Y=Object.keys(X),D=Y.length,G=D,Z,U,z=F._doc,W,H=typeof(B&&B.aliases)==="boolean"?B.aliases:!0;$=$||{};let K=null;if(Array.isArray($.virtuals))K=new Set($.virtuals);else if($.virtuals&&$.virtuals.pathsToSkip){K=new Set(Y);for(let q=0;q<$.virtuals.pathsToSkip.length;q++)if(K.has($.virtuals.pathsToSkip[q]))K.delete($.virtuals.pathsToSkip[q])}if(!z)return A;for(D=0;D<G;++D){if(Z=Y[D],K!=null&&!K.has(Z))continue;if(!H&&J.aliases.hasOwnProperty(Z))continue;if(U=Z,$.path!=null){if(!Z.startsWith($.path+"."))continue;U=Z.substring($.path.length+1)}if(U.indexOf(".")===-1&&U===Z){if(W=X[Z].applyGetters(void 0,F),W===void 0)continue;W=M2(W,$),A[U]=W;continue}let q=U.split(".");if(W=M2(F.get(Z),$),W===void 0)continue;let V=q.length;z=A;for(let E=0;E<V-1;++E)z[q[E]]=z[q[E]]||{},z=z[q[E]];z[q[V-1]]=W}return A}function H20(F,A){let $=F.$__schema,B=Object.keys($.paths),J=B.length,X,Y=F._doc,D;if(!Y)return A;while(J--){X=B[J];let G=X.split("."),Z=G.length,U=Z-1,z=A,W;if(Y=F._doc,!F.$__isSelected(X))continue;for(let H=0;H<Z;++H){if(W=G[H],D=Y[W],z!=null&&typeof z!=="object")break;else if(H===U){if(z[W]=$.paths[X].applyGetters(z[W],F),Array.isArray(z[W])&&$.paths[X].$embeddedSchemaType)for(let K=0;K<z[W].length;++K)z[W][K]=$.paths[X].$embeddedSchemaType.applyGetters(z[W][K],F)}else if(D==null){if(W in Y)z[W]=D;break}else z=z[W]||(z[W]={});Y=D}}return A}function K20(F,A){let $=F.$__schema,B=Object.keys($.paths||{});if(!F._doc)return A;for(let X of B){let Y=$.paths[X],D=Y.options.transform??Y.constructor?.defaultOptions?.transform,G=Y.$embeddedSchemaType?.options?.transform??Y.$embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof D==="function"){let Z=F.$get(X);if(Z===void 0)continue;let U=D.call(F,Z);iA1(X,U),_1.setValue(X,U,A)}else if(typeof G==="function"){let Z=F.$get(X);if(Z===void 0)continue;let U=[].concat(Z);for(let z=0;z<U.length;++z){let W=G.call(F,U[z]);U[z]=W,iA1(X,W)}A[X]=U}}return A}function iA1(F,A){if(n90(A))throw Error("`transform` function must be synchronous, but the transform on path `"+F+"` returned a promise.")}/*!
 * ignore
 */function q20(F,A){let $=F.$__schema,B=Object.keys($.paths||{});if(!F._doc)return A;let X=F.$__.selected;if(X===void 0)X={},a90.applyPaths(X,$);if(X==null||Object.keys(X).length===0)return A;for(let Y of B)if(X[Y]!=null&&!X[Y])delete A[Y];return A}i.prototype.toJSON=function(F){return this.$toObject(F,!0)};/*!
 * ignore
 */i.prototype.ownerDocument=function(){return this};i.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};i.prototype.$parent=i.prototype.parent;i.prototype.inspect=function(F){let A=_1.isPOJO(F),$;if(A)$=F,$.minimize=!1;let B=arguments.length>0?this.toObject($):this.toObject();if(B==null)return"MongooseDocument { "+B+" }";return B};if(hO.custom)i.prototype[hO.custom]=i.prototype.inspect;i.prototype.toString=function(){let F=this.inspect();if(typeof F==="string")return F;return hO(F)};i.prototype.equals=function(F){if(!F)return!1;let A=this.$__getValue("_id"),$=F.$__!=null?F.$__getValue("_id"):F;if(!A&&!$)return lH(this,F);return A&&A.equals?A.equals($):A===$};i.prototype.populate=async function(){let A={},$=[...arguments];if(typeof $[$.length-1]==="function")throw new m3("Document.prototype.populate() no longer accepts a callback");if($.length!==0){let X=_1.populate.apply(null,$);for(let Y of X)A[Y.path]=Y}let B=_1.object.vals(A),J=this.constructor;if(this.$__isNested){J=this.$__[A20].constructor;let X=this.$__.nestedPath;B.forEach(function(Y){Y.path=X+"."+Y.path})}if(this.$session()!=null){let X=this.$session();B.forEach((Y)=>{if(Y.options==null){Y.options={session:X};return}if(!("session"in Y.options))Y.options.session=X})}return B.forEach((X)=>{X._localModel=J}),J.populate(this,B)};i.prototype.$getPopulatedDocs=function(){let A=[];if(this.$__.populated!=null)A=A.concat(Object.keys(this.$__.populated));let $=[];for(let B of A){let J=this.$get(B);if(Array.isArray(J))$=$.concat(J);else if(J instanceof i)$.push(J)}return $};i.prototype.populated=function(F,A,$){if(A==null||A===!0){if(!this.$__.populated)return;if(typeof F!=="string")return;let J=F.endsWith(".$*")?F.replace(/\.\$\*$/,""):F,X=this.$__.populated[J];if(X)return A===!0?X:X.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[F]={value:A,options:$};let B=F.split(".");for(let J=0;J<B.length-1;++J){let X=B.slice(0,J+1).join("."),Y=this.$get(X);if(Y!=null&&Y.$__!=null&&this.$populated(X)){let D=B.slice(J+1).join(".");Y.$populated(D,A,$);break}}return A};i.prototype.$populated=i.prototype.populated;i.prototype.$assertPopulated=function(A,$){if(Array.isArray(A))return A.forEach((B)=>this.$assertPopulated(B,$)),this;if(arguments.length>1)this.$set($);if(!this.$populated(A))throw new m3(`Expected path "${A}" to be populated`);return this};i.prototype.depopulate=function(F){if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");let A,$=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],B=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let X of $)delete this.$$populatedVirtuals[X],delete this._doc[X],delete B[X];let J=Object.keys(B);for(let X of J){if(A=this.$populated(X),!A)continue;if(delete B[X],Array.isArray(A)){let Y=_1.getValue(X,this._doc);if(Y.isMongooseArray){let D=Y.__array;for(let G=0;G<D.length;++G){let Z=D[G];if(Z==null)continue;D[G]=Z instanceof i?Z._doc._id:Z._id}}else _1.setValue(X,A,this._doc)}else _1.setValue(X,A,this._doc)}return this}for(let J of F)if(A=this.$populated(J),delete B[J],$.indexOf(J)!==-1)delete this.$$populatedVirtuals[J],delete this._doc[J];else if(A)if(Array.isArray(A)){let X=_1.getValue(J,this._doc);if(X.isMongooseArray){let Y=X.__array;for(let D=0;D<Y.length;++D){let G=Y[D];if(G==null)continue;Y[D]=G instanceof i?G._doc._id:G._id}}else _1.setValue(J,A,this._doc)}else _1.setValue(J,A,this._doc);return this};i.prototype.$__fullPath=function(F){return F||""};i.prototype.getChanges=function(){let F=this.$__delta();return F?F[1]:{}};i.prototype.$__delta=function(){let A=this.$__dirty(),$=this.$__schema.options.optimisticConcurrency;if($)if(Array.isArray($)){let G=new Set($);if(this.modifiedPaths().find((U)=>G.has(U)))this.$__.version=A.length?3:1}else this.$__.version=A.length?3:1;if(!A.length&&this.$__.version!==3)return;let B={},J={},X=A.length,Y=[],D=0;if(B._id=this._doc._id,(B&&B._id&&B._id.$__||null)!=null)B._id=B._id.toObject({transform:!1,depopulate:!0});for(;D<X;++D){let G=A[D],Z=G.value,U=Q20(this,G.path,Z);if(U){Y.push(U);continue}if(!this.$populated(G.path,!0)&&this.$__.selected){let W=G.path.split("."),H=W[0];if(this.$__.selected[H]&&this.$__.selected[H].$elemMatch)if(W.length>1&&W[1]==0&&typeof B[H]>"u")B[H]=this.$__.selected[H],W[1]="$",G.path=W.join(".");else{Y.push(G.path);continue}}if(this.$isDefault(G.path)&&this.$__.selected){if(G.path.indexOf(".")===-1&&cA1(this.$__.selected,G.path))continue;if(mO(G.path).find((H)=>cA1(this.$__.isSelected,H)))continue}if(Y.length)continue;if(Z===void 0)Y5(this,B,J,G,1,"$unset");else if(Z===null)Y5(this,B,J,G,null);else if(_1.isMongooseArray(Z)&&Z.$path()&&Z[I3])V20(this,B,J,G,Z);else if(Z[S90.pathSymbol]&&Buffer.isBuffer(Z))Z=Z.toObject(),Y5(this,B,J,G,Z);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[G.path]!=null){let W=this.$__.primitiveAtomics[G.path],H=v90(W);Y5(this,B,J,G,W[H],H)}else Z=M2(Z,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),Y5(this,B,J,G,Z)}if(Y.length)return new k90(Y);if(this.$__.version)this.$__version(B,J);if(Object.keys(J).length===0)return[B,null];return[B,J]};function Q20(F,A,$){let B=F.$populated(A,!0);if(!B&&F.$__.selected){let X=A.split(".")[0];if(F.$__.selected[X+".$"])return X}if(!(B&&_1.isMongooseArray($)))return;if(B.options.match||B.options.options&&_1.object.hasOwnProperty(B.options.options,"limit")||B.options.options&&B.options.options.skip||B.options.select&&(B.options.select._id===0||/\s?-_id\s?/.test(B.options.select))){let X=$[I3];if(Object.keys(X).length===0||X.$set||X.$pop)return A}}function Y5(F,A,$,B,J,X){if(X||(X="$set"),!$[X])$[X]={};if($[X][B.path]=J,F.$__schema.options.versionKey===!1)return;if(E20(F,B.path))return;if((3&F.$__.version)===3)return;if(F.$__schema.options.optimisticConcurrency)return;switch(X){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(X==="$push"||X==="$addToSet"||X==="$pullAll"||X==="$pull")if(/\.\d+\.|\.\d+$/.test(B.path))F.$__.version=3;else F.$__.version=2;else if(/^\$p/.test(X))F.$__.version=3;else if(Array.isArray(J))F.$__.version=3;else if(/\.\d+\.|\.\d+$/.test(B.path))F.$__.version=1}function V20(F,A,$,B,J){if($.$set&&$.$set[B.path])return;if(typeof J.$__getAtomics==="function"){J.$__getAtomics().forEach(function(z){let W=z[0],H=z[1];Y5(F,A,$,B,H,W)});return}let X=J[I3],Y=Object.keys(X),D=Y.length,G,Z;if(D===0){if(_1.isMongooseObject(J))J=J.toObject({depopulate:1,_isNested:!0});else if(J.valueOf)J=J.valueOf();return Y5(F,A,$,B,J)}function U(z){return _1.isMongooseObject(z)?z.toObject({depopulate:1,_isNested:!0}):z}while(D--){if(Z=Y[D],G=X[Z],_1.isMongooseObject(G))G=G.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray(G))G=G.map(U);else if(G.valueOf)G=G.valueOf();if(Z==="$addToSet")G={$each:G};Y5(F,A,$,B,G,Z)}}function E20(F,A){let $=F.$__schema.options.skipVersioning;if(!$)return!1;return A=A.replace(/\.\d+\./,"."),$[A]}i.prototype.$clone=function(){let A=new this.constructor;if(A.$isNew=this.$isNew,this._doc)A._doc=M2(this._doc,{retainDocuments:!0});if(this.$__){let B=new this.$__.constructor;for(let J of Object.getOwnPropertyNames(this.$__)){if(J==="activePaths")continue;B[J]=M2(this.$__[J])}Object.assign(B.activePaths,M2({...this.$__.activePaths})),A.$__=B}return A};i.prototype.$createModifiedPathsSnapshot=function(){let A=new WeakMap;if(!this.$isSubdocument){let $=this.$getAllSubdocs();for(let B of $)A.set(B,B.$__.activePaths.clone())}return new u90(A,this.$__.activePaths.clone(),this.$__.version)};i.prototype.$restoreModifiedPathsSnapshot=function(A){if(this.$__.activePaths=A.activePaths.clone(),this.$__.version=A.version,!this.$isSubdocument){let $=this.$getAllSubdocs();for(let B of $)if(A.subdocSnapshot.has(B))B.$__.activePaths=A.subdocSnapshot.get(B)}return this};i.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let A=this.$getAllSubdocs();for(let $ of A)$.$clearModifiedPaths()}return this};/*!
 * Check if the given document only has primitive values
 */i.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every((A)=>{return A==null||typeof A!=="object"||_1.isNativeObject(A)&&!Array.isArray(A)||dA1(A,"ObjectId")||dA1(A,"Decimal128")}))};/*!
 * Module exports.
 */i.VERSION_WHERE=1;i.VERSION_INC=2;i.VERSION_ALL=3;i.ValidationError=iH;B$1.exports=$$1=i});var P1=Q((f20)=>{/*!
 * Module dependencies.
 */var L20=x4().UUID,w20=ZO(),Z$1=V9(),I20=x7(),U$1=zO(),lO=Z6(),C20=x9(),N20=$5(),z$1=HH(),W$1=XF1(),G5=M4(),P20=JB(),R20=Ok(),bD=ND(),j20=IH(),M20=CH(),gD=jF(),{trustedSymbol:LB}=XB(),cO;f20.specialProperties=gD;f20.isMongooseArray=z$1.isMongooseArray;f20.isMongooseDocumentArray=W$1.isMongooseDocumentArray;f20.registerMongooseArray=z$1.registerMongooseArray;f20.registerMongooseDocumentArray=W$1.registerMongooseDocumentArray;var pO=/\s/,iO=/\s+/;f20.toCollectionName=function(F,A){if(F==="system.profile")return F;if(F==="system.indexes")return F;if(typeof A==="function"){if(typeof F!=="string")throw TypeError("Collection name must be a string");if(F.length===0)throw TypeError("Collection name cannot be empty");return A(F)}return F};f20.deepEqual=function F(A,$){if(A===$)return!0;if(typeof A!=="object"||typeof $!=="object")return A===$;if(A instanceof Date&&$ instanceof Date)return A.getTime()===$.getTime();if(G5(A,"ObjectId")&&G5($,"ObjectId")||G5(A,"Decimal128")&&G5($,"Decimal128"))return A.toString()===$.toString();if(A instanceof RegExp&&$ instanceof RegExp)return A.source===$.source&&A.ignoreCase===$.ignoreCase&&A.multiline===$.multiline&&A.global===$.global&&A.dotAll===$.dotAll&&A.unicode===$.unicode&&A.sticky===$.sticky&&A.hasIndices===$.hasIndices;if(A==null||$==null)return!1;if(A.prototype!==$.prototype)return!1;if(A instanceof Map||$ instanceof Map){if(!(A instanceof Map)||!($ instanceof Map))return!1;return F(Array.from(A.keys()),Array.from($.keys()))&&F(Array.from(A.values()),Array.from($.values()))}if(A instanceof Number&&$ instanceof Number)return A.valueOf()===$.valueOf();if(Buffer.isBuffer(A))return f20.buffer.areEqual(A,$);if(Array.isArray(A)||Array.isArray($)){if(!Array.isArray(A)||!Array.isArray($))return!1;let Y=A.length;if(Y!==$.length)return!1;for(let D=0;D<Y;++D)if(!F(A[D],$[D]))return!1;return!0}if(A.$__!=null)A=A._doc;else if(bD(A))A=A.toObject();if($.$__!=null)$=$._doc;else if(bD($))$=$.toObject();let B=Object.keys(A),J=Object.keys($),X=B.length;if(X!==J.length)return!1;for(let Y=X-1;Y>=0;Y--)if(B[Y]!==J[Y])return!1;for(let Y of B)if(!F(A[Y],$[Y]))return!1;return!0};f20.last=function(F){if(F.length>0)return F[F.length-1];return};/*!
 * ignore
 */f20.promiseOrCallback=j20;/*!
 * ignore
 */f20.cloneArrays=function(A){if(!Array.isArray(A))return A;return A.map(($)=>f20.cloneArrays($))};/*!
 * ignore
 */f20.omit=function(A,$){if($==null)return Object.assign({},A);if(!Array.isArray($))$=[$];let B=Object.assign({},A);for(let J of $)delete B[J];return B};f20.clonePOJOsAndArrays=function(A){if(A==null)return A;if(A.$__!=null)return A;if(P20(A)){A={...A};for(let $ of Object.keys(A))A[$]=f20.clonePOJOsAndArrays(A[$]);return A}if(Array.isArray(A)){A=[...A];for(let $=0;$<A.length;++$)A[$]=f20.clonePOJOsAndArrays(A[$]);return A}return A};f20.merge=function F(A,$,B,J){B=B||{};let X=Object.keys($),Y=0,D=X.length,G;if($[LB])A[LB]=$[LB];J=J||"";let Z=B.omitNested||{};while(Y<D){if(G=X[Y++],B.omit&&B.omit[G])continue;if(Z[J])continue;if(gD.has(G))continue;if(A[G]==null)A[G]=f20.clonePOJOsAndArrays($[G]);else if(f20.isObject($[G])){if(!f20.isObject(A[G]))A[G]={};if($[G]!=null){if(B.isDiscriminatorSchemaMerge&&($[G].$isSingleNested&&A[G].$isMongooseDocumentArray)||$[G].$isMongooseDocumentArray&&A[G].$isSingleNested)continue;else if($[G].instanceOfSchema){if(A[G].instanceOfSchema)M20(A[G],$[G].clone(),B.isDiscriminatorSchemaMerge);else A[G]=$[G].clone();continue}else if(G5($[G],"ObjectId")){A[G]=new I20($[G]);continue}}F(A[G],$[G],B,J?J+"."+G:G)}else if(B.overwrite)A[G]=$[G]}return A};f20.toObject=function F(A){cO||(cO=d9());let $;if(A==null)return A;if(A instanceof cO)return A.toObject();if(Array.isArray(A)){$=[];for(let B of A)$.push(F(B));return $}if(f20.isPOJO(A)){if($={},A[LB])$[LB]=A[LB];for(let B of Object.keys(A)){if(gD.has(B))continue;$[B]=F(A[B])}return $}return A};f20.isObject=N20;f20.isPOJO=JB();f20.isNonBuiltinObject=function(A){return typeof A==="object"&&!f20.isNativeObject(A)&&!f20.isMongooseType(A)&&!(A instanceof L20)&&A!=null};f20.isNativeObject=function(F){return Array.isArray(F)||F instanceof Date||F instanceof Boolean||F instanceof Number||F instanceof String};f20.isEmptyObject=function(F){return F!=null&&typeof F==="object"&&Object.keys(F).length===0};f20.hasKey=function(A,$){let B=Object.keys(A);for(let J of B){if(J===$)return!0;if(f20.isPOJO(A[J])&&f20.hasKey(A[J],$))return!0}return!1};f20.tick=function(A){if(typeof A!=="function")return;return function(){try{A.apply(this,arguments)}catch($){C20(function(){throw $})}}};f20.isMongooseType=function(F){return G5(F,"ObjectId")||G5(F,"Decimal128")||F instanceof Buffer};f20.isMongooseObject=bD;f20.expires=function(A){if(!(A&&A.constructor.name==="Object"))return;if(!("expires"in A))return;A.expireAfterSeconds=typeof A.expires!=="string"?A.expires:Math.round(w20(A.expires)/1000),delete A.expires};f20.populate=function(A,$,B,J,X,Y,D,G){let Z=null;if(arguments.length===1){if(A instanceof U$1)return A._docs={},A._childDocs=[],[A];if(Array.isArray(A))return U(A).map((W)=>f20.populate(W)[0]);if(f20.isObject(A))Z=Object.assign({},A);else Z={path:A}}else if(typeof B==="object")Z={path:A,select:$,match:B,options:J};else Z={path:A,select:$,model:B,match:J,options:X,populate:Y,justOne:D,count:G};if(typeof Z.path!=="string"&&!(Array.isArray(Z.path)&&Z.path.every((z)=>typeof z==="string")))throw TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof A+"`");return T20(Z);function U(z){let W=[];return z.forEach(function(H){if(pO.test(H.path))H.path.split(iO).forEach(function(q){let V=Object.assign({},H);V.path=q,W.push(V)});else W.push(H)}),W}};function T20(F){if(Array.isArray(F.populate)){let B=[];F.populate.forEach(function(J){if(pO.test(J.path)){let X=Object.assign({},J);X.path.split(iO).forEach(function(D){X.path=D,B.push(f20.populate(X)[0])})}else B.push(f20.populate(J)[0])}),F.populate=f20.populate(B)}else if(F.populate!=null&&typeof F.populate==="object")F.populate=f20.populate(F.populate);let A=[],$=pO.test(F.path)?F.path.split(iO):Array.isArray(F.path)?F.path:[F.path];if(F.options!=null)F.options=lO(F.options);for(let B of $)A.push(new U$1(Object.assign({},F,{path:B})));return A}f20.getValue=function(F,A,$){return Z$1.get(F,A,O20,$)};/*!
 * ignore
 */var k20=Object.freeze({getters:!1});function O20(F,A){if(A==="$*"&&F instanceof Map)return F;let $=F?._doc||F;if($!=null&&$.isMongooseArrayProxy)$=$.__array;return $ instanceof Map?$.get(A,k20):$[A]}f20.setValue=function(F,A,$,B,J){Z$1.set(F,A,$,"_doc",B,J)};f20.object={};f20.object.vals=function(A){let $=Object.keys(A),B=$.length,J=[];while(B--)J.push(A[$[B]]);return J};var S20=Object.prototype.hasOwnProperty;f20.object.hasOwnProperty=function(F,A){return S20.call(F,A)};f20.isNullOrUndefined=function(F){return F===null||F===void 0};/*!
 * ignore
 */f20.array={};f20.array.flatten=function F(A,$,B){return B||(B=[]),A.forEach(function(J){if(Array.isArray(J))F(J,$,B);else if(!$||$(J))B.push(J)}),B};/*!
 * ignore
 */var u20=Object.prototype.hasOwnProperty;f20.hasUserDefinedProperty=function(F,A){if(F==null)return!1;if(Array.isArray(A)){for(let $ of A)if(f20.hasUserDefinedProperty(F,$))return!0;return!1}if(u20.call(F,A))return!0;if(typeof F==="object"&&A in F){let $=F[A];return $!==Object.prototype[A]&&$!==Array.prototype[A]}return!1};/*!
 * ignore
 */var J$1=Math.pow(2,32)-1;f20.isArrayIndex=function(F){if(typeof F==="number")return F>=0&&F<=J$1;if(typeof F==="string"){if(!/^\d+$/.test(F))return!1;return F=+F,F>=0&&F<=J$1}return!1};f20.array.unique=function(F){let A=new Set,$=new Set,B=[];for(let J of F)if(typeof J==="number"||typeof J==="string"||J==null){if(A.has(J))continue;B.push(J),A.add(J)}else if(G5(J,"ObjectId")){if($.has(J.toString()))continue;B.push(J),$.add(J.toString())}else B.push(J);return B};f20.buffer={};f20.buffer.areEqual=function(F,A){if(!Buffer.isBuffer(F))return!1;if(!Buffer.isBuffer(A))return!1;if(F.length!==A.length)return!1;for(let $=0,B=F.length;$<B;++$)if(F[$]!==A[$])return!1;return!0};f20.getFunctionName=R20;f20.decorate=function(F,A){for(let $ in A){if(gD.has($))continue;F[$]=A[$]}};f20.mergeClone=function(F,A){if(bD(A))A=A.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});let $=Object.keys(A),B=$.length,J=0,X;while(J<B){if(X=$[J++],gD.has(X))continue;if(typeof F[X]>"u")F[X]=lO(A[X],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let Y=A[X];if(Y!=null&&Y.valueOf&&!(Y instanceof Date))Y=Y.valueOf();if(f20.isObject(Y)){let D=Y;if(bD(Y)&&!Y.isMongooseBuffer)D=D.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(Y.isMongooseBuffer)D=Buffer.from(D);f20.mergeClone(F[X],D)}else F[X]=lO(Y,{flattenDecimals:!1})}}};f20.each=function(F,A){for(let $ of F)A($)};f20.renameObjKey=function(F,A,$){return Object.keys(F).reduce((J,X)=>{if(X===A)J[$]=F[A];else J[X]=F[X];return J},{})};/*!
 * ignore
 */f20.getOption=function(F){let A=Array.prototype.slice.call(arguments,1);for(let $ of A){if($==null)continue;if($[F]!=null)return $[F]}return null};/*!
 * ignore
 */f20.noop=function(){};f20.errorToPOJO=function(A){if(!(A instanceof Error))throw Error("`error` must be `instanceof Error`.");let B={};for(let J of Object.getOwnPropertyNames(A))B[J]=A[J];return B};/*!
 * ignore
 */f20.warn=function(A){return process.emitWarning(A,{code:"MONGOOSE"})};f20.injectTimestampsOption=function(A,$){if($==null)return;A.timestamps=$}});var Q6=Q((sH,C$1)=>{/*!
 * Module dependencies.
 */var _D=_3(),w$1=v3(),W70=LH(),H70=GO(),tH=Z6(),rO=d51(),K70=l51(),tO=i51(),q$1=x9(),q70=q1().schemaTypeSymbol,bF=P1(),I$1=q1().validatorErrorSymbol,Q70=q1().documentIsModified,Q$1=q1().populateModelSymbol,sO=_D.CastError,oO=_D.ValidatorError,V70={_skipMarkModified:!0};function f1(F,A,$,B){this[q70]=!0,this.path=F,this.instance=$,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),A=A||{};let J=this.constructor.defaultOptions||{},X=Object.keys(J);for(let G of X)if(G==="validate")this.validate(J.validate);else if(J.hasOwnProperty(G)&&!Object.prototype.hasOwnProperty.call(A,G))A[G]=J[G];if(A.select==null)delete A.select;let Y=this.OptionsConstructor||w$1;if(this.options=new Y(A),this.parentSchema=B,this._index=null,bF.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,rO(this);let D=Object.keys(this.options);for(let G of D){if(G==="cast"){if(Array.isArray(this.options[G]))this.castFunction.apply(this,this.options[G]);else this.castFunction(this.options[G]);continue}if(bF.hasUserDefinedProperty(this.options,G)&&typeof this[G]==="function"){if(G==="index"&&this._index){if(A.index===!1){let z=this._index;if(typeof z==="object"&&z!=null){if(z.unique)throw Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(z.sparse)throw Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let Z=A[G];if(G==="default"){this.default(Z);continue}let U=Array.isArray(Z)?Z:[Z];this[G].apply(this,U)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}f1.prototype.OptionsConstructor=w$1;f1.prototype.path;f1.prototype.toJSON=function(){let A={...this};return delete A.parentSchema,A};f1.prototype.validators;f1.prototype.isRequired;f1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};f1.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=($)=>$;return this._cast=A,this._cast};f1.prototype.castFunction=function(A,$){if(arguments.length===0)return this._castFunction;if(A===!1)A=this.constructor._defaultCaster||((B)=>B);if(typeof A==="string")return this._castErrorMessage=A,this._castFunction;if(A!=null)this._castFunction=A;if($!=null)this._castErrorMessage=$;return this._castFunction};f1.prototype.cast=function(){throw Error("Base SchemaType class does not implement a `cast()` function")};f1.set=function(A,$){if(!this.hasOwnProperty("defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[A]=$};f1.get=function(F){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(F)};f1.prototype.default=function(F){if(arguments.length===1){if(F===void 0){this.defaultValue=void 0;return}if(F!=null&&F.instanceOfSchema)throw new _D("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=F,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};f1.prototype.index=function(F){return this._index=F,bF.expires(this._index),this};f1.prototype.unique=function(A,$){if(this._index===!1){if(!A)return;throw Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!this.options.hasOwnProperty("index")&&A===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};if(this._index.unique=!!A,typeof $==="string")this._duplicateKeyErrorMessage=$;return this};f1.prototype.text=function(F){if(this._index===!1){if(!F)return this;throw Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=F,this};f1.prototype.sparse=function(F){if(this._index===!1){if(!F)return this;throw Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=F,this};f1.prototype.immutable=function(F){return this.$immutable=F,rO(this),this};f1.prototype.transform=function(F){return this.options.transform=F,this};f1.prototype.set=function(F){if(typeof F!=="function")throw TypeError("A setter must be a function.");return this.setters.push(F),this};f1.prototype.get=function(F){if(typeof F!=="function")throw TypeError("A getter must be a function.");return this.getters.push(F),this};f1.prototype.validateAll=function(F){for(let A=0;A<F.length;A++)this.validate(F[A]);return this};f1.prototype.validate=function(F,A,$){if(typeof F==="function"||F&&bF.getFunctionName(F.constructor)==="RegExp"){let Y;if(typeof A==="function")Y={validator:F,message:A},Y.type=$||"user defined";else if(A instanceof Object&&!$){if(Y=tO(A)?Object.assign({},A):tH(A),!Y.message)Y.message=Y.msg;Y.validator=F,Y.type=Y.type||"user defined"}else{if(A==null)A=_D.messages.general.default;if(!$)$="user defined";Y={message:A,type:$,validator:F}}return this.validators.push(Y),this}let B,J,X;for(B=0,J=arguments.length;B<J;B++){if(X=arguments[B],!bF.isPOJO(X)){let Y="Invalid validator. Received ("+typeof X+") "+X+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw Error(Y)}this.validate(X.validator,X)}return this};f1.prototype.required=function(F,A){let $={};if(arguments.length>0&&F==null)return this.validators=this.validators.filter(function(X){return X.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof F==="object")$=F,A=$.message||A,F=F.isRequired;if(F===!1)return this.validators=this.validators.filter(function(X){return X.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let B=this;if(this.isRequired=!0,this.requiredValidator=function(X){let Y=this&&this.$__&&this.$__.cachedRequired;if(Y!=null&&!this.$__isSelected(B.path)&&!this[Q70](B.path))return!0;if(Y!=null&&B.path in Y){let D=Y[B.path]?B.checkRequired(X,this):!0;return delete Y[B.path],D}else if(typeof F==="function")return F.apply(this)?B.checkRequired(X,this):!0;return B.checkRequired(X,this)},this.originalRequiredValue=F,typeof F==="string")A=F,F=void 0;let J=A||_D.messages.general.required;return this.validators.unshift(Object.assign({},$,{validator:this.requiredValidator,message:J,type:"required"})),this};f1.prototype.ref=function(F){return this.options.ref=F,this};f1.prototype.getDefault=function(F,A,$){let B;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")B=this.defaultValue.call(F);else B=this.defaultValue.call(F,F);else B=this.defaultValue;if(B!==null&&B!==void 0){if(typeof B==="object"&&(!this.options||!this.options.shared))B=tH(B);if($&&$.skipCast)return this._applySetters(B,F);let J=this.applySetters(B,F,A,void 0,V70);if(J&&!Array.isArray(J)&&J.$isSingleNested)J.$__parent=F;return J}return B};f1.prototype._applySetters=function(F,A,$,B,J){let X=F;if($)return X;let Y=this.setters;for(let D=Y.length-1;D>=0;D--)X=Y[D].call(A,X,B,this,J);return X};/*!
 * ignore
 */f1.prototype._castNullish=function(A){return A};f1.prototype.applySetters=function(F,A,$,B,J){let X=this._applySetters(F,A,$,B,J);if(X==null)return this._castNullish(X);return X=this.cast(X,A,$,B,J),X};f1.prototype.applyGetters=function(F,A){let $=F,B=this.getters,J=B.length;if(J===0)return $;for(let X=0;X<J;++X)$=B[X].call(A,$,this);return $};f1.prototype.select=function(A){return this.selected=!!A,this};f1.prototype.doValidate=function(F,A,$,B){let J=!1,X=this.path;if(typeof A!=="function")throw TypeError(`Must pass callback function to doValidate(), got ${typeof A}`);let Y=this.validators.filter((Z)=>typeof Z==="object"&&Z!==null),D=Y.length;if(!D)return A(null);for(let Z=0,U=Y.length;Z<U;++Z){if(J)break;let z=Y[Z],W=z.validator,H,K=tO(z)?Object.assign({},z):tH(z);if(K.path=B&&B.path?B.path:X,K.fullPath=this.$fullPath,K.value=F,typeof F==="string"){if(K.length=F.length,K.value.length>30)K.value=K.value.slice(0,30)+"..."}if(W instanceof RegExp){G(W.test(F),K,$);continue}if(typeof W!=="function")continue;if(F===void 0&&W!==this.requiredValidator){G(!0,K,$);continue}try{if(K.propsParameter)H=W.call($,F,K);else H=W.call($,F)}catch(q){if(H=!1,K.reason=q,q.message)K.message=q.message}if(H!=null&&typeof H.then==="function")H.then(function(q){G(q,K,$)},function(q){K.reason=q,K.message=q.message,H=!1,G(H,K,$)});else G(H,K,$)}function G(Z,U,z){if(J)return;if(Z===void 0||Z){if(--D<=0)q$1(function(){A(null)})}else J=new(U.ErrorConstructor||oO)(U,z),J[I$1]=!0,q$1(function(){A(J)})}};function V$1(F,A){if(F!==void 0&&!F){let B=new(A.ErrorConstructor||oO)(A);return B[I$1]=!0,B}}f1.prototype.doValidateSync=function(F,A,$){let B=this.path;if(!this.validators.length)return null;let X=this.validators;if(F===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")X=[this.validators[0]];else return null;let Y=null,D=0,G=X.length;for(D=0;D<G;++D){let Z=X[D];if(Z===null||typeof Z!=="object")continue;let U=Z.validator,z=tO(Z)?Object.assign({},Z):tH(Z);if(z.path=$&&$.path?$.path:B,z.fullPath=this.$fullPath,z.value=F,typeof F==="string"){if(z.length=F.length,z.value.length>30)z.value=z.value.slice(0,30)+"..."}let W=!1;if(K70(U))continue;if(U instanceof RegExp){Y=V$1(U.test(F),z);continue}if(typeof U!=="function")continue;try{if(z.propsParameter)W=U.call(A,F,z);else W=U.call(A,F)}catch(H){W=!1,z.reason=H}if(W!=null&&typeof W.then==="function")continue;if(Y=V$1(W,z),Y)break}return Y};f1._isRef=function(F,A,$,B){let J=B&&F.options&&(F.options.ref||F.options.refPath);if(!J&&$&&$.$__!=null){let X=$.$__fullPath(F.path,!0),Y=$.ownerDocument();J=X!=null&&Y.$populated(X)||$.$populated(F.path)}if(J){if(A==null)return!0;if(!Buffer.isBuffer(A)&&A._bsontype!=="Binary"&&bF.isObject(A))return!0;return B}return!1};/*!
 * ignore
 */f1.prototype._castRef=function(A,$,B,J){if(A==null)return A;if(A.$__!=null)return A.$__.wasPopulated=A.$__.wasPopulated||{value:A._doc._id},A;if(Buffer.isBuffer(A)||!bF.isObject(A)){if(B)return A;throw new sO(this.instance,A,this.path,null,this)}let X=$.$__fullPath(this.path,!0),D=$.ownerDocument().$populated(X,!0),G=A;if(!$.$__.populated||!$.$__.populated[X]||!$.$__.populated[X].options||!$.$__.populated[X].options.options||!$.$__.populated[X].options.options.lean){let Z=D?D.options[Q$1]:$.constructor.db.model(this.options.ref);G=Z.hydrate(A,null,J),G.$__.wasPopulated={value:G._doc._id,options:{[Q$1]:Z}}}return G};/*!
 * ignore
 */function E$1(F,A){return this.castForQuery(null,F,A)}/*!
 * ignore
 */function E70(F,A){let $=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(B){return $.castForQuery(null,B,A)})}function L$1(F,A){let $=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(B){if(Array.isArray(B)&&B.length===0)return B;return $.castForQuery(null,B,A)})}f1.prototype.$conditionalHandlers={$all:E70,$eq:E$1,$in:L$1,$ne:E$1,$nin:L$1,$exists:W70,$type:H70};f1.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],!B)throw Error("Can't use "+F);return B.call(this,A,$)}try{return this.applySetters(A,$)}catch(J){if(J instanceof sO&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};f1.checkRequired=function(F){if(arguments.length!==0)this._checkRequired=F;return this._checkRequired};f1.prototype.checkRequired=function(F){return F!=null};f1.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,F,this.instance,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)A.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)A.$immutable=this.$immutable,rO(A);if(this._index!==void 0)A._index=this._index;if(this.selected!==void 0)A.selected=this.selected;if(this.isRequired!==void 0)A.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)A.originalRequiredValue=this.originalRequiredValue;return A.getters=this.getters.slice(),A.setters=this.setters.slice(),A};f1.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType};/*!
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 */f1.prototype._duplicateKeyErrorMessage=null;f1.prototype.toJSONSchema=function(A){throw Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};f1.prototype.autoEncryptionType=function(){return null};/*!
 * Module exports.
 */C$1.exports=sH=f1;sH.CastError=sO;sH.ValidatorError=oO});var eO=Q((fP0,N$1)=>{var T2=Q9();class E9{constructor(F){if(Object.assign(this,F),F!=null&&F.options!=null)this.options=Object.assign({},F.options)}}Object.defineProperty(E9.prototype,"ref",T2);Object.defineProperty(E9.prototype,"refPath",T2);Object.defineProperty(E9.prototype,"localField",T2);Object.defineProperty(E9.prototype,"foreignField",T2);Object.defineProperty(E9.prototype,"justOne",T2);Object.defineProperty(E9.prototype,"count",T2);Object.defineProperty(E9.prototype,"match",T2);Object.defineProperty(E9.prototype,"options",T2);Object.defineProperty(E9.prototype,"skip",T2);Object.defineProperty(E9.prototype,"limit",T2);Object.defineProperty(E9.prototype,"perDocumentLimit",T2);N$1.exports=E9});var oH=Q((xP0,P$1)=>{P$1.exports=function(A,$,B){if(A==null)return A;if(A._doc!=null)A=A._doc;if(arguments.length>=3){if(typeof A!=="object")return;if(B===void 0)return;if(A instanceof Map)A.set($,B);else A[$]=B;return B}if($==="$*")return A instanceof Map?Array.from(A.values()):Object.keys(A).map((J)=>A[J]);if(A instanceof Map)return A.get($);return A[$]}});var FS=Q((bP0,T$1)=>{var L70=d1(),w70=wO(),R$1=oH(),j$1=V9(),I70=x("util"),C70=P1(),M$1=/(\.\d+$|\.\d+\.)/g;T$1.exports=function(A,$,B,J,X){if(A==null)return[];if(typeof A==="string"&&X!=null&&w70(X,A))throw new L70("refPath `"+A+"` must not be excluded in projection, got "+I70.inspect(X));if(M$1.test(B)){let G=B.split(M$1);if(G[G.length-1]==="")throw Error("Can't populate individual element in an array");let Z="",U=A;for(let H=0;H<G.length;H+=2){let K=G[H];if(U.startsWith(K+"."))Z+=U.substring(0,K.length)+G[H+1],U=U.substring(K.length+1);else if(H===G.length-1){Z+=U,U="";break}else throw Error("Could not normalize ref path, chunk "+K+" not in populated path")}let z=j$1.get(Z,$,R$1),W=Array.isArray(z)?z:[z];return W=C70.array.flatten(W),W}let Y=j$1.get(A,$,R$1),D;if(J!=null&&J.virtuals.hasOwnProperty(A))D=[J.virtuals[A].applyGetters(void 0,$)];else D=Array.isArray(Y)?Y:[Y];return D}});var eH=Q((gP0,k$1)=>{var N70=FS(),P70=P1(),R70=q1().modelSymbol;function _7(F,A){this.path=A,this.getters=[],this.setters=[],this.options=Object.assign({},F)}_7.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let A="$"+this.path;this.getters.push(function(){return this.$locals[A]}),this.setters.push(function($){this.$locals[A]=$})};/*!
 * ignore
 */_7.prototype.clone=function(){let F=new _7(this.options,this.path);return F.getters=[].concat(this.getters),F.setters=[].concat(this.setters),F};_7.prototype.get=function(F){return this.getters.push(F),this};_7.prototype.set=function(F){return this.setters.push(F),this};_7.prototype.applyGetters=function(F,A){if(P70.hasUserDefinedProperty(this.options,["ref","refPath"])&&A.$$populatedVirtuals&&A.$$populatedVirtuals.hasOwnProperty(this.path))F=A.$$populatedVirtuals[this.path];let $=F;for(let B of this.getters)$=B.call(A,$,this,A);return $};_7.prototype.applySetters=function(F,A){let $=F;for(let B of this.setters)$=B.call(A,$,this,A);return $};_7.prototype._getModelNamesForPopulate=function(A){if(this.options.refPath)return N70(this.options.refPath,A,this.path);let $=null;if(typeof this.options.ref==="function"&&!this.options.ref[R70])$=this.options.ref.call(A,A);else $=this.options.ref;if($!=null&&!Array.isArray($))return[$];return $};/*!
 * exports
 */k$1.exports=_7});var AS=Q((_P0,O$1)=>{O$1.exports=function(A){let $={_id:{auto:!0}};$._id[A.options.typeKey]="ObjectId",A.add($)}});var $S=Q((yP0,S$1)=>{S$1.exports=function(A,$){let B=A.discriminatorMapping&&A.discriminatorMapping.value;if(B&&!("sparse"in $)){let J=A.options.discriminatorKey;$.partialFilterExpression=$.partialFilterExpression||{},$.partialFilterExpression[J]=B}return $}});var f$1=Q((vP0,u$1)=>{var BS=V6(),j70=$5(),M70=$S();u$1.exports=function(A){let $=[],B=new WeakMap,J=A.constructor.indexTypes,X=new Map;return Y(A),$;function Y(G,Z,U){if(B.has(G))return;B.set(G,!0),Z=Z||"";let z=Object.keys(G.paths);for(let W of z){let H=G.paths[W];if(U!=null&&U.paths[W])continue;if(H._duplicateKeyErrorMessage!=null)G._duplicateKeyErrorMessagesByPath=G._duplicateKeyErrorMessagesByPath||{},G._duplicateKeyErrorMessagesByPath[W]=H._duplicateKeyErrorMessage;if(H.$isMongooseDocumentArray||H.$isSingleNested){if(BS(H,"options.excludeIndexes")!==!0&&BS(H,"schemaOptions.excludeIndexes")!==!0&&BS(H,"schema.options.excludeIndexes")!==!0)Y(H.schema,Z+W+".");if(H.schema.discriminators!=null){let q=H.schema.discriminators,V=Object.keys(q);for(let E of V)Y(q[E],Z+W+".",H.schema)}if(H.$isMongooseDocumentArray)continue}let K=H._index||H.caster&&H.caster._index;if(K!==!1&&K!==null&&K!==void 0){let q={},V=j70(K),E=V?{...K}:{},L=typeof K==="string"?K:V?K.type:!1;if(L&&J.indexOf(L)!==-1)q[Z+W]=L;else if(E.text)q[Z+W]="text",delete E.text;else{let I=!1;if(K==="descending"||K==="desc")I=!0;else if(K==="ascending"||K==="asc")I=!1;else I=Number(K)===-1;q[Z+W]=I?-1:1}if(delete E.type,!("background"in E))E.background=!0;if(G.options.autoIndex!=null)E._autoIndex=G.options.autoIndex;let w=E&&E.name;if(typeof w==="string")if(X.has(w))Object.assign(X.get(w),q);else $.push([q,E]),X.set(w,q);else $.push([q,E]),X.set(w,q)}}if(B.delete(G),Z)D(G,Z);else G._indexes.forEach(function(W){let H=W[1];if(!("background"in H))H.background=!0;M70(G,H)}),$=$.concat(G._indexes)}function D(G,Z){let U=G._indexes,z=U.length;for(let W=0;W<z;++W){let H=U[W][0],K=U[W][1],q=Object.keys(H),V=q.length,E={};for(let w=0;w<V;++w){let I=q[w];E[Z+I]=H[I]}let L=Object.assign({},K);if(K!=null&&K.partialFilterExpression!=null){L.partialFilterExpression={};let w=K.partialFilterExpression;for(let I of Object.keys(w))L.partialFilterExpression[Z+I]=w[I]}$.push([E,L])}}}});var JS=Q((hP0,x$1)=>{x$1.exports=function(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A}});var g$1=Q((mP0,b$1)=>{/*!
 * ignore
 */b$1.exports=function(A){if(!(!A.paths.id&&A.paths._id&&A.options.id))return A;if(A.aliases&&A.aliases.id)return A;return A.virtual("id").get(T70),A};function T70(){if(this._id!=null)return this._id.toString();return null}});var y$1=Q((dP0,_$1)=>{_$1.exports=function(A,$){let B=Object.keys(A),J=Object.keys($);if(B.length!==J.length)return!1;for(let X=0;X<B.length;X++){let Y=B[X];if(Y!==J[X]||A[Y]!==$[Y])return!1}return!0}});var h$1=Q((cP0,v$1)=>{v$1.exports=function(A,$,B,J){if(J.justOne||J.count){if(A[$]=Array.isArray(B)?B[0]:B,typeof A[$]!=="object")A[$]=J.count?B:null}else A[$]=Array.isArray(B)?B:B==null?[]:[B],A[$]=A[$].filter(function(X){return X&&typeof X==="object"});return A[$]}});var yD=Q((lP0,m$1)=>{m$1.exports=function(A){return A.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var FK=Q((pP0,d$1)=>{d$1.exports=k70;/*!
 * ignore
 */function k70(F,A){if(F==null)return null;if(typeof F==="boolean")return A;if(typeof F[A]==="boolean")return F[A]?A:null;if(!(A in F))return A;return F[A]}});var YS=Q((iP0,c$1)=>{var O70=yD(),y7=FK();c$1.exports=gF;/*!
 * ignore
 */function gF(F,A,$){if(A==null)return;if(Object.keys(A).some((D)=>D[0]==="$")){if(A.$push)Y(A.$push);if(A.$addToSet)Y(A.$addToSet);if(A.$set!=null){let D=Object.keys(A.$set);for(let G of D)XS($,G,A.$set,F)}if(A.$setOnInsert!=null){let D=Object.keys(A.$setOnInsert);for(let G of D)XS($,G,A.$setOnInsert,F)}}let X=Object.keys(A).filter((D)=>D[0]!=="$");for(let D of X)XS($,D,A,F);function Y(D){for(let G of Object.keys(D)){let Z=$.path(G.replace(/\.\$\./i,".").replace(/.\$$/,""));if(D[G]&&Z&&Z.$isMongooseDocumentArray&&Z.schema.options.timestamps){let U=Z.schema.options.timestamps,z=y7(U,"createdAt"),W=y7(U,"updatedAt");if(D[G].$each)D[G].$each.forEach(function(H){if(W!=null)H[W]=F;if(z!=null)H[z]=F;gF(F,H,Z.schema)});else{if(W!=null)D[G][W]=F;if(z!=null)D[G][z]=F;gF(F,D[G],Z.schema)}}}}}function S70(F,A,$){let B=A.schema.options.timestamps,J=F.length;if(!B){for(let D=0;D<J;++D)gF($,F[D],A.schema);return}let X=y7(B,"createdAt"),Y=y7(B,"updatedAt");for(let D=0;D<J;++D){if(Y!=null)F[D][Y]=$;if(X!=null)F[D][X]=$;gF($,F[D],A.schema)}}function u70(F,A,$){let B=A.schema.options.timestamps;if(!B){gF($,F,A.schema);return}let J=y7(B,"createdAt"),X=y7(B,"updatedAt");if(X!=null)F[X]=$;if(J!=null)F[J]=$;gF($,F,A.schema)}function XS(F,A,$,B){let J=O70(A),X=F.path(J);if(!X)return;let Y=[],D=J.split(".");for(let G=D.length-1;G>0;--G){let Z=F.path(D.slice(0,G).join("."));if(Z!=null&&(Z.$isMongooseDocumentArray||Z.$isSingleNested))Y.push({parentPath:A.split(".").slice(0,G).join("."),parentSchemaType:Z})}if(Array.isArray($[A])&&X.$isMongooseDocumentArray)S70($[A],X,B);else if($[A]&&X.$isSingleNested)u70($[A],X,B);else if(Y.length>0)for(let G of Y){let{parentPath:Z,parentSchemaType:U}=G,z=U.schema.options.timestamps,W=y7(z,"updatedAt");if(!z||W==null)continue;if(U.$isSingleNested)$[Z+"."+W]=B;else if(U.$isMongooseDocumentArray){let H=A.substring(Z.length+1);if(/^\d+$/.test(H)){$[Z+"."+H][W]=B;continue}let K=H.indexOf(".");H=K!==-1?H.substring(0,K):H,$[Z+"."+H+"."+W]=B}}else if(X.schema!=null&&X.schema!=F&&$[A]){let G=X.schema.options.timestamps,Z=y7(G,"createdAt"),U=y7(G,"updatedAt");if(!G)return;if(U!=null)$[A][U]=B;if(Z!=null)$[A][Z]=B}}});var DS=Q((aP0,l$1)=>{/*!
 * ignore
 */var f70=V6();l$1.exports=x70;/*!
 * ignore
 */function x70(F,A,$,B,J,X){let Y=B,D=Y,G=f70(J,"timestamps",!0);if(!G||Y==null)return B;let Z=G!=null&&G.createdAt===!1,U=G!=null&&G.updatedAt===!1;if(X){if(B&&B.$set)B=B.$set,Y.$set={},D=Y.$set;if(!U&&$&&!B[$])D[$]=F;if(!Z&&A&&!B[A])D[A]=F;return Y}if(B=B||{},Array.isArray(Y)){if($==null)return Y;return Y.push({$set:{[$]:F}}),Y}if(Y.$set=Y.$set||{},!U&&$&&(!B.$currentDate||!B.$currentDate[$])){let z=!1;if($.indexOf(".")!==-1){let W=$.split(".");for(let H=1;H<W.length;++H){let K=W.slice(-H).join("."),q=W.slice(0,-H).join(".");if(B[q]!=null){B[q][K]=F,z=!0;break}else if(B.$set&&B.$set[q]){B.$set[q][K]=F,z=!0;break}}}if(!z)Y.$set[$]=F;if(Y.hasOwnProperty($))delete Y[$]}if(!Z&&A){if(B[A])delete B[A];if(B.$set&&B.$set[A])delete B.$set[A];let z=!1;if(A.indexOf(".")!==-1){let W=A.split(".");for(let H=1;H<W.length;++H){let K=W.slice(-H).join("."),q=W.slice(0,-H).join(".");if(B[q]!=null){B[q][K]=F,z=!0;break}else if(B.$set&&B.$set[q]){B.$set[q][K]=F,z=!0;break}}}if(!z)Y.$setOnInsert=Y.$setOnInsert||{},Y.$setOnInsert[A]=F}if(Object.keys(Y.$set).length===0)delete Y.$set;return Y}});var i$1=Q((nP0,p$1)=>{p$1.exports=function(A,$,B,J,X){let Y=$!=null&&$.updatedAt===!1,D=$!=null&&$.createdAt===!1,G=B!=null?B():A.ownerDocument().constructor.base.now();if(!D&&(A.isNew||A.$isSubdocument)&&J&&!A.$__getValue(J)&&A.$__isSelected(J))A.$set(J,G,void 0,{overwriteImmutable:!0});if(!Y&&X&&(A.isNew||A.$isModified())){let Z=G;if(A.isNew&&J!=null)Z=A.$__getValue(J);A.$set(X,Z)}}});var t$1=Q((rP0,r$1)=>{var b70=YS(),g70=DS(),_70=V6(),a$1=FK(),y70=i$1(),v70=SF(),n$1=new Set(["replaceOne","findOneAndReplace"]);r$1.exports=function(A,$){let B=A.childSchemas.find(J);function J(z){return!!z.schema.options.timestamps}if(!$&&!B)return;let X=a$1($,"createdAt"),Y=a$1($,"updatedAt"),D=$!=null&&$.hasOwnProperty("currentTime")?$.currentTime:null,G={};if(A.$timestamps={createdAt:X,updatedAt:Y},X&&!A.paths[X]){let z=A.base!=null?A.base.get("timestamps.createdAt.immutable"):null,W=z!=null?z:!0;G[X]={[A.options.typeKey||"type"]:Date,immutable:W}}if(Y&&!A.paths[Y])G[Y]=Date;A.add(G),A.pre("save",function(W){let H=_70(this,"$__.saveOptions.timestamps");if(H===!1)return W();y70(this,H,D,X,Y),W()}),A.methods.initializeTimestamps=function(){let z=D!=null?D():this.constructor.base.now();if(X&&!this.get(X))this.$set(X,z);if(Y&&!this.get(Y))this.$set(Y,z);if(this.$isSubdocument)return this;let W=this.$getAllSubdocs();for(let H of W)if(H.initializeTimestamps)H.initializeTimestamps();return this},U[v70.builtInMiddleware]=!0;let Z={query:!0,model:!1};A.pre("findOneAndReplace",Z,U),A.pre("findOneAndUpdate",Z,U),A.pre("replaceOne",Z,U),A.pre("update",Z,U),A.pre("updateOne",Z,U),A.pre("updateMany",Z,U);function U(z){let W=D!=null?D():this.model.base.now();if(n$1.has(this.op)&&this.getUpdate()==null)this.setUpdate({});g70(W,X,Y,this.getUpdate(),this._mongooseOptions,n$1.has(this.op)),b70(W,this.getUpdate(),this.model.schema),z()}}});var o$1=Q((tP0,s$1)=>{var h70=d1(),m70=x("util");s$1.exports=d70;function d70(F,A){if(typeof F==="string")return;if(typeof F==="function")return;throw new h70('Invalid ref at path "'+A+'". Got '+m70.inspect(F,{depth:0}))}});var AK=Q((a70)=>{/*!
 * ignore
 */var e$1=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);a70.queryOperations=e$1;/*!
 * ignore
 */var c70=e$1.concat(["validate"]);a70.queryMiddlewareFunctions=c70;/*!
 * ignore
 */var l70=["aggregate"];a70.aggregateMiddlewareFunctions=l70;/*!
 * ignore
 */var p70=["bulkWrite","createCollection","insertMany"];a70.modelMiddlewareFunctions=p70;/*!
 * ignore
 */var i70=["validate","save","remove","updateOne","deleteOne","init"];a70.documentMiddlewareFunctions=i70});var $K=Q((oP0,FB1)=>{var e70=SF(),F80=IH();/*!
 * ignore
 */FB1.exports=vD;/*!
 * ignore
 */vD.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];/*!
 * ignore
 */var A80=new Set(vD.middlewareFunctions.flatMap((F)=>[F,`$__${F}`]));function vD(F,A,$){$=$||{};let B={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},J=$.decorateDoc?F:F.prototype;F.$appliedHooks=!0;for(let Z of Object.keys(A.paths)){let U=A.paths[Z],z=null;if(U.$isSingleNested)z=U.caster;else if(U.$isMongooseDocumentArray)z=U.Constructor;else continue;if(z.$appliedHooks)continue;if(vD(z,U.schema,{...$,isChildSchema:!0}),z.discriminators!=null){let W=Object.keys(z.discriminators);for(let H of W)vD(z.discriminators[H],z.discriminators[H].schema,$)}}let X=A.s.hooks.filter((Z)=>{if(Z.name==="updateOne"||Z.name==="deleteOne")return!!Z.document;if(Z.name==="remove"||Z.name==="init")return Z.document==null||!!Z.document;if(Z.query!=null||Z.document!=null)return Z.document!==!1;return!0}).filter((Z)=>{if(A.methods[Z.name])return!Z.fn[e70.builtInMiddleware];return!0});F._middleware=X,J.$__originalValidate=J.$__originalValidate||J.$__validate;let Y=$&&$.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let Z of Y){let U=Z==="validate"?"$__originalValidate":`$__${Z}`,z=X.createWrapper(Z,J[U],null,B);J[`$__${Z}`]=z}J.$__init=X.createWrapperSync("init",J.$__init,null,B);let D=Object.keys(A.methods),G=Object.assign({},B,{checkForPromise:!0});for(let Z of D){if(A80.has(Z))continue;if(!X.hasHooks(Z))continue;let U=J[Z];J[Z]=function(){let z=Array.prototype.slice.call(arguments),W=z.slice(-1).pop(),H=typeof W==="function"?z.slice(0,z.length-1):z;return F80(W,(K)=>{return this[`$__${Z}`].apply(this,H.concat([K]))},F.events)},J[`$__${Z}`]=X.createWrapper(Z,U,null,G)}}});var $B1=Q((eP0,AB1)=>{AB1.exports=x4().Double});var BK=Q((FR0,DB1)=>{var $80=d1(),BB1=Z6(),B80=P1().deepEqual,J80=E3(),X80=uH(),JB1=x("util"),Y80=jF(),GS=M4(),D80=MH(),XB1=q1().populateModelSymbol;/*!
 * ignore
 */class e2 extends Map{constructor(F,A,$,B,J){if(J80(F)==="Object")F=Object.keys(F).reduce((X,Y)=>X.concat([[Y,F[Y]]]),[]);super(F);if(this.$__parent=$!=null&&$.$__!=null?$:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath)this.$__path=this.$__parent.$basePath+"."+A,this.$__pathRelativeToParent=A;else if(J?.path)this.$__path=J.path,this.$__pathRelativeToParent=null;else this.$__path=A,this.$__pathRelativeToParent=null;this.$__schemaType=B,this.$__runDeferred()}$init(F,A){if(YB1(F),super.set(F,A),A!=null&&A.$isSingleNested)if(A.$basePath=this.$__path+"."+F,this.$__pathRelativeToParent!=null)A.$pathRelativeToParent=this.$__pathRelativeToParent+"."+F;else A.$pathRelativeToParent=this.$__path+"."+F}$__set(F,A){super.set(F,A)}get(F,A){if(GS(F,"ObjectId"))F=F.toString();if(A=A||{},A.getters===!1)return super.get(F);return this.$__schemaType.applyGetters(super.get(F),this.$__parent)}set(F,A){if(GS(F,"ObjectId"))F=F.toString();if(YB1(F),A=X80(A),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:F,value:A});return}let $,B=this.$__parent,J=B!=null&&B.$__&&B.$__.populated?B.$populated(Y.call(this),!0)||B.$populated(this.$__path,!0):null,X=this.get(F);if(J!=null){if(this.$__schemaType.$isSingleNested)throw new $80(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(A)&&this.$__schemaType.$isMongooseArray)A=A.map((D)=>{if(D.$__==null)D=new J.options[XB1](D);return D.$__.wasPopulated={value:D._doc._id},D});else if(A!=null){if(A.$__==null)A=new J.options[XB1](A);A.$__.wasPopulated={value:A._doc._id}}}else try{let D=null;if(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap){if(D={path:Y.call(this)},this.$__schemaType.$isSingleNested)D.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+F:this.$__path+"."+F}A=this.$__schemaType.applySetters(A,this.$__parent,!1,this.get(F),D)}catch(D){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(Y.call(this),D);return}throw D}if(super.set(F,A),A!=null&&A.$isSingleNested)if(this.$__pathRelativeToParent!=null)A.$pathRelativeToParent=this.$__pathRelativeToParent+"."+F;else A.$pathRelativeToParent=this.$__path+"."+F;if(B!=null&&B.$__!=null&&!B80(A,X)){let D;if(this.$__pathRelativeToParent!=null)D=this.$__pathRelativeToParent+"."+F;else D=Y.call(this);if(B.markModified(D),this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)D80(B,D)}function Y(){if($)return $;return $=this.$__path+"."+F,$}}clear(){super.clear();let F=this.$__parent;if(F!=null)F.markModified(this.$__path)}delete(F){if(GS(F,"ObjectId"))F=F.toString();return this.set(F,void 0),super.delete(F)}toBSON(){return new Map(this)}toObject(F){if(F&&F.flattenMaps){let A={},$=this.keys();for(let B of $)A[B]=BB1(this.get(B),F);return A}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(F){if(typeof(F&&F.flattenMaps)==="boolean"?F.flattenMaps:!0){let A={},$=this.keys();for(let B of $)A[B]=BB1(this.get(B),F);return A}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let F of this.$__deferred)this.set(F.key,F.value);this.$__deferred=null}}if(JB1.inspect.custom)Object.defineProperty(e2.prototype,JB1.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:e2.prototype.inspect});Object.defineProperty(e2.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(e2.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(e2.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(e2.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(e2.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(e2.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function YB1(F){let A=typeof F;if(A!=="string")throw TypeError(`Mongoose maps only support string keys, got ${A}`);if(F.startsWith("$"))throw Error(`Mongoose maps do not support keys that start with "$", got "${F}"`);if(F.includes("."))throw Error(`Mongoose maps do not support keys that contain ".", got "${F}"`);if(Y80.has(F))throw Error(`Mongoose maps do not support reserved key name "${F}"`)}DB1.exports=e2});var ZB1=Q((AR0,GB1)=>{GB1.exports=x4().UUID});var wB=Q((G80)=>{/*!
 * Module exports.
 */G80.Array=kO();G80.Buffer=WB();G80.Document=G80.Embedded=VB();G80.DocumentArray=xF();G80.Double=$B1();G80.Decimal128=WH();G80.ObjectId=x7();G80.Map=BK();G80.Subdocument=xH();G80.UUID=ZB1()});var zB1=Q((JR0,UB1)=>{var L80=v3();class hD extends L80{}var ZS=Q9();Object.defineProperty(hD.prototype,"enum",ZS);Object.defineProperty(hD.prototype,"of",ZS);Object.defineProperty(hD.prototype,"castNonArrays",ZS);/*!
 * ignore
 */UB1.exports=hD});var HB1=Q((XR0,WB1)=>{WB1.exports=US;function US(F){if(!Array.isArray(F))return{min:0,max:0,containsNonArrayItem:!0};if(F.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(F.length===1&&!Array.isArray(F[0]))return{min:1,max:1,containsNonArrayItem:!1};let A=US(F[0]);for(let $=1;$<F.length;++$){let B=US(F[$]);if(B.min<A.min)A.min=B.min;if(B.max>A.max)A.max=B.max;A.containsNonArrayItem=A.containsNonArrayItem||B.containsNonArrayItem}return A.min=A.min+1,A.max=A.max+1,A}});var mD=Q((YR0,qB1)=>{var KB1=x("assert");qB1.exports=function(A){if(A==null)return A;if(A==="")return null;if(typeof A==="string"||typeof A==="boolean")A=Number(A);if(KB1.ok(!isNaN(A)),A instanceof Number)return A.valueOf();if(typeof A==="number")return A;if(!Array.isArray(A)&&typeof A.valueOf==="function")return Number(A.valueOf());if(A.toString&&!Array.isArray(A)&&A.toString()==Number(A))return Number(A);KB1.ok(!1)}});var zS=Q((DR0,QB1)=>{QB1.exports=function(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let $=A.length-1;$>=0;--$)if(A[$]===void 0)A.splice($,1)}for(let $ of Object.keys(A))if(A[$]===void 0)delete A[$];return A}});var LB1=Q((GR0,EB1)=>{var IB=a4(),VB1=B5(),JK=mD(),w80=zS(),I80=new Set(["$and","$or"]),C80=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),N80=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),P80=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),R80=new Set(["$arrayElemAt","$first","$last"]),j80=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),M80=new Set(["$not"]);EB1.exports=function(A,$,B){if(typeof A==="boolean")return A;if(typeof A!=="object"||A===null)throw Error("`$expr` must be an object or boolean literal");return l9(A,$,B)};function l9(F,A,$){if(dD(F)||F===null)return F;if(F.$cond!=null)if(Array.isArray(F.$cond))F.$cond=F.$cond.map((J)=>l9(J,A,$));else F.$cond.if=l9(F.$cond.if,A,$),F.$cond.then=l9(F.$cond.then,A,$),F.$cond.else=l9(F.$cond.else,A,$);else if(F.$ifNull!=null)F.$ifNull.map((J)=>l9(J,A,$));else if(F.$switch!=null){if(Array.isArray(F.$switch.branches))F.$switch.branches=F.$switch.branches.map((J)=>l9(J,A,$));if("default"in F.$switch)F.$switch.default=l9(F.$switch.default,A,$)}let B=Object.keys(F);for(let J of B)if(I80.has(J))F[J]=F[J].map((X)=>l9(X,A,$));else if(C80.has(J))F[J]=O80(F[J],A,$);else if(N80.has(J))F[J]=k80(F[J],A,$);else if(P80.has(J))F[J]=WS(F[J],A,$);else if(M80.has(J))F[J]=l9(F[J],A,$);if(F.$in)F.$in=T80(F.$in,A,$);if(F.$size)F.$size=WS(F.$size,A,$);if(F.$round){let J=F.$round;if(!Array.isArray(J)||J.length<1||J.length>2)throw new IB("Array",J,"$round");F.$round=J.map((X)=>WS(X,A,$))}return w80(F),F}function WS(F){if(!XK(F))return F;try{return JK(F)}catch(A){throw new IB("Number",F)}}function T80(F,A,$){let B=F[1];if(!dD(B))return F;let J=F[0],X=A.path(B.slice(1));if(X===null){if($===!1)return F;else if($==="throw")throw new VB1("$in");return}if(!X.$isMongooseArray)throw Error("Path must be an array for $in");return[X.$isMongooseDocumentArray?X.$embeddedSchemaType.cast(J):X.caster.cast(J),B]}function k80(F){if(!Array.isArray(F)){if(!XK(F))return F;try{return JK(F)}catch(A){throw new IB("Number",F)}}return F.map((A)=>{if(!XK(A))return A;try{return JK(A)}catch($){throw new IB("Number",A)}})}function O80(F,A,$){if(!Array.isArray(F)||F.length!==2)throw Error("Comparison operator must be an array of length 2");F[0]=l9(F[0],A,$);let B=F[0];if(XK(F[1])){let J=null,X=null,Y=null;if(dD(B))J=B.slice(1),X=A.path(J);else if(typeof B==="object"&&B!=null){for(let G of Object.keys(B))if(j80.has(G)&&dD(B[G]))J=B[G].slice(1)+"."+G,Y=JK;else if(R80.has(G)&&dD(B[G])){if(J=B[G].slice(1)+"."+G,X=A.path(B[G].slice(1)),X!=null){if(X.$isMongooseDocumentArray)X=X.$embeddedSchemaType;else if(X.$isMongooseArray)X=X.caster}}}let D=typeof F[1]==="object"&&F[1]!=null&&F[1].$literal!=null;if(X!=null)if(D)F[1]={$literal:X.cast(F[1].$literal)};else F[1]=X.cast(F[1]);else if(Y!=null)if(D)try{F[1]={$literal:Y(F[1].$literal)}}catch(G){throw new IB(Y.name.replace(/^cast/,""),F[1],J+".$literal")}else try{F[1]=Y(F[1])}catch(G){throw new IB(Y.name.replace(/^cast/,""),F[1],J)}else if(J!=null&&$===!0)return;else if(J!=null&&$==="throw")throw new VB1(J)}else F[1]=l9(F[1]);return F}function dD(F){return typeof F==="string"&&F[0]==="$"}function XK(F){if(typeof F==="string"&&F[0]==="$")return!1;if(typeof F==="object"&&F!==null&&Object.keys(F).find((A)=>A[0]==="$"))return F.$literal!=null;return!0}});var YK=Q((ZR0,wB1)=>{var S80=a4();wB1.exports=function(A,$){if(A==null)return A;if(A._id&&typeof A._id==="string")return A._id;if(A.toString&&A.toString!==Object.prototype.toString&&!Array.isArray(A))return A.toString();throw new S80("string",A,$)}});var PB1=Q((UR0,NB1)=>{var u80=a4(),IB1=EH(),CB1=YK();NB1.exports=function(A,$){if(A==null||typeof A!=="object")throw new u80("$text",A,$);if(A.$search!=null)A.$search=CB1(A.$search,$+".$search");if(A.$language!=null)A.$language=CB1(A.$language,$+".$language");if(A.$caseSensitive!=null)A.$caseSensitive=IB1(A.$caseSensitive,$+".$castSensitive");if(A.$diacriticSensitive!=null)A.$diacriticSensitive=IB1(A.$diacriticSensitive,$+".$diacriticSensitive");return A}});var cD=Q((zR0,RB1)=>{var f80=new Set(["$ref","$id","$db"]);RB1.exports=function(A){return A[0]==="$"&&!f80.has(A)}});var _F=Q((WR0,OB1)=>{/*!
 * Module dependencies.
 */var jB1=a4(),HS=B5(),x80=lD(),b80=LB1(),g80=YK(),_80=PB1(),y80=V6(),MB1=SH(),TB1=cD(),v80=x("util"),qS=$5(),KS=ND(),kB1=P1(),h80=["Polygon","MultiPolygon"];OB1.exports=function F(A,$,B,J){if(Array.isArray($))throw Error("Query filter must be an object, got an array ",v80.inspect($));if($==null)return $;if(A!=null&&A.discriminators!=null&&$[A.options.discriminatorKey]!=null)A=MB1(A,$[A.options.discriminatorKey])||A;let X=Object.keys($),Y=X.length,D,G,Z,U,z,W,H;B=B||{};while(Y--)if(z=X[Y],H=$[z],z==="$or"||z==="$nor"||z==="$and"){if(!Array.isArray(H))throw new jB1("Array",H,z);for(let K=H.length-1;K>=0;K--){if(H[K]==null||typeof H[K]!=="object")throw new jB1("Object",H[K],z+"."+K);let q=Object.keys(H[K]).length,V=H[K][A.options.discriminatorKey];if(V==null)H[K]=F(A,H[K],B,J);else{let E=MB1(J.schema,V);H[K]=F(E?E:A,H[K],B,J)}if(Object.keys(H[K]).length===0&&q!==0)H.splice(K,1)}if(H.length===0)delete $[z]}else if(z==="$where"){if(W=typeof H,W!=="string"&&W!=="function")throw Error("Must have a string or function for $where");if(W==="function")$[z]=H.toString();continue}else if(z==="$expr"){H=b80(H,A);continue}else if(z==="$elemMatch")H=F(A,H,B,J);else if(z==="$text")H=_80(H,z);else if(z==="$comment"&&!A.paths.hasOwnProperty("$comment"))H=g80(H,z),$[z]=H;else{if(!A)continue;if(Z=A.path(z),!Z){let K=z.split("."),q=K.length;while(q--){let V=K.slice(0,q).join("."),E=K.slice(q).join("."),L=A.path(V),w=L&&L.schema&&L.schema.options&&L.schema.options.discriminatorKey;if(L!=null&&(L.schema&&L.schema.discriminators)!=null&&w!=null&&E!==w){let I=y80($,V+"."+w),P=L.schema.discriminators;if(typeof I==="string"&&P[I]!=null)Z=P[I].path(E);else if(I!=null&&Object.keys(I).length===1&&Array.isArray(I.$in)&&I.$in.length===1&&typeof I.$in[0]==="string"&&P[I.$in[0]]!=null)Z=P[I.$in[0]].path(E)}}}if(!Z){let K=z.split("."),q=K.length,V,E,L;while(q--)if(V=K.slice(0,q).join("."),Z=A.path(V),Z)break;if(Z){if(Z.caster&&Z.caster.schema){L={},E=K.slice(q).join("."),L[E]=H;let P=F(Z.caster.schema,L,B,J)[E];if(P===void 0)delete $[z];else $[z]=P}else $[z]=H;continue}if(qS(H)){let P="";if(H.$near)P="$near";else if(H.$nearSphere)P="$nearSphere";else if(H.$within)P="$within";else if(H.$geoIntersects)P="$geoIntersects";else if(H.$geoWithin)P="$geoWithin";if(P){let M=new x80.Number("__QueryCasting__",null,null,A),u=H[P];if(H.$maxDistance!=null)H.$maxDistance=M.castForQuery(null,H.$maxDistance,J);if(H.$minDistance!=null)H.$minDistance=M.castForQuery(null,H.$minDistance,J);if(P==="$within"){let g=u.$center||u.$centerSphere||u.$box||u.$polygon;if(!g)throw Error("Bad $within parameter: "+JSON.stringify(H));u=g}else if(P==="$near"&&typeof u.type==="string"&&Array.isArray(u.coordinates))u=u.coordinates;else if((P==="$near"||P==="$nearSphere"||P==="$geoIntersects")&&u.$geometry&&typeof u.$geometry.type==="string"&&Array.isArray(u.$geometry.coordinates)){if(u.$maxDistance!=null)u.$maxDistance=M.castForQuery(null,u.$maxDistance,J);if(u.$minDistance!=null)u.$minDistance=M.castForQuery(null,u.$minDistance,J);if(KS(u.$geometry))u.$geometry=u.$geometry.toObject({transform:!1,virtuals:!1});u=u.$geometry.coordinates}else if(P==="$geoWithin"){if(u.$geometry){if(KS(u.$geometry))u.$geometry=u.$geometry.toObject({virtuals:!1});let g=u.$geometry.type;if(h80.indexOf(g)===-1)throw Error('Invalid geoJSON type for $geoWithin "'+g+'", must be "Polygon" or "MultiPolygon"');u=u.$geometry.coordinates}else if(u=u.$box||u.$polygon||u.$center||u.$centerSphere,KS(u))u=u.toObject({virtuals:!1})}QS(u,M,J);continue}}if(A.nested[z])continue;let w="strict"in B?B.strict:A.options.strict,I=m80(B,A._userProvidedOptions,A.options,J);if(B.upsert&&w){if(w==="throw")throw new HS(z);throw new HS(z,'Path "'+z+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(I==="throw")throw new HS(z,'Path "'+z+`" is not in schema and strictQuery is 'throw'.`);else if(I)delete $[z]}else if(H==null)continue;else if(kB1.isPOJO(H))if(G=Object.keys(H).some(TB1),!G)$[z]=Z.castForQuery(null,H,J);else{let K=Object.keys(H),q,V=K.length;while(V--)if(q=K[V],U=H[q],q==="$elemMatch"){if(U&&Z!=null&&Z.schema!=null)F(Z.schema,U,B,J);else if(U&&Z!=null&&Z.$isMongooseArray)if(kB1.isPOJO(U)&&U.$not!=null)F(A,U,B,J);else H[q]=Z.castForQuery(q,U,J)}else if(q==="$not"){if(U&&Z){if(D=Object.keys(U),D.length&&TB1(D[0]))for(let E in U)U[E]=Z.castForQuery(E,U[E],J);else H[q]=Z.castForQuery(q,U,J);continue}}else H[q]=Z.castForQuery(q,U,J)}else if(Array.isArray(H)&&["Buffer","Array"].indexOf(Z.instance)===-1&&!B.sanitizeFilter){let K=[],q=H;for(let V of q)K.push(Z.castForQuery(null,V,J));$[z]={$in:K}}else $[z]=Z.castForQuery(null,H,J)}return $};function QS(F,A,$){if(Array.isArray(F))F.forEach(function(B,J){if(Array.isArray(B)||qS(B))return QS(B,A,$);F[J]=A.castForQuery(null,B,$)});else{let B=Object.keys(F),J=B.length;while(J--){let X=B[J],Y=F[X];if(Array.isArray(Y)||qS(Y))QS(Y,A,$),F[X]=Y;else F[X]=A.castForQuery({val:Y,context:$})}}}function m80(F,A,$,B){if("strictQuery"in F)return F.strictQuery;if("strictQuery"in A)return A.strictQuery;let J=B&&B.mongooseCollection&&B.mongooseCollection.conn&&B.mongooseCollection.conn.base&&B.mongooseCollection.conn.base.options;if(J){if("strictQuery"in J)return J.strictQuery}return $.strictQuery}});var uB1=Q((HR0,SB1)=>{var d80=v3();class CB extends d80{}var DK=Q9();Object.defineProperty(CB.prototype,"min",DK);Object.defineProperty(CB.prototype,"max",DK);Object.defineProperty(CB.prototype,"enum",DK);Object.defineProperty(CB.prototype,"populate",DK);/*!
 * ignore
 */SB1.exports=CB});var t4=Q((KR0,fB1)=>{fB1.exports=function(A,$,B,J){if(B){if(J)return{bsonType:$};return{bsonType:[$,"null"]}}else{if(J)return{type:A};return{type:[A,"null"]}}}});var pD=Q((qR0,bB1)=>{/*!
 * Module requirements.
 */var c80=a4();/*!
 * ignore
 */function l80(F){let A=this;if(Array.isArray(F))return F.map(function($){return xB1(A.path,$)});else if(Buffer.isBuffer(F))return F;return xB1(A.path,F)}/*!
 * ignore
 */function xB1(F,A){let $=Number(A);if(isNaN($))throw new c80("number",A,F);return $}bB1.exports=l80});var LS=Q((QR0,gB1)=>{/*!
 * Module requirements.
 */var UK=_3(),p80=uB1(),v7=Q6(),i80=mD(),a80=t4(),GK=pD(),VS=P1(),ES=v7.CastError;function r0(F,A,$,B){v7.call(this,F,A,"Number",B)}r0.get=v7.get;r0.set=v7.set;r0.setters=[];/*!
 * ignore
 */r0._cast=i80;r0.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */r0._defaultCaster=(F)=>{if(typeof F!=="number")throw Error();return F};r0.schemaName="Number";r0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */r0.prototype=Object.create(v7.prototype);r0.prototype.constructor=r0;r0.prototype.OptionsConstructor=p80;/*!
 * ignore
 */r0._checkRequired=(F)=>typeof F==="number"||F instanceof Number;r0.checkRequired=v7.checkRequired;r0.prototype.checkRequired=function(A,$){if(typeof A==="object"&&v7._isRef(this,A,$,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():r0.checkRequired())(A)};r0.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function($){return $.validator!==this.minValidator},this);if(F!==null&&F!==void 0){let $=A||UK.messages.Number.min;$=$.replace(/{MIN}/,F),this.validators.push({validator:this.minValidator=function(B){return B==null||B>=F},message:$,type:"min",min:F})}return this};r0.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function($){return $.validator!==this.maxValidator},this);if(F!==null&&F!==void 0){let $=A||UK.messages.Number.max;$=$.replace(/{MAX}/,F),this.validators.push({validator:this.maxValidator=function(B){return B==null||B<=F},message:$,type:"max",max:F})}return this};r0.prototype.enum=function(F,A){if(this.enumValidator)this.validators=this.validators.filter(function($){return $.validator!==this.enumValidator},this);if(!Array.isArray(F)){if(VS.isPOJO(F)&&F.values!=null)A=F.message,F=F.values;else if(typeof F==="number")F=Array.prototype.slice.call(arguments),A=null;if(VS.isPOJO(F))F=Object.values(F);A=A||UK.messages.Number.enum}return A=A==null?UK.messages.Number.enum:A,this.enumValidator=($)=>$==null||F.indexOf($)!==-1,this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:F}),this};r0.prototype.cast=function(F,A,$,B,J){if(typeof F!=="number"&&v7._isRef(this,F,A,$)){if(F==null||VS.isNonBuiltinObject(F))return this._castRef(F,A,$,J)}let X=F&&typeof F._id<"u"?F._id:F,Y;if(typeof this._castFunction==="function")Y=this._castFunction;else if(typeof this.constructor.cast==="function")Y=this.constructor.cast();else Y=r0.cast();try{return Y(X)}catch(D){throw new ES("Number",X,this.path,D,this)}};/*!
 * ignore
 */function ZK(F){return this.cast(F)}function n80(F){let A=this;if(!Array.isArray(F))return[this.cast(F)];return F.map(function($){return A.cast($)})}var r80={...v7.prototype.$conditionalHandlers,$bitsAllClear:GK,$bitsAnyClear:GK,$bitsAllSet:GK,$bitsAnySet:GK,$gt:ZK,$gte:ZK,$lt:ZK,$lte:ZK,$mod:n80};Object.defineProperty(r0.prototype,"$conditionalHandlers",{enumerable:!1,value:r80});r0.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],!B)throw new ES("number",A,this.path,null,this);return B.call(this,A,$)}try{A=this.applySetters(A,$)}catch(J){if(J instanceof ES&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}return A};r0.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return a80("number","number",A?.useBsonType,$)};/*!
 * Module exports.
 */gB1.exports=r0});var iD=Q((s80)=>{/*!
 * Module requirements.
 */var t80=LS();/*!
 * ignore
 */s80.castToNumber=_B1;s80.castArraysOfNumbers=yB1;/*!
 * ignore
 */function _B1(F){return t80.cast()(F)}function yB1(F,A){F.forEach(function($,B){if(Array.isArray($))yB1($,A);else F[B]=_B1.call(A,$)})}});var CS=Q((B50)=>{/*!
 * Module requirements.
 */var vB1=iD().castArraysOfNumbers,aD=iD().castToNumber;/*!
 * ignore
 */B50.cast$geoIntersects=$50;B50.cast$near=F50;B50.cast$within=A50;function F50(F){let A=zK();if(Array.isArray(F))return vB1(F,this),F;if(IS(this,F),F&&F.$geometry)return wS(F,this);if(!Array.isArray(F))throw TypeError("$near must be either an array or an object with a $geometry property");return A.prototype.castForQuery.call(this,null,F)}function wS(F,A){switch(F.$geometry.type){case"Polygon":case"LineString":case"Point":vB1(F.$geometry.coordinates,A);break;default:break}return IS(A,F),F}function A50(F){if(IS(this,F),F.$box||F.$polygon){let A=F.$box?"$box":"$polygon";F[A].forEach(($)=>{if(!Array.isArray($)){let B="Invalid $within $box argument. Expected an array, received "+$;throw TypeError(B)}$.forEach((B,J)=>{$[J]=aD.call(this,B)})})}else if(F.$center||F.$centerSphere){let A=F.$center?"$center":"$centerSphere";F[A].forEach(($,B)=>{if(Array.isArray($))$.forEach((J,X)=>{$[X]=aD.call(this,J)});else F[A][B]=aD.call(this,$)})}else if(F.$geometry)wS(F,this);return F}function $50(F){if(!F.$geometry)return;return wS(F,this),F}function IS(F,A){if(A.$maxDistance)A.$maxDistance=aD.call(F,A.$maxDistance);if(A.$minDistance)A.$minDistance=aD.call(F,A.$minDistance)}});var zK=Q((LR0,cB1)=>{/*!
 * Module dependencies.
 */var D50=LH(),G50=GO(),mB1=d1(),Z50=zB1(),p9=Q6(),HK=p9.CastError,KK=HB(),U50=eO(),hB1=eH(),z50=HB1(),NS=_F(),W50=Z6(),H50=E3(),K50=cD(),qK=x("util"),Z5=P1(),q50=iD().castToNumber,Q50=t4(),PS=CS(),V50=c9(),nD,WK,dB1=Symbol("mongoose#isNestedArray"),E50=Object.freeze({});function B0(F,A,$,B,J){WK||(WK=wB().Embedded);let X="type";if(B&&B.typeKey)X=B.typeKey;if(this.schemaOptions=B,A){let G={};if(Z5.isPOJO(A))if(A[X])G=W50(A),delete G[X],A=A[X];else A=KK;if($!=null&&$.ref!=null&&G.ref==null)G.ref=$.ref;if(A===Object)A=KK;let Z=typeof A==="string"?A:Z5.getFunctionName(A),U=lD(),z=U.hasOwnProperty(Z)?U[Z]:A;if(this.casterConstructor=z,this.casterConstructor instanceof B0)this.casterConstructor[dB1]=!0;if(typeof z==="function"&&!z.$isArraySubdocument&&!z.$isSchemaMap){let W=this.caster instanceof WK?null:F;if(z===B0)this.caster=new z(W,G,B,null,J);else this.caster=new z(W,G,B,J)}else if(this.caster=z,!(this.caster instanceof WK))this.caster.path=F;this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,p9.call(this,F,$,"Array",J);let Y,D;if(this.defaultValue!=null)Y=this.defaultValue,D=typeof Y==="function";if(!("defaultValue"in this)||this.defaultValue!=null){let G=function(){return D?Y.call(this):Y!=null?[].concat(Y):[]};G.$runBeforeSetters=!D,this.default(G)}}B0.schemaName="Array";B0.options={castNonArrays:!0};/*!
 * ignore
 */B0.defaultOptions={};B0.set=p9.set;B0.setters=[];B0.get=p9.get;/*!
 * Inherits from SchemaType.
 */B0.prototype=Object.create(p9.prototype);B0.prototype.constructor=B0;B0.prototype.OptionsConstructor=Z50;/*!
 * ignore
 */B0._checkRequired=p9.prototype.checkRequired;B0.checkRequired=p9.checkRequired;/*!
 * Virtuals defined on this array itself.
 */B0.prototype.virtuals=null;B0.prototype.checkRequired=function(A,$){if(typeof A==="object"&&p9._isRef(this,A,$,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():B0.checkRequired())(A)};B0.prototype.enum=function(){let F=this;while(!0){let $=F&&F.caster&&F.caster.instance;if($==="Array"){F=F.caster;continue}if($!=="String"&&$!=="Number")throw Error("`enum` can only be set on an array of strings or numbers , not "+$);break}let A=arguments;if(!Array.isArray(arguments)&&Z5.isObject(arguments))A=Z5.object.vals(A);return F.caster.enum.apply(F.caster,A),this};B0.prototype.applyGetters=function(F,A){if(A!=null&&A.$__!=null&&A.$populated(this.path))return F;return p9.prototype.applyGetters.call(this,F,A)};B0.prototype._applySetters=function(F,A,$,B){if(this.casterConstructor.$isMongooseArray&&B0.options.castNonArrays&&!this[dB1]){let J=0,X=this;while(X!=null&&X.$isMongooseArray&&!X.$isMongooseDocumentArray)++J,X=X.casterConstructor;if(F!=null&&F.length!==0){let Y=z50(F);if(Y.min===Y.max&&Y.max<J&&Y.containsNonArrayItem)for(let D=Y.max;D<J;++D)F=[F]}}return p9.prototype._applySetters.call(this,F,A,$,B)};B0.prototype.cast=function(F,A,$,B,J){nD||(nD=wB().Array);let X,Y;if(Array.isArray(F)){if(!F.length&&A){let H=A.schema.indexedPaths(),K=this.path;for(X=0,Y=H.length;X<Y;++X){let V=H[X][0][K];if(V==="2dsphere"||V==="2d")return}let q=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(q!=null){for(X=0,Y=H.length;X<Y;++X)if(H[X][0][q]==="2dsphere")return}}J=J||E50;let Z=Z5.isMongooseArray(F)?F.__array:F,U=J.path||this.path;if(J.arrayPathIndex!=null)U+="."+J.arrayPathIndex;if(F=nD(Z,U,A,this),Z=F.__array,$&&A!=null&&A.$__!=null&&A.$populated(this.path))return F;let z=this.caster,W=z.$isMongooseArray;if(z&&this.casterConstructor!==KK)try{let H=Z.length;for(X=0;X<H;X++){let K={};if(W){if(J.arrayPath!=null)K.arrayPathIndex=X;else if(z._arrayParentPath!=null)K.arrayPathIndex=X}if(J.hydratedPopulatedDocs)K.hydratedPopulatedDocs=J.hydratedPopulatedDocs;Z[X]=z.applySetters(Z[X],A,$,void 0,K)}}catch(H){throw new HK("["+H.kind+"]",qK.inspect(F),this.path+"."+X,H,this)}return F}let D=this.options.castNonArrays!=null?this.options.castNonArrays:B0.options.castNonArrays;if($||D){if(!!A&&!!$)A.markModified(this.path);return this.cast([F],A,$)}throw new HK("Array",qK.inspect(F),this.path,null,this)};/*!
 * ignore
 */B0.prototype._castForPopulate=function(A,$){if(nD||(nD=wB().Array),Array.isArray(A)){let B,J=A.__array?A.__array:A,X=J.length,Y=this.caster;if(Y&&this.casterConstructor!==KK)try{for(B=0;B<X;B++){let D={};if(Y.$isMongooseArray&&Y._arrayParentPath!=null)D.arrayPathIndex=B;J[B]=Y.cast(J[B],$,!1,void 0,D)}}catch(D){throw new HK("["+D.kind+"]",qK.inspect(A),this.path+"."+B,D,this)}return A}throw new HK("Array",qK.inspect(A),this.path,null,this)};B0.prototype.$toObject=B0.prototype.toObject;/*!
 * ignore
 */B0.prototype.discriminator=function(...F){let A=this;while(A.$isMongooseArray&&!A.$isMongooseDocumentArray)if(A=A.casterConstructor,A==null||typeof A==="function")throw new mB1("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return A.discriminator(...F)};/*!
 * ignore
 */B0.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,this.caster,F,this.schemaOptions,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A};B0.prototype._castForQuery=function(F,A){let $=this.casterConstructor;if(F&&$.discriminators&&$.schema&&$.schema.options&&$.schema.options.discriminatorKey)if(typeof F[$.schema.options.discriminatorKey]==="string"&&$.discriminators[F[$.schema.options.discriminatorKey]])$=$.discriminators[F[$.schema.options.discriminatorKey]];else{let G=V50($.discriminators,F[$.schema.options.discriminatorKey]);if(G)$=G}let B=this.casterConstructor.prototype,J=B&&B.castForQuery,X=B&&B.cast,Y=$.castForQuery,D=this.caster;if(Array.isArray(F))this.setters.reverse().forEach((G)=>{F=G.call(this,F,this)}),F=F.map(function(G){if(Z5.isObject(G)&&G.$elemMatch)return G;if(J)return G=J.call(D,null,G,A),G;else if(X)return G=X.call(D,G),G;else if(Y)return G=Y.call(D,null,G,A),G;if(G!=null)return G=new $(G),G;return G});else if(J)F=J.call(D,null,F,A);else if(X)F=X.call(D,F);else if(Y)F=Y.call(D,null,F,A);else if(F!=null)F=new $(F);return F};B0.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],!B)throw Error("Can't use "+F+" with Array.");return B.call(this,A,$)}else return this._castForQuery(A,$)};B0.prototype.virtual=function(A,$){if(A instanceof hB1||H50(A)==="VirtualType")return this.virtual(A.path,A.options);if($=new U50($),Z5.hasUserDefinedProperty($,["ref","refPath"]))throw new mB1("Cannot set populate virtual as a property of an array");let B=new hB1($,A);if(this.virtuals===null)this.virtuals={};return this.virtuals[A]=B,B};function L50(F,A){if(!Array.isArray(F))F=[F];return F=F.map(($)=>{if(!Z5.isObject($))return $;if($.$elemMatch!=null)return{$elemMatch:NS(this.casterConstructor.schema,$.$elemMatch,null,this&&this.$$context)};let B={};return B[this.path]=$,NS(this.casterConstructor.schema,B,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,F,A)}function w50(F,A){let $=Object.keys(F),B=$.length;for(let J=0;J<B;++J){let X=$[J],Y=F[X];if(K50(X)&&Y!=null)F[X]=this.castForQuery(X,Y,A)}return F}var p0=B0.prototype.$conditionalHandlers={};p0.$all=L50;p0.$options=String;p0.$elemMatch=w50;p0.$geoIntersects=PS.cast$geoIntersects;p0.$or=RS("$or");p0.$and=RS("$and");p0.$nor=RS("$nor");function RS(F){return function($,B){if(!Array.isArray($))throw TypeError("conditional "+F+" requires an array");let J=[];for(let X of $)J.push(NS(this.casterConstructor.schema??B.schema,X,null,this&&this.$$context));return J}}p0.$near=p0.$nearSphere=PS.cast$near;p0.$within=p0.$geoWithin=PS.cast$within;p0.$size=p0.$minDistance=p0.$maxDistance=q50;p0.$exists=D50;p0.$type=G50;p0.$eq=p0.$gt=p0.$gte=p0.$lt=p0.$lte=p0.$not=p0.$regex=p0.$ne=B0.prototype._castForQuery;p0.$nin=p9.prototype.$conditionalHandlers.$nin;p0.$in=p9.prototype.$conditionalHandlers.$in;B0.prototype.toJSONSchema=function(A){let $=this.getEmbeddedSchemaType(),B=this.options.required&&typeof this.options.required!=="function";return{...Q50("array","array",A?.useBsonType,B),items:$.toJSONSchema(A)}};B0.prototype.autoEncryptionType=function(){return"array"};/*!
 * Module exports.
 */cB1.exports=B0});var iB1=Q((wR0,pB1)=>{var{Long:I50}=x4(),jS=9223372036854775807n,MS=-9223372036854775808n,lB1=`Mongoose only supports BigInts between ${MS} and ${jS} because MongoDB does not support arbitrary precision integers`;pB1.exports=function(A){if(A==null)return A;if(A==="")return null;if(typeof A==="bigint"){if(A>jS||A<MS)throw Error(lB1);return A}if(A instanceof I50)return A.toBigInt();if(typeof A==="string"||typeof A==="number"){if(A=BigInt(A),A>jS||A<MS)throw Error(lB1);return A}throw Error(`Cannot convert value to BigInt: "${A}"`)}});var rB1=Q((IR0,nB1)=>{/*!
 * Module dependencies.
 */var aB1=a4(),NB=Q6(),C50=iB1(),N50=t4();function E6(F,A,$,B){NB.call(this,F,A,"BigInt",B)}E6.schemaName="BigInt";E6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */E6.prototype=Object.create(NB.prototype);E6.prototype.constructor=E6;/*!
 * ignore
 */E6._cast=C50;E6.set=NB.set;E6.setters=[];E6.get=NB.get;E6.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */E6._checkRequired=(F)=>F!=null;E6.checkRequired=NB.checkRequired;E6.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};E6.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=E6.cast();try{return A(F)}catch($){throw new aB1("BigInt",F,this.path,$,this)}};/*!
 * ignore
 */var P50={...NB.prototype.$conditionalHandlers,$gt:QK,$gte:QK,$lt:QK,$lte:QK};Object.defineProperty(E6.prototype,"$conditionalHandlers",{enumerable:!1,value:P50});/*!
 * ignore
 */function QK(F,A){return this.castForQuery(null,F,A)}E6.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],B)return B.call(this,A);return this.applySetters(A,$)}try{return this.applySetters(A,$)}catch(J){if(J instanceof aB1&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};E6.prototype._castNullish=function(A){if(typeof A>"u")return A;if((typeof this.constructor.cast==="function"?this.constructor.cast():E6.cast())==null)return A;return A};E6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return N50("string","long",A?.useBsonType,$)};E6.prototype.autoEncryptionType=function(){return"long"};/*!
 * Module exports.
 */nB1.exports=E6});var oB1=Q((CR0,sB1)=>{/*!
 * Module dependencies.
 */var tB1=a4(),PB=Q6(),rD=EH(),R50=t4();function t0(F,A,$,B){PB.call(this,F,A,"Boolean",B)}t0.schemaName="Boolean";t0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */t0.prototype=Object.create(PB.prototype);t0.prototype.constructor=t0;/*!
 * ignore
 */t0._cast=rD;t0.set=PB.set;t0.setters=[];t0.get=PB.get;t0.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */t0._defaultCaster=(F)=>{if(F!=null&&typeof F!=="boolean")throw Error();return F};/*!
 * ignore
 */t0._checkRequired=(F)=>F===!0||F===!1;t0.checkRequired=PB.checkRequired;t0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};Object.defineProperty(t0,"convertToTrue",{get:()=>rD.convertToTrue,set:(F)=>{rD.convertToTrue=F}});Object.defineProperty(t0,"convertToFalse",{get:()=>rD.convertToFalse,set:(F)=>{rD.convertToFalse=F}});t0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=t0.cast();try{return A(F)}catch($){throw new tB1("Boolean",F,this.path,$,this)}};var j50={...PB.prototype.$conditionalHandlers};Object.defineProperty(t0.prototype,"$conditionalHandlers",{enumerable:!1,value:j50});t0.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],B)return B.call(this,A);return this.applySetters(A,$)}try{return this.applySetters(A,$)}catch(J){if(J instanceof tB1&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};t0.prototype._castNullish=function(A){if(typeof A>"u")return A;let $=typeof this.constructor.cast==="function"?this.constructor.cast():t0.cast();if($==null)return A;if($.convertToFalse instanceof Set&&$.convertToFalse.has(A))return!1;if($.convertToTrue instanceof Set&&$.convertToTrue.has(A))return!0;return A};t0.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return R50("boolean","bool",A?.useBsonType,$)};t0.prototype.autoEncryptionType=function(){return"bool"};/*!
 * Module exports.
 */sB1.exports=t0});var FJ1=Q((NR0,eB1)=>{var M50=v3();class TS extends M50{}var T50=Q9();Object.defineProperty(TS.prototype,"subtype",T50);/*!
 * ignore
 */eB1.exports=TS});var BJ1=Q((PR0,$J1)=>{/*!
 * Module dependencies.
 */var RB=WB(),k50=FJ1(),h7=Q6(),O50=t4(),VK=pD(),AJ1=P1(),kS=RB.Binary,LK=h7.CastError;function o6(F,A,$,B){h7.call(this,F,A,"Buffer",B)}o6.schemaName="Buffer";o6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */o6.prototype=Object.create(h7.prototype);o6.prototype.constructor=o6;o6.prototype.OptionsConstructor=k50;/*!
 * ignore
 */o6._checkRequired=(F)=>!!(F&&F.length);o6.set=h7.set;o6.setters=[];o6.get=h7.get;o6.checkRequired=h7.checkRequired;o6.prototype.checkRequired=function(F,A){if(h7._isRef(this,F,A,!0))return!!F;return this.constructor._checkRequired(F)};o6.prototype.cast=function(F,A,$,B,J){let X;if(h7._isRef(this,F,A,$)){if(F&&F.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F||!F.isMongooseBuffer){if(F=new RB(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof kS){if(X=new RB(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new LK("Buffer",F,this.path,null,this);return X._subtype=F.sub_type,X}if(F==null||AJ1.isNonBuiltinObject(F))return this._castRef(F,A,$,J)}if(F&&F._id)F=F._id;if(F&&F.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F||!F.isMongooseBuffer){if(F=new RB(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof kS){if(X=new RB(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new LK("Buffer",F,this.path,null,this);return X._subtype=F.sub_type,X}if(F===null)return F;let Y=typeof F;if(Y==="string"||Y==="number"||Array.isArray(F)||Y==="object"&&F.type==="Buffer"&&Array.isArray(F.data)){if(Y==="number")F=[F];if(X=new RB(F,[this.path,A]),this.options.subtype!=null)X._subtype=this.options.subtype;return X}if(AJ1.isPOJO(F)&&(F.$binary instanceof kS||typeof F.$binary==="string")){let D=this.cast(Buffer.from(F.$binary,"base64"));if(F.$type!=null)return D._subtype=F.$type,D}throw new LK("Buffer",F,this.path,null,this)};o6.prototype.subtype=function(F){return this.options.subtype=F,this};/*!
 * ignore
 */function EK(F,A){return this.castForQuery(null,F,A)}var S50={...h7.prototype.$conditionalHandlers,$bitsAllClear:VK,$bitsAnyClear:VK,$bitsAllSet:VK,$bitsAnySet:VK,$gt:EK,$gte:EK,$lt:EK,$lte:EK};Object.defineProperty(o6.prototype,"$conditionalHandlers",{enumerable:!1,value:S50});o6.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],!B)throw Error("Can't use "+F+" with Buffer.");return B.call(this,A)}let J;try{J=this.applySetters(A,$)}catch(X){if(X instanceof LK&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}return J?J.toObject({transform:!1,virtuals:!1}):J};o6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return O50("string","binData",A?.useBsonType,$)};o6.prototype.autoEncryptionType=function(){return"binData"};/*!
 * Module exports.
 */$J1.exports=o6});var XJ1=Q((RR0,JJ1)=>{var u50=v3();class tD extends u50{}var OS=Q9();Object.defineProperty(tD.prototype,"min",OS);Object.defineProperty(tD.prototype,"max",OS);Object.defineProperty(tD.prototype,"expires",OS);/*!
 * ignore
 */JJ1.exports=tD});var DJ1=Q((jR0,YJ1)=>{var SS=x("assert");YJ1.exports=function(A){if(A==null||A==="")return null;if(A instanceof Date)return SS.ok(!isNaN(A.valueOf())),A;let $;if(SS.ok(typeof A!=="boolean"),A instanceof Number||typeof A==="number")$=new Date(A);else if(typeof A==="string"&&!isNaN(Number(A))&&(Number(A)>=275761||Number(A)<-271820))$=new Date(Number(A));else if(typeof A.valueOf==="function")$=new Date(A.valueOf());else $=new Date(A);if(!isNaN($.valueOf()))return $;SS.ok(!1)}});var zJ1=Q((MR0,UJ1)=>{/*!
 * Module requirements.
 */var GJ1=_3(),f50=XJ1(),U5=Q6(),x50=DJ1(),b50=t4(),g50=E3(),_50=P1(),ZJ1=U5.CastError;function i0(F,A,$,B){U5.call(this,F,A,"Date",B)}i0.schemaName="Date";i0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */i0.prototype=Object.create(U5.prototype);i0.prototype.constructor=i0;i0.prototype.OptionsConstructor=f50;/*!
 * ignore
 */i0._cast=x50;i0.set=U5.set;i0.setters=[];i0.get=U5.get;i0.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */i0._defaultCaster=(F)=>{if(F!=null&&!(F instanceof Date))throw Error();return F};i0.prototype.expires=function(F){if(g50(this._index)!=="Object")this._index={};return this._index.expires=F,_50.expires(this._index),this};/*!
 * ignore
 */i0._checkRequired=(F)=>F instanceof Date;i0.checkRequired=U5.checkRequired;i0.prototype.checkRequired=function(F,A){if(typeof F==="object"&&U5._isRef(this,F,A,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():i0.checkRequired())(F)};i0.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function($){return $.validator!==this.minValidator},this);if(F){let $=A||GJ1.messages.Date.min;if(typeof $==="string")$=$.replace(/{MIN}/,F===Date.now?"Date.now()":F.toString());let B=this;this.validators.push({validator:this.minValidator=function(J){let X=F;if(typeof F==="function"&&F!==Date.now)X=X.call(this);let Y=X===Date.now?X():B.cast(X);return J===null||J.valueOf()>=Y.valueOf()},message:$,type:"min",min:F})}return this};i0.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function($){return $.validator!==this.maxValidator},this);if(F){let $=A||GJ1.messages.Date.max;if(typeof $==="string")$=$.replace(/{MAX}/,F===Date.now?"Date.now()":F.toString());let B=this;this.validators.push({validator:this.maxValidator=function(J){let X=F;if(typeof X==="function"&&X!==Date.now)X=X.call(this);let Y=X===Date.now?X():B.cast(X);return J===null||J.valueOf()<=Y.valueOf()},message:$,type:"max",max:F})}return this};i0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=i0.cast();try{return A(F)}catch($){throw new ZJ1("date",F,this.path,$,this)}};function wK(F){return this.cast(F)}var y50={...U5.prototype.$conditionalHandlers,$gt:wK,$gte:wK,$lt:wK,$lte:wK};Object.defineProperty(i0.prototype,"$conditionalHandlers",{enumerable:!1,value:y50});i0.prototype.castForQuery=function(F,A,$){if(F==null)try{return this.applySetters(A,$)}catch(J){if(J instanceof ZJ1&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}let B=this.$conditionalHandlers[F];if(!B)throw Error("Can't use "+F+" with Date.");return B.call(this,A)};i0.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return b50("string","date",A?.useBsonType,$)};i0.prototype.autoEncryptionType=function(){return"date"};/*!
 * Module exports.
 */UJ1.exports=i0});var HJ1=Q((TR0,WJ1)=>{var yF=WH(),v50=x("assert");WJ1.exports=function(A){if(A==null)return A;if(typeof A==="object"&&typeof A.$numberDecimal==="string")return yF.fromString(A.$numberDecimal);if(A instanceof yF)return A;if(typeof A==="string")return yF.fromString(A);if(typeof Buffer==="function"&&Buffer.isBuffer(A))return new yF(A);if(typeof Uint8Array==="function"&&A instanceof Uint8Array)return new yF(A);if(typeof A==="number")return yF.fromString(String(A));if(typeof A.valueOf==="function"&&typeof A.valueOf()==="string")return yF.fromString(A.valueOf());v50.ok(!1)}});var qJ1=Q((kR0,KJ1)=>{/*!
 * Module dependencies.
 */var m7=Q6(),h50=m7.CastError,m50=HJ1(),d50=t4(),uS=M4();function S6(F,A,$,B){m7.call(this,F,A,"Decimal128",B)}S6.schemaName="Decimal128";S6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */S6.prototype=Object.create(m7.prototype);S6.prototype.constructor=S6;/*!
 * ignore
 */S6._cast=m50;S6.set=m7.set;S6.setters=[];S6.get=m7.get;S6.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */S6._defaultCaster=(F)=>{if(F!=null&&!uS(F,"Decimal128"))throw Error();return F};/*!
 * ignore
 */S6._checkRequired=(F)=>uS(F,"Decimal128");S6.checkRequired=m7.checkRequired;S6.prototype.checkRequired=function(A,$){if(m7._isRef(this,A,$,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():S6.checkRequired())(A)};S6.prototype.cast=function(F,A,$,B,J){if(m7._isRef(this,F,A,$)){if(uS(F,"Decimal128"))return F;return this._castRef(F,A,$,J)}let X;if(typeof this._castFunction==="function")X=this._castFunction;else if(typeof this.constructor.cast==="function")X=this.constructor.cast();else X=S6.cast();try{return X(F)}catch(Y){throw new h50("Decimal128",F,this.path,Y,this)}};/*!
 * ignore
 */function IK(F){return this.cast(F)}var c50={...m7.prototype.$conditionalHandlers,$gt:IK,$gte:IK,$lt:IK,$lte:IK};Object.defineProperty(S6.prototype,"$conditionalHandlers",{enumerable:!1,value:c50});S6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return d50("string","decimal",A?.useBsonType,$)};S6.prototype.autoEncryptionType=function(){return"decimal"};/*!
 * Module exports.
 */KJ1.exports=S6});var EJ1=Q((OR0,VJ1)=>{var l50=v3();class CK extends l50{}var QJ1=Q9();Object.defineProperty(CK.prototype,"_id",QJ1);Object.defineProperty(CK.prototype,"minimize",QJ1);VJ1.exports=CK});var fS=Q((SR0,LJ1)=>{LJ1.exports=function(A,$,B){if(A.length===0)return B();let J=A.length,X=null;for(let Y of A)$(Y,function(D){if(X!=null)return;if(D!=null)return X=D,B(X);if(--J<=0)return B()})}});var IJ1=Q((uR0,wJ1)=>{var p50=fS();/*!
 * ignore
 */wJ1.exports=function(A){A.s.hooks.pre("save",!1,function(J){if(this.$isSubdocument){J();return}let X=this,Y=this.$getAllSubdocs({useCache:!0});if(!Y.length){J();return}p50(Y,function(D,G){D.$__schema.s.hooks.execPre("save",D,function(Z){G(Z)})},function(D){if(X.$__.saveOptions)X.$__.saveOptions.__subdocs=null;if(D)return X.$__schema.s.hooks.execPost("save:error",X,[X],{error:D},function(G){J(G)});J()})},null,!0),A.s.hooks.post("save",async function(){let J=this.$__.removedSubdocs;if(!J||!J.length)return;let X=[];for(let Y of J)X.push(new Promise((D,G)=>{Y.$__schema.s.hooks.execPost("deleteOne",Y,[Y],function(Z){if(Z)return G(Z);D()})}));this.$__.removedSubdocs=null,await Promise.all(X)}),A.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let J=this,X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Y=[];for(let D of X)Y.push(new Promise((G,Z)=>{D.$__schema.s.hooks.execPost("save",D,[D],function(U){if(U)return Z(U);G()})}));try{await Promise.all(Y)}catch(D){await new Promise((G,Z)=>{this.$__schema.s.hooks.execPost("save:error",J,[J],{error:D},function(U){if(U)return Z(U);G()})})}},null,!0)}});var PJ1=Q((fR0,bS)=>{var i50=q1().objectIdSymbol,CJ1=P1();/*!
 * ignore
 */bS.exports=function(A){A.post("init",function(){return xS.call(this),this}),A.pre("save",function(B){NJ1.call(this),B()}),A.pre("deleteOne",{document:!0,query:!1},function(B){NJ1.call(this),B()}),A.post("save",function(){xS.call(this)})};/*!
 * ignore
 */function NJ1(){let F,A;if(this.$__.shardval){F=Object.keys(this.$__.shardval),A=F.length,this.$where=this.$where||{};for(let $=0;$<A;++$)this.$where[F[$]]=this.$__.shardval[F[$]]}}/*!
 * ignore
 */bS.exports.storeShard=xS;/*!
 * ignore
 */function xS(){let F=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!CJ1.isPOJO(F))return;let A=this.$__.shardval={},$=Object.keys(F),B=$.length,J;for(let X=0;X<B;++X)if(J=this.$__getValue($[X]),J==null)A[$[X]]=J;else if(CJ1.isMongooseObject(J))A[$[X]]=J.toObject({depopulate:!0,_isNested:!0});else if(J instanceof Date||J[i50])A[$[X]]=J;else if(typeof J.valueOf==="function")A[$[X]]=J.valueOf();else A[$[X]]=J}});var MJ1=Q((xR0,jJ1)=>{var jB=q1().arrayAtomicsSymbol,gS=q1().sessionNewDocuments,a50=P1();jJ1.exports=function(A){A.pre("save",function(){let B=this.$session();if(B==null)return;if(B.transaction==null||B[gS]==null)return;if(!B[gS].has(this)){let J={};if(this.isNew)J.isNew=!0;if(this.$__schema.options.versionKey)J.versionKey=this.get(this.$__schema.options.versionKey);J.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),J.atomics=n50(this),B[gS].set(this,J)}})};function n50(F,A){let $=new Map;A=A||new Map;let B=Object.keys(F.$__.activePaths.init).concat(Object.keys(F.$__.activePaths.modify));for(let X of B){let Y=F.$__getValue(X);if(Y!=null&&Array.isArray(Y)&&a50.isMongooseDocumentArray(Y)&&Y.length&&Y[jB]!=null&&Object.keys(Y[jB]).length!==0){let D=A.get(X)||{};$.set(X,RJ1(D,Y[jB]))}}let J=F.$__dirty();for(let X of J){let{path:Y,value:D}=X;if(D!=null&&D[jB]!=null&&Object.keys(D[jB]).length!==0){let G=A.get(Y)||{};$.set(Y,RJ1(G,D[jB]))}}return $}function RJ1(F,A){if(F=F||{},A.$pullAll!=null)F.$pullAll=(F.$pullAll||[]).concat(A.$pullAll);if(A.$push!=null)F.$push=F.$push||{},F.$push.$each=(F.$push.$each||[]).concat(A.$push.$each);if(A.$addToSet!=null)F.$addToSet=(F.$addToSet||[]).concat(A.$addToSet);if(A.$set!=null)F.$set=Array.isArray(A.$set)?[...A.$set]:Object.assign({},A.$set);return F}});var kJ1=Q((bR0,TJ1)=>{/*!
 * ignore
 */TJ1.exports=function(A){A.pre("save",!1,function(J,X){let Y=this;if(this.$isSubdocument)return J();let D=X&&typeof X==="object"&&"validateBeforeSave"in X,G;if(D)G=!!X.validateBeforeSave;else G=this.$__schema.options.validateBeforeSave;if(G){let U=X&&typeof X==="object"&&"validateModifiedOnly"in X?{validateModifiedOnly:X.validateModifiedOnly}:null;this.$validate(U).then(()=>{this.$op="save",J()},(z)=>{Y.$__schema.s.hooks.execPost("save:error",Y,[Y],{error:z},function(W){Y.$op="save",J(W)})})}else J()},null,!0)}});var _S=Q((r50)=>{r50.saveSubdocs=IJ1();r50.sharding=PJ1();r50.trackTransaction=MJ1();r50.validateBeforeSave=kJ1()});var uJ1=Q((_R0,SJ1)=>{var OJ1=_S();SJ1.exports=function(A){for(let $ of Object.values(OJ1))$(A,{deduplicate:!0});A.plugins=Object.values(OJ1).map(($)=>({fn:$,opts:{deduplicate:!0}})).concat(A.plugins)}});var bJ1=Q((yR0,xJ1)=>{var FF0=CH(),AF0=jF(),$F0=M4(),BF0=x7(),JF0=Q6(),fJ1=$5();xJ1.exports=function F(A,$,B,J){let X=Object.keys($),Y=0,D=X.length,G;if(B=B||"",J=J||new WeakSet,J.has($))return;J.add($);while(Y<D){if(G=X[Y++],!B){if(G==="discriminators"||G==="base"||G==="_applyDiscriminators"||G==="_userProvidedOptions"||G==="options"||G==="tree")continue}if(B==="tree"&&$!=null&&$.instanceOfSchema)continue;if(AF0.has(G))continue;if(A[G]==null)A[G]=$[G];else if(fJ1($[G])){if(!fJ1(A[G]))A[G]={};if($[G]!=null){if($[G].$isSingleNested&&A[G].$isMongooseDocumentArray||$[G].$isMongooseDocumentArray&&A[G].$isSingleNested||$[G].$isMongooseDocumentArrayElement&&A[G].$isMongooseDocumentArrayElement)continue;else if($[G].instanceOfSchema){if(A[G].instanceOfSchema)FF0(A[G],$[G].clone(),!0);else A[G]=$[G].clone();continue}else if($F0($[G],"ObjectId")){A[G]=new BF0($[G]);continue}else if($[G]instanceof JF0){if(A[G]==null)A[G]=$[G].clone();if(!$[G].$isMongooseDocumentArray&&!$[G].$isSingleNested)continue}}F(A[G],$[G],B?B+"."+G:G,J)}}if($!=null&&$.instanceOfSchema)A.tree=Object.assign({},$.tree,A.tree)}});var NK=Q((vR0,yJ1)=>{var gJ1=HB(),XF0=uJ1(),YF0=Z6(),DF0=kH().defineKey,GF0=V6(),yS=P1(),ZF0=bJ1(),_J1={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function UF0(F,A){if(F.encryptionType()==null&&A.encryptionType()==null)return;let $=J(B(F),B(A));for(let X of $){if(F._hasEncryptedField(X)&&A._hasEncryptedField(X))throw Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${X}`);if(F._hasEncryptedField(X)||A._hasEncryptedField(X))throw Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${X}`)}function B(X){return[...Object.keys(X.paths),...Object.keys(X.singleNestedPaths)]}function*J(X,Y){let D=new Set(X);for(let G of Y)if(D.has(G))yield G}}/*!
 * ignore
 */yJ1.exports=function(A,$,B,J,X,Y,D){if(!(B&&B.instanceOfSchema))throw Error("You must pass a valid discriminator Schema");if(Y=Y==null?!0:Y,A.schema.discriminatorMapping&&!A.schema.discriminatorMapping.isRoot)throw Error('Discriminator "'+$+'" can only be a discriminator of the root model');if(X){let W=GF0(A.base,"options.applyPluginsToDiscriminators",!1)||!Y;A.base._applyPlugins(B,{skipTopLevel:!W})}else if(!Y)XF0(B);let G=A.schema.options.discriminatorKey,Z=A.schema.path(G);if(Z!=null){if(!yS.hasUserDefinedProperty(Z.options,"select"))Z.options.select=!0;Z.options.$skipDiscriminatorCheck=!0}else{let W={};W[G]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},W[G][A.schema.options.typeKey]=String,A.schema.add(W),DF0({prop:G,prototype:A.prototype,options:A.schema.options})}if(B.path(G)&&B.path(G).options.$skipDiscriminatorCheck!==!0)throw Error('Discriminator "'+$+'" cannot have field with name "'+G+'"');let U=$;if(typeof J==="string"&&J.length||J!=null)U=J;UF0(A.schema,B);function z(W,H){if(W._baseSchema=H,H.paths._id&&H.paths._id.options&&!H.paths._id.options.auto)W.remove("_id");let K=Object.keys(H.paths),q=[];for(let u of K){if(W.nested[u]){q.push(u);continue}if(u.indexOf(".")===-1)continue;let g=u.split(".").slice(0,-1),S="";for(let O of g)if(S+=(S.length?".":"")+O,W.paths[S]instanceof gJ1||W.singleNestedPaths[S]instanceof gJ1)q.push(u)}W.obj={...W.obj},ZF0(W,H),W._gatherChildSchemas();for(let u of q)delete W.paths[u];W.childSchemas.forEach((u)=>{u.model.prototype.$__setSchema(u.schema)});let V={};if(V[G]={default:U,select:!0,set:function(u){if(u===U||Array.isArray(U)&&yS.deepEqual(u,U))return U;throw Error(`Can't set discriminator key "`+G+'"')},$skipDiscriminatorCheck:!0},V[G][W.options.typeKey]=Z?Z.options[W.options.typeKey]:String,W.add(V),W.discriminatorMapping={key:G,value:U,isRoot:!1},H.options.collection)W.options.collection=H.options.collection;let E=W.options.toJSON,L=W.options.toObject,w=W.options._id,I=W.options.id,P=Object.keys(W.options);W.options.discriminatorKey=H.options.discriminatorKey;let M=W._userProvidedOptions;for(let u of P)if(!_J1[u]){if(u in M&&!yS.deepEqual(W.options[u],H.options[u]))throw Error("Can't customize discriminator option "+u+" (can only modify "+Object.keys(_J1).join(", ")+")")}W.options=YF0(H.options);for(let u of Object.keys(M))W.options[u]=M[u];if(E)W.options.toJSON=E;if(L)W.options.toObject=L;if(typeof w<"u")W.options._id=w;if(W.options.id=I,Y)W.s.hooks=A.schema.s.hooks.merge(W.s.hooks);if(X)W.plugins=Array.prototype.slice.call(H.plugins);W.callQueue=H.callQueue.concat(W.callQueue),delete W._requiredpaths}if(z(B,A.schema),!A.discriminators)A.discriminators={};if(!A.schema.discriminatorMapping)A.schema.discriminatorMapping={key:G,value:null,isRoot:!0};if(!A.schema.discriminators)A.schema.discriminators={};if(A.schema.discriminators[$]=B,A.discriminators[$]&&!B.options.overwriteModels&&!D)throw Error('Discriminator with name "'+$+'" already exists');return B}});var PK=Q((hR0,vJ1)=>{var zF0=c9();vJ1.exports=function(A,$,B){let J=A.schema.options.discriminatorKey,X=$!=null&&$[J];if(X==null)X=B;if(A.discriminators&&X!=null)if(A.discriminators[X])A=A.discriminators[X];else{let Y=zF0(A.discriminators,X);if(Y)A=Y}return A}});var vS=Q((mR0,hJ1)=>{var WF0=AS();hJ1.exports=function(A,$){if($==null||$._id==null)return A;if(A=A.clone(),!$._id)A.remove("_id"),A.options._id=!1;else if(!A.paths._id)WF0(A),A.options._id=!0;return A}});var mS=Q((dR0,mJ1)=>{/*!
 * Module dependencies.
 */var HF0=d1();class hS extends HF0{constructor(F,A){let $=`Cannot create use schema for property "${F}" because the schema has the ${A} option enabled.`;super($)}}Object.defineProperty(hS.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */mJ1.exports=hS});var pS=Q((cR0,pJ1)=>{/*!
 * Module dependencies.
 */var dJ1=a4(),dS=x("events").EventEmitter,KF0=PH(),qF0=EJ1(),vF=Q6(),QF0=jH(),VF0=LH(),cJ1=iD().castToNumber,EF0=t4(),LF0=NK(),cS=CS(),lS=PK(),wF0=vS(),IF0=R2().internalToObjectOptions,CF0=QB(),NF0=P1(),PF0=mS(),RK;pJ1.exports=v6;function v6(F,A,$,B){if(F.options.timeseries)throw new PF0(A,"timeseries");let J=v6.defaultOptions&&v6.defaultOptions._id;if(J!=null)$=$||{},$._id=J;F=wF0(F,$),this.caster=lJ1(F,null,$),this.caster.path=A,this.caster.prototype.$basePath=A,this.schema=F,this.$isSingleNested=!0,this.base=F.base,vF.call(this,A,$,"Embedded",B)}/*!
 * ignore
 */v6.prototype=Object.create(vF.prototype);v6.prototype.constructor=v6;v6.prototype.OptionsConstructor=qF0;/*!
 * ignore
 */function lJ1(F,A,$){RK||(RK=xH());let B=function(Y,D,G){if(this.$__parent=G,RK.apply(this,arguments),G==null)return;this.$session(G.$session())};F._preCompile();let J=A!=null?A.prototype:RK.prototype;B.prototype=Object.create(J),B.prototype.$__setSchema(F),B.prototype.constructor=B,B.prototype.$__schemaTypeOptions=$,B.$__required=$?.required,B.base=F.base,B.schema=F,B.$isSingleNested=!0,B.events=new dS,B.prototype.toBSON=function(){return this.toObject(IF0)};for(let X in F.methods)B.prototype[X]=F.methods[X];for(let X in F.statics)B[X]=F.statics[X];for(let X in dS.prototype)B[X]=dS.prototype[X];return B}/*!
 * ignore
 */var F7={...vF.prototype.$conditionalHandlers};F7.$geoWithin=function(A,$){return{$geometry:this.castForQuery(null,A.$geometry,$)}};/*!
 * ignore
 */F7.$near=F7.$nearSphere=cS.cast$near;F7.$within=F7.$geoWithin=cS.cast$within;F7.$geoIntersects=cS.cast$geoIntersects;F7.$minDistance=cJ1;F7.$maxDistance=cJ1;F7.$exists=VF0;Object.defineProperty(v6.prototype,"$conditionalHandlers",{enumerable:!1,value:F7});v6.prototype.cast=function(F,A,$,B,J){if(F&&F.$isSingleNested&&F.parent===A)return F;if(F!=null&&(typeof F!=="object"||Array.isArray(F)))throw new KF0(this.path,F);let X=this.schema.path(this.schema.options.discriminatorKey),Y=X==null?null:X.getDefault(A),D=lS(this.caster,F,Y),G,Z=A&&A.$__&&A.$__.selected,U=this.path,z=Z==null?null:Object.keys(Z).reduce((W,H)=>{if(H.startsWith(U+"."))W=W||{},W[H.substring(U.length+1)]=Z[H];return W},null);if($){if(G=new D(void 0,z,A,!1,{defaults:!1}),delete G.$__.defaults,J.path!=null)J={...J},delete J.path;G.$init(F,J);let W=CF0(z);QF0(G,z,W)}else{if(J=Object.assign({},J,{priorDoc:B}),Object.keys(F).length===0)return new D({},z,A,void 0,J);return new D(F,z,A,void 0,J)}return G};v6.prototype.castForQuery=function(F,A,$,B){let J;if(F!=null){if(J=this.$conditionalHandlers[F],!J)throw Error("Can't use "+F);return J.call(this,A)}if(A==null)return A;let X=lS(this.caster,A);if(A instanceof X)return A;if(this.options.runSetters)A=this._applySetters(A,$);let Y=B!=null&&B.strict!=null?B.strict:void 0;try{A=new X(A,Y)}catch(D){if(!(D instanceof dJ1))throw new dJ1("Embedded",A,this.path,D,this);throw D}return A};v6.prototype.doValidate=function(F,A,$,B){let J=lS(this.caster,F);if(F&&!(F instanceof J))F=new J(F,null,$!=null&&$.$__!=null?$:null);if(B&&B.skipSchemaValidators){if(!F)return A(null);return F.validate().then(()=>A(null),(X)=>A(X))}vF.prototype.doValidate.call(this,F,function(X){if(X)return A(X);if(!F)return A(null);F.validate().then(()=>A(null),(Y)=>A(Y))},$,B)};v6.prototype.doValidateSync=function(F,A,$){if(!$||!$.skipSchemaValidators){let B=vF.prototype.doValidateSync.call(this,F,A);if(B)return B}if(!F)return;return F.validateSync()};v6.prototype.discriminator=function(F,A,$){$=$||{};let B=NF0.isPOJO($)?$.value:$,J=typeof $.clone==="boolean"?$.clone:!0;if(A.instanceOfSchema&&J)A=A.clone();return A=LF0(this.caster,F,A,B,null,null,$.overwriteExisting),this.caster.discriminators[F]=lJ1(A,this.caster),this.caster.discriminators[F]};/*!
 * ignore
 */v6.defaultOptions={};v6.set=vF.set;v6.setters=[];v6.get=vF.get;/*!
 * ignore
 */v6.prototype.toJSON=function(){return{path:this.path,options:this.options}};/*!
 * ignore
 */v6.prototype.clone=function(){let F=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.caster.discriminators=Object.assign({},this.caster.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F};v6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return{...this.schema.toJSONSchema(A),...EF0("object","object",A?.useBsonType,$)}}});var aJ1=Q((lR0,iJ1)=>{/*!
 * Module dependencies.
 */var RF0=d1(),iS=Q6(),jF0=pS(),MF0=PK();function d7(F,A,$,B){if(this.$parentSchemaType=A&&A.$parentSchemaType,!this.$parentSchemaType)throw new RF0("Cannot create DocumentArrayElement schematype without a parent");delete A.$parentSchemaType,iS.call(this,F,A,"DocumentArrayElement",B),this.$isMongooseDocumentArrayElement=!0}d7.schemaName="DocumentArrayElement";d7.defaultOptions={};/*!
 * Inherits from SchemaType.
 */d7.prototype=Object.create(iS.prototype);d7.prototype.constructor=d7;d7.prototype.cast=function(...F){return this.$parentSchemaType.cast(...F)[0]};d7.prototype.doValidate=function(F,A,$,B){let J=MF0(this.caster,F);if(F&&!(F instanceof J))F=new J(F,$,null,null,B&&B.index!=null?B.index:null);return jF0.prototype.doValidate.call(this,F,A,$,B)};d7.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let F=iS.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,F.caster=this.caster,F.schema=this.schema,F};/*!
 * Module exports.
 */iJ1.exports=d7});var tJ1=Q((pR0,rJ1)=>{var TF0=v3();class jK extends TF0{}var nJ1=Q9();Object.defineProperty(jK.prototype,"excludeIndexes",nJ1);Object.defineProperty(jK.prototype,"_id",nJ1);/*!
 * ignore
 */rJ1.exports=jK});var XX1=Q((iR0,JX1)=>{/*!
 * Module dependencies.
 */var sJ1=a4(),kF0=aJ1(),aS=x("events").EventEmitter,rS=zK(),OF0=tJ1(),sD=Q6(),oJ1=_F(),eJ1=t4(),SF0=NK(),FX1=vS(),uF0=uH(),fF0=cD(),MB=P1(),MK=PK(),xF0=mS(),AX1=q1().arrayAtomicsSymbol,nS=q1().arrayPathSymbol,bF0=q1().documentArrayParent,c7,hF;function A6(F,A,$,B,J){if(A.options&&A.options.timeseries)throw new xF0(F,"timeseries");let X=A6.defaultOptions&&A6.defaultOptions._id;if(X!=null)B=B||{},B._id=X;if(B!=null&&B._id!=null)A=FX1(A,B);else if($!=null&&$._id!=null)A=FX1(A,$);let Y=BX1(A,$);Y.prototype.$basePath=F,rS.call(this,F,Y,$,null,J),this.schema=A,this.schemaOptions=B||{},this.$isMongooseDocumentArray=!0,this.Constructor=Y,Y.base=A.base;let D=this.defaultValue;if(!("defaultValue"in this)||D!=null)this.default(function(){let Z=D.call(this);if(Z!=null&&!Array.isArray(Z))Z=[Z];return Z});let G=this;this.$embeddedSchemaType=new kF0(F+".$",{...B||{},$parentSchemaType:G},B,J),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}A6.schemaName="DocumentArray";A6.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */A6.prototype=Object.create(rS.prototype);A6.prototype.constructor=A6;A6.prototype.OptionsConstructor=OF0;Object.defineProperty(A6.prototype,"$conditionalHandlers",{enumerable:!1,value:{...rS.prototype.$conditionalHandlers}});/*!
 * ignore
 */function BX1(F,A,$){hF||(hF=VB());function B(){if(hF.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}F._preCompile();let J=$!=null?$.prototype:hF.prototype;B.prototype=Object.create(J),B.prototype.$__setSchema(F),B.schema=F,B.prototype.constructor=B,B.$isArraySubdocument=!0,B.events=new aS,B.base=F.base;for(let X in F.methods)B.prototype[X]=F.methods[X];for(let X in F.statics)B[X]=F.statics[X];for(let X in aS.prototype)B[X]=aS.prototype[X];return B.options=A,B}A6.prototype.discriminator=function(F,A,$){if(typeof F==="function")F=MB.getFunctionName(F);$=$||{};let B=MB.isPOJO($)?$.value:$,J=typeof $.clone==="boolean"?$.clone:!0;if(A.instanceOfSchema&&J)A=A.clone();A=SF0(this.casterConstructor,F,A,B,null,null,$?.overwriteExisting);let X=BX1(A,null,this.casterConstructor);X.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(X,"name",{value:F})}catch(Y){}return this.casterConstructor.discriminators[F]=X,this.casterConstructor.discriminators[F]};A6.prototype.doValidate=function(F,A,$,B){c7||(c7=xF());let J=this;try{sD.prototype.doValidate.call(this,F,X,$)}catch(Y){return A(Y)}function X(Y){if(Y)return A(Y);let D=F&&F.length,G;if(!D)return A();if(B&&B.updateValidator)return A();if(!MB.isMongooseDocumentArray(F))F=new c7(F,J.path,$);function Z(U){if(U!=null)G=U;--D||A(G)}for(let U=0,z=D;U<z;++U){let W=F[U];if(W==null){--D||A(G);continue}if(!(W instanceof hF)){let H=MK(J.casterConstructor,F[U]);W=F[U]=new H(W,F,void 0,void 0,U)}if(B!=null&&B.validateModifiedOnly&&!W.$isModified()){--D||A(G);continue}W.$__validate(null,B,Z)}}};A6.prototype.doValidateSync=function(F,A,$){let B=sD.prototype.doValidateSync.call(this,F,A);if(B!=null)return B;let J=F&&F.length,X=null;if(!J)return;for(let Y=0,D=J;Y<D;++Y){let G=F[Y];if(!G)continue;if(!(G instanceof hF)){let U=MK(this.casterConstructor,F[Y]);G=F[Y]=new U(G,F,void 0,void 0,Y)}if($!=null&&$.validateModifiedOnly&&!G.$isModified())continue;let Z=G.validateSync($);if(Z&&X==null)X=Z}return X};/*!
 * ignore
 */A6.prototype.getDefault=function(F,A,$){let B=typeof this.defaultValue==="function"?this.defaultValue.call(F):this.defaultValue;if(B==null)return B;if($&&$.skipCast)return B;if(c7||(c7=xF()),!Array.isArray(B))B=[B];B=new c7(B,this.path,F);for(let J=0;J<B.length;++J){let Y=new(MK(this.casterConstructor,B[J]))({},B,void 0,void 0,J);Y.$init(B[J]),Y.isNew=!0,Object.assign(Y.$__.activePaths.default,Y.$__.activePaths.init),Y.$__.activePaths.init={},B[J]=Y}return B};var gF0=Object.freeze({transform:!1,virtuals:!1}),$X1=Object.freeze({skipId:!1,willInit:!0});A6.prototype.cast=function(F,A,$,B,J){if(c7||(c7=xF()),F!=null&&F[nS]!=null&&F===B)return F;let X,Y;J=J||{};let D=J.path||this.path;if(!Array.isArray(F)){if(!$&&!A6.options.castNonArrays)throw new sJ1("DocumentArray",F,this.path,null,this);if(!!A&&$)A.markModified(D);return this.cast([F],A,$,B,J)}if(!J.skipDocumentArrayCast||MB.isMongooseDocumentArray(F))F=new c7(F,D,A,this);if(B!=null)F[AX1]=B[AX1]||{};if(J.arrayPathIndex!=null)F[nS]=D+"."+J.arrayPathIndex;let G=MB.isMongooseDocumentArray(F)?F.__array:F,Z=G.length;for(let U=0;U<Z;++U){if(!G[U])continue;let z=MK(this.casterConstructor,G[U]),W=uF0(G[U],!0);if(G[U]!==W)G[U]=W;if(G[U]instanceof hF){if(G[U][bF0]!==A)if($){let H=new z(null,F,$X1,X,U);G[U]=H.$init(G[U])}else{let H=new z(G[U],F,void 0,void 0,U);G[U]=H}if(G[U].__index==null)G[U].$setIndex(U)}else if(G[U]!=null)if($){if(A)X||(X=_F0(this,A.$__.selected,$));else X=!0;Y=new z(null,F,$X1,X,U),G[U]=Y.$init(G[U],J)}else{if(B&&typeof B.id==="function")Y=B.id(G[U]._id);if(B&&Y&&MB.deepEqual(Y.toObject(gF0),G[U]))Y.set(G[U]),G[U]=Y;else try{Y=new z(G[U],F,void 0,void 0,U),G[U]=Y}catch(H){throw new sJ1("embedded",G[U],F[nS],H,this)}}}return F};/*!
 * ignore
 */A6.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,this.schema,F,this.schemaOptions,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),A._appliedDiscriminators=this._appliedDiscriminators,A};/*!
 * ignore
 */A6.prototype.applyGetters=function(F,A){return sD.prototype.applyGetters.call(this,F,A)};function _F0(F,A,$){if(!($&&A))return;let B=F.path+".",J=Object.keys(A),X=J.length,Y={},D,G,Z;while(X--)if(G=J[X],G.startsWith(B)){if(Z=G.substring(B.length),Z==="$")continue;if(Z.startsWith("$."))Z=Z.substring(2);D||(D=!0),Y[Z]=A[G]}return D&&Y||void 0}/*!
 * ignore
 */A6.defaultOptions={};A6.set=sD.set;A6.setters=[];A6.get=sD.get;/*!
 * Handle casting $elemMatch operators
 */A6.prototype.$conditionalHandlers.$elemMatch=yF0;function yF0(F,A){let $=Object.keys(F),B=$.length;for(let D=0;D<B;++D){let G=$[D],Z=F[G];if(fF0(G)&&Z!=null)F[G]=this.castForQuery(G,Z,A)}let J=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,X=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(J!=null&&F[J]!=null&&X[F[J]]!=null)return oJ1(X[F[J]],F,null,this&&this.$$context);let Y=this.casterConstructor.schema??A.schema;return oJ1(Y,F,null,this&&this.$$context)}A6.prototype.toJSONSchema=function(A){let $=eJ1("object","object",A?.useBsonType,!1),B=this.options.required&&typeof this.options.required!=="function";return{...eJ1("array","array",A?.useBsonType,B),items:{...$,...this.schema.toJSONSchema(A)}}};/*!
 * Module exports.
 */JX1.exports=A6});var GX1=Q((aR0,DX1)=>{var YX1=x("assert"),tS=x4(),vF0=M4();DX1.exports=function(A){if(A==null||A==="")return null;let $;if(vF0(A,"Long"))$=A.toNumber();else if(typeof A==="string")try{return $=tS.Double.fromString(A),$}catch{YX1.ok(!1)}else if(typeof A==="object"){let B=A.valueOf()??A.toString();if(typeof B==="string")try{return $=tS.Double.fromString(A),$}catch{YX1.ok(!1)}else $=Number(B)}else $=Number(A);return new tS.Double($)}});var UX1=Q((nR0,ZX1)=>{/*!
 * Module dependencies.
 */var hF0=a4(),TB=Q6(),mF0=GX1(),dF0=t4();function h6(F,A,$,B){TB.call(this,F,A,"Double",B)}h6.schemaName="Double";h6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */h6.prototype=Object.create(TB.prototype);h6.prototype.constructor=h6;/*!
 * ignore
 */h6._cast=mF0;h6.set=TB.set;h6.setters=[];h6.get=TB.get;/*!
 * ignore
 */h6._defaultCaster=(F)=>{if(F!=null){if(F._bsontype!=="Double")throw Error()}return F};h6.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */h6._checkRequired=(F)=>F!=null;h6.checkRequired=TB.checkRequired;h6.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};h6.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=h6.cast();try{return A(F)}catch($){throw new hF0("Double",F,this.path,$,this)}};/*!
 * ignore
 */function TK(F){return this.cast(F)}var cF0={...TB.prototype.$conditionalHandlers,$gt:TK,$gte:TK,$lt:TK,$lte:TK};Object.defineProperty(h6.prototype,"$conditionalHandlers",{enumerable:!1,value:cF0});h6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return dF0("number","double",A?.useBsonType,$)};h6.prototype.autoEncryptionType=function(){return"double"};/*!
 * Module exports.
 */ZX1.exports=h6});var WX1=Q((rR0,zX1)=>{var lF0=M4(),pF0=x("assert");zX1.exports=function(A){if(A==null)return A;if(A==="")return null;let $=lF0(A,"Long")?A.toNumber():Number(A),B=2147483647,J=-2147483648;if($===($|0)&&$>=J&&$<=B)return $;pF0.ok(!1)}});var qX1=Q((tR0,KX1)=>{/*!
 * Module dependencies.
 */var HX1=a4(),kB=Q6(),iF0=WX1(),aF0=t4(),kK=pD();function u6(F,A,$,B){kB.call(this,F,A,"Int32",B)}u6.schemaName="Int32";u6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */u6.prototype=Object.create(kB.prototype);u6.prototype.constructor=u6;/*!
 * ignore
 */u6._cast=iF0;u6.set=kB.set;u6.setters=[];u6.get=kB.get;/*!
 * ignore
 */u6._defaultCaster=(F)=>{if(F!=null){if(typeof F!=="number"||F!==(F|0)||F<-2147483648||F>2147483647)throw Error()}return F};u6.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */u6._checkRequired=(F)=>F!=null;u6.checkRequired=kB.checkRequired;u6.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};u6.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=u6.cast();try{return A(F)}catch($){throw new HX1("Int32",F,this.path,$,this)}};/*!
 * ignore
 */var nF0={...kB.prototype.$conditionalHandlers,$gt:OK,$gte:OK,$lt:OK,$lte:OK,$bitsAllClear:kK,$bitsAnyClear:kK,$bitsAllSet:kK,$bitsAnySet:kK};Object.defineProperty(u6.prototype,"$conditionalHandlers",{enumerable:!1,value:nF0});/*!
 * ignore
 */function OK(F,A){return this.castForQuery(null,F,A)}u6.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],B)return B.call(this,A);return this.applySetters(A,$)}try{return this.applySetters(A,$)}catch(J){if(J instanceof HX1&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};u6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return aF0("number","int",A?.useBsonType,$)};u6.prototype.autoEncryptionType=function(){return"int"};/*!
 * Module exports.
 */KX1.exports=u6});var VX1=Q((sR0,QX1)=>{var rF0=v3();class sS extends rF0{}var tF0=Q9();Object.defineProperty(sS.prototype,"of",tF0);QX1.exports=sS});var wX1=Q((oR0,LX1)=>{/*!
 * ignore
 */var oS=BK(),sF0=VX1(),EX1=Q6(),oF0=t4(),eF0=d1(),FA0=D5(),oD=P1();class OB extends EX1{constructor(F,A,$,B){super(F,A,"Map",B);this.$isSchemaMap=!0,this._createNestedSchemaType(B,F,A,$)}set(F,A){return EX1.set(F,A)}cast(F,A,$,B,J){if(F instanceof oS)return F;let X=this.path;if($){let Y=new oS({},X,A,this.$__schemaType,J),D=Y.$__pathRelativeToParent!=null?Y.$__pathRelativeToParent:Y.$__path;if(F instanceof global.Map)for(let G of F.keys()){let Z=F.get(G);if(Z==null)Z=Y.$__schemaType._castNullish(Z);else Z=Y.$__schemaType.cast(Z,A,!0,null,{...J,path:D+"."+G});Y.$init(G,Z)}else for(let G of Object.keys(F)){let Z=F[G];if(Z==null)Z=Y.$__schemaType._castNullish(Z);else Z=Y.$__schemaType.cast(Z,A,!0,null,{...J,path:D+"."+G});Y.$init(G,Z)}return Y}return new oS(F,X,A,this.$__schemaType,J)}clone(){let F=super.clone();if(this.$__schemaType!=null)F.$__schemaType=this.$__schemaType.clone();return F}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(F){let A=F?.useBsonType,$=this.getEmbeddedSchemaType(),B=this.options.required&&typeof this.options.required!=="function",J=oF0("object","object",A,B);return J.additionalProperties=$.toJSONSchema(F),J}autoEncryptionType(){return"object"}}OB.schemaName="Map";OB.prototype.OptionsConstructor=sF0;OB.defaultOptions={};/*!
 * ignore
 */OB.prototype._createNestedSchemaType=function(A,$,B,J){let X=$+".$*",Y={type:{}};if(oD.hasUserDefinedProperty(B,"of")){if(oD.isPOJO(B.of)&&Object.keys(B.of).length>0&&!oD.hasUserDefinedProperty(B.of,A.options.typeKey))Y={[A.options.typeKey]:new FA0(B.of)};else if(oD.isPOJO(B.of))Y=Object.assign({},B.of);else Y={[A.options.typeKey]:B.of};if(Y[A.options.typeKey]&&Y[A.options.typeKey].instanceOfSchema)Y[A.options.typeKey].eachPath((Z,U)=>{if(U.options.select===!0||U.options.select===!1)throw new eF0('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+$+"."+Z+'"')});if(oD.hasUserDefinedProperty(B,"ref"))Y.ref=B.ref}this.$__schemaType=A.interpretAsType(X,Y,J)};LX1.exports=OB});var NX1=Q((eR0,CX1)=>{var AA0=v3();class SK extends AA0{}var IX1=Q9();Object.defineProperty(SK.prototype,"auto",IX1);Object.defineProperty(SK.prototype,"populate",IX1);/*!
 * ignore
 */CX1.exports=SK});var jX1=Q((Fj0,RX1)=>{var PX1=M4(),eS=x7();RX1.exports=function(A){if(A==null)return A;if(PX1(A,"ObjectId"))return A;if(A._id){if(PX1(A._id,"ObjectId"))return A._id;if(A._id.toString instanceof Function)return new eS(A._id.toString())}if(A.toString instanceof Function)return new eS(A.toString());return new eS(A)}});var OX1=Q((Aj0,kX1)=>{/*!
 * Module dependencies.
 */var $A0=NX1(),l7=Q6(),BA0=jX1(),JA0=t4(),XA0=E3(),Au=x7(),$u=M4(),MX1=P1(),YA0=l7.CastError,Fu;function U6(F,A,$,B){let J=typeof F==="string"&&F.length===24&&/^[a-f0-9]+$/i.test(F),X=A&&A.suppressWarning;if((J||typeof F>"u")&&!X)MX1.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.");l7.call(this,F,A,"ObjectId",B)}U6.schemaName="ObjectId";U6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */U6.prototype=Object.create(l7.prototype);U6.prototype.constructor=U6;U6.prototype.OptionsConstructor=$A0;U6.get=l7.get;U6.set=l7.set;U6.setters=[];U6.prototype.auto=function(F){if(F)this.default(TX1),this.set(GA0);return this};/*!
 * ignore
 */U6._checkRequired=(F)=>$u(F,"ObjectId");/*!
 * ignore
 */U6._cast=BA0;U6.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */U6._defaultCaster=(F)=>{if(!$u(F,"ObjectId"))throw Error(F+" is not an instance of ObjectId");return F};U6.checkRequired=l7.checkRequired;U6.prototype.checkRequired=function(A,$){if(l7._isRef(this,A,$,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():U6.checkRequired())(A)};U6.prototype.cast=function(F,A,$,B,J){if(!$u(F,"ObjectId")&&l7._isRef(this,F,A,$)){if((XA0(F)||"").toLowerCase()==="objectid")return new Au(F.toHexString());if(F==null||MX1.isNonBuiltinObject(F))return this._castRef(F,A,$,J)}let X;if(typeof this._castFunction==="function")X=this._castFunction;else if(typeof this.constructor.cast==="function")X=this.constructor.cast();else X=U6.cast();try{return X(F)}catch(Y){throw new YA0("ObjectId",F,this.path,Y,this)}};/*!
 * ignore
 */function uK(F){return this.cast(F)}var DA0={...l7.prototype.$conditionalHandlers,$gt:uK,$gte:uK,$lt:uK,$lte:uK};Object.defineProperty(U6.prototype,"$conditionalHandlers",{enumerable:!1,value:DA0});/*!
 * ignore
 */function TX1(){return new Au}TX1.$runBeforeSetters=!0;function GA0(F){if(Fu||(Fu=d9()),this instanceof Fu){if(F===void 0)return new Au}return F}U6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return JA0("string","objectId",A?.useBsonType,$)};U6.prototype.autoEncryptionType=function(){return"objectId"};/*!
 * Module exports.
 */kX1.exports=U6});var uX1=Q(($j0,SX1)=>{var ZA0=v3();class i9 extends ZA0{}var A7=Q9();Object.defineProperty(i9.prototype,"enum",A7);Object.defineProperty(i9.prototype,"match",A7);Object.defineProperty(i9.prototype,"lowercase",A7);Object.defineProperty(i9.prototype,"trim",A7);Object.defineProperty(i9.prototype,"uppercase",A7);Object.defineProperty(i9.prototype,"minLength",A7);Object.defineProperty(i9.prototype,"minlength",A7);Object.defineProperty(i9.prototype,"maxLength",A7);Object.defineProperty(i9.prototype,"maxlength",A7);Object.defineProperty(i9.prototype,"populate",A7);/*!
 * ignore
 */SX1.exports=i9});var Bu=Q((Bj0,gX1)=>{/*!
 * Module dependencies.
 */var p7=Q6(),FG=_3(),UA0=uX1(),zA0=YK(),WA0=t4(),fX1=P1(),HA0=M4(),bX1=p7.CastError;function Z0(F,A,$,B){this.enumValues=[],this.regExp=null,p7.call(this,F,A,"String",B)}Z0.schemaName="String";Z0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */Z0.prototype=Object.create(p7.prototype);Z0.prototype.constructor=Z0;Object.defineProperty(Z0.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:UA0});/*!
 * ignore
 */Z0._cast=zA0;Z0.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */Z0._defaultCaster=(F)=>{if(F!=null&&typeof F!=="string")throw Error();return F};Z0.get=p7.get;Z0.set=p7.set;Z0.setters=[];/*!
 * ignore
 */Z0._checkRequired=(F)=>(F instanceof String||typeof F==="string")&&F.length;Z0.checkRequired=p7.checkRequired;Z0.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let F,A;if(fX1.isObject(arguments[0]))if(Array.isArray(arguments[0].values))F=arguments[0].values,A=arguments[0].message;else F=fX1.object.vals(arguments[0]),A=FG.messages.String.enum;else F=arguments,A=FG.messages.String.enum;for(let B of F)if(B!==void 0)this.enumValues.push(this.cast(B));let $=this.enumValues;return this.enumValidator=function(B){return B==null||~$.indexOf(B)},this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:$}),this};Z0.prototype.lowercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toLowerCase();return A})};Z0.prototype.uppercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toUpperCase();return A})};Z0.prototype.trim=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.trim();return A})};Z0.prototype.minlength=function(F,A){if(this.minlengthValidator)this.validators=this.validators.filter(function($){return $.validator!==this.minlengthValidator},this);if(F!==null&&F!==void 0){let $=A||FG.messages.String.minlength;$=$.replace(/{MINLENGTH}/,F),this.validators.push({validator:this.minlengthValidator=function(B){return B===null||B.length>=F},message:$,type:"minlength",minlength:F})}return this};Z0.prototype.minLength=Z0.prototype.minlength;Z0.prototype.maxlength=function(F,A){if(this.maxlengthValidator)this.validators=this.validators.filter(function($){return $.validator!==this.maxlengthValidator},this);if(F!==null&&F!==void 0){let $=A||FG.messages.String.maxlength;$=$.replace(/{MAXLENGTH}/,F),this.validators.push({validator:this.maxlengthValidator=function(B){return B===null||B.length<=F},message:$,type:"maxlength",maxlength:F})}return this};Z0.prototype.maxLength=Z0.prototype.maxlength;Z0.prototype.match=function(A,$){let B=$||FG.messages.String.match,J=function(X){if(!A)return!1;return A.lastIndex=0,X!=null&&X!==""?A.test(X):!0};return this.validators.push({validator:J,message:B,type:"regexp",regexp:A}),this};Z0.prototype.checkRequired=function(A,$){if(typeof A==="object"&&p7._isRef(this,A,$,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():Z0.checkRequired())(A)};Z0.prototype.cast=function(F,A,$,B,J){if(typeof F!=="string"&&p7._isRef(this,F,A,$))return this._castRef(F,A,$,J);let X;if(typeof this._castFunction==="function")X=this._castFunction;else if(typeof this.constructor.cast==="function")X=this.constructor.cast();else X=Z0.cast();try{return X(F)}catch(Y){throw new bX1("string",F,this.path,null,this)}};/*!
 * ignore
 */function eD(F,A){return this.castForQuery(null,F,A)}/*!
 * ignore
 */function KA0(F,A){let $=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(B){return $.castForQuery(null,B,A)})}/*!
 * ignore
 */function xX1(F){if(F==null)return this._castNullish(F);return this.cast(F,this)}var qA0={...p7.prototype.$conditionalHandlers,$all:KA0,$gt:eD,$gte:eD,$lt:eD,$lte:eD,$options:xX1,$regex:function(A){if(Object.prototype.toString.call(A)==="[object RegExp]")return A;return xX1.call(this,A)},$not:eD};Object.defineProperty(Z0.prototype,"$conditionalHandlers",{enumerable:!1,value:qA0});Z0.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],!B)throw Error("Can't use "+F+" with String.");return B.call(this,A,$)}if(Object.prototype.toString.call(A)==="[object RegExp]"||HA0(A,"BSONRegExp"))return A;try{return this.applySetters(A,$)}catch(J){if(J instanceof bX1&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};Z0.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return WA0("string","string",A?.useBsonType,$)};Z0.prototype.autoEncryptionType=function(){return"string"};/*!
 * Module exports.
 */gX1.exports=Z0});var yX1=Q((Jj0,Yu)=>{var Xu=WB(),Ju=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,QA0=Xu.Binary;Yu.exports=function(A){if(A==null)return A;function $(B){let J=new Xu(B);return J._subtype=4,J}if(typeof A==="string")if(Ju.test(A))return _X1(A);else throw Error(`"${A}" is not a valid UUID string`);if(Buffer.isBuffer(A))return $(A);if(A instanceof QA0)return $(A.value(!0));if(A.toString&&A.toString!==Object.prototype.toString){if(Ju.test(A.toString()))return _X1(A.toString())}throw Error(`"${A}" cannot be casted to a UUID`)};Yu.exports.UUID_FORMAT=Ju;function VA0(F){return F!=null&&Buffer.from(F,"hex")}function _X1(F){if(typeof F!=="string")F="";let A=F.replace(/[{}-]/g,""),$=VA0(A),B=new Xu($);return B._subtype=4,B}});var cX1=Q((Xj0,dX1)=>{/*!
 * Module dependencies.
 */var EA0=WB(),z5=Q6(),vX1=z5.CastError,hX1=yX1(),LA0=t4(),mX1=P1(),fK=pD(),wA0=hX1.UUID_FORMAT,IA0=EA0.Binary;function xK(F){let A;if(typeof F!=="string"&&F!=null)return A=F.toString("hex"),A.substring(0,8)+"-"+A.substring(8,12)+"-"+A.substring(12,16)+"-"+A.substring(16,20)+"-"+A.substring(20,32);return F}function f6(F,A,$,B){z5.call(this,F,A,"UUID",B),this.getters.push(function(J){if(J!=null&&J.$__!=null)return J;if(Buffer.isBuffer(J))return xK(J);else if(J instanceof IA0)return xK(J.buffer);else if(mX1.isPOJO(J)&&J.type==="Buffer"&&Array.isArray(J.data))return xK(Buffer.from(J.data));return J})}f6.schemaName="UUID";f6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */f6.prototype=Object.create(z5.prototype);f6.prototype.constructor=f6;/*!
 * ignore
 */f6._cast=hX1;f6.get=z5.get;f6.set=z5.set;f6.setters=[];f6.cast=function(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */f6._checkRequired=(F)=>F!=null;f6.checkRequired=z5.checkRequired;f6.prototype.checkRequired=function(A){if(Buffer.isBuffer(A))A=xK(A);return A!=null&&wA0.test(A)};f6.prototype.cast=function(F,A,$,B,J){if(mX1.isNonBuiltinObject(F)&&z5._isRef(this,F,A,$))return this._castRef(F,A,$,J);let X;if(typeof this._castFunction==="function")X=this._castFunction;else if(typeof this.constructor.cast==="function")X=this.constructor.cast();else X=f6.cast();try{return X(F)}catch(Y){throw new vX1(f6.schemaName,F,this.path,Y,this)}};/*!
 * ignore
 */function AG(F){return this.cast(F)}/*!
 * ignore
 */function Du(F){return F.map((A)=>{return this.cast(A)})}var CA0={...z5.prototype.$conditionalHandlers,$bitsAllClear:fK,$bitsAnyClear:fK,$bitsAllSet:fK,$bitsAnySet:fK,$all:Du,$gt:AG,$gte:AG,$in:Du,$lt:AG,$lte:AG,$ne:AG,$nin:Du};Object.defineProperty(f6.prototype,"$conditionalHandlers",{enumerable:!1,value:CA0});f6.prototype.castForQuery=function(F,A,$){let B;if(F!=null){if(B=this.$conditionalHandlers[F],!B)throw Error("Can't use "+F+" with UUID.");return B.call(this,A,$)}try{return this.applySetters(A,$)}catch(J){if(J instanceof vX1&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};f6.prototype.toJSONSchema=function(A){let $=this.options.required&&typeof this.options.required!=="function";return LA0("string","binData",A?.useBsonType,$)};f6.prototype.autoEncryptionType=function(){return"binData"};/*!
 * Module exports.
 */dX1.exports=f6});var pX1=Q((Yj0,lX1)=>{var NA0=v3();class Gu extends NA0{}var PA0=Q9();Object.defineProperty(Gu.prototype,"of",PA0);lX1.exports=Gu});var aX1=Q((Dj0,iX1)=>{/*!
 * ignore
 */var RA0=pX1(),jA0=Q6(),SB=Symbol("firstValue");/*!
 * ignore
 */class $G extends jA0{constructor(F,A,$,B){super(F,A,"Union",B);if(!A||!Array.isArray(A.of)||A.of.length===0)throw Error("Union schema type requires an array of types");this.schemaTypes=A.of.map((J)=>B.interpretAsType(F,J,$))}cast(F,A,$,B,J){let X=SB,Y;for(let D=0;D<this.schemaTypes.length;++D)try{let G=this.schemaTypes[D].cast(F,A,$,B,J);if(G===F)return G;if(X===SB)X=G}catch(G){Y=G}if(X!==SB)return X;throw Y}applySetters(F,A,$,B,J){let X=SB,Y;for(let D=0;D<this.schemaTypes.length;++D)try{let G=this.schemaTypes[D]._applySetters(F,A,$,B,J);if(G==null)G=this.schemaTypes[D]._castNullish(G);else G=this.schemaTypes[D].cast(G,A,$,B,J);if(G===F)return G;if(X===SB)X=G}catch(G){Y=G}if(X!==SB)return X;throw Y}clone(){let F=super.clone();return F.schemaTypes=this.schemaTypes.map((A)=>A.clone()),F}}$G.schemaName="Union";$G.defaultOptions={};$G.prototype.OptionsConstructor=RA0;iX1.exports=$G});var lD=Q((MA0)=>{/*!
 * Module exports.
 */MA0.Array=zK();MA0.BigInt=rB1();MA0.Boolean=oB1();MA0.Buffer=BJ1();MA0.Date=zJ1();MA0.Decimal128=MA0.Decimal=qJ1();MA0.DocumentArray=XX1();MA0.Double=UX1();MA0.Int32=qX1();MA0.Map=wX1();MA0.Mixed=HB();MA0.Number=LS();MA0.ObjectId=OX1();MA0.String=Bu();MA0.Subdocument=pS();MA0.UUID=cX1();MA0.Union=aX1();MA0.Oid=MA0.ObjectId;MA0.Object=MA0.Mixed;MA0.Bool=MA0.Boolean;MA0.ObjectID=MA0.ObjectId});var D5=Q((Ku,YY1)=>{/*!
 * Module dependencies.
 */var iA0=x("events").EventEmitter,aA0=MF(),W5=d1(),Wu=Q6(),tX1=v3(),nA0=eO(),Hu=eH(),sX1=AS(),O4=Z6(),oX1=V6(),rA0=E3(),tA0=f$1(),_K=JS(),sA0=g$1(),eX1=y$1(),oA0=CH(),bK=V9(),eA0=h$1(),F$0=t$1(),L6=P1(),A$0=o$1(),$$0=/\.\d+(\.|$)/,H5,B$0=AK().queryMiddlewareFunctions,J$0=$K().middlewareFunctions,FY1=B$0.concat(J$0).reduce((F,A)=>F.add(A),new Set),Uu=L6.isPOJO,AY1=0,X$0=/^\d+$/;function X1(F,A){if(!(this instanceof X1))return new X1(F,A);if(this.obj=F,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=A&&A.methods||{},this.methodOptions={},this.statics=A&&A.statics||{},this.tree={},this.query=A&&A.query||{},this.childSchemas=[],this.plugins=[],this.$id=++AY1,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new aA0},this.options=this.defaultOptions(A),Array.isArray(F))for(let J of F)this.add(J);else if(F)this.add(F);if(A&&A.virtuals){let J=A.virtuals,X=Object.keys(J);for(let Y of X){let D=J[Y].options?J[Y].options:void 0,G=this.virtual(Y,D);if(J[Y].get)G.get(J[Y].get);if(J[Y].set)G.set(J[Y].set)}}let $=F&&F._id&&L6.isObject(F._id);if(!this.paths._id&&this.options._id&&!$)sX1(this);this.setupTimestamp(this.options.timestamps)}function $Y1(F,A){for(let $ of Object.keys(A)){let B=null;if(A[$]!=null)B=A[$];else{let X=oX1(F.paths[$],"options");if(X==null)continue;B=X.alias}if(!B)continue;let J=F.paths[$].path;if(Array.isArray(B)){for(let X of B){if(typeof X!=="string")throw Error("Invalid value for alias option on "+J+", got "+X);F.aliases[X]=J,F.virtual(X).get(function(Y){return function(){if(typeof this.get==="function")return this.get(Y);return this[Y]}}(J)).set(function(Y){return function(D){return this.$set(Y,D)}}(J))}continue}if(typeof B!=="string")throw Error("Invalid value for alias option on "+J+", got "+B);F.aliases[B]=J,F.virtual(B).get(function(X){return function(){if(typeof this.get==="function")return this.get(X);return this[X]}}(J)).set(function(X){return function(Y){return this.$set(X,Y)}}(J))}}/*!
 * Inherit from EventEmitter.
 */X1.prototype=Object.create(iA0.prototype);X1.prototype.constructor=X1;X1.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(X1.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(X1.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(X1.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});X1.prototype.obj;X1.prototype.paths;X1.prototype.tree;X1.prototype.clone=function(){let F=this._clone();return F.on("init",(A)=>this.emit("init",A)),F};/*!
 * ignore
 */X1.prototype._clone=function(A){A=A||(this.base==null?X1:this.base.Schema);let $=new A({},this._userProvidedOptions);$.base=this.base,$.obj=this.obj,$.options=O4(this.options),$.callQueue=this.callQueue.map(function(B){return B}),$.methods=O4(this.methods),$.methodOptions=O4(this.methodOptions),$.statics=O4(this.statics),$.query=O4(this.query),$.plugins=Array.prototype.slice.call(this.plugins),$._indexes=O4(this._indexes),$._searchIndexes=O4(this._searchIndexes),$.s.hooks=this.s.hooks.clone(),$.tree=O4(this.tree),$.paths=Object.fromEntries(Object.entries(this.paths).map(([B,J])=>[B,J.clone()])),$.nested=O4(this.nested),$.subpaths=O4(this.subpaths);for(let B of Object.values($.paths))if(B.$isSingleNested){let J=B.path;for(let X of Object.keys(B.schema.paths))$.singleNestedPaths[J+"."+X]=B.schema.paths[X];for(let X of Object.keys(B.schema.singleNestedPaths))$.singleNestedPaths[J+"."+X]=B.schema.singleNestedPaths[X];for(let X of Object.keys(B.schema.subpaths))$.singleNestedPaths[J+"."+X]=B.schema.subpaths[X];for(let X of Object.keys(B.schema.nested))$.singleNestedPaths[J+"."+X]="nested"}if($._gatherChildSchemas(),$.virtuals=O4(this.virtuals),$.$globalPluginsApplied=this.$globalPluginsApplied,$.$isRootDiscriminator=this.$isRootDiscriminator,$.$implicitlyCreated=this.$implicitlyCreated,$.$id=++AY1,$.$originalSchemaId=this.$id,$.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)$.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)$.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)$._applyDiscriminators=new Map(this._applyDiscriminators);return $.aliases=Object.assign({},this.aliases),$.encryptedFields=O4(this.encryptedFields),$};X1.prototype.pick=function(F,A){let $=new X1({},A||this.options);if(!Array.isArray(F))throw new W5('Schema#pick() only accepts an array argument, got "'+typeof F+'"');for(let B of F)if(this._hasEncryptedField(B)){let J=this.encryptedFields[B],X=this.path(B);$.add({[B]:{encrypt:J,[this.options.typeKey]:X}})}else if(this.nested[B])$.add({[B]:oX1(this.tree,B)});else{let J=this.path(B);if(J==null)throw new W5("Path `"+B+"` is not in the schema");$.add({[B]:J})}if(!this._hasEncryptedFields())$.options.encryptionType=null;return $};X1.prototype.omit=function(F,A){let $=new X1(this,A||this.options);if(!Array.isArray(F))throw new W5('Schema#omit() only accepts an array argument, got "'+typeof F+'"');$.remove(F);for(let B in $.singleNestedPaths)if(F.includes(B))delete $.singleNestedPaths[B];return $};X1.prototype.defaultOptions=function(F){this._userProvidedOptions=F==null?{}:O4(F);let A=this.base&&this.base.options||{},$="strict"in A?A.strict:!0,B="strictQuery"in A?A.strictQuery:!1,J="id"in A?A.id:!0;if(F={strict:$,strictQuery:B,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:J,typeKey:"type",...F},F.versionKey&&typeof F.versionKey!=="string")throw new W5("`versionKey` must be falsy or string, got `"+typeof F.versionKey+"`");if(typeof F.read==="string")F.read=_K(F.read);else if(Array.isArray(F.read)&&typeof F.read[0]==="string")F.read={mode:_K(F.read[0]),tags:F.read[1]};if(F.optimisticConcurrency&&!F.versionKey)throw new W5("Must set `versionKey` if using `optimisticConcurrency`");return F};X1.prototype.discriminator=function(F,A,$){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(F,{schema:A,options:$}),this};/*!
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 */X1.prototype._defaultToObjectOptions=function(F){let A=F?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[A])return this._defaultToObjectOptionsMap[A];let $=this.base&&this.base.options&&this.base.options[A]||{},B=this.options[A]||{},J=Object.assign({},$,B);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[A]=J,J};X1.prototype.encryptionType=function(F){if(arguments.length===0)return this.options.encryptionType;if(!(typeof F==="string"||F===null))throw Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=F};X1.prototype.add=function(A,$){if(A instanceof X1||A!=null&&A.instanceOfSchema)return oA0(this,A),this;if(A._id===!1&&$==null)this.options._id=!1;if($=$||"",$==="__proto__."||$==="constructor."||$==="prototype.")return this;let B=Object.keys(A),J=this.options.typeKey;for(let Y of B){if(L6.specialProperties.has(Y))continue;let D=$+Y,G=A[Y];if(G==null)throw TypeError("Invalid value for schema path `"+D+'`, got value "'+G+'"');if(Y==="_id"&&G===!1)continue;let Z=!1;if(typeof G==="string"){let U=this.base!=null?this.base.Schema.Types:X1.Types,z=G.charAt(0).toUpperCase()+G.substring(1);Z=U[z]!=null}if(Y!=="_id"&&(typeof G!=="object"&&typeof G!=="function"&&!Z||G==null))throw TypeError(`Invalid schema configuration: \`${G}\` is not a valid type at path \`${Y}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(G instanceof Hu||(G.constructor&&G.constructor.name||null)==="VirtualType"){this.virtual(G);continue}if(Array.isArray(G)&&G.length===1&&G[0]==null)throw TypeError("Invalid value for schema Array path `"+D+'`, got value "'+G[0]+'"');if(!(Uu(G)||G instanceof tX1)){if($)this.nested[$.substring(0,$.length-1)]=!0;if(this.path($+Y,G),G[0]!=null&&!G[0].instanceOfSchema&&L6.isPOJO(G[0].discriminators)){let U=this.path($+Y);for(let z in G[0].discriminators)U.discriminator(z,G[0].discriminators[z])}}else if(Object.keys(G).length<1){if($)this.nested[$.substring(0,$.length-1)]=!0;this.path(D,G)}else if(!G[J]||J==="type"&&Uu(G.type)&&G.type.type)this.nested[D]=!0,this.add(G,D+".");else{let U=G[J];if(Uu(U)&&Object.keys(U).length>0){if($)this.nested[$.substring(0,$.length-1)]=!0;let z={};if(this._userProvidedOptions.typeKey)z.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)z.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)z.toObject=L6.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)z.toJSON=L6.omit(this._userProvidedOptions.toJSON,["transform"]);let W=new X1(U,z);W.$implicitlyCreated=!0;let H=Object.assign({},G,{[J]:W});this.path($+Y,H)}else{if($)this.nested[$.substring(0,$.length-1)]=!0;if(this.path($+Y,G),G!=null&&!G.instanceOfSchema&&L6.isPOJO(G.discriminators)){let z=this.path($+Y);for(let W in G.discriminators)z.discriminator(W,G.discriminators[W])}}}if(G.instanceOfSchema&&G.encryptionType()!=null){if(this.encryptionType()!=G.encryptionType())throw Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[U,z]of Object.entries(G.encryptedFields)){let W=D+"."+U;this._addEncryptedField(W,z)}}else if(typeof G==="object"&&"encrypt"in G){let{encrypt:U}=G;if(this.encryptionType()==null)throw Error("encryptionType must be provided");this._addEncryptedField(D,U)}else this._removeEncryptedField(D)}let X=Object.fromEntries(Object.entries(A).map(([Y])=>[$+Y,null]));return $Y1(this,X),this};X1.prototype._addEncryptedField=function(A,$){if(this.path(A).autoEncryptionType()==null)throw Error(`Invalid BSON type for FLE field: '${A}'`);this.encryptedFields[A]=O4($)};X1.prototype._removeEncryptedField=function(A){delete this.encryptedFields[A]};X1.prototype._hasEncryptedFields=function(){return Object.keys(this.encryptedFields).length>0};X1.prototype._hasEncryptedField=function(A){return A in this.encryptedFields};X1.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([A,$])=>{let B=this.path(A).autoEncryptionType();return{path:A,bsonType:B,...$}})}};X1.prototype._buildSchemaMap=function(){function F(B,J,X){let Y=0,D=B[Y];for(;Y<B.length-1;++Y,D=B[Y])J[D]=J[D]==null?{bsonType:"object",properties:{}}:J[D],J=J[D].properties;J[D]=X}let A=(B,[J,X])=>{let Y=this.path(J).autoEncryptionType(),D=J.split("."),G={encrypt:{...X,bsonType:Y}};return F(D,B,G),B};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(A,{})}};X1.prototype.alias=function(F,A){return $Y1(this,{[F]:A}),this};X1.prototype.removeIndex=function(A){if(arguments.length>1)throw Error("removeIndex() takes only 1 argument");if(typeof A!=="object"&&typeof A!=="string")throw Error("removeIndex() may only take either an object or a string as an argument");if(typeof A==="object"){for(let $=this._indexes.length-1;$>=0;--$)if(eX1(this._indexes[$][0],A))this._indexes.splice($,1)}else for(let $=this._indexes.length-1;$>=0;--$)if(this._indexes[$][1]!=null&&this._indexes[$][1].name===A)this._indexes.splice($,1);return this};X1.prototype.clearIndexes=function(){return this._indexes.length=0,this};X1.prototype.searchIndex=function(A){return this._searchIndexes.push(A),this};X1.reserved=Object.create(null);X1.prototype.reserved=X1.reserved;var k4=X1.reserved;k4.prototype=k4.emit=k4.listeners=k4.removeListener=k4.collection=k4.errors=k4.get=k4.init=k4.isModified=k4.isNew=k4.populated=k4.remove=k4.save=k4.toObject=k4.validate=1;k4.collection=1;X1.prototype.path=function(F,A){if(A===void 0){if(this.paths[F]!=null)return this.paths[F];let G=BY1(F),Z=Y$0(this,F,G);if(Z!=null)return Z;let U=JY1(this,F);if(U!=null)return U;if(Z=this.hasMixedParent(G),Z!=null)return Z;return $$0.test(F)?D$0(this,F,G):void 0}let $=F.split(".")[0];if(k4[$]&&!this.options.suppressReservedKeysWarning){let G=`\`${$}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;L6.warn(G)}if(typeof A==="object"&&L6.hasUserDefinedProperty(A,"ref"))A$0(A.ref,F);let B=F.split(/\./),J=B.pop(),X=this.tree,Y="";for(let G of B){if(L6.specialProperties.has(G))throw Error("Cannot set special property `"+G+"` on a schema");if(Y=Y+=(Y.length>0?".":"")+G,!X[G])this.nested[Y]=!0,X[G]={};if(typeof X[G]!=="object"){let Z="Cannot set nested path `"+F+"`. Parent path `"+Y+"` already set to type "+X[G].name+".";throw Error(Z)}X=X[G]}X[J]=O4(A),this.paths[F]=this.interpretAsType(F,A,this.options);let D=this.paths[F];if(this.childSchemas=this.childSchemas.filter((G)=>G.path!==F),D.$isSchemaMap){let G=F+".$*";if(this.paths[G]=D.$__schemaType,this.mapPaths.push(this.paths[G]),D.$__schemaType.$isSingleNested)this.childSchemas.push({schema:D.$__schemaType.schema,model:D.$__schemaType.caster,path:F})}if(D.$isSingleNested){for(let G of Object.keys(D.schema.paths))this.singleNestedPaths[F+"."+G]=D.schema.paths[G];for(let G of Object.keys(D.schema.singleNestedPaths))this.singleNestedPaths[F+"."+G]=D.schema.singleNestedPaths[G];for(let G of Object.keys(D.schema.subpaths))this.singleNestedPaths[F+"."+G]=D.schema.subpaths[G];for(let G of Object.keys(D.schema.nested))this.singleNestedPaths[F+"."+G]="nested";Object.defineProperty(D.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),D.caster.base=this.base,this.childSchemas.push({schema:D.schema,model:D.caster,path:F})}else if(D.$isMongooseDocumentArray)Object.defineProperty(D.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),D.casterConstructor.base=this.base,this.childSchemas.push({schema:D.schema,model:D.casterConstructor,path:F});if(D.$isMongooseArray&&D.caster instanceof Wu){let G=F,Z=D,U=[];while(Z.$isMongooseArray){if(G=G+".$",Z.$isMongooseDocumentArray)Z.$embeddedSchemaType._arrayPath=G,Z.$embeddedSchemaType._arrayParentPath=F,Z=Z.$embeddedSchemaType;else Z.caster._arrayPath=G,Z.caster._arrayParentPath=F,Z=Z.caster;this.subpaths[G]=Z}for(let z of U)this.subpaths[z.path]=z}if(D.$isMongooseDocumentArray){for(let G of Object.keys(D.schema.paths)){let Z=D.schema.paths[G];if(this.subpaths[F+"."+G]=Z,typeof Z==="object"&&Z!=null&&Z.$parentSchemaDocArray==null)Z.$parentSchemaDocArray=D}for(let G of Object.keys(D.schema.subpaths)){let Z=D.schema.subpaths[G];if(this.subpaths[F+"."+G]=Z,typeof Z==="object"&&Z!=null&&Z.$parentSchemaDocArray==null)Z.$parentSchemaDocArray=D}for(let G of Object.keys(D.schema.singleNestedPaths)){let Z=D.schema.singleNestedPaths[G];if(this.subpaths[F+"."+G]=Z,typeof Z==="object"&&Z!=null&&Z.$parentSchemaDocArray==null)Z.$parentSchemaDocArray=D}}return this};/*!
 * ignore
 */X1.prototype._gatherChildSchemas=function(){let A=[];for(let $ of Object.keys(this.paths)){if(typeof $!=="string")continue;let B=this.paths[$];if(B.$isMongooseDocumentArray||B.$isSingleNested)A.push({schema:B.schema,model:B.caster,path:$});else if(B.$isSchemaMap&&B.$__schemaType.$isSingleNested)A.push({schema:B.$__schemaType.schema,model:B.$__schemaType.caster,path:$})}return this.childSchemas=A,A};/*!
 * ignore
 */function Y$0(F,A,$){if(F.paths.hasOwnProperty(A))return F.paths[A];if(F.subpaths.hasOwnProperty($)){let B=F.subpaths[$];if(B==="nested")return;return B}if(F.singleNestedPaths.hasOwnProperty($)&&typeof F.singleNestedPaths[$]==="object"){let B=F.singleNestedPaths[$];if(B==="nested")return;return B}return null}/*!
 * ignore
 */function BY1(F){if(!/\.\d+/.test(F))return F;return F.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")}/*!
 * ignore
 */function JY1(F,A){if(F.mapPaths.length===0)return null;for(let $ of F.mapPaths){let B=$.path.replace(/\.\$\*/g,"");if(A===B||A.startsWith(B+".")&&A.slice(B.length+1).indexOf(".")===-1)return $;else if($.schema&&A.startsWith(B+".")){let J=A.slice(B.length+1);return J=J.slice(J.indexOf(".")+1),$.schema.paths[J]}else if($.$isSchemaMap&&A.startsWith(B+".")){let J=A.slice(B.length+1);J=J.slice(J.indexOf(".")+1);let X=$.$__schemaType._presplitPath;if(J.indexOf(".")===-1&&X[X.length-1]==="$*")return $.$__schemaType;else if(J.indexOf(".")!==-1&&$.$__schemaType.schema&&X[X.length-1]==="$*")return $.$__schemaType.schema.path(J.slice(J.indexOf(".")+1))}}return null}Object.defineProperty(X1.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});X1.prototype.interpretAsType=function(F,A,$){if(A instanceof Wu){if(A.path===F)return A;let G=A.clone();return G.path=F,G}let B=this.base!=null?this.base.Schema.Types:X1.Types,J=this.base!=null?this.base.Types:wB();if(!L6.isPOJO(A)&&!(A instanceof tX1)){if(L6.getFunctionName(A.constructor)!=="Object"){let Z=A;A={},A[$.typeKey]=Z}}let X=A[$.typeKey]&&(A[$.typeKey]instanceof Function||$.typeKey!=="type"||!A.type.type)?A[$.typeKey]:{};if(X instanceof Wu){if(X.path===F)return X;let G=X.clone();return G.path=F,G}let Y;if(L6.isPOJO(X)||X==="mixed")return new B.Mixed(F,A,null,this);if(Array.isArray(X)||X===Array||X==="array"||X===B.Array){let G=X===Array||X==="array"?A.cast||A.of:X[0];if(G&&G.instanceOfSchema){if(!(G instanceof X1))if(this.options._isMerging)G=new X1(G);else throw TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new B.DocumentArray(F,G,A,null,this)}if(G&&G[$.typeKey]&&G[$.typeKey].instanceOfSchema){if(!(G[$.typeKey]instanceof X1))if(this.options._isMerging)G[$.typeKey]=new X1(G[$.typeKey]);else throw TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new B.DocumentArray(F,G[$.typeKey],A,G,this)}if(typeof G<"u"){if(Array.isArray(G)||G.type===Array||G.type=="Array"){if(G&&G.type=="Array")G.type=Array;return new B.Array(F,this.interpretAsType(F,G,$),A,null,this)}}let Z=G!=null&&G[$.typeKey]&&($.typeKey!=="type"||!G.type.type)?G[$.typeKey]:G;if(typeof G==="string")G=B[G.charAt(0).toUpperCase()+G.substring(1)];else if(L6.isPOJO(Z))if(Object.keys(Z).length){let U={minimize:$.minimize};if($.typeKey)U.typeKey=$.typeKey;if($.hasOwnProperty("strict"))U.strict=$.strict;if($.hasOwnProperty("strictQuery"))U.strictQuery=$.strictQuery;if($.hasOwnProperty("toObject"))U.toObject=L6.omit($.toObject,["transform"]);if($.hasOwnProperty("toJSON"))U.toJSON=L6.omit($.toJSON,["transform"]);if(this._userProvidedOptions.hasOwnProperty("_id"))U._id=this._userProvidedOptions._id;else if(X1.Types.DocumentArray.defaultOptions._id!=null)U._id=X1.Types.DocumentArray.defaultOptions._id;let z=new X1(Z,U);return z.$implicitlyCreated=!0,new B.DocumentArray(F,z,A,null,this)}else return new B.Array(F,B.Mixed,A,null,this);if(G){if(X=G[$.typeKey]&&($.typeKey!=="type"||!G.type.type)?G[$.typeKey]:G,Array.isArray(X))return new B.Array(F,this.interpretAsType(F,X,$),A,null,this);if(Y=typeof X==="string"?X:X.schemaName||L6.getFunctionName(X),Y==="ClockDate")Y="Date";if(Y===void 0)throw TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${F}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!B.hasOwnProperty(Y))throw TypeError(`Invalid schema configuration: \`${Y}\` is not a valid type within the array \`${F}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(Y==="Union"&&typeof G==="object")G.parentSchema=this}return new B.Array(F,G||B.Mixed,A,$,this)}if(X&&X.instanceOfSchema)return new B.Subdocument(X,F,A,this);if(Buffer.isBuffer(X))Y="Buffer";else if(typeof X==="function"||typeof X==="object")Y=X.schemaName||L6.getFunctionName(X);else if(X===J.ObjectId)Y="ObjectId";else if(X===J.Decimal128)Y="Decimal128";else Y=X==null?""+X:X.toString();if(Y)Y=Y.charAt(0).toUpperCase()+Y.substring(1);if(Y==="ObjectID")Y="ObjectId";if(Y==="ClockDate")Y="Date";if(Y===void 0)throw TypeError(`Invalid schema configuration: \`${F}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(B[Y]==null)throw TypeError(`Invalid schema configuration: \`${Y}\` is not a valid type at path \`${F}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new B[Y](F,A,$,this)};X1.prototype.eachPath=function(F){let A=Object.keys(this.paths),$=A.length;for(let B=0;B<$;++B)F(A[B],this.paths[A[B]]);return this};X1.prototype.requiredPaths=function(A){if(this._requiredpaths&&!A)return this._requiredpaths;let $=Object.keys(this.paths),B=$.length,J=[];while(B--){let X=$[B];if(this.paths[X].isRequired)J.push(X)}return this._requiredpaths=J,this._requiredpaths};X1.prototype.indexedPaths=function(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};X1.prototype.pathType=function(F){if(this.paths.hasOwnProperty(F))return"real";if(this.virtuals.hasOwnProperty(F))return"virtual";if(this.nested.hasOwnProperty(F))return"nested";let A=BY1(F);if(this.subpaths.hasOwnProperty(A)||this.subpaths.hasOwnProperty(F))return"real";let $=this.singleNestedPaths.hasOwnProperty(A)||this.singleNestedPaths.hasOwnProperty(F);if($)return $==="nested"?"nested":"real";if(JY1(this,F)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(F))return XY1(this,F,A);return"adhocOrUndefined"};X1.prototype.hasMixedParent=function(F){let A=F.split(/\./g);F="";for(let $=0;$<A.length;++$)if(F=$>0?F+"."+A[$]:A[$],this.paths.hasOwnProperty(F)&&this.paths[F]instanceof H5.Mixed)return this.paths[F];return null};X1.prototype.setupTimestamp=function(F){return F$0(this,F)};function XY1(F,A,$){let B=A.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(B.length<2)return F.paths.hasOwnProperty(B[0])?F.paths[B[0]]:"adhocOrUndefined";let J=F.path(B[0]),X=!1;if(!J)return"adhocOrUndefined";let Y=B.length-1;for(let D=1;D<B.length;++D){X=!1;let G=B[D];if(D===Y&&J&&!/\D/.test(G)){if(J.$isMongooseDocumentArray)J=J.$embeddedSchemaType;else if(J instanceof H5.Array)J=J.caster;else J=void 0;break}if(!/\D/.test(G)){if(J instanceof H5.Array&&D!==Y)J=J.caster;continue}if(!(J&&J.schema)){J=void 0;break}X=J.schema.pathType(G)==="nested",J=J.schema.path(G)}if(F.subpaths[$]=J,J)return"real";if(X)return"nested";return"adhocOrUndefined"}/*!
 * ignore
 */function D$0(F,A,$){return XY1(F,A,$),F.subpaths[$]}X1.prototype.queue=function(F,A){return this.callQueue.push([F,A]),this};X1.prototype.pre=function(F){if(F instanceof RegExp){let A=Array.prototype.slice.call(arguments,1);for(let $ of FY1)if(F.test($))this.pre.apply(this,[$].concat(A));return this}if(Array.isArray(F)){let A=Array.prototype.slice.call(arguments,1);for(let $ of F)this.pre.apply(this,[$].concat(A));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};X1.prototype.post=function(F){if(F instanceof RegExp){let A=Array.prototype.slice.call(arguments,1);for(let $ of FY1)if(F.test($))this.post.apply(this,[$].concat(A));return this}if(Array.isArray(F)){let A=Array.prototype.slice.call(arguments,1);for(let $ of F)this.post.apply(this,[$].concat(A));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};X1.prototype.plugin=function(F,A){if(typeof F!=="function")throw Error('First param to `schema.plugin()` must be a function, got "'+typeof F+'"');if(A&&A.deduplicate){for(let $ of this.plugins)if($.fn===F)return this}return this.plugins.push({fn:F,opts:A}),F(this,A),this};X1.prototype.method=function(F,A,$){if(typeof F!=="string")for(let B in F)this.methods[B]=F[B],this.methodOptions[B]=O4($);else this.methods[F]=A,this.methodOptions[F]=O4($);return this};X1.prototype.static=function(F,A){if(typeof F!=="string")for(let $ in F)this.statics[$]=F[$];else this.statics[F]=A;return this};X1.prototype.index=function(F,A){if(F||(F={}),A||(A={}),A.expires)L6.expires(A);for(let $ in F)if(this.aliases[$])F=L6.renameObjKey(F,$,this.aliases[$]);for(let $ of Object.keys(F))if(F[$]==="ascending"||F[$]==="asc")F[$]=1;else if(F[$]==="descending"||F[$]==="desc")F[$]=-1;for(let $ of this.indexes())if(A.name==null&&$[1].name==null&&eX1($[0],F))L6.warn(`Duplicate schema index on ${JSON.stringify(F)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([F,A]),this};X1.prototype.set=function(F,A,$){if(arguments.length===1)return this.options[F];switch(F){case"read":if(typeof A==="string")this.options[F]={mode:_K(A),tags:$};else if(Array.isArray(A)&&typeof A[0]==="string")this.options[F]={mode:_K(A[0]),tags:A[1]};else this.options[F]=A;this._userProvidedOptions[F]=this.options[F];break;case"timestamps":this.setupTimestamp(A),this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break;case"_id":if(this.options[F]=A,this._userProvidedOptions[F]=this.options[F],A&&!this.paths._id)sX1(this);else if(!A&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break}if(F==="strict")BG(this,{strict:A});if(F==="strictQuery")BG(this,{strictQuery:A});if(F==="toObject")A={...A},delete A.transform,BG(this,{toObject:A});if(F==="toJSON")A={...A},delete A.transform,BG(this,{toJSON:A});return this};/*!
 * Recursively set options on implicitly created schemas
 */function BG(F,A){for(let{schema:$}of F.childSchemas){if(!$.$implicitlyCreated)continue;Object.assign($.options,A),BG($,A)}}X1.prototype.get=function(F){return this.options[F]};var G$0="2d 2dsphere hashed text".split(" ");Object.defineProperty(X1,"indexTypes",{get:function(){return G$0},set:function(){throw Error("Cannot overwrite Schema.indexTypes")}});X1.prototype.indexes=function(){return tA0(this)};X1.prototype.virtual=function(F,A){if(F instanceof Hu||rA0(F)==="VirtualType")return this.virtual(F.path,F.options);if(A=new nA0(A),L6.hasUserDefinedProperty(A,["ref","refPath"])){if(A.localField==null)throw Error("Reference virtuals require `localField` option");if(A.foreignField==null)throw Error("Reference virtuals require `foreignField` option");let J=this.virtual(F);if(J.options=A,this.pre("init",function(G,Z){if(bK.has(F,G)){let U=bK.get(F,G);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(A.justOne||A.count)this.$$populatedVirtuals[F]=Array.isArray(U)?U[0]:U;else this.$$populatedVirtuals[F]=Array.isArray(U)?U:U==null?[]:[U];if(Z?.hydratedPopulatedDocs&&!A.count){let z=J._getModelNamesForPopulate(this),W=this.$$populatedVirtuals[F];if(!Array.isArray(W)&&!W.$__&&z?.length===1){let H=this.db.model(z[0]);this.$$populatedVirtuals[F]=H.hydrate(W)}else if(Array.isArray(W)&&z?.length===1){let H=this.db.model(z[0]);for(let q=0;q<W.length;++q)if(!W[q].$__)W[q]=H.hydrate(W[q],null,{hydratedPopulatedDocs:!0});let K=A.foreignField;this.$populated(F,W.map((q)=>q==null?q:q.get(typeof K==="function"?K.call(q,q):K)),{populateModelSymbol:H})}}bK.unset(F,G)}}),J.set(function(D){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return eA0(this.$$populatedVirtuals,F,D,A)}),typeof A.get==="function")J.get(A.get);let X=F.split("."),Y=X[0];for(let D=0;D<X.length-1;++D){if(this.paths[Y]==null)continue;if(this.paths[Y].$isMongooseDocumentArray||this.paths[Y].$isSingleNested){let G=X.slice(D+1).join(".");this.paths[Y].schema.virtual(G,A);break}else if(this.paths[Y].$isSchemaMap){let G=X.slice(D+2).join(".");this.paths[Y].$__schemaType.schema.virtual(G,A);break}Y+="."+X[D+1]}return J}let $=this.virtuals,B=F.split(".");if(this.pathType(F)==="real")throw Error('Virtual path "'+F+'" conflicts with a real path in the schema');if($[F]=B.reduce(function(J,X,Y){return J[X]||(J[X]=Y===B.length-1?new Hu(A,F):{}),J[X]},this.tree),A&&A.applyToArray&&B.length>1){let J=this.path(B.slice(0,-1).join("."));if(J&&J.$isMongooseArray)return J.virtual(B[B.length-1],A);else throw new W5(`Path "${J}" is not an array`)}return $[F]};X1.prototype.virtualpath=function(F){return this.virtuals.hasOwnProperty(F)?this.virtuals[F]:null};X1.prototype.remove=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F))F.forEach(function(A){if(this.path(A)==null&&!this.nested[A])return;if(this.nested[A]){let $=Object.keys(this.paths).concat(Object.keys(this.nested));for(let B of $)if(B.startsWith(A+"."))delete this.paths[B],delete this.nested[B],zu(this,B);delete this.nested[A],zu(this,A);return}delete this.paths[A],zu(this,A),this._removeEncryptedField(A)},this);return this};/*!
 * ignore
 */function zu(F,A){let $=A.split("."),B=$.pop(),J=F.tree;for(let X of $)J=J[X];delete J[B]}X1.prototype.removeVirtual=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F)){for(let A of F)if(this.virtuals[A]==null)throw new W5(`Attempting to remove virtual "${A}" that does not exist.`);for(let A of F)if(delete this.paths[A],delete this.virtuals[A],A.indexOf(".")!==-1)bK.unset(A,this.tree);else delete this.tree[A]}return this};X1.prototype.loadClass=function(F,A){if(F===Object.prototype||F===Function.prototype||F.prototype.hasOwnProperty("$isMongooseModelPrototype")||F.prototype.hasOwnProperty("$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(F),A),!A)Object.getOwnPropertyNames(F).forEach(function($){if($.match(/^(length|name|prototype|constructor|__proto__)$/))return;let B=Object.getOwnPropertyDescriptor(F,$);if(B.hasOwnProperty("value"))this.static($,B.value)},this);return Object.getOwnPropertyNames(F.prototype).forEach(function($){if($.match(/^(constructor)$/))return;let B=Object.getOwnPropertyDescriptor(F.prototype,$);if(!A){if(typeof B.value==="function")this.method($,B.value)}if(typeof B.get==="function"){if(this.virtuals[$])this.virtuals[$].getters=[];this.virtual($).get(B.get)}if(typeof B.set==="function"){if(this.virtuals[$])this.virtuals[$].setters=[];this.virtual($).set(B.set)}},this),this};/*!
 * ignore
 */X1.prototype._getSchema=function(F){let A=this,$=A.path(F),B=[];if($)return $.$fullPath=F,$;function J(Y,D){let G=Y.length+1,Z,U;while(G--)if(U=Y.slice(0,G).join("."),Z=D.path(U),Z){if(B.push(U),Z.caster){if(Z.caster instanceof H5.Mixed)return Z.caster.$fullPath=B.join("."),Z.caster;if(G!==Y.length){if(G+1===Y.length&&Z.$embeddedSchemaType&&(Y[G]==="$"||gK(Y[G])))return Z.$embeddedSchemaType;if(Z.schema){let z;if(Y[G]==="$"||gK(Y[G])){if(G+1===Y.length)return Z.$embeddedSchemaType;if(z=J(Y.slice(G+1),Z.schema),z)z.$parentSchemaDocArray=z.$parentSchemaDocArray||(Z.schema.$isSingleNested?null:Z);return z}if(z=J(Y.slice(G),Z.schema),z)z.$parentSchemaDocArray=z.$parentSchemaDocArray||(Z.schema.$isSingleNested?null:Z);return z}}}else if(Z.$isSchemaMap){if(G>=Y.length)return Z;if(G+1>=Y.length)return Z.$__schemaType;if(Z.$__schemaType instanceof H5.Mixed)return Z.$__schemaType;if(Z.$__schemaType.schema!=null)return J(Y.slice(G+1),Z.$__schemaType.schema)}return Z.$fullPath=B.join("."),Z}}let X=F.split(".");for(let Y=0;Y<X.length;++Y){if(X[Y]==="$"||gK(X[Y]))X[Y]="0";if(X$0.test(X[Y]))X[Y]="$"}return J(X,A)};/*!
 * ignore
 */X1.prototype._getPathType=function(F){let A=this;if(A.path(F))return"real";function B(J,X){let Y=J.length+1,D,G;while(Y--)if(G=J.slice(0,Y).join("."),D=X.path(G),D){if(D.caster){if(D.caster instanceof H5.Mixed)return{schema:D,pathType:"mixed"};if(Y!==J.length&&D.schema){if(J[Y]==="$"||gK(J[Y])){if(Y===J.length-1)return{schema:D,pathType:"nested"};return B(J.slice(Y+1),D.schema)}return B(J.slice(Y),D.schema)}return{schema:D,pathType:D.$isSingleNested?"nested":"array"}}return{schema:D,pathType:"real"}}else if(Y===J.length&&X.nested[G])return{schema:X,pathType:"nested"};return{schema:D||X,pathType:"undefined"}}return B(F.split("."),A)};X1.prototype._transformDuplicateKeyError=function(A){if(!this._duplicateKeyErrorMessagesByPath)return A;if(A.code!==11000&&A.code!==11001)return A;if(A.keyPattern!=null){let $=A.keyPattern,B=Object.keys($);if(B.length!==1)return A;let J=B[0];if(!this._duplicateKeyErrorMessagesByPath.hasOwnProperty(J))return A;return new W5(this._duplicateKeyErrorMessagesByPath[J],{cause:A})}return A};/*!
 * ignore
 */function gK(F){return F.startsWith("$[")&&F.endsWith("]")}X1.prototype._preCompile=function(){this.plugin(sA0,{deduplicate:!0})};X1.prototype.toJSONSchema=function(A){let $=A?.useBsonType??!1,B=$?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let J of Object.keys(this.paths)){let X=this.paths[J];if(X._presplitPath.indexOf("$*")!==-1)continue;let Y=X._presplitPath.length>1,D=B;if(Y)for(let U=0;U<X._presplitPath.length-1;++U){let z=X._presplitPath[U];if(D.properties[z]==null)D.properties[z]=$?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}};D=D.properties[z]}let G=X._presplitPath[X._presplitPath.length-1],Z=!1;if(J==="_id"){if(!D.required)D.required=[];D.required.push("_id"),Z=!0}else if(X.options.required&&typeof X.options.required!=="function"){if(!D.required)D.required=[];D.required.push(G),Z=!0}if(D.properties[G]=X.toJSONSchema(A),X.options.enum)D.properties[G].enum=Z?X.options.enum:[...X.options.enum,null]}if(B.required.length===0)delete B.required;return B};/*!
 * Module exports.
 */YY1.exports=Ku=X1;X1.Types=H5=lD();/*!
 * ignore
 */Ku.ObjectId=H5.ObjectId});var Qu=Q((Uj0,DY1)=>{/*!
 * Module dependencies.
 */var Z$0=_3();class qu extends Z$0{constructor(F,A,$,B){let J=F.map((X)=>X.message).join(", ");if(J.length>200)J=J.slice(0,200)+"...";super(`${B} failed with ${F.length} Mongoose validation errors: ${J}`);this.validationErrors=F,this.results=A,this.rawResult=$,this.operation=B}}Object.defineProperty(qu.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */DY1.exports=qu});var ZY1=Q((zj0,GY1)=>{/*!
 * Module dependencies.
 */var U$0=d1();class Vu extends U$0{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(Vu.prototype,"name",{value:"SyncIndexesError"});GY1.exports=Vu});var Eu=Q((Wj0,UY1)=>{UY1.exports=function F(A,$,B,J){if(A[J])return;if(A[J]=!0,!B||!B.skipTopLevel){let G=null;for(let Z of $){let U=Z[1]==null?null:Z[1].tags;if(!Array.isArray(U)){A.plugin(Z[0],Z[1]);continue}if(G=G||new Set(A.options.pluginTags||[]),!U.find((z)=>G.has(z)))continue;A.plugin(Z[0],Z[1])}}if(B=Object.assign({},B),delete B.skipTopLevel,B.applyPluginsToChildSchemas!==!1)for(let G of Object.keys(A.paths)){let Z=A.paths[G];if(Z.schema!=null)F(Z.schema,$,B,J),Z.caster.prototype.$__setSchema(Z.schema)}let X=A.discriminators;if(X==null)return;let Y=B.applyPluginsToDiscriminators,D=Object.keys(X);for(let G of D){let Z=X[G];F(Z,$,{skipTopLevel:!Y},J)}}});var yK=Q((z$0,Lu)=>{/*!
 * ignore
 */var zY1=null;z$0.get=function(){return zY1};z$0.set=function(F){zY1=F}});var wu=Q((Hj0,WY1)=>{function K$0(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}WY1.exports=K$0});var KY1=Q((Kj0,HY1)=>{var q$0=d1();class Iu extends q$0{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(Iu.prototype,"name",{value:"CreateCollectionsError"});HY1.exports=Iu});var VY1=Q((qj0,QY1)=>{var qY1=OH().modifiedPaths;QY1.exports=function(A){let $=Object.keys(A),B={},J={};for(let X of $){if(X.startsWith("$")){qY1(A[X],"",B);continue}J[X]=A[X]}return qY1(J,"",B),B}});var Cu=Q((Qj0,EY1)=>{var Q$0=VY1();EY1.exports=function(A){if(A==null)return{};let $=Q$0(A);return Object.keys($).reduce((B,J)=>{let X=J.match(/\$\[[^\]]+\]/g);if(X==null)return B;for(let Y of X){let D=J.indexOf(Y);if(D!==J.lastIndexOf(Y))throw Error(`Path '${J}' contains the same array filter multiple times`);B[Y.substring(2,Y.length-1)]=J.substring(0,D-1).replace(/\$\[[^\]]+\]/g,"0")}return B},{})}});var IY1=Q((Vj0,wY1)=>{var V$0=yD(),LY1=V6(),E$0=c9(),L$0=Cu();wY1.exports=function(A,$,B,J,X){let Y=J.indexOf(".")===-1?[J]:J.split("."),D=null,G="adhocOrUndefined";B=B||{},$=$||{};let Z=X!=null&&Array.isArray(X.arrayFilters)?X.arrayFilters:[],U=L$0($),z=0;for(let W=0;W<Y.length;++W){let H=Y.slice(z,W+1).join("."),K=V$0(H);if(D=A.path(K),D==null)continue;if(G=A.pathType(K),(D.$isSingleNested||D.$isMongooseDocumentArrayElement)&&D.schema.discriminators!=null){let q=LY1(D,"schema.options.discriminatorKey"),V=K+"."+q,E=V.replace(/\.\d+\./,"."),L=null;if(V in B)L=B[V];if(E in B)L=B[E];let w=K.replace(/\.\d+$/,"");if(D.$isMongooseDocumentArrayElement&&LY1(B[w],"$elemMatch."+q)!=null)L=B[w].$elemMatch[q];let I=H+"."+q;if(I in $)L=$[I];if(V in $)L=$[V];for(let g of Object.keys(U)){let S=U[g]+"."+q,O=g+"."+q;if(S===E){let p=Z.find((m)=>m.hasOwnProperty(O));if(p!=null)L=p[O]}}if(L==null)continue;let P=E$0(D.caster.discriminators,L),M=P&&P.schema;if(M==null)continue;let u=Y.slice(W+1).join(".");if(D=M.path(u),A=M,z=W+1,D!=null){G=M._getPathType(u);break}}}return{type:G,schematype:D}}});var NY1=Q((Ej0,CY1)=>{var w$0=B5();CY1.exports=function(A,$,B,J,X,Y,D){if(A==null||!A.options||!A.options.immutable)return!1;let G=A.options.immutable;if(typeof G==="function")G=G.call(D,D);if(!G)return!1;if(Y&&Y.overwriteImmutable)return!1;if($===!1)return!1;if($==="throw")throw new w$0(null,`Field ${X} is immutable and strict = 'throw'`);return delete B[J],!0}});var jY1=Q((Lj0,RY1)=>{var I$0=V6();RY1.exports=function(A,$,B){if($==null)return;let J=Object.keys($);for(let X of J){let Y=X.startsWith("$");if(X==="$set"){let D=Object.keys($[X]);for(let G of D)PY1(A,$[X],G,$,B)}else if(!Y)PY1(A,$,X,$,B)}};function PY1(F,A,$,B,J){let X=F.path($);if(X==null)return;let Y=I$0(X,"options.immutable",null);if(Y==null)return;if(typeof Y==="function")Y=Y.call(J,J);if(!Y)return;B.$setOnInsert=B.$setOnInsert||{},B.$setOnInsert[$]=A[$],delete A[$]}});var Pu=Q((wj0,MY1)=>{var Nu=jF();MY1.exports=function(A,$,B){if($.indexOf(".")===-1){if(Nu.has($))return;A[$]=B;return}let J=$.split("."),X=J.pop(),Y=A;for(let D of J){if(Nu.has(D))continue;if(Y[D]==null)Y[D]={};Y=Y[D]}if(!Nu.has(X))Y[X]=B}});var Ou=Q((Ij0,bY1)=>{var vK=a4(),fB=d1(),TY1=Bu(),kY1=B5(),C$0=kF(),Mu=mD(),N$0=_F(),P$0=E3(),Ru=c9(),ju=IY1(),OY1=NY1(),R$0=jY1(),fY1=SF().schemaMixedSymbol,j$0=Pu(),xB=P1(),{internalToObjectOptions:M$0}=R2(),Tu=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);bY1.exports=function(A,$,B,J,X){if($==null)return;if(B=B||{},Array.isArray($)){let z=$.length;for(let W=0;W<z;++W){let H=Object.keys($[W]);for(let K of H)$[W][K]=T$0(K,$[W][K])}return $}if(A!=null&&X!=null&&xB.hasUserDefinedProperty(X,A.options.discriminatorKey)&&typeof X[A.options.discriminatorKey]!=="object"&&A.discriminators!=null){let z=X[A.options.discriminatorKey],W=Ru(J.model.discriminators,z);A=A.discriminators[z]||W&&W.schema||A}else if(A!=null&&B.overwriteDiscriminatorKey&&xB.hasUserDefinedProperty($,A.options.discriminatorKey)&&A.discriminators!=null){let z=$[A.options.discriminatorKey],W=Ru(J.model.discriminators,z);A=A.discriminators[z]||W&&W.schema||A}else if(A!=null&&B.overwriteDiscriminatorKey&&$.$set!=null&&xB.hasUserDefinedProperty($.$set,A.options.discriminatorKey)&&A.discriminators!=null){let z=$.$set[A.options.discriminatorKey],W=Ru(J.model.discriminators,z);A=A.discriminators[z]||W&&W.schema||A}if(B.upsert)R$0(A,$,J);let Y=Object.keys($),D=Y.length,G={},Z,U=!1;X=X||{};while(D--){let z=Y[D];if(!Tu.has(z)){if(!G.$set)if($.$set)G.$set=$.$set;else G.$set={};if(G.$set[z]=$[z],Y.splice(D,1),!~Y.indexOf("$set"))Y.push("$set")}else if(z==="$set"){if(!G.$set)G[z]=$[z]}else G[z]=$[z]}D=Y.length;while(D--){let z=Y[D];if(Z=G[z],U=U||z.startsWith("$"),Z!=null&&Z.$__)Z=Z.toObject(M$0),G[z]=Z;if(Z&&typeof Z==="object"&&!Buffer.isBuffer(Z)&&Tu.has(z))xY1(A,Z,z,B,J,X);else{let W="Invalid atomic update value for "+z+". Expected an object, received "+typeof Z;throw Error(W)}if(z.startsWith("$")&&xB.isEmptyObject(Z))delete G[z]}if(Object.keys(G).length===0&&B.upsert&&Object.keys(X).length>0)return{$setOnInsert:{...X}};return G};/*!
 * ignore
 */function T$0(F,A){if(F==="$unset"){if(typeof A!=="string"&&(!Array.isArray(A)||A.find(($)=>typeof $!=="string")))throw new fB("Invalid $unset in pipeline, must be  a string or an array of strings");return A}if(F==="$project"){if(A==null||typeof A!=="object")throw new fB("Invalid $project in pipeline, must be an object");return A}if(F==="$addFields"||F==="$set"){if(A==null||typeof A!=="object")throw new fB("Invalid "+F+" in pipeline, must be an object");return A}else if(F==="$replaceRoot"||F==="$replaceWith"){if(A==null||typeof A!=="object")throw new fB("Invalid "+F+" in pipeline, must be an object");return A}throw new fB('Invalid update pipeline operator: "'+F+'"')}function xY1(F,A,$,B,J,X,Y){let D=B.strict;Y=Y?Y+".":"";let G=Object.keys(A),Z=G.length,U=!1,z,W,H,K=null,q=D!=null?D:F.options.strict;while(Z--){if(W=G[Z],H=A[W],$==="$pull"){if(z=F._getSchema(Y+W),z==null){let E=ju(F,A,X,Y+W,B);if(E.schematype!=null)z=E.schematype}if(z!=null&&z.schema!=null){A[W]=N$0(z.schema,A[W],B,J),U=!0;continue}}let V=Y?Y+W:W;if(F.discriminatorMapping!=null&&V===F.options.discriminatorKey&&F.discriminatorMapping.value!==A[W]&&!B.overwriteDiscriminatorKey){if(q==="throw"){let E=Error(`Can't modify discriminator key "`+V+'" on discriminator model');K=mF(E,J,V,K);continue}else if(q){delete A[W];continue}}if(P$0(H)==="Object"){if(z=F._getSchema(Y+W),z==null){let E=ju(F,A,X,Y+W,B);if(E.schematype!=null)z=E.schematype}if($!=="$setOnInsert"&&OY1(z,D,A,W,Y+W,B,J))continue;if(z&&z.caster&&$ in ku)if("$each"in H){U=!0;try{A[W]={$each:uB(z,H.$each,$,W,J,Y+W)}}catch(E){K=mF(E,J,W,K)}if(H.$slice!=null)A[W].$slice=H.$slice|0;if(H.$sort)A[W].$sort=H.$sort;if(H.$position!=null)A[W].$position=Mu(H.$position)}else{if(z!=null&&z.$isSingleNested){let E=D==null?z.schema.options.strict:D;try{A[W]=z.castForQuery(null,H,J,{strict:E})}catch(L){K=mF(L,J,W,K)}}else try{A[W]=uB(z,H,$,W,J,Y+W)}catch(E){K=mF(E,J,W,K)}if(A[W]===void 0){delete A[W];continue}U=!0}else if($==="$currentDate"||$ in ku&&z){try{A[W]=uB(z,H,$,W,J,Y+W)}catch(E){K=mF(E,J,W,K)}if(A[W]===void 0){delete A[W];continue}U=!0}else if($==="$rename"){let E=new TY1(`${Y}${W}.$rename`);try{A[W]=uB(E,H,$,W,J,Y+W)}catch(L){K=mF(L,J,W,K)}if(A[W]===void 0){delete A[W];continue}U=!0}else{let E=Y+W,L=F._getPathType(E),w=D;if(L&&L.schema&&w==null)w=L.schema.options.strict;if(L.pathType==="undefined"){if(w==="throw")throw new kY1(E);else if(w){delete A[W];continue}}U|=xY1(F,H,$,B,J,X,Y+W)||xB.isObject(H)&&Object.keys(H).length===0}}else{let E=W==="$each"||W==="$or"||W==="$and"||W==="$in";if(E&&!Y)throw new fB('Invalid update: Unexpected modifier "'+W+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let L=E?Y:Y+W;if(z=F._getSchema(L),$!=="$setOnInsert"&&OY1(z,D,A,W,Y+W,B,J))continue;let w=F._getPathType(L);if(z==null){let M=ju(F,A,X,L,B);if(M.schematype!=null)z=M.schematype,w=M.type}let I=D;if(w&&w.schema&&D==null)I=w.schema.options.strict;if(I&&!z&&!/real|nested/.test(w.pathType))if(I==="throw"&&F.virtuals[L]==null)throw new kY1(Y+W);else delete A[W];else{if($==="$rename"){if(A[W]==null)throw new vK("String",A[W],`${Y}${W}.$rename`);let M=new TY1(`${Y}${W}.$rename`,null,null,F);A[W]=M.castForQuery(null,A[W],J);continue}try{if(Y.length===0||W.indexOf(".")===-1)A[W]=uB(z,H,$,W,J,Y+W);else if(I!==!1||z!=null)j$0(A,W,uB(z,H,$,W,J,Y+W)),delete A[W]}catch(M){K=mF(M,J,W,K)}if(Array.isArray(A[W])&&($==="$addToSet"||$==="$push")&&W!=="$each"){if(z&&z.caster&&!z.caster.$isMongooseArray&&!z.caster[fY1])A[W]={$each:A[W]}}if(A[W]===void 0){delete A[W];continue}U=!0}}}if(K!=null)throw K;return U}/*!
 * ignore
 */function mF(F,A,$,B){if(typeof A!=="object"||!A.options.multipleCastError)throw F;return B=B||new C$0,B.addError($,F),B}var SY1={$pop:1,$inc:1},k$0={$unset:1},ku={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var uY1={$set:1,$setOnInsert:1};function uB(F,A,$,B,J,X){if(!F){if($ in SY1)try{return Mu(A)}catch(D){throw new vK("number",A,X)}return A}if(F.caster&&$ in ku&&(xB.isObject(A)||Array.isArray(A))&&!uY1[$]){let D=0,G=F;while(G.$isMongooseArray)++D,G=G.caster;let Z=0,U=A;while(Array.isArray(U))++Z,U=U[0];let z=D-Z;while(Z<D)A=[A],++Z;let W=F.applySetters(Array.isArray(A)?A:[A],J);for(let H=0;H<z;++H)W=W[0];return W}if($ in k$0)return A;if($ in SY1){if(A==null)throw new vK("number",A,F.path);if($==="$inc")return F.castForQuery(null,A,J);try{return Mu(A)}catch(D){throw new vK("number",A,F.path)}}if($==="$currentDate"){if(typeof A==="object")return{$type:A.$type};return Boolean(A)}if(Tu.has(B))return F.castForQuery(B,A,J);if(uY1[$]){let D=A!=null&&F.$isMongooseArray&&F.$fullPath!=null&&!F.$fullPath.match(/\d+$/),G=F[fY1]!=null;if(D||G)return F.applySetters(A,J);return F.castForQuery(null,A,J)}return F.castForQuery(null,A,J)}});var Su=Q((Cj0,gY1)=>{gY1.exports=function(A,$,B){if(!B||!($&&$.upsert))return;if($.overwrite){if(!JG(A,B))A[B]=0}else if(!JG(A,B)&&!JG(A?.$set,B)&&!JG(A?.$inc,B)&&!JG(A?.$setOnInsert,B)){if(!A.$setOnInsert)A.$setOnInsert={};A.$setOnInsert[B]=0}};function JG(F,A){if(F==null||typeof F!=="object")return!1;return Object.prototype.hasOwnProperty.call(F,A)}});var uu=Q((Nj0,yY1)=>{var O$0=V6();yY1.exports=function(F,A,$,B){B=B||{};let J=B.setDefaultsOnInsert!=null?B.setDefaultsOnInsert:A.base.options.setDefaultsOnInsert;if(!B.upsert||J===!1)return $;let X=Object.keys($||{}),Y={},D={},G=X.length,Z=!1;for(let W=0;W<G;++W)if(X[W].charAt(0)==="$"){Z=!0;break}let U=Object.keys(F),z=U.length;for(let W=0;W<z;++W){let H=U[W],K=F[H];if(K&&typeof K==="object"){let q=Object.keys(K),V=q.length,E=!1;for(let L=0;L<V;++L)if(q[L].charAt(0)==="$"){E=!0;break}if(E)continue}Y[H]=!0}if(B&&B.overwrite&&!Z)return $;return A.eachPath(function(W,H){if(H.path==="_id"&&H.options.auto)return;let K=H.getDefault(null,!0);if(typeof K>"u")return;let q=H.splitPath();if(q.includes("$*"))return;if(S$0($,Y,W,q,Z))return;if($=$||{},$.$setOnInsert=$.$setOnInsert||{},O$0($,W)==null)$.$setOnInsert[W]=K;D[W]=K}),$};function S$0(F,A,$,B,J){if(A[$])return!0;let X=B[0];for(let Y=1;Y<B.length;++Y){if(A[X])return!0;X+="."+B[Y]}if(J){for(let Y in F)if(Y.charAt(0)==="$"){if(_Y1(F[Y],$,B))return!0}}else if(_Y1(F,$,B))return!0;return!1}function _Y1(F,A,$){if(F==null||typeof F!=="object")return!1;if(F.hasOwnProperty(A))return!0;let B=$[0];for(let X=1;X<$.length;++X){if(F.hasOwnProperty(B))return!0;B+="."+$[X]}let J=A+".";for(let X in F)if(X.startsWith(J))return!0;return!1}});var fu=Q((Pj0,x6)=>{var u$0=d1(),f$0=c9(),vY1=YS(),hY1=DS(),XG=_F(),mY1=Ou(),x$0=Z6(),dY1=Su(),{inspect:b$0}=x("util"),cY1=uu();x6.exports=function(A,$,B){let J=A.base.now();if($.insertOne)return(X)=>x6.exports.castInsertOne(A,$.insertOne,B).then(()=>X(null),(Y)=>X(Y));else if($.updateOne)return(X)=>{try{x6.exports.castUpdateOne(A,$.updateOne,B,J),X(null)}catch(Y){X(Y)}};else if($.updateMany)return(X)=>{try{x6.exports.castUpdateMany(A,$.updateMany,B,J),X(null)}catch(Y){X(Y)}};else if($.replaceOne)return(X)=>{x6.exports.castReplaceOne(A,$.replaceOne,B).then(()=>X(null),(Y)=>X(Y))};else if($.deleteOne)return(X)=>{try{x6.exports.castDeleteOne(A,$.deleteOne),X(null)}catch(Y){X(Y)}};else if($.deleteMany)return(X)=>{try{x6.exports.castDeleteMany(A,$.deleteMany),X(null)}catch(Y){X(Y)}};else return(X)=>{let Y=new u$0(`Invalid op passed to \`bulkWrite()\`: ${b$0($)}`);X(Y,null)}};x6.exports.castInsertOne=async function(A,$,B){let J=bB(A,$.document),X=new J($.document);if(J.schema.options.timestamps&&hK($,B))X.initializeTimestamps();if(B.session!=null)X.$session(B.session);let Y=J?.schema?.options?.versionKey;if(Y&&X[Y]==null)X[Y]=0;if($.document=X,B.skipValidation||$.skipValidation)return $;return await $.document.$validate(),$};x6.exports.castUpdateOne=function(A,$,B,J){if(!$.filter)throw Error("Must provide a filter object.");if(!$.update)throw Error("Must provide an update object.");let X=bB(A,$.filter),Y=X.schema,D=B.strict!=null?B.strict:X.schema.options.strict,G=x$0($.update);YG(Y,$.filter);let Z=hK($,B);if(X.schema.$timestamps!=null&&Z){let W=X.schema.$timestamps.createdAt,H=X.schema.$timestamps.updatedAt;hY1(J,W,H,G,{})}if(Z)vY1(J,G,X.schema);let U=A.base.options.setDefaultsOnInsert;if(($.setDefaultsOnInsert==null?U:$.setDefaultsOnInsert)!==!1)cY1($.filter,X.schema,G,{setDefaultsOnInsert:!0,upsert:$.upsert});return dY1(G,$,X.schema.options.versionKey),$.filter=XG(X.schema,$.filter,{strict:D,upsert:$.upsert}),$.update=mY1(X.schema,G,{strict:D,upsert:$.upsert,arrayFilters:$.arrayFilters,overwriteDiscriminatorKey:$.overwriteDiscriminatorKey},X,$.filter),$};x6.exports.castUpdateMany=function(A,$,B,J){if(!$.filter)throw Error("Must provide a filter object.");if(!$.update)throw Error("Must provide an update object.");let X=bB(A,$.filter),Y=X.schema,D=B.strict!=null?B.strict:X.schema.options.strict,G=A.base.options.setDefaultsOnInsert;if(($.setDefaultsOnInsert==null?G:$.setDefaultsOnInsert)!==!1)cY1($.filter,X.schema,$.update,{setDefaultsOnInsert:!0,upsert:$.upsert});let U=hK($,B);if(X.schema.$timestamps!=null&&U){let z=X.schema.$timestamps.createdAt,W=X.schema.$timestamps.updatedAt;hY1(J,z,W,$.update,{})}if(U)vY1(J,$.update,X.schema);YG(Y,$.filter),dY1($.update,$,X.schema.options.versionKey),$.filter=XG(X.schema,$.filter,{strict:D,upsert:$.upsert}),$.update=mY1(X.schema,$.update,{strict:D,upsert:$.upsert,arrayFilters:$.arrayFilters,overwriteDiscriminatorKey:$.overwriteDiscriminatorKey},X,$.filter)};x6.exports.castReplaceOne=async function(A,$,B){let J=bB(A,$.filter),X=J.schema,Y=B.strict!=null?B.strict:J.schema.options.strict;YG(X,$.filter),$.filter=XG(J.schema,$.filter,{strict:Y,upsert:$.upsert});let D=new J($.replacement,Y,!0);if(J.schema.options.timestamps&&hK($,B))D.initializeTimestamps();if(B.session!=null)D.$session(B.session);let G=J?.schema?.options?.versionKey;if(G&&D[G]==null)D[G]=0;if($.replacement=D,B.skipValidation||$.skipValidation){$.replacement=$.replacement.toBSON();return}await $.replacement.$validate(),$.replacement=$.replacement.toBSON()};x6.exports.castDeleteOne=function(A,$){let B=bB(A,$.filter),J=B.schema;YG(J,$.filter),$.filter=XG(B.schema,$.filter)};x6.exports.castDeleteMany=function(A,$){let B=bB(A,$.filter),J=B.schema;YG(J,$.filter),$.filter=XG(B.schema,$.filter)};x6.exports.cast={insertOne:x6.exports.castInsertOne,updateOne:x6.exports.castUpdateOne,updateMany:x6.exports.castUpdateMany,replaceOne:x6.exports.castReplaceOne,deleteOne:x6.exports.castDeleteOne,deleteMany:x6.exports.castDeleteMany};function YG(F,A){if(F==null)return;if(F.discriminatorMapping&&!F.discriminatorMapping.isRoot)A[F.discriminatorMapping.key]=F.discriminatorMapping.value}function bB(F,A){let $=F.schema.options.discriminatorKey;if(A!=null&&A.hasOwnProperty($))F=f$0(F.discriminators,A[$])||F;return F}function hK(F,A){let $=F.timestamps,B=A.timestamps;if($!=null)return $;else if(B!=null)return B;return!0}});var xu=Q((Rj0,lY1)=>{lY1.exports=function(A,$,B){return A.mongoose=A.mongoose||{},A.mongoose.validationErrors=$,A.mongoose.results=B,A}});var yu=Q((jj0,nY1)=>{/*!
 * Module dependencies.
 */var g$0=vk(),gu=x("events").EventEmitter,_$0=D5(),b6=TY(),pY1=Qu(),w6=_3(),y$0=$O(),v$0=ZY1(),h$0=Eu(),m$0=Z6(),d$0=yK(),c$0=V6(),l$0=wu(),iY1=x9(),_u=P1(),p$0=KY1(),mK=fu(),{modelSymbol:dK}=q1(),i$0=PO(),bu=xu(),a$0=q1().arrayAtomicsSymbol,DG=q1().sessionNewDocuments,n$0=globalThis.Date,r$0=["MONGODB-X509"];function E1(F){if(this.base=F,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=b6,this._readyState=b6.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof F>"u"||!F.connections.length)this.id=0;else this.id=F.nextConnectionId;this._queue=[]}/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(E1.prototype,gu.prototype);Object.defineProperty(E1.prototype,"readyState",{get:function(){if(this._readyState===b6.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS==="number"&&n$0.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2)return b6.disconnected;return this._readyState},set:function(F){if(!(F in b6))throw Error("Invalid connection state: "+F);if(this._readyState!==F){this._readyState=F;for(let A of this.otherDbs)A.readyState=F;if(b6.connected===F)this._hasOpened=!0;this.emit(b6[F])}}});E1.prototype.get=function(A){if(this.config.hasOwnProperty(A))return this.config[A];return c$0(this.options,A)};E1.prototype.set=function(A,$){if(this.config.hasOwnProperty(A))return this.config[A]=$,$;return this.options=this.options||{},this.options[A]=$,$};E1.prototype.collections;E1.prototype.name;E1.prototype.models;E1.prototype.id;Object.defineProperty(E1.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});E1.prototype.db;E1.prototype.client;E1.prototype.config;E1.prototype.createCollection=async function(A,$){if(typeof $==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new w6("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(A,$)};E1.prototype.bulkWrite=async function(A,$){await this._waitForConnect(),$=$||{};let B=$.ordered==null?!0:$.ordered,J=this.base.transactionAsyncLocalStorage?.getStore();if((!$||!$.hasOwnProperty("session"))&&J?.session!=null)$={...$,session:J.session};let X=this.base.now(),Y=null;if(B){let D=[];for(let G of A){if(typeof G.model!=="string"&&!G.model?.[dK])throw new w6("Must specify model in Connection.prototype.bulkWrite() operations");let Z=G.model[dK]?G.model:this.model(G.model);if(G.name==null)throw new w6("Must specify operation name in Connection.prototype.bulkWrite()");if(!mK.cast.hasOwnProperty(G.name))throw new w6(`Unrecognized bulkWrite() operation name ${G.name}`);await mK.cast[G.name](Z,G,$,X),D.push({...G,namespace:Z.namespace()})}Y=await this.client.bulkWrite(D,$)}else{let D=[],G=[],Z=[],U=[],z=[];for(let H=0;H<A.length;++H){let K=A[H];if(typeof K.model!=="string"&&!K.model?.[dK]){let E=new w6("Must specify model in Connection.prototype.bulkWrite() operations");Z.push({index:H,error:E}),z[H]=E;continue}let q;try{q=K.model[dK]?K.model:this.model(K.model)}catch(E){Z.push({index:H,error:E});continue}if(K.name==null){let E=new w6("Must specify operation name in Connection.prototype.bulkWrite()");Z.push({index:H,error:E}),z[H]=E;continue}if(!mK.cast.hasOwnProperty(K.name)){let E=new w6(`Unrecognized bulkWrite() operation name ${K.name}`);Z.push({index:H,error:E}),z[H]=E;continue}let V=null;try{V=mK.cast[K.name](q,K,$,X)}catch(E){Z.push({index:H,error:E}),z[H]=E;continue}if(i$0(V))U.push(V.then(()=>{D.push({...K,namespace:q.namespace()}),G.push(H)},(E)=>{Z.push({index:H,error:E}),z[H]=E}));else D.push({...K,namespace:q.namespace()}),G.push(H)}if(U.length>0)await Promise.all(U);if(Z=Z.sort((H,K)=>H.index-K.index).map((H)=>H.error),D.length===0){if($.throwOnValidationError&&Z.length)throw new pY1(Z,z,K,"bulkWrite");let K=new(this.base.driver.get()).BulkWriteResult(l$0(),!1);return bu(K,Z,z)}let W;[Y,W]=await this.client.bulkWrite(D,$).then((H)=>[H,null]).catch((H)=>[null,H]);for(let H=0;H<G.length;++H)z[G[H]]=null;if(W){if(Z.length>0)bu(W,Z,z),W.mongoose=W.mongoose||{},W.mongoose.validationErrors=Z}if(Z.length>0)if($.throwOnValidationError)throw new pY1(Z,z,Y,"bulkWrite");else bu(Y,Z,z)}return Y};E1.prototype.createCollections=async function(A={}){let $={},B={},{continueOnError:J}=A;delete A.continueOnError;for(let X of Object.values(this.models))try{$[X.modelName]=await X.createCollection({})}catch(Y){if(!J){B[X.modelName]=Y;break}else $[X.modelName]=Y}if(!J&&Object.keys(B).length){let X=Object.entries(B).map(([D,G])=>`${D}: ${G.message}`).join(", ");throw new p$0(X,B)}return $};E1.prototype.withSession=async function(A){if(arguments.length===0)throw Error("Please provide an executor function");return await this.client.withSession(A)};E1.prototype.startSession=async function(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new w6("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(A)};E1.prototype.transaction=function(A,$){return this.startSession().then((B)=>{return B[DG]=new Map,B.withTransaction(()=>t$0(A,B,this.base),$).then((J)=>{return delete B[DG],J}).catch((J)=>{throw delete B[DG],J}).finally(()=>{B.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 */async function t$0(F,A,$){try{return $.transactionAsyncLocalStorage==null?await F(A):await new Promise((J)=>{$.transactionAsyncLocalStorage.run({session:A},()=>J(F(A)))})}catch(B){throw s$0(A),B}}/*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */function s$0(F){for(let A of F[DG].keys()){let $=F[DG].get(A);if($.hasOwnProperty("isNew"))A.$isNew=$.isNew;if($.hasOwnProperty("versionKey"))A.set(A.schema.options.versionKey,$.versionKey);if($.modifiedPaths.length>0&&A.$__.activePaths.states.modify==null)A.$__.activePaths.states.modify={};for(let B of $.modifiedPaths){let J=A.$__.activePaths.paths[B];if(J!=null)delete A.$__.activePaths[J][B];A.$__.activePaths.paths[B]="modify",A.$__.activePaths.states.modify[B]=!0}for(let B of $.atomics.keys()){let J=A.$__getValue(B);if(J==null)continue;J[a$0]=$.atomics.get(B)}}}E1.prototype.dropCollection=async function(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new w6("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(A)};E1.prototype._waitForConnect=async function(A){if((this.readyState===b6.connecting||this.readyState===b6.disconnected)&&this._shouldBufferCommands()){let $=this._getBufferTimeoutMS(),B=null,J=!1,X={},Y=new Promise((D)=>{X.fn=D,this._queue.push(X)});if(A)await Y;else await Promise.race([Y,new Promise((D)=>{B=setTimeout(()=>{J=!0,D()},$)})]);if(J){let D=this._queue.indexOf(X);if(D!==-1)this._queue.splice(D,1);let G="Connection operation buffering timed out after "+$+"ms";throw new w6(G)}else if(B!=null)clearTimeout(B)}};/*!
 * Get the default buffer timeout for this connection
 */E1.prototype._getBufferTimeoutMS=function(){if(this.config.bufferTimeoutMS!=null)return this.config.bufferTimeoutMS;if(this.base!=null&&this.base.get("bufferTimeoutMS")!=null)return this.base.get("bufferTimeoutMS");return 1e4};E1.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};E1.prototype.listDatabases=async function(){throw new w6("listDatabases() not implemented by driver")};E1.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new w6("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let A of Object.values(this.models))delete A.$init;return this.db.dropDatabase()};/*!
 * ignore
 */E1.prototype._shouldBufferCommands=function(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};E1.prototype.error=function(A,$){if($)return $(A),null;if(this.listeners("error").length>0)this.emit("error",A);return Promise.reject(A)};E1.prototype.onOpen=function(){this.readyState=b6.connected;for(let F of this._queue)F.fn.apply(F.ctx,F.args);this._queue=[];for(let F in this.collections)if(_u.object.hasOwnProperty(this.collections,F))this.collections[F].onOpen();this.emit("open")};E1.prototype.openUri=async function(A,$){if(this.readyState===b6.connecting||this.readyState===b6.connected){if(this._connectionString===A)return this}this._closeCalled=!1;let B=!1;if($&&"_fireAndForget"in $)B=$._fireAndForget,delete $._fireAndForget;try{o$0.apply(arguments)}catch(J){if(B)throw J;throw this.$initialConnection=Promise.reject(J),J}this.$initialConnection=this.createClient(A,$).then(()=>this).catch((J)=>{if(this.readyState=b6.disconnected,this.listeners("error").length>0)iY1(()=>this.emit("error",J));throw J});for(let J of Object.values(this.models))J.init().catch(function(){});if(B)return this;try{await this.$initialConnection}catch(J){throw aY1(J)}return this};E1.prototype.on=function(A,$){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return gu.prototype.on.call(this,A,$)};E1.prototype.once=function(A,$){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return gu.prototype.once.call(this,A,$)};/*!
 * ignore
 */function o$0(F,A,$){if(typeof A==="function"&&$==null)throw new w6("Connection.prototype.openUri() no longer accepts a callback");else if(typeof $==="function")throw new w6("Connection.prototype.openUri() no longer accepts a callback")}/*!
 * ignore
 */function aY1(F){if(F?.name==="MongoServerSelectionError"){let A=F;F=new y$0,F.assimilateError(A)}return F}E1.prototype.destroy=async function(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new w6("Connection.prototype.destroy() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;return this._close(A,!0)};E1.prototype.close=async function(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new w6("Connection.prototype.close() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;if(this._lastHeartbeatAt!=null)this._lastHeartbeatAt=null;for(let $ of Object.values(this.models))delete $.$init;return this._close(A,!1)};E1.prototype._close=async function(A,$){let B=this,J=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=$,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=$;let X=this;switch(this.readyState){case b6.disconnected:if($&&this.base.connections.indexOf(X)!==-1)this.base.connections.splice(this.base.connections.indexOf(X),1);if(!J)await this.doClose(A),this.onClose(A);break;case b6.connected:if(this.readyState=b6.disconnecting,await this.doClose(A),$&&B.base.connections.indexOf(X)!==-1)this.base.connections.splice(this.base.connections.indexOf(X),1);this.onClose(A);break;case b6.connecting:return new Promise((Y,D)=>{let G=()=>{if(this.removeListener("open",G),this.removeListener("error",G),$)this.destroy(A).then(Y,D);else this.close(A).then(Y,D)};this.once("open",G),this.once("error",G)});case b6.disconnecting:return new Promise((Y)=>{this.once("close",()=>{if($&&this.base.connections.indexOf(X)!==-1)this.base.connections.splice(this.base.connections.indexOf(X),1);Y()})})}return this};E1.prototype.doClose=function(){throw Error("Connection#doClose unimplemented by driver")};E1.prototype.onClose=function(A){this.readyState=b6.disconnected;for(let B in this.collections)if(_u.object.hasOwnProperty(this.collections,B))this.collections[B].onClose(A);this.emit("close",A);let $=typeof A==="object"&&A!==null?A.force:A;for(let B of this.otherDbs)this._destroyCalled?B.destroy({force:$,skipCloseClient:!0}):B.close({force:$,skipCloseClient:!0})};E1.prototype.collection=function(F,A){let $={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};A=Object.assign({},$,A?m$0(A):{}),A.$wasForceClosed=this.$wasForceClosed;let B=this.base&&this.base.__driver&&this.base.__driver.Collection||d$0.get().Collection;if(!(F in this.collections))this.collections[F]=new B(F,this,A);return this.collections[F]};E1.prototype.plugin=function(F,A){return this.plugins.push([F,A]),this};E1.prototype.model=function(A,$,B,J){if(!(this instanceof E1))throw new w6("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let X;if(typeof A==="function")X=A,A=X.name;if(typeof $==="string")B=$,$=!1;if(_u.isObject($)){if(!$.instanceOfSchema)$=new _$0($);else if(!($ instanceof this.base.Schema))$=$._clone(this.base.Schema)}if($&&!$.instanceOfSchema)throw Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let Y={cache:!1,overwriteModels:this.base.options.overwriteModels},D=Object.assign(Y,J,{connection:this});if(this.models[A]&&!B&&D.overwriteModels!==!0){if($&&$.instanceOfSchema&&$!==this.models[A].schema)throw new w6.OverwriteModelError(A);return this.models[A]}let G;if($&&$.instanceOfSchema){if(h$0($,this.plugins,null,"$connectionPluginsApplied"),G=this.base._model(X||A,$,B,D),!this.models[A])this.models[A]=G;return G.init().catch(function(){}),G}if(this.models[A]&&B)return G=this.models[A],$=G.prototype.schema,G.__subclass(this,$,B);if(arguments.length===1){if(G=this.models[A],!G)throw new w6.MissingSchemaError(A);return G}if(!G)throw new w6.MissingSchemaError(A);if(this===G.prototype.db&&(!B||B===G.collection.name)){if(!this.models[A])this.models[A]=G;return G}return this.models[A]=G.__subclass(this,$,B),this.models[A]};E1.prototype.deleteModel=function(A){if(typeof A==="string"){let $=this.model(A);if($==null)return this;let B=$.collection.name;delete this.models[A],delete this.collections[B],this.emit("deleteModel",$)}else if(A instanceof RegExp){let $=A,B=this.modelNames();for(let J of B)if($.test(J))this.deleteModel(J)}else throw Error('First parameter to `deleteModel()` must be a string or regexp, got "'+A+'"');return this};E1.prototype.watch=function(A,$){return new g$0((X)=>{iY1(()=>{if(this.readyState===b6.connecting)this.once("open",function(){let Y=this.db.watch(A,$);X(null,Y)});else{let Y=this.db.watch(A,$);X(null,Y)}})},A,$)};E1.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(A){throw aY1(A)}};E1.prototype.modelNames=function(){return Object.keys(this.models)};E1.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};E1.prototype.authMechanismDoesNotRequirePassword=function(){if(this.options&&this.options.auth)return r$0.indexOf(this.options.auth.authMechanism)>=0;return!0};E1.prototype.optionsProvideAuthenticationData=function(A){return A&&A.user&&(A.pass||this.authMechanismDoesNotRequirePassword())};E1.prototype.getClient=function(){return this.client};E1.prototype.setClient=function(){throw new w6("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */E1.prototype.createClient=function(){throw new w6("Connection#createClient not implemented by driver")};E1.prototype.syncIndexes=async function(A={}){let $={},B={},{continueOnError:J}=A;delete A.continueOnError;for(let X of Object.values(this.models))try{$[X.modelName]=await X.syncIndexes(A)}catch(Y){if(!J){B[X.modelName]=Y;break}else $[X.modelName]=Y}if(!J&&Object.keys(B).length){let X=Object.entries(B).map(([D,G])=>`${D}: ${G.message}`).join(", ");throw new v$0(X,B)}return $};/*!
 * Module exports.
 */E1.STATES=b6;nY1.exports=E1});var vu=Q((Mj0,e$0)=>{e$0.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.20.1",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{bson:"^6.10.4",kareem:"2.6.3",mongodb:"~6.20.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.53.0","@babel/core":"7.28.5","@babel/preset-env":"7.28.5","@mongodb-js/mongodb-downloader":"^1.0.0","@typescript-eslint/eslint-plugin":"^8.19.1","@typescript-eslint/parser":"^8.19.1",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","assert-browserify":"2.0.0","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.1.2","crypto-browserify":"3.12.1",dox:"1.0.0",eslint:"8.57.1","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.18.1",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.7.4",moment:"2.30.1","mongodb-memory-server":"10.3.0","mongodb-runner":"^6.0.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"21.0.0","stream-browserify":"3.0.0",tsd:"0.33.0",typescript:"5.9.3",uuid:"11.1.0",webpack:"5.102.1"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var tY1=Q((Tj0,rY1)=>{var FB0=Z6(),AB0=_3();function $B0(F,A){let $=A?A:{},B=$.readPreference?$.readPreference:YB0(F),J=FB0($);return B&&B!=="primary"&&B!=="primaryPreferred"?BB0(B,J):J}function BB0(F,A){if(JB0(A)&&XB0(F))GB0();else return DB0(A)}function JB0(F){let A=F.config&&F.config.autoIndex,{autoCreate:$,autoIndex:B}=F;return!!(A||$||B)}function XB0(F){return F==="secondary"||F==="secondaryPreferred"}function YB0(F){let $=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(F);return $?$[1]:null}function DB0(F){return F.config={autoIndex:!1},F.autoCreate=!1,F.autoIndex=!1,F}function GB0(){throw new AB0('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}rY1.exports=$B0});var sY1=Q((ZB0)=>{ZB0.setTimeout=setTimeout});var $D1=Q((Oj0,AD1)=>{/*!
 * Module dependencies.
 */var oY1=yu(),dF=_3(),d3=TY(),eY1=LF(),zB0=vu(),WB0=tY1(),HB0=sY1().setTimeout,FD1=P1(),KB0=D5();function k2(){oY1.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}k2.STATES=d3;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(k2.prototype,oY1.prototype);k2.prototype.useDb=function(F,A){if(A=A||{},A.useCache&&this.relatedDbs[F])return this.relatedDbs[F];let $=new this.constructor;$.name=F,$.base=this.base,$.collections={},$.models={},$.replica=this.replica,$.config=Object.assign({},this.config,$.config),$.name=this.name,$.options=this.options,$._readyState=this._readyState,$._closeCalled=this._closeCalled,$._hasOpened=this._hasOpened,$._listening=!1,$._parent=this,$.host=this.host,$.port=this.port,$.user=this.user,$.pass=this.pass;let B=this;if($.client=B.client,this.db&&this._readyState===d3.connected)J();else this._queue.push({fn:J});function J(){$.client=B.client;let X={};if(A.hasOwnProperty("noListener"))X.noListener=A.noListener;$.db=B.client.db(F,X),$._lastHeartbeatAt=B._lastHeartbeatAt,$.onOpen()}if($.name=F,A.noListener!==!0)this.otherDbs.push($);if($.otherDbs.push(this),A&&A.useCache)this.relatedDbs[$.name]=$,$.relatedDbs=this.relatedDbs;return $};k2.prototype.aggregate=function(A,$){return new this.base.Aggregate(null,this).append(A).option($??{})};k2.prototype.removeDb=function(A){let $=this.otherDbs.filter((B)=>B.name===A);if(!$.length)throw new dF(`No connections to database "${A}" found`);for(let B of $)B._closeCalled=!0,B._destroyCalled=!0,B._readyState=d3.disconnected,B.$wasForceClosed=!0;delete this.relatedDbs[A],this.otherDbs=this.otherDbs.filter((B)=>B.name!==A)};k2.prototype.doClose=async function(A){if(this.client==null)return this;let $=!1;if(A!=null&&typeof A==="object")$=A.skipCloseClient,A=A.force;if($)return this;return await this.client.close(A),await new Promise((B)=>HB0(B,1)),this};k2.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */k2.prototype.createClient=async function(A,$){if(typeof A!=="string")throw new dF(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof A}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new dF("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===d3.connecting||this.readyState===d3.connected){if(this._connectionString!==A)throw new dF("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if($=WB0(A,$),$){let D=$.config&&$.config.autoIndex!=null?$.config.autoIndex:$.autoIndex;if(D!=null)this.config.autoIndex=D!==!1,delete $.config,delete $.autoIndex;if("autoCreate"in $)this.config.autoCreate=!!$.autoCreate,delete $.autoCreate;if("sanitizeFilter"in $)this.config.sanitizeFilter=$.sanitizeFilter,delete $.sanitizeFilter;if("autoSearchIndex"in $)this.config.autoSearchIndex=$.autoSearchIndex,delete $.autoSearchIndex;if("bufferTimeoutMS"in $)this.config.bufferTimeoutMS=$.bufferTimeoutMS,delete $.bufferTimeoutMS;if($.user||$.pass)$.auth=$.auth||{},$.auth.username=$.user,$.auth.password=$.pass,this.user=$.user,this.pass=$.pass;if(delete $.user,delete $.pass,$.bufferCommands!=null)this.config.bufferCommands=$.bufferCommands,delete $.bufferCommands}else $={};this._connectionOptions=$;let B=$.dbName;if(B!=null)this.$dbName=B;if(delete $.dbName,!FD1.hasUserDefinedProperty($,"driverInfo"))$.driverInfo={name:"Mongoose",version:zB0.version};let{schemaMap:J,encryptedFieldsMap:X}=this._buildEncryptionSchemas();if((Object.keys(J).length>0||Object.keys(X).length)&&!$.autoEncryption)throw Error("Must provide `autoEncryption` when connecting with encrypted schemas.");if(Object.keys(J).length>0)$.autoEncryption.schemaMap=J;if(Object.keys(X).length>0)$.autoEncryption.encryptedFieldsMap=X;this.readyState=d3.connecting,this._connectionString=A;let Y;try{Y=new eY1.MongoClient(A,$)}catch(D){throw this.readyState=d3.disconnected,D}this.client=Y,Y.setMaxListeners(0),await Y.connect(),hu(this,Y,$,B);for(let D of this.otherDbs)hu(D,Y,{},D.name);return this};k2.prototype._buildEncryptionSchemas=function(){let F={},A={},$=Object.values(this.models).filter((X)=>X.schema._hasEncryptedFields());for(let X of $){let{schema:Y,collection:{collectionName:D}}=X,G=`${this.$dbName}.${D}`,Z=Y.encryptionType()==="csfle"?A:F;if(Z[G]??=new KB0({},{encryptionType:Y.encryptionType()}),Y.discriminatorMapping&&!Y.discriminatorMapping.isRoot){let z=Y._baseSchema;Y.eachPath((W)=>{if(z.path(W))return;if(!Z[G]._hasEncryptedField(W))return;throw Error(`Cannot have duplicate keys in discriminators with encryption. key=${W}`)})}Z[G].add(Y)}let B=Object.fromEntries(Object.entries(A).map(([X,Y])=>[X,Y._buildSchemaMap()])),J=Object.fromEntries(Object.entries(F).map(([X,Y])=>[X,Y._buildEncryptedFields()]));return{schemaMap:B,encryptedFieldsMap:J}};/*!
 * ignore
 */k2.prototype.setClient=function(A){if(!(A instanceof eY1.MongoClient))throw new dF("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==d3.disconnected)throw new dF("Cannot call `setClient()` on a connection that is already connected.");if(A.topology==null)throw new dF("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=A.s.url,hu(this,A,{},A.s.options.dbName);for(let $ of Object.values(this.models))$.init().catch(function(){});return this};/*!
 * ignore
 */function hu(F,A,$,B){let J=B!=null?A.db(B):A.db();F.db=J,F.client=A,F.host=A&&A.s&&A.s.options&&A.s.options.hosts&&A.s.options.hosts[0]&&A.s.options.hosts[0].host||void 0,F.port=A&&A.s&&A.s.options&&A.s.options.hosts&&A.s.options.hosts[0]&&A.s.options.hosts[0].port||void 0,F.name=B!=null?B:J.databaseName,F._closeCalled=A._closeCalled;let X=()=>{if(F.readyState!==d3.connected)F.readyState=d3.connected,F.emit("reconnect"),F.emit("reconnected"),F.onOpen()},Y=A&&A.topology&&A.topology.description&&A.topology.description.type||"";if(Y==="Single")A.on("serverDescriptionChanged",(D)=>{if(D.newDescription.type==="Unknown")F.readyState=d3.disconnected;else X()});else if(Y.startsWith("ReplicaSet"))A.on("topologyDescriptionChanged",(D)=>{let G=D.newDescription;if(F.readyState===d3.connected&&G.type!=="ReplicaSetWithPrimary")F.readyState=d3.disconnected;else if(F.readyState===d3.disconnected&&G.type==="ReplicaSetWithPrimary")X()});if(F._lastHeartbeatAt=null,A.on("serverHeartbeatSucceeded",()=>{F._lastHeartbeatAt=Date.now();for(let D of F.otherDbs)D._lastHeartbeatAt=F._lastHeartbeatAt}),$.monitorCommands)A.on("commandStarted",(D)=>F.emit("commandStarted",D)),A.on("commandFailed",(D)=>F.emit("commandFailed",D)),A.on("commandSucceeded",(D)=>F.emit("commandSucceeded",D));F.onOpen();for(let D in F.collections)if(FD1.object.hasOwnProperty(F.collections,D))F.collections[D].onOpen()}/*!
 * Module exports.
 */AD1.exports=k2});var BD1=Q((qB0)=>{/*!
 * Module exports.
 */qB0.BulkWriteResult=Ke();qB0.Collection=s81();qB0.Connection=$D1();qB0.ClientEncryption=LF().ClientEncryption});var XD1=Q((uj0,JD1)=>{/*!
 * Valid mongoose options
 */var wB0=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","skipOriginalStackTraces","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);JD1.exports=wB0});var DD1=Q((fj0,YD1)=>{/*!
 * Module dependencies.
 */var IB0=d1();class mu extends IB0{constructor(F){let A=F.map(($)=>$.message).join(", ");if(A.length>50)A=A.slice(0,50)+"...";super(`eachAsync() finished with ${F.length} errors: ${A}`);this.errors=F}}Object.defineProperty(mu.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */YD1.exports=mu});var cu=Q((xj0,ZD1)=>{/*!
 * Module dependencies.
 */var CB0=DD1(),du=x9();ZD1.exports=async function(A,$,B){let J=B.parallel||1,X=B.batchSize,Y=B.signal,D=B.continueOnError,G=[],Z=NB0(),U=!1;return new Promise((H,K)=>{if(Y!=null){if(Y.aborted)return H(null);Y.addEventListener("abort",()=>{return U=!0,H(null)},{once:!0})}if(X!=null){if(typeof X!=="number")throw TypeError("batchSize must be a number");else if(!Number.isInteger(X))throw TypeError("batchSize must be an integer");else if(X<1)throw TypeError("batchSize must be at least 1")}z((q,V)=>{if(q!=null)return K(q);H(V)})});function z(H){let K=0,q=0,V=null;for(let L=0;L<J;++L)Z(E());function E(){let L=[],w=!1;return I;function I(P){if(w||U)return P();else if(V)return P();A(function(M,u){if(V!=null)return P();if(M!=null)if(M.name==="MongoCursorExhaustedError")u=null;else if(D)G.push(M);else return V=M,H(M),P();if(u==null){if(w=!0,K<=0){let O=D?GD1(G):V;H(O)}else if(X&&L.length)W(L,q++,S);return P()}if(++K,du(()=>P()),X)L.push(u);if(X&&L.length!==X){du(()=>Z(I));return}let g=X?L:u;function S(O){if(X)K-=L.length,L=[];else--K;if(O!=null)if(D)G.push(O);else return V=O,H(O);if((w||U)&&K<=0){let p=D?GD1(G):V;return H(p)}du(()=>Z(I))}W(g,q++,S)})}}}function W(H,K,q){let V;try{V=$(H,K)}catch(E){return q(E)}if(V&&typeof V.then==="function")V.then(function(){q(null)},function(E){q(E||Error("`eachAsync()` promise rejected without error"))});else q(null)}};function NB0(){let F=[],A=null,$=0;return function(X){if(A===null&&F.length===0)return A=$++,X(B);F.push(X)};function B(){if(F.length!==0)A=$++,F.shift()(B);else A=null}}function GD1(F){if(F.length===0)return null;return new CB0(F)}});var VD1=Q((bj0,QD1)=>{/*!
 * Module dependencies.
 */var GG=d1(),WD1=x("stream").Readable,PB0=cu(),HD1=OD(),RB0=MF(),lu=x9(),{once:jB0}=x("events"),KD1=x("util");function c3(F){WD1.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=F,this._closed=!1;let A=F.model;this._mongooseOptions={},this._transforms=[],this.model=A,this.options={},A.hooks.execPre("find",F,($)=>{if($!=null){if($ instanceof RB0.skipWrappedFunction){let B=$.args[0];if(B!=null&&(!Array.isArray(B)||B.length)){let J=new GG('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+KD1.inspect(B)+'".');this._markError(J),this.listeners("error").length>0&&this.emit("error",J);return}this.skipped=!0,this.emit("cursor",null);return}this._markError($),this.listeners("error").length>0&&this.emit("error",$);return}if(Object.assign(this.options,F._optionsForExec()),this._transforms=this._transforms.concat(F._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(F._mongooseOptions._asyncIterator)this._mongooseOptions._asyncIterator=!0;if(A.collection._shouldBufferCommands()&&A.collection.buffer)A.collection.queue.push([()=>UD1(F,this)]);else UD1(F,this)})}KD1.inherits(c3,WD1);/*!
 * ignore
 */function UD1(F,A){try{let $=F.model.collection.find(F._conditions,A.options);A.cursor=$,A.emit("cursor",$)}catch($){A._markError($),A.listeners("error").length>0&&A.emit("error",A._error)}}c3.prototype._read=function(){pK(this,(F,A)=>{if(F)return this.emit("error",F);if(!A){this.push(null),this.cursor.close(function($){if($)return this.emit("error",$)});return}this.push(A)})};c3.prototype.getDriverCursor=async function(){if(this.cursor)return this.cursor;return await jB0(this,"cursor"),this.cursor};Object.defineProperty(c3.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});c3.prototype._markError=function(F){return this._error=F,this};c3.prototype.close=async function(){if(typeof arguments[0]==="function")throw new GG("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}};c3.prototype._destroy=function(A,$){let B=null;if(!this.cursor)B=new Promise((J)=>{this.once("cursor",J)});else B=Promise.resolve();return B.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,$()}).catch((J)=>{$(J)}),this};c3.prototype.rewind=function(){return qD1(this,()=>{this.cursor.rewind()}),this};c3.prototype.next=async function(){if(typeof arguments[0]==="function")throw new GG("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new GG("Cannot call `next()` on a closed cursor");return new Promise((A,$)=>{pK(this,function(B,J){if(B)return $(B);A(J)})})};c3.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new GG("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof A==="function")A={};return A=A||{},PB0(($)=>pK(this,$),F,A)};c3.prototype.options;c3.prototype.addCursorFlag=function(F,A){return qD1(this,()=>{this.cursor.addCursorFlag(F,A)}),this};if(Symbol.asyncIterator!=null)c3.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this};function pK(F,A){let $=A;if($=function(B,J){if(B)return A(B);if(J===null)if(F._mongooseOptions._asyncIterator)return A(null,{done:!0});else return A(null,null);if(F._transforms.length&&J!==null)J=F._transforms.reduce(function(X,Y){return Y.call(F,X)},J);if(F._mongooseOptions._asyncIterator)return A(null,{value:J,done:!1});return A(null,J)},F._error)return lu(function(){$(F._error)});if(F.skipped)return lu(()=>$(null,null));if(F.cursor){if(F.query._mongooseOptions.populate&&!F._pop)F._pop=HD1.preparePopulationOptionsMQ(F.query,F.query._mongooseOptions),F._pop.__noPromise=!0;if(F.query._mongooseOptions.populate&&F.options._populateBatchSize>1)if(F._batchDocs&&F._batchDocs.length)return cK(F,F._batchDocs.shift(),F._pop,$);else if(F._batchExhausted)return $(null,null);else{F._batchDocs=[],F.cursor.next().then((B)=>{lK.call({ctx:F,callback:$},null,B)},(B)=>{lK.call({ctx:F,callback:$},B)});return}else return F.cursor.next().then((B)=>{if(!B){$(null,null);return}if(!F.query._mongooseOptions.populate)return cK(F,B,null,$);cK(F,B,F._pop,(J,X)=>{if(J!=null)return $(J);F.query.model.populate(X,F._pop).then((Y)=>$(null,Y),(Y)=>$(Y))})},(B)=>{$(B)})}else F.once("error",A),F.once("cursor",function(B){if(F.removeListener("error",A),B==null){if(F.skipped)return A(null,null);return}pK(F,A)})}/*!
 * ignore
 */function lK(F,A){if(F)return this.callback(F);if(!A)return this.ctx._batchExhausted=!0,zD1.call(this);if(this.ctx._batchDocs.push(A),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize)lu(()=>this.ctx.cursor.next().then(($)=>{lK.call(this,null,$)},($)=>{lK.call(this,$)}));else zD1.call(this)}/*!
 * ignore
 */function zD1(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{cK(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(F)=>{this.callback(F)})}/*!
 * ignore
 */function cK(F,A,$,B){if(F.query._mongooseOptions.lean)return F.model.hooks.execPost("find",F.query,[[A]],(G)=>{if(G!=null)return B(G);B(null,A)});let{model:J,_fields:X,_userProvidedFields:Y,options:D}=F.query;HD1.createModelAndInit(J,A,X,Y,D,$,(G,Z)=>{if(G!=null)return B(G);F.model.hooks.execPost("find",F.query,[[Z]],(U)=>{if(U!=null)return B(U);B(null,Z)})})}/*!
 * ignore
 */function qD1(F,A){if(F.cursor)return A();F.once("cursor",function($){if($==null)return;A()})}QD1.exports=c3});var iu=Q((gj0,LD1)=>{var pu=P1();function MB0(F,A,$){ED1(F,A,$,"maxTimeMS")}function TB0(F,A,$){ED1(F,A,$,"allowDiskUse")}LD1.exports={applyGlobalMaxTimeMS:MB0,applyGlobalDiskUse:TB0};function ED1(F,A,$,B){if(pu.hasUserDefinedProperty(F,B))return;if(pu.hasUserDefinedProperty(A,B))F[B]=A[B];else if(pu.hasUserDefinedProperty($,B))F[B]=$[B]}});var au=Q((_j0,wD1)=>{wD1.exports=function(A,$){if($.readConcern!==void 0)return;if($&&$.session&&$.session.transaction)return;let B=A.options?.readConcern?.level;if(B!=null)$.readConcern={level:B}}});var nu=Q((yj0,ID1)=>{ID1.exports=function(A,$){if($.writeConcern!=null)return;if($&&$.session&&$.session.transaction)return;let B=A.options.writeConcern??{};if(Object.keys(B).length!=0){if($.writeConcern={},!("w"in $)&&B.w!=null)$.writeConcern.w=B.w;if(!("j"in $)&&B.j!=null)$.writeConcern.j=B.j;if(!("wtimeout"in $)&&B.wtimeout!=null)$.writeConcern.wtimeout=B.wtimeout}else{if(!("w"in $)&&B.w!=null)$.w=B.w;if(!("j"in $)&&B.j!=null)$.j=B.j;if(!("wtimeout"in $)&&B.wtimeout!=null)$.wtimeout=B.wtimeout}}});var PD1=Q((vj0,ND1)=>{var CD1=cD();ND1.exports=function(A,$,B){if(!Object.keys(B).some(CD1))return $.castForQuery(null,B,A);let X=Object.keys(B),Y=X.length;while(Y--){let D=X[Y],G=B[D];if(D==="$not"){if(G&&$&&!$.caster){let Z=Object.keys(G);if(Z.length&&CD1(Z[0]))for(let U of Object.keys(G))G[U]=$.castForQuery(U,G[U],A);else B[D]=$.castForQuery(D,G,A);continue}}else B[D]=$.castForQuery(D,G,A)}return B}});var jD1=Q((hj0,RD1)=>{var kB0=/^\d+$/;RD1.exports=function(A,$,B){let J=A.path($);if(J!=null)return J;let X=$.split("."),Y="",D=!1;for(let G of X){if(D&&kB0.test(G))continue;if(Y=Y.length===0?G:Y+"."+G,J=A.path(Y),J?.schema){if(A=J.schema,!D&&J.$isMongooseDocumentArray)D=!0;if(B&&B[Y])A=A.discriminators[B[Y]]??A;Y=""}else if(J?.instance==="Mixed")break}return J}});var SD1=Q((mj0,OD1)=>{var OB0=PD1(),MD1=yD(),TD1=jD1(),SB0=Cu();OD1.exports=function(A){let $=A.options.arrayFilters;if(!Array.isArray($))return;let B=A.getUpdate(),J=A.schema,X=SB0(B),Y=J.options.strict;if(A._mongooseOptions.strict!=null)Y=A._mongooseOptions.strict;if(A.model&&A.model.base.options.strictQuery!=null)Y=A.model.base.options.strictQuery;if(J._userProvidedOptions.strictQuery!=null)Y=J._userProvidedOptions.strictQuery;if(A._mongooseOptions.strictQuery!=null)Y=A._mongooseOptions.strictQuery;kD1($,J,Y,X,A)};function kD1(F,A,$,B,J){let X={};for(let Y of F){if(Y==null)throw Error(`Got null array filter in ${F}`);let D=Object.keys(Y).filter((K)=>Y[K]!=null);if(D.length===0)continue;let G=D[0];if(G==="$and"||G==="$or"){for(let K of D)kD1(Y[K],A,$,B,J);continue}let Z=G.indexOf("."),U=Z===-1?G:G.substring(0,Z);if(B[U]==null)continue;let z=MD1(B[U]),W=TD1(A,z,X),H=W!=null?W.schema:null;if(H!=null&&H.discriminators!=null&&Y[U+"."+H.options.discriminatorKey])H=H.discriminators[Y[U+"."+H.options.discriminatorKey]]||H,X[z]=Y[U+"."+H.options.discriminatorKey];for(let K of D){if(B[K]===null)continue;if(Object.keys(B).length===0)continue;let q=K.indexOf("."),V=q===-1?null:K.substring(q),E;if(V==null||H==null)E=W;else V=MD1(V),E=TD1(H,V,X);if(E==null){if(!$)return;let L=V==null?z+".0":z+".0"+V;throw Error(`Could not find path "${L}" in schema`)}if(typeof Y[K]==="object")Y[K]=OB0(J,E,Y[K]);else Y[K]=E.castForQuery(null,Y[K])}}}});var iK=Q((dj0,uD1)=>{var uB0=qB(),fB0=JB();/*!
 * ignore
 */uD1.exports=function F(A){if(A==null)return!1;let $=Object.keys(A),B=$.length;if(B===0)return!1;for(let J=0;J<B;++J){let X=$[J];if(X.startsWith("+"))continue;if(uB0(A[X])&&!!A[X])if(fB0(A[X]))return F(A[X]);else return!!A[X]}return!1}});var xD1=Q((cj0,fD1)=>{fD1.exports=function(A,$){return A===$||$.startsWith(A+".")}});var yD1=Q((_B0)=>{/*!
 * Module dependencies.
 */var ru=["__proto__","constructor","prototype"],aK=_B0.clone=function F(A,$){if(A===void 0||A===null)return A;if(Array.isArray(A))return _B0.cloneArray(A,$);if(A.constructor){if(/ObjectI[dD]$/.test(A.constructor.name))return typeof A.clone=="function"?A.clone():new A.constructor(A.id);if(A.constructor.name==="ReadPreference")return new A.constructor(A.mode,F(A.tags,$));if(A._bsontype=="Binary"&&A.buffer&&A.value)return typeof A.clone=="function"?A.clone():new A.constructor(A.value(!0),A.sub_type);if(A.constructor.name==="Date"||A.constructor.name==="Function")return new A.constructor(+A);if(A.constructor.name==="RegExp")return new RegExp(A);if(A.constructor.name==="Buffer")return Buffer.from(A)}if(bB0(A))return _B0.cloneObject(A,$);if(A.valueOf)return A.valueOf()};/*!
 * ignore
 */_B0.cloneObject=function(A,$){let B=$&&$.minimize,J={},X=Object.keys(A),Y=X.length,D=!1,G,Z="",U=0;for(U=0;U<Y;++U){if(Z=X[U],ru.indexOf(Z)!==-1)continue;if(G=aK(A[Z],$),!B||typeof G<"u")D||(D=!0),J[Z]=G}return B?D&&J:J};_B0.cloneArray=function(A,$){let B=[],J=A.length,X=0;for(;X<J;X++)B.push(aK(A[X],$));return B};_B0.merge=function F(A,$){let B=Object.keys($);for(let J of B){if(ru.indexOf(J)!==-1)continue;if(typeof A[J]>"u")A[J]=$[J];else if(_B0.isObject($[J]))F(A[J],$[J]);else A[J]=$[J]}};_B0.mergeClone=function F(A,$){let B=Object.keys($);for(let J of B){if(ru.indexOf(J)!==-1)continue;if(typeof A[J]>"u")A[J]=aK($[J]);else if(_B0.isObject($[J]))F(A[J],$[J]);else A[J]=aK($[J])}};_B0.readPref=function(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A};_B0.readConcern=function(A){if(typeof A==="string"){switch(A){case"l":A="local";break;case"a":A="available";break;case"m":A="majority";break;case"lz":A="linearizable";break;case"s":A="snapshot";break}A={level:A}}return A};var xB0=Object.prototype.toString;_B0.toString=function(F){return xB0.call(F)};var bB0=_B0.isObject=function(F){return _B0.toString(F)=="[object Object]"};_B0.keys=Object.keys;_B0.create=typeof Object.create=="function"?Object.create:gB0;function gB0(F){if(arguments.length>1)throw Error("Adding properties is not supported");function A(){}return A.prototype=F,new A}_B0.inherits=function(F,A){F.prototype=_B0.create(A.prototype),F.prototype.constructor=F};_B0.isArgumentsObject=function(F){return Object.prototype.toString.call(F)==="[object Arguments]"}});var tu=Q((ij0,vD1)=>{function aB0(F){$.debug=$,$.default=$,$.coerce=G,$.disable=Y,$.enable=J,$.enabled=D,$.humanize=ZO(),$.destroy=Z,Object.keys(F).forEach((U)=>{$[U]=F[U]}),$.names=[],$.skips=[],$.formatters={};function A(U){let z=0;for(let W=0;W<U.length;W++)z=(z<<5)-z+U.charCodeAt(W),z|=0;return $.colors[Math.abs(z)%$.colors.length]}$.selectColor=A;function $(U){let z,W=null,H,K;function q(...V){if(!q.enabled)return;let E=q,L=Number(new Date),w=L-(z||L);if(E.diff=w,E.prev=z,E.curr=L,z=L,V[0]=$.coerce(V[0]),typeof V[0]!=="string")V.unshift("%O");let I=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,(M,u)=>{if(M==="%%")return"%";I++;let g=$.formatters[u];if(typeof g==="function"){let S=V[I];M=g.call(E,S),V.splice(I,1),I--}return M}),$.formatArgs.call(E,V),(E.log||$.log).apply(E,V)}if(q.namespace=U,q.useColors=$.useColors(),q.color=$.selectColor(U),q.extend=B,q.destroy=$.destroy,Object.defineProperty(q,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(W!==null)return W;if(H!==$.namespaces)H=$.namespaces,K=$.enabled(U);return K},set:(V)=>{W=V}}),typeof $.init==="function")$.init(q);return q}function B(U,z){let W=$(this.namespace+(typeof z>"u"?":":z)+U);return W.log=this.log,W}function J(U){$.save(U),$.namespaces=U,$.names=[],$.skips=[];let z=(typeof U==="string"?U:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let W of z)if(W[0]==="-")$.skips.push(W.slice(1));else $.names.push(W)}function X(U,z){let W=0,H=0,K=-1,q=0;while(W<U.length)if(H<z.length&&(z[H]===U[W]||z[H]==="*"))if(z[H]==="*")K=H,q=W,H++;else W++,H++;else if(K!==-1)H=K+1,q++,W=q;else return!1;while(H<z.length&&z[H]==="*")H++;return H===z.length}function Y(){let U=[...$.names,...$.skips.map((z)=>"-"+z)].join(",");return $.enable(""),U}function D(U){for(let z of $.skips)if(X(U,z))return!1;for(let z of $.names)if(X(U,z))return!0;return!1}function G(U){if(U instanceof Error)return U.stack||U.message;return U}function Z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return $.enable($.load()),$}vD1.exports=aB0});var mD1=Q((hD1,nK)=>{hD1.formatArgs=rB0;hD1.save=tB0;hD1.load=sB0;hD1.useColors=nB0;hD1.storage=oB0();hD1.destroy=(()=>{let F=!1;return()=>{if(!F)F=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();hD1.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nB0(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let F;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(F=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(F[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function rB0(F){if(F[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+F[0]+(this.useColors?"%c ":" ")+"+"+nK.exports.humanize(this.diff),!this.useColors)return;let A="color: "+this.color;F.splice(1,0,A,"color: inherit");let $=0,B=0;F[0].replace(/%[a-zA-Z%]/g,(J)=>{if(J==="%%")return;if($++,J==="%c")B=$}),F.splice(B,0,A)}hD1.log=console.debug||console.log||(()=>{});function tB0(F){try{if(F)hD1.storage.setItem("debug",F);else hD1.storage.removeItem("debug")}catch(A){}}function sB0(){let F;try{F=hD1.storage.getItem("debug")||hD1.storage.getItem("DEBUG")}catch(A){}if(!F&&typeof process<"u"&&"env"in process)F=process.env.DEBUG;return F}function oB0(){try{return localStorage}catch(F){}}nK.exports=tu()(hD1);var{formatters:eB0}=nK.exports;eB0.j=function(F){try{return JSON.stringify(F)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}}});var cD1=Q((nj0,dD1)=>{dD1.exports=(F,A)=>{A=A||process.argv;let $=F.startsWith("-")?"":F.length===1?"-":"--",B=A.indexOf($+F),J=A.indexOf("--");return B!==-1&&(J===-1?!0:B<J)}});var pD1=Q((rj0,lD1)=>{var DJ0=x("os"),O2=cD1(),s4=process.env,gB;if(O2("no-color")||O2("no-colors")||O2("color=false"))gB=!1;else if(O2("color")||O2("colors")||O2("color=true")||O2("color=always"))gB=!0;if("FORCE_COLOR"in s4)gB=s4.FORCE_COLOR.length===0||parseInt(s4.FORCE_COLOR,10)!==0;function GJ0(F){if(F===0)return!1;return{level:F,hasBasic:!0,has256:F>=2,has16m:F>=3}}function ZJ0(F){if(gB===!1)return 0;if(O2("color=16m")||O2("color=full")||O2("color=truecolor"))return 3;if(O2("color=256"))return 2;if(F&&!F.isTTY&&gB!==!0)return 0;let A=gB?1:0;if(process.platform==="win32"){let $=DJ0.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number($[0])>=10&&Number($[2])>=10586)return Number($[2])>=14931?3:2;return 1}if("CI"in s4){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(($)=>($ in s4))||s4.CI_NAME==="codeship")return 1;return A}if("TEAMCITY_VERSION"in s4)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s4.TEAMCITY_VERSION)?1:0;if(s4.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s4){let $=parseInt((s4.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s4.TERM_PROGRAM){case"iTerm.app":return $>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(s4.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s4.TERM))return 1;if("COLORTERM"in s4)return 1;if(s4.TERM==="dumb")return A;return A}function su(F){let A=ZJ0(F);return GJ0(A)}lD1.exports={supportsColor:su,stdout:su(process.stdout),stderr:su(process.stderr)}});var rD1=Q((aD1,tK)=>{var UJ0=x("tty"),rK=x("util");aD1.init=VJ0;aD1.log=KJ0;aD1.formatArgs=WJ0;aD1.save=qJ0;aD1.load=QJ0;aD1.useColors=zJ0;aD1.destroy=rK.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");aD1.colors=[6,2,3,4,5,1];try{let F=pD1();if(F&&(F.stderr||F).level>=2)aD1.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(F){}aD1.inspectOpts=Object.keys(process.env).filter((F)=>{return/^debug_/i.test(F)}).reduce((F,A)=>{let $=A.substring(6).toLowerCase().replace(/_([a-z])/g,(J,X)=>{return X.toUpperCase()}),B=process.env[A];if(/^(yes|on|true|enabled)$/i.test(B))B=!0;else if(/^(no|off|false|disabled)$/i.test(B))B=!1;else if(B==="null")B=null;else B=Number(B);return F[$]=B,F},{});function zJ0(){return"colors"in aD1.inspectOpts?Boolean(aD1.inspectOpts.colors):UJ0.isatty(process.stderr.fd)}function WJ0(F){let{namespace:A,useColors:$}=this;if($){let B=this.color,J="\x1B[3"+(B<8?B:"8;5;"+B),X=`  ${J};1m${A} \x1B[0m`;F[0]=X+F[0].split(`
`).join(`
`+X),F.push(J+"m+"+tK.exports.humanize(this.diff)+"\x1B[0m")}else F[0]=HJ0()+A+" "+F[0]}function HJ0(){if(aD1.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function KJ0(...F){return process.stderr.write(rK.formatWithOptions(aD1.inspectOpts,...F)+`
`)}function qJ0(F){if(F)process.env.DEBUG=F;else delete process.env.DEBUG}function QJ0(){return process.env.DEBUG}function VJ0(F){F.inspectOpts={};let A=Object.keys(aD1.inspectOpts);for(let $=0;$<A.length;$++)F.inspectOpts[A[$]]=aD1.inspectOpts[A[$]]}tK.exports=tu()(aD1);var{formatters:iD1}=tK.exports;iD1.o=function(F){return this.inspectOpts.colors=this.useColors,rK.inspect(F,this.inspectOpts).split(`
`).map((A)=>A.trim()).join(" ")};iD1.O=function(F){return this.inspectOpts.colors=this.useColors,rK.inspect(F,this.inspectOpts)}});var tD1=Q((sj0,ou)=>{if(typeof process>"u"||process.type==="renderer"||!1||process.__nwjs)ou.exports=mD1();else ou.exports=rD1()});var oD1=Q((sD1)=>{var I6=sD1;I6.distinct=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";let A=Object.keys(I6.distinct),$;return A.every(function(B){if(F.options[B])return $=B,!1;return!0}),$};I6.distinct.select=I6.distinct.slice=I6.distinct.sort=I6.distinct.limit=I6.distinct.skip=I6.distinct.batchSize=I6.distinct.hint=I6.distinct.tailable=!0;I6.findOneAndUpdate=I6.findOneAndRemove=function(F){let A=Object.keys(I6.findOneAndUpdate),$;return A.every(function(B){if(F.options[B])return $=B,!1;return!0}),$};I6.findOneAndUpdate.limit=I6.findOneAndUpdate.skip=I6.findOneAndUpdate.batchSize=I6.findOneAndUpdate.tailable=!0;I6.count=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";let A=Object.keys(I6.count),$;return A.every(function(B){if(F.options[B])return $=B,!1;return!0}),$};I6.count.slice=I6.count.batchSize=I6.count.tailable=!0});var Ff=Q((RJ0,eD1)=>{RJ0.isNode=typeof process<"u"&&typeof eD1=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;RJ0.isMongo=!RJ0.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";RJ0.isBrowser=!RJ0.isNode&&!RJ0.isMongo&&typeof window<"u";RJ0.type=RJ0.isNode?"node":RJ0.isMongo?"mongo":RJ0.isBrowser?"browser":"unknown"});var UG=Q((AG1,$G1)=>{var Af=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function $f(){}for(let F=0,A=Af.length;F<A;++F){let $=Af[F];$f.prototype[$]=MJ0($)}$G1.exports=AG1=$f;$f.methods=Af;function MJ0(F){return function(){throw Error("collection."+F+" not implemented")}}});var YG1=Q((JG1,XG1)=>{var TJ0=UG();class BG1 extends TJ0{constructor(F){super();this.collection=F,this.collectionName=F.collectionName}async find(F,A){return this.collection.find(F,A).toArray()}async findOne(F,A){return this.collection.findOne(F,A)}async count(F,A){return this.collection.count(F,A)}async distinct(F,A,$){return this.collection.distinct(F,A,$)}async updateMany(F,A,$){return this.collection.updateMany(F,A,$)}async updateOne(F,A,$){return this.collection.updateOne(F,A,$)}async replaceOne(F,A,$){return this.collection.replaceOne(F,A,$)}async deleteOne(F,A){return this.collection.deleteOne(F,A)}async deleteMany(F,A){return this.collection.deleteMany(F,A)}async findOneAndDelete(F,A){return this.collection.findOneAndDelete(F,A)}async findOneAndUpdate(F,A,$){return this.collection.findOneAndUpdate(F,A,$)}findCursor(F,A){return this.collection.find(F,A)}}XG1.exports=JG1=BG1});var GG1=Q((ej0,DG1)=>{var Bf=Ff();if(Bf.type=="unknown")throw Error("Unknown environment");DG1.exports=Bf.isNode?YG1():Bf.isMongo?UG():UG()});var Df=Q((UG1,zG1)=>{var kJ0=x("assert"),OJ0=x("util"),W0=yD1(),i7=tD1()("mquery");function n(F,A){if(!(this instanceof n))return new n(F,A);let $=this.constructor.prototype;if(this.op=$.op||void 0,this.options=Object.assign({},$.options),this._conditions=$._conditions?W0.clone($._conditions):{},this._fields=$._fields?W0.clone($._fields):void 0,this._updateDoc=$._updateDoc?W0.clone($._updateDoc):void 0,this._path=$._path||void 0,this._distinctDoc=$._distinctDoc||void 0,this._collection=$._collection||void 0,this._traceFunction=$._traceFunction||void 0,A)this.setOptions(A);if(F)this.find(F)}var lF="$geoWithin";Object.defineProperty(n,"use$geoWithin",{get:function(){return lF=="$geoWithin"},set:function(F){if(F===!0)lF="$geoWithin";else lF="$within"}});n.prototype.toConstructor=function(){function A(B,J){if(!(this instanceof A))return new A(B,J);n.call(this,B,J)}W0.inherits(A,n);let $=A.prototype;return $.options={},$.setOptions(this.options),$.op=this.op,$._conditions=W0.clone(this._conditions),$._fields=W0.clone(this._fields),$._updateDoc=W0.clone(this._updateDoc),$._path=this._path,$._distinctDoc=this._distinctDoc,$._collection=this._collection,$._traceFunction=this._traceFunction,A};n.prototype.setOptions=function(F){if(!(F&&W0.isObject(F)))return this;let A=W0.keys(F),$;for(let B=0;B<A.length;++B)if($=A[B],typeof this[$]=="function"){let J=Array.isArray(F[$])?F[$]:[F[$]];this[$].apply(this,J)}else this.options[$]=F[$];return this};n.prototype.collection=function(A){return this._collection=new n.Collection(A),this};n.prototype.collation=function(F){return this.options.collation=F,this};n.prototype.$where=function(F){return this._conditions.$where=F,this};n.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";let F=typeof arguments[0];if(F=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(F=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw TypeError("path must be a string or object")};n.prototype.equals=function(A){this._ensurePath("equals");let $=this._path;return this._conditions[$]=A,this};n.prototype.eq=function(A){this._ensurePath("eq");let $=this._path;return this._conditions[$]=A,this};n.prototype.or=function(A){let $=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(A))A=[A];return $.push.apply($,A),this};n.prototype.nor=function(A){let $=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(A))A=[A];return $.push.apply($,A),this};n.prototype.and=function(A){let $=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(A))A=[A];return $.push.apply($,A),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(F){n.prototype[F]=function(){let A,$;if(arguments.length===1)this._ensurePath(F),$=arguments[0],A=this._path;else $=arguments[1],A=arguments[0];let B=this._conditions[A]===null||typeof this._conditions[A]==="object"?this._conditions[A]:this._conditions[A]={};return B["$"+F]=$,this}});n.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];let $=this._conditions[A]||(this._conditions[A]={});return $.$mod=F,this};n.prototype.exists=function(){let F,A;if(arguments.length===0)this._ensurePath("exists"),F=this._path,A=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),F=this._path,A=arguments[0];else F=arguments[0],A=!0;else if(arguments.length===2)F=arguments[0],A=arguments[1];let $=this._conditions[F]||(this._conditions[F]={});return $.$exists=A,this};n.prototype.elemMatch=function(){if(arguments[0]==null)throw TypeError("Invalid argument");let F,A,$;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),A=this._path,F=arguments[0];else if(W0.isObject(arguments[0]))this._ensurePath("elemMatch"),A=this._path,$=arguments[0];else if(typeof arguments[1]==="function")A=arguments[0],F=arguments[1];else if(arguments[1]&&W0.isObject(arguments[1]))A=arguments[0],$=arguments[1];else throw TypeError("Invalid argument");if(F)$=new n,F($),$=$._conditions;let B=this._conditions[A]||(this._conditions[A]={});return B.$elemMatch=$,this};n.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=lF,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);let A=arguments[0];if(!A)throw TypeError("Invalid argument");if(A.center)return this.circle(A);if(A.box)return this.box.apply(this,A.box);if(A.polygon)return this.polygon.apply(this,A.polygon);if(A.type&&A.coordinates)return this.geometry(A);throw TypeError("Invalid argument")};n.prototype.box=function(){let F,A;if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),F=this._path,A=[arguments[0],arguments[1]];else throw TypeError("Invalid argument");let $=this._conditions[F]||(this._conditions[F]={});return $[this._geoComparison||lF]={$box:A},this};n.prototype.polygon=function(){let F,A;if(typeof arguments[0]=="string")F=Array.from(arguments),A=F.shift();else this._ensurePath("polygon"),A=this._path,F=Array.from(arguments);let $=this._conditions[A]||(this._conditions[A]={});return $[this._geoComparison||lF]={$polygon:F},this};n.prototype.circle=function(){let F,A;if(arguments.length===1)this._ensurePath("circle"),F=this._path,A=arguments[0];else if(arguments.length===2)F=arguments[0],A=arguments[1];else throw TypeError("Invalid argument");if(!(("radius"in A)&&A.center))throw Error("center and radius are required");let $=this._conditions[F]||(this._conditions[F]={}),B=A.spherical?"$centerSphere":"$center",J=this._geoComparison||lF;if($[J]={},$[J][B]=[A.center,A.radius],"unique"in A)$[J].$uniqueDocs=!!A.unique;return this};n.prototype.near=function(){let A,$;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),A=this._path,$=arguments[0];else if(arguments.length===2)A=arguments[0],$=arguments[1];else throw TypeError("Invalid argument");if(!$.center)throw Error("center is required");let B=this._conditions[A]||(this._conditions[A]={}),J=$.spherical?"$nearSphere":"$near";if(Array.isArray($.center)){B[J]=$.center;let X="maxDistance"in $?$.maxDistance:null;if(X!=null)B.$maxDistance=X;if($.minDistance!=null)B.$minDistance=$.minDistance}else{if($.center.type!="Point"||!Array.isArray($.center.coordinates))throw Error(OJ0.format("Invalid GeoJSON specified for %s",J));if(B[J]={$geometry:$.center},"maxDistance"in $)B[J].$maxDistance=$.maxDistance;if("minDistance"in $)B[J].$minDistance=$.minDistance}return this};n.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let A=arguments[0];if(A!=null&&A.type&&A.coordinates)return this.geometry(A);throw TypeError("Invalid argument")};n.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw Error("geometry() must come after `within()`, `intersects()`, or `near()");let A,$;if(arguments.length===1)this._ensurePath("geometry"),$=this._path,A=arguments[0];else throw TypeError("Invalid argument");if(!(A.type&&Array.isArray(A.coordinates)))throw TypeError("Invalid argument");let B=this._conditions[$]||(this._conditions[$]={});return B[this._geoComparison]={$geometry:A},this};n.prototype.select=function(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw Error("Invalid select: select only takes 1 argument");this._validate("select");let $=this._fields||(this._fields={}),B=typeof A,J,X;if((B=="string"||W0.isArgumentsObject(A))&&typeof A.length=="number"||Array.isArray(A)){if(B=="string")A=A.split(/\s+/);for(J=0,X=A.length;J<X;++J){let Y=A[J];if(!Y)continue;let D=Y[0]=="-"?0:1;if(D===0)Y=Y.substring(1);$[Y]=D}return this}if(W0.isObject(A)){let Y=W0.keys(A);for(J=0;J<Y.length;++J)$[Y[J]]=A[Y[J]];return this}throw TypeError("Invalid select() argument. Must be string or object.")};n.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let F,A;if(arguments.length===1){let B=arguments[0];if(typeof B==="object"&&!Array.isArray(B)){let J=Object.keys(B),X=J.length;for(let Y=0;Y<X;++Y)this.slice(J[Y],B[J[Y]]);return this}this._ensurePath("slice"),F=this._path,A=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),F=this._path,A=[arguments[0],arguments[1]];else F=arguments[0],A=arguments[1];else if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];let $=this._fields||(this._fields={});return $[F]={$slice:A},this};n.prototype.sort=function(F){if(!F)return this;let A,$,B;this._validate("sort");let J=typeof F;if(Array.isArray(F)){$=F.length;for(A=0;A<F.length;++A){if(!Array.isArray(F[A]))throw Error("Invalid sort() argument, must be array of arrays");SJ0(this.options,F[A][0],F[A][1])}return this}if(arguments.length===1&&J=="string"){F=F.split(/\s+/),$=F.length;for(A=0;A<$;++A){if(B=F[A],!B)continue;let X=B[0]=="-"?-1:1;if(X===-1)B=B.substring(1);ZG1(this.options,B,X)}return this}if(W0.isObject(F)){let X=W0.keys(F);for(A=0;A<X.length;++A)B=X[A],ZG1(this.options,B,F[B]);return this}if(typeof Map<"u"&&F instanceof Map)return uJ0(this.options,F),this;throw TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var Jf={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function ZG1(F,A,$){if(Array.isArray(F.sort))throw TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let B;if($&&$.$meta){B=F.sort||(F.sort={}),B[A]={$meta:$.$meta};return}B=F.sort||(F.sort={});let J=String($||1).toLowerCase();if(J=Jf[J],!J)throw TypeError("Invalid sort value: { "+A+": "+$+" }");B[A]=J}function SJ0(F,A,$){if(F.sort=F.sort||[],!Array.isArray(F.sort))throw TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let B=String($||1).toLowerCase();if(B=Jf[B],!B)throw TypeError("Invalid sort value: [ "+A+", "+$+" ]");F.sort.push([A,B])}function uJ0(F,A){if(F.sort=F.sort||new Map,!(F.sort instanceof Map))throw TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");A.forEach(function($,B){let J=String($||1).toLowerCase();if(J=Jf[J],!J)throw TypeError("Invalid sort value: < "+B+": "+$+" >");F.sort.set(B,J)})}/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(F){n.prototype[F]=function(A){return this._validate(F),this.options[F]=A,this}});n.prototype.maxTime=n.prototype.maxTimeMS=function(F){return this._validate("maxTime"),this.options.maxTimeMS=F,this};n.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let F=arguments[0];if(W0.isObject(F)){let A=this.options.hint||(this.options.hint={});for(let $ in F)A[$]=F[$];return this}if(typeof F==="string")return this.options.hint=F,this;throw TypeError("Invalid hint. "+F)};n.prototype.j=function(A){return this.options.j=A,this};n.prototype.slaveOk=function(F){return this.options.slaveOk=arguments.length?!!F:!0,this};n.prototype.read=n.prototype.setReadPreference=function(F){if(arguments.length>1&&!n.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),n.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=W0.readPref(F),this};n.prototype.readConcern=n.prototype.r=function(F){return this.options.readConcern=W0.readConcern(F),this};n.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};n.prototype.writeConcern=n.prototype.w=function(A){if(typeof A==="object"){if(typeof A.j<"u")this.options.j=A.j;if(typeof A.w<"u")this.options.w=A.w;if(typeof A.wtimeout<"u")this.options.wtimeout=A.wtimeout}else this.options.w=A==="m"?"majority":A;return this};n.prototype.wtimeout=n.prototype.wTimeout=function(A){return this.options.wtimeout=A,this};n.prototype.merge=function(F){if(!F)return this;if(!n.canMerge(F))throw TypeError("Invalid argument. Expected instanceof mquery or plain object");if(F instanceof n){if(F._conditions)W0.merge(this._conditions,F._conditions);if(F._fields)this._fields||(this._fields={}),W0.merge(this._fields,F._fields);if(F.options)this.options||(this.options={}),W0.merge(this.options,F.options);if(F._updateDoc)this._updateDoc||(this._updateDoc={}),W0.mergeClone(this._updateDoc,F._updateDoc);if(F._distinctDoc)this._distinctDoc=F._distinctDoc;return this}return W0.merge(this._conditions,F),this};n.prototype.find=function(F){if(this.op="find",n.canMerge(F))this.merge(F);return this};n.prototype._find=async function(){let A=this._conditions,$=this._optionsForExec();if(this.$useProjection)$.projection=this._fieldsForExec();else $.fields=this._fieldsForExec();return i7("_find",this._collection.collectionName,A,$),this._collection.find(A,$)};n.prototype.cursor=function(A){if(this.op){if(this.op!=="find")throw TypeError(".cursor only support .find method")}else this.find(A);let $=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return i7("findCursor",this._collection.collectionName,$,B),this._collection.findCursor($,B)};n.prototype.findOne=function(F){if(this.op="findOne",n.canMerge(F))this.merge(F);return this};n.prototype._findOne=async function(){let A=this._conditions,$=this._optionsForExec();if(this.$useProjection)$.projection=this._fieldsForExec();else $.fields=this._fieldsForExec();return i7("findOne",this._collection.collectionName,A,$),this._collection.findOne(A,$)};n.prototype.count=function(F){if(this.op="count",this._validate(),n.canMerge(F))this.merge(F);return this};n.prototype._count=async function(){let A=this._conditions,$=this._optionsForExec();return i7("count",this._collection.collectionName,A,$),this._collection.count(A,$)};n.prototype.distinct=function(F,A){if(this.op="distinct",this._validate(),!A&&typeof F==="string")A=F,F=void 0;if(typeof A=="string")this._distinctDoc=A;if(n.canMerge(F))this.merge(F);return this};n.prototype._distinct=async function(){if(!this._distinctDoc)throw Error("No value for `distinct` has been declared");let A=this._conditions,$=this._optionsForExec();return i7("distinct",this._collection.collectionName,A,$),this._collection.distinct(this._distinctDoc,A,$)};n.prototype.updateMany=function(A,$,B){if(arguments.length===1)$=A,A=B=void 0;return Xf(this,"updateMany",A,$,B)};n.prototype._updateMany=async function(){return Yf(this,"updateMany")};n.prototype.updateOne=function(A,$,B){if(arguments.length===1)$=A,A=B=void 0;return Xf(this,"updateOne",A,$,B)};n.prototype._updateOne=async function(){return Yf(this,"updateOne")};n.prototype.replaceOne=function(A,$,B){if(arguments.length===1)$=A,A=B=void 0;return this.setOptions({overwrite:!0}),Xf(this,"replaceOne",A,$,B)};n.prototype._replaceOne=async function(){return Yf(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */function Xf(F,A,$,B,J){if(F.op=A,n.canMerge($))F.merge($);if(B)F._mergeUpdate(B);if(W0.isObject(J))F.setOptions(J);return F}async function Yf(F,A){let $=F._optionsForExec(),B=F._conditions,J=F._updateForExec();return i7("update",F._collection.collectionName,B,J,$),F._collection[A](B,J,$)}n.prototype.deleteOne=function(F){if(this.op="deleteOne",n.canMerge(F))this.merge(F);return this};n.prototype._deleteOne=async function(){let F=this._optionsForExec();delete F.justOne;let A=this._conditions;return i7("deleteOne",this._collection.collectionName,A,F),this._collection.deleteOne(A,F)};n.prototype.deleteMany=function(F){if(this.op="deleteMany",n.canMerge(F))this.merge(F);return this};n.prototype._deleteMany=async function(){let F=this._optionsForExec();delete F.justOne;let A=this._conditions;return i7("deleteOne",this._collection.collectionName,A,F),this._collection.deleteMany(A,F)};n.prototype.findOneAndUpdate=function(F,A,$){if(this.op="findOneAndUpdate",this._validate(),arguments.length===1)A=F,F=$=void 0;if(n.canMerge(F))this.merge(F);if(A)this._mergeUpdate(A);return $&&this.setOptions($),this};n.prototype._findOneAndUpdate=async function(){let F=this._conditions,A=this._updateForExec(),$=this._optionsForExec();return this._collection.findOneAndUpdate(F,A,$)};n.prototype.findOneAndRemove=n.prototype.findOneAndDelete=function(F,A){if(this.op="findOneAndRemove",this._validate(),n.canMerge(F))this.merge(F);return A&&this.setOptions(A),this};n.prototype._findOneAndRemove=async function(){let F=this._optionsForExec(),A=this._conditions;return this._collection.findOneAndDelete(A,F)};n.prototype.setTraceFunction=function(F){return this._traceFunction=F,this};n.prototype.exec=async function(A){if(typeof A==="string")this.op=A;kJ0.ok(this.op,"Missing query type: (find, etc)");let $="_"+this.op;if(typeof this[$]!=="function")throw TypeError(`this[${$}] is not a function`);return this[$]()};n.prototype.then=async function(F,A){return this.exec().then(F,A)};n.prototype.cursor=function(){if(this.op!="find")throw Error("cursor() is only available for find");let F=this._conditions,A=this._optionsForExec();if(this.$useProjection)A.projection=this._fieldsForExec();else A.fields=this._fieldsForExec();return i7("cursor",this._collection.collectionName,F,A),this._collection.findCursor(F,A)};n.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};n.prototype.selectedInclusively=function(){if(!this._fields)return!1;let A=Object.keys(this._fields);if(A.length===0)return!1;for(let $=0;$<A.length;++$){let B=A[$];if(this._fields[B]===0)return!1;if(this._fields[B]&&typeof this._fields[B]==="object"&&this._fields[B].$meta)return!1}return!0};n.prototype.selectedExclusively=function(){if(!this._fields)return!1;let A=Object.keys(this._fields);if(A.length===0)return!1;for(let $=0;$<A.length;++$){let B=A[$];if(this._fields[B]===0)return!0}return!1};n.prototype._mergeUpdate=function(F){if(!this._updateDoc)this._updateDoc={};if(F instanceof n){if(F._updateDoc)W0.mergeClone(this._updateDoc,F._updateDoc)}else W0.mergeClone(this._updateDoc,F)};n.prototype._optionsForExec=function(){return W0.clone(this.options)};n.prototype._fieldsForExec=function(){return W0.clone(this._fields)};n.prototype._updateForExec=function(){let F=W0.clone(this._updateDoc),A=W0.keys(F),$={};for(let B of A){if(this.options.overwrite){$[B]=F[B];continue}if(B[0]!=="$"){if(!$.$set)if(F.$set)$.$set=F.$set;else $.$set={};if($.$set[B]=F[B],!~A.indexOf("$set"))A.push("$set")}else if(B==="$set"){if(!$.$set)$[B]=F[B]}else $[B]=F[B]}return this._compiledUpdate=$,$};n.prototype._ensurePath=function(F){if(!this._path){let A=F+"() must be used after where() when called with these arguments";throw Error(A)}};/*!
 * Permissions
 */n.permissions=oD1();n._isPermitted=function(F,A){let $=n.permissions[A];if(!$)return!0;return $[F]!==!0};n.prototype._validate=function(F){let A,$;if(F===void 0){if($=n.permissions[this.op],typeof $!="function")return!0;A=$(this)}else if(!n._isPermitted(F,this.op))A=F;if(A)throw Error(A+" cannot be used with "+this.op)};n.canMerge=function(F){return F instanceof n||W0.isObject(F)};n.setGlobalTraceFunction=function(F){n.traceFunction=F};/*!
 * Exports.
 */n.utils=W0;n.env=Ff();n.Collection=GG1();n.BaseCollection=UG();zG1.exports=UG1=n});var Gf=Q((FM0,WG1)=>{WG1.exports=function(A,$){if(typeof A==="string")A=A.split(/\s+/);if(!Array.isArray(A)&&Object.prototype.toString.call(A)!=="[object Arguments]")return A;let J=A.length,X={};for(let Y=0;Y<J;++Y){let D=A[Y];if(!D)continue;let G=D[0]=="-"?0:1;if(!$&&G===0)D=D.substring(1);X[D]=G}return X}});var qG1=Q((AM0,KG1)=>{KG1.exports=function(A,$){let B=Object.keys(A).map((J)=>Object.keys(A[J])).reduce((J,X)=>J.concat(X),[]);return $.filter((J)=>{return HG1(J,B)})};function HG1(F,A){let $=Object.keys(F)[0];if($==="$and"||$==="$or"){if(!Array.isArray(F[$]))return!1;return F[$].find((X)=>HG1(X,A))!=null}let B=$.indexOf("."),J=B===-1?$:$.slice(0,B);return A.find((X)=>X.includes("$["+J+"]"))!=null}});var oK=Q(($M0,QG1)=>{/*!
 * ignore
 */QG1.exports=function(A){if(typeof A!=="object"||A===null)return!1;let $=Object.keys(A),B=$.length;for(let J=0;J<B;++J)if($[J][0]==="$")return!0;return!1}});var Zf=Q((BM0,VG1)=>{var fJ0=oK(),{trustedSymbol:xJ0}=XB();VG1.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let B of A)F(B);return A}let $=Object.keys(A);for(let B of $){let J=A[B];if(J!=null&&J[xJ0])continue;if(B==="$and"||B==="$or"){F(J);continue}if(fJ0(J)){let X=Object.keys(J);if(X.length===1&&X[0]==="$eq")continue;A[B]={$eq:A[B]}}}return A}});var LG1=Q((JM0,EG1)=>{EG1.exports=function(A){if(A==null)return;let $=Object.keys(A);for(let B=0;B<$.length;++B)if(typeof A[$[B]]==="string")A[$[B]]=1}});var CG1=Q((XM0,IG1)=>{var bJ0=QB(),gJ0=iK();/*!
 * ignore
 */IG1.exports=function(A,$,B){if(B==null)return;let J=Object.keys(B);if($=$||{},gJ0(A))for(let X of J){if(!wG1($,X))A[X]=1;else if($[X]===0)delete A[X];let Y=B[X]?.refPath;if(typeof Y==="string"){if(!wG1($,Y))A[Y]=1;else if($[Y]===0)delete A[Y]}}else if(bJ0(A))for(let X of J){if($[X]==null)delete A[X];let Y=B[X]?.refPath;if(typeof Y==="string"&&$[Y]==null)delete A[Y]}};/*!
 * ignore
 */function wG1(F,A){let $=A.split("."),B=$.length,J=$[0];for(let X=1;X<B;++X){if(F[J]!=null||F[J+".$"]!=null)return!0;J+="."+$[X]}return F[J]!=null||F[J+".$"]!=null}});var jG1=Q((YM0,RG1)=>{/*!
 * Module dependencies.
 */var NG1=kF(),_J0=yD(),PG1=OH().flatten;RG1.exports=function(F,A,$,B,J){let X=Object.keys($||{}),Y={},D={},G={},Z={},U=X.length,z=!1,W,H,K;for(K=0;K<U;++K)if(X[K].startsWith("$")){if(z=!0,X[K]==="$push"||X[K]==="$addToSet"){let m=Object.keys($[X[K]]);for(let r=0;r<m.length;++r)if(W=$[X[K]][m[r]],W&&W.$each)Z[m[r]]=(Z[m[r]]||[]).concat(W.$each);else Z[m[r]]=(Z[m[r]]||[]).concat([W]);continue}let S=PG1($[X[K]],null,null,A),O=Object.keys(S),p=O.length;for(let m=0;m<p;++m){let r=_J0(O[m]);if(H=X[K],r.includes("$"))continue;if(H==="$set"||H==="$setOnInsert"||H==="$pull"||H==="$pullAll")D[r]=S[O[m]],G[r]=H==="$pull"||H==="$pullAll";else if(H==="$unset")D[r]=void 0;Y[r]=!0}}if(!z)D=PG1($,null,null,A),Y=Object.keys(D);let q=Object.keys(D),V=q.length,E=[],L=[],w=[],I=F;function P(S,O){let p=A._getSchema(q[S]);if(p==null)return;if(p.instance==="Mixed"&&p.path!==q[S])return;if(O&&Array.isArray(O.$in))O.$in.forEach((m,r)=>{E.push(function(w1){p.doValidate(m,function(u0){if(u0)u0.path=q[r]+".$in."+r,L.push(u0);w1(null)},I,{updateValidator:!0})})});else{if(G[q[S]]&&p.$isMongooseArray)return;if(p.$isMongooseDocumentArrayElement&&O!=null&&O.$__!=null)w.push(q[S]),E.push(function(m){p.doValidate(O,function(r){if(r)if(r.errors)for(let w1 of Object.keys(r.errors)){let u0=r.errors[w1];u0.path=q[S]+"."+w1,L.push(u0)}else r.path=q[S],L.push(r);return m(null)},I,{updateValidator:!0})});else E.push(function(m){for(let r of w)if(q[S].startsWith(r+"."))return m(null);if(p.$isSingleNested)w.push(q[S]);p.doValidate(O,function(r){if(p.schema!=null&&p.schema.options.storeSubdocValidationError===!1&&r instanceof NG1)return m(null);if(r)r.path=q[S],L.push(r);m(null)},I,{updateValidator:!0})})}}for(K=0;K<V;++K)P(K,D[q[K]]);let M=Object.keys(Z);for(let S of M){let O=A._getSchema(S);if(O&&O.$isMongooseDocumentArray)E.push(function(p){O.doValidate(Z[S],g(S,L,p),B&&B.context==="query"?F:null)});else{O=A._getSchema(S+".0");for(let p of Z[S])E.push(function(m){O.doValidate(p,g(S,L,m),B&&B.context==="query"?F:null,{updateValidator:!0})})}}if(J!=null){let S=E.length;if(S===0)return u(J);for(let O of E)O(function(){if(--S<=0)u(J)});return}return function(S){let O=E.length;if(O===0)return u(S);for(let p of E)p(function(){if(--O<=0)u(S)})};function u(S){if(L.length){let O=new NG1(null);for(let p of L)O.addError(p.path,p);return S(O)}S(null)}function g(S,O,p){return function(m){if(m)m.path=S,O.push(m);p(null)}}}});var Aq=Q((DM0,hG1)=>{/*!
 * Module dependencies.
 */var WG=a4(),yJ0=VH(),zf=MF(),o4=d1(),K5=RH(),MG1=VD1(),TG1=kF(),{applyGlobalMaxTimeMS:HG,applyGlobalDiskUse:KG}=iu(),vJ0=JS(),hJ0=au(),mJ0=nu(),dJ0=_F(),cJ0=SD1(),Fq=mD(),lJ0=Ou(),l3=Z6(),pJ0=c9(),qG=OD(),iJ0=R2().internalToObjectOptions,aJ0=QB(),nJ0=iK(),rJ0=fH(),kG1=xD1(),SG1=V9(),L9=Df(),tJ0=Gf(),sJ0=qG1(),oJ0=Zf(),eJ0=LG1(),FX0=CG1(),uG1=uu(),eK=jF(),AX0=jG1(),zG=x("util"),a0=P1(),$X0=AK().queryMiddlewareFunctions,BX0=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),JX0=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function a(F,A,$,B){if(!this._mongooseOptions)this._mongooseOptions={};A=A||{},this._transforms=[],this._hooks=new zf,this._executionStack=null;let J=Object.keys(A);for(let Y of J)this._mongooseOptions[Y]=A[Y];if(B)this.mongooseCollection=B;if($)this.model=$,this.schema=$.schema;if(this.model&&this.model._mapreduce)this.lean();if(L9.call(this,null,A),B)this.collection(B);if(F)this.find(F);this.options=this.options||{},this.$useProjection=!0;let X=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;if(X!=null)this.options.collation=X}function fG1(F){if(F==null)return!0;if(typeof F!=="object")return!0;if(Object.keys(F).length===0)return!0;for(let A of["$and","$or","$nor"])if(Array.isArray(F[A])){if(F[A].length===0||F[A].every(($)=>fG1($)))return!0}return!1}function yB(F,A){if(A&&A.requireFilter&&fG1(F))throw Error("Empty or invalid filter not allowed with requireFilter enabled")}/*!
 * inherit mquery
 */a.prototype=new L9;a.prototype.constructor=a;a.prototype.count=void 0;a.prototype.findOneAndRemove=void 0;a.base=L9.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(a.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});a.use$geoWithin=L9.use$geoWithin;a.prototype.toConstructor=function(){let A=this.model,$=this.mongooseCollection,B=function(Y,D){if(!(this instanceof B))return new B(Y,D);this._mongooseOptions=l3(J._mongooseOptions),a.call(this,Y,D||null,A,$)};zG.inherits(B,A.Query);let J=B.prototype;J.options={};let X=Object.assign({},this.options);if(X.sort!=null)J.sort(X.sort),delete X.sort;return J.setOptions(X),J.op=this.op,J._validateOp(),J._conditions=l3(this._conditions),J._fields=l3(this._fields),J._update=l3(this._update,{flattenDecimals:!1}),J._path=this._path,J._distinct=this._distinct,J._collection=this._collection,J._mongooseOptions=this._mongooseOptions,B};a.prototype.clone=function(){let F=this.model,A=this.mongooseCollection,$=new this.model.Query({},{},F,A),B=Object.assign({},this.options);if(B.sort!=null)$.sort(B.sort),delete B.sort;return $.setOptions(B),$.op=this.op,$._validateOp(),$._conditions=l3(this._conditions),$._fields=l3(this._fields),$._update=l3(this._update,{flattenDecimals:!1}),$._path=this._path,$._distinct=this._distinct,$._collection=this._collection,$._mongooseOptions=this._mongooseOptions,$};a.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let F,A;if(arguments.length===1){let B=arguments[0];if(typeof B==="object"&&!Array.isArray(B)){let J=Object.keys(B),X=J.length;for(let Y=0;Y<X;++Y)this.slice(J[Y],B[J[Y]]);return this}this._ensurePath("slice"),F=this._path,A=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),F=this._path,A=[arguments[0],arguments[1]];else F=arguments[0],A=arguments[1];else if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];let $={};return $[F]={$slice:A},this.select($),this};/*!
 * ignore
 */var XX0=new Set($X0);a.prototype._validateOp=function(){if(this.op!=null&&!XX0.has(this.op))this.error(Error('Query has invalid `op`: "'+this.op+'"'))};a.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];let $=this._conditions[A]||(this._conditions[A]={});return $.$mod=F,this};a.prototype.limit=function(A){if(this._validate("limit"),typeof A==="string")try{A=Fq(A)}catch($){throw new WG("Number",A,"limit")}return this.options.limit=A,this};a.prototype.skip=function(A){if(this._validate("skip"),typeof A==="string")try{A=Fq(A)}catch($){throw new WG("Number",A,"skip")}return this.options.skip=A,this};a.prototype.projection=function(F){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(F),this._fields};a.prototype.select=function(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw Error("Invalid select: select only takes 1 argument");this._validate("select");let $=this._fields||(this._fields={}),B=this._userProvidedFields||(this._userProvidedFields={}),J=void 0;if(this.model!=null&&a0.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))J=this.model.db.options.sanitizeProjection;else if(this.model!=null&&a0.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))J=this.model.base.options.sanitizeProjection;else J=this._mongooseOptions.sanitizeProjection;function X(Y){return typeof Y==="string"&&J?Y=1:Y}if(A=tJ0(A,!0),a0.isObject(A)){if(this.selectedInclusively())Object.entries(A).forEach(([Y,D])=>{if(D){if($["-"+Y]!=null)delete $["-"+Y];$[Y]=B[Y]=X(D)}else Object.keys(B).forEach((G)=>{if(kG1(Y,G))delete $[G],delete B[G]})});else if(this.selectedExclusively())Object.entries(A).forEach(([Y,D])=>{if(!D){if($["+"+Y]!=null)delete $["+"+Y];$[Y]=B[Y]=X(D)}else Object.keys(B).forEach((G)=>{if(kG1(Y,G))delete $[G],delete B[G]})});else{let Y=Object.keys(A);for(let D=0;D<Y.length;++D){let G=A[Y[D]],Z=Y[D];$[Z]=X(G),B[Z]=X(G)}}return this}throw TypeError("Invalid select() argument. Must be string or object.")};a.prototype.schemaLevelProjections=function(A){return this._mongooseOptions.schemaLevelProjections=A,this};a.prototype.sanitizeProjection=function(A){return this._mongooseOptions.sanitizeProjection=A,this};a.prototype.read=function(A,$){if(typeof A==="string")A=vJ0(A),this.options.readPreference={mode:A,tags:$};else this.options.readPreference=A;return this};a.prototype.toString=function(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${zG.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${zG.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${zG.inspect(this._conditions)}, ${zG.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};a.prototype.session=function(A){if(A==null)delete this.options.session;return this.options.session=A,this};a.prototype.writeConcern=function(A){if(A==null)return delete this.options.writeConcern,this;return this.options.writeConcern=A,this};a.prototype.w=function(A){if(A==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=A;else this.options.w=A;return this};a.prototype.j=function(A){if(A==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=A;else this.options.j=A;return this};a.prototype.wtimeout=function(A){if(A==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=A;else this.options.wtimeout=A;return this};a.prototype.getOptions=function(){return this.options};a.prototype.setOptions=function(F,A){if(A){if(this._mongooseOptions=F&&l3(F)||{},this.options=F||{},"populate"in F)this.populate(this._mongooseOptions);return this}if(F==null)return this;if(typeof F!=="object")throw Error('Options must be an object, got "'+F+'"');if(F=Object.assign({},F),Array.isArray(F.populate)){let $=F.populate;delete F.populate;let B=$.length;for(let J=0;J<B;++J)this.populate($[J])}if("setDefaultsOnInsert"in F)this._mongooseOptions.setDefaultsOnInsert=F.setDefaultsOnInsert,delete F.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in F)this._mongooseOptions.overwriteDiscriminatorKey=F.overwriteDiscriminatorKey,delete F.overwriteDiscriminatorKey;if("overwriteImmutable"in F)this._mongooseOptions.overwriteImmutable=F.overwriteImmutable,delete F.overwriteImmutable;if("sanitizeProjection"in F){if(F.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)eJ0(this._fields);this._mongooseOptions.sanitizeProjection=F.sanitizeProjection,delete F.sanitizeProjection}if("sanitizeFilter"in F)this._mongooseOptions.sanitizeFilter=F.sanitizeFilter,delete F.sanitizeFilter;if("timestamps"in F)this._mongooseOptions.timestamps=F.timestamps,delete F.timestamps;if("defaults"in F)this._mongooseOptions.defaults=F.defaults;if("translateAliases"in F)this._mongooseOptions.translateAliases=F.translateAliases,delete F.translateAliases;if("schemaLevelProjections"in F)this._mongooseOptions.schemaLevelProjections=F.schemaLevelProjections,delete F.schemaLevelProjections;if(F.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof F.limit==="string")try{F.limit=Fq(F.limit)}catch($){throw new WG("Number",F.limit,"limit")}if(typeof F.skip==="string")try{F.skip=Fq(F.skip)}catch($){throw new WG("Number",F.skip,"skip")}for(let $ of Object.keys(F))if(BX0.has($)){let B=Array.isArray(F[$])?F[$]:[F[$]];this[$].apply(this,B)}else this.options[$]=F[$];return this};a.prototype.explain=function(A){if(arguments.length===0)this.options.explain=!0;else if(A===!1)delete this.options.explain;else this.options.explain=A;return this};a.prototype.allowDiskUse=function(F){if(arguments.length===0)this.options.allowDiskUse=!0;else if(F===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=F;return this};a.prototype.maxTimeMS=function(F){return this.options.maxTimeMS=F,this};a.prototype.getFilter=function(){return this._conditions};a.prototype.getQuery=function(){return this._conditions};a.prototype.setQuery=function(F){this._conditions=F};a.prototype.getUpdate=function(){return this._update};a.prototype.setUpdate=function(F){this._update=F};a.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(Object.keys(this._fields).length===0)return null;return l3(this._fields)};a.prototype._updateForExec=function(){let F=l3(this._update,{transform:!1,depopulate:!0}),A=Object.keys(F),$=A.length,B={};while($--){let J=A[$];if(J[0]!=="$"){if(!B.$set)if(F.$set)B.$set=F.$set;else B.$set={};if(B.$set[J]=F[J],A.splice($,1),!~A.indexOf("$set"))A.push("$set")}else if(J==="$set"){if(!B.$set)B[J]=F[J]}else B[J]=F[J]}return B};a.prototype._optionsForExec=function(F){let A=l3(this.options);if(delete A.populate,F=F||this.model,!F)return A;hJ0(F.schema,A),mJ0(F.schema,A);let $=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!this.options.hasOwnProperty("session")&&$?.session!=null)A.session=$.session;let B=F&&F.schema&&F.schema.options&&F.schema.options.read;if(!("readPreference"in A)&&B)A.readPreference=B;if(A.upsert!==void 0)A.upsert=!!A.upsert;if(A.writeConcern){if(A.j)A.writeConcern.j=A.j,delete A.j;if(A.w)A.writeConcern.w=A.w,delete A.w;if(A.wtimeout)A.writeConcern.wtimeout=A.wtimeout,delete A.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let J=this._fieldsForExec();if(J!=null)A.projection=J}if(this._mongooseOptions.populate){if(A.readPreference){for(let J of Object.values(this._mongooseOptions.populate))if(J.options?.readPreference===void 0){if(!J.options)J.options={};J.options.readPreference=A.readPreference}}if(A.readConcern){for(let J of Object.values(this._mongooseOptions.populate))if(J.options?.readConcern===void 0){if(!J.options)J.options={};J.options.readConcern=A.readConcern}}}return A};a.prototype.lean=function(F){return this._mongooseOptions.lean=arguments.length?F:!0,this};a.prototype.set=function(F,A){if(typeof F==="object"){let $=Object.keys(F);for(let B of $)this.set(B,F[B]);return this}if(this._update=this._update||{},F in this._update)delete this._update[F];return this._update.$set=this._update.$set||{},this._update.$set[F]=A,this};a.prototype.get=function(A){let $=this._update;if($==null)return;let B=$.$set;if(B==null)return $[A];if(a0.hasUserDefinedProperty($,A))return $[A];if(a0.hasUserDefinedProperty(B,A))return B[A];return};a.prototype.error=function(A){if(arguments.length===0)return this._error;return this._error=A,this};a.prototype._unsetCastError=function(){if(this._error==null||!(this._error instanceof WG))return;return this.error(null)};a.prototype.mongooseOptions=function(F){if(arguments.length>0)this._mongooseOptions=F;return this._mongooseOptions};a.prototype._castConditions=function(){let F=void 0;if(this.model?.db.options?.sanitizeFilter!=null)F=this.model.db.options.sanitizeFilter;else if(this.model?.base.options?.sanitizeFilter!=null)F=this.model.base.options.sanitizeFilter;else F=this._mongooseOptions.sanitizeFilter;if(F)oJ0(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(A){this.error(A)}};/*!
 * ignore
 */function xG1(F){try{cJ0(F)}catch(A){F.error(A)}}a.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let A=this._mongooseOptions,$=this._userProvidedFields||{};HG(this.options,this.model.db.options,this.model.base.options),KG(this.options,this.model.db.options,this.model.base.options);let B={session:this&&this.options&&this.options.session||null,lean:A.lean||null},J=this._optionsForExec(),X=this._conditions,Y=J.projection,D=await this.mongooseCollection.find(X,J);if(J.explain)return D.explain();let G=await D.toArray();if(G.length===0)return G;if(!A.populate){let U=this.schema.options.versionKey;if(A.lean&&A.lean.versionKey===!1&&U)G.forEach((z)=>{if(U in z)delete z[U]});return A.lean?gG1(this.model.schema,G,null,B):this._completeMany(G,Y,$,B)}let Z=qG.preparePopulationOptionsMQ(this,A);if(A.lean)return this.model.populate(G,Z);return G=await this._completeMany(G,Y,$,B),await this.model.populate(G,Z),G};a.prototype.find=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new o4("Query.prototype.find() no longer accepts a callback");if(this.op="find",L9.canMerge(F))this.merge(F),QG(this);else if(F!=null)this.error(new K5(F,"filter","find"));return this};a.prototype.merge=function(F){if(!F)return this;let A={overwrite:!0};if(F instanceof a){if(F._conditions){if(A.omit={},this._conditions&&this._conditions.$and&&F._conditions.$and)A.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(F._conditions.$and);if(this._conditions&&this._conditions.$or&&F._conditions.$or)A.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(F._conditions.$or);a0.merge(this._conditions,F._conditions,A)}if(F._fields)this._fields||(this._fields={}),a0.merge(this._fields,F._fields,A);if(F.options)this.options||(this.options={}),a0.merge(this.options,F.options,A);if(F._update)this._update||(this._update={}),a0.mergeClone(this._update,F._update);if(F._distinct)this._distinct=F._distinct;return a0.merge(this._mongooseOptions,F._mongooseOptions),this}else if(this.model!=null&&F instanceof this.model.base.Types.ObjectId)return a0.merge(this._conditions,{_id:F},A),this;else if(F&&F.$__)F=F.toObject(iJ0);if(A.omit={},Array.isArray(F.$and)){if(A.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat(F.$and.map(($)=>a0.isPOJO($)?a0.merge({},$):$))}if(Array.isArray(F.$or)){if(A.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat(F.$or.map(($)=>a0.isPOJO($)?a0.merge({},$):$))}return a0.merge(this._conditions,F,A),this};a.prototype.collation=function(F){if(this.options==null)this.options={};return this.options.collation=F,this};a.prototype._completeOne=function(F,A,$,B){if(!F&&!this.options.includeResultMetadata)return B(null,null);let J=this.model,X=this._userProvidedFields||{},Y=this._mongooseOptions,D=this.options;if(!D.lean&&Y.lean)D.lean=Y.lean;if(D.explain)return B(null,F);if(!Y.populate){let Z=this.schema.options.versionKey;if(Y.lean&&Y.lean.versionKey===!1&&Z){if(Z in F)delete F[Z]}return Y.lean?Wf(J.schema,F,null,A,D,B):OG1(J,F,A,D,$,X,null,B)}let G=qG.preparePopulationOptionsMQ(this,this._mongooseOptions);if(Y.lean)return J.populate(F,G).then((Z)=>{Wf(J.schema,Z,null,A,D,B)},(Z)=>{B(Z)});OG1(J,F,A,D,$,X,[],(Z,U)=>{if(Z!=null)return B(Z);J.populate(U,G).then((z)=>{B(null,z)},(z)=>{B(z)})})};a.prototype._completeMany=async function(A,$,B,J){let X=this.model;return Promise.all(A.map((Y)=>new Promise((D,G)=>{let Z=Y;if(Y=qG.createModel(X,Y,$,B),J.session!=null)Y.$session(J.session);Y.$init(Z,J,(U)=>{if(U!=null)return G(U);D(Y)})})))};a.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();HG(this.options,this.model.db.options,this.model.base.options),KG(this.options,this.model.db.options,this.model.base.options);let A=this._optionsForExec(),$=await this.mongooseCollection.findOne(this._conditions,A);return new Promise((B,J)=>{this._completeOne($,null,A.projection,(X,Y)=>{if(X)return J(X);B(Y)})})};a.prototype.findOne=function(F,A,$){if(typeof F==="function"||typeof A==="function"||typeof $==="function"||typeof arguments[3]==="function")throw new o4("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",this._validateOp(),$)this.setOptions($);if(A)this.select(A);if(L9.canMerge(F))this.merge(F),QG(this);else if(F!=null)this.error(new K5(F,"filter","findOne"));return this};a.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(B){this.error(B)}if(this.error())throw this.error();HG(this.options,this.model.db.options,this.model.base.options),KG(this.options,this.model.db.options,this.model.base.options);let A=this._optionsForExec(),$=this._conditions;return this.mongooseCollection.countDocuments($,A)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */a.prototype._applyTranslateAliases=function(){let A=!1;if("translateAliases"in this._mongooseOptions)A=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)A=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)A=this.model.base.options.translateAliases;if(!A)return;if(this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};a.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let A=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(A)};a.prototype.estimatedDocumentCount=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new o4("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",this._validateOp(),F!=null)this.setOptions(F);return this};a.prototype.countDocuments=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new o4("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",this._validateOp(),L9.canMerge(F))this.merge(F);if(A!=null)this.setOptions(A);return this};a.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();HG(this.options,this.model.db.options,this.model.base.options),KG(this.options,this.model.db.options,this.model.base.options);let A=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,A)};a.prototype.distinct=function(F,A,$){if(typeof F==="function"||typeof A==="function"||typeof $==="function"||typeof arguments[3]==="function")throw new o4("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",this._validateOp(),L9.canMerge(A))this.merge(A),QG(this);else if(A!=null)this.error(new K5(A,"filter","distinct"));if(F!=null)this._distinct=F;if($!=null)this.setOptions($);return this};a.prototype.sort=function(F,A){if(arguments.length>2)throw Error("sort() takes at most 2 arguments");if(A!=null&&typeof A!=="object")throw Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(A&&A.override)this.options.sort={};let $=this.options.sort;if(typeof F==="string"){let B=F.indexOf(" ")===-1?[F]:F.split(" ");for(let J of B){let X=J[0]=="-"?-1:1;if(X===-1)J=J.slice(1);if(eK.has(J))continue;$[J]=X}}else if(Array.isArray(F))for(let B of F){if(!Array.isArray(B))throw TypeError("Invalid sort() argument, must be array of arrays");let J=""+B[0];if(eK.has(J))continue;$[J]=Uf(B[1],J)}else if(typeof F==="object"&&F!=null&&!(F instanceof Map))for(let B of Object.keys(F)){if(eK.has(B))continue;$[B]=Uf(F[B],B)}else if(F instanceof Map)for(let B of F.keys()){if(B=""+B,eK.has(B))continue;$[B]=Uf(F.get(B),B)}else if(F!=null)throw TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */function Uf(F,A){if(F===1||F==="asc"||F==="ascending")return 1;if(F===-1||F==="desc"||F==="descending")return-1;if(F?.$meta!=null)return{$meta:F.$meta};throw TypeError("Invalid sort value: { "+A+": "+F+" }")}a.prototype.deleteOne=function(A,$){if(typeof A==="function"||typeof $==="function"||typeof arguments[2]==="function")throw new o4("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions($),L9.canMerge(A))this.merge(A),QG(this);else if(A!=null)this.error(new K5(A,"filter","deleteOne"));return this};a.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),yB(this._conditions,this.options),this.error()!=null)throw this.error();let A=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,A)};a.prototype.deleteMany=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new o4("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(A),this.op="deleteMany",L9.canMerge(F))this.merge(F),QG(this);else if(F!=null)this.error(new K5(F,"filter","deleteMany"));return this};a.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),yB(this._conditions,this.options),this.error()!=null)throw this.error();let A=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,A)};function OG1(F,A,$,B,J,X,Y,D){if(B.includeResultMetadata&&A==null)return G(null),null;qG.createModelAndInit(F,A,J,X,B,Y,G);function G(Z,U){if(Z)return D(Z);if(B.includeResultMetadata){if(A&&U){if(B.session!=null)U.$session(B.session);$.value=U}else $.value=null;return D(null,$)}if(B.session!=null)U.$session(B.session);D(null,U)}}function QG(F){if(!F||!F.model||!F.model.schema)return;let A=F.model.schema;if(A&&A.discriminatorMapping&&!A.discriminatorMapping.isRoot)F._conditions[A.discriminatorMapping.key]=A.discriminatorMapping.value}a.prototype.findOneAndUpdate=function(F,A,$){if(typeof F==="function"||typeof A==="function"||typeof $==="function"||typeof arguments[3]==="function")throw new o4("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:$=void 0;break;case 1:A=F,F=$=void 0;break}if(L9.canMerge(F))this.merge(F);else if(F!=null)this.error(new K5(F,"filter","findOneAndUpdate"));if(A)this._mergeUpdate(A);if($=$?l3($):{},$.projection)this.select($.projection),delete $.projection;if($.fields)this.select($.fields),delete $.fields;let B=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if($.new==null&&$.returnDocument==null&&$.returnOriginal==null&&B!=null)$.returnOriginal=B;return this.setOptions($),this};a.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),yB(this._conditions,this.options),xG1(this),this.error())throw this.error();if(HG(this.options,this.model.db.options,this.model.base.options),KG(this.options,this.model.db.options,this.model.base.options),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;let A=this._optionsForExec(this.model);bG1(A),this._update=this._castUpdate(this._update);let $=Object.assign({},A,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=uG1(this._conditions,this.model.schema,this._update,$),!this._update||Object.keys(this._update).length===0)if(A.upsert){let Y=l3(this._update);delete Y._id,this._update={$set:Y}}else return this._executionStack=null,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&Object.keys(this._update.$set).length===0)delete this._update.$set;if(Hf(this,"runValidators",!1))await this.validate(this._update,A,!1);if(this._update.toBSON)this._update=this._update.toBSON();let J=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,A);for(let Y of this._transforms)J=Y(J);let X=!A.includeResultMetadata?J:J.value;return new Promise((Y,D)=>{this._completeOne(X,J,A.projection,(G,Z)=>{if(G)return D(G);Y(Z)})})};a.prototype.findOneAndDelete=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new o4("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validateOp(),this._validate(),L9.canMerge(F))this.merge(F);return A&&this.setOptions(A),this};a.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),yB(this._conditions,this.options),this.error()!=null)throw this.error();let A=this.options.includeResultMetadata,$=this._conditions,B=this._optionsForExec(this.model),J=await this.mongooseCollection.findOneAndDelete($,B);for(let Y of this._transforms)J=Y(J);let X=!A?J:J.value;return new Promise((Y,D)=>{this._completeOne(X,J,B.projection,(G,Z)=>{if(G)return D(G);Y(Z)})})};a.prototype.findOneAndReplace=function(F,A,$){if(typeof F==="function"||typeof A==="function"||typeof $==="function"||typeof arguments[4]==="function")throw new o4("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validateOp(),this._validate(),L9.canMerge(F))this.merge(F);else if(F!=null)this.error(new K5(F,"filter","findOneAndReplace"));if(A!=null)this._mergeUpdate(A);$=$||{};let B=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if($.new==null&&$.returnDocument==null&&$.returnOriginal==null&&B!=null)$.returnOriginal=B;return this.setOptions($),this};a.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),yB(this._conditions,this.options),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;let A=this._conditions,$=this._optionsForExec();bG1($);let B=this.options.includeResultMetadata,J={skipId:!0};if("strict"in this._mongooseOptions)J.strict=this._mongooseOptions.strict;let X=Hf(this,"runValidators",!1);try{let G=new this.model(this._update,null,J);if(X)await G.validate();else if(G.$__.validationError)throw G.$__.validationError;this._update=G.toBSON()}catch(G){if(G instanceof TG1)throw G;let Z=new TG1;throw Z.errors[G.path]=G,Z}let Y=await this.mongooseCollection.findOneAndReplace(A,this._update,$);for(let G of this._transforms)Y=G(Y);let D=!B?Y:Y.value;return new Promise((G,Z)=>{this._completeOne(D,Y,$.projection,(U,z)=>{if(U)return Z(U);G(z)})})};a.prototype.findById=function(F,A,$){return this.findOne({_id:F},A,$)};a.prototype.findByIdAndUpdate=function(F,A,$){return this.findOneAndUpdate({_id:F},A,$)};a.prototype.findByIdAndDelete=function(F,A){return this.findOneAndDelete({_id:F},A)};function bG1(F){if("new"in F)F.returnDocument=F.new?"after":"before",delete F.new;if("returnOriginal"in F)F.returnDocument=F.returnOriginal?"before":"after",delete F.returnOriginal;if(typeof F.returnDocument==="string")F.returnOriginal=F.returnDocument==="before"}function Hf(F,A,$){let B=F._optionsForExec(F.model);if(A in B)return B[A];if(A in F.model.base.options)return F.model.base.options[A];return $}/*!
 * ignore
 */function Wf(F,A,$,B,J,X){if(J.lean&&typeof J.lean.transform==="function"){J.lean.transform(A);for(let Y=0;Y<F.childSchemas.length;Y++){let D=$?$+"."+F.childSchemas[Y].model.path:F.childSchemas[Y].model.path,G=F.childSchemas[Y].schema,Z=SG1.get(D,A);if(Z==null)continue;if(Array.isArray(Z))for(let U=0;U<Z.length;U++)J.lean.transform(Z[U]);else J.lean.transform(Z);Wf(G,Z,D,B,J)}if(X)return X(null,A);else return}if(J.includeResultMetadata)return X(null,B);return X(null,A)}/*!
 * ignore
 */function gG1(F,A,$,B){if(B.lean&&typeof B.lean.transform==="function"){for(let J of A)B.lean.transform(J);for(let J=0;J<F.childSchemas.length;J++){let X=$?$+"."+F.childSchemas[J].model.path:F.childSchemas[J].model.path,Y=F.childSchemas[J].schema,D=SG1.get(X,A);if(D==null)continue;D=D.flat();for(let G=0;G<D.length;G++)B.lean.transform(D[G]);gG1(Y,D,X,B)}}return A}a.prototype._mergeUpdate=function(F){if(!this._update)this._update=Array.isArray(F)?[]:{};if(F==null||typeof F==="object"&&Object.keys(F).length===0)return;if(F instanceof a){if(Array.isArray(this._update))throw Error("Cannot mix array and object updates");if(F._update)a0.mergeClone(this._update,F._update)}else if(Array.isArray(F)){if(!Array.isArray(this._update))throw Error("Cannot mix array and object updates");this._update=this._update.concat(F)}else{if(Array.isArray(this._update))throw Error("Cannot mix array and object updates");a0.mergeClone(this._update,F)}};/*!
 * ignore
 */async function Kf(F){if(this._applyTranslateAliases(),this._castConditions(),yB(this._conditions,this.options),xG1(this),this.error()!=null)throw this.error();let A=this._conditions,$=this._optionsForExec(this.model);this._update=l3(this._update,$);let B=F==="replaceOne";if(B)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let X=Object.assign({},$,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=uG1(this._conditions,this.model.schema,this._update,X)}if(Array.isArray($.arrayFilters))$.arrayFilters=sJ0(this._update,$.arrayFilters);if(Hf(this,"runValidators",!1))await this.validate(this._update,$,B);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[F](A,this._update,$)}a.prototype.validate=async function(A,$,B){if(typeof arguments[3]==="function")throw new o4("Query.prototype.validate() no longer accepts a callback");if(await yG1(this,"validate"),B)await A.$validate();else await new Promise((J,X)=>{AX0(this,this.model.schema,A,$,(Y)=>{if(Y!=null)return X(Y);J()})});await _G1(this,null,null,"validate")};a.prototype._updateMany=async function(){return Kf.call(this,"updateMany")};a.prototype._updateOne=async function(){return Kf.call(this,"updateOne")};a.prototype._replaceOne=async function(){return Kf.call(this,"replaceOne")};a.prototype.updateMany=function(F,A,$,B){if(typeof $==="function")B=$,$=null;else if(typeof A==="function")B=A,A=F,F={},$=null;else if(typeof F==="function")B=F,F=void 0,A=void 0,$=void 0;else if(typeof F==="object"&&!A&&!$&&!B)A=F,F=void 0,$=void 0,B=void 0;return qf(this,"updateMany",F,A,$,B)};a.prototype.updateOne=function(F,A,$,B){if(typeof $==="function")B=$,$=null;else if(typeof A==="function")B=A,A=F,F={},$=null;else if(typeof F==="function")B=F,F=void 0,A=void 0,$=void 0;else if(typeof F==="object"&&!A&&!$&&!B)A=F,F=void 0,$=void 0,B=void 0;return qf(this,"updateOne",F,A,$,B)};a.prototype.replaceOne=function(F,A,$,B){if(typeof $==="function")B=$,$=null;else if(typeof A==="function")B=A,A=F,F={},$=null;else if(typeof F==="function")B=F,F=void 0,A=void 0,$=void 0;else if(typeof F==="object"&&!A&&!$&&!B)A=F,F=void 0,$=void 0,B=void 0;return qf(this,"replaceOne",F,A,$,B)};function qf(F,A,$,B,J,X){if(F.op=A,F._validateOp(),B=B||{},J!=null){if("strict"in J)F._mongooseOptions.strict=J.strict}if(!($ instanceof a)&&$!=null&&$.toString()!=="[object Object]")F.error(new K5($,"filter",A));else F.merge($);if(a0.isObject(J))F.setOptions(J);if(F._mergeUpdate(B),X)return F.exec(X),F;return F}a.prototype.transform=function(F){return this._transforms.push(F),this};a.prototype.orFail=function(F){return this.transform((A)=>{switch(this.op){case"find":if(A.length===0)throw _B(F,this);break;case"findOne":if(A==null)throw _B(F,this);break;case"replaceOne":case"updateMany":case"updateOne":if(A&&A.matchedCount===0)throw _B(F,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&A!=null&&A.value==null)throw _B(F,this);if(!this.options.includeResultMetadata&&A==null)throw _B(F,this);break;case"deleteMany":case"deleteOne":if(A.deletedCount===0)throw _B(F,this);break;default:break}return A}),this};function _B(F,A){if(typeof F==="function")F=F.call(A);if(F==null)F=new yJ0(A.getQuery(),A.model.modelName);return F}a.prototype.isPathSelectedInclusive=function(F){return rJ0(this._fields,F)};a.prototype.exec=async function(A){if(typeof A==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new o4("Query.prototype.exec() no longer accepts a callback");if(typeof A==="string")this.op=A;if(this.op==null)throw new o4("Query must have `op` before executing");if(this.model==null)throw new o4("Query must have an associated model before executing");let $=JX0.get(this.op);if(!$)throw new o4('Query has invalid `op`: "'+this.op+'"');if(this.options&&this.options.sort&&typeof this.options.sort==="object"&&this.options.sort.hasOwnProperty(""))throw Error('Invalid field "" passed to sort()');if(this._executionStack!=null){let Y=this.toString();if(Y.length>60)Y=Y.slice(0,60)+"...";let D=new o4("Query was already executed: "+Y);if(!this.model.base.options.skipOriginalStackTraces)D.originalStack=this._executionStack;throw D}else this._executionStack=this.model.base.options.skipOriginalStackTraces?!0:Error().stack;let B=null;try{await DX0(this)}catch(Y){if(Y instanceof zf.skipWrappedFunction)B=Y;else throw Y}let J,X=null;try{await yG1(this),J=B?B.args[0]:await this[$]();for(let Y of this._transforms)J=Y(J)}catch(Y){if(Y instanceof zf.skipWrappedFunction)J=Y.args[0];else X=Y;X=this.model.schema._transformDuplicateKeyError(X)}return J=await _G1(this,J,X),await YX0(this),J};/*!
 * ignore
 */function YX0(F){return new Promise((A,$)=>{F._hooks.execPost("exec",F,[],{},(B)=>{if(B)return $(B);A()})})}/*!
 * ignore
 */function _G1(F,A,$,B){if(F._queryMiddleware==null){if($!=null)throw $;return A}return new Promise((J,X)=>{let Y=$?{error:$}:{};F._queryMiddleware.execPost(B||F.op,F,[A],Y,(D,G)=>{if(D)return X(D);J(G)})})}/*!
 * ignore
 */function DX0(F){return new Promise((A,$)=>{F._hooks.execPre("exec",F,[],(B)=>{if(B!=null)return $(B);A()})})}/*!
 * ignore
 */function yG1(F,A){if(F._queryMiddleware==null)return;return new Promise(($,B)=>{F._queryMiddleware.execPre(A||F.op,F,[],(J)=>{if(J!=null)return B(J);$()})})}a.prototype.then=function(F,A){return this.exec().then(F,A)};a.prototype.catch=function(F){return this.exec().then(null,F)};a.prototype.finally=function(F){return this.exec().finally(F)};a.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};a.prototype.pre=function(F){return this._hooks.pre("exec",F),this};a.prototype.post=function(F){return this._hooks.post("exec",F),this};a.prototype._castUpdate=function(A){let $=this.schema,B=$.options.discriminatorKey,J=$._baseSchema?$._baseSchema:$;if(this._mongooseOptions.overwriteDiscriminatorKey&&A[B]!=null&&J.discriminators){let Y=Object.values(J.discriminators).find((D)=>D.discriminatorMapping.value===A[B]);if(Y!=null)$=Y}let X;if("upsert"in this.options)X=this.options.upsert;return lJ0($,A,{strict:this._mongooseOptions.strict,upsert:X,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};a.prototype.populate=function(){let F=Array.from(arguments);if(!F.some(Boolean))return this;let A=a0.populate.apply(null,F),$=this._mongooseOptions;if($.lean!=null){let J=$.lean;for(let X of A)if((X&&X.options&&X.options.lean)==null)X.options=X.options||{},X.options.lean=J}if(!a0.isObject($.populate))$.populate={};let B=$.populate;for(let J of A){let X=J.path;if(B[X]&&B[X].populate&&J.populate)J.populate=B[X].populate.concat(J.populate);B[J.path]=J}return this};a.prototype.getPopulatedPaths=function(){let A=this._mongooseOptions.populate||{},$=Object.keys(A);for(let B of Object.keys(A)){let J=A[B];if(!Array.isArray(J.populate))continue;vG1($,J.populate,B+".")}return $};/*!
 * ignore
 */function vG1(F,A,$){for(let B of A){if(F.push($+B.path),!Array.isArray(B.populate))continue;vG1(F,B.populate,$+B.path+".")}}a.prototype.cast=function(F,A){A||(A=this._conditions),F=F||this.model;let $=F.schema.options.discriminatorKey;if(A!=null&&A.hasOwnProperty($))F=pJ0(F.discriminators,A[$])||F;let B={upsert:this.options&&this.options.upsert};if(this.options){if("strict"in this.options)B.strict=this.options.strict;if("strictQuery"in this.options)B.strictQuery=this.options.strictQuery}if("sanitizeFilter"in this._mongooseOptions)B.sanitizeFilter=this._mongooseOptions.sanitizeFilter;try{return dJ0(F.schema,A,B,this)}catch(J){if(typeof J.setModel==="function")J.setModel(F);throw J}};a.prototype._castFields=function(A){let $,B,J,X,Y;if(A){J=Object.keys(A),B=[];for(let D=0;D<J.length;++D)if(X=J[D],A[X].$elemMatch)$||($={}),$[X]=A[X],B.push(X)}if($){try{Y=this.cast(this.model,$)}catch(D){return D}for(let D=0;D<B.length;++D)X=B[D],A[X]=Y[X]}return A};a.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let A=void 0;if(this.model!=null&&a0.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))A=this.model.db.options.sanitizeProjection;else if(this.model!=null&&a0.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))A=this.model.base.options.sanitizeProjection;else A=this._mongooseOptions.sanitizeProjection;if(this._mongooseOptions.schemaLevelProjections??!0)qG.applyPaths(this._fields,this.model.schema,A);let B=!0;if("selectPopulatedPaths"in this.model.base.options)B=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)B=this.model.schema.options.selectPopulatedPaths;if(B)FX0(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};a.prototype.cursor=function(A){if(A)this.setOptions(A);try{this.cast(this.model)}catch($){return new MG1(this)._markError($)}return new MG1(this)};a.prototype.tailable=function(F,A){if(F!=null&&typeof F.constructor==="function"&&F.constructor.name==="Object")A=F,F=!0;if(F===void 0)F=!0;if(A&&typeof A==="object")for(let $ of Object.keys(A))if($==="awaitData"||$==="awaitdata")this.options.awaitData=!!A[$];else this.options[$]=A[$];return this.options.tailable=arguments.length?!!F:!0,this};a.prototype.near=function(){let F=[],A=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))F.push({center:arguments[0],spherical:A});else if(typeof arguments[0]==="string")F.push(arguments[0]);else if(a0.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=A;F.push(arguments[0])}else throw TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")F.push({center:[arguments[0],arguments[1]],spherical:A});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))F.push(arguments[0]),F.push({center:arguments[1],spherical:A});else if(typeof arguments[0]==="string"&&a0.isObject(arguments[1])){if(F.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=A;F.push(arguments[1])}else throw TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")F.push(arguments[0]),F.push({center:[arguments[1],arguments[2]],spherical:A});else throw TypeError("invalid argument");else throw TypeError("invalid argument");return a.base.near.apply(this,F)};a.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};if(Symbol.asyncIterator!=null)a.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};a.prototype.box=function(F,A){if(!Array.isArray(F)&&a0.isObject(F))A=F.ur,F=F.ll;return a.base.box.call(this,F,A)};a.prototype.center=a.base.circle;a.prototype.centerSphere=function(){if(arguments[0]!=null&&typeof arguments[0].constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(arguments[1]!=null&&typeof arguments[1].constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;a.base.circle.apply(this,arguments)};a.prototype.selectedInclusively=function(){return nJ0(this._fields)};a.prototype.selectedExclusively=function(){return aJ0(this._fields)};a.prototype.model;/*!
 * Export
 */hG1.exports=a});var iG1=Q((GM0,pG1)=>{/*!
 * Module dependencies.
 */var VG=d1(),cG1=x("stream").Readable,GX0=cu(),ZX0=x9(),UX0=MF(),lG1=x("util");function p3(F){cG1.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=F,this._transforms=[];let{_connection:A,_model:$}=F;if(delete F.options.cursor.useMongooseAggCursor,this._mongooseOptions={},A)this.cursor=A.db.aggregate(F._pipeline,F.options||{}),setImmediate(()=>this.emit("cursor",this.cursor));else zX0($,this,F)}lG1.inherits(p3,cG1);/*!
 * ignore
 */function zX0(F,A,$){if(!F.collection.buffer)F.hooks.execPre("aggregate",$,function(B){if(B!=null){mG1(A,B);return}if(typeof $.options?.cursor?.transform==="function")A._transforms.push($.options.cursor.transform);A.cursor=F.collection.aggregate($._pipeline,$.options||{}),A.emit("cursor",A.cursor)});else F.collection.emitter.once("queue",function(){F.hooks.execPre("aggregate",$,function(B){if(B!=null){mG1(A,B);return}if(typeof $.options?.cursor?.transform==="function")A._transforms.push($.options.cursor.transform);A.cursor=F.collection.aggregate($._pipeline,$.options||{}),A.emit("cursor",A.cursor)})})}function mG1(F,A){if(A instanceof UX0.skipWrappedFunction){let $=A.args[0];if($!=null&&(!Array.isArray($)||$.length)){let B=new VG('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+lG1.inspect($)+'".');F._markError(B),F.listeners("error").length>0&&F.emit("error",B);return}F.emit("cursor",null);return}F._markError(A),F.listeners("error").length>0&&F.emit("error",A)}p3.prototype._read=function(){let F=this;$q(this,function(A,$){if(A)return F.emit("error",A);if(!$){F.push(null),F.cursor.close(function(B){if(B)return F.emit("error",B)});return}F.push($)})};if(Symbol.asyncIterator!=null){let F="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";p3.prototype[Symbol.asyncIterator]=function(){throw new VG(F)}}Object.defineProperty(p3.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});p3.prototype._markError=function(F){return this._error=F,this};p3.prototype.close=async function(){if(typeof arguments[0]==="function")throw new VG("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}this.emit("close")};p3.prototype._destroy=function(A,$){let B=null;if(!this.cursor)B=new Promise((J)=>{this.once("cursor",J)});else B=Promise.resolve();return B.then(()=>this.cursor.close()).then(()=>{this._closed=!0,$()}).catch((J)=>{$(J)}),this};p3.prototype.next=async function(){if(typeof arguments[0]==="function")throw new VG("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((A,$)=>{$q(this,(B,J)=>{if(B!=null)return $(B);A(J)})})};p3.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new VG("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let $=this;if(typeof A==="function")A={};return A=A||{},GX0(function(B){return $q($,B)},F,A)};if(Symbol.asyncIterator!=null)p3.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */p3.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(dG1)===-1)this.map(dG1);return this};/*!
 * ignore
 */p3.prototype.transformNull=function(F){if(arguments.length===0)F=!0;return this._mongooseOptions.transformNull=F,this};/*!
 * ignore
 */function dG1(F){return F==null?{done:!0}:{value:F,done:!1}}p3.prototype.addCursorFlag=function(F,A){let $=this;return WX0(this,function(){$.cursor.addCursorFlag(F,A)}),this};/*!
 * ignore
 */function WX0(F,A){if(F.cursor)return A();F.once("cursor",function(){A()})}function $q(F,A){let $=A;if(F._transforms.length)$=function(B,J){if(B||J===null&&!F._mongooseOptions.transformNull)return A(B,J);A(B,F._transforms.reduce(function(X,Y){return Y(X)},J))};if(F._error)return ZX0(function(){$(F._error)});if(F.cursor)return F.cursor.next().then((B)=>{if(!B)return $(null,null);$(null,B)},(B)=>$(B));else F.once("error",A),F.once("cursor",function(){$q(F,A)})}pG1.exports=p3});var Qf=Q((ZM0,aG1)=>{aG1.exports=function(A,$,B){let J=$&&$.discriminatorMapping;if(B=B||"",J&&!J.isRoot){let X=A,Y=(B.length>0?B+".":B)+J.key,D=J.value;if(X[0]!=null&&X[0].$match&&(X[0].$match[Y]===void 0||X[0].$match[Y]===D))X[0].$match[Y]=D;else if(X[0]!=null&&X[0].$geoNear)X[0].$geoNear.query=X[0].$geoNear.query||{},X[0].$geoNear.query[Y]=D;else if(X[0]!=null&&X[0].$search)if(X[1]&&X[1].$match!=null)X[1].$match[Y]=X[1].$match[Y]||D;else{let G={};G[Y]=D,X.splice(1,0,{$match:G})}else{let G={};G[Y]=D,X.unshift({$match:G})}}}});var rG1=Q((UM0,nG1)=>{nG1.exports=function F(A){if(!Array.isArray(A))return;for(let $ of A){if($==null)continue;let B=$.$group||$.$bucket||$.$bucketAuto;if(B!=null)for(let X of Object.keys(B))HX0(B[X]);let J=Object.keys($)[0];if(J&&typeof $[J]==="object"){let X=$[J];for(let Y of Object.keys(X))if(X[Y]!=null&&X[Y].$function!=null&&typeof X[Y].$function.body==="function")X[Y].$function.body=X[Y].$function.body.toString()}if($.$facet!=null)for(let X of Object.keys($.$facet))F($.$facet[X])}};function HX0(F){if(F==null||F.$accumulator==null)return;for(let A of["init","accumulate","merge","finalize"])if(typeof F.$accumulator[A]==="function")F.$accumulator[A]=String(F.$accumulator[A])}});var Ef=Q((zM0,FZ1)=>{/*!
 * Module dependencies
 */var oG1=iG1(),pF=d1(),eG1=Aq(),{applyGlobalMaxTimeMS:KX0,applyGlobalDiskUse:qX0}=iu(),QX0=Z6(),VX0=E3(),Vf=Qf(),EX0=rG1(),tG1=P1(),{modelSymbol:LX0}=q1(),wX0=eG1.prototype.read,IX0=eG1.prototype.readConcern,sG1=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function s1(F,A){if(this._pipeline=[],A==null||A[LX0])this._model=A;else this._connection=A;if(this.options={},arguments.length===1&&Array.isArray(F))this.append.apply(this,F)}s1.prototype.options;s1.prototype._optionsForExec=function(){let F=this.options||{},A=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!F.hasOwnProperty("session")&&A?.session!=null)F.session=A.session;return F};s1.prototype.model=function(F){if(arguments.length===0)return this._model;if(this._model=F,F.schema!=null){if(this.options.readPreference==null&&F.schema.options.read!=null)this.options.readPreference=F.schema.options.read;if(this.options.collation==null&&F.schema.options.collation!=null)this.options.collation=F.schema.options.collation}return F};s1.prototype.append=function(){let F=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!F.every(CX0))throw Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(F),this};s1.prototype.addFields=function(F){if(typeof F!=="object"||F===null||Array.isArray(F))throw Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},F)})};s1.prototype.project=function(F){let A={};if(typeof F==="object"&&!Array.isArray(F))Object.keys(F).forEach(function($){A[$]=F[$]});else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function($){if(!$)return;let B=$[0]==="-"?0:1;if(B===0)$=$.substring(1);A[$]=B});else throw Error("Invalid project() argument. Must be string or object");return this.append({$project:A})};s1.prototype.near=function(F){if(F==null)throw new pF("Aggregate `near()` must be called with non-nullish argument");if(F.near==null)throw new pF("Aggregate `near()` argument must have a `near` property");let A=Array.isArray(F.near)?F.near:F.near.coordinates;if(typeof F.near==="object"&&(!Array.isArray(A)||A.length<2||A.find((B)=>typeof B!=="number")))throw new pF(`Aggregate \`near()\` argument has invalid coordinates, got "${A}"`);let $={};return $.$geoNear=F,this.append($)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(F){s1.prototype[F]=function(A){let $={};return $["$"+F]=A,this.append($)}});s1.prototype.unwind=function(){let F=[...arguments],A=[];for(let $ of F)if($&&typeof $==="object")A.push({$unwind:$});else if(typeof $==="string")A.push({$unwind:$[0]==="$"?$:"$"+$});else throw Error('Invalid arg "'+$+'" to unwind(), must be string or object');return this.append.apply(this,A)};s1.prototype.replaceRoot=function(F){let A;if(typeof F==="string")A=F.startsWith("$")?F:"$"+F;else A=F;return this.append({$replaceRoot:{newRoot:A}})};s1.prototype.count=function(F){return this.append({$count:F})};s1.prototype.sortByCount=function(F){if(F&&typeof F==="object")return this.append({$sortByCount:F});else if(typeof F==="string")return this.append({$sortByCount:F[0]==="$"?F:"$"+F});else throw TypeError('Invalid arg "'+F+'" to sortByCount(), must be string or object')};s1.prototype.lookup=function(F){return this.append({$lookup:F})};s1.prototype.graphLookup=function(F){let A={};if(F){if(!tG1.isObject(F))throw TypeError("Invalid graphLookup() argument. Must be an object.");tG1.mergeClone(A,F);let $=A.startWith;if($&&typeof $==="string")A.startWith=A.startWith.startsWith("$")?A.startWith:"$"+A.startWith}return this.append({$graphLookup:A})};s1.prototype.sample=function(F){return this.append({$sample:{size:F}})};s1.prototype.sort=function(F){let A={};if(VX0(F)==="Object"){let $=["desc","descending",-1];Object.keys(F).forEach(function(B){if(F[B]instanceof Object&&F[B].$meta){A[B]=F[B];return}A[B]=$.indexOf(F[B])===-1?1:-1})}else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function($){if(!$)return;let B=$[0]==="-"?-1:1;if(B===-1)$=$.substring(1);A[$]=B});else throw TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:A})};s1.prototype.unionWith=function(F){return this.append({$unionWith:F})};s1.prototype.read=function(F,A){return wX0.call(this,F,A),this};s1.prototype.readConcern=function(F){return IX0.call(this,F),this};s1.prototype.redact=function(F,A,$){if(arguments.length===3){if(typeof A==="string"&&!sG1.has(A)||typeof $==="string"&&!sG1.has($))throw Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");F={$cond:{if:F,then:A,else:$}}}else if(arguments.length!==1)throw TypeError("Invalid arguments");return this.append({$redact:F})};s1.prototype.explain=async function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new pF("Aggregate.prototype.explain() no longer accepts a callback");let $=this._model;if(!this._pipeline.length)throw Error("Aggregate has empty pipeline");Vf(this._pipeline,this._model.schema),await new Promise((Y,D)=>{$.hooks.execPre("aggregate",this,(G)=>{if(G){let Z={error:G};return $.hooks.execPost("aggregate",this,[null],Z,(U)=>{D(U)})}else Y()})});let B=$.collection.aggregate(this._pipeline,this.options);if(A==null)A=!0;let J=null;try{J=await B.explain(A)}catch(Y){await new Promise((D,G)=>{let Z={error:Y};$.hooks.execPost("aggregate",this,[null],Z,(U)=>{if(U)return G(U);return D()})})}let X={error:null};return await new Promise((Y,D)=>{$.hooks.execPost("aggregate",this,[J],X,(G)=>{if(G)return D(G);return Y()})}),J};s1.prototype.allowDiskUse=function(F){return this.options.allowDiskUse=F,this};s1.prototype.hint=function(F){return this.options.hint=F,this};s1.prototype.session=function(F){if(F==null)delete this.options.session;else this.options.session=F;return this};s1.prototype.option=function(F){for(let A in F)this.options[A]=F[A];return this};s1.prototype.cursor=function(F){return this._optionsForExec(),this.options.cursor=F||{},new oG1(this)};s1.prototype.collation=function(F){return this.options.collation=F,this};s1.prototype.facet=function(F){return this.append({$facet:F})};s1.prototype.search=function(F){return this.append({$search:F})};s1.prototype.pipeline=function(){return this._pipeline};s1.prototype.exec=async function(){if(!this._model&&!this._connection)throw Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new pF("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new pF("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let A=this._model,$=this._model.collection;if(KX0(this.options,A.db.options,A.base.options),qX0(this.options,A.db.options,A.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new oG1(this);if(Vf(this._pipeline,this._model.schema),EX0(this._pipeline),await new Promise((Y,D)=>{A.hooks.execPre("aggregate",this,(G)=>{if(G){let Z={error:G};return A.hooks.execPost("aggregate",this,[null],Z,(U)=>{D(U)})}else Y()})}),!this._pipeline.length)throw new pF("Aggregate has empty pipeline");let B=QX0(this.options||{}),J;try{J=await(await $.aggregate(this._pipeline,B)).toArray()}catch(Y){await new Promise((D,G)=>{let Z={error:Y};A.hooks.execPost("aggregate",this,[null],Z,(U)=>{if(U)return G(U);D()})})}let X={error:null};return await new Promise((Y,D)=>{A.hooks.execPost("aggregate",this,[J],X,(G)=>{if(G)return D(G);return Y()})}),J};s1.prototype.then=function(F,A){return this.exec().then(F,A)};s1.prototype.catch=function(F){return this.exec().then(null,F)};s1.prototype.finally=function(F){return this.exec().finally(F)};if(Symbol.asyncIterator!=null)s1.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */function CX0(F){if(typeof F!=="object"||F===null)return!1;let A=Object.keys(F);return A.length===1&&A[0][0]==="$"}s1._prepareDiscriminatorPipeline=Vf;/*!
 * Exports
 */FZ1.exports=s1});var $Z1=Q((WM0,AZ1)=>{var NX0=Z6();class Lf{constructor(F){if(F==null)return;Object.assign(this,NX0(F))}}Lf.prototype.__subdocs=null;AZ1.exports=Lf});var JZ1=Q((HM0,BZ1)=>{BZ1.exports=function F(A,$){let B=Object.keys($.paths),J=B.length;for(let X=0;X<J;++X){let Y="",D=B[X],G=$.paths[D],Z=G.splitPath(),U=Z.length,z=A;for(let W=0;W<U;++W){if(z==null)break;let H=Z[W];if(Y+=(!Y.length?"":".")+H,W===U-1){if(typeof z[H]<"u"){if(G.$isSingleNested)F(z[H],G.caster.schema);else if(G.$isMongooseDocumentArray&&Array.isArray(z[H]))z[H].forEach((q)=>F(q,G.schema));break}let K=G.getDefault(A,!1,{skipCast:!0});if(typeof K<"u"){if(z[H]=K,G.$isSingleNested)F(K,G.caster.schema);else if(G.$isMongooseDocumentArray&&Array.isArray(K))K.forEach((q)=>F(q,G.schema))}}else{if(z[H]==null)z[H]={};z=z[H]}}}}});var If=Q((KM0,XZ1)=>{XZ1.exports=wf;function wf(F,A=new WeakSet,$=!1){if(A.has(F))return;A.add(F);for(let B of Object.keys(F.paths)){let J=F.paths[B];if(!J.schema)continue;if(wf(J.schema,A),!J.schema._applyDiscriminators)continue;if(J._appliedDiscriminators&&!$)continue;for(let X of J.schema._applyDiscriminators.keys()){let{schema:Y,options:D}=J.schema._applyDiscriminators.get(X);wf(Y,A),J.discriminator(X,Y,$?{...D,overwriteExisting:!0}:D)}J._appliedDiscriminators=!0}}});var DZ1=Q((qM0,YZ1)=>{var PX0=V6(),RX0=P1();YZ1.exports=function F(A,$){let B=Cf();function J(X,Y){Object.defineProperty(A.prototype,X,{get:function(){let D={};for(let G in Y.methods[X])D[G]=Y.methods[X][G].bind(this);return D},configurable:!0})}for(let X of Object.keys($.methods)){let Y=$.methods[X];if($.tree.hasOwnProperty(X))throw Error('You have a method and a property in your schema both named "'+X+'"');if(typeof Y==="function"&&B.prototype[X]===Y){delete $.methods[X];continue}if($.reserved[X]&&!PX0($,`methodOptions.${X}.suppressWarning`,!1))RX0.warn(`mongoose: the method name "${X}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${X}', fn, { suppressWarning: true })\`.`);if(typeof Y==="function")A.prototype[X]=Y;else J(X,$)}A.$appliedMethods=!0;for(let X of Object.keys($.paths)){let Y=$.paths[X];if(Y.$isSingleNested&&!Y.caster.$appliedMethods)F(Y.caster,Y.schema);if(Y.$isMongooseDocumentArray&&!Y.Constructor.$appliedMethods)F(Y.Constructor,Y.schema)}}});var UZ1=Q((QM0,ZZ1)=>{var GZ1=QO(),jX0=QB(),MX0=iK(),Xq=P1().isPOJO;ZZ1.exports=function(A,$,B){if($==null)return A;if(A==null)return A;let J=null;if(MX0($))J=!1;else if(jX0($))J=!0;if(J==null)return A;else if(J)return B=B||GZ1($),Bq(A,$,B);else return B=B||GZ1($),Jq(A,$,B)};function Bq(F,A,$,B,J){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((Y)=>Bq(Y,A,$,B,J));let X={...F};B=J?B||{}:A;for(let Y of Object.keys(X)){let D=J?J+"."+Y:Y;if(A.hasOwnProperty(D)||B.hasOwnProperty(Y))if(Xq(A[D])||Xq(B[Y]))X[Y]=Bq(X[Y],A,$,B[Y],D);else delete X[Y];else if($[D])X[Y]=Bq(X[Y],A,$,B[Y],D)}return X}function Jq(F,A,$,B,J){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((Y)=>Jq(Y,A,$,B,J));let X={...F};B=J?B||{}:A;for(let Y of Object.keys(X)){let D=J?J+"."+Y:Y;if(A.hasOwnProperty(D)||B.hasOwnProperty(Y)){if(Xq(A[D])||Xq(B[Y]))X[Y]=Jq(X[Y],A,$,B[Y],D);continue}else if($[D])X[Y]=Jq(X[Y],A,$,B[Y],D);else delete X[Y]}return X}});var WZ1=Q((VM0,zZ1)=>{zZ1.exports=function(A){let $=!1;for(let B of Object.keys(A))if(A[B]==="text")$=!0;return $}});var KZ1=Q((EM0,HZ1)=>{var TX0=WZ1();HZ1.exports=function(A,$,B){if(TX0(A))return;if(B.hasOwnProperty("collation")&&!$.hasOwnProperty("collation"))$.collation=B.collation}});var QZ1=Q((LM0,qZ1)=>{var kX0=IH(),{queryMiddlewareFunctions:OX0,aggregateMiddlewareFunctions:SX0,modelMiddlewareFunctions:uX0,documentMiddlewareFunctions:fX0}=AK(),xX0=Array.from(new Set([...OX0,...SX0,...uX0,...fX0]));qZ1.exports=function(A,$,B){let J={useErrorHandlers:!0,numCallbackParams:1};A.$__insertMany=$.createWrapper("insertMany",A.$__insertMany,A,J),$=$.filter((X)=>{if(xX0.indexOf(X.name)!==-1)return!!X.model;return X.model!==!1});for(let X of Object.keys(B))if($.hasHooks(X)){let Y=A[X];A[X]=function(){let D=arguments.length,G=D>0?arguments[D-1]:null,Z=typeof G==="function"?G:null,U=Array.prototype.slice.call(arguments,0,Z==null?D:D-1);return kX0(Z,(z)=>{$.execPre(X,A,U,function(W){if(W!=null)return z(W);let H=0,K=Y.apply(A,U.concat(q));if(K!=null&&typeof K.then==="function")K.then((V)=>q(null,V),(V)=>q(V));function q(V,E){if(H++>0)return;if(V!=null)return z(V);$.execPost(X,A,[E],function(L){if(L!=null)return z(L);z(null,E)})}})},A.events)}}}});var EZ1=Q((wM0,VZ1)=>{VZ1.exports=function(A,$){for(let B in $.statics)A[B]=$.statics[B]}});var NZ1=Q((IM0,CZ1)=>{var LZ1=FK(),bX0=V9();CZ1.exports=wZ1;function wZ1(F,A,$){if(A==null)return A;return gX0(F,A,$),IZ1(F,A,$)}function gX0(F,A,$){for(let B of F.childSchemas){let J=B.model.path,X=B.schema;if(!J)continue;let Y=bX0.get(J,A);if(Y==null||Array.isArray(Y)&&Y.flat(1/0).length===0)continue;wZ1(X,Y,$)}}function IZ1(F,A,$){if(A==null||typeof A!=="object")return;if(Array.isArray(A)){for(let D of A)IZ1(F,D,$);return}if(F.discriminators&&Object.keys(F.discriminators).length>0)for(let D of Object.keys(F.discriminators)){let G=F.discriminators[D],Z=G.discriminatorMapping.key,U=G.discriminatorMapping.value;if(A[Z]==U){F=G;break}}let B=LZ1(F.options.timestamps,"createdAt"),J=LZ1(F.options.timestamps,"updatedAt"),X=$?.currentTime,Y=null;if(X!=null)Y=X();else if(F.base?.now)Y=F.base.now();else Y=new Date;if(B&&A[B]==null&&!$?.isUpdate)A[B]=Y;if(J)A[J]=Y}});var jZ1=Q((CM0,RZ1)=>{var _X0=V9();RZ1.exports=PZ1;function PZ1(F,A,$){if(A==null)return A;let B=$,J=null;if(Array.isArray($)){B=[],J=[];for(let X of $)if(X.length===1)J.push(X[0]);else B.push(X)}return yX0(F,A,B),Nf(F,A,J)}function yX0(F,A,$){let B=!1;for(let J of F.childSchemas){let X=J.model.path,Y=J.schema;if(!X)continue;let D=_X0.get(X,A);if(D==null||Array.isArray(D)&&D.flat(1/0).length===0)continue;let G=null;if(Array.isArray($)){G=[];for(let Z of $)if(Z[0]==X)G.push(Z.slice(1));if(G.length===0)continue}PZ1(Y,D,G),B=!0}if($&&$.length&&!B)Nf(F,A,$)}function Nf(F,A,$){if(A==null||typeof A!=="object")return;if(Array.isArray(A)){for(let B of A)Nf(F,B,$);return}if(F.discriminators&&Object.keys(F.discriminators).length>0)for(let B of Object.keys(F.discriminators)){let J=F.discriminators[B],X=J.discriminatorMapping.key,Y=J.discriminatorMapping.value;if(A[X]==Y){F=J;break}}if($==null)$=Object.keys(F.virtuals);for(let B of $){if(F.virtuals[B]==null)continue;let J=F.virtuals[B],X=Array.isArray(B)?B:B.indexOf(".")===-1?[B]:B.split("."),Y=A;for(let Z=0;Z<X.length-1;++Z)Y[X[Z]]=X[Z]in Y?Y[X[Z]]:{},Y=Y[X[Z]];let D=J.applyGetters(Y[X[X.length-1]],A);if(J.options&&(J.options.ref||J.options.refPath)&&D===void 0)if(J.options.justOne)D=null;else D=[];Y[X[X.length-1]]=D}}});var Yq=Q((NM0,MZ1)=>{MZ1.exports=function F(A){if(!(this instanceof F))return new F(A);return this.val=A,this}});var EG=Q((PM0,TZ1)=>{/*!
 * ignore
 */TZ1.exports=new WeakMap});var uZ1=Q((RM0,SZ1)=>{var vX0=Z6(),kZ1=EG(),hX0=q1().modelSymbol,mX0=P1();SZ1.exports=OZ1;var Dq=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function OZ1(F,A,$,B,J){let X=[],Y=B.isVirtual&&B.justOne&&F.length>1?!1:B.sort&&F.length>1,D=B.$nullIfNotFound,G,Z,U;if(mX0.isMongooseArray(F))F=F.__array;let z=0,W=F.length;if(Y&&J&&B[Dq]===void 0){B[Dq]=!1;for(let H in $)if(Array.isArray($[H])){B[Dq]=!0;break}}for(z=0;z<W;++z){if(U=F[z],Array.isArray(U)){OZ1(U,A,$,B,!0),X.push(U);continue}if(U===null&&Y===!1){X.push(U);continue}if(U?.constructor?.name==="Binary"&&U.sub_type===4&&typeof U.toUUID==="function")Z=String(U.toUUID());else if(U?.constructor?.name==="Buffer"&&U._subtype===4&&typeof U.toUUID==="function")Z=String(U.toUUID());else Z=String(U);if(G=A[Z],B.clone&&G!=null)if(B.lean){let H=kZ1.get(G);G=vX0(G),kZ1.set(G,H)}else G=G.constructor.hydrate(G._doc);if(J)if(G)if(Y){let H=$[Z];if(B[Dq])X.push(G);else X[H]=G}else X.push(G);else if(U!=null&&U[hX0]!=null)X.push(U);else X.push(B.retainNullValues||D?null:U);else X[z]=G||null}if(F.length=0,X.length)X.forEach(function(H,K){F[K]=H})}});var Pf=Q((jM0,fZ1)=>{fZ1.exports=Gq;/*!
 * ignore
 */function Gq(F,A){if(F.virtuals[A])return{virtual:F.virtuals[A],path:void 0};let $=A.split("."),B="",J="";for(let X=0;X<$.length;++X){if(B+=(B.length>0?".":"")+$[X],F.virtuals[B]){if(X===$.length-1)return{virtual:F.virtuals[B],path:J};continue}if(F.nested[B])continue;if(F.paths[B]&&F.paths[B].schema){F=F.paths[B].schema;let Y=$.slice(X+1).join(".");if(F.virtuals[Y]){if(X===$.length-2)return{virtual:F.virtuals[Y],nestedSchemaPath:[J,B].filter((D)=>!!D).join(".")};continue}if(X+1<$.length&&F.discriminators)for(let D of Object.keys(F.discriminators)){let G=Gq(F.discriminators[D],Y);if(G!=null){let Z=[J,B,G.nestedSchemaPath].filter((U)=>!!U).join(".");return{virtual:G.virtual,nestedSchemaPath:Z}}}J+=(J.length>0?".":"")+B,B="";continue}else if(F.paths[B]?.$isSchemaMap&&F.paths[B].$__schemaType?.schema){F=F.paths[B].$__schemaType.schema,++X;let Y=$.slice(X+1).join(".");if(F.virtuals[Y]){if(X===$.length-2)return{virtual:F.virtuals[Y],nestedSchemaPath:[J,B,"$*"].filter((D)=>!!D).join(".")};continue}if(X+1<$.length&&F.discriminators)for(let D of Object.keys(F.discriminators)){let G=Gq(F.discriminators[D],Y);if(G!=null){let Z=[J,B,G.nestedSchemaPath,"$*"].filter((U)=>!!U).join(".");return{virtual:G.virtual,nestedSchemaPath:Z}}}J+=(J.length>0?".":"")+"$*"+B,B=""}if(F.discriminators)for(let Y of Object.keys(F.discriminators)){let D=Gq(F.discriminators[Y],A);if(D)return D}return null}}});var bZ1=Q((Zq,xZ1)=>{(function(F,A){typeof Zq==="object"&&typeof xZ1<"u"?A(Zq):typeof define==="function"&&define.amd?define(["exports"],A):(F=typeof globalThis<"u"?globalThis:F||self,A(F.sift={}))})(Zq,function(F){var A=function(C,R){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,d){T.__proto__=d}||function(T,d){for(var J1 in d)if(Object.prototype.hasOwnProperty.call(d,J1))T[J1]=d[J1]},A(C,R)};function $(C,R){if(typeof R!=="function"&&R!==null)throw TypeError("Class extends value "+String(R)+" is not a constructor or null");A(C,R);function T(){this.constructor=C}C.prototype=R===null?Object.create(R):(T.prototype=R.prototype,new T)}typeof SuppressedError==="function"&&SuppressedError;var B=function(C){var R="[object "+C+"]";return function(T){return J(T)===R}},J=function(C){return Object.prototype.toString.call(C)},X=function(C){if(C instanceof Date)return C.getTime();else if(D(C))return C.map(X);else if(C&&typeof C.toJSON==="function")return C.toJSON();return C},Y=function(C){return C==null?null:C},D=B("Array"),G=B("Object"),Z=B("Function"),U=function(C,R){return C.hasOwnProperty(R)&&!Z(C[R])},z=function(C){return C&&(C.constructor===Object||C.constructor===Array||C.constructor.toString()==="function Object() { [native code] }"||C.constructor.toString()==="function Array() { [native code] }")&&!C.toJSON},W=function(C,R){if(C==null&&C==R)return!0;if(C===R)return!0;if(Object.prototype.toString.call(C)!==Object.prototype.toString.call(R))return!1;if(D(C)){if(C.length!==R.length)return!1;for(var T=0,d=C.length;T<d;T++)if(!W(C[T],R[T]))return!1;return!0}else if(G(C)){if(Object.keys(C).length!==Object.keys(R).length)return!1;for(var J1 in C)if(!W(C[J1],R[J1]))return!1;return!0}return!1},H=function(C,R,T,d,J1,V1){var u1=R[d];if(D(C)&&isNaN(Number(u1))&&!U(C,u1)){for(var o1=0,u4=C.length;o1<u4;o1++)if(!H(C[o1],R,T,d,o1,C))return!1}if(d===R.length||C==null)return T(C,J1,V1,d===0,d===R.length);return H(C[u1],R,T,d+1,u1,C)},K=function(){function C(R,T,d,J1){this.params=R,this.owneryQuery=T,this.options=d,this.name=J1,this.init()}return C.prototype.init=function(){},C.prototype.reset=function(){this.done=!1,this.keep=!1},C}(),q=function(C){$(R,C);function R(T,d,J1,V1){var u1=C.call(this,T,d,J1)||this;return u1.children=V1,u1}return R.prototype.reset=function(){this.keep=!1,this.done=!1;for(var T=0,d=this.children.length;T<d;T++)this.children[T].reset()},R.prototype.childrenNext=function(T,d,J1,V1,u1){var o1=!0,u4=!0;for(var i3=0,u2=this.children.length;i3<u2;i3++){var V5=this.children[i3];if(!V5.done)V5.next(T,d,J1,V1,u1);if(!V5.keep)u4=!1;if(V5.done){if(!V5.keep)break}else o1=!1}this.done=o1,this.keep=u4},R}(K),V=function(C){$(R,C);function R(T,d,J1,V1,u1){var o1=C.call(this,T,d,J1,V1)||this;return o1.name=u1,o1}return R}(q),E=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.next=function(T,d,J1,V1){this.childrenNext(T,d,J1,V1)},R}(q),L=function(C){$(R,C);function R(T,d,J1,V1,u1){var o1=C.call(this,d,J1,V1,u1)||this;return o1.keyPath=T,o1.propop=!0,o1._nextNestedValue=function(u4,i3,u2,V5,Sz1){return o1.childrenNext(u4,i3,u2,V5,Sz1),!o1.done},o1}return R.prototype.next=function(T,d,J1){H(T,this.keyPath,this._nextNestedValue,0,d,J1)},R}(q),w=function(C,R){if(C instanceof Function)return C;if(C instanceof RegExp)return function(d){var J1=typeof d==="string"&&C.test(d);return C.lastIndex=0,J1};var T=X(C);return function(d){return R(T,X(d))}},I=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.init=function(){this._test=w(this.params,this.options.compare)},R.prototype.next=function(T,d,J1){if(!Array.isArray(J1)||J1.hasOwnProperty(d)){if(this._test(T,d,J1))this.done=!0,this.keep=!0}},R}(K),P=function(C,R,T){return new I(C,R,T)},M=function(C){return function(R,T,d,J1){return C(R,T,d,J1)}},u=function(C){return M(function(R,T,d,J1){var V1=typeof X(R),u1=C(R);return new I(function(o1){var u4=Y(o1);return typeof X(u4)===V1&&u1(u4)},T,d,J1)})},g=function(C,R,T,d){var J1=d.operations[C];if(!J1)S(C);return J1(R,T,d,C)},S=function(C){throw Error("Unsupported operation: ".concat(C))},O=function(C,R){for(var T in C)if(R.operations.hasOwnProperty(T)||T.charAt(0)==="$")return!0;return!1},p=function(C,R,T,d,J1){if(O(R,J1)){var V1=r(R,T,J1),u1=V1[0],o1=V1[1];if(o1.length)throw Error("Property queries must contain only operations, or exact objects.");return new L(C,R,d,J1,u1)}return new L(C,R,d,J1,[new I(R,d,J1)])},m=function(C,R,T){if(R===void 0)R=null;var d=T===void 0?{}:T,J1=d.compare,V1=d.operations,u1={compare:J1||W,operations:Object.assign({},V1||{})},o1=r(C,null,u1),u4=o1[0],i3=o1[1],u2=[];if(u4.length)u2.push(new L([],C,R,u1,u4));if(u2.push.apply(u2,i3),u2.length===1)return u2[0];return new E(C,R,u1,u2)},r=function(C,R,T){var d=[],J1=[];if(!z(C))return d.push(new I(C,C,T)),[d,J1];for(var V1 in C)if(T.operations.hasOwnProperty(V1)){var u1=g(V1,C[V1],C,T);if(u1){if(!u1.propop&&R&&!T.operations[R])throw Error("Malformed query. ".concat(V1," cannot be matched against property."))}if(u1!=null)d.push(u1)}else if(V1.charAt(0)==="$")S(V1);else J1.push(p(V1.split("."),C[V1],V1,C,T));return[d,J1]},w1=function(C){return function(R,T,d){return C.reset(),C.next(R,T,d),C.keep}},u0=function(C,R){if(R===void 0)R={};return w1(m(C,null,R))},w9=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.init=function(){this._test=w(this.params,this.options.compare)},R.prototype.reset=function(){C.prototype.reset.call(this),this.keep=!0},R.prototype.next=function(T){if(this._test(T))this.done=!0,this.keep=!1},R}(K),f0=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw Error("Malformed query. $elemMatch must by an object.");this._queryOperation=m(this.params,this.owneryQuery,this.options)},R.prototype.reset=function(){C.prototype.reset.call(this),this._queryOperation.reset()},R.prototype.next=function(T){if(D(T)){for(var d=0,J1=T.length;d<J1;d++){this._queryOperation.reset();var V1=T[d];this._queryOperation.next(V1,d,T,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},R}(K),m6=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.init=function(){this._queryOperation=m(this.params,this.owneryQuery,this.options)},R.prototype.reset=function(){C.prototype.reset.call(this),this._queryOperation.reset()},R.prototype.next=function(T,d,J1,V1){this._queryOperation.next(T,d,J1,V1),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},R}(K),e6=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.init=function(){},R.prototype.next=function(T){if(D(T)&&T.length===this.params)this.done=!0,this.keep=!0},R}(K),d6=function(C){if(C.length===0)throw Error("$and/$or/$nor must be a nonempty array")},Q0=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!1,T}return R.prototype.init=function(){var T=this;d6(this.params),this._ops=this.params.map(function(d){return m(d,null,T.options)})},R.prototype.reset=function(){this.done=!1,this.keep=!1;for(var T=0,d=this._ops.length;T<d;T++)this._ops[T].reset()},R.prototype.next=function(T,d,J1){var V1=!1,u1=!1;for(var o1=0,u4=this._ops.length;o1<u4;o1++){var i3=this._ops[o1];if(i3.next(T,d,J1),i3.keep){V1=!0,u1=i3.keep;break}}this.keep=u1,this.done=V1},R}(K),b=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!1,T}return R.prototype.next=function(T,d,J1){C.prototype.next.call(this,T,d,J1),this.keep=!this.keep},R}(Q0),l=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.init=function(){var T=this,d=Array.isArray(this.params)?this.params:[this.params];this._testers=d.map(function(J1){if(O(J1,T.options))throw Error("cannot nest $ under ".concat(T.name.toLowerCase()));return w(J1,T.options.compare)})},R.prototype.next=function(T,d,J1){var V1=!1,u1=!1;for(var o1=0,u4=this._testers.length;o1<u4;o1++){var i3=this._testers[o1];if(i3(T)){V1=!0,u1=!0;break}}this.keep=u1,this.done=V1},R}(K),N=function(C){$(R,C);function R(T,d,J1,V1){var u1=C.call(this,T,d,J1,V1)||this;return u1.propop=!0,u1._in=new l(T,d,J1,V1),u1}return R.prototype.next=function(T,d,J1,V1){if(this._in.next(T,d,J1),D(J1)&&!V1){if(this._in.keep)this.keep=!1,this.done=!0;else if(d==J1.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},R.prototype.reset=function(){C.prototype.reset.call(this),this._in.reset()},R}(K),f=function(C){$(R,C);function R(){var T=C!==null&&C.apply(this,arguments)||this;return T.propop=!0,T}return R.prototype.next=function(T,d,J1,V1,u1){if(!u1)this.done=!0,this.keep=!this.params;else if(J1.hasOwnProperty(d)===this.params)this.done=!0,this.keep=!0},R}(K),o=function(C){$(R,C);function R(T,d,J1,V1){var u1=C.call(this,T,d,J1,T.map(function(o1){return m(o1,d,J1)}),V1)||this;return u1.propop=!1,d6(T),u1}return R.prototype.next=function(T,d,J1,V1){this.childrenNext(T,d,J1,V1)},R}(V),Y1=function(C){$(R,C);function R(T,d,J1,V1){var u1=C.call(this,T,d,J1,T.map(function(o1){return m(o1,d,J1)}),V1)||this;return u1.propop=!0,u1}return R.prototype.next=function(T,d,J1,V1){this.childrenNext(T,d,J1,V1)},R}(V),G1=function(C,R,T){return new I(C,R,T)},D1=function(C,R,T,d){return new w9(C,R,T,d)},U1=function(C,R,T,d){return new Q0(C,R,T,d)},L1=function(C,R,T,d){return new b(C,R,T,d)},O1=function(C,R,T,d){return new f0(C,R,T,d)},R1=function(C,R,T,d){return new N(C,R,T,d)},S1=function(C,R,T,d){return new l(C,R,T,d)},p1=u(function(C){return function(R){return R!=null&&R<C}}),C3=u(function(C){return function(R){return R===C||R<=C}}),G4=u(function(C){return function(R){return R!=null&&R>C}}),s7=u(function(C){return function(R){return R===C||R>=C}}),N3=function(C,R,T){var d=C[0],J1=C[1];return new I(function(V1){return X(V1)%d===J1},R,T)},S2=function(C,R,T,d){return new f(C,R,T,d)},A3=function(C,R,T){return new I(new RegExp(C,R.$options),R,T)},Z4=function(C,R,T,d){return new m6(C,R,T,d)},uG={number:function(C){return typeof C==="number"},string:function(C){return typeof C==="string"},bool:function(C){return typeof C==="boolean"},array:function(C){return Array.isArray(C)},null:function(C){return C===null},timestamp:function(C){return C instanceof Date}},Ax=function(C,R,T){return new I(function(d){if(typeof C==="string"){if(!uG[C])throw Error("Type alias does not exist");return uG[C](d)}return d!=null?d instanceof C||d.constructor===C:!1},R,T)},$x=function(C,R,T,d){return new o(C,R,T,d)},Bx=function(C,R,T,d){return new Y1(C,R,T,d)},Jx=function(C,R,T){return new e6(C,R,T,"$size")},Xx=function(){return null},Yx=function(C,R,T){var d;if(Z(C))d=C;else if(!process.env.CSP_ENABLED)d=Function("obj","return "+C);else throw Error('In CSP mode, sift does not support strings in "$where" condition');return new I(function(J1){return d.bind(J1)(J1)},R,T)},kz1=Object.freeze({__proto__:null,$Size:e6,$all:Bx,$and:$x,$elemMatch:O1,$eq:G1,$exists:S2,$gt:G4,$gte:s7,$in:S1,$lt:p1,$lte:C3,$mod:N3,$ne:D1,$nin:R1,$nor:L1,$not:Z4,$options:Xx,$or:U1,$regex:A3,$size:Jx,$type:Ax,$where:Yx}),Dx=function(C,R,T){var d=T===void 0?{}:T,J1=d.compare,V1=d.operations;return m(C,R,{compare:J1,operations:Object.assign({},kz1,V1||{})})},Oz1=function(C,R){if(R===void 0)R={};var T=Dx(C,null,R);return w1(T)};F.$Size=e6,F.$all=Bx,F.$and=$x,F.$elemMatch=O1,F.$eq=G1,F.$exists=S2,F.$gt=G4,F.$gte=s7,F.$in=S1,F.$lt=p1,F.$lte=C3,F.$mod=N3,F.$ne=D1,F.$nin=R1,F.$nor=L1,F.$not=Z4,F.$options=Xx,F.$or=U1,F.$regex=A3,F.$size=Jx,F.$type=Ax,F.$where=Yx,F.EqualsOperation=I,F.createDefaultQueryOperation=Dx,F.createEqualsOperation=P,F.createOperationTester=w1,F.createQueryOperation=m,F.createQueryTester=u0,F.default=Oz1,Object.defineProperty(F,"__esModule",{value:!0})})});var _Z1=Q((MM0,Rf)=>{var gZ1=bZ1();Rf.exports=gZ1.default;Object.assign(Rf.exports,gZ1)});var cZ1=Q((TM0,dZ1)=>{var dX0=BK(),cX0=Yq(),lX0=uZ1(),Uq=V6(),pX0=Pf(),mZ1=EG(),yZ1=oH(),iX0=IO(),jf=V9(),vZ1=_Z1().default,zq=P1(),{populateModelSymbol:aX0}=q1();dZ1.exports=function(A){let $=Object.assign({},Uq(A,"allOptions.options.options"),Uq(A,"allOptions.options")),B=Object.assign({},A.options,$,{justOne:A.justOne,isVirtual:A.isVirtual});B.$nullIfNotFound=A.isVirtual;let J=A.populatedModel,X=[].concat(A.rawIds);A.allIds=[].concat(A.allIds),lX0(A.rawIds,A.rawDocs,A.rawOrder,B);let{docs:Y,rawIds:D,options:G}=A,Z=A.count&&A.isVirtual,U,z=0;function W(H){if(++z,Z)return H;if(H instanceof cX0)return H.val;if(H===void 0)return H;let K=A.allIds[U];if(A.path.endsWith(".$*"))return LG(H,G,B,K);if(A.justOne===!0&&Array.isArray(H)){let q=[];for(let V of H){let E=mZ1.get(V);if(E==null||E===J)q.push(V)}while(H.length>q.length)Array.prototype.pop.apply(H,[]);for(let V=0;V<q.length;++V)H[V]=q[V];return LG(H[0],G,B,K)}else if(A.justOne===!1&&!Array.isArray(H))return LG([H],G,B,K);else if(A.justOne===!0&&!Array.isArray(H)&&Array.isArray(K))return LG(H,G,B,H==null?H:K[z-1]);return LG(H,G,B,K)}for(U=0;U<Y.length;++U){z=0;let H=A.path.endsWith(".$*")?A.path.slice(0,-3):A.path,K=jf.get(H,Y[U],yZ1);if(K==null&&!pX0(A.originalModel.schema,H))continue;let q;if(Z)q=nX0(D[U]);else if(Array.isArray(A.match))q=Array.isArray(D[U])?D[U].filter((P)=>P==null||vZ1(A.match[U])(P)):[D[U]].filter((P)=>P==null||vZ1(A.match[U])(P))[0];else q=D[U];let V=A.originalModel.schema,E=Uq(Y[U],"$__",null)!=null,L=E?K instanceof Map:zq.isPOJO(K);if(L=L&&Uq(V._getSchema(H),"$isSchemaMap"),!A.isVirtual&&L){let P=K instanceof Map?Array.from(K.keys()):Object.keys(K);q=q.reduce((M,u,g)=>{return M.set(P[g],u),M},new Map)}if(E&&Array.isArray(q)){for(let P of q)if(P!=null&&P.$__!=null)P.$__.parent=Y[U]}else if(E&&q!=null&&q.$__!=null)q.$__.parent=Y[U];if(A.isVirtual&&E){if(Y[U].$populated(H,A.justOne?X[0]:X,A.allOptions),Array.isArray(q))q=q.map((P)=>P==null?void 0:P);jf.set(H,q,Y[U],function(M,u,g){if(arguments.length>=3)return M[u]=g,M[u];if(M instanceof Map&&u==="$*")return[...M.values()];return M[u]},W,!1);continue}let w=H.split("."),I=Y[U];for(let P=0;P<w.length-1;++P){if(Array.isArray(I)&&!zq.isArrayIndex(w[P]))break;if(w[P]==="$*")break;if(I[w[P]]==null){let M=w.slice(0,P+1).join("."),u=V._getSchema(M);if(q==null&&u!=null&&u.$isMongooseArray)break;I[w[P]]={}}if(I=I[w[P]],typeof I!=="object")break}if(Y[U].$__){if(A.allOptions.options[aX0]=A.allOptions.model,Y[U].$populated(H,A.unpopulatedValues[U],A.allOptions.options),q!=null&&q.$__!=null)q.$__.wasPopulated={value:A.unpopulatedValues[U]};if(q instanceof Map&&!q.$isMongooseMap)q=new dX0(q,H,Y[U],Y[U].schema.path(H).$__schemaType)}if(jf.set(H,q,Y[U],yZ1,W,!1),Y[U].$__)iX0(Y[U],[A.allOptions.options])}};function nX0(F){if(Array.isArray(F)){if(F.some((A)=>Array.isArray(A)||A===null))return F.map((A)=>{if(A==null)return 0;if(Array.isArray(A))return A.filter(($)=>$!=null).length;return 1});return F.filter((A)=>A!=null).length}return F==null?0:1}function LG(F,A,$,B){let J=typeof $.transform==="function",X=J?$.transform:(Y)=>Y;if(Array.isArray(F)){let Y=[],D=F.length;for(let U=0;U<D;++U){let z=F[U],W=Array.isArray(B)?B[U]:B;if(!Mf(z)&&(!$.retainNullValues||z!=null)&&!J)continue;else if(!$.retainNullValues&&z==null)continue;else if(J)z=X(Mf(z)?z:null,W);if(hZ1(z,A),Y.push(z),A.originalLimit&&Y.length>=A.originalLimit)break}let G=Y.length;while(F.length>G)Array.prototype.pop.apply(F,[]);let Z=0;if(zq.isMongooseArray(F))for(Z=0;Z<G;++Z)F.set(Z,Y[Z],!0);else for(Z=0;Z<G;++Z)F[Z]=Y[Z];return F}if(Mf(F)||zq.isPOJO(F))return hZ1(F,A),X(F,B);if(F instanceof Map)return F;if($.justOne===!1)return[];return F==null?X(F,B):X(null,B)}function hZ1(F,A){if(F!=null&&A.excludeId)if(typeof F.$__setValue==="function")delete F._doc._id;else delete F._id}function Mf(F){if(F==null)return!1;return Array.isArray(F)||F.$isMongooseMap||F.$__!=null||mZ1.has(F)}});var aZ1=Q((kM0,iZ1)=>{var rX0=Yq(),tX0=NO(),{trusted:Wq}=XB(),lZ1=oK();iZ1.exports=function(A,$,B,J,X){let Y=sX0($);if(B.size===1){let D=Array.from(B)[0],G=J.schema.path(D);if(D!=="_id"||!Y._id)A=pZ1(A,G,X),Y[D]=Wq({$in:A});else if(D==="_id"&&Y._id){let U=lZ1(Y[D])?Y[D]:{$eq:Y[D]};Y[D]={...Wq({$in:A}),...U}}let Z=tX0(D);for(let U=0;U<Z.length-1;++U){let z=Z[U];if(Y[z]!=null&&Y[z].$elemMatch!=null){Y[z].$elemMatch[D.slice(z.length+1)]=Wq({$in:A}),delete Y[D];break}}}else{let D=[];if(Array.isArray(Y.$or))Y.$and=[{$or:Y.$or},{$or:D}],delete Y.$or;else Y.$or=D;for(let G of B)if(G!=="_id"||!Y._id){let Z=J.schema.path(G);A=pZ1(A,Z,X),D.push({[G]:{$in:A}})}else if(G==="_id"&&Y._id){let Z=lZ1(Y[G])?Y[G]:{$eq:Y[G]};Y[G]={...Wq({$in:A}),...Z}}}return Y};function pZ1(F,A,$){if(F=F.filter((B)=>!(B instanceof rX0)),!$)return F;return F.filter((B)=>{try{return A.cast(B),!0}catch(J){return!1}})}function sX0(F){if(Array.isArray(F)){if(F.length>1)return{$or:[].concat(F.map((A)=>Object.assign({},A)))};return Object.assign({},F[0])}return Object.assign({},F)}});var sZ1=Q((OM0,tZ1)=>{/*!
 * ignore
 */var nZ1=HB(),oX0=V6(),eX0=c9(),rZ1=EG(),vB=V9(),FY0=q1().populateModelSymbol;tZ1.exports=function F(A,$,B,J){let X=$.path(J),Y=B;if(X)return X;let D=$.discriminatorMapping&&$.discriminatorMapping.key;if(D&&A!=null){if(B!=null&&B[D]!=null){let U=eX0(A.discriminators,B[D]);$=U?U.schema:$}else if(A.discriminators!=null)return Object.keys(A.discriminators).reduce((U,z)=>{let W=A.discriminators[z];return U.concat(F(W,W.schema,null,J))},[])}function G(U,z,W,H){let K=U.length+1,q,V;while(K--){if(V=U.slice(0,K).join("."),q=z.path(V),q==null)continue;if(q.caster){if(q.caster instanceof nZ1)return q.caster;let w=null;if(q.schema!=null&&q.schema.discriminators!=null){let I=q.schema.discriminators,P=V+"."+q.schema.options.discriminatorKey,M=W?vB.get(P,W)||[]:[];w=Object.keys(I).reduce(function(u,g){let S=I[g].discriminatorMapping.value;if(B==null||M.indexOf(g)!==-1||M.indexOf(S)!==-1)u.push(I[g]);return u},[])}if(K!==U.length&&q.schema){let I;if(U[K]==="$"){if(K+1===U.length)return q;if(I=G(U.slice(K+1),z,W?vB.get(V,W):null,H.concat(U.slice(0,K))),I)I.$parentSchemaDocArray=I.$parentSchemaDocArray||(q.schema.$isSingleNested?null:q);return I}if(w!=null&&w.length>0){I=[];for(let P of w){let M=G(U.slice(K),P,W?vB.get(V,W):null,H.concat(U.slice(0,K)));if(M!=null){if(M.$parentSchemaDocArray=M.$parentSchemaDocArray||(q.schema.$isSingleNested?null:q),M.$parentSchemaDocArray)I.$parentSchemaDocArray=M.$parentSchemaDocArray;I.push(M)}}return I}else{if(I=G(U.slice(K),q.schema,W?vB.get(V,W):null,H.concat(U.slice(0,K))),I)I.$parentSchemaDocArray=I.$parentSchemaDocArray||(q.schema.$isSingleNested?null:q);return I}}else if(K!==U.length&&q.$isMongooseArray&&q.casterConstructor.$isMongooseArray){let I=q;while(I.$isMongooseArray&&!I.$isMongooseDocumentArray)I=I.casterConstructor;let P=G(U.slice(K),I.schema,null,H.concat(U.slice(0,K)));if(P!=null)return P;if(I.schema.discriminators){let M=[];for(let u of Object.keys(I.schema.discriminators)){let g=I.schema.discriminators[u]||I.schema,S=G(U.slice(K),g,null,H.concat(U.slice(0,K)));if(S!=null)M.push(S)}if(M.length>0)return M}}}else if(q.$isSchemaMap&&q.$__schemaType instanceof nZ1)return q.$__schemaType;let E=H.concat([V]).join(".");if(Y!=null&&Y.$__&&Y.$populated(E,!0)&&K<U.length){let w=Y.$populated(E,!0).options[FY0];if(w!=null)return G(U.slice(K),w.schema,W?vB.get(V,W):null,H.concat(U.slice(0,K)))}let L=oX0(Y,V);if(L!=null){let w=Array.isArray(L)&&L.length>0?rZ1.get(L[0]):rZ1.get(L),I=w!=null?w.schema:null;if(I!=null){let P=G(U.slice(K),I,W?vB.get(V,W):null,H.concat(U.slice(0,K)));if(P!=null)return P.$parentSchemaDocArray=P.$parentSchemaDocArray||(I.$isSingleNested?null:I),P}}return q}}let Z=J.split(".");for(let U=0;U<Z.length;++U)if(Z[U]==="$")Z[U]="0";return G(Z,$,B,[])}});var BU1=Q((SM0,$U1)=>{var ff=_3(),AY0=Yq(),$Y0=Z6(),a9=V6(),BY0=c9(),JY0=E3(),oZ1=sZ1(),XY0=Pf(),wG=oH(),iF=V9(),Hq=FS(),e4=P1(),Of=q1().modelSymbol,Tf=q1().populateModelSymbol,Sf=SF().schemaMixedSymbol,YY0=DO();$U1.exports=function(A,$,B){let J,X=$.length,Y=[],D=B.model&&B.model.modelName||B.model,G,Z,U,z={},W=A.schema;if(B._localModel!=null&&B._localModel.schema.nested[B.path])return[];let H=XY0(A.schema,B.path);if((H==null?null:H.virtual)!=null)return DY0(A,$,B,H);let q=oZ1(A,W,null,B.path);if(q=Array.isArray(q)?q:[q].filter((L)=>L!=null),!(B.strictPopulate===!1||B.options?.strictPopulate===!1)&&q.length===0&&B._localModel!=null)return new YY0(B._fullPath||B.path);for(let L=0;L<X;L++){J=$[L];let w=null;if(J.$__!=null&&J.populated(B.path)){if((B.forceRepopulate!=null?B.forceRepopulate:J.constructor.base.options.forceRepopulate)===!1)continue}let I=J!=null&&J.$__!=null?J.$__schema:W;if(G=oZ1(A,I,J,B.path),G!=null&&G.$isMongooseDocumentArray&&G.options.ref==null&&G.options.refPath==null)continue;if(G&&G.$parentSchemaDocArray&&a9(B,"options.sort")!=null)return new ff("Cannot populate with `sort` on path "+B.path+" because it is a subproperty of a document array");U=null;let M=!1,u=null,g=null,S=null;if(G!=null&&G.instance==="Embedded"){if(G.options.ref){let f0={localField:B.path+"._id",foreignField:"_id",justOne:!0},m6=E(J,G,D,A),e6=iF.get(B.path,J),d6=iF.get("_id",e6);uf(A,Y,z,m6.modelNames,B,f0,d6,J,g,e6)}continue}if(Array.isArray(G)){let f0=G;for(let m6 of f0){let e6,d6;try{d6=E(J,m6,D,A),e6=d6.modelNames,M=M||d6.isRefPath,u=u||d6.refPath,w=d6.justOne}catch(Q0){return Q0}if(M&&!d6.isRefPath)continue;if(!e6)continue;U=U||[];for(let Q0 of e6)if(U.indexOf(Q0)===-1)U.push(Q0)}}else{try{let f0=E(J,G,D,A);if(U=f0.modelNames,M=f0.isRefPath,u=u||f0.refPath,w=f0.justOne,g=a9(G,"options.populate",null),M)S=U,U=Array.from(new Set(U))}catch(f0){return f0}if(!U)continue}let O={},p=B.path,m="_id";if("justOne"in B&&B.justOne!==void 0)w=B.justOne;else if(G&&!G[Sf]){if(B.path.endsWith("."+G.path)||B.path===G.path)w=Array.isArray(G)?G.every((f0)=>!f0.$isMongooseArray):!G.$isMongooseArray}if(!U)continue;O.isVirtual=!1,O.justOne=w,O.localField=p,O.foreignField=m;let r=FU1(J,p,A,B,null,G),w1=String(e4.getValue(m,J));B._docs[w1]=Array.isArray(r)?r.slice():r;let u0=a9(B,"match",null),w9=typeof u0==="function";if(w9)u0=u0.call(J,J);if(bf(u0),O.match=u0,O.hasMatchFunction=w9,O.isRefPath=M,O.modelNamesInOrder=S,M)U=GY0(J,W,O,B,u,r)||U;try{uf(A,Y,z,U,B,O,r,J,g)}catch(f0){return f0}}return Y;function E(L,w,I,P){let M,u=!1,g=null,S=w;if(w&&w.instance==="Array")w=w.caster;if(w&&w.$isSchemaMap)w=w.$__schemaType;let O=w&&w.options&&w.options.ref;if(Z=w&&w.options&&w.options.refPath,w!=null&&w[Sf]&&!O&&!Z&&!I)return{modelNames:null};if(I)M=[I];else if(Z!=null){if(typeof Z==="function"){let p=B.path.slice(0,B.path.length-w.path.length-1),m=iF.get(p,L,wG),r=Array.isArray(m)?e4.array.flatten(m):m?[m]:[];M=new Set;for(let w1 of r)Z=Z.call(w1,w1,B.path),Hq(Z,L,B.path,W,B._queryProjection).forEach((u0)=>M.add(u0));M=Array.from(M)}else M=Hq(Z,L,B.path,W,B._queryProjection);u=!0}else{let p,m,r,w1,u0=P,w9=P.schema.options.discriminatorKey;if(!w&&w9&&(w1=e4.getValue(w9,L))){let f0=BY0(P.discriminators,w1)||P;if(f0!=null)u0=f0;else try{u0=xf(P.db,w1)}catch(m6){return m6}if(r=u0.schema._getSchema(B.path),r&&r.caster)r=r.caster}else r=w;if(S&&S.path.endsWith(".$*"))g=!S.$isMongooseArray&&!S._arrayPath;else if(r!=null)g=!r.$isMongooseArray&&!r._arrayPath;if((p=a9(r,"options.ref"))!=null)if(r!=null&&typeof p==="function"&&B.path.endsWith("."+r.path)){M=new Set;let f0=B.path.slice(0,B.path.length-r.path.length-1),m6=iF.get(f0,L,wG),e6=Array.isArray(m6)?e4.array.flatten(m6):m6?[m6]:[];for(let d6 of e6)M.add(kf(p,d6));if(e6.length===0)M=[kf(p,L)];else M=Array.from(M)}else p=kf(p,L),M=[p];else if((r=a9(w,"options.refPath"))!=null)if(u=!0,typeof m==="function"){let f0=B.path.slice(0,B.path.length-r.path.length-1),m6=iF.get(f0,L,wG),e6=Array.isArray(m6)?e4.array.flatten(m6):m6?[m6]:[];M=new Set;for(let d6 of e6)m=m.call(d6,d6,B.path),Hq(m,L,B.path,W,B._queryProjection).forEach((Q0)=>M.add(Q0));M=Array.from(M)}else M=Hq(m,L,B.path,W,B._queryProjection)}if(!M)if(B._localModel==null)M=[P.modelName];else return{modelNames:M,justOne:g,isRefPath:u,refPath:Z};if(!Array.isArray(M))M=[M];return{modelNames:M,justOne:g,isRefPath:u,refPath:Z}}};/*!
 * ignore
 */function DY0(F,A,$,B){let J=[],X={},Y=B.virtual;for(let D of A){let G=null,Z={},U,z=B.nestedSchemaPath?B.nestedSchemaPath+".":"";if(typeof $.localField==="string")U=$.localField;else if(typeof Y.options.localField==="function")U=z+Y.options.localField.call(D,D);else if(Array.isArray(Y.options.localField))U=Y.options.localField.map((L)=>z+L);else U=z+Y.options.localField;if(Z.count=Y.options.count,Y.options.skip!=null&&!$.hasOwnProperty("skip"))$.skip=Y.options.skip;if(Y.options.limit!=null&&!$.hasOwnProperty("limit"))$.limit=Y.options.limit;if(Y.options.perDocumentLimit!=null&&!$.hasOwnProperty("perDocumentLimit"))$.perDocumentLimit=Y.options.perDocumentLimit;let W=Y.options.foreignField;if(!U||!W)return new ff(`Cannot populate virtual \`${$.path}\` on model \`${F.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof U==="function")U=U.call(D,D);if(typeof W==="function")W=W.call(D,D);Z.isRefPath=!1;let H=null;if("justOne"in $&&$.justOne!==void 0)H=$.justOne;if(G=Y._getModelNamesForPopulate(D),Y.options.refPath)H=!!Y.options.justOne,Z.isRefPath=!0;else if(Y.options.ref)H=!!Y.options.justOne;Z.isVirtual=!0,Z.virtual=Y,Z.justOne=H;let K=a9(Z,"virtual.options.match",null)||a9(Z,"virtual.options.options.match",null),q=a9($,"match",null)||K,V=typeof q==="function";if(V)q=q.call(D,D,Z.virtual);if(Array.isArray(U)&&Array.isArray(W)&&U.length===W.length){q=Object.assign({},q);for(let L=1;L<U.length;++L)q[W[L]]=AU1(iF.get(U[L],D,wG),F.schema),V=!0;U=U[0],W=W[0]}Z.localField=U,Z.foreignField=W,Z.match=q,Z.hasMatchFunction=V,bf(q);let E=FU1(D,U,F,$,Y);try{uf(F,J,X,G,$,Z,E,D)}catch(L){return L}}return J}/*!
 * ignore
 */function uf(F,A,$,B,J,X,Y,D,G,Z){let U=J.connection!=null?J.connection:F.db;if(Z=Z===void 0?Y:Z,Array.isArray(Z))Z=e4.cloneArrays(Z);if(B==null)return;let z=e4.array.flatten(B),W=z.length;while(W--){let H=z[W];if(H==null)continue;let K;if(J.model&&J.model[Of])K=J.model;else if(H[Of])K=H,H=K.modelName;else try{K=xf(U,H)}catch(L){if(Y!==void 0)throw L;K=null}let q=Y,V=X.modelNamesInOrder?X.modelNamesInOrder:B;if(X.isRefPath&&Array.isArray(Y)&&Y.length===V.length)q=eZ1(Y,V,H);let E=J.perDocumentLimit==null?a9(J,"options.perDocumentLimit",null):J.perDocumentLimit;if(!$[H]||E!=null){let L={model:K};if(X.isVirtual&&a9(X.virtual,"options.options"))L.options=$Y0(X.virtual.options.options);else if(G!=null)L.options=Object.assign({},G);e4.merge(L,J),J[Tf]=K,L[Tf]=K,$[H]={model:K,options:L,match:X.hasMatchFunction?[X.match]:X.match,docs:[D],ids:[q],allIds:[Y],unpopulatedValues:[Z],localField:new Set([X.localField]),foreignField:new Set([X.foreignField]),justOne:X.justOne,isVirtual:X.isVirtual,virtual:X.virtual,count:X.count,[Tf]:K},A.push($[H])}else if($[H].localField.add(X.localField),$[H].foreignField.add(X.foreignField),$[H].docs.push(D),$[H].ids.push(q),$[H].allIds.push(Y),$[H].unpopulatedValues.push(Z),X.hasMatchFunction)$[H].match.push(X.match)}}function xf(F,A){if(F.models[A]==null&&F._parent!=null)return xf(F._parent,A);return F.model(A)}function eZ1(F,A,$){if(!Array.isArray(A))return A===$?Array.isArray(F)?e4.array.flatten(F):[F]:[];if(Array.isArray(F)&&Array.isArray(A))return F.flatMap((B,J)=>eZ1(B,A[J],$));return[]}/*!
 * ignore
 */function kf(F,A){if(typeof F==="function"&&!F[Of])return F.call(A,A);return F}/*!
 * ignore
 */function FU1(F,A,$,B,J,X){let Y=$.schema._getPathType(A),D=Y==="real"?$.schema.path(A):Y.schema,G=D&&D.getters?D.getters:[];A=D!=null&&D.instance==="Embedded"?A+"._id":A;let Z=a9(B,"options",{}),U="getters"in Z?Z.getters:a9(J,"options.getters",!1);if(G.length!==0&&U){let z=F.$__!=null?F:$.hydrate(F),W=e4.getValue(A,F);if(Array.isArray(W)){let H=e4.getValue(A.split(".").slice(0,-1),z);return W.map((K,q)=>D.applyGetters(K,H[q]))}else return D.applyGetters(W,z)}else return AU1(iF.get(A,F,wG),X)}function AU1(F,A){if(F!=null&&F.$__!=null)return F._doc._id;if(F!=null&&F._id!=null&&(A==null||!A.$isSchemaMap))return F._id;if(Array.isArray(F)){let $=F.__array!=null?F.__array:F;for(let B=0;B<$.length;++B)if($[B]!=null&&$[B].$__!=null)$[B]=$[B]._doc._id;if(e4.isMongooseArray(F)&&F.$schema())return F.$schema()._castForPopulate(F,F.$parent());return[].concat(F)}if(JY0(F)==="Object"&&(A==null||A[Sf]==null)){let $=[];for(let B of Object.keys(F))$.push(F[B]);return $}if(F instanceof Map)return Array.from(F.values());return F}/*!
 * ignore
 */function GY0(F,A,$,B,J,X){if(!$.isRefPath||J==null)return;let Y=J.split("."),D="",G=void 0;for(let Z=0;Z<Y.length;++Z){let U=Y[Z];D=D+(D.length===0?"":".")+U;let z=A.path(D);if(z!=null&&z.$isMongooseArray&&z.caster.discriminators!=null&&Object.keys(z.caster.discriminators).length!==0){let W=e4.getValue(D,F),H=B.path.substring(D.length+1),K=z.caster.schema.options.discriminatorKey;G=[];for(let q of W){let V=e4.getValue(K,q),E=z.caster.discriminators[V],L=E&&E.schema;if(L==null)continue;let w=L.path(H);if(w==null||w.options.refPath==null){let P=e4.getValue($.localField.substring(D.length+1),q);X.forEach((M,u)=>{if(M===P)X[u]=AY0(M)});continue}let I=e4.getValue(Y.slice(Z+1).join("."),q);G.push(I)}}}return G}function bf(F){if(F==null)return;if(typeof F!=="object")return;for(let A of Object.keys(F)){if(A==="$where")throw new ff("Cannot use $where filter with populate() match");if(F[A]!=null&&typeof F[A]==="object")bf(F[A])}}});var XU1=Q((uM0,JU1)=>{var ZY0=V6();JU1.exports=function(A){if(Array.isArray(A)){let B=Object.keys(A[0]);return B.length===1&&B[0]==="_id"&&A[0]._id!=="hashed"}if(typeof A!=="object")return!1;let $=ZY0(A,"key",{});return Object.keys($).length===1&&$.hasOwnProperty("_id")}});var GU1=Q((fM0,DU1)=>{var Kq=V6(),YU1=P1();DU1.exports=function(A,$,B){if(B.textIndexVersion!=null){delete B.key._fts,delete B.key._ftsx;let D={...B.weights,...B.key};if(Object.keys(D).length!==Object.keys(A).length)return!1;for(let G of Object.keys(D)){if(!(G in A))return!1;let Z=D[G];if(Z!==Kq($,"weights."+G)&&!(Z===1&&Kq($,"weights."+G)==null))return!1}if($.default_language!==B.default_language)return B.default_language==="english"&&$.default_language==null;return!0}let J=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let D of J){if(!(D in $)&&!(D in B))continue;if(D==="collation"){if($[D]==null||B[D]==null)return $[D]==null&&B[D]==null;let G=Object.keys($.collation),Z=$.collation,U=B.collation;for(let z of G)if(Kq(Z,z)!==Kq(U,z))return!1}else if(!YU1.deepEqual($[D],B[D]))return!1}let X=Object.keys(A),Y=Object.keys(B.key);if(X.length!==Y.length)return!1;for(let D=0;D<X.length;++D){if(X[D]!==Y[D])return!1;if(!YU1.deepEqual(A[X[D]],B.key[Y[D]]))return!1}return!0}});var UU1=Q((xM0,ZU1)=>{ZU1.exports=function(A,$){if($.timeseries==null)return!1;let{timeField:B,metaField:J}=$.timeseries;if(typeof B!=="string"||typeof J!=="string")return!1;return Object.keys(A.key).length===2&&A.key[B]===1&&A.key[J]===1}});var KU1=Q((bM0,HU1)=>{var UY0=oK();function zY0(F,A){return WU1({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"schema"})}function WY0(F,A){return WU1({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"db"})}HU1.exports={getRelatedSchemaIndexes:zY0,getRelatedDBIndexes:WY0};function WU1({baseModelName:F,discriminatorMapping:A,indexes:$,indexesType:B}){let J=A&&A.key,X=A&&A.value;if(!J)return $;if(Boolean(F))return $.filter((D)=>{let G=zU1(D,B);return G&&G[J]===X});return $.filter((D)=>{let G=zU1(D,B);return!G||!G[J]||UY0(G[J])&&!("$eq"in G[J])})}function zU1(F,A){if(A==="schema"){let $=F[1];return $&&$.partialFilterExpression}return F.partialFilterExpression}});var QU1=Q((gM0,qU1)=>{qU1.exports=HY0;/*!
 * ignore
 */function HY0(F,A,$){let B=0,J=0,X=null;if(A<=0)throw Error("Limit must be positive");if(F.length===0)return $(null,[]);for(let Z=0;Z<F.length&&Z<A;++Z)Y();function Y(){F[J+B](G(J+B)),++B}let D=[];function G(Z){return(U,z)=>{if(--B,++J,X!=null)return;if(U!=null)return X=U,$(X);if(D[Z]=z,J===F.length)return $(null,D);else if(J+B<F.length)Y()}}}});var EU1=Q((_M0,VU1)=>{VU1.exports=function F(A,$,B){if($==null)return;for(let J=0;J<$.length;++J)if(Array.isArray($[J]))F(A,$[J],B+"."+J);else A.push(B+"."+J)}});var NU1=Q((yM0,CU1)=>{var LU1=V6(),wU1=V9(),IU1=Gf();/*!
 * ignore
 */CU1.exports=function(A,$,B){let J=IU1(LU1($,"select",null),!0)||IU1(LU1($,"options.select",null),!0);if(J==null)return;for(let X of A){if(!J.hasOwnProperty("-"+X))continue;for(let Y of B)if(Y.$__!=null)wU1.unset(X,Y._doc);else wU1.unset(X,Y)}}});var Cf=Q((dU1,cU1)=>{/*!
 * Module dependencies.
 */var KY0=Ef(),qY0=vk(),$7=d9(),QY0=VH(),_f=x("events").EventEmitter,hf=MF(),Vq=Qu(),k1=_3(),VY0=RH(),EY0=sk(),qq=Aq(),LY0=$Z1(),yf=D5(),Qq=kF(),SU1=ak(),PU1=rk(),wY0=jH(),IY0=JZ1(),CY0=If(),NY0=$K(),uU1=DZ1(),PY0=UZ1(),RY0=au(),fU1=KZ1(),jY0=QZ1(),xU1=EZ1(),MY0=NZ1(),bU1=nu(),TY0=jZ1(),kY0=cZ1(),OY0=fu(),a7=Z6(),SY0=aZ1(),gU1=Su(),gf=wu(),_U1=SH(),uY0=NK(),vf=fS(),NG=V6(),fY0=E3(),IG=c9(),xY0=BU1(),PG=x9(),mf=R2().internalToObjectOptions,df=XU1(),yU1=GU1(),bY0=UU1(),{getRelatedDBIndexes:gY0,getRelatedSchemaIndexes:_Y0}=KU1(),cf=$S(),yY0=fH(),vY0=EG(),hY0=QU1(),mY0=Qf(),vU1=EU1(),dY0=NU1(),cY0=Pu(),RU1=x("util"),v0=P1(),lY0=CO(),pY0=FO(),iY0=PH(),aF=xu(),nF=Symbol("mongoose#Model#collection"),rF=Symbol("mongoose#Model#db"),hU1=q1().modelSymbol,CG=Symbol("mongoose#Model#subclassed"),{VERSION_INC:Eq,VERSION_WHERE:jU1,VERSION_ALL:aY0}=$7,nY0=Object.assign({},mf,{bson:!0});function t(F,A,$){if(A instanceof yf)throw TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof F==="string")throw TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");$7.call(this,F,A,$)}Object.setPrototypeOf(t.prototype,$7.prototype);t.prototype.$isMongooseModelPrototype=!0;t.prototype.db;t.useConnection=function(A){if(!A)throw Error("Please provide a connection.");if(this.db)delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[rF],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[nF];this.db=A;let $=A.collection(this.collection.collectionName,A.options);return this.prototype.collection=$,this.prototype.$collection=$,this.prototype[nF]=$,this.prototype.db=A,this.prototype[rF]=A,this.collection=$,this.$__collection=$,A.models[this.modelName]=this,this};t.prototype.collection;t.prototype.$__collection;t.prototype.modelName;t.prototype.$where;t.prototype.baseModelName;t.events;t._middleware;/*!
 * ignore
 */function mU1(F,A){if(F.$where==null)return;for(let $ of Object.keys(F.$where))A[$]=F.$where[$]}/*!
 * ignore
 */t.prototype.$__handleSave=function(F,A){let $={};if(bU1(this.$__schema,F),typeof F.writeConcern<"u"){if($.writeConcern={},"w"in F.writeConcern)$.writeConcern.w=F.writeConcern.w;if("j"in F.writeConcern)$.writeConcern.j=F.writeConcern.j;if("wtimeout"in F.writeConcern)$.writeConcern.wtimeout=F.writeConcern.wtimeout}else{if("w"in F)$.w=F.w;if("j"in F)$.j=F.j;if("wtimeout"in F)$.wtimeout=F.wtimeout}if("checkKeys"in F)$.checkKeys=F.checkKeys;let B=this.$session(),J=this[rF].base.transactionAsyncLocalStorage?.getStore();if(B!=null)$.session=B;else if(!F.hasOwnProperty("session")&&J?.session!=null)$.session=J.session;if(this.$isNew){let D=this.toObject(nY0);if((D||{})._id===void 0){PG(function(){A(new k1("document must have an _id before saving"))});return}this.$__version(!0,D),this[nF].insertOne(D,$).then((G)=>A(null,G),(G)=>{hB(this,!0),A(G,null)}),this.$__reset(),hB(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let X=this.$__delta();if(F.pathsToSave)for(let D in X[1].$set)if(F.pathsToSave.includes(D))continue;else if(F.pathsToSave.some((G)=>D.slice(0,G.length)===G&&D.charAt(G.length)==="."))continue;else delete X[1].$set[D];if(X){if(X instanceof k1){A(X);return}let D=this.$__where(X[0]);if(D instanceof k1){A(D);return}mU1(this,D);let G=X[1];if(this.$__schema.options.minimize)for(let Z of Object.values(G)){if(Z==null)continue;for(let U of Object.keys(Z)){if(Z[U]==null||typeof Z[U]!=="object")continue;if(!v0.isPOJO(Z[U]))continue;if(lY0(Z[U]),Object.keys(Z[U]).length===0)delete Z[U],G.$unset=G.$unset||{},G.$unset[U]=1}}this[nF].updateOne(D,G,$).then((Z)=>{if(Z==null)Z={$where:D};else Z.$where=D;A(null,Z)},(Z)=>{this.$__undoReset(),A(Z)})}else{Y.call(this);return}this.$__.modifiedPaths=this.modifiedPaths().concat(Object.keys(this.$__.activePaths.getStatePaths("default"))),this.$__reset(),hB(this,!1);function Y(){let D=Object.assign({},F,$),G=this.$__where(),Z=this.$__schema.options.optimisticConcurrency;if(Z&&!Array.isArray(Z)){let U=this.$__schema.options.versionKey,z=this.$__getValue(U);if(z!=null)G[U]=z}RY0(this.$__schema,D),this.constructor.collection.findOne(G,D).then((U)=>{A(null,{$where:G,matchedCount:!U?0:1})}).catch(A)}};/*!
 * ignore
 */t.prototype.$__save=function(F,A){this.$__handleSave(F,($,B)=>{if($)return $=this.$__schema._transformDuplicateKeyError($),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:$},(D)=>{A(D,this)});let J=0;if((F!=null?F.writeConcern!=null?F.writeConcern.w:F.w:0)!==0){if(B!=null)if(Array.isArray(B))J=B.length;else if(B.matchedCount!=null)J=B.matchedCount;else J=B;if(this.$__.version&&!this.$__.inserting){let D=Eq===(Eq&this.$__.version);this.$__.version=void 0;let G=this.$__schema.options.versionKey,Z=this.$__getValue(G)||0;if(J<=0){this.$__undoReset();let U=this.$__.$versionError||new SU1(this,Z,this.$__.modifiedPaths);return A(U,this)}if(D)this.$__setValue(G,Z+1)}if(B!=null&&J<=0)return this.$__undoReset(),$=new QY0(B.$where,this.constructor.modelName,J,B),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:$},(G)=>{A(G,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,J),this.constructor.emit("save",this,J),A(null,this)})};/*!
 * ignore
 */function rY0(F,A,$){let B=F.$__schema.options.versionKey;if(!B)return null;let J=F.$__getValue(B)||0;return new SU1(F,J,A.concat($))}t.prototype.save=async function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new k1("Model.prototype.save() no longer accepts a callback");let $;if(this.$op="save",this.$__.saving)$=new PU1(this);else this.$__.saving=new PU1(this);if(A=new LY0(A),A.hasOwnProperty("session"))this.$session(A.session);if(this.$__.timestamps!=null)A.timestamps=this.$__.timestamps;if(this.$__.$versionError=rY0(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),$)throw this.$__handleReject($),$;return this.$__.saveOptions=A,await new Promise((B,J)=>{this.$__save(A,(X)=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,X!=null)return this.$__handleReject(X),J(X);B()})}),this};t.prototype.$save=t.prototype.save;t.prototype.$__version=function(F,A){let $=this.$__schema.options.versionKey;if(F===!0){if($)cY0(A,$,0),this.$__setValue($,0);return}if($===!1)return;if(!this.$__isSelected($))return;if(jU1===(jU1&this.$__.version)){let B=this.$__getValue($);if(B!=null)F[$]=B}if(Eq===(Eq&this.$__.version))if(NG(A.$set,$,null)!=null)++A.$set[$];else A.$inc=A.$inc||{},A.$inc[$]=1};t.prototype.increment=function(){return this.$__.version=aY0,this};t.prototype.$__where=function(A){if(A||(A={}),!A._id)A._id=this._doc._id;if(this._doc._id===void 0)return new k1("No _id found on document!");return A};t.prototype.deleteOne=function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new k1("Model.prototype.deleteOne() no longer accepts a callback");if(!A)A={};if(A.hasOwnProperty("session"))this.$session(A.session);let $=this,B=this.$__where();if(B instanceof Error)throw B;let J=$.constructor.deleteOne(B,A);if(this.$session()!=null){if(!("session"in J.options))J.options.session=this.$session()}return J.pre(async function(){if(await new Promise((Y,D)=>{$.constructor._middleware.execPre("deleteOne",$,[$],(G)=>{if(G)D(G);else Y()})}),$.$where!=null)this.where($.$where)}),J.pre(function(Y){vf($.$getAllSubdocs(),(D,G)=>{D.constructor._middleware.execPre("deleteOne",D,[D],G)},Y)}),J.pre(function(Y){if($.$__.isDeleted)return Y(hf.skipWrappedFunction());return Y()}),J.post(function(Y){vf($.$getAllSubdocs(),(D,G)=>{D.constructor._middleware.execPost("deleteOne",D,[D],{},G)},Y)}),J.post(function(Y){$.constructor._middleware.execPost("deleteOne",$,[$],{},Y)}),J};t.prototype.$model=function(A){if(arguments.length===0)return this.constructor;return this[rF].model(A)};t.prototype.model=t.prototype.$model;t.exists=function(A,$){if(y1(this,"exists"),typeof arguments[2]==="function")throw new k1("Model.exists() no longer accepts a callback");return this.findOne(A).select({_id:1}).lean().setOptions($)};t.discriminator=function(F,A,$){let B;if(typeof F==="function"){if(B=F,F=v0.getFunctionName(B),!(B.prototype instanceof t))throw new k1("The provided class "+F+" must extend Model")}$=$||{};let J=v0.isPOJO($)?$.value:$,X=typeof $.clone==="boolean"?$.clone:!0,Y=typeof $.mergePlugins==="boolean"?$.mergePlugins:!0,D=typeof $.overwriteModels==="boolean"?$.overwriteModels:!1;if(y1(this,"discriminator"),v0.isObject(A)&&!A.instanceOfSchema)A=new yf(A);if(A instanceof yf&&X)A=A.clone();if(A=uY0(this,F,A,J,Y,$.mergeHooks,D),this.db.models[F]&&!A.options.overwriteModels&&!D)throw new EY0(F);A.$isRootDiscriminator=!0,A.$globalPluginsApplied=!0,B=this.db.model(B||F,A,this.$__collection.name),this.discriminators[F]=B;let G=this.discriminators[F];if(Object.setPrototypeOf(G.prototype,this.prototype),Object.defineProperty(G,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),uU1(G,A),xU1(G,A),this[CG]!=null)for(let Z of this[CG])Z.discriminators=Z.discriminators||{},Z.discriminators[F]=B.__subclass(B.db,A,Z.collection.name);return G};function y1(F,A){if(F==null||F===global)throw new k1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+A+"()` where `MyModel` is a Mongoose model.");else if(F[hU1]==null)throw new k1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+A+"()`")}/*!
 * Give the constructor the ability to emit events.
 */for(let F in _f.prototype)t[F]=_f.prototype[F];t.init=function(){if(y1(this,"init"),typeof arguments[0]==="function")throw new k1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let A=this.db,$=async()=>{if(!v0.getOption("autoIndex",this.schema.options,A.config,A.base.options))return;return await this.ensureIndexes({_automatic:!0})},B=async()=>{if(!v0.getOption("autoSearchIndex",this.schema.options,A.config,A.base.options))return;return await this.createSearchIndexes()},J=async()=>{let D=v0.getOption("autoCreate",this.schema.options,A.config);if(D==null)await A._waitForConnect(!0),D=v0.getOption("autoCreate",this.schema.options,A.config,A.base.options);if(!D)return;return await this.createCollection()};this.$init=J().then(()=>$()).then(()=>B());let X=this.$init.catch,Y=this;return this.$init.catch=function(){return Y.$caught=!0,X.apply(Y.$init,arguments)},this.$init};t.createCollection=async function(A){if(y1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new k1("Model.createCollection() no longer accepts a callback");let $=await new Promise((G,Z)=>{this.hooks.execPre("createCollection",this,[A],(U)=>{if(U!=null){if(U instanceof hf.skipWrappedFunction)return G(!0);return Z(U)}G()})}),B=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;if(B!=null)A=Object.assign({},B,A);let J=this&&this.schema&&this.schema.options&&this.schema.options.collation;if(J!=null)A=Object.assign({collation:J},A);let X=this&&this.schema&&this.schema.options&&this.schema.options.capped;if(X!=null){if(typeof X==="number")A=Object.assign({capped:!0,size:X},A);else if(typeof X==="object")A=Object.assign({capped:!0},X,A)}let Y=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;if(Y!=null){if(A=Object.assign({timeseries:Y},A),A.expireAfterSeconds!=null);else if(A.expires!=null)v0.expires(A);else if(this.schema.options.expireAfterSeconds!=null)A.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)A.expires=this.schema.options.expires,v0.expires(A)}let D=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;if(D!=null)A=Object.assign({clusteredIndex:{...D,unique:!0}},A);try{if(!$)await this.db.createCollection(this.$__collection.collectionName,A)}catch(G){if(G!=null&&(G.name!=="MongoServerError"||G.code!==48))await new Promise((Z,U)=>{let z={error:G};this.hooks.execPost("createCollection",this,[null],z,(W)=>{if(W!=null)return U(W);Z()})})}return await new Promise((G,Z)=>{this.hooks.execPost("createCollection",this,[this.$__collection],(U)=>{if(U!=null)return Z(U);G()})}),this.$__collection};t.syncIndexes=async function(A){if(y1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new k1("Model.syncIndexes() no longer accepts a callback");if(A?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(X){if(X!=null&&(X.name!=="MongoServerError"||X.code!==48))throw X}let B=await this.diffIndexes({indexOptionsToCreate:!0}),J=await this.cleanIndexes({...A,toDrop:B.toDrop});return await this.createIndexes({...A,toCreate:B.toCreate}),J};t.createSearchIndex=async function(A){return y1(this,"createSearchIndex"),await this.$__collection.createSearchIndex(A)};t.updateSearchIndex=async function(A,$){return y1(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(A,$)};t.dropSearchIndex=async function(A){return y1(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(A)};t.listSearchIndexes=async function(A){return y1(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(A)).toArray()};t.diffIndexes=async function(A){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new k1("Model.syncIndexes() no longer accepts a callback");let $=this,B=await $.listIndexes().catch((G)=>{if(G.codeName=="NamespaceNotFound")return;throw G});if(B===void 0)B=[];B=gY0($,B);let J=$.schema,X=_Y0($,J.indexes()),Y=sY0(J,X,B),D=tY0(J,X,B,Y,A);return{toDrop:Y,toCreate:D}};function tY0(F,A,$,B,J){let X=[],Y=J?.indexOptionsToCreate??!1;for(let[D,G]of A){let Z=!1,U=cf(F,a7(G));for(let z of $){if(df(z))continue;if(yU1(D,U,z)&&!B.includes(z.name)){Z=!0;break}}if(!Z)if(Y)X.push([D,G]);else X.push(D)}return X}function sY0(F,A,$){let B=[];for(let J of $){let X=!1;if(df(J))continue;if(bY0(J,F.options))continue;for(let[Y,D]of A){let G=cf(F,a7(D));if(fU1(Y,G,F.options),yU1(Y,G,J)){X=!0;break}}if(X)continue;B.push(J.name)}return B}t.cleanIndexes=async function(A){if(y1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new k1("Model.cleanIndexes() no longer accepts a callback");let $=this;if(Array.isArray(A&&A.toDrop))return await MU1(A.toDrop,$,A);let B=await $.diffIndexes();return await MU1(B.toDrop,$,A)};async function MU1(F,A,$){if(F.length===0)return[];let B=A.$__collection;if($&&$.hideIndexes)await Promise.all(F.map((J)=>{return A.db.db.command({collMod:B.collectionName,index:{name:J,hidden:!0}})}));else await Promise.all(F.map((J)=>B.dropIndex(J)));return F}t.listIndexes=async function(){if(y1(this,"listIndexes"),typeof arguments[0]==="function")throw new k1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((A)=>{this.$__collection.addQueue(A)});return this.$__collection.listIndexes().toArray()};t.ensureIndexes=async function(A){if(y1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new k1("Model.ensureIndexes() no longer accepts a callback");await new Promise(($,B)=>{oY0(this,A,(J)=>{if(J!=null)return B(J);$()})})};t.createIndexes=async function(A){if(y1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new k1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(A)};/*!
 * ignore
 */function oY0(F,A,$){let B=Array.isArray(A?.toCreate)?A.toCreate:F.schema.indexes(),J;A=A||{};let X=function(z){if(z&&!F.$caught)F.emit("error",z);F.emit("index",z||J),$&&$(z||J)};for(let z of B)if(df(z))v0.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+F.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!B.length){PG(function(){X()});return}let Y=function(z,W,H,K){F.emit("index-single-done",z,W,H,K)},D=function(z,W){F.emit("index-single-start",z,W)},G=F.schema._baseSchema,Z=G?G.indexes():[];PG(function(){if(A._automatic&&!F.collection.collection)F.collection.addQueue(U,[]);else U()});function U(){if(A._automatic){if(F.schema.options.autoIndex===!1||F.schema.options.autoIndex==null&&F.db.config.autoIndex===!1)return X()}let z=B.shift();if(!z)return X();if(A._automatic&&z[1]._autoIndex===!1)return U();if(Z.find((q)=>v0.deepEqual(q,z)))return U();let W=a7(z[0]),H=a7(z[1]);if(delete H._autoIndex,cf(F.schema,H),bU1(F.schema,H),fU1(W,H,F.schema.options),D(W,A),"background"in A)H.background=A.background;let K=null;try{K=F.collection.createIndex(W,H)}catch(q){if(!J)J=q;if(!F.$caught)F.emit("error",q);Y(q,W,H),U();return}K.then((q)=>{Y(null,W,H,q),U()},(q)=>{if(!J)J=q;if(!F.$caught)F.emit("error",q);Y(q,W,H),U()})}}t.createSearchIndexes=async function(){y1(this,"createSearchIndexes");let A=[];for(let $ of this.schema._searchIndexes)A.push(await this.createSearchIndex($));return A};t.schema;t.db;t.collection;t.$__collection;t.base;t.discriminators;t.translateAliases=function(A,$){y1(this,"translateAliases");let B=(J,X)=>{let Y,D=[],G=J.split("."),Z=this.schema;for(let z in G){let W=G[z];if(Z&&Z.aliases[W]){if(Y=Z.aliases[W],$&&Y in A)throw new k1(`Provided object has both field "${W}" and its alias "${Y}"`);D.push(Y)}else Y=W,D.push(W);if(Z&&Z.paths[Y])Z=Z.paths[Y].schema;else Z=null}let U=D.join(".");if(A instanceof Map)A.set(U,X);else A[U]=X;if(U!==J)if(A instanceof Map)A.delete(J);else delete A[J];return A};if(typeof A==="object"){if(A instanceof Map)for(let J of new Map(A))A=B(J[0],J[1]);else for(let J of Object.keys(A))if(A=B(J,A[J]),J[0]==="$")if(Array.isArray(A[J]))for(let X in A[J])A[J][X]=this.translateAliases(A[J][X]);else this.translateAliases(A[J]);return A}else return A};t.deleteOne=function(A,$){if(y1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.prototype.deleteOne() no longer accepts a callback");let B=new this.Query({},{},this,this.$__collection);return B.setOptions($),B.deleteOne(A)};t.deleteMany=function(A,$){if(y1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.deleteMany() no longer accepts a callback");let B=new this.Query({},{},this,this.$__collection);return B.setOptions($),B.deleteMany(A)};t.find=function(A,$,B){if(y1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new k1("Model.find() no longer accepts a callback");let J=new this.Query({},{},this,this.$__collection);return J.select($),J.setOptions(B),J.find(A)};t.findById=function(A,$,B){if(y1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.findById() no longer accepts a callback");return this.findOne({_id:A},$,B)};t.findOne=function(A,$,B){if(y1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.findOne() no longer accepts a callback");let J=new this.Query({},{},this,this.$__collection);return J.select($),J.setOptions(B),J.findOne(A)};t.estimatedDocumentCount=function(A){return y1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(A)};t.countDocuments=function(A,$){if(y1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.countDocuments() no longer accepts a callback");let B=new this.Query({},{},this,this.$__collection);if($!=null)B.setOptions($);return B.countDocuments(A)};t.distinct=function(A,$,B){if(y1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.distinct() no longer accepts a callback");let J=new this.Query({},{},this,this.$__collection);if(B!=null)J.setOptions(B);return J.distinct(A,$)};t.where=function(A,$){y1(this,"where");let B=new this.Query({},{},this,this.$__collection).find({});return B.where.apply(B,arguments)};t.$where=function(){y1(this,"$where");let A=new this.Query({},{},this,this.$__collection).find({});return A.$where.apply(A,arguments)};t.findOneAndUpdate=function(F,A,$){if(y1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new k1("Model.findOneAndUpdate() no longer accepts a callback");let B;if($)B=$.fields||$.projection;A=a7(A,{depopulate:!0,_isNested:!0}),gU1(A,$,this.schema.options.versionKey);let J=new this.Query({},{},this,this.$__collection);return J.select(B),J.findOneAndUpdate(F,A,$)};t.findByIdAndUpdate=function(F,A,$){if(y1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new k1("Model.findByIdAndUpdate() no longer accepts a callback");if(F instanceof $7)F=F._doc._id;return this.findOneAndUpdate.call(this,{_id:F},A,$)};t.findOneAndDelete=function(F,A){if(y1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.findOneAndDelete() no longer accepts a callback");let $;if(A)$=A.select,A.select=void 0;let B=new this.Query({},{},this,this.$__collection);return B.select($),B.findOneAndDelete(F,A)};t.findByIdAndDelete=function(F,A){if(y1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new k1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:F},A)};t.findOneAndReplace=function(F,A,$){if(y1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new k1("Model.findOneAndReplace() no longer accepts a callback");let B;if($)B=$.select,$.select=void 0;let J=new this.Query({},{},this,this.$__collection);return J.select(B),J.findOneAndReplace(F,A,$)};t.create=async function(A,$){if(typeof $==="function"||typeof arguments[2]==="function")throw new k1("Model.create() no longer accepts a callback");y1(this,"create");let B,J=this.schema.options.discriminatorKey;if(Array.isArray(A))B=A,$=$!=null&&typeof $==="object"?$:{};else{let D=arguments[arguments.length-1];if($={},typeof D==="function"||typeof $==="function"||typeof arguments[2]==="function")throw new k1("Model.create() no longer accepts a callback");else if(B=[...arguments],B.length>1&&!D)B.pop();if(B.length===2&&B[0]!=null&&B[1]!=null&&B[0].session==null&&D&&fY0(D.session)==="ClientSession"&&!this.schema.path("session"))v0.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(B.length===0)return Array.isArray(A)?[]:null;let X=[],Y=typeof $.aggregateErrors==="boolean"?!$.aggregateErrors:!0;if(delete $.aggregateErrors,$.session&&!$.ordered&&B.length>1)throw new k1("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if($.ordered){for(let D=0;D<B.length;D++)try{let G=B[D],Z=this.discriminators&&G[J]!=null?this.discriminators[G[J]]||IG(this.discriminators,G[J]):this;if(Z==null)throw new k1(`Discriminator "${G[J]}" not found for model "${this.modelName}"`);let U=G;if(!(U instanceof Z))U=new Z(U);await U.$save($),X.push(U)}catch(G){if(!Y)X.push(G);else throw G}return X}else if(!Y)X=await Promise.allSettled(B.map(async(D)=>{let G=this.discriminators&&D[J]!=null?this.discriminators[D[J]]||IG(this.discriminators,D[J]):this;if(G==null)throw new k1(`Discriminator "${D[J]}" not found for model "${this.modelName}"`);let Z=D;if(!(Z instanceof G))Z=new G(Z);return await Z.$save($),Z})),X=X.map((D)=>D.status==="fulfilled"?D.value:D.reason);else{let D=null;if(X=await Promise.all(B.map(async(G)=>{let Z=this.discriminators&&G[J]!=null?this.discriminators[G[J]]||IG(this.discriminators,G[J]):this;if(Z==null)throw new k1(`Discriminator "${G[J]}" not found for model "${this.modelName}"`);try{let U=G;if(!(U instanceof Z))U=new Z(U);return await U.$save($),U}catch(U){if(!D)D=U}})),D)throw D}if(!Array.isArray(A)&&B.length===1)return X[0];return X};t.insertOne=async function(A,$){y1(this,"insertOne");let B=this.schema.options.discriminatorKey,J=this.discriminators&&A[B]!=null?this.discriminators[A[B]]||IG(this.discriminators,A[B]):this;if(J==null)throw new k1(`Discriminator "${A[B]}" not found for model "${this.modelName}"`);if(!(A instanceof J))A=new J(A);return await A.$save($)};t.watch=function(F,A){y1(this,"watch");let $=(B)=>{if(F=F||[],mY0(F,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let J=this.$__collection.watch(F,A);B(null,J)});else{let J=this.$__collection.watch(F,A);B(null,J)}};return A=A||{},A.model=this,new qY0($,F,A)};t.startSession=function(){return y1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};t.insertMany=async function(A,$){if(y1(this,"insertMany"),typeof $==="function"||typeof arguments[2]==="function")throw new k1("Model.insertMany() no longer accepts a callback");return new Promise((B,J)=>{this.$__insertMany(A,$,(X,Y)=>{if(X!=null)return J(X);B(Y)})})};t.$__insertMany=function(F,A,$){let B=this;if(typeof A==="function")$=A,A=null;$=$||v0.noop,A=A||{};let J=A.limit||1000,X=!!A.rawResult,Y=typeof A.ordered==="boolean"?A.ordered:!0,D=typeof A.throwOnValidationError==="boolean"?A.throwOnValidationError:!1,G=!!A.lean,Z=this.db.base.transactionAsyncLocalStorage?.getStore();if((!A||!A.hasOwnProperty("session"))&&Z?.session!=null)A={...A,session:Z.session};if(!Array.isArray(F))F=[F];let U=[],z=new Map,W=Y?null:Array(F.length),H=F.map((K,q)=>(V)=>{if(G)return PG(()=>V(null,K));let E=!1;if(!(K instanceof B)){if(K!=null&&typeof K!=="object")return V(new VY0(K,"arr."+q,"insertMany"));try{K=new B(K),E=!0}catch(L){return V(L)}}if(A.session!=null)K.$session(A.session);if(G)return PG(()=>V(null,K));K.$validate(E?{_skipParallelValidateCheck:!0}:null).then(()=>{V(null,K)},(L)=>{if(Y===!1)return L.index=q,U.push(L),z.set(L,q),W[q]=L,V(null,null);V(L)})});hY0(H,J,function(K,q){if(K){$(K,null);return}let V=new Map,E=new Map;for(let I=0;I<q.length;++I)V.set(q[I],I);let L=q.filter(function(I){return I!=null});for(let I=0;I<L.length;++I)E.set(I,V.get(L[I]));if(U.length>0)U.sort((I,P)=>{return z.get(I)-z.get(P)});if(L.length===0){if(D)return $(new Vq(U,W,null,"insertMany"));if(X){let I={acknowledged:!0,insertedCount:0,insertedIds:{}};return aF(I,U,U),$(null,I)}$(null,[]);return}let w=G?L:L.map(function(I){if(I.$__schema.options.versionKey)I[I.$__schema.options.versionKey]=0;if((!A||A.timestamps!==!1)&&I.initializeTimestamps&&(!I.$__||I.$__.timestamps!==!1))I.initializeTimestamps();if(I.$__hasOnlyPrimitiveValues())return I.$__toObjectShallow();return I.toObject(mf)});B.$__collection.insertMany(w,A).then((I)=>{if(!G)for(let P of L)P.$__reset(),hB(P,!1);if(Y===!1&&D&&U.length>0){for(let P=0;P<W.length;++P)if(W[P]===void 0)W[P]=q[P];return $(new Vq(U,W,I,"insertMany"))}if(X){if(Y===!1){for(let P=0;P<W.length;++P)if(W[P]===void 0)W[P]=q[P];aF(I,U,W)}return $(null,I)}if(A.populate!=null)return B.populate(L,A.populate).then((P)=>{$(null,P)},(P)=>{if(P!=null)P.insertedDocs=L;throw P});$(null,L)},(I)=>{if(I.writeErrors==null&&(I.result&&I.result.result&&I.result.result.writeErrors)!=null)I.writeErrors=I.result.result.writeErrors;let P=I&&I.writeErrors,M=new Set((I&&I.writeErrors||[]).map((g)=>g.index));if(I.writeErrors!=null)for(let g=0;g<I.writeErrors.length;++g){let S=E.get(I.writeErrors[g].index);if(I.writeErrors[g]={...I.writeErrors[g],index:S},!Y)W[S]=I.writeErrors[g]}if(!Y){for(let g=0;g<W.length;++g)if(W[g]===void 0)W[g]=q[g];I.results=W}let u=-1;if(I.insertedDocs=L.filter((g,S)=>{let O=!P||M.has(S);if(Y){if(u>-1)return S<u;if(O)u=S}return!O}).map(function(S){if(G)return S;return S.$__reset(),hB(S,!1),S}),X&&Y===!1)aF(I,U,W);$(I,null)})})};/*!
 * ignore
 */function hB(F,A){F.$isNew=A,F.$emit("isNew",A),F.constructor.emit("isNew",A);let $=F.$getAllSubdocs({useCache:!0});for(let B of $)B.$isNew=A,B.$emit("isNew",A)}t.bulkWrite=async function(A,$){if(y1(this,"bulkWrite"),typeof $==="function"||typeof arguments[2]==="function")throw new k1("Model.bulkWrite() no longer accepts a callback");$=$||{};let B=await new Promise((G,Z)=>{this.hooks.execPre("bulkWrite",this,[A,$],(U)=>{if(U!=null){if(U instanceof hf.skipWrappedFunction)return G(U);return Z(U)}G()})});if(B)return B.args[0];let J=$.ordered==null?!0:$.ordered;if(A.length===0){let Z=new(this.base.driver.get()).BulkWriteResult(gf(),!1);return Z.n=0,aF(Z,[],[]),Z}let X=$?._skipCastBulkWrite?[]:A.map((G)=>OY0(this,G,$)),Y=this.db.base.transactionAsyncLocalStorage?.getStore();if((!$||!$.hasOwnProperty("session"))&&Y?.session!=null)$={...$,session:Y.session};let D=null;if(J){await new Promise((G,Z)=>{vf(X,(U,z)=>U(z),(U)=>{if(U)return Z(U);G()})});try{D=await this.$__collection.bulkWrite(A,$)}catch(G){await new Promise((Z,U)=>{let z={error:G};this.hooks.execPost("bulkWrite",this,[null],z,(W)=>{if(W!=null)return U(W);Z()})})}}else{let G=[],Z=[],U=[];if(X.length>0)G=await Promise.all(A.map((K,q)=>{if(q>=X.length)return q;return new Promise((V)=>{X[q]((E)=>{if(E==null)V(q);else Z.push({index:q,error:E}),U[q]=E;V()})})})),G=G.filter((K)=>K!=null);else G=A.map((K,q)=>q);Z=Z.sort((K,q)=>K.index-q.index).map((K)=>K.error);let z=G.sort().map((K)=>A[K]);if(z.length===0){if($.throwOnValidationError&&Z.length)throw new Vq(Z,U,D,"bulkWrite");let q=new(this.base.driver.get()).BulkWriteResult(gf(),!1);return q.result=gf(),aF(q,Z,U),q}let W;[D,W]=await this.$__collection.bulkWrite(z,$).then((K)=>[K,null]).catch((K)=>[null,K]);let H={};if(W?.writeErrors)for(let K of W.writeErrors)H[K.err.index]=K;for(let K=0;K<G.length;++K)U[G[K]]=H[K]??null;if(W){if(Z.length>0)aF(W,Z,U);await new Promise((K,q)=>{let V={error:W};this.hooks.execPost("bulkWrite",this,[null],V,(E)=>{if(E!=null)return q(E);K()})})}if(Z.length>0)if($.throwOnValidationError)throw new Vq(Z,U,D,"bulkWrite");else aF(D,Z,U)}return await new Promise((G,Z)=>{this.hooks.execPost("bulkWrite",this,[D],(U)=>{if(U!=null)return Z(U);G()})}),D};t.bulkSave=async function(A,$){if($=$||{},$.timestamps!=null)for(let U of A)U.$__.saveOptions=U.$__.saveOptions||{},U.$__.saveOptions.timestamps=$.timestamps;else for(let U of A)if(U.$__.timestamps!=null)U.$__.saveOptions=U.$__.saveOptions||{},U.$__.saveOptions.timestamps=U.$__.timestamps;await Promise.all(A.map((U)=>eY0(U,$)));let B=this.buildBulkWriteOperations(A,$),J={skipValidation:!0,_skipCastBulkWrite:!0,...$},{bulkWriteResult:X,bulkWriteError:Y}=await this.bulkWrite(B,J).then((U)=>({bulkWriteResult:U,bulkWriteError:null}),(U)=>({bulkWriteResult:null,bulkWriteError:U}));if(Y!=null&&Y.name!=="MongoBulkWriteError")throw Y;let D=X?.matchedCount??0,G=X?.insertedCount??0;if(B.length>0&&D+G<B.length&&!Y)throw new pY0(this.modelName,A,X);let Z=[];for(let U=0;U<A.length;U++){let z=A[U];if((Y&&Y.writeErrors.find((H)=>{return(H.err.op._id||H.err.op.q._id).toString()===z._doc._id.toString()}))==null)Z.push(z)}if(await Promise.all(Z.map((U)=>FD0(U))),Y!=null)throw Y;return X};function eY0(F,A){return new Promise(($,B)=>{F.schema.s.hooks.execPre("save",F,[A],(J)=>{if(J){B(J);return}$()})})}function FD0(F){return new Promise((A,$)=>{if(F.$isNew)hB(F,!1);F.$__reset(),F.schema.s.hooks.execPost("save",F,[F],{},(B)=>{if(B){$(B);return}A()})})}t.applyDefaults=function F(A){if(A==null)return A;if(A.$__!=null){wY0(A,A.$__.fields,A.$__.exclude);for(let $ of A.$getAllSubdocs())F($,$.$__.fields,$.$__.exclude);return A}return IY0(A,this.schema),A};t.applyVirtuals=function(A,$){if(A==null)return A;if(A.$__!=null)return A;return TY0(this.schema,A,$),A};t.applyTimestamps=function(A,$){if(A==null)return A;if(A.$__!=null)return A;return MY0(this.schema,A,$),A};t.castObject=function(A,$){$=$||{};let B={},J=this.schema,X=J.options.discriminatorKey;if(J.discriminators!=null&&A!=null&&A[X]!=null)J=_U1(J,A[X])||J;let Y=Object.keys(J.paths);for(let G of Y){let Z=J.path(G);if(!Z||!Z.$isMongooseArray)continue;let U=NG(A,G);vU1(Y,U,G)}let D=null;for(let G of Y){let Z=J.path(G);if(Z==null)continue;let U=NG(A,G,void 0);if(U==null)continue;let z=G.indexOf(".")===-1?[G]:G.split("."),W=B;for(let H=0;H<z.length-1;++H){if(W[z[H]]==null)W[z[H]]=isNaN(z[H+1])?{}:[];W=W[z[H]]}if(Z.$isMongooseDocumentArray){let H=Z.options?.castNonArrays??Z.constructor.options.castNonArrays;if(!Array.isArray(U)){if(!H){if(!$.ignoreCastErrors)D=D||new Qq,D.addError(G,new iY0(G,U))}else W[z[z.length-1]]=[t.castObject.call(Z.caster,U)];continue}}if(Z.$isSingleNested||Z.$isMongooseDocumentArrayElement){try{U=t.castObject.call(Z.caster,U)}catch(H){if(!$.ignoreCastErrors)D=D||new Qq,D.addError(G,H);continue}W[z[z.length-1]]=U;continue}try{U=Z.cast(U),W[z[z.length-1]]=U}catch(H){if(!$.ignoreCastErrors)D=D||new Qq,D.addError(G,H);continue}}if(D!=null)throw D;return B};t.buildBulkWriteOperations=function(A,$){if(!Array.isArray(A))throw Error(`bulkSave expects an array of documents to be passed, received \`${A}\` instead`);return J(),A.map((X,Y)=>{if(!$.skipValidation){if(!(X instanceof $7))throw Error(`documents.${Y} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if($.validateBeforeSave==null||$.validateBeforeSave){let U=X.validateSync();if(U!=null)throw U}}if(X.isNew){let U={insertOne:{document:X}};return v0.injectTimestampsOption(U.insertOne,$.timestamps),U}let G=X.$__delta();if(G!=null&&!v0.isEmptyObject(G[0])){let U=X.$__where(G[0]),z=G[1];mU1(X,U);let W=this.schema.options.shardKey;if(W){let K=Object.keys(W),q=K.length;for(let V=0;V<q;++V)U[K[V]]=X[K[V]]}X.$__version(U,G);let H={updateOne:{filter:U,update:z}};return v0.injectTimestampsOption(H.updateOne,$.timestamps),H}return null}).filter((X)=>X!==null);function J(){if($=$||{},$.skipValidation==null)$.skipValidation=!1}};t.hydrate=function(F,A,$){if(y1(this,"hydrate"),$?.virtuals&&$?.hydratedPopulatedDocs===!1)throw new k1("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");if(A!=null){if(F!=null&&F.$__!=null)F=F.toObject(mf);F=PY0(F,A)}let B=OD().createModel(this,F,A);return B.$init(F,$),B};t.updateMany=function(A,$,B){if(y1(this,"updateMany"),$==null)throw new k1("updateMany `update` parameter cannot be nullish");return lf(this,"updateMany",A,$,B)};t.updateOne=function(A,$,B){return y1(this,"updateOne"),lf(this,"updateOne",A,$,B)};t.replaceOne=function(A,$,B){y1(this,"replaceOne");let J=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;if(J&&!$[J])$[J]=0;return lf(this,"replaceOne",A,$,B)};function lf(F,A,$,B,J){let X=new F.Query({},{},F,F.collection);if($ instanceof $7)$=$.toObject();else $=a7($);J=typeof J==="function"?J:a7(J);let Y=F&&F.schema&&F.schema.options&&F.schema.options.versionKey||null;return gU1(B,J,Y),X[A]($,B,J)}t.aggregate=function(A,$){if(y1(this,"aggregate"),typeof $==="function"||typeof arguments[2]==="function")throw new k1("Model.aggregate() no longer accepts a callback");let B=new KY0(A||[]);if(B.model(this),$!=null)B.option($);return B};t.validate=async function(A,$,B){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")B=A;if(typeof B==="function"||typeof arguments[3]==="function")throw new k1("Model.validate() no longer accepts a callback");let J=this.schema,X=J.options.discriminatorKey;if(J.discriminators!=null&&A!=null&&A[X]!=null)J=_U1(J,A[X])||J;let Y=Object.keys(J.paths);if($!=null){let Z=typeof $==="string"?new Set($.split(" ")):Array.isArray($)?new Set($):new Set(Y);Y=Y.filter((U)=>{if($.pathsToSkip){if(Array.isArray($.pathsToSkip)){if($.pathsToSkip.find((H)=>H==U))return!1}else if(typeof $.pathsToSkip=="string"){if($.pathsToSkip.includes(U))return!1}}let z=U.split("."),W=z[0];for(let H of z){if(Z.has(W))return!0;W+="."+H}return Z.has(U)})}for(let Z of Y){let U=J.path(Z);if(!U||!U.$isMongooseArray||U.$isMongooseDocumentArray)continue;let z=NG(A,Z);vU1(Y,z,Z)}let D=null;Y=new Set(Y);try{A=this.castObject(A)}catch(Z){D=Z;for(let U of Object.keys(D.errors||{}))Y.delete(U)}let G=Y.size;return new Promise((Z,U)=>{if(G===0)return z();for(let H of Y){let K=J.path(H);if(K==null){W();continue}let q=H.indexOf(".")===-1?[H]:H.split("."),V=A;for(let L=0;L<q.length-1;++L)V=V[q[L]];let E=NG(A,H,void 0);K.doValidate(E,(L)=>{if(L)D=D||new Qq,D.addError(H,L);W()},B,{path:H})}function z(){if(D)U(D);else Z(A)}function W(){if(--G<=0)return z()}})};t.populate=async function(A,$){if(y1(this,"populate"),typeof $==="function"||typeof arguments[2]==="function")throw new k1("Model.populate() no longer accepts a callback");if($=v0.populate($),$.length===0)return A;if($.find((B)=>B.ordered))for(let B of $)await TU1(this,A,B);else{let B=[];for(let J of $)B.push(TU1(this,A,J));await Promise.all(B)}return A};/*!
 * Populates `docs` for a single `populateOptions` instance.
 */var AD0=/\s?-_id\s?/,$D0=/\s?-_id\s?/g;async function TU1(F,A,$){if($.strictPopulate==null){if($._localModel!=null&&$._localModel.schema._userProvidedOptions.strictPopulate!=null)$.strictPopulate=$._localModel.schema._userProvidedOptions.strictPopulate;else if($._localModel!=null&&F.base.options.strictPopulate!=null)$.strictPopulate=F.base.options.strictPopulate;else if(F.base.options.strictPopulate!=null)$.strictPopulate=F.base.options.strictPopulate}if(!Array.isArray(A))A=[A];if(A.length===0||A.every(v0.isNullOrUndefined))return;let B=xY0(F,A,$);if(B instanceof k1)throw B;let J=B.length,X=[];function Y(Z){return Z!==void 0}let D=!1,G=[];for(let Z=0;Z<J;++Z){let U=B[Z],z=U.options.select,W=v0.array.flatten(U.ids,Y);W=v0.array.unique(W);let H={};if(H.sort=U&&U.options&&U.options.options&&U.options.options.sort||void 0,H.excludeId=AD0.test(z)||z&&z._id===0,U.options&&U.options.options&&U.options.options.lean&&U.options.options.lean.transform)U.options.options._leanTransform=U.options.options.lean.transform,U.options.options.lean=!0;if(W.length===0||W.every(v0.isNullOrUndefined)){OU1(F,[],U,H);continue}if(D=!0,typeof $.foreignField==="string")U.foreignField.clear(),U.foreignField.add($.foreignField);let K=SY0(W,U.match,U.foreignField,U.model,U.options.skipInvalidIds);if(H.excludeId)if(typeof z==="string")z=z.replace($D0," ");else if(Array.isArray(z))z=z.filter((q)=>q!=="-_id");else z={...z},delete z._id;if(U.options.options&&U.options.options.limit!=null)H.originalLimit=U.options.options.limit;else if(U.options.limit!=null)H.originalLimit=U.options.limit;G.push([U,K,z,H])}if(!D){if(B.length!==0)return;if($.populate!=null){let Z=v0.populate($.populate).map((U)=>Object.assign({},U,{path:$.path+"."+U.path}));return F.populate(A,Z)}return}if($.ordered)for(let Z of G)await kU1.apply(null,Z).then((U)=>{X=X.concat(U)});else{let Z=[];for(let U of G)Z.push(kU1.apply(null,U).then((z)=>{X=X.concat(z)}));await Promise.all(Z)}for(let Z of G){let U=Z[0],z=Z[3];for(let W of X)U.options._childDocs.push(W);OU1(F,X,U,z)}for(let Z of G)dY0(Z[0].foreignField,Z[0].options,X);for(let Z of G){let U=Z[0];if(U.options&&U.options.options&&U.options.options._leanTransform)for(let z of X)U.options.options._leanTransform(z)}}/*!
 * ignore
 */function kU1(F,A,$){let B=a7(F.options.populate),J={};if(F.options.skip!==void 0)J.skip=F.options.skip;if(F.options.limit!==void 0)J.limit=F.options.limit;if(F.options.perDocumentLimit!==void 0)J.perDocumentLimit=F.options.perDocumentLimit;if(Object.assign(J,F.options.options),F.count)delete J.skip;if(J.perDocumentLimit!=null)J.limit=J.perDocumentLimit,delete J.perDocumentLimit;else if(J.limit!=null)J.limit=J.limit*F.ids.length;let X=F.model.find(A,$,J);for(let Y of F.foreignField)if(Y!=="_id"&&X.selectedInclusively()&&!yY0(X._fields,Y))X.select(Y);if(F.count)for(let Y of F.foreignField)X.select(Y);if(B){if(F.model.baseModelName!=null)if(Array.isArray(B))B.forEach((D)=>{D.strictPopulate=!1});else if(typeof B==="string")B={path:B,strictPopulate:!1};else B.strictPopulate=!1;let Y=F.options._fullPath||F.options.path;if(Array.isArray(B))for(let D of B)D._fullPath=Y+"."+D.path;else if(typeof B==="object")B._fullPath=Y+"."+B.path;X.populate(B)}return X.exec().then((Y)=>{for(let D of Y)vY0.set(D,F.model);return Y})}/*!
 * ignore
 */function OU1(F,A,$,B){let{options:J,isVirtual:X,justOne:Y}=$,D,G=J&&J.options&&J.options.lean||!1,Z=A.length,U={},z={},W,H,K=a7($.allIds);for(let q=0;q<Z;q++){if(H=A[q],H==null)continue;for(let V of $.foreignField){if(D=v0.getValue(V,H),Array.isArray(D)){D=v0.array.unique(v0.array.flatten(D));for(let E of D){if(E instanceof $7)E=E._doc._id;if(E?.constructor?.name==="Binary"&&E.sub_type===4&&typeof E.toUUID==="function")W=String(E.toUUID());else if(E?.constructor?.name==="Buffer"&&E._subtype===4&&typeof E.toUUID==="function")W=String(E.toUUID());else W=String(E);if(z[W])if(Array.isArray(z[W]))z[W].push(H),U[W].push(q);else z[W]=[z[W],H],U[W]=[U[W],q];else if(X&&!Y)z[W]=[H],U[W]=[q];else z[W]=H,U[W]=q}}else{if(D instanceof $7)D=D._doc._id;if(D?.constructor?.name==="Binary"&&D.sub_type===4&&typeof D.toUUID==="function")W=String(D.toUUID());else if(D?.constructor?.name==="Buffer"&&D._subtype===4&&typeof D.toUUID==="function")W=String(D.toUUID());else W=String(D);if(z[W]){if(Array.isArray(z[W]))z[W].push(H),U[W].push(q);else if(X||z[W].constructor!==H.constructor||(z[W]instanceof $7?String(z[W]._doc._id):String(z[W]._id))!==(H instanceof $7?String(H._doc._id):String(H._id)))z[W]=[z[W],H],U[W]=[U[W],q]}else z[W]=H,U[W]=q}if(!G)H.$__.wasPopulated=H.$__.wasPopulated||{value:D}}}kY0({originalModel:F,rawIds:$.isVirtual?K:$.allIds,allIds:K,unpopulatedValues:$.unpopulatedValues,foreignField:$.foreignField,rawDocs:z,rawOrder:U,docs:$.docs,path:J.path,options:B,justOne:$.justOne,isVirtual:$.isVirtual,allOptions:$,populatedModel:$.model,lean:G,virtual:$.virtual,count:$.count,match:$.match})}t.compile=function(A,$,B,J,X){if($.options.versionKey!==!1&&!$.paths[$.options.versionKey]){let z={};z[$.options.versionKey]=Number,$.add(z)}let D;if(typeof A==="function"&&A.prototype instanceof t)D=A,A=D.name,$.loadClass(D,!1),D.prototype.$isMongooseModelPrototype=!0;else D=function z(W,H,K){if(z.hooks.execPreSync("createModel",W),!(this instanceof z))return new z(W,H,K);let q=z.schema.options.discriminatorKey;if(z.discriminators==null||W==null||W[q]==null){t.call(this,W,H,K);return}let V=z.discriminators[W[q]]||IG(z.discriminators,W[q]);if(V!=null)return new V(W,H,K);t.call(this,W,H,K)};if(D.hooks=$.s.hooks.clone(),D.base=X,D.modelName=A,!(D.prototype instanceof t))Object.setPrototypeOf(D,t),Object.setPrototypeOf(D.prototype,t.prototype);D.model=function(W){return this.db.model(W)},D.db=J,D.prototype.db=J,D.prototype[rF]=J,D.discriminators=D.prototype.discriminators=void 0,D[hU1]=!0,D.events=new _f,$._preCompile();let Z={schemaUserProvidedOptions:$._userProvidedOptions||{},capped:$.options.capped,Promise:D.base.Promise,modelName:A};if($.options.autoCreate!==void 0)Z.autoCreate=$.options.autoCreate;let U=J.collection(B,Z);return D.prototype.collection=U,D.prototype.$collection=U,D.prototype[nF]=U,D.prototype.$__setSchema($),uU1(D,$),xU1(D,$),NY0(D,$),jY0(D,$.s.hooks,$.statics),D.schema=D.prototype.$__schema,D.collection=U,D.$__collection=U,D.Query=function(){qq.apply(this,arguments)},Object.setPrototypeOf(D.Query.prototype,qq.prototype),D.Query.base=qq.base,D.Query.prototype.constructor=qq,D._applyQueryMiddleware(),BD0(D,$.query),D};t.clientEncryption=function(){let A=this.base.driver.get().ClientEncryption;if(!A)throw Error("The mongodb driver must be used to obtain a ClientEncryption object.");let $=this.collection?.conn?.client;if(!$)return null;let B=$.options.autoEncryption;if(!B)return null;let{keyVaultNamespace:J,keyVaultClient:X,kmsProviders:Y,credentialProviders:D,proxyOptions:G,tlsOptions:Z}=B;return new A(X??$,{keyVaultNamespace:J,kmsProviders:Y,credentialProviders:D,proxyOptions:G,tlsOptions:Z})};t.$__updateConnection=function(A){this.db=A,this.prototype.db=A,this.prototype[rF]=A;let $=A.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=$,this.prototype.$collection=$,this.prototype[nF]=$,this.collection=$,this.$__collection=$};function BD0(F,A){for(let $ in A)F.Query.prototype[$]=A[$]}t.__subclass=function(A,$,B){let J=this,X=function U(z,W,H){if(!(this instanceof U))return new U(z,W,H);J.call(this,z,W,H)};if(Object.setPrototypeOf(X,J),Object.setPrototypeOf(X.prototype,J.prototype),X.db=A,X.prototype.db=A,X.prototype[rF]=A,J[CG]=J[CG]||[],J[CG].push(X),J.discriminators!=null){X.discriminators={};for(let U of Object.keys(J.discriminators))X.discriminators[U]=J.discriminators[U].__subclass(J.db,J.discriminators[U].schema,B)}let Y=$&&typeof $!=="string"?$:J.prototype.$__schema,D=Y.options||{},G=Y._userProvidedOptions||{};if(!B)B=J.prototype.$__schema.get("collection")||v0.toCollectionName(J.modelName,this.base.pluralize());let Z={schemaUserProvidedOptions:G,capped:Y&&D.capped};return X.prototype.collection=A.collection(B,Z),X.prototype.$collection=X.prototype.collection,X.prototype[nF]=X.prototype.collection,X.collection=X.prototype.collection,X.$__collection=X.collection,X.init().catch(()=>{}),X};t.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let A of this.schema._applyDiscriminators.keys())this.discriminator(A,this.schema._applyDiscriminators.get(A));delete this.schema._defaultToObjectOptionsMap,CY0(this.schema,new WeakSet,!0)};t.inspect=function(){return`Model { ${this.modelName} }`};t.namespace=function(){return this.db.name+"."+this.collection.collectionName};if(RU1.inspect.custom)t[RU1.inspect.custom]=t.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */t._applyQueryMiddleware=function(){let A=this.Query,$=this.schema.s.hooks.filter((B)=>{let J=JD0(B);if(B.name==="validate")return!!J.query;if(B.name==="deleteOne"||B.name==="updateOne")return!!J.query||Object.keys(J).length===0;if(B.query!=null||B.document!=null)return!!B.query;return!0});A.prototype._queryMiddleware=$};function JD0(F){let A={};if(F.hasOwnProperty("query"))A.query=F.query;if(F.hasOwnProperty("document"))A.document=F.document;return A}/*!
 * Module exports.
 */cU1.exports=dU1=t});var pU1=Q((RG,lU1)=>{lU1.exports=DD0;RG.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var XD0=RG.pluralization;RG.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var YD0=RG.uncountables;function DD0(F){let A;if(F=F.toLowerCase(),!~YD0.indexOf(F)){if(A=XD0.filter(function($){return F.match($[0])}),A[0])return F.replace(A[0][0],A[0][1])}return F}});var sU1=Q((vM0,tU1)=>{/*!
 * Module requirements
 */var nU1=d1(),iU1=x("util"),aU1=lk();class q5 extends nU1{constructor(){super("");this.errors={}}toString(){return aU1(this)}inspect(){return Object.assign(Error(this.message),this)}addError(F,A){if(A instanceof q5){let{errors:$}=A;for(let B of Object.keys($))this.addError(B,$[B]);return}this.errors[F]=A,this.message=aU1(this)}}if(iU1.inspect.custom)q5.prototype[iU1.inspect.custom]=q5.prototype.inspect;Object.defineProperty(q5.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(q5.prototype,"name",{value:"SetOptionError"});class rU1 extends nU1{constructor(F){super(`"${F}" is not a valid option to set`)}}q5.SetOptionInnerError=rU1;/*!
 * Module exports
 */tU1.exports=q5});var eU1=Q(()=>{var oU1=P1();if(typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window<"u")oU1.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(setTimeout.clock!=null&&typeof setTimeout.clock.Date==="function")oU1.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var Xz1=Q((Bz1,Jz1)=>{/*!
 * Module dependencies.
 */var Fz1=d9(),Az1=x("events").EventEmitter,$z1=_3(),GD0=D5(),ZD0=x7(),UD0=$z1.ValidationError,zD0=$K(),WD0=$5();function n9(F,A,$,B,J){if(!(this instanceof n9))return new n9(F,A,$,B,J);if(WD0(A)&&!A.instanceOfSchema)A=new GD0(A);if(A=this.schema||A,!this.schema&&A.options._id){if(F=F||{},F._id===void 0)F._id=new ZD0}if(!A)throw new $z1.MissingSchemaError;this.$__setSchema(A),Fz1.call(this,F,$,B,J),zD0(this,A,{decorateDoc:!0});for(let X in A.methods)this[X]=A.methods[X];for(let X in A.statics)this[X]=A.statics[X]}/*!
 * Inherit from the NodeJS document
 */n9.prototype=Object.create(Fz1.prototype);n9.prototype.constructor=n9;/*!
 * ignore
 */n9.events=new Az1;/*!
 * Browser doc exposes the event emitter API
 */n9.$emitter=new Az1;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(F){n9[F]=function(){return n9.$emitter[F].apply(n9.$emitter,arguments)}});/*!
 * Module exports.
 */n9.ValidationError=UD0;Jz1.exports=Bz1=n9});var Dz1=Q((dM0,pf)=>{/*!
 * Module dependencies.
 */var HD0=d9(),KD0=Xz1(),Yz1=!1;pf.exports=function(){if(Yz1)return KD0;return HD0};/*!
 * ignore
 */pf.exports.setBrowser=function(F){Yz1=F}});var Vz1=Q((qz1,Qz1)=>{/*!
 * Module dependencies.
 */var qD0=d9(),QD0=x("events").EventEmitter,Zz1=MF(),n7=D5(),VD0=Q6(),jG=lD(),ED0=eH(),wq=TY(),Gz1=XD1(),LD0=wB(),wD0=Aq(),Uz1=Cf(),ID0=Eu(),CD0=_S(),zz1=yK(),ND0=pU1(),af=P1(),PD0=vu(),RD0=_F(),jD0=Ef(),MD0=XB().trusted,TD0=Zf(),kD0=M4(),mB=d1(),Lq=sU1(),OD0=If(),Wz1=Symbol.for("mongoose:default"),Hz1=Symbol("mongoose:defaultConnection");eU1();var SD0=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:Kz1}=x("async_hooks");function Z1(F){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new QD0,this.__driver=zz1.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},F),(af.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null)nf(this);if(this.options.pluralization)this._pluralize=ND0;if(!F||!F[Wz1]){let $=this;this.Schema=function(){return this.base=$,n7.apply(this,arguments)},this.Schema.prototype=Object.create(n7.prototype),Object.assign(this.Schema,n7),this.Schema.base=this,this.Schema.Types=Object.assign({},n7.Types)}else for(let $ of["Schema","model"])this[$]=Z1.prototype[$];if(this.Schema.prototype.base=this,F?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new Kz1;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(CD0).map(($)=>[$,{deduplicate:!0}])})}Z1.prototype.cast=RD0;Z1.prototype.STATES=wq;Z1.prototype.ConnectionStates=wq;Z1.prototype.driver=zz1;Z1.prototype.setDriver=function(A){let $=this instanceof Z1?this:F3;if($.__driver===A)return $;if($.connections&&$.connections.find((Y)=>Y.readyState!==wq.disconnected))throw new mB("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");if($.__driver=A,Array.isArray(A.plugins)){for(let Y of A.plugins)if(typeof Y==="function")$.plugin(Y)}if(A.SchemaTypes!=null)Object.assign(F3.Schema.Types,A.SchemaTypes);let J=A.Connection,X=$.connections[0];if($.connections=[new J($)],$.connections[0].models=$.models,X==null)return $;for(let Y of Object.values($.models)){if(Y.db!==X)continue;Y.$__updateConnection($.connections[0])}return $};Z1.prototype.set=function(A,$){let B=this instanceof Z1?this:F3;if(arguments.length===1&&typeof A!=="object"){if(Gz1.indexOf(A)===-1){let Y=new Lq;throw Y.addError(A,new Lq.SetOptionInnerError(A)),Y}return B.options[A]}let J={};if(arguments.length===2)J={[A]:$};if(arguments.length===1&&typeof A==="object")J=A;let X=void 0;for(let[Y,D]of Object.entries(J)){if(Gz1.indexOf(Y)===-1){if(!X)X=new Lq;X.addError(Y,new Lq.SetOptionInnerError(Y));continue}if(B.options[Y]=D,Y==="objectIdGetter")if(D)Object.defineProperty(B.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete B.Types.ObjectId.prototype._id;else if(Y==="transactionAsyncLocalStorage"){if(D&&!B.transactionAsyncLocalStorage)B.transactionAsyncLocalStorage=new Kz1;else if(!D&&B.transactionAsyncLocalStorage)delete B.transactionAsyncLocalStorage}else if(Y==="createInitialConnection"){if(D&&!B.connection)nf(B);else if(D===!1&&B.connection&&B.connection[Hz1]){if(B.connection.readyState===wq.disconnected&&Object.keys(B.connection.models).length===0)B.connections.shift()}}}if(X)throw X;return B};Z1.prototype.get=Z1.prototype.set;Z1.prototype.createConnection=function(A,$){let B=this instanceof Z1?this:F3,X=new B.__driver.Connection(B);if(B.connections.push(X),B.nextConnectionId++,B.events.emit("createConnection",X),arguments.length>0)X.openUri(A,{...$,_fireAndForget:!0});return X};Z1.prototype.connect=async function(A,$){if(typeof $==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new mB("Mongoose.prototype.connect() no longer accepts a callback");let B=this instanceof Z1?this:F3;if(B.connection==null)nf(B);return B.connection.openUri(A,$).then(()=>B)};Z1.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new mB("Mongoose.prototype.disconnect() no longer accepts a callback");let A=this instanceof Z1?this:F3;if(A.connections.length<=0)return;await Promise.all(A.connections.map((B)=>B.close()))};Z1.prototype.startSession=function(){let A=this instanceof Z1?this:F3;return A.connection.startSession.apply(A.connection,arguments)};Z1.prototype.pluralize=function(A){let $=this instanceof Z1?this:F3;if(arguments.length>0)$._pluralize=A;return $._pluralize};Z1.prototype.model=function(A,$,B,J){let X=this instanceof Z1?this:F3;if(typeof $==="string")B=$,$=!1;if(arguments.length===1){let Z=X.models[A];if(!Z)throw new X.Error.MissingSchemaError(A);return Z}if(af.isObject($)&&!($ instanceof n7))$=new n7($);if($&&!($ instanceof n7))throw new X.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");J=J||{};let Y=$;if($){if(X.get("cloneSchemas"))$=$.clone();X._applyPlugins($)}let D=X.options.hasOwnProperty("overwriteModels")?X.options.overwriteModels:J.overwriteModels;if(X.models.hasOwnProperty(A)&&J.cache!==!1&&D!==!0){if(Y&&Y.instanceOfSchema&&Y!==X.models[A].schema)throw new X.Error.OverwriteModelError(A);if(B&&B!==X.models[A].collection.name){let Z=X.models[A];return $=Z.prototype.schema,Z.__subclass(X.connection,$,B)}return X.models[A]}if($==null)throw new X.Error.MissingSchemaError(A);let G=X._model(A,$,B,J);return X.connection.models[A]=G,X.models[A]=G,G};/*!
 * ignore
 */Z1.prototype._model=function(A,$,B,J){let X=this instanceof Z1?this:F3,Y;if(typeof A==="function"){if(Y=A,A=Y.name,!(Y.prototype instanceof Uz1))throw new X.Error("The provided class "+A+" must extend Model")}if($){if(X.get("cloneSchemas"))$=$.clone();X._applyPlugins($)}if($==null||!("pluralization"in $.options))$.options.pluralization=X.options.pluralization;if(!B)B=$.get("collection")||af.toCollectionName(A,X.pluralize());OD0($);let D=J.connection||X.connection;if(Y=X.Model.compile(Y||A,$,B,D,X),Y.init().catch(function(){}),D.emit("model",Y),$._applyDiscriminators!=null)for(let G of $._applyDiscriminators.keys()){let{schema:Z,options:U}=$._applyDiscriminators.get(G);Y.discriminator(G,Z,U)}return Y};Z1.prototype.deleteModel=function(A){let $=this instanceof Z1?this:F3;return $.connection.deleteModel(A),delete $.models[A],$};Z1.prototype.modelNames=function(){let A=this instanceof Z1?this:F3;return Object.keys(A.models)};Z1.prototype._applyPlugins=function(A,$){let B=this instanceof Z1?this:F3;$=$||{},$.applyPluginsToDiscriminators=B.options&&B.options.applyPluginsToDiscriminators||!1,$.applyPluginsToChildSchemas=typeof(B.options&&B.options.applyPluginsToChildSchemas)==="boolean"?B.options.applyPluginsToChildSchemas:!0,ID0(A,B.plugins,$,"$globalPluginsApplied")};Z1.prototype.plugin=function(A,$){let B=this instanceof Z1?this:F3;return B.plugins.push([A,$]),B};Z1.prototype.__defineGetter__("connection",function(){return this.connections[0]});Z1.prototype.__defineSetter__("connection",function(F){if(F instanceof this.__driver.Connection)this.connections[0]=F,this.models=F.models});Z1.prototype.connections;Z1.prototype.nextConnectionId;Z1.prototype.Aggregate=jD0;Z1.prototype.BaseCollection=Ij();Object.defineProperty(Z1.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(F){this.__driver.Collection=F}});Object.defineProperty(Z1.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(F){if(F===this.__driver.Connection)return;this.__driver.Connection=F}});Z1.prototype.BaseConnection=yu();Z1.prototype.version=PD0.version;Z1.prototype.Mongoose=Z1;Z1.prototype.Schema=n7;Z1.prototype.SchemaType=VD0;Z1.prototype.SchemaTypes=n7.Types;Z1.prototype.VirtualType=ED0;Z1.prototype.Types=LD0;Z1.prototype.Query=wD0;Z1.prototype.Model=Uz1;Z1.prototype.Document=qD0;Z1.prototype.DocumentProvider=Dz1();Z1.prototype.ObjectId=jG.ObjectId;Z1.prototype.isValidObjectId=function(A){return(this instanceof Z1?this:F3).Types.ObjectId.isValid(A)};Z1.prototype.isObjectIdOrHexString=function(A){return kD0(A,"ObjectId")||typeof A==="string"&&SD0.test(A)};Z1.prototype.syncIndexes=function(A){return(this instanceof Z1?this:F3).connection.syncIndexes(A)};Z1.prototype.Decimal128=jG.Decimal128;Z1.prototype.Mixed=jG.Mixed;Z1.prototype.Date=jG.Date;Z1.prototype.Number=jG.Number;Z1.prototype.Error=mB;Z1.prototype.MongooseError=mB;Z1.prototype.now=function(){return new Date};Z1.prototype.CastError=mB.CastError;Z1.prototype.SchemaTypeOptions=v3();Z1.prototype.mquery=Df();Z1.prototype.sanitizeFilter=TD0;Z1.prototype.trusted=MD0;Z1.prototype.skipMiddlewareFunction=Zz1.skipWrappedFunction;Z1.prototype.overwriteMiddlewareResult=Zz1.overwriteResult;Z1.prototype.omitUndefined=zS();/*!
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
 */function nf(F){if(F.connection)return;let A=F.createConnection();A[Hz1]=!0,A.models=F.models}var F3=Qz1.exports=qz1=new Z1({[Wz1]:!0})});var wz1=Q((cM0,Lz1)=>{/*!
 * Module dependencies.
 */var Ez1=BD1();yK().set(Ez1);var rf=Vz1();rf.setDriver(Ez1);rf.Mongoose.prototype.mongo=LF();Lz1.exports=rf});var MG=Q((lM0,C1)=>{var N1=wz1();C1.exports=N1;C1.exports.default=N1;C1.exports.mongoose=N1;C1.exports.cast=N1.cast;C1.exports.STATES=N1.STATES;C1.exports.setDriver=N1.setDriver;C1.exports.set=N1.set;C1.exports.get=N1.get;C1.exports.createConnection=N1.createConnection;C1.exports.connect=N1.connect;C1.exports.disconnect=N1.disconnect;C1.exports.startSession=N1.startSession;C1.exports.pluralize=N1.pluralize;C1.exports.model=N1.model;C1.exports.deleteModel=N1.deleteModel;C1.exports.modelNames=N1.modelNames;C1.exports.plugin=N1.plugin;C1.exports.connections=N1.connections;C1.exports.version=N1.version;C1.exports.Aggregate=N1.Aggregate;C1.exports.Mongoose=N1.Mongoose;C1.exports.Schema=N1.Schema;C1.exports.SchemaType=N1.SchemaType;C1.exports.SchemaTypes=N1.SchemaTypes;C1.exports.VirtualType=N1.VirtualType;C1.exports.Types=N1.Types;C1.exports.Query=N1.Query;C1.exports.Model=N1.Model;C1.exports.Document=N1.Document;C1.exports.ObjectId=N1.ObjectId;C1.exports.isValidObjectId=N1.isValidObjectId;C1.exports.isObjectIdOrHexString=N1.isObjectIdOrHexString;C1.exports.syncIndexes=N1.syncIndexes;C1.exports.Decimal128=N1.Decimal128;C1.exports.Mixed=N1.Mixed;C1.exports.Date=N1.Date;C1.exports.Number=N1.Number;C1.exports.Error=N1.Error;C1.exports.MongooseError=N1.MongooseError;C1.exports.now=N1.now;C1.exports.CastError=N1.CastError;C1.exports.SchemaTypeOptions=N1.SchemaTypeOptions;C1.exports.mongo=N1.mongo;C1.exports.mquery=N1.mquery;C1.exports.sanitizeFilter=N1.sanitizeFilter;C1.exports.trusted=N1.trusted;C1.exports.skipMiddlewareFunction=N1.skipMiddlewareFunction;C1.exports.overwriteMiddlewareResult=N1.overwriteMiddlewareResult});var Nz1=Q((pM0,Cz1)=>{var uD0={FULL_WIDTH:0,FITTING:1,SMUSHING:2,CONTROLLED_SMUSHING:3};class Iz1{constructor(){this.comment="",this.numChars=0,this.options={}}}var tf=["1Row","3-D","3D Diagonal","3D-ASCII","3x5","4Max","5 Line Oblique","AMC 3 Line","AMC 3 Liv1","AMC AAA01","AMC Neko","AMC Razor","AMC Razor2","AMC Slash","AMC Slider","AMC Thin","AMC Tubes","AMC Untitled","ANSI Regular","ANSI Shadow","ANSI-Compact","ASCII 12","ASCII 9","ASCII New Roman","Acrobatic","Alligator","Alligator2","Alpha","Alphabet","Arrows","Avatar","B1FF","Babyface Lame","Babyface Leet","Banner","Banner3-D","Banner3","Banner4","Barbwire","Basic","Bear","Bell","Benjamin","Big ASCII 12","Big ASCII 9","Big Chief","Big Money-ne","Big Money-nw","Big Money-se","Big Money-sw","Big Mono 12","Big Mono 9","Big","Bigfig","Binary","Block","Blocks","Bloody","BlurVision ASCII","Bolger","Braced","Bright","Broadway KB","Broadway","Bubble","Bulbhead","Caligraphy","Caligraphy2","Calvin S","Cards","Catwalk","Chiseled","Chunky","Circle","Coinstak","Cola","Colossal","Computer","Contessa","Contrast","Cosmike","Cosmike2","Crawford","Crawford2","Crazy","Cricket","Cursive","Cyberlarge","Cybermedium","Cybersmall","Cygnet","DANC4","DOS Rebel","DWhistled","Dancing Font","Decimal","Def Leppard","Delta Corps Priest 1","DiamFont","Diamond","Diet Cola","Digital","Doh","Doom","Dot Matrix","Double Shorts","Double","Dr Pepper","Efti Chess","Efti Font","Efti Italic","Efti Piti","Efti Robot","Efti Wall","Efti Water","Electronic","Elite","Emboss 2","Emboss","Epic","Fender","Filter","Fire Font-k","Fire Font-s","Flipped","Flower Power","Four Tops","Fraktur","Fun Face","Fun Faces","Future","Fuzzy","Georgi16","Georgia11","Ghost","Ghoulish","Glenyn","Goofy","Gothic","Graceful","Gradient","Graffiti","Greek","Heart Left","Heart Right","Henry 3D","Hex","Hieroglyphs","Hollywood","Horizontal Left","Horizontal Right","ICL-1900","Impossible","Invita","Isometric1","Isometric2","Isometric3","Isometric4","Italic","Ivrit","JS Block Letters","JS Bracket Letters","JS Capital Curves","JS Cursive","JS Stick Letters","Jacky","Jazmine","Jerusalem","Katakana","Kban","Keyboard","Knob","Konto Slant","Konto","LCD","Larry 3D 2","Larry 3D","Lean","Letter","Letters","Lil Devil","Line Blocks","Linux","Lockergnome","Madrid","Marquee","Maxfour","Merlin1","Merlin2","Mike","Mini","Mirror","Mnemonic","Modular","Mono 12","Mono 9","Morse","Morse2","Moscow","Mshebrew210","Muzzle","NScript","NT Greek","NV Script","Nancyj-Fancy","Nancyj-Improved","Nancyj-Underlined","Nancyj","Nipples","O8","OS2","Octal","Ogre","Old Banner","Pagga","Patorjk's Cheese","Patorjk-HeX","Pawp","Peaks Slant","Peaks","Pebbles","Pepper","Poison","Puffy","Puzzle","Pyramid","Rammstein","Rebel","Rectangles","Red Phoenix","Relief","Relief2","Reverse","Roman","Rot13","Rotated","Rounded","Rowan Cap","Rozzo","RubiFont","Runic","Runyc","S Blood","SL Script","Santa Clara","Script","Serifcap","Shaded Blocky","Shadow","Shimrod","Short","Slant Relief","Slant","Slide","Small ASCII 12","Small ASCII 9","Small Block","Small Braille","Small Caps","Small Isometric1","Small Keyboard","Small Mono 12","Small Mono 9","Small Poison","Small Script","Small Shadow","Small Slant","Small Tengwar","Small","Soft","Speed","Spliff","Stacey","Stampate","Stampatello","Standard","Star Strips","Star Wars","Stellar","Stforek","Stick Letters","Stop","Straight","Stronger Than All","Sub-Zero","Swamp Land","Swan","Sweet","THIS","Tanja","Tengwar","Term","Terrace","Test1","The Edge","Thick","Thin","Thorned","Three Point","Ticks Slant","Ticks","Tiles","Tinker-Toy","Tmplr","Tombstone","Train","Trek","Tsalagi","Tubular","Twisted","Two Point","USA Flag","Univers","Upside Down Text","Varsity","Wavescape","Wavy","Weird","Wet Letter","Whimsy","WideTerm","Wow","miniwi"];function fD0(F){return/[.*+?^${}()|[\]\\]/.test(F)?"\\"+F:F}var xD0=(()=>{let{FULL_WIDTH:F=0,FITTING:A,SMUSHING:$,CONTROLLED_SMUSHING:B}=uD0,J={},X={font:"Standard",fontPath:"./fonts",fetchFontIfMissing:!0};function Y(b,l,N){let f=fD0(b.trim().slice(-1))||"@",o=l===N-1?new RegExp(f+f+"?\\s*$"):new RegExp(f+"\\s*$");return b.replace(o,"")}function D(b=-1,l=null){let N={},f,o=[[16384,"vLayout",$],[8192,"vLayout",A],[4096,"vRule5",!0],[2048,"vRule4",!0],[1024,"vRule3",!0],[512,"vRule2",!0],[256,"vRule1",!0],[128,"hLayout",$],[64,"hLayout",A],[32,"hRule6",!0],[16,"hRule5",!0],[8,"hRule4",!0],[4,"hRule3",!0],[2,"hRule2",!0],[1,"hRule1",!0]];f=l!==null?l:b;for(let[Y1,G1,D1]of o)if(f>=Y1){if(f-=Y1,N[G1]===void 0)N[G1]=D1}else if(G1!=="vLayout"&&G1!=="hLayout")N[G1]=!1;if(typeof N.hLayout>"u")if(b===0)N.hLayout=A;else if(b===-1)N.hLayout=F;else if(N.hRule1||N.hRule2||N.hRule3||N.hRule4||N.hRule5||N.hRule6)N.hLayout=B;else N.hLayout=$;else if(N.hLayout===$){if(N.hRule1||N.hRule2||N.hRule3||N.hRule4||N.hRule5||N.hRule6)N.hLayout=B}if(typeof N.vLayout>"u")if(N.vRule1||N.vRule2||N.vRule3||N.vRule4||N.vRule5)N.vLayout=B;else N.vLayout=F;else if(N.vLayout===$){if(N.vRule1||N.vRule2||N.vRule3||N.vRule4||N.vRule5)N.vLayout=B}return N}function G(b,l,N=""){if(b===l&&b!==N)return b;return!1}function Z(b,l){let N="|/\\[]{}()<>";if(b==="_"){if(N.indexOf(l)!==-1)return l}else if(l==="_"){if(N.indexOf(b)!==-1)return b}return!1}function U(b,l){let N="| /\\ [] {} () <>",f=N.indexOf(b),o=N.indexOf(l);if(f!==-1&&o!==-1){if(f!==o&&Math.abs(f-o)!==1){let Y1=Math.max(f,o),G1=Y1+1;return N.substring(Y1,G1)}}return!1}function z(b,l){let N="[] {} ()",f=N.indexOf(b),o=N.indexOf(l);if(f!==-1&&o!==-1){if(Math.abs(f-o)<=1)return"|"}return!1}function W(b,l){return{"/\\":"|","\\/":"Y","><":"X"}[b+l]||!1}function H(b,l,N=""){if(b===N&&l===N)return N;return!1}function K(b,l){if(b===l)return b;return!1}function q(b,l){return Z(b,l)}function V(b,l){return U(b,l)}function E(b,l){if(b==="-"&&l==="_"||b==="_"&&l==="-")return"=";return!1}function L(b,l){if(b==="|"&&l==="|")return"|";return!1}function w(b,l,N){if(l===" "||l==="")return b;else if(l===N&&b!==" ")return b;else return l}function I(b,l,N){if(N.fittingRules&&N.fittingRules.vLayout===F)return"invalid";let f,o=Math.min(b.length,l.length),Y1,G1,D1=!1,U1;if(o===0)return"invalid";for(f=0;f<o;f++)if(Y1=b.substring(f,f+1),G1=l.substring(f,f+1),Y1!==" "&&G1!==" ")if(N.fittingRules&&N.fittingRules.vLayout===A)return"invalid";else if(N.fittingRules&&N.fittingRules.vLayout===$)return"end";else{if(L(Y1,G1)){D1=D1||!1;continue}if(U1=!1,U1=N.fittingRules&&N.fittingRules.vRule1?K(Y1,G1):U1,U1=!U1&&N.fittingRules&&N.fittingRules.vRule2?q(Y1,G1):U1,U1=!U1&&N.fittingRules&&N.fittingRules.vRule3?V(Y1,G1):U1,U1=!U1&&N.fittingRules&&N.fittingRules.vRule4?E(Y1,G1):U1,D1=!0,!U1)return"invalid"}if(D1)return"end";else return"valid"}function P(b,l,N){let{length:f,length:o}=b,Y1,G1,D1,U1=1,L1,O1,R1;while(U1<=f){Y1=b.slice(Math.max(0,o-U1),o),G1=l.slice(0,Math.min(f,U1)),D1=G1.length,R1="";for(L1=0;L1<D1;L1++)if(O1=I(Y1[L1],G1[L1],N),O1==="end")R1=O1;else if(O1==="invalid"){R1=O1;break}else if(R1==="")R1="valid";if(R1==="invalid"){U1--;break}if(R1==="end")break;if(R1==="valid")U1++}return Math.min(f,U1)}function M(b,l,N){let f,o=Math.min(b.length,l.length),Y1,G1,D1="",U1,L1=N.fittingRules||{};for(f=0;f<o;f++)if(Y1=b.substring(f,f+1),G1=l.substring(f,f+1),Y1!==" "&&G1!==" ")if(L1.vLayout===A)D1+=w(Y1,G1);else if(L1.vLayout===$)D1+=w(Y1,G1);else U1=!1,U1=L1.vRule5?L(Y1,G1):U1,U1=!U1&&L1.vRule1?K(Y1,G1):U1,U1=!U1&&L1.vRule2?q(Y1,G1):U1,U1=!U1&&L1.vRule3?V(Y1,G1):U1,U1=!U1&&L1.vRule4?E(Y1,G1):U1,D1+=U1;else D1+=w(Y1,G1);return D1}function u(b,l,N,f){let o=b.length,Y1=l.length,G1=b.slice(0,Math.max(0,o-N)),D1=b.slice(Math.max(0,o-N),o),U1=l.slice(0,Math.min(N,Y1)),L1,O1,R1,S1=[],p1;O1=D1.length;for(L1=0;L1<O1;L1++){if(L1>=Y1)R1=D1[L1];else R1=M(D1[L1],U1[L1],f);S1.push(R1)}return p1=l.slice(Math.min(N,Y1),Y1),[...G1,...S1,...p1]}function g(b,l){let N=" ".repeat(l);return b.map((f)=>f+N)}function S(b,l,N){let f=b[0].length,o=l[0].length,Y1;if(f>o)l=g(l,f-o);else if(o>f)b=g(b,o-f);return Y1=P(b,l,N),u(b,l,Y1,N)}function O(b,l,N){let f=N.fittingRules||{};if(f.hLayout===F)return 0;let o,Y1=b.length,G1=l.length,D1=Y1,U1=1,L1=!1,O1,R1,S1,p1;if(Y1===0)return 0;F:while(U1<=D1){let C3=Y1-U1;O1=b.substring(C3,C3+U1),R1=l.substring(0,Math.min(U1,G1));for(o=0;o<Math.min(U1,G1);o++)if(S1=O1.substring(o,o+1),p1=R1.substring(o,o+1),S1!==" "&&p1!==" "){if(f.hLayout===A){U1=U1-1;break F}else if(f.hLayout===$){if(S1===N.hardBlank||p1===N.hardBlank)U1=U1-1;break F}else if(L1=!0,!(f.hRule1&&G(S1,p1,N.hardBlank)||f.hRule2&&Z(S1,p1)||f.hRule3&&U(S1,p1)||f.hRule4&&z(S1,p1)||f.hRule5&&W(S1,p1)||f.hRule6&&H(S1,p1,N.hardBlank))){U1=U1-1;break F}}if(L1)break;U1++}return Math.min(D1,U1)}function p(b,l,N,f){let o,Y1,G1=[],D1,U1,L1,O1,R1,S1,p1,C3,G4=f.fittingRules||{};if(typeof f.height!=="number")throw Error("height is not defined.");for(o=0;o<f.height;o++){p1=b[o],C3=l[o],R1=p1.length,S1=C3.length,D1=R1-N,U1=p1.slice(0,Math.max(0,D1)),L1="";let s7=Math.max(0,R1-N),N3=p1.substring(s7,s7+N),S2=C3.substring(0,Math.min(N,S1));for(Y1=0;Y1<N;Y1++){let A3=Y1<R1?N3.substring(Y1,Y1+1):" ",Z4=Y1<S1?S2.substring(Y1,Y1+1):" ";if(A3!==" "&&Z4!==" ")if(G4.hLayout===A||G4.hLayout===$)L1+=w(A3,Z4,f.hardBlank);else{let uG=G4.hRule1&&G(A3,Z4,f.hardBlank)||G4.hRule2&&Z(A3,Z4)||G4.hRule3&&U(A3,Z4)||G4.hRule4&&z(A3,Z4)||G4.hRule5&&W(A3,Z4)||G4.hRule6&&H(A3,Z4,f.hardBlank)||w(A3,Z4,f.hardBlank);L1+=uG}else L1+=w(A3,Z4,f.hardBlank)}if(N>=S1)O1="";else O1=C3.substring(N,N+Math.max(0,S1-N));G1[o]=U1+L1+O1}return G1}function m(b){return Array(b).fill("")}let r=function(b){return Math.max(...b.map((l)=>l.length))};function w1(b,l,N){return b.reduce(function(f,o){return p(f,o.fig,o.overlap||0,N)},m(l))}function u0(b,l,N){for(let f=b.length-1;f>0;f--){let o=w1(b.slice(0,f),l,N);if(r(o)<=N.width)return{outputFigText:o,chars:b.slice(f)}}return{outputFigText:m(l),chars:b}}function w9(b,l,N){let f,o,Y1=0,G1,D1,U1,L1=N.height,O1=[],R1,S1={chars:[],overlap:Y1},p1=[],C3,G4,s7,N3,S2;if(typeof L1!=="number")throw Error("height is not defined.");D1=m(L1);let A3=N.fittingRules||{};if(N.printDirection===1)b=b.split("").reverse().join("");U1=b.length;for(f=0;f<U1;f++)if(C3=b.substring(f,f+1),G4=C3.match(/\s/),o=l[C3.charCodeAt(0)],N3=null,o){if(A3.hLayout!==F){Y1=1e4;for(G1=0;G1<L1;G1++)Y1=Math.min(Y1,O(D1[G1],o[G1],N));Y1=Y1===1e4?0:Y1}if(N.width>0){if(N.whitespaceBreak)s7=w1(S1.chars.concat([{fig:o,overlap:Y1}]),L1,N),N3=w1(p1.concat([{fig:s7,overlap:S1.overlap}]),L1,N),R1=r(N3);else N3=p(D1,o,Y1,N),R1=r(N3);if(R1>=N.width&&f>0)if(N.whitespaceBreak){if(D1=w1(p1.slice(0,-1),L1,N),p1.length>1)O1.push(D1),D1=m(L1);p1=[]}else O1.push(D1),D1=m(L1)}if(N.width>0&&N.whitespaceBreak){if(!G4||f===U1-1)S1.chars.push({fig:o,overlap:Y1});if(G4||f===U1-1){S2=null;while(!0)if(N3=w1(S1.chars,L1,N),R1=r(N3),R1>=N.width)S2=u0(S1.chars,L1,N),S1={chars:S2.chars},O1.push(S2.outputFigText);else break;if(R1>0)if(S2)p1.push({fig:N3,overlap:1});else p1.push({fig:N3,overlap:S1.overlap});if(G4)p1.push({fig:o,overlap:Y1}),D1=m(L1);if(f===U1-1)D1=w1(p1,L1,N);S1={chars:[],overlap:Y1};continue}}D1=p(D1,o,Y1,N)}if(r(D1)>0)O1.push(D1);if(!N.showHardBlanks)O1.forEach(function(Z4){U1=Z4.length;for(G1=0;G1<U1;G1++)Z4[G1]=Z4[G1].replace(new RegExp("\\"+N.hardBlank,"g")," ")});if(b===""&&O1.length===0)O1.push(Array(L1).fill(""));return O1}let f0=function(b,l){let N,f=l.fittingRules||{};if(b==="default")N={hLayout:f.hLayout,hRule1:f.hRule1,hRule2:f.hRule2,hRule3:f.hRule3,hRule4:f.hRule4,hRule5:f.hRule5,hRule6:f.hRule6};else if(b==="full")N={hLayout:F,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if(b==="fitted")N={hLayout:A,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if(b==="controlled smushing")N={hLayout:B,hRule1:!0,hRule2:!0,hRule3:!0,hRule4:!0,hRule5:!0,hRule6:!0};else if(b==="universal smushing")N={hLayout:$,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else return;return N},m6=function(b,l){let N={},f=l.fittingRules||{};if(b==="default")N={vLayout:f.vLayout,vRule1:f.vRule1,vRule2:f.vRule2,vRule3:f.vRule3,vRule4:f.vRule4,vRule5:f.vRule5};else if(b==="full")N={vLayout:F,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if(b==="fitted")N={vLayout:A,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if(b==="controlled smushing")N={vLayout:B,vRule1:!0,vRule2:!0,vRule3:!0,vRule4:!0,vRule5:!0};else if(b==="universal smushing")N={vLayout:$,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else return;return N},e6=function(b,l,N){N=N.replace(/\r\n/g,`
`).replace(/\r/g,`
`);let f=N.split(`
`),o=[],Y1,G1,D1;G1=f.length;for(Y1=0;Y1<G1;Y1++)o=o.concat(w9(f[Y1],J[b],l));G1=o.length,D1=o[0];for(Y1=1;Y1<G1;Y1++)D1=S(D1,o[Y1],l);return D1?D1.join(`
`):""};function d6(b,l){let N;if(typeof structuredClone<"u")N=structuredClone(b);else N=JSON.parse(JSON.stringify(b));if(N.showHardBlanks=l.showHardBlanks||!1,N.width=l.width||-1,N.whitespaceBreak=l.whitespaceBreak||!1,l.horizontalLayout){let f=f0(l.horizontalLayout,b);if(f)Object.assign(N.fittingRules,f)}if(l.verticalLayout){let f=m6(l.verticalLayout,b);if(f)Object.assign(N.fittingRules,f)}return N.printDirection=l.printDirection!==null&&l.printDirection!==void 0?l.printDirection:b.printDirection,N}let Q0=async function(b,l,N){return Q0.text(b,l,N)};return Q0.text=async function(b,l,N){b=b+"";let f,o;if(typeof l==="function")o=l,f={font:X.font};else if(typeof l==="string")f={font:l},o=N;else if(l)f=l,o=N;else f={font:X.font},o=N;let Y1=f.font||X.font;try{let G1=await Q0.loadFont(Y1),D1=G1?e6(Y1,d6(G1,f),b):"";if(o)o(null,D1);return D1}catch(G1){let D1=G1 instanceof Error?G1:Error(String(G1));if(o)return o(D1),"";throw D1}},Q0.textSync=function(b,l){if(b=b+"",typeof l==="string")l={font:l};else l=l||{};let N=l.font||X.font,f=d6(Q0.loadFontSync(N),l);return e6(N,f,b)},Q0.metadata=async function(b,l){b=b+"";try{let N=await Q0.loadFont(b);if(!N)throw Error("Error loading font.");let f=J[b]||{},o=[N,f.comment||""];if(l)l(null,N,f.comment);return o}catch(N){let f=N instanceof Error?N:Error(String(N));if(l)return l(f),null;throw f}},Q0.defaults=function(b){if(b&&typeof b==="object")Object.assign(X,b);if(typeof structuredClone<"u")return structuredClone(X);else return JSON.parse(JSON.stringify(X))},Q0.parseFont=function(b,l,N=!0){if(J[b]&&!N)return J[b].options;l=l.replace(/\r\n/g,`
`).replace(/\r/g,`
`);let f=new Iz1,o=l.split(`
`),Y1=o.shift();if(!Y1)throw Error("Invalid font file: missing header");let G1=Y1.split(" "),D1={hardBlank:G1[0].substring(5,6),height:parseInt(G1[1],10),baseline:parseInt(G1[2],10),maxLength:parseInt(G1[3],10),oldLayout:parseInt(G1[4],10),numCommentLines:parseInt(G1[5],10),printDirection:G1[6]?parseInt(G1[6],10):0,fullLayout:G1[7]?parseInt(G1[7],10):null,codeTagCount:G1[8]?parseInt(G1[8],10):null};if((D1.hardBlank||"").length!==1||[D1.height,D1.baseline,D1.maxLength,D1.oldLayout,D1.numCommentLines].some((O1)=>O1===null||O1===void 0||isNaN(O1)))throw Error("FIGlet header contains invalid values.");if(D1.height==null||D1.numCommentLines==null)throw Error("FIGlet header contains invalid values.");D1.fittingRules=D(D1.oldLayout,D1.fullLayout),f.options=D1;let L1=[];for(let O1=32;O1<=126;O1++)L1.push(O1);if(L1.push(196,214,220,228,246,252,223),o.length<D1.numCommentLines+D1.height*L1.length)throw Error(`FIGlet file is missing data. Line length: ${o.length}. Comment lines: ${D1.numCommentLines}. Height: ${D1.height}. Num chars: ${L1.length}.`);f.comment=o.splice(0,D1.numCommentLines).join(`
`),f.numChars=0;while(o.length>0&&f.numChars<L1.length){let O1=L1[f.numChars];f[O1]=o.splice(0,D1.height);for(let R1=0;R1<D1.height;R1++)if(typeof f[O1][R1]>"u")f[O1][R1]="";else f[O1][R1]=Y(f[O1][R1],R1,D1.height);f.numChars++}while(o.length>0){let O1=o.shift();if(!O1||O1.trim()==="")break;let R1=O1.split(" ")[0],S1;if(/^-?0[xX][0-9a-fA-F]+$/.test(R1))S1=parseInt(R1,16);else if(/^-?0[0-7]+$/.test(R1))S1=parseInt(R1,8);else if(/^-?[0-9]+$/.test(R1))S1=parseInt(R1,10);else throw Error(`Error parsing data. Invalid data: ${R1}`);if(S1===-1||S1<-2147483648||S1>2147483647){let p1=S1===-1?"The char code -1 is not permitted.":`The char code cannot be ${S1<-2147483648?"less than -2147483648":"greater than 2147483647"}.`;throw Error(`Error parsing data. ${p1}`)}f[S1]=o.splice(0,D1.height);for(let p1=0;p1<D1.height;p1++)if(typeof f[S1][p1]>"u")f[S1][p1]="";else f[S1][p1]=Y(f[S1][p1],p1,D1.height);f.numChars++}return J[b]=f,D1},Q0.loadedFonts=()=>{return Object.keys(J)},Q0.clearLoadedFonts=()=>{Object.keys(J).forEach((b)=>{delete J[b]})},Q0.loadFont=async function(b,l){if(J[b]){let N=J[b].options;if(l)l(null,N);return Promise.resolve(N)}try{if(!X.fetchFontIfMissing)throw Error(`Font is not loaded: ${b}`);let N=await fetch(`${X.fontPath}/${b}.flf`);if(!N.ok)throw Error(`Network response was not ok: ${N.status}`);let f=await N.text(),o=Q0.parseFont(b,f);if(l)l(null,o);return o}catch(N){let f=N instanceof Error?N:Error(String(N));if(l)return l(f),null;throw f}},Q0.loadFontSync=function(b){if(J[b])return J[b].options;throw Error("Synchronous font loading is not implemented for the browser, it will only work for fonts already loaded.")},Q0.preloadFonts=async function(b,l){try{for(let N of b){let f=await fetch(`${X.fontPath}/${N}.flf`);if(!f.ok)throw Error(`Failed to preload fonts. Error fetching font: ${N}, status code: ${f.statusText}`);let o=await f.text();Q0.parseFont(N,o)}if(l)l()}catch(N){let f=N instanceof Error?N:Error(String(N));if(l){l(f);return}throw N}},Q0.fonts=function(b){return new Promise(function(l,N){if(l(tf),b)b(null,tf)})},Q0.fontsSync=function(){return tf},Q0.figFonts=J,Q0})();Cz1.exports=xD0});var of=Q((iM0,Rz1)=>{var __filename="C:\\Users\\rezky\\Desktop\\Basics Full Stack\\docker image\\bun-hono-restful\\node_modules\\figlet\\dist\\node-figlet.cjs",bD0=x("fs"),gD0=x("path"),_D0=Nz1(),yD0=x("url"),sf=typeof document<"u"?document.currentScript:null;function Pz1(F){let A=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(F){for(let $ in F)if($!=="default"){let B=Object.getOwnPropertyDescriptor(F,$);Object.defineProperty(A,$,B.get?B:{enumerable:!0,get:()=>F[$]})}}return A.default=F,Object.freeze(A)}var Iq=Pz1(bD0),Cq=Pz1(gD0),vD0=yD0.fileURLToPath(typeof document>"u"?x("url").pathToFileURL(__filename).href:sf&&sf.tagName.toUpperCase()==="SCRIPT"&&sf.src||new URL("node-figlet.cjs",document.baseURI).href),hD0=Cq.dirname(vD0),mD0=Cq.join(hD0,"/../fonts/"),S4=_D0;S4.defaults({fontPath:mD0});S4.loadFont=function(F,A){return new Promise(($,B)=>{if(S4.figFonts[F]){if(A)A(null,S4.figFonts[F].options);$(S4.figFonts[F].options);return}Iq.readFile(Cq.join(S4.defaults().fontPath,F+".flf"),{encoding:"utf-8"},(J,X)=>{if(J){if(A)A(J);B(J);return}X=X+"";try{let Y=S4.parseFont(F,X);if(A)A(null,Y);$(Y)}catch(Y){let D=Y instanceof Error?Y:Error(String(Y));if(A)A(D);B(D)}})})};S4.loadFontSync=function(F){if(S4.figFonts[F])return S4.figFonts[F].options;let A=Iq.readFileSync(Cq.join(S4.defaults().fontPath,F+".flf"),{encoding:"utf-8"})+"";return S4.parseFont(F,A)};S4.fonts=function(F){return new Promise((A,$)=>{let B=[];Iq.readdir(S4.defaults().fontPath,(J,X)=>{if(J){F&&F(J),$(J);return}X.forEach((Y)=>{if(/\.flf$/.test(Y))B.push(Y.replace(/\.flf$/,""))}),F&&F(null,B),A(B)})})};S4.fontsSync=function(){let F=[];return Iq.readdirSync(S4.defaults().fontPath).forEach((A)=>{if(/\.flf$/.test(A))F.push(A.replace(/\.flf$/,""))}),F};Rz1.exports=S4});var Tq=(F,A,$)=>{return(B,J)=>{let X=-1;return Y(0);async function Y(D){if(D<=X)throw Error("next() called multiple times");X=D;let G,Z=!1,U;if(F[D])U=F[D][0][0],B.req.routeIndex=D;else U=D===F.length&&J||void 0;if(U)try{G=await U(B,()=>Y(D+1))}catch(z){if(z instanceof Error&&A)B.error=z,G=await A(z,B),Z=!0;else throw z}else if(B.finalized===!1&&$)G=await $(B);if(G&&(B.finalized===!1||Z))B.res=G;return B}}};var z6=class extends Error{res;status;constructor(F=500,A){super(A?.message,{cause:A?.cause});this.res=A?.res,this.status=F}getResponse(){if(this.res)return new Response(this.res.body,{status:this.status,headers:this.res.headers});return new Response(this.message,{status:this.status})}};var Gx=Symbol();var Zx=async(F,A=Object.create(null))=>{let{all:$=!1,dot:B=!1}=A,X=(F instanceof fG?F.raw.headers:F.headers).get("Content-Type");if(X?.startsWith("multipart/form-data")||X?.startsWith("application/x-www-form-urlencoded"))return gz1(F,{all:$,dot:B});return{}};async function gz1(F,A){let $=await F.formData();if($)return _z1($,A);return{}}function _z1(F,A){let $=Object.create(null);if(F.forEach((B,J)=>{if(!(A.all||J.endsWith("[]")))$[J]=B;else yz1($,J,B)}),A.dot)Object.entries($).forEach(([B,J])=>{if(B.includes("."))vz1($,B,J),delete $[B]});return $}var yz1=(F,A,$)=>{if(F[A]!==void 0)if(Array.isArray(F[A]))F[A].push($);else F[A]=[F[A],$];else if(!A.endsWith("[]"))F[A]=$;else F[A]=[$]},vz1=(F,A,$)=>{let B=F,J=A.split(".");J.forEach((X,Y)=>{if(Y===J.length-1)B[X]=$;else{if(!B[X]||typeof B[X]!=="object"||Array.isArray(B[X])||B[X]instanceof File)B[X]=Object.create(null);B=B[X]}})};var Oq=(F)=>{let A=F.split("/");if(A[0]==="")A.shift();return A},Ux=(F)=>{let{groups:A,path:$}=hz1(F),B=Oq($);return mz1(B,A)},hz1=(F)=>{let A=[];return F=F.replace(/\{[^}]+\}/g,($,B)=>{let J=`@${B}`;return A.push([J,$]),J}),{groups:A,path:F}},mz1=(F,A)=>{for(let $=A.length-1;$>=0;$--){let[B]=A[$];for(let J=F.length-1;J>=0;J--)if(F[J].includes(B)){F[J]=F[J].replace(B,A[$][1]);break}}return F},xG={},zx=(F,A)=>{if(F==="*")return"*";let $=F.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if($){let B=`${F}#${A}`;if(!xG[B])if($[2])xG[B]=A&&A[0]!==":"&&A[0]!=="*"?[B,$[1],new RegExp(`^${$[2]}(?=/${A})`)]:[F,$[1],new RegExp(`^${$[2]}$`)];else xG[B]=[F,$[1],!0];return xG[B]}return null},bG=(F,A)=>{try{return A(F)}catch{return F.replace(/(?:%[0-9A-Fa-f]{2})+/g,($)=>{try{return A($)}catch{return $}})}},dz1=(F)=>bG(F,decodeURI),Sq=(F)=>{let A=F.url,$=A.indexOf("/",A.indexOf(":")+4),B=$;for(;B<A.length;B++){let J=A.charCodeAt(B);if(J===37){let X=A.indexOf("?",B),Y=A.slice($,X===-1?void 0:X);return dz1(Y.includes("%25")?Y.replace(/%25/g,"%2525"):Y)}else if(J===63)break}return A.slice($,B)};var Wx=(F)=>{let A=Sq(F);return A.length>1&&A.at(-1)==="/"?A.slice(0,-1):A},w5=(F,A,...$)=>{if($.length)A=w5(A,...$);return`${F?.[0]==="/"?"":"/"}${F}${A==="/"?"":`${F?.at(-1)==="/"?"":"/"}${A?.[0]==="/"?A.slice(1):A}`}`},gG=(F)=>{if(F.charCodeAt(F.length-1)!==63||!F.includes(":"))return null;let A=F.split("/"),$=[],B="";return A.forEach((J)=>{if(J!==""&&!/\:/.test(J))B+="/"+J;else if(/\:/.test(J))if(/\?/.test(J)){if($.length===0&&B==="")$.push("/");else $.push(B);let X=J.replace("?","");B+="/"+X,$.push(B)}else B+="/"+J}),$.filter((J,X,Y)=>Y.indexOf(J)===X)},kq=(F)=>{if(!/[%+]/.test(F))return F;if(F.indexOf("+")!==-1)F=F.replace(/\+/g," ");return F.indexOf("%")!==-1?bG(F,uq):F},Hx=(F,A,$)=>{let B;if(!$&&A&&!/[%+]/.test(A)){let Y=F.indexOf("?",8);if(Y===-1)return;if(!F.startsWith(A,Y+1))Y=F.indexOf(`&${A}`,Y+1);while(Y!==-1){let D=F.charCodeAt(Y+A.length+1);if(D===61){let G=Y+A.length+2,Z=F.indexOf("&",G);return kq(F.slice(G,Z===-1?void 0:Z))}else if(D==38||isNaN(D))return"";Y=F.indexOf(`&${A}`,Y+1)}if(B=/[%+]/.test(F),!B)return}let J={};B??=/[%+]/.test(F);let X=F.indexOf("?",8);while(X!==-1){let Y=F.indexOf("&",X+1),D=F.indexOf("=",X);if(D>Y&&Y!==-1)D=-1;let G=F.slice(X+1,D===-1?Y===-1?void 0:Y:D);if(B)G=kq(G);if(X=Y,G==="")continue;let Z;if(D===-1)Z="";else if(Z=F.slice(D+1,Y===-1?void 0:Y),B)Z=kq(Z);if($){if(!(J[G]&&Array.isArray(J[G])))J[G]=[];J[G].push(Z)}else J[G]??=Z}return A?J[A]:J},Kx=Hx,qx=(F,A)=>{return Hx(F,A,!0)},uq=decodeURIComponent;var Qx=(F)=>bG(F,uq),fG=class{raw;#F;#A;routeIndex=0;path;bodyCache={};constructor(F,A="/",$=[[]]){this.raw=F,this.path=A,this.#A=$,this.#F={}}param(F){return F?this.#$(F):this.#X()}#$(F){let A=this.#A[0][this.routeIndex][1][F],$=this.#J(A);return $&&/\%/.test($)?Qx($):$}#X(){let F={},A=Object.keys(this.#A[0][this.routeIndex][1]);for(let $ of A){let B=this.#J(this.#A[0][this.routeIndex][1][$]);if(B!==void 0)F[$]=/\%/.test(B)?Qx(B):B}return F}#J(F){return this.#A[1]?this.#A[1][F]:F}query(F){return Kx(this.url,F)}queries(F){return qx(this.url,F)}header(F){if(F)return this.raw.headers.get(F)??void 0;let A={};return this.raw.headers.forEach(($,B)=>{A[B]=$}),A}async parseBody(F){return this.bodyCache.parsedBody??=await Zx(this,F)}#B=(F)=>{let{bodyCache:A,raw:$}=this,B=A[F];if(B)return B;let J=Object.keys(A)[0];if(J)return A[J].then((X)=>{if(J==="json")X=JSON.stringify(X);return new Response(X)[F]()});return A[F]=$[F]()};json(){return this.#B("text").then((F)=>JSON.parse(F))}text(){return this.#B("text")}arrayBuffer(){return this.#B("arrayBuffer")}blob(){return this.#B("blob")}formData(){return this.#B("formData")}addValidatedData(F,A){this.#F[F]=A}valid(F){return this.#F[F]}get url(){return this.raw.url}get method(){return this.raw.method}get[Gx](){return this.#A}get matchedRoutes(){return this.#A[0].map(([[,F]])=>F)}get routePath(){return this.#A[0].map(([[,F]])=>F)[this.routeIndex].path}};var Vx={Stringify:1,BeforeStream:2,Stream:3},cz1=(F,A)=>{let $=new String(F);return $.isEscaped=!0,$.callbacks=A,$};var fq=async(F,A,$,B,J)=>{if(typeof F==="object"&&!(F instanceof String)){if(!(F instanceof Promise))F=F.toString();if(F instanceof Promise)F=await F}let X=F.callbacks;if(!X?.length)return Promise.resolve(F);if(J)J[0]+=F;else J=[F];let Y=Promise.all(X.map((D)=>D({phase:A,buffer:J,context:B}))).then((D)=>Promise.all(D.filter(Boolean).map((G)=>fq(G,A,!1,B,J))).then(()=>J[0]));if($)return cz1(await Y,X);else return Y};var lz1="text/plain; charset=UTF-8",xq=(F,A)=>{return{"Content-Type":F,...A}},Ex=class{#F;#A;env={};#$;finalized=!1;error;#X;#J;#B;#U;#G;#Z;#D;#z;#W;constructor(F,A){if(this.#F=F,A)this.#J=A.executionCtx,this.env=A.env,this.#Z=A.notFoundHandler,this.#W=A.path,this.#z=A.matchResult}get req(){return this.#A??=new fG(this.#F,this.#W,this.#z),this.#A}get event(){if(this.#J&&"respondWith"in this.#J)return this.#J;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#J)return this.#J;else throw Error("This context has no ExecutionContext")}get res(){return this.#B||=new Response(null,{headers:this.#D??=new Headers})}set res(F){if(this.#B&&F){F=new Response(F.body,F);for(let[A,$]of this.#B.headers.entries()){if(A==="content-type")continue;if(A==="set-cookie"){let B=this.#B.headers.getSetCookie();F.headers.delete("set-cookie");for(let J of B)F.headers.append("set-cookie",J)}else F.headers.set(A,$)}}this.#B=F,this.finalized=!0}render=(...F)=>{return this.#G??=(A)=>this.html(A),this.#G(...F)};setLayout=(F)=>this.#U=F;getLayout=()=>this.#U;setRenderer=(F)=>{this.#G=F};header=(F,A,$)=>{if(this.finalized)this.#B=new Response(this.#B.body,this.#B);let B=this.#B?this.#B.headers:this.#D??=new Headers;if(A===void 0)B.delete(F);else if($?.append)B.append(F,A);else B.set(F,A)};status=(F)=>{this.#X=F};set=(F,A)=>{this.#$??=new Map,this.#$.set(F,A)};get=(F)=>{return this.#$?this.#$.get(F):void 0};get var(){if(!this.#$)return{};return Object.fromEntries(this.#$)}#Y(F,A,$){let B=this.#B?new Headers(this.#B.headers):this.#D??new Headers;if(typeof A==="object"&&"headers"in A){let X=A.headers instanceof Headers?A.headers:new Headers(A.headers);for(let[Y,D]of X)if(Y.toLowerCase()==="set-cookie")B.append(Y,D);else B.set(Y,D)}if($)for(let[X,Y]of Object.entries($))if(typeof Y==="string")B.set(X,Y);else{B.delete(X);for(let D of Y)B.append(X,D)}let J=typeof A==="number"?A:A?.status??this.#X;return new Response(F,{status:J,headers:B})}newResponse=(...F)=>this.#Y(...F);body=(F,A,$)=>this.#Y(F,A,$);text=(F,A,$)=>{return!this.#D&&!this.#X&&!A&&!$&&!this.finalized?new Response(F):this.#Y(F,A,xq(lz1,$))};json=(F,A,$)=>{return this.#Y(JSON.stringify(F),A,xq("application/json",$))};html=(F,A,$)=>{let B=(J)=>this.#Y(J,A,xq("text/html; charset=UTF-8",$));return typeof F==="object"?fq(F,Vx.Stringify,!1,{}).then(B):B(F)};redirect=(F,A)=>{let $=String(F);return this.header("Location",!/[^\x00-\xFF]/.test($)?$:encodeURI($)),this.newResponse(null,A??302)};notFound=()=>{return this.#Z??=()=>new Response,this.#Z(this)}};var x0="ALL",Lx="all",wx=["get","post","put","delete","options","patch"],_G="Can not add a route since the matcher is already built.",yG=class extends Error{};var Ix="__COMPOSED_HANDLER";var pz1=(F)=>{return F.text("404 Not Found",404)},Cx=(F,A)=>{if("getResponse"in F){let $=F.getResponse();return A.newResponse($.body,$)}return console.error(F),A.text("Internal Server Error",500)},bq=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#F="/";routes=[];constructor(F={}){[...wx,Lx].forEach((J)=>{this[J]=(X,...Y)=>{if(typeof X==="string")this.#F=X;else this.#X(J,this.#F,X);return Y.forEach((D)=>{this.#X(J,this.#F,D)}),this}}),this.on=(J,X,...Y)=>{for(let D of[X].flat()){this.#F=D;for(let G of[J].flat())Y.map((Z)=>{this.#X(G.toUpperCase(),this.#F,Z)})}return this},this.use=(J,...X)=>{if(typeof J==="string")this.#F=J;else this.#F="*",X.unshift(J);return X.forEach((Y)=>{this.#X(x0,this.#F,Y)}),this};let{strict:$,...B}=F;Object.assign(this,B),this.getPath=$??!0?F.getPath??Sq:Wx}#A(){let F=new bq({router:this.router,getPath:this.getPath});return F.errorHandler=this.errorHandler,F.#$=this.#$,F.routes=this.routes,F}#$=pz1;errorHandler=Cx;route(F,A){let $=this.basePath(F);return A.routes.map((B)=>{let J;if(A.errorHandler===Cx)J=B.handler;else J=async(X,Y)=>(await Tq([],A.errorHandler)(X,()=>B.handler(X,Y))).res,J[Ix]=B.handler;$.#X(B.method,B.path,J)}),this}basePath(F){let A=this.#A();return A._basePath=w5(this._basePath,F),A}onError=(F)=>{return this.errorHandler=F,this};notFound=(F)=>{return this.#$=F,this};mount(F,A,$){let B,J;if($)if(typeof $==="function")J=$;else if(J=$.optionHandler,$.replaceRequest===!1)B=(D)=>D;else B=$.replaceRequest;let X=J?(D)=>{let G=J(D);return Array.isArray(G)?G:[G]}:(D)=>{let G=void 0;try{G=D.executionCtx}catch{}return[D.env,G]};B||=(()=>{let D=w5(this._basePath,F),G=D==="/"?0:D.length;return(Z)=>{let U=new URL(Z.url);return U.pathname=U.pathname.slice(G)||"/",new Request(U,Z)}})();let Y=async(D,G)=>{let Z=await A(B(D.req.raw),...X(D));if(Z)return Z;await G()};return this.#X(x0,w5(F,"*"),Y),this}#X(F,A,$){F=F.toUpperCase(),A=w5(this._basePath,A);let B={basePath:this._basePath,path:A,method:F,handler:$};this.router.add(F,A,[$,B]),this.routes.push(B)}#J(F,A){if(F instanceof Error)return this.errorHandler(F,A);throw F}#B(F,A,$,B){if(B==="HEAD")return(async()=>new Response(null,await this.#B(F,A,$,"GET")))();let J=this.getPath(F,{env:$}),X=this.router.match(B,J),Y=new Ex(F,{path:J,matchResult:X,env:$,executionCtx:A,notFoundHandler:this.#$});if(X[0].length===1){let G;try{G=X[0][0][0][0](Y,async()=>{Y.res=await this.#$(Y)})}catch(Z){return this.#J(Z,Y)}return G instanceof Promise?G.then((Z)=>Z||(Y.finalized?Y.res:this.#$(Y))).catch((Z)=>this.#J(Z,Y)):G??this.#$(Y)}let D=Tq(X[0],this.errorHandler,this.#$);return(async()=>{try{let G=await D(Y);if(!G.finalized)throw Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return G.res}catch(G){return this.#J(G,Y)}})()}fetch=(F,...A)=>{return this.#B(F,A[1],A[0],F.method)};request=(F,A,$,B)=>{if(F instanceof Request)return this.fetch(A?new Request(F,A):F,$,B);return F=F.toString(),this.fetch(new Request(/^https?:\/\//.test(F)?F:`http://localhost${w5("/",F)}`,A),$,B)};fire=()=>{addEventListener("fetch",(F)=>{F.respondWith(this.#B(F.request,F,void 0,F.request.method))})}};var lB=[];function vG(F,A){let $=this.buildAllMatchers(),B=(J,X)=>{let Y=$[J]||$[x0],D=Y[2][X];if(D)return D;let G=X.match(Y[0]);if(!G)return[[],lB];let Z=G.indexOf("",1);return[Y[1][Z],G]};return this.match=B,B(F,A)}var hG="[^/]+",pB=".*",iB="(?:|/.*)",I5=Symbol(),iz1=new Set(".\\+*[^]$()");function az1(F,A){if(F.length===1)return A.length===1?F<A?-1:1:-1;if(A.length===1)return 1;if(F===pB||F===iB)return 1;else if(A===pB||A===iB)return-1;if(F===hG)return 1;else if(A===hG)return-1;return F.length===A.length?F<A?-1:1:A.length-F.length}var mG=class{#F;#A;#$=Object.create(null);insert(F,A,$,B,J){if(F.length===0){if(this.#F!==void 0)throw I5;if(J)return;this.#F=A;return}let[X,...Y]=F,D=X==="*"?Y.length===0?["","",pB]:["","",hG]:X==="/*"?["","",iB]:X.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),G;if(D){let Z=D[1],U=D[2]||hG;if(Z&&D[2]){if(U===".*")throw I5;if(U=U.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(U))throw I5}if(G=this.#$[U],!G){if(Object.keys(this.#$).some((z)=>z!==pB&&z!==iB))throw I5;if(J)return;if(G=this.#$[U]=new mG,Z!=="")G.#A=B.varIndex++}if(!J&&Z!=="")$.push([Z,G.#A])}else if(G=this.#$[X],!G){if(Object.keys(this.#$).some((Z)=>Z.length>1&&Z!==pB&&Z!==iB))throw I5;if(J)return;G=this.#$[X]=new mG}G.insert(Y,A,$,B,J)}buildRegExpStr(){let A=Object.keys(this.#$).sort(az1).map(($)=>{let B=this.#$[$];return(typeof B.#A==="number"?`(${$})@${B.#A}`:iz1.has($)?`\\${$}`:$)+B.buildRegExpStr()});if(typeof this.#F==="number")A.unshift(`#${this.#F}`);if(A.length===0)return"";if(A.length===1)return A[0];return"(?:"+A.join("|")+")"}};var Nx=class{#F={varIndex:0};#A=new mG;insert(F,A,$){let B=[],J=[];for(let Y=0;;){let D=!1;if(F=F.replace(/\{[^}]+\}/g,(G)=>{let Z=`@\\${Y}`;return J[Y]=[Z,G],Y++,D=!0,Z}),!D)break}let X=F.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let Y=J.length-1;Y>=0;Y--){let[D]=J[Y];for(let G=X.length-1;G>=0;G--)if(X[G].indexOf(D)!==-1){X[G]=X[G].replace(D,J[Y][1]);break}}return this.#A.insert(X,A,B,this.#F,$),B}buildRegExp(){let F=this.#A.buildRegExpStr();if(F==="")return[/^$/,[],[]];let A=0,$=[],B=[];return F=F.replace(/#(\d+)|@(\d+)|\.\*\$/g,(J,X,Y)=>{if(X!==void 0)return $[++A]=Number(X),"$()";if(Y!==void 0)return B[Number(Y)]=++A,"";return""}),[new RegExp(`^${F}`),$,B]}};var nz1=[/^$/,[],Object.create(null)],Px=Object.create(null);function Rx(F){return Px[F]??=new RegExp(F==="*"?"":`^${F.replace(/\/\*$|([.\\+*[^\]$()])/g,(A,$)=>$?`\\${$}`:"(?:|/.*)")}$`)}function rz1(){Px=Object.create(null)}function tz1(F){let A=new Nx,$=[];if(F.length===0)return nz1;let B=F.map((Z)=>[!/\*|\/:/.test(Z[0]),...Z]).sort(([Z,U],[z,W])=>Z?1:z?-1:U.length-W.length),J=Object.create(null);for(let Z=0,U=-1,z=B.length;Z<z;Z++){let[W,H,K]=B[Z];if(W)J[H]=[K.map(([V])=>[V,Object.create(null)]),lB];else U++;let q;try{q=A.insert(H,U,W)}catch(V){throw V===I5?new yG(H):V}if(W)continue;$[U]=K.map(([V,E])=>{let L=Object.create(null);E-=1;for(;E>=0;E--){let[w,I]=q[E];L[w]=I}return[V,L]})}let[X,Y,D]=A.buildRegExp();for(let Z=0,U=$.length;Z<U;Z++)for(let z=0,W=$[Z].length;z<W;z++){let H=$[Z][z]?.[1];if(!H)continue;let K=Object.keys(H);for(let q=0,V=K.length;q<V;q++)H[K[q]]=D[H[K[q]]]}let G=[];for(let Z in Y)G[Z]=$[Y[Z]];return[X,G,J]}function FA(F,A){if(!F)return;for(let $ of Object.keys(F).sort((B,J)=>J.length-B.length))if(Rx($).test(A))return[...F[$]];return}var dG=class{name="RegExpRouter";#F;#A;constructor(){this.#F={[x0]:Object.create(null)},this.#A={[x0]:Object.create(null)}}add(F,A,$){let B=this.#F,J=this.#A;if(!B||!J)throw Error(_G);if(!B[F])[B,J].forEach((D)=>{D[F]=Object.create(null),Object.keys(D[x0]).forEach((G)=>{D[F][G]=[...D[x0][G]]})});if(A==="/*")A="*";let X=(A.match(/\/:/g)||[]).length;if(/\*$/.test(A)){let D=Rx(A);if(F===x0)Object.keys(B).forEach((G)=>{B[G][A]||=FA(B[G],A)||FA(B[x0],A)||[]});else B[F][A]||=FA(B[F],A)||FA(B[x0],A)||[];Object.keys(B).forEach((G)=>{if(F===x0||F===G)Object.keys(B[G]).forEach((Z)=>{D.test(Z)&&B[G][Z].push([$,X])})}),Object.keys(J).forEach((G)=>{if(F===x0||F===G)Object.keys(J[G]).forEach((Z)=>D.test(Z)&&J[G][Z].push([$,X]))});return}let Y=gG(A)||[A];for(let D=0,G=Y.length;D<G;D++){let Z=Y[D];Object.keys(J).forEach((U)=>{if(F===x0||F===U)J[U][Z]||=[...FA(B[U],Z)||FA(B[x0],Z)||[]],J[U][Z].push([$,X-G+D+1])})}}match=vG;buildAllMatchers(){let F=Object.create(null);return Object.keys(this.#A).concat(Object.keys(this.#F)).forEach((A)=>{F[A]||=this.#$(A)}),this.#F=this.#A=void 0,rz1(),F}#$(F){let A=[],$=F===x0;if([this.#F,this.#A].forEach((B)=>{let J=B[F]?Object.keys(B[F]).map((X)=>[X,B[F][X]]):[];if(J.length!==0)$||=!0,A.push(...J);else if(F!==x0)A.push(...Object.keys(B[x0]).map((X)=>[X,B[x0][X]]))}),!$)return null;else return tz1(A)}};var sz1=class{name="PreparedRegExpRouter";#F;#A;constructor(F,A){this.#F=F,this.#A=A}#$(F,A){let $=this.#F[F];$[1].forEach((B)=>B&&B.push(A)),Object.values($[2]).forEach((B)=>B[0].push(A))}#X(F,A,$,B,J){let X=this.#F[F];if(!J)X[2][A][0].push([$,{}]);else B.forEach((Y)=>{if(typeof Y==="number")X[1][Y].push([$,J]);else X[2][Y||A][0].push([$,J])})}add(F,A,$){if(!this.#F[F]){let J=this.#F[x0],X={};for(let Y in J[2])X[Y]=[J[2][Y][0].slice(),lB];this.#F[F]=[J[0],J[1].map((Y)=>Array.isArray(Y)?Y.slice():0),X]}if(A==="/*"||A==="*"){let J=[$,{}];if(F===x0)for(let X in this.#F)this.#$(X,J);else this.#$(F,J);return}let B=this.#A[A];if(!B)throw Error(`Path ${A} is not registered`);for(let[J,X]of B)if(F===x0)for(let Y in this.#F)this.#X(Y,A,$,J,X);else this.#X(F,A,$,J,X)}buildAllMatchers(){return this.#F}match=vG};var gq=class{name="SmartRouter";#F=[];#A=[];constructor(F){this.#F=F.routers}add(F,A,$){if(!this.#A)throw Error(_G);this.#A.push([F,A,$])}match(F,A){if(!this.#A)throw Error("Fatal error");let $=this.#F,B=this.#A,J=$.length,X=0,Y;for(;X<J;X++){let D=$[X];try{for(let G=0,Z=B.length;G<Z;G++)D.add(...B[G]);Y=D.match(F,A)}catch(G){if(G instanceof yG)continue;throw G}this.match=D.match.bind(D),this.#F=[D],this.#A=void 0;break}if(X===J)throw Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,Y}get activeRouter(){if(this.#A||this.#F.length!==1)throw Error("No active router has been determined yet.");return this.#F[0]}};var aB=Object.create(null),_q=class{#F;#A;#$;#X=0;#J=aB;constructor(F,A,$){if(this.#A=$||Object.create(null),this.#F=[],F&&A){let B=Object.create(null);B[F]={handler:A,possibleKeys:[],score:0},this.#F=[B]}this.#$=[]}insert(F,A,$){this.#X=++this.#X;let B=this,J=Ux(A),X=[];for(let Y=0,D=J.length;Y<D;Y++){let G=J[Y],Z=J[Y+1],U=zx(G,Z),z=Array.isArray(U)?U[0]:G;if(z in B.#A){if(B=B.#A[z],U)X.push(U[1]);continue}if(B.#A[z]=new _q,U)B.#$.push(U),X.push(U[1]);B=B.#A[z]}return B.#F.push({[F]:{handler:$,possibleKeys:X.filter((Y,D,G)=>G.indexOf(Y)===D),score:this.#X}}),B}#B(F,A,$,B){let J=[];for(let X=0,Y=F.#F.length;X<Y;X++){let D=F.#F[X],G=D[A]||D[x0],Z={};if(G!==void 0){if(G.params=Object.create(null),J.push(G),$!==aB||B&&B!==aB)for(let U=0,z=G.possibleKeys.length;U<z;U++){let W=G.possibleKeys[U],H=Z[G.score];G.params[W]=B?.[W]&&!H?B[W]:$[W]??B?.[W],Z[G.score]=!0}}}return J}search(F,A){let $=[];this.#J=aB;let J=[this],X=Oq(A),Y=[];for(let D=0,G=X.length;D<G;D++){let Z=X[D],U=D===G-1,z=[];for(let W=0,H=J.length;W<H;W++){let K=J[W],q=K.#A[Z];if(q)if(q.#J=K.#J,U){if(q.#A["*"])$.push(...this.#B(q.#A["*"],F,K.#J));$.push(...this.#B(q,F,K.#J))}else z.push(q);for(let V=0,E=K.#$.length;V<E;V++){let L=K.#$[V],w=K.#J===aB?{}:{...K.#J};if(L==="*"){let S=K.#A["*"];if(S)$.push(...this.#B(S,F,K.#J)),S.#J=w,z.push(S);continue}let[I,P,M]=L;if(!Z&&!(M instanceof RegExp))continue;let u=K.#A[I],g=X.slice(D).join("/");if(M instanceof RegExp){let S=M.exec(g);if(S){if(w[P]=S[0],$.push(...this.#B(u,F,K.#J,w)),Object.keys(u.#A).length){u.#J=w;let O=S[0].match(/\//)?.length??0;(Y[O]||=[]).push(u)}continue}}if(M===!0||M.test(Z))if(w[P]=Z,U){if($.push(...this.#B(u,F,w,K.#J)),u.#A["*"])$.push(...this.#B(u.#A["*"],F,w,K.#J))}else u.#J=w,z.push(u)}}J=z.concat(Y.shift()??[])}if($.length>1)$.sort((D,G)=>{return D.score-G.score});return[$.map(({handler:D,params:G})=>[D,G])]}};var yq=class{name="TrieRouter";#F;constructor(){this.#F=new _q}add(F,A,$){let B=gG(A);if(B){for(let J=0,X=B.length;J<X;J++)this.#F.insert(F,B[J],$);return}this.#F.insert(F,A,$)}match(F,A){return this.#F.search(F,A)}};var C5=class extends bq{constructor(F={}){super(F);this.router=F.router??new gq({routers:[new dG,new yq]})}};var H0={};L5(H0,{xid:()=>vK1,void:()=>Zq1,uuidv7:()=>SK1,uuidv6:()=>OK1,uuidv4:()=>kK1,uuid:()=>TK1,util:()=>A1,url:()=>uK1,uppercase:()=>wJ,unknown:()=>HA,union:()=>ww,undefined:()=>Dq1,ulid:()=>yK1,uint64:()=>Xq1,uint32:()=>$q1,tuple:()=>Ib,trim:()=>jJ,treeifyError:()=>rq,transform:()=>Nw,toUpperCase:()=>TJ,toLowerCase:()=>MJ,toJSONSchema:()=>xL,templateLiteral:()=>jq1,symbol:()=>Yq1,superRefine:()=>ib,success:()=>Nq1,stringbool:()=>uq1,stringFormat:()=>rK1,string:()=>oL,strictObject:()=>Hq1,startsWith:()=>CJ,size:()=>VJ,setErrorMap:()=>gq1,set:()=>Eq1,safeParseAsync:()=>cL,safeParse:()=>dL,safeEncodeAsync:()=>tL,safeEncode:()=>nL,safeDecodeAsync:()=>sL,safeDecode:()=>rL,registry:()=>KZ,regexes:()=>I9,regex:()=>EJ,refine:()=>pb,record:()=>Cb,readonly:()=>vb,property:()=>ML,promise:()=>Mq1,prettifyError:()=>tq,preprocess:()=>xq1,prefault:()=>ub,positive:()=>NL,pipe:()=>lZ,partialRecord:()=>Qq1,parseAsync:()=>mL,parse:()=>hL,overwrite:()=>X7,optional:()=>dZ,object:()=>Wq1,number:()=>Yb,nullish:()=>Cq1,nullable:()=>cZ,null:()=>zb,normalize:()=>RJ,nonpositive:()=>RL,nonoptional:()=>fb,nonnegative:()=>jL,never:()=>Ew,negative:()=>PL,nativeEnum:()=>Lq1,nanoid:()=>bK1,nan:()=>Pq1,multipleOf:()=>M5,minSize:()=>T5,minLength:()=>B8,mime:()=>PJ,maxSize:()=>ZA,maxLength:()=>UA,map:()=>Vq1,lte:()=>C9,lt:()=>B7,lowercase:()=>LJ,looseObject:()=>Kq1,locales:()=>HJ,literal:()=>wq1,length:()=>zA,lazy:()=>db,ksuid:()=>hK1,keyof:()=>zq1,jwt:()=>nK1,json:()=>fq1,iso:()=>hZ,ipv6:()=>dK1,ipv4:()=>mK1,intersection:()=>Lb,int64:()=>Jq1,int32:()=>Aq1,int:()=>eL,instanceof:()=>Sq1,includes:()=>IJ,httpUrl:()=>fK1,hostname:()=>tK1,hex:()=>sK1,hash:()=>oK1,guid:()=>MK1,gte:()=>R3,gt:()=>J7,globalRegistry:()=>b2,getErrorMap:()=>_q1,function:()=>Tq1,formatError:()=>BJ,float64:()=>Fq1,float32:()=>eK1,flattenError:()=>$J,file:()=>Iq1,enum:()=>Cw,endsWith:()=>NJ,encodeAsync:()=>iL,encode:()=>lL,emoji:()=>xK1,email:()=>jK1,e164:()=>aK1,discriminatedUnion:()=>qq1,decodeAsync:()=>aL,decode:()=>pL,date:()=>Uq1,custom:()=>Oq1,cuid2:()=>_K1,cuid:()=>gK1,core:()=>Y7,config:()=>g6,coerce:()=>kw,codec:()=>Rq1,clone:()=>$3,cidrv6:()=>lK1,cidrv4:()=>cK1,check:()=>kq1,catch:()=>gb,boolean:()=>Db,bigint:()=>Bq1,base64url:()=>iK1,base64:()=>pK1,array:()=>aZ,any:()=>Gq1,_function:()=>Tq1,_default:()=>Ob,_ZodString:()=>Fw,ZodXID:()=>Dw,ZodVoid:()=>qb,ZodUnknown:()=>Hb,ZodUnion:()=>Lw,ZodUndefined:()=>Zb,ZodUUID:()=>D7,ZodURL:()=>pZ,ZodULID:()=>Yw,ZodType:()=>v1,ZodTuple:()=>wb,ZodTransform:()=>Mb,ZodTemplateLiteral:()=>hb,ZodSymbol:()=>Gb,ZodSuccess:()=>xb,ZodStringFormat:()=>h0,ZodString:()=>OJ,ZodSet:()=>Pb,ZodRecord:()=>Iw,ZodRealError:()=>j3,ZodReadonly:()=>yb,ZodPromise:()=>cb,ZodPrefault:()=>Sb,ZodPipe:()=>jw,ZodOptional:()=>Pw,ZodObject:()=>nZ,ZodNumberFormat:()=>KA,ZodNumber:()=>uJ,ZodNullable:()=>Tb,ZodNull:()=>Ub,ZodNonOptional:()=>Rw,ZodNever:()=>Kb,ZodNanoID:()=>Bw,ZodNaN:()=>_b,ZodMap:()=>Nb,ZodLiteral:()=>Rb,ZodLazy:()=>mb,ZodKSUID:()=>Gw,ZodJWT:()=>Qw,ZodIssueCode:()=>bq1,ZodIntersection:()=>Eb,ZodISOTime:()=>yZ,ZodISODuration:()=>vZ,ZodISODateTime:()=>gZ,ZodISODate:()=>_Z,ZodIPv6:()=>Uw,ZodIPv4:()=>Zw,ZodGUID:()=>mZ,ZodFunction:()=>lb,ZodFirstPartyTypeKind:()=>Tw,ZodFile:()=>jb,ZodError:()=>vL,ZodEnum:()=>kJ,ZodEmoji:()=>$w,ZodEmail:()=>Aw,ZodE164:()=>qw,ZodDiscriminatedUnion:()=>Vb,ZodDefault:()=>kb,ZodDate:()=>iZ,ZodCustomStringFormat:()=>SJ,ZodCustom:()=>rZ,ZodCodec:()=>Mw,ZodCatch:()=>bb,ZodCUID2:()=>Xw,ZodCUID:()=>Jw,ZodCIDRv6:()=>Ww,ZodCIDRv4:()=>zw,ZodBoolean:()=>fJ,ZodBigIntFormat:()=>Vw,ZodBigInt:()=>xJ,ZodBase64URL:()=>Kw,ZodBase64:()=>Hw,ZodArray:()=>Qb,ZodAny:()=>Wb,TimePrecision:()=>rE,NEVER:()=>vq,$output:()=>pE,$input:()=>iE,$brand:()=>hq});var Y7={};L5(Y7,{version:()=>iQ,util:()=>A1,treeifyError:()=>rq,toJSONSchema:()=>xL,toDotPath:()=>Sx,safeParseAsync:()=>oq,safeParse:()=>sq,safeEncodeAsync:()=>OW1,safeEncode:()=>TW1,safeDecodeAsync:()=>SW1,safeDecode:()=>kW1,registry:()=>KZ,regexes:()=>I9,prettifyError:()=>tq,parseAsync:()=>iG,parse:()=>pG,locales:()=>HJ,isValidJWT:()=>rx,isValidBase64URL:()=>nx,isValidBase64:()=>HV,globalRegistry:()=>b2,globalConfig:()=>nB,formatError:()=>BJ,flattenError:()=>$J,encodeAsync:()=>jW1,encode:()=>PW1,decodeAsync:()=>MW1,decode:()=>RW1,config:()=>g6,clone:()=>$3,_xid:()=>RZ,_void:()=>LL,_uuidv7:()=>LZ,_uuidv6:()=>EZ,_uuidv4:()=>VZ,_uuid:()=>QZ,_url:()=>QJ,_uppercase:()=>wJ,_unknown:()=>VL,_union:()=>$K1,_undefined:()=>KL,_ulid:()=>PZ,_uint64:()=>WL,_uint32:()=>YL,_tuple:()=>XK1,_trim:()=>jJ,_transform:()=>WK1,_toUpperCase:()=>TJ,_toLowerCase:()=>MJ,_templateLiteral:()=>IK1,_symbol:()=>HL,_superRefine:()=>uL,_success:()=>VK1,_stringbool:()=>fL,_stringFormat:()=>WA,_string:()=>aE,_startsWith:()=>CJ,_size:()=>VJ,_set:()=>GK1,_safeParseAsync:()=>DA,_safeParse:()=>YA,_safeEncodeAsync:()=>eG,_safeEncode:()=>sG,_safeDecodeAsync:()=>FZ,_safeDecode:()=>oG,_regex:()=>EJ,_refine:()=>SL,_record:()=>YK1,_readonly:()=>wK1,_property:()=>ML,_promise:()=>NK1,_positive:()=>NL,_pipe:()=>LK1,_parseAsync:()=>XA,_parse:()=>JA,_overwrite:()=>X7,_optional:()=>HK1,_number:()=>FL,_nullable:()=>KK1,_null:()=>qL,_normalize:()=>RJ,_nonpositive:()=>RL,_nonoptional:()=>QK1,_nonnegative:()=>jL,_never:()=>EL,_negative:()=>PL,_nativeEnum:()=>UK1,_nanoid:()=>IZ,_nan:()=>CL,_multipleOf:()=>M5,_minSize:()=>T5,_minLength:()=>B8,_min:()=>R3,_mime:()=>PJ,_maxSize:()=>ZA,_maxLength:()=>UA,_max:()=>C9,_map:()=>DK1,_lte:()=>C9,_lt:()=>B7,_lowercase:()=>LJ,_literal:()=>zK1,_length:()=>zA,_lazy:()=>CK1,_ksuid:()=>jZ,_jwt:()=>xZ,_isoTime:()=>oE,_isoDuration:()=>eE,_isoDateTime:()=>tE,_isoDate:()=>sE,_ipv6:()=>TZ,_ipv4:()=>MZ,_intersection:()=>JK1,_int64:()=>zL,_int32:()=>XL,_int:()=>$L,_includes:()=>IJ,_guid:()=>qJ,_gte:()=>R3,_gt:()=>J7,_float64:()=>JL,_float32:()=>BL,_file:()=>kL,_enum:()=>ZK1,_endsWith:()=>NJ,_encodeAsync:()=>rG,_encode:()=>aG,_emoji:()=>wZ,_email:()=>qZ,_e164:()=>fZ,_discriminatedUnion:()=>BK1,_default:()=>qK1,_decodeAsync:()=>tG,_decode:()=>nG,_date:()=>wL,_custom:()=>OL,_cuid2:()=>NZ,_cuid:()=>CZ,_coercedString:()=>nE,_coercedNumber:()=>AL,_coercedDate:()=>IL,_coercedBoolean:()=>GL,_coercedBigint:()=>UL,_cidrv6:()=>OZ,_cidrv4:()=>kZ,_check:()=>$b,_catch:()=>EK1,_boolean:()=>DL,_bigint:()=>ZL,_base64url:()=>uZ,_base64:()=>SZ,_array:()=>TL,_any:()=>QL,TimePrecision:()=>rE,NEVER:()=>vq,JSONSchemaGenerator:()=>bZ,JSONSchema:()=>Bb,Doc:()=>JZ,$output:()=>pE,$input:()=>iE,$constructor:()=>k,$brand:()=>hq,$ZodXID:()=>BV,$ZodVoid:()=>MV,$ZodUnknown:()=>RV,$ZodUnion:()=>WZ,$ZodUndefined:()=>CV,$ZodUUID:()=>rQ,$ZodURL:()=>sQ,$ZodULID:()=>$V,$ZodType:()=>j1,$ZodTuple:()=>HZ,$ZodTransform:()=>vV,$ZodTemplateLiteral:()=>tV,$ZodSymbol:()=>IV,$ZodSuccess:()=>pV,$ZodStringFormat:()=>b0,$ZodString:()=>j5,$ZodSet:()=>bV,$ZodRegistry:()=>KJ,$ZodRecord:()=>fV,$ZodRealError:()=>P3,$ZodReadonly:()=>rV,$ZodPromise:()=>oV,$ZodPrefault:()=>cV,$ZodPipe:()=>nV,$ZodOptional:()=>hV,$ZodObjectJIT:()=>OV,$ZodObject:()=>ox,$ZodNumberFormat:()=>LV,$ZodNumber:()=>UZ,$ZodNullable:()=>mV,$ZodNull:()=>NV,$ZodNonOptional:()=>lV,$ZodNever:()=>jV,$ZodNanoID:()=>eQ,$ZodNaN:()=>aV,$ZodMap:()=>xV,$ZodLiteral:()=>_V,$ZodLazy:()=>eV,$ZodKSUID:()=>JV,$ZodJWT:()=>VV,$ZodIntersection:()=>uV,$ZodISOTime:()=>DV,$ZodISODuration:()=>GV,$ZodISODateTime:()=>XV,$ZodISODate:()=>YV,$ZodIPv6:()=>UV,$ZodIPv4:()=>ZV,$ZodGUID:()=>nQ,$ZodFunction:()=>sV,$ZodFile:()=>yV,$ZodError:()=>AJ,$ZodEnum:()=>gV,$ZodEncodeError:()=>N5,$ZodEmoji:()=>oQ,$ZodEmail:()=>tQ,$ZodE164:()=>QV,$ZodDiscriminatedUnion:()=>SV,$ZodDefault:()=>dV,$ZodDate:()=>TV,$ZodCustomStringFormat:()=>EV,$ZodCustom:()=>FE,$ZodCodec:()=>DJ,$ZodCheckUpperCase:()=>vQ,$ZodCheckStringFormat:()=>GA,$ZodCheckStartsWith:()=>mQ,$ZodCheckSizeEquals:()=>fQ,$ZodCheckRegex:()=>_Q,$ZodCheckProperty:()=>cQ,$ZodCheckOverwrite:()=>pQ,$ZodCheckNumberFormat:()=>kQ,$ZodCheckMultipleOf:()=>TQ,$ZodCheckMinSize:()=>uQ,$ZodCheckMinLength:()=>bQ,$ZodCheckMimeType:()=>lQ,$ZodCheckMaxSize:()=>SQ,$ZodCheckMaxLength:()=>xQ,$ZodCheckLowerCase:()=>yQ,$ZodCheckLessThan:()=>$Z,$ZodCheckLengthEquals:()=>gQ,$ZodCheckIncludes:()=>hQ,$ZodCheckGreaterThan:()=>BZ,$ZodCheckEndsWith:()=>dQ,$ZodCheckBigIntFormat:()=>OQ,$ZodCheck:()=>n0,$ZodCatch:()=>iV,$ZodCUID2:()=>AV,$ZodCUID:()=>FV,$ZodCIDRv6:()=>WV,$ZodCIDRv4:()=>zV,$ZodBoolean:()=>YJ,$ZodBigIntFormat:()=>wV,$ZodBigInt:()=>zZ,$ZodBase64URL:()=>qV,$ZodBase64:()=>KV,$ZodAsyncError:()=>f2,$ZodArray:()=>kV,$ZodAny:()=>PV});var vq=Object.freeze({status:"aborted"});function k(F,A,$){function B(D,G){var Z;Object.defineProperty(D,"_zod",{value:D._zod??{},enumerable:!1}),(Z=D._zod).traits??(Z.traits=new Set),D._zod.traits.add(F),A(D,G);for(let U in Y.prototype)if(!(U in D))Object.defineProperty(D,U,{value:Y.prototype[U].bind(D)});D._zod.constr=Y,D._zod.def=G}let J=$?.Parent??Object;class X extends J{}Object.defineProperty(X,"name",{value:F});function Y(D){var G;let Z=$?.Parent?new X:this;B(Z,D),(G=Z._zod).deferred??(G.deferred=[]);for(let U of Z._zod.deferred)U();return Z}return Object.defineProperty(Y,"init",{value:B}),Object.defineProperty(Y,Symbol.hasInstance,{value:(D)=>{if($?.Parent&&D instanceof $.Parent)return!0;return D?._zod?.traits?.has(F)}}),Object.defineProperty(Y,"name",{value:F}),Y}var hq=Symbol("zod_brand");class f2 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class N5 extends Error{constructor(F){super(`Encountered unidirectional transform during encode: ${F}`);this.name="ZodEncodeError"}}var nB={};function g6(F){if(F)Object.assign(nB,F);return nB}var A1={};L5(A1,{unwrapMessage:()=>rB,uint8ArrayToHex:()=>CW1,uint8ArrayToBase64url:()=>wW1,uint8ArrayToBase64:()=>Tx,stringifyPrimitive:()=>e,shallowClone:()=>lq,safeExtend:()=>KW1,required:()=>VW1,randomString:()=>DW1,propertyKeyTypes:()=>oB,promiseAllObject:()=>YW1,primitiveTypes:()=>pq,prefixIssues:()=>a3,pick:()=>zW1,partial:()=>QW1,optionalKeys:()=>iq,omit:()=>WW1,objectClone:()=>BW1,numKeys:()=>GW1,nullish:()=>o7,normalizeParams:()=>F1,mergeDefs:()=>F8,merge:()=>qW1,jsonStringifyReplacer:()=>AA,joinValues:()=>v,issue:()=>BA,isPlainObject:()=>A8,isObject:()=>P5,hexToUint8Array:()=>IW1,getSizableOrigin:()=>eB,getParsedType:()=>ZW1,getLengthableOrigin:()=>FJ,getEnumValues:()=>tB,getElementAtPath:()=>XW1,floatSafeRemainder:()=>dq,finalizeIssue:()=>n3,extend:()=>HW1,escapeRegex:()=>x2,esc:()=>cG,defineLazy:()=>n1,createTransparentProxy:()=>UW1,cloneDef:()=>JW1,clone:()=>$3,cleanRegex:()=>sB,cleanEnum:()=>EW1,captureStackTrace:()=>lG,cached:()=>$A,base64urlToUint8Array:()=>LW1,base64ToUint8Array:()=>Mx,assignProp:()=>e7,assertNotEqual:()=>ez1,assertNever:()=>AW1,assertIs:()=>FW1,assertEqual:()=>oz1,assert:()=>$W1,allowsEval:()=>cq,aborted:()=>$8,NUMBER_FORMAT_RANGES:()=>aq,Class:()=>kx,BIGINT_FORMAT_RANGES:()=>nq});function oz1(F){return F}function ez1(F){return F}function FW1(F){}function AW1(F){throw Error()}function $W1(F){}function tB(F){let A=Object.values(F).filter((B)=>typeof B==="number");return Object.entries(F).filter(([B,J])=>A.indexOf(+B)===-1).map(([B,J])=>J)}function v(F,A="|"){return F.map(($)=>e($)).join(A)}function AA(F,A){if(typeof A==="bigint")return A.toString();return A}function $A(F){return{get value(){{let $=F();return Object.defineProperty(this,"value",{value:$}),$}throw Error("cached value already set")}}}function o7(F){return F===null||F===void 0}function sB(F){let A=F.startsWith("^")?1:0,$=F.endsWith("$")?F.length-1:F.length;return F.slice(A,$)}function dq(F,A){let $=(F.toString().split(".")[1]||"").length,B=A.toString(),J=(B.split(".")[1]||"").length;if(J===0&&/\d?e-\d?/.test(B)){let G=B.match(/\d?e-(\d?)/);if(G?.[1])J=Number.parseInt(G[1])}let X=$>J?$:J,Y=Number.parseInt(F.toFixed(X).replace(".","")),D=Number.parseInt(A.toFixed(X).replace(".",""));return Y%D/10**X}var jx=Symbol("evaluating");function n1(F,A,$){let B=void 0;Object.defineProperty(F,A,{get(){if(B===jx)return;if(B===void 0)B=jx,B=$();return B},set(J){Object.defineProperty(F,A,{value:J})},configurable:!0})}function BW1(F){return Object.create(Object.getPrototypeOf(F),Object.getOwnPropertyDescriptors(F))}function e7(F,A,$){Object.defineProperty(F,A,{value:$,writable:!0,enumerable:!0,configurable:!0})}function F8(...F){let A={};for(let $ of F){let B=Object.getOwnPropertyDescriptors($);Object.assign(A,B)}return Object.defineProperties({},A)}function JW1(F){return F8(F._zod.def)}function XW1(F,A){if(!A)return F;return A.reduce(($,B)=>$?.[B],F)}function YW1(F){let A=Object.keys(F),$=A.map((B)=>F[B]);return Promise.all($).then((B)=>{let J={};for(let X=0;X<A.length;X++)J[A[X]]=B[X];return J})}function DW1(F=10){let $="";for(let B=0;B<F;B++)$+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return $}function cG(F){return JSON.stringify(F)}var lG="captureStackTrace"in Error?Error.captureStackTrace:(...F)=>{};function P5(F){return typeof F==="object"&&F!==null&&!Array.isArray(F)}var cq=$A(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(F){return!1}});function A8(F){if(P5(F)===!1)return!1;let A=F.constructor;if(A===void 0)return!0;let $=A.prototype;if(P5($)===!1)return!1;if(Object.prototype.hasOwnProperty.call($,"isPrototypeOf")===!1)return!1;return!0}function lq(F){if(A8(F))return{...F};if(Array.isArray(F))return[...F];return F}function GW1(F){let A=0;for(let $ in F)if(Object.prototype.hasOwnProperty.call(F,$))A++;return A}var ZW1=(F)=>{let A=typeof F;switch(A){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(F)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(F))return"array";if(F===null)return"null";if(F.then&&typeof F.then==="function"&&F.catch&&typeof F.catch==="function")return"promise";if(typeof Map<"u"&&F instanceof Map)return"map";if(typeof Set<"u"&&F instanceof Set)return"set";if(typeof Date<"u"&&F instanceof Date)return"date";if(typeof File<"u"&&F instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${A}`)}},oB=new Set(["string","number","symbol"]),pq=new Set(["string","number","bigint","boolean","symbol","undefined"]);function x2(F){return F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $3(F,A,$){let B=new F._zod.constr(A??F._zod.def);if(!A||$?.parent)B._zod.parent=F;return B}function F1(F){let A=F;if(!A)return{};if(typeof A==="string")return{error:()=>A};if(A?.message!==void 0){if(A?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");A.error=A.message}if(delete A.message,typeof A.error==="string")return{...A,error:()=>A.error};return A}function UW1(F){let A;return new Proxy({},{get($,B,J){return A??(A=F()),Reflect.get(A,B,J)},set($,B,J,X){return A??(A=F()),Reflect.set(A,B,J,X)},has($,B){return A??(A=F()),Reflect.has(A,B)},deleteProperty($,B){return A??(A=F()),Reflect.deleteProperty(A,B)},ownKeys($){return A??(A=F()),Reflect.ownKeys(A)},getOwnPropertyDescriptor($,B){return A??(A=F()),Reflect.getOwnPropertyDescriptor(A,B)},defineProperty($,B,J){return A??(A=F()),Reflect.defineProperty(A,B,J)}})}function e(F){if(typeof F==="bigint")return F.toString()+"n";if(typeof F==="string")return`"${F}"`;return`${F}`}function iq(F){return Object.keys(F).filter((A)=>{return F[A]._zod.optin==="optional"&&F[A]._zod.optout==="optional"})}var aq={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},nq={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function zW1(F,A){let $=F._zod.def,B=F8(F._zod.def,{get shape(){let J={};for(let X in A){if(!(X in $.shape))throw Error(`Unrecognized key: "${X}"`);if(!A[X])continue;J[X]=$.shape[X]}return e7(this,"shape",J),J},checks:[]});return $3(F,B)}function WW1(F,A){let $=F._zod.def,B=F8(F._zod.def,{get shape(){let J={...F._zod.def.shape};for(let X in A){if(!(X in $.shape))throw Error(`Unrecognized key: "${X}"`);if(!A[X])continue;delete J[X]}return e7(this,"shape",J),J},checks:[]});return $3(F,B)}function HW1(F,A){if(!A8(A))throw Error("Invalid input to extend: expected a plain object");let $=F._zod.def.checks;if($&&$.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let J=F8(F._zod.def,{get shape(){let X={...F._zod.def.shape,...A};return e7(this,"shape",X),X},checks:[]});return $3(F,J)}function KW1(F,A){if(!A8(A))throw Error("Invalid input to safeExtend: expected a plain object");let $={...F._zod.def,get shape(){let B={...F._zod.def.shape,...A};return e7(this,"shape",B),B},checks:F._zod.def.checks};return $3(F,$)}function qW1(F,A){let $=F8(F._zod.def,{get shape(){let B={...F._zod.def.shape,...A._zod.def.shape};return e7(this,"shape",B),B},get catchall(){return A._zod.def.catchall},checks:[]});return $3(F,$)}function QW1(F,A,$){let B=F8(A._zod.def,{get shape(){let J=A._zod.def.shape,X={...J};if($)for(let Y in $){if(!(Y in J))throw Error(`Unrecognized key: "${Y}"`);if(!$[Y])continue;X[Y]=F?new F({type:"optional",innerType:J[Y]}):J[Y]}else for(let Y in J)X[Y]=F?new F({type:"optional",innerType:J[Y]}):J[Y];return e7(this,"shape",X),X},checks:[]});return $3(A,B)}function VW1(F,A,$){let B=F8(A._zod.def,{get shape(){let J=A._zod.def.shape,X={...J};if($)for(let Y in $){if(!(Y in X))throw Error(`Unrecognized key: "${Y}"`);if(!$[Y])continue;X[Y]=new F({type:"nonoptional",innerType:J[Y]})}else for(let Y in J)X[Y]=new F({type:"nonoptional",innerType:J[Y]});return e7(this,"shape",X),X},checks:[]});return $3(A,B)}function $8(F,A=0){if(F.aborted===!0)return!0;for(let $=A;$<F.issues.length;$++)if(F.issues[$]?.continue!==!0)return!0;return!1}function a3(F,A){return A.map(($)=>{var B;return(B=$).path??(B.path=[]),$.path.unshift(F),$})}function rB(F){return typeof F==="string"?F:F?.message}function n3(F,A,$){let B={...F,path:F.path??[]};if(!F.message){let J=rB(F.inst?._zod.def?.error?.(F))??rB(A?.error?.(F))??rB($.customError?.(F))??rB($.localeError?.(F))??"Invalid input";B.message=J}if(delete B.inst,delete B.continue,!A?.reportInput)delete B.input;return B}function eB(F){if(F instanceof Set)return"set";if(F instanceof Map)return"map";if(F instanceof File)return"file";return"unknown"}function FJ(F){if(Array.isArray(F))return"array";if(typeof F==="string")return"string";return"unknown"}function BA(...F){let[A,$,B]=F;if(typeof A==="string")return{message:A,code:"custom",input:$,inst:B};return{...A}}function EW1(F){return Object.entries(F).filter(([A,$])=>{return Number.isNaN(Number.parseInt(A,10))}).map((A)=>A[1])}function Mx(F){let A=atob(F),$=new Uint8Array(A.length);for(let B=0;B<A.length;B++)$[B]=A.charCodeAt(B);return $}function Tx(F){let A="";for(let $=0;$<F.length;$++)A+=String.fromCharCode(F[$]);return btoa(A)}function LW1(F){let A=F.replace(/-/g,"+").replace(/_/g,"/"),$="=".repeat((4-A.length%4)%4);return Mx(A+$)}function wW1(F){return Tx(F).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function IW1(F){let A=F.replace(/^0x/,"");if(A.length%2!==0)throw Error("Invalid hex string length");let $=new Uint8Array(A.length/2);for(let B=0;B<A.length;B+=2)$[B/2]=Number.parseInt(A.slice(B,B+2),16);return $}function CW1(F){return Array.from(F).map((A)=>A.toString(16).padStart(2,"0")).join("")}class kx{constructor(...F){}}var Ox=(F,A)=>{F.name="$ZodError",Object.defineProperty(F,"_zod",{value:F._zod,enumerable:!1}),Object.defineProperty(F,"issues",{value:A,enumerable:!1}),F.message=JSON.stringify(A,AA,2),Object.defineProperty(F,"toString",{value:()=>F.message,enumerable:!1})},AJ=k("$ZodError",Ox),P3=k("$ZodError",Ox,{Parent:Error});function $J(F,A=($)=>$.message){let $={},B=[];for(let J of F.issues)if(J.path.length>0)$[J.path[0]]=$[J.path[0]]||[],$[J.path[0]].push(A(J));else B.push(A(J));return{formErrors:B,fieldErrors:$}}function BJ(F,A=($)=>$.message){let $={_errors:[]},B=(J)=>{for(let X of J.issues)if(X.code==="invalid_union"&&X.errors.length)X.errors.map((Y)=>B({issues:Y}));else if(X.code==="invalid_key")B({issues:X.issues});else if(X.code==="invalid_element")B({issues:X.issues});else if(X.path.length===0)$._errors.push(A(X));else{let Y=$,D=0;while(D<X.path.length){let G=X.path[D];if(D!==X.path.length-1)Y[G]=Y[G]||{_errors:[]};else Y[G]=Y[G]||{_errors:[]},Y[G]._errors.push(A(X));Y=Y[G],D++}}};return B(F),$}function rq(F,A=($)=>$.message){let $={errors:[]},B=(J,X=[])=>{var Y,D;for(let G of J.issues)if(G.code==="invalid_union"&&G.errors.length)G.errors.map((Z)=>B({issues:Z},G.path));else if(G.code==="invalid_key")B({issues:G.issues},G.path);else if(G.code==="invalid_element")B({issues:G.issues},G.path);else{let Z=[...X,...G.path];if(Z.length===0){$.errors.push(A(G));continue}let U=$,z=0;while(z<Z.length){let W=Z[z],H=z===Z.length-1;if(typeof W==="string")U.properties??(U.properties={}),(Y=U.properties)[W]??(Y[W]={errors:[]}),U=U.properties[W];else U.items??(U.items=[]),(D=U.items)[W]??(D[W]={errors:[]}),U=U.items[W];if(H)U.errors.push(A(G));z++}}};return B(F),$}function Sx(F){let A=[],$=F.map((B)=>typeof B==="object"?B.key:B);for(let B of $)if(typeof B==="number")A.push(`[${B}]`);else if(typeof B==="symbol")A.push(`[${JSON.stringify(String(B))}]`);else if(/[^\w$]/.test(B))A.push(`[${JSON.stringify(B)}]`);else{if(A.length)A.push(".");A.push(B)}return A.join("")}function tq(F){let A=[],$=[...F.issues].sort((B,J)=>(B.path??[]).length-(J.path??[]).length);for(let B of $)if(A.push(`\u2716 ${B.message}`),B.path?.length)A.push(`  \u2192 at ${Sx(B.path)}`);return A.join(`
`)}var JA=(F)=>(A,$,B,J)=>{let X=B?Object.assign(B,{async:!1}):{async:!1},Y=A._zod.run({value:$,issues:[]},X);if(Y instanceof Promise)throw new f2;if(Y.issues.length){let D=new(J?.Err??F)(Y.issues.map((G)=>n3(G,X,g6())));throw lG(D,J?.callee),D}return Y.value},pG=JA(P3),XA=(F)=>async(A,$,B,J)=>{let X=B?Object.assign(B,{async:!0}):{async:!0},Y=A._zod.run({value:$,issues:[]},X);if(Y instanceof Promise)Y=await Y;if(Y.issues.length){let D=new(J?.Err??F)(Y.issues.map((G)=>n3(G,X,g6())));throw lG(D,J?.callee),D}return Y.value},iG=XA(P3),YA=(F)=>(A,$,B)=>{let J=B?{...B,async:!1}:{async:!1},X=A._zod.run({value:$,issues:[]},J);if(X instanceof Promise)throw new f2;return X.issues.length?{success:!1,error:new(F??AJ)(X.issues.map((Y)=>n3(Y,J,g6())))}:{success:!0,data:X.value}},sq=YA(P3),DA=(F)=>async(A,$,B)=>{let J=B?Object.assign(B,{async:!0}):{async:!0},X=A._zod.run({value:$,issues:[]},J);if(X instanceof Promise)X=await X;return X.issues.length?{success:!1,error:new F(X.issues.map((Y)=>n3(Y,J,g6())))}:{success:!0,data:X.value}},oq=DA(P3),aG=(F)=>(A,$,B)=>{let J=B?Object.assign(B,{direction:"backward"}):{direction:"backward"};return JA(F)(A,$,J)},PW1=aG(P3),nG=(F)=>(A,$,B)=>{return JA(F)(A,$,B)},RW1=nG(P3),rG=(F)=>async(A,$,B)=>{let J=B?Object.assign(B,{direction:"backward"}):{direction:"backward"};return XA(F)(A,$,J)},jW1=rG(P3),tG=(F)=>async(A,$,B)=>{return XA(F)(A,$,B)},MW1=tG(P3),sG=(F)=>(A,$,B)=>{let J=B?Object.assign(B,{direction:"backward"}):{direction:"backward"};return YA(F)(A,$,J)},TW1=sG(P3),oG=(F)=>(A,$,B)=>{return YA(F)(A,$,B)},kW1=oG(P3),eG=(F)=>async(A,$,B)=>{let J=B?Object.assign(B,{direction:"backward"}):{direction:"backward"};return DA(F)(A,$,J)},OW1=eG(P3),FZ=(F)=>async(A,$,B)=>{return DA(F)(A,$,B)},SW1=FZ(P3);var I9={};L5(I9,{xid:()=>$Q,uuid7:()=>bW1,uuid6:()=>xW1,uuid4:()=>fW1,uuid:()=>R5,uppercase:()=>MQ,unicodeEmail:()=>ux,undefined:()=>RQ,ulid:()=>AQ,time:()=>VQ,string:()=>LQ,sha512_hex:()=>FH1,sha512_base64url:()=>$H1,sha512_base64:()=>AH1,sha384_hex:()=>sW1,sha384_base64url:()=>eW1,sha384_base64:()=>oW1,sha256_hex:()=>nW1,sha256_base64url:()=>tW1,sha256_base64:()=>rW1,sha1_hex:()=>pW1,sha1_base64url:()=>aW1,sha1_base64:()=>iW1,rfc5322Email:()=>_W1,number:()=>CQ,null:()=>PQ,nanoid:()=>JQ,md5_hex:()=>dW1,md5_base64url:()=>lW1,md5_base64:()=>cW1,lowercase:()=>jQ,ksuid:()=>BQ,ipv6:()=>UQ,ipv4:()=>ZQ,integer:()=>IQ,idnEmail:()=>yW1,html5Email:()=>gW1,hostname:()=>KQ,hex:()=>mW1,guid:()=>YQ,extendedDuration:()=>uW1,emoji:()=>GQ,email:()=>DQ,e164:()=>qQ,duration:()=>XQ,domain:()=>hW1,datetime:()=>EQ,date:()=>QQ,cuid2:()=>FQ,cuid:()=>eq,cidrv6:()=>WQ,cidrv4:()=>zQ,browserEmail:()=>vW1,boolean:()=>NQ,bigint:()=>wQ,base64url:()=>AZ,base64:()=>HQ});var eq=/^[cC][^\s-]{8,}$/,FQ=/^[0-9a-z]+$/,AQ=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$Q=/^[0-9a-vA-V]{20}$/,BQ=/^[A-Za-z0-9]{27}$/,JQ=/^[a-zA-Z0-9_-]{21}$/,XQ=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,uW1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,YQ=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,R5=(F)=>{if(!F)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${F}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},fW1=R5(4),xW1=R5(6),bW1=R5(7),DQ=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,gW1=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_W1=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ux=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,yW1=ux,vW1=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function GQ(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var ZQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UQ=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,zQ=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,WQ=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HQ=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,AZ=/^[A-Za-z0-9_-]*$/,KQ=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,hW1=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,qQ=/^\+(?:[0-9]){6,14}[0-9]$/,fx="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",QQ=new RegExp(`^${fx}$`);function xx(F){return typeof F.precision==="number"?F.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":F.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${F.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function VQ(F){return new RegExp(`^${xx(F)}$`)}function EQ(F){let A=xx({precision:F.precision}),$=["Z"];if(F.local)$.push("");if(F.offset)$.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let B=`${A}(?:${$.join("|")})`;return new RegExp(`^${fx}T(?:${B})$`)}var LQ=(F)=>{let A=F?`[\\s\\S]{${F?.minimum??0},${F?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${A}$`)},wQ=/^-?\d+n?$/,IQ=/^-?\d+$/,CQ=/^-?\d+(?:\.\d+)?/,NQ=/^(?:true|false)$/i,PQ=/^null$/i;var RQ=/^undefined$/i;var jQ=/^[^A-Z]*$/,MQ=/^[^a-z]*$/,mW1=/^[0-9a-fA-F]*$/;function JJ(F,A){return new RegExp(`^[A-Za-z0-9+/]{${F}}${A}$`)}function XJ(F){return new RegExp(`^[A-Za-z0-9_-]{${F}}$`)}var dW1=/^[0-9a-fA-F]{32}$/,cW1=JJ(22,"=="),lW1=XJ(22),pW1=/^[0-9a-fA-F]{40}$/,iW1=JJ(27,"="),aW1=XJ(27),nW1=/^[0-9a-fA-F]{64}$/,rW1=JJ(43,"="),tW1=XJ(43),sW1=/^[0-9a-fA-F]{96}$/,oW1=JJ(64,""),eW1=XJ(64),FH1=/^[0-9a-fA-F]{128}$/,AH1=JJ(86,"=="),$H1=XJ(86);var n0=k("$ZodCheck",(F,A)=>{var $;F._zod??(F._zod={}),F._zod.def=A,($=F._zod).onattach??($.onattach=[])}),gx={number:"number",bigint:"bigint",object:"date"},$Z=k("$ZodCheckLessThan",(F,A)=>{n0.init(F,A);let $=gx[typeof A.value];F._zod.onattach.push((B)=>{let J=B._zod.bag,X=(A.inclusive?J.maximum:J.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(A.value<X)if(A.inclusive)J.maximum=A.value;else J.exclusiveMaximum=A.value}),F._zod.check=(B)=>{if(A.inclusive?B.value<=A.value:B.value<A.value)return;B.issues.push({origin:$,code:"too_big",maximum:A.value,input:B.value,inclusive:A.inclusive,inst:F,continue:!A.abort})}}),BZ=k("$ZodCheckGreaterThan",(F,A)=>{n0.init(F,A);let $=gx[typeof A.value];F._zod.onattach.push((B)=>{let J=B._zod.bag,X=(A.inclusive?J.minimum:J.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(A.value>X)if(A.inclusive)J.minimum=A.value;else J.exclusiveMinimum=A.value}),F._zod.check=(B)=>{if(A.inclusive?B.value>=A.value:B.value>A.value)return;B.issues.push({origin:$,code:"too_small",minimum:A.value,input:B.value,inclusive:A.inclusive,inst:F,continue:!A.abort})}}),TQ=k("$ZodCheckMultipleOf",(F,A)=>{n0.init(F,A),F._zod.onattach.push(($)=>{var B;(B=$._zod.bag).multipleOf??(B.multipleOf=A.value)}),F._zod.check=($)=>{if(typeof $.value!==typeof A.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof $.value==="bigint"?$.value%A.value===BigInt(0):dq($.value,A.value)===0)return;$.issues.push({origin:typeof $.value,code:"not_multiple_of",divisor:A.value,input:$.value,inst:F,continue:!A.abort})}}),kQ=k("$ZodCheckNumberFormat",(F,A)=>{n0.init(F,A),A.format=A.format||"float64";let $=A.format?.includes("int"),B=$?"int":"number",[J,X]=aq[A.format];F._zod.onattach.push((Y)=>{let D=Y._zod.bag;if(D.format=A.format,D.minimum=J,D.maximum=X,$)D.pattern=IQ}),F._zod.check=(Y)=>{let D=Y.value;if($){if(!Number.isInteger(D)){Y.issues.push({expected:B,format:A.format,code:"invalid_type",continue:!1,input:D,inst:F});return}if(!Number.isSafeInteger(D)){if(D>0)Y.issues.push({input:D,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:F,origin:B,continue:!A.abort});else Y.issues.push({input:D,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:F,origin:B,continue:!A.abort});return}}if(D<J)Y.issues.push({origin:"number",input:D,code:"too_small",minimum:J,inclusive:!0,inst:F,continue:!A.abort});if(D>X)Y.issues.push({origin:"number",input:D,code:"too_big",maximum:X,inst:F})}}),OQ=k("$ZodCheckBigIntFormat",(F,A)=>{n0.init(F,A);let[$,B]=nq[A.format];F._zod.onattach.push((J)=>{let X=J._zod.bag;X.format=A.format,X.minimum=$,X.maximum=B}),F._zod.check=(J)=>{let X=J.value;if(X<$)J.issues.push({origin:"bigint",input:X,code:"too_small",minimum:$,inclusive:!0,inst:F,continue:!A.abort});if(X>B)J.issues.push({origin:"bigint",input:X,code:"too_big",maximum:B,inst:F})}}),SQ=k("$ZodCheckMaxSize",(F,A)=>{var $;n0.init(F,A),($=F._zod.def).when??($.when=(B)=>{let J=B.value;return!o7(J)&&J.size!==void 0}),F._zod.onattach.push((B)=>{let J=B._zod.bag.maximum??Number.POSITIVE_INFINITY;if(A.maximum<J)B._zod.bag.maximum=A.maximum}),F._zod.check=(B)=>{let J=B.value;if(J.size<=A.maximum)return;B.issues.push({origin:eB(J),code:"too_big",maximum:A.maximum,inclusive:!0,input:J,inst:F,continue:!A.abort})}}),uQ=k("$ZodCheckMinSize",(F,A)=>{var $;n0.init(F,A),($=F._zod.def).when??($.when=(B)=>{let J=B.value;return!o7(J)&&J.size!==void 0}),F._zod.onattach.push((B)=>{let J=B._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(A.minimum>J)B._zod.bag.minimum=A.minimum}),F._zod.check=(B)=>{let J=B.value;if(J.size>=A.minimum)return;B.issues.push({origin:eB(J),code:"too_small",minimum:A.minimum,inclusive:!0,input:J,inst:F,continue:!A.abort})}}),fQ=k("$ZodCheckSizeEquals",(F,A)=>{var $;n0.init(F,A),($=F._zod.def).when??($.when=(B)=>{let J=B.value;return!o7(J)&&J.size!==void 0}),F._zod.onattach.push((B)=>{let J=B._zod.bag;J.minimum=A.size,J.maximum=A.size,J.size=A.size}),F._zod.check=(B)=>{let J=B.value,X=J.size;if(X===A.size)return;let Y=X>A.size;B.issues.push({origin:eB(J),...Y?{code:"too_big",maximum:A.size}:{code:"too_small",minimum:A.size},inclusive:!0,exact:!0,input:B.value,inst:F,continue:!A.abort})}}),xQ=k("$ZodCheckMaxLength",(F,A)=>{var $;n0.init(F,A),($=F._zod.def).when??($.when=(B)=>{let J=B.value;return!o7(J)&&J.length!==void 0}),F._zod.onattach.push((B)=>{let J=B._zod.bag.maximum??Number.POSITIVE_INFINITY;if(A.maximum<J)B._zod.bag.maximum=A.maximum}),F._zod.check=(B)=>{let J=B.value;if(J.length<=A.maximum)return;let Y=FJ(J);B.issues.push({origin:Y,code:"too_big",maximum:A.maximum,inclusive:!0,input:J,inst:F,continue:!A.abort})}}),bQ=k("$ZodCheckMinLength",(F,A)=>{var $;n0.init(F,A),($=F._zod.def).when??($.when=(B)=>{let J=B.value;return!o7(J)&&J.length!==void 0}),F._zod.onattach.push((B)=>{let J=B._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(A.minimum>J)B._zod.bag.minimum=A.minimum}),F._zod.check=(B)=>{let J=B.value;if(J.length>=A.minimum)return;let Y=FJ(J);B.issues.push({origin:Y,code:"too_small",minimum:A.minimum,inclusive:!0,input:J,inst:F,continue:!A.abort})}}),gQ=k("$ZodCheckLengthEquals",(F,A)=>{var $;n0.init(F,A),($=F._zod.def).when??($.when=(B)=>{let J=B.value;return!o7(J)&&J.length!==void 0}),F._zod.onattach.push((B)=>{let J=B._zod.bag;J.minimum=A.length,J.maximum=A.length,J.length=A.length}),F._zod.check=(B)=>{let J=B.value,X=J.length;if(X===A.length)return;let Y=FJ(J),D=X>A.length;B.issues.push({origin:Y,...D?{code:"too_big",maximum:A.length}:{code:"too_small",minimum:A.length},inclusive:!0,exact:!0,input:B.value,inst:F,continue:!A.abort})}}),GA=k("$ZodCheckStringFormat",(F,A)=>{var $,B;if(n0.init(F,A),F._zod.onattach.push((J)=>{let X=J._zod.bag;if(X.format=A.format,A.pattern)X.patterns??(X.patterns=new Set),X.patterns.add(A.pattern)}),A.pattern)($=F._zod).check??($.check=(J)=>{if(A.pattern.lastIndex=0,A.pattern.test(J.value))return;J.issues.push({origin:"string",code:"invalid_format",format:A.format,input:J.value,...A.pattern?{pattern:A.pattern.toString()}:{},inst:F,continue:!A.abort})});else(B=F._zod).check??(B.check=()=>{})}),_Q=k("$ZodCheckRegex",(F,A)=>{GA.init(F,A),F._zod.check=($)=>{if(A.pattern.lastIndex=0,A.pattern.test($.value))return;$.issues.push({origin:"string",code:"invalid_format",format:"regex",input:$.value,pattern:A.pattern.toString(),inst:F,continue:!A.abort})}}),yQ=k("$ZodCheckLowerCase",(F,A)=>{A.pattern??(A.pattern=jQ),GA.init(F,A)}),vQ=k("$ZodCheckUpperCase",(F,A)=>{A.pattern??(A.pattern=MQ),GA.init(F,A)}),hQ=k("$ZodCheckIncludes",(F,A)=>{n0.init(F,A);let $=x2(A.includes),B=new RegExp(typeof A.position==="number"?`^.{${A.position}}${$}`:$);A.pattern=B,F._zod.onattach.push((J)=>{let X=J._zod.bag;X.patterns??(X.patterns=new Set),X.patterns.add(B)}),F._zod.check=(J)=>{if(J.value.includes(A.includes,A.position))return;J.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:A.includes,input:J.value,inst:F,continue:!A.abort})}}),mQ=k("$ZodCheckStartsWith",(F,A)=>{n0.init(F,A);let $=new RegExp(`^${x2(A.prefix)}.*`);A.pattern??(A.pattern=$),F._zod.onattach.push((B)=>{let J=B._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add($)}),F._zod.check=(B)=>{if(B.value.startsWith(A.prefix))return;B.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:A.prefix,input:B.value,inst:F,continue:!A.abort})}}),dQ=k("$ZodCheckEndsWith",(F,A)=>{n0.init(F,A);let $=new RegExp(`.*${x2(A.suffix)}$`);A.pattern??(A.pattern=$),F._zod.onattach.push((B)=>{let J=B._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add($)}),F._zod.check=(B)=>{if(B.value.endsWith(A.suffix))return;B.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:A.suffix,input:B.value,inst:F,continue:!A.abort})}});function bx(F,A,$){if(F.issues.length)A.issues.push(...a3($,F.issues))}var cQ=k("$ZodCheckProperty",(F,A)=>{n0.init(F,A),F._zod.check=($)=>{let B=A.schema._zod.run({value:$.value[A.property],issues:[]},{});if(B instanceof Promise)return B.then((J)=>bx(J,$,A.property));bx(B,$,A.property);return}}),lQ=k("$ZodCheckMimeType",(F,A)=>{n0.init(F,A);let $=new Set(A.mime);F._zod.onattach.push((B)=>{B._zod.bag.mime=A.mime}),F._zod.check=(B)=>{if($.has(B.value.type))return;B.issues.push({code:"invalid_value",values:A.mime,input:B.value.type,inst:F,continue:!A.abort})}}),pQ=k("$ZodCheckOverwrite",(F,A)=>{n0.init(F,A),F._zod.check=($)=>{$.value=A.tx($.value)}});class JZ{constructor(F=[]){if(this.content=[],this.indent=0,this)this.args=F}indented(F){this.indent+=1,F(this),this.indent-=1}write(F){if(typeof F==="function"){F(this,{execution:"sync"}),F(this,{execution:"async"});return}let $=F.split(`
`).filter((X)=>X),B=Math.min(...$.map((X)=>X.length-X.trimStart().length)),J=$.map((X)=>X.slice(B)).map((X)=>" ".repeat(this.indent*2)+X);for(let X of J)this.content.push(X)}compile(){let F=Function,A=this?.args,B=[...(this?.content??[""]).map((J)=>`  ${J}`)];return new F(...A,B.join(`
`))}}var iQ={major:4,minor:1,patch:12};var j1=k("$ZodType",(F,A)=>{var $;F??(F={}),F._zod.def=A,F._zod.bag=F._zod.bag||{},F._zod.version=iQ;let B=[...F._zod.def.checks??[]];if(F._zod.traits.has("$ZodCheck"))B.unshift(F);for(let J of B)for(let X of J._zod.onattach)X(F);if(B.length===0)($=F._zod).deferred??($.deferred=[]),F._zod.deferred?.push(()=>{F._zod.run=F._zod.parse});else{let J=(Y,D,G)=>{let Z=$8(Y),U;for(let z of D){if(z._zod.def.when){if(!z._zod.def.when(Y))continue}else if(Z)continue;let W=Y.issues.length,H=z._zod.check(Y);if(H instanceof Promise&&G?.async===!1)throw new f2;if(U||H instanceof Promise)U=(U??Promise.resolve()).then(async()=>{if(await H,Y.issues.length===W)return;if(!Z)Z=$8(Y,W)});else{if(Y.issues.length===W)continue;if(!Z)Z=$8(Y,W)}}if(U)return U.then(()=>{return Y});return Y},X=(Y,D,G)=>{if($8(Y))return Y.aborted=!0,Y;let Z=J(D,B,G);if(Z instanceof Promise){if(G.async===!1)throw new f2;return Z.then((U)=>F._zod.parse(U,G))}return F._zod.parse(Z,G)};F._zod.run=(Y,D)=>{if(D.skipChecks)return F._zod.parse(Y,D);if(D.direction==="backward"){let Z=F._zod.parse({value:Y.value,issues:[]},{...D,skipChecks:!0});if(Z instanceof Promise)return Z.then((U)=>{return X(U,Y,D)});return X(Z,Y,D)}let G=F._zod.parse(Y,D);if(G instanceof Promise){if(D.async===!1)throw new f2;return G.then((Z)=>J(Z,B,D))}return J(G,B,D)}}F["~standard"]={validate:(J)=>{try{let X=sq(F,J);return X.success?{value:X.data}:{issues:X.error?.issues}}catch(X){return oq(F,J).then((Y)=>Y.success?{value:Y.data}:{issues:Y.error?.issues})}},vendor:"zod",version:1}}),j5=k("$ZodString",(F,A)=>{j1.init(F,A),F._zod.pattern=[...F?._zod.bag?.patterns??[]].pop()??LQ(F._zod.bag),F._zod.parse=($,B)=>{if(A.coerce)try{$.value=String($.value)}catch(J){}if(typeof $.value==="string")return $;return $.issues.push({expected:"string",code:"invalid_type",input:$.value,inst:F}),$}}),b0=k("$ZodStringFormat",(F,A)=>{GA.init(F,A),j5.init(F,A)}),nQ=k("$ZodGUID",(F,A)=>{A.pattern??(A.pattern=YQ),b0.init(F,A)}),rQ=k("$ZodUUID",(F,A)=>{if(A.version){let B={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[A.version];if(B===void 0)throw Error(`Invalid UUID version: "${A.version}"`);A.pattern??(A.pattern=R5(B))}else A.pattern??(A.pattern=R5());b0.init(F,A)}),tQ=k("$ZodEmail",(F,A)=>{A.pattern??(A.pattern=DQ),b0.init(F,A)}),sQ=k("$ZodURL",(F,A)=>{b0.init(F,A),F._zod.check=($)=>{try{let B=$.value.trim(),J=new URL(B);if(A.hostname){if(A.hostname.lastIndex=0,!A.hostname.test(J.hostname))$.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:KQ.source,input:$.value,inst:F,continue:!A.abort})}if(A.protocol){if(A.protocol.lastIndex=0,!A.protocol.test(J.protocol.endsWith(":")?J.protocol.slice(0,-1):J.protocol))$.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:A.protocol.source,input:$.value,inst:F,continue:!A.abort})}if(A.normalize)$.value=J.href;else $.value=B;return}catch(B){$.issues.push({code:"invalid_format",format:"url",input:$.value,inst:F,continue:!A.abort})}}}),oQ=k("$ZodEmoji",(F,A)=>{A.pattern??(A.pattern=GQ()),b0.init(F,A)}),eQ=k("$ZodNanoID",(F,A)=>{A.pattern??(A.pattern=JQ),b0.init(F,A)}),FV=k("$ZodCUID",(F,A)=>{A.pattern??(A.pattern=eq),b0.init(F,A)}),AV=k("$ZodCUID2",(F,A)=>{A.pattern??(A.pattern=FQ),b0.init(F,A)}),$V=k("$ZodULID",(F,A)=>{A.pattern??(A.pattern=AQ),b0.init(F,A)}),BV=k("$ZodXID",(F,A)=>{A.pattern??(A.pattern=$Q),b0.init(F,A)}),JV=k("$ZodKSUID",(F,A)=>{A.pattern??(A.pattern=BQ),b0.init(F,A)}),XV=k("$ZodISODateTime",(F,A)=>{A.pattern??(A.pattern=EQ(A)),b0.init(F,A)}),YV=k("$ZodISODate",(F,A)=>{A.pattern??(A.pattern=QQ),b0.init(F,A)}),DV=k("$ZodISOTime",(F,A)=>{A.pattern??(A.pattern=VQ(A)),b0.init(F,A)}),GV=k("$ZodISODuration",(F,A)=>{A.pattern??(A.pattern=XQ),b0.init(F,A)}),ZV=k("$ZodIPv4",(F,A)=>{A.pattern??(A.pattern=ZQ),b0.init(F,A),F._zod.onattach.push(($)=>{let B=$._zod.bag;B.format="ipv4"})}),UV=k("$ZodIPv6",(F,A)=>{A.pattern??(A.pattern=UQ),b0.init(F,A),F._zod.onattach.push(($)=>{let B=$._zod.bag;B.format="ipv6"}),F._zod.check=($)=>{try{new URL(`http://[${$.value}]`)}catch{$.issues.push({code:"invalid_format",format:"ipv6",input:$.value,inst:F,continue:!A.abort})}}}),zV=k("$ZodCIDRv4",(F,A)=>{A.pattern??(A.pattern=zQ),b0.init(F,A)}),WV=k("$ZodCIDRv6",(F,A)=>{A.pattern??(A.pattern=WQ),b0.init(F,A),F._zod.check=($)=>{let B=$.value.split("/");try{if(B.length!==2)throw Error();let[J,X]=B;if(!X)throw Error();let Y=Number(X);if(`${Y}`!==X)throw Error();if(Y<0||Y>128)throw Error();new URL(`http://[${J}]`)}catch{$.issues.push({code:"invalid_format",format:"cidrv6",input:$.value,inst:F,continue:!A.abort})}}});function HV(F){if(F==="")return!0;if(F.length%4!==0)return!1;try{return atob(F),!0}catch{return!1}}var KV=k("$ZodBase64",(F,A)=>{A.pattern??(A.pattern=HQ),b0.init(F,A),F._zod.onattach.push(($)=>{$._zod.bag.contentEncoding="base64"}),F._zod.check=($)=>{if(HV($.value))return;$.issues.push({code:"invalid_format",format:"base64",input:$.value,inst:F,continue:!A.abort})}});function nx(F){if(!AZ.test(F))return!1;let A=F.replace(/[-_]/g,(B)=>B==="-"?"+":"/"),$=A.padEnd(Math.ceil(A.length/4)*4,"=");return HV($)}var qV=k("$ZodBase64URL",(F,A)=>{A.pattern??(A.pattern=AZ),b0.init(F,A),F._zod.onattach.push(($)=>{$._zod.bag.contentEncoding="base64url"}),F._zod.check=($)=>{if(nx($.value))return;$.issues.push({code:"invalid_format",format:"base64url",input:$.value,inst:F,continue:!A.abort})}}),QV=k("$ZodE164",(F,A)=>{A.pattern??(A.pattern=qQ),b0.init(F,A)});function rx(F,A=null){try{let $=F.split(".");if($.length!==3)return!1;let[B]=$;if(!B)return!1;let J=JSON.parse(atob(B));if("typ"in J&&J?.typ!=="JWT")return!1;if(!J.alg)return!1;if(A&&(!("alg"in J)||J.alg!==A))return!1;return!0}catch{return!1}}var VV=k("$ZodJWT",(F,A)=>{b0.init(F,A),F._zod.check=($)=>{if(rx($.value,A.alg))return;$.issues.push({code:"invalid_format",format:"jwt",input:$.value,inst:F,continue:!A.abort})}}),EV=k("$ZodCustomStringFormat",(F,A)=>{b0.init(F,A),F._zod.check=($)=>{if(A.fn($.value))return;$.issues.push({code:"invalid_format",format:A.format,input:$.value,inst:F,continue:!A.abort})}}),UZ=k("$ZodNumber",(F,A)=>{j1.init(F,A),F._zod.pattern=F._zod.bag.pattern??CQ,F._zod.parse=($,B)=>{if(A.coerce)try{$.value=Number($.value)}catch(Y){}let J=$.value;if(typeof J==="number"&&!Number.isNaN(J)&&Number.isFinite(J))return $;let X=typeof J==="number"?Number.isNaN(J)?"NaN":!Number.isFinite(J)?"Infinity":void 0:void 0;return $.issues.push({expected:"number",code:"invalid_type",input:J,inst:F,...X?{received:X}:{}}),$}}),LV=k("$ZodNumber",(F,A)=>{kQ.init(F,A),UZ.init(F,A)}),YJ=k("$ZodBoolean",(F,A)=>{j1.init(F,A),F._zod.pattern=NQ,F._zod.parse=($,B)=>{if(A.coerce)try{$.value=Boolean($.value)}catch(X){}let J=$.value;if(typeof J==="boolean")return $;return $.issues.push({expected:"boolean",code:"invalid_type",input:J,inst:F}),$}}),zZ=k("$ZodBigInt",(F,A)=>{j1.init(F,A),F._zod.pattern=wQ,F._zod.parse=($,B)=>{if(A.coerce)try{$.value=BigInt($.value)}catch(J){}if(typeof $.value==="bigint")return $;return $.issues.push({expected:"bigint",code:"invalid_type",input:$.value,inst:F}),$}}),wV=k("$ZodBigInt",(F,A)=>{OQ.init(F,A),zZ.init(F,A)}),IV=k("$ZodSymbol",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(typeof J==="symbol")return $;return $.issues.push({expected:"symbol",code:"invalid_type",input:J,inst:F}),$}}),CV=k("$ZodUndefined",(F,A)=>{j1.init(F,A),F._zod.pattern=RQ,F._zod.values=new Set([void 0]),F._zod.optin="optional",F._zod.optout="optional",F._zod.parse=($,B)=>{let J=$.value;if(typeof J>"u")return $;return $.issues.push({expected:"undefined",code:"invalid_type",input:J,inst:F}),$}}),NV=k("$ZodNull",(F,A)=>{j1.init(F,A),F._zod.pattern=PQ,F._zod.values=new Set([null]),F._zod.parse=($,B)=>{let J=$.value;if(J===null)return $;return $.issues.push({expected:"null",code:"invalid_type",input:J,inst:F}),$}}),PV=k("$ZodAny",(F,A)=>{j1.init(F,A),F._zod.parse=($)=>$}),RV=k("$ZodUnknown",(F,A)=>{j1.init(F,A),F._zod.parse=($)=>$}),jV=k("$ZodNever",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{return $.issues.push({expected:"never",code:"invalid_type",input:$.value,inst:F}),$}}),MV=k("$ZodVoid",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(typeof J>"u")return $;return $.issues.push({expected:"void",code:"invalid_type",input:J,inst:F}),$}}),TV=k("$ZodDate",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{if(A.coerce)try{$.value=new Date($.value)}catch(D){}let J=$.value,X=J instanceof Date;if(X&&!Number.isNaN(J.getTime()))return $;return $.issues.push({expected:"date",code:"invalid_type",input:J,...X?{received:"Invalid Date"}:{},inst:F}),$}});function yx(F,A,$){if(F.issues.length)A.issues.push(...a3($,F.issues));A.value[$]=F.value}var kV=k("$ZodArray",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(!Array.isArray(J))return $.issues.push({expected:"array",code:"invalid_type",input:J,inst:F}),$;$.value=Array(J.length);let X=[];for(let Y=0;Y<J.length;Y++){let D=J[Y],G=A.element._zod.run({value:D,issues:[]},B);if(G instanceof Promise)X.push(G.then((Z)=>yx(Z,$,Y)));else yx(G,$,Y)}if(X.length)return Promise.all(X).then(()=>$);return $}});function ZZ(F,A,$,B){if(F.issues.length)A.issues.push(...a3($,F.issues));if(F.value===void 0){if($ in B)A.value[$]=void 0}else A.value[$]=F.value}function tx(F){let A=Object.keys(F.shape);for(let B of A)if(!F.shape?.[B]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${B}": expected a Zod schema`);let $=iq(F.shape);return{...F,keys:A,keySet:new Set(A),numKeys:A.length,optionalKeys:new Set($)}}function sx(F,A,$,B,J,X){let Y=[],D=J.keySet,G=J.catchall._zod,Z=G.def.type;for(let U of Object.keys(A)){if(D.has(U))continue;if(Z==="never"){Y.push(U);continue}let z=G.run({value:A[U],issues:[]},B);if(z instanceof Promise)F.push(z.then((W)=>ZZ(W,$,U,A)));else ZZ(z,$,U,A)}if(Y.length)$.issues.push({code:"unrecognized_keys",keys:Y,input:A,inst:X});if(!F.length)return $;return Promise.all(F).then(()=>{return $})}var ox=k("$ZodObject",(F,A)=>{if(j1.init(F,A),!Object.getOwnPropertyDescriptor(A,"shape")?.get){let D=A.shape;Object.defineProperty(A,"shape",{get:()=>{let G={...D};return Object.defineProperty(A,"shape",{value:G}),G}})}let B=$A(()=>tx(A));n1(F._zod,"propValues",()=>{let D=A.shape,G={};for(let Z in D){let U=D[Z]._zod;if(U.values){G[Z]??(G[Z]=new Set);for(let z of U.values)G[Z].add(z)}}return G});let J=P5,X=A.catchall,Y;F._zod.parse=(D,G)=>{Y??(Y=B.value);let Z=D.value;if(!J(Z))return D.issues.push({expected:"object",code:"invalid_type",input:Z,inst:F}),D;D.value={};let U=[],z=Y.shape;for(let W of Y.keys){let K=z[W]._zod.run({value:Z[W],issues:[]},G);if(K instanceof Promise)U.push(K.then((q)=>ZZ(q,D,W,Z)));else ZZ(K,D,W,Z)}if(!X)return U.length?Promise.all(U).then(()=>D):D;return sx(U,Z,D,G,B.value,F)}}),OV=k("$ZodObjectJIT",(F,A)=>{ox.init(F,A);let $=F._zod.parse,B=$A(()=>tx(A)),J=(W)=>{let H=new JZ(["shape","payload","ctx"]),K=B.value,q=(w)=>{let I=cG(w);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};H.write("const input = payload.value;");let V=Object.create(null),E=0;for(let w of K.keys)V[w]=`key_${E++}`;H.write("const newResult = {};");for(let w of K.keys){let I=V[w],P=cG(w);H.write(`const ${I} = ${q(w)};`),H.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        
        if (${I}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${I}.value;
        }
        
      `)}H.write("payload.value = newResult;"),H.write("return payload;");let L=H.compile();return(w,I)=>L(W,w,I)},X,Y=P5,D=!nB.jitless,Z=D&&cq.value,U=A.catchall,z;F._zod.parse=(W,H)=>{z??(z=B.value);let K=W.value;if(!Y(K))return W.issues.push({expected:"object",code:"invalid_type",input:K,inst:F}),W;if(D&&Z&&H?.async===!1&&H.jitless!==!0){if(!X)X=J(A.shape);if(W=X(W,H),!U)return W;return sx([],K,W,H,z,F)}return $(W,H)}});function vx(F,A,$,B){for(let X of F)if(X.issues.length===0)return A.value=X.value,A;let J=F.filter((X)=>!$8(X));if(J.length===1)return A.value=J[0].value,J[0];return A.issues.push({code:"invalid_union",input:A.value,inst:$,errors:F.map((X)=>X.issues.map((Y)=>n3(Y,B,g6())))}),A}var WZ=k("$ZodUnion",(F,A)=>{j1.init(F,A),n1(F._zod,"optin",()=>A.options.some((J)=>J._zod.optin==="optional")?"optional":void 0),n1(F._zod,"optout",()=>A.options.some((J)=>J._zod.optout==="optional")?"optional":void 0),n1(F._zod,"values",()=>{if(A.options.every((J)=>J._zod.values))return new Set(A.options.flatMap((J)=>Array.from(J._zod.values)));return}),n1(F._zod,"pattern",()=>{if(A.options.every((J)=>J._zod.pattern)){let J=A.options.map((X)=>X._zod.pattern);return new RegExp(`^(${J.map((X)=>sB(X.source)).join("|")})$`)}return});let $=A.options.length===1,B=A.options[0]._zod.run;F._zod.parse=(J,X)=>{if($)return B(J,X);let Y=!1,D=[];for(let G of A.options){let Z=G._zod.run({value:J.value,issues:[]},X);if(Z instanceof Promise)D.push(Z),Y=!0;else{if(Z.issues.length===0)return Z;D.push(Z)}}if(!Y)return vx(D,J,F,X);return Promise.all(D).then((G)=>{return vx(G,J,F,X)})}}),SV=k("$ZodDiscriminatedUnion",(F,A)=>{WZ.init(F,A);let $=F._zod.parse;n1(F._zod,"propValues",()=>{let J={};for(let X of A.options){let Y=X._zod.propValues;if(!Y||Object.keys(Y).length===0)throw Error(`Invalid discriminated union option at index "${A.options.indexOf(X)}"`);for(let[D,G]of Object.entries(Y)){if(!J[D])J[D]=new Set;for(let Z of G)J[D].add(Z)}}return J});let B=$A(()=>{let J=A.options,X=new Map;for(let Y of J){let D=Y._zod.propValues?.[A.discriminator];if(!D||D.size===0)throw Error(`Invalid discriminated union option at index "${A.options.indexOf(Y)}"`);for(let G of D){if(X.has(G))throw Error(`Duplicate discriminator value "${String(G)}"`);X.set(G,Y)}}return X});F._zod.parse=(J,X)=>{let Y=J.value;if(!P5(Y))return J.issues.push({code:"invalid_type",expected:"object",input:Y,inst:F}),J;let D=B.value.get(Y?.[A.discriminator]);if(D)return D._zod.run(J,X);if(A.unionFallback)return $(J,X);return J.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:A.discriminator,input:Y,path:[A.discriminator],inst:F}),J}}),uV=k("$ZodIntersection",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value,X=A.left._zod.run({value:J,issues:[]},B),Y=A.right._zod.run({value:J,issues:[]},B);if(X instanceof Promise||Y instanceof Promise)return Promise.all([X,Y]).then(([G,Z])=>{return hx($,G,Z)});return hx($,X,Y)}});function aQ(F,A){if(F===A)return{valid:!0,data:F};if(F instanceof Date&&A instanceof Date&&+F===+A)return{valid:!0,data:F};if(A8(F)&&A8(A)){let $=Object.keys(A),B=Object.keys(F).filter((X)=>$.indexOf(X)!==-1),J={...F,...A};for(let X of B){let Y=aQ(F[X],A[X]);if(!Y.valid)return{valid:!1,mergeErrorPath:[X,...Y.mergeErrorPath]};J[X]=Y.data}return{valid:!0,data:J}}if(Array.isArray(F)&&Array.isArray(A)){if(F.length!==A.length)return{valid:!1,mergeErrorPath:[]};let $=[];for(let B=0;B<F.length;B++){let J=F[B],X=A[B],Y=aQ(J,X);if(!Y.valid)return{valid:!1,mergeErrorPath:[B,...Y.mergeErrorPath]};$.push(Y.data)}return{valid:!0,data:$}}return{valid:!1,mergeErrorPath:[]}}function hx(F,A,$){if(A.issues.length)F.issues.push(...A.issues);if($.issues.length)F.issues.push(...$.issues);if($8(F))return F;let B=aQ(A.value,$.value);if(!B.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(B.mergeErrorPath)}`);return F.value=B.data,F}var HZ=k("$ZodTuple",(F,A)=>{j1.init(F,A);let $=A.items,B=$.length-[...$].reverse().findIndex((J)=>J._zod.optin!=="optional");F._zod.parse=(J,X)=>{let Y=J.value;if(!Array.isArray(Y))return J.issues.push({input:Y,inst:F,expected:"tuple",code:"invalid_type"}),J;J.value=[];let D=[];if(!A.rest){let Z=Y.length>$.length,U=Y.length<B-1;if(Z||U)return J.issues.push({...Z?{code:"too_big",maximum:$.length}:{code:"too_small",minimum:$.length},input:Y,inst:F,origin:"array"}),J}let G=-1;for(let Z of $){if(G++,G>=Y.length){if(G>=B)continue}let U=Z._zod.run({value:Y[G],issues:[]},X);if(U instanceof Promise)D.push(U.then((z)=>XZ(z,J,G)));else XZ(U,J,G)}if(A.rest){let Z=Y.slice($.length);for(let U of Z){G++;let z=A.rest._zod.run({value:U,issues:[]},X);if(z instanceof Promise)D.push(z.then((W)=>XZ(W,J,G)));else XZ(z,J,G)}}if(D.length)return Promise.all(D).then(()=>J);return J}});function XZ(F,A,$){if(F.issues.length)A.issues.push(...a3($,F.issues));A.value[$]=F.value}var fV=k("$ZodRecord",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(!A8(J))return $.issues.push({expected:"record",code:"invalid_type",input:J,inst:F}),$;let X=[];if(A.keyType._zod.values){let Y=A.keyType._zod.values;$.value={};for(let G of Y)if(typeof G==="string"||typeof G==="number"||typeof G==="symbol"){let Z=A.valueType._zod.run({value:J[G],issues:[]},B);if(Z instanceof Promise)X.push(Z.then((U)=>{if(U.issues.length)$.issues.push(...a3(G,U.issues));$.value[G]=U.value}));else{if(Z.issues.length)$.issues.push(...a3(G,Z.issues));$.value[G]=Z.value}}let D;for(let G in J)if(!Y.has(G))D=D??[],D.push(G);if(D&&D.length>0)$.issues.push({code:"unrecognized_keys",input:J,inst:F,keys:D})}else{$.value={};for(let Y of Reflect.ownKeys(J)){if(Y==="__proto__")continue;let D=A.keyType._zod.run({value:Y,issues:[]},B);if(D instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(D.issues.length){$.issues.push({code:"invalid_key",origin:"record",issues:D.issues.map((Z)=>n3(Z,B,g6())),input:Y,path:[Y],inst:F}),$.value[D.value]=D.value;continue}let G=A.valueType._zod.run({value:J[Y],issues:[]},B);if(G instanceof Promise)X.push(G.then((Z)=>{if(Z.issues.length)$.issues.push(...a3(Y,Z.issues));$.value[D.value]=Z.value}));else{if(G.issues.length)$.issues.push(...a3(Y,G.issues));$.value[D.value]=G.value}}}if(X.length)return Promise.all(X).then(()=>$);return $}}),xV=k("$ZodMap",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(!(J instanceof Map))return $.issues.push({expected:"map",code:"invalid_type",input:J,inst:F}),$;let X=[];$.value=new Map;for(let[Y,D]of J){let G=A.keyType._zod.run({value:Y,issues:[]},B),Z=A.valueType._zod.run({value:D,issues:[]},B);if(G instanceof Promise||Z instanceof Promise)X.push(Promise.all([G,Z]).then(([U,z])=>{mx(U,z,$,Y,J,F,B)}));else mx(G,Z,$,Y,J,F,B)}if(X.length)return Promise.all(X).then(()=>$);return $}});function mx(F,A,$,B,J,X,Y){if(F.issues.length)if(oB.has(typeof B))$.issues.push(...a3(B,F.issues));else $.issues.push({code:"invalid_key",origin:"map",input:J,inst:X,issues:F.issues.map((D)=>n3(D,Y,g6()))});if(A.issues.length)if(oB.has(typeof B))$.issues.push(...a3(B,A.issues));else $.issues.push({origin:"map",code:"invalid_element",input:J,inst:X,key:B,issues:A.issues.map((D)=>n3(D,Y,g6()))});$.value.set(F.value,A.value)}var bV=k("$ZodSet",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(!(J instanceof Set))return $.issues.push({input:J,inst:F,expected:"set",code:"invalid_type"}),$;let X=[];$.value=new Set;for(let Y of J){let D=A.valueType._zod.run({value:Y,issues:[]},B);if(D instanceof Promise)X.push(D.then((G)=>dx(G,$)));else dx(D,$)}if(X.length)return Promise.all(X).then(()=>$);return $}});function dx(F,A){if(F.issues.length)A.issues.push(...F.issues);A.value.add(F.value)}var gV=k("$ZodEnum",(F,A)=>{j1.init(F,A);let $=tB(A.entries),B=new Set($);F._zod.values=B,F._zod.pattern=new RegExp(`^(${$.filter((J)=>oB.has(typeof J)).map((J)=>typeof J==="string"?x2(J):J.toString()).join("|")})$`),F._zod.parse=(J,X)=>{let Y=J.value;if(B.has(Y))return J;return J.issues.push({code:"invalid_value",values:$,input:Y,inst:F}),J}}),_V=k("$ZodLiteral",(F,A)=>{if(j1.init(F,A),A.values.length===0)throw Error("Cannot create literal schema with no valid values");F._zod.values=new Set(A.values),F._zod.pattern=new RegExp(`^(${A.values.map(($)=>typeof $==="string"?x2($):$?x2($.toString()):String($)).join("|")})$`),F._zod.parse=($,B)=>{let J=$.value;if(F._zod.values.has(J))return $;return $.issues.push({code:"invalid_value",values:A.values,input:J,inst:F}),$}}),yV=k("$ZodFile",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{let J=$.value;if(J instanceof File)return $;return $.issues.push({expected:"file",code:"invalid_type",input:J,inst:F}),$}}),vV=k("$ZodTransform",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{if(B.direction==="backward")throw new N5(F.constructor.name);let J=A.transform($.value,$);if(B.async)return(J instanceof Promise?J:Promise.resolve(J)).then((Y)=>{return $.value=Y,$});if(J instanceof Promise)throw new f2;return $.value=J,$}});function cx(F,A){if(F.issues.length&&A===void 0)return{issues:[],value:void 0};return F}var hV=k("$ZodOptional",(F,A)=>{j1.init(F,A),F._zod.optin="optional",F._zod.optout="optional",n1(F._zod,"values",()=>{return A.innerType._zod.values?new Set([...A.innerType._zod.values,void 0]):void 0}),n1(F._zod,"pattern",()=>{let $=A.innerType._zod.pattern;return $?new RegExp(`^(${sB($.source)})?$`):void 0}),F._zod.parse=($,B)=>{if(A.innerType._zod.optin==="optional"){let J=A.innerType._zod.run($,B);if(J instanceof Promise)return J.then((X)=>cx(X,$.value));return cx(J,$.value)}if($.value===void 0)return $;return A.innerType._zod.run($,B)}}),mV=k("$ZodNullable",(F,A)=>{j1.init(F,A),n1(F._zod,"optin",()=>A.innerType._zod.optin),n1(F._zod,"optout",()=>A.innerType._zod.optout),n1(F._zod,"pattern",()=>{let $=A.innerType._zod.pattern;return $?new RegExp(`^(${sB($.source)}|null)$`):void 0}),n1(F._zod,"values",()=>{return A.innerType._zod.values?new Set([...A.innerType._zod.values,null]):void 0}),F._zod.parse=($,B)=>{if($.value===null)return $;return A.innerType._zod.run($,B)}}),dV=k("$ZodDefault",(F,A)=>{j1.init(F,A),F._zod.optin="optional",n1(F._zod,"values",()=>A.innerType._zod.values),F._zod.parse=($,B)=>{if(B.direction==="backward")return A.innerType._zod.run($,B);if($.value===void 0)return $.value=A.defaultValue,$;let J=A.innerType._zod.run($,B);if(J instanceof Promise)return J.then((X)=>lx(X,A));return lx(J,A)}});function lx(F,A){if(F.value===void 0)F.value=A.defaultValue;return F}var cV=k("$ZodPrefault",(F,A)=>{j1.init(F,A),F._zod.optin="optional",n1(F._zod,"values",()=>A.innerType._zod.values),F._zod.parse=($,B)=>{if(B.direction==="backward")return A.innerType._zod.run($,B);if($.value===void 0)$.value=A.defaultValue;return A.innerType._zod.run($,B)}}),lV=k("$ZodNonOptional",(F,A)=>{j1.init(F,A),n1(F._zod,"values",()=>{let $=A.innerType._zod.values;return $?new Set([...$].filter((B)=>B!==void 0)):void 0}),F._zod.parse=($,B)=>{let J=A.innerType._zod.run($,B);if(J instanceof Promise)return J.then((X)=>px(X,F));return px(J,F)}});function px(F,A){if(!F.issues.length&&F.value===void 0)F.issues.push({code:"invalid_type",expected:"nonoptional",input:F.value,inst:A});return F}var pV=k("$ZodSuccess",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{if(B.direction==="backward")throw new N5("ZodSuccess");let J=A.innerType._zod.run($,B);if(J instanceof Promise)return J.then((X)=>{return $.value=X.issues.length===0,$});return $.value=J.issues.length===0,$}}),iV=k("$ZodCatch",(F,A)=>{j1.init(F,A),n1(F._zod,"optin",()=>A.innerType._zod.optin),n1(F._zod,"optout",()=>A.innerType._zod.optout),n1(F._zod,"values",()=>A.innerType._zod.values),F._zod.parse=($,B)=>{if(B.direction==="backward")return A.innerType._zod.run($,B);let J=A.innerType._zod.run($,B);if(J instanceof Promise)return J.then((X)=>{if($.value=X.value,X.issues.length)$.value=A.catchValue({...$,error:{issues:X.issues.map((Y)=>n3(Y,B,g6()))},input:$.value}),$.issues=[];return $});if($.value=J.value,J.issues.length)$.value=A.catchValue({...$,error:{issues:J.issues.map((X)=>n3(X,B,g6()))},input:$.value}),$.issues=[];return $}}),aV=k("$ZodNaN",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{if(typeof $.value!=="number"||!Number.isNaN($.value))return $.issues.push({input:$.value,inst:F,expected:"nan",code:"invalid_type"}),$;return $}}),nV=k("$ZodPipe",(F,A)=>{j1.init(F,A),n1(F._zod,"values",()=>A.in._zod.values),n1(F._zod,"optin",()=>A.in._zod.optin),n1(F._zod,"optout",()=>A.out._zod.optout),n1(F._zod,"propValues",()=>A.in._zod.propValues),F._zod.parse=($,B)=>{if(B.direction==="backward"){let X=A.out._zod.run($,B);if(X instanceof Promise)return X.then((Y)=>YZ(Y,A.in,B));return YZ(X,A.in,B)}let J=A.in._zod.run($,B);if(J instanceof Promise)return J.then((X)=>YZ(X,A.out,B));return YZ(J,A.out,B)}});function YZ(F,A,$){if(F.issues.length)return F.aborted=!0,F;return A._zod.run({value:F.value,issues:F.issues},$)}var DJ=k("$ZodCodec",(F,A)=>{j1.init(F,A),n1(F._zod,"values",()=>A.in._zod.values),n1(F._zod,"optin",()=>A.in._zod.optin),n1(F._zod,"optout",()=>A.out._zod.optout),n1(F._zod,"propValues",()=>A.in._zod.propValues),F._zod.parse=($,B)=>{if((B.direction||"forward")==="forward"){let X=A.in._zod.run($,B);if(X instanceof Promise)return X.then((Y)=>DZ(Y,A,B));return DZ(X,A,B)}else{let X=A.out._zod.run($,B);if(X instanceof Promise)return X.then((Y)=>DZ(Y,A,B));return DZ(X,A,B)}}});function DZ(F,A,$){if(F.issues.length)return F.aborted=!0,F;if(($.direction||"forward")==="forward"){let J=A.transform(F.value,F);if(J instanceof Promise)return J.then((X)=>GZ(F,X,A.out,$));return GZ(F,J,A.out,$)}else{let J=A.reverseTransform(F.value,F);if(J instanceof Promise)return J.then((X)=>GZ(F,X,A.in,$));return GZ(F,J,A.in,$)}}function GZ(F,A,$,B){if(F.issues.length)return F.aborted=!0,F;return $._zod.run({value:A,issues:F.issues},B)}var rV=k("$ZodReadonly",(F,A)=>{j1.init(F,A),n1(F._zod,"propValues",()=>A.innerType._zod.propValues),n1(F._zod,"values",()=>A.innerType._zod.values),n1(F._zod,"optin",()=>A.innerType._zod.optin),n1(F._zod,"optout",()=>A.innerType._zod.optout),F._zod.parse=($,B)=>{if(B.direction==="backward")return A.innerType._zod.run($,B);let J=A.innerType._zod.run($,B);if(J instanceof Promise)return J.then(ix);return ix(J)}});function ix(F){return F.value=Object.freeze(F.value),F}var tV=k("$ZodTemplateLiteral",(F,A)=>{j1.init(F,A);let $=[];for(let B of A.parts)if(typeof B==="object"&&B!==null){if(!B._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...B._zod.traits].shift()}`);let J=B._zod.pattern instanceof RegExp?B._zod.pattern.source:B._zod.pattern;if(!J)throw Error(`Invalid template literal part: ${B._zod.traits}`);let X=J.startsWith("^")?1:0,Y=J.endsWith("$")?J.length-1:J.length;$.push(J.slice(X,Y))}else if(B===null||pq.has(typeof B))$.push(x2(`${B}`));else throw Error(`Invalid template literal part: ${B}`);F._zod.pattern=new RegExp(`^${$.join("")}$`),F._zod.parse=(B,J)=>{if(typeof B.value!=="string")return B.issues.push({input:B.value,inst:F,expected:"template_literal",code:"invalid_type"}),B;if(F._zod.pattern.lastIndex=0,!F._zod.pattern.test(B.value))return B.issues.push({input:B.value,inst:F,code:"invalid_format",format:A.format??"template_literal",pattern:F._zod.pattern.source}),B;return B}}),sV=k("$ZodFunction",(F,A)=>{return j1.init(F,A),F._def=A,F._zod.def=A,F.implement=($)=>{if(typeof $!=="function")throw Error("implement() must be called with a function");return function(...B){let J=F._def.input?pG(F._def.input,B):B,X=Reflect.apply($,this,J);if(F._def.output)return pG(F._def.output,X);return X}},F.implementAsync=($)=>{if(typeof $!=="function")throw Error("implementAsync() must be called with a function");return async function(...B){let J=F._def.input?await iG(F._def.input,B):B,X=await Reflect.apply($,this,J);if(F._def.output)return await iG(F._def.output,X);return X}},F._zod.parse=($,B)=>{if(typeof $.value!=="function")return $.issues.push({code:"invalid_type",expected:"function",input:$.value,inst:F}),$;if(F._def.output&&F._def.output._zod.def.type==="promise")$.value=F.implementAsync($.value);else $.value=F.implement($.value);return $},F.input=(...$)=>{let B=F.constructor;if(Array.isArray($[0]))return new B({type:"function",input:new HZ({type:"tuple",items:$[0],rest:$[1]}),output:F._def.output});return new B({type:"function",input:$[0],output:F._def.output})},F.output=($)=>{return new F.constructor({type:"function",input:F._def.input,output:$})},F}),oV=k("$ZodPromise",(F,A)=>{j1.init(F,A),F._zod.parse=($,B)=>{return Promise.resolve($.value).then((J)=>A.innerType._zod.run({value:J,issues:[]},B))}}),eV=k("$ZodLazy",(F,A)=>{j1.init(F,A),n1(F._zod,"innerType",()=>A.getter()),n1(F._zod,"pattern",()=>F._zod.innerType._zod.pattern),n1(F._zod,"propValues",()=>F._zod.innerType._zod.propValues),n1(F._zod,"optin",()=>F._zod.innerType._zod.optin??void 0),n1(F._zod,"optout",()=>F._zod.innerType._zod.optout??void 0),F._zod.parse=($,B)=>{return F._zod.innerType._zod.run($,B)}}),FE=k("$ZodCustom",(F,A)=>{n0.init(F,A),j1.init(F,A),F._zod.parse=($,B)=>{return $},F._zod.check=($)=>{let B=$.value,J=A.fn(B);if(J instanceof Promise)return J.then((X)=>ax(X,$,B,F));ax(J,$,B,F);return}});function ax(F,A,$,B){if(!F){let J={code:"custom",input:$,inst:B,path:[...B._zod.def.path??[]],continue:!B._zod.def.abort};if(B._zod.def.params)J.params=B._zod.def.params;A.issues.push(BA(J))}}var HJ={};L5(HJ,{zhTW:()=>cE,zhCN:()=>dE,yo:()=>lE,vi:()=>mE,ur:()=>hE,uk:()=>WJ,ua:()=>vE,tr:()=>yE,th:()=>_E,ta:()=>gE,sv:()=>bE,sl:()=>xE,ru:()=>fE,pt:()=>uE,ps:()=>OE,pl:()=>SE,ota:()=>kE,no:()=>TE,nl:()=>ME,ms:()=>jE,mk:()=>RE,lt:()=>PE,ko:()=>NE,km:()=>ZJ,kh:()=>CE,ka:()=>IE,ja:()=>wE,it:()=>LE,is:()=>EE,id:()=>VE,hu:()=>QE,he:()=>qE,frCA:()=>KE,fr:()=>HE,fi:()=>WE,fa:()=>zE,es:()=>UE,eo:()=>ZE,en:()=>GJ,de:()=>GE,da:()=>DE,cs:()=>YE,ca:()=>XE,bg:()=>JE,be:()=>BE,az:()=>$E,ar:()=>AE});var JH1=()=>{let F={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return(J)=>{switch(J.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${J.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${e(J.values[0])}`;return`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${J.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${X} ${J.maximum.toString()} ${Y.unit??"\u0639\u0646\u0635\u0631"}`;return`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${J.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${X} ${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${J.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${X} ${J.minimum.toString()} ${Y.unit}`;return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${J.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${X} ${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${J.prefix}"`;if(X.format==="ends_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${X.suffix}"`;if(X.format==="includes")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${X.includes}"`;if(X.format==="regex")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${X.pattern}`;return`${B[X.format]??J.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${J.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${J.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${J.keys.length>1?"\u0629":""}: ${v(J.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${J.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${J.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function AE(){return{localeError:JH1()}}var XH1=()=>{let F={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${J.expected}, daxil olan ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${e(J.values[0])}`;return`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${J.origin??"d\u0259y\u0259r"} ${X}${J.maximum.toString()} ${Y.unit??"element"}`;return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${J.origin??"d\u0259y\u0259r"} ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${J.origin} ${X}${J.minimum.toString()} ${Y.unit}`;return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${J.origin} ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Yanl\u0131\u015F m\u0259tn: "${X.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`;if(X.format==="ends_with")return`Yanl\u0131\u015F m\u0259tn: "${X.suffix}" il\u0259 bitm\u0259lidir`;if(X.format==="includes")return`Yanl\u0131\u015F m\u0259tn: "${X.includes}" daxil olmal\u0131d\u0131r`;if(X.format==="regex")return`Yanl\u0131\u015F m\u0259tn: ${X.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`;return`Yanl\u0131\u015F ${B[X.format]??J.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${J.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${J.keys.length>1?"lar":""}: ${v(J.keys,", ")}`;case"invalid_key":return`${J.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${J.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function $E(){return{localeError:XH1()}}function ex(F,A,$,B){let J=Math.abs(F),X=J%10,Y=J%100;if(Y>=11&&Y<=19)return B;if(X===1)return A;if(X>=2&&X<=4)return $;return B}var YH1=()=>{let F={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(J))return"\u043C\u0430\u0441\u0456\u045E";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return(J)=>{switch(J.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${J.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${e(J.values[0])}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y){let D=Number(J.maximum),G=ex(D,Y.unit.one,Y.unit.few,Y.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${J.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${Y.verb} ${X}${J.maximum.toString()} ${G}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${J.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y){let D=Number(J.minimum),G=ex(D,Y.unit.one,Y.unit.few,Y.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${J.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${Y.verb} ${X}${J.minimum.toString()} ${G}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${J.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${X.prefix}"`;if(X.format==="ends_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${X.suffix}"`;if(X.format==="includes")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${X.includes}"`;if(X.format==="regex")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${X.pattern}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${B[X.format]??J.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${J.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${J.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${v(J.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${J.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${J.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function BE(){return{localeError:YH1()}}var DH1=(F)=>{let A=typeof F;switch(A){case"number":return Number.isNaN(F)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(F))return"\u043C\u0430\u0441\u0438\u0432";if(F===null)return"null";if(Object.getPrototypeOf(F)!==Object.prototype&&F.constructor)return F.constructor.name}}return A},GH1=()=>{let F={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function A(B){return F[B]??null}let $={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return(B)=>{switch(B.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${B.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${DH1(B.input)}`;case"invalid_value":if(B.values.length===1)return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${e(B.values[0])}`;return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${v(B.values,"|")}`;case"too_big":{let J=B.inclusive?"<=":"<",X=A(B.origin);if(X)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${B.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${J}${B.maximum.toString()} ${X.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${B.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${J}${B.maximum.toString()}`}case"too_small":{let J=B.inclusive?">=":">",X=A(B.origin);if(X)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${B.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${J}${B.minimum.toString()} ${X.unit}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${B.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${J}${B.minimum.toString()}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${J.prefix}"`;if(J.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${J.suffix}"`;if(J.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${J.includes}"`;if(J.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${J.pattern}`;let X="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";if(J.format==="emoji")X="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(J.format==="datetime")X="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(J.format==="date")X="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";if(J.format==="time")X="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(J.format==="duration")X="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";return`${X} ${$[J.format]??B.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${B.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${B.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${B.keys.length>1?"\u043E\u0432\u0435":""}: ${v(B.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${B.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${B.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function JE(){return{localeError:GH1()}}var ZH1=()=>{let F={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(J)=>{switch(J.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${J.expected}, s'ha rebut ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Valor inv\xE0lid: s'esperava ${e(J.values[0])}`;return`Opci\xF3 inv\xE0lida: s'esperava una de ${v(J.values," o ")}`;case"too_big":{let X=J.inclusive?"com a m\xE0xim":"menys de",Y=A(J.origin);if(Y)return`Massa gran: s'esperava que ${J.origin??"el valor"} contingu\xE9s ${X} ${J.maximum.toString()} ${Y.unit??"elements"}`;return`Massa gran: s'esperava que ${J.origin??"el valor"} fos ${X} ${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?"com a m\xEDnim":"m\xE9s de",Y=A(J.origin);if(Y)return`Massa petit: s'esperava que ${J.origin} contingu\xE9s ${X} ${J.minimum.toString()} ${Y.unit}`;return`Massa petit: s'esperava que ${J.origin} fos ${X} ${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Format inv\xE0lid: ha de comen\xE7ar amb "${X.prefix}"`;if(X.format==="ends_with")return`Format inv\xE0lid: ha d'acabar amb "${X.suffix}"`;if(X.format==="includes")return`Format inv\xE0lid: ha d'incloure "${X.includes}"`;if(X.format==="regex")return`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${X.pattern}`;return`Format inv\xE0lid per a ${B[X.format]??J.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${J.divisor}`;case"unrecognized_keys":return`Clau${J.keys.length>1?"s":""} no reconeguda${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${J.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${J.origin}`;default:return"Entrada inv\xE0lida"}}};function XE(){return{localeError:ZH1()}}var UH1=()=>{let F={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(J))return"pole";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return(J)=>{switch(J.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${J.expected}, obdr\u017Eeno ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${e(J.values[0])}`;return`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${J.origin??"hodnota"} mus\xED m\xEDt ${X}${J.maximum.toString()} ${Y.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${J.origin??"hodnota"} mus\xED b\xFDt ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${J.origin??"hodnota"} mus\xED m\xEDt ${X}${J.minimum.toString()} ${Y.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${J.origin??"hodnota"} mus\xED b\xFDt ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${X.prefix}"`;if(X.format==="ends_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${X.suffix}"`;if(X.format==="includes")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${X.includes}"`;if(X.format==="regex")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${X.pattern}`;return`Neplatn\xFD form\xE1t ${B[X.format]??J.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${J.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${v(J.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${J.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${J.origin}`;default:return"Neplatn\xFD vstup"}}};function YE(){return{localeError:UH1()}}var zH1=()=>{let F={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},A={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function $(Y){return F[Y]??null}function B(Y){return A[Y]??Y}let J=(Y)=>{let D=typeof Y;switch(D){case"number":return Number.isNaN(Y)?"NaN":"tal";case"object":{if(Array.isArray(Y))return"liste";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name;return"objekt"}}return D},X={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ugyldigt input: forventede ${B(Y.expected)}, fik ${B(J(Y.input))}`;case"invalid_value":if(Y.values.length===1)return`Ugyldig v\xE6rdi: forventede ${e(Y.values[0])}`;return`Ugyldigt valg: forventede en af f\xF8lgende ${v(Y.values,"|")}`;case"too_big":{let D=Y.inclusive?"<=":"<",G=$(Y.origin),Z=B(Y.origin);if(G)return`For stor: forventede ${Z??"value"} ${G.verb} ${D} ${Y.maximum.toString()} ${G.unit??"elementer"}`;return`For stor: forventede ${Z??"value"} havde ${D} ${Y.maximum.toString()}`}case"too_small":{let D=Y.inclusive?">=":">",G=$(Y.origin),Z=B(Y.origin);if(G)return`For lille: forventede ${Z} ${G.verb} ${D} ${Y.minimum.toString()} ${G.unit}`;return`For lille: forventede ${Z} havde ${D} ${Y.minimum.toString()}`}case"invalid_format":{let D=Y;if(D.format==="starts_with")return`Ugyldig streng: skal starte med "${D.prefix}"`;if(D.format==="ends_with")return`Ugyldig streng: skal ende med "${D.suffix}"`;if(D.format==="includes")return`Ugyldig streng: skal indeholde "${D.includes}"`;if(D.format==="regex")return`Ugyldig streng: skal matche m\xF8nsteret ${D.pattern}`;return`Ugyldig ${X[D.format]??Y.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${v(Y.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${Y.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${Y.origin}`;default:return"Ugyldigt input"}}};function DE(){return{localeError:zH1()}}var WH1=()=>{let F={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"Zahl";case"object":{if(Array.isArray(J))return"Array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return(J)=>{switch(J.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${J.expected}, erhalten ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ung\xFCltige Eingabe: erwartet ${e(J.values[0])}`;return`Ung\xFCltige Option: erwartet eine von ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Zu gro\xDF: erwartet, dass ${J.origin??"Wert"} ${X}${J.maximum.toString()} ${Y.unit??"Elemente"} hat`;return`Zu gro\xDF: erwartet, dass ${J.origin??"Wert"} ${X}${J.maximum.toString()} ist`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Zu klein: erwartet, dass ${J.origin} ${X}${J.minimum.toString()} ${Y.unit} hat`;return`Zu klein: erwartet, dass ${J.origin} ${X}${J.minimum.toString()} ist`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Ung\xFCltiger String: muss mit "${X.prefix}" beginnen`;if(X.format==="ends_with")return`Ung\xFCltiger String: muss mit "${X.suffix}" enden`;if(X.format==="includes")return`Ung\xFCltiger String: muss "${X.includes}" enthalten`;if(X.format==="regex")return`Ung\xFCltiger String: muss dem Muster ${X.pattern} entsprechen`;return`Ung\xFCltig: ${B[X.format]??J.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${J.divisor} sein`;case"unrecognized_keys":return`${J.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${v(J.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${J.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${J.origin}`;default:return"Ung\xFCltige Eingabe"}}};function GE(){return{localeError:WH1()}}var HH1=(F)=>{let A=typeof F;switch(A){case"number":return Number.isNaN(F)?"NaN":"number";case"object":{if(Array.isArray(F))return"array";if(F===null)return"null";if(Object.getPrototypeOf(F)!==Object.prototype&&F.constructor)return F.constructor.name}}return A},KH1=()=>{let F={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function A(B){return F[B]??null}let $={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(B)=>{switch(B.code){case"invalid_type":return`Invalid input: expected ${B.expected}, received ${HH1(B.input)}`;case"invalid_value":if(B.values.length===1)return`Invalid input: expected ${e(B.values[0])}`;return`Invalid option: expected one of ${v(B.values,"|")}`;case"too_big":{let J=B.inclusive?"<=":"<",X=A(B.origin);if(X)return`Too big: expected ${B.origin??"value"} to have ${J}${B.maximum.toString()} ${X.unit??"elements"}`;return`Too big: expected ${B.origin??"value"} to be ${J}${B.maximum.toString()}`}case"too_small":{let J=B.inclusive?">=":">",X=A(B.origin);if(X)return`Too small: expected ${B.origin} to have ${J}${B.minimum.toString()} ${X.unit}`;return`Too small: expected ${B.origin} to be ${J}${B.minimum.toString()}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`Invalid string: must start with "${J.prefix}"`;if(J.format==="ends_with")return`Invalid string: must end with "${J.suffix}"`;if(J.format==="includes")return`Invalid string: must include "${J.includes}"`;if(J.format==="regex")return`Invalid string: must match pattern ${J.pattern}`;return`Invalid ${$[J.format]??B.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${B.divisor}`;case"unrecognized_keys":return`Unrecognized key${B.keys.length>1?"s":""}: ${v(B.keys,", ")}`;case"invalid_key":return`Invalid key in ${B.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${B.origin}`;default:return"Invalid input"}}};function GJ(){return{localeError:KH1()}}var qH1=(F)=>{let A=typeof F;switch(A){case"number":return Number.isNaN(F)?"NaN":"nombro";case"object":{if(Array.isArray(F))return"tabelo";if(F===null)return"senvalora";if(Object.getPrototypeOf(F)!==Object.prototype&&F.constructor)return F.constructor.name}}return A},QH1=()=>{let F={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function A(B){return F[B]??null}let $={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return(B)=>{switch(B.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${B.expected}, ricevi\u011Dis ${qH1(B.input)}`;case"invalid_value":if(B.values.length===1)return`Nevalida enigo: atendi\u011Dis ${e(B.values[0])}`;return`Nevalida opcio: atendi\u011Dis unu el ${v(B.values,"|")}`;case"too_big":{let J=B.inclusive?"<=":"<",X=A(B.origin);if(X)return`Tro granda: atendi\u011Dis ke ${B.origin??"valoro"} havu ${J}${B.maximum.toString()} ${X.unit??"elementojn"}`;return`Tro granda: atendi\u011Dis ke ${B.origin??"valoro"} havu ${J}${B.maximum.toString()}`}case"too_small":{let J=B.inclusive?">=":">",X=A(B.origin);if(X)return`Tro malgranda: atendi\u011Dis ke ${B.origin} havu ${J}${B.minimum.toString()} ${X.unit}`;return`Tro malgranda: atendi\u011Dis ke ${B.origin} estu ${J}${B.minimum.toString()}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`Nevalida karaktraro: devas komenci\u011Di per "${J.prefix}"`;if(J.format==="ends_with")return`Nevalida karaktraro: devas fini\u011Di per "${J.suffix}"`;if(J.format==="includes")return`Nevalida karaktraro: devas inkluzivi "${J.includes}"`;if(J.format==="regex")return`Nevalida karaktraro: devas kongrui kun la modelo ${J.pattern}`;return`Nevalida ${$[J.format]??B.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${B.divisor}`;case"unrecognized_keys":return`Nekonata${B.keys.length>1?"j":""} \u015Dlosilo${B.keys.length>1?"j":""}: ${v(B.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${B.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${B.origin}`;default:return"Nevalida enigo"}}};function ZE(){return{localeError:QH1()}}var VH1=()=>{let F={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},A={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function $(Y){return F[Y]??null}function B(Y){return A[Y]??Y}let J=(Y)=>{let D=typeof Y;switch(D){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype)return Y.constructor.name;return"object"}}return D},X={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(Y)=>{switch(Y.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${B(Y.expected)}, recibido ${B(J(Y.input))}`;case"invalid_value":if(Y.values.length===1)return`Entrada inv\xE1lida: se esperaba ${e(Y.values[0])}`;return`Opci\xF3n inv\xE1lida: se esperaba una de ${v(Y.values,"|")}`;case"too_big":{let D=Y.inclusive?"<=":"<",G=$(Y.origin),Z=B(Y.origin);if(G)return`Demasiado grande: se esperaba que ${Z??"valor"} tuviera ${D}${Y.maximum.toString()} ${G.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${Z??"valor"} fuera ${D}${Y.maximum.toString()}`}case"too_small":{let D=Y.inclusive?">=":">",G=$(Y.origin),Z=B(Y.origin);if(G)return`Demasiado peque\xF1o: se esperaba que ${Z} tuviera ${D}${Y.minimum.toString()} ${G.unit}`;return`Demasiado peque\xF1o: se esperaba que ${Z} fuera ${D}${Y.minimum.toString()}`}case"invalid_format":{let D=Y;if(D.format==="starts_with")return`Cadena inv\xE1lida: debe comenzar con "${D.prefix}"`;if(D.format==="ends_with")return`Cadena inv\xE1lida: debe terminar en "${D.suffix}"`;if(D.format==="includes")return`Cadena inv\xE1lida: debe incluir "${D.includes}"`;if(D.format==="regex")return`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${D.pattern}`;return`Inv\xE1lido ${X[D.format]??Y.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${Y.divisor}`;case"unrecognized_keys":return`Llave${Y.keys.length>1?"s":""} desconocida${Y.keys.length>1?"s":""}: ${v(Y.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${B(Y.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${B(Y.origin)}`;default:return"Entrada inv\xE1lida"}}};function UE(){return{localeError:VH1()}}var EH1=()=>{let F={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(J))return"\u0622\u0631\u0627\u06CC\u0647";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return(J)=>{switch(J.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${J.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${$(J.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":if(J.values.length===1)return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${e(J.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`;return`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${v(J.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${J.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${X}${J.maximum.toString()} ${Y.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${J.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${X}${J.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${J.origin} \u0628\u0627\u06CC\u062F ${X}${J.minimum.toString()} ${Y.unit} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${J.origin} \u0628\u0627\u06CC\u062F ${X}${J.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${X.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`;if(X.format==="ends_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${X.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`;if(X.format==="includes")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${X.includes}" \u0628\u0627\u0634\u062F`;if(X.format==="regex")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${X.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`;return`${B[X.format]??J.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${J.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${J.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${v(J.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${J.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${J.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function zE(){return{localeError:EH1()}}var LH1=()=>{let F={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return(J)=>{switch(J.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${J.expected}, oli ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Virheellinen sy\xF6te: t\xE4ytyy olla ${e(J.values[0])}`;return`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Liian suuri: ${Y.subject} t\xE4ytyy olla ${X}${J.maximum.toString()} ${Y.unit}`.trim();return`Liian suuri: arvon t\xE4ytyy olla ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Liian pieni: ${Y.subject} t\xE4ytyy olla ${X}${J.minimum.toString()} ${Y.unit}`.trim();return`Liian pieni: arvon t\xE4ytyy olla ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${X.prefix}"`;if(X.format==="ends_with")return`Virheellinen sy\xF6te: t\xE4ytyy loppua "${X.suffix}"`;if(X.format==="includes")return`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${X.includes}"`;if(X.format==="regex")return`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${X.pattern}`;return`Virheellinen ${B[X.format]??J.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${J.divisor} monikerta`;case"unrecognized_keys":return`${J.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${v(J.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function WE(){return{localeError:LH1()}}var wH1=()=>{let F={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"nombre";case"object":{if(Array.isArray(J))return"tableau";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return(J)=>{switch(J.code){case"invalid_type":return`Entr\xE9e invalide : ${J.expected} attendu, ${$(J.input)} re\xE7u`;case"invalid_value":if(J.values.length===1)return`Entr\xE9e invalide : ${e(J.values[0])} attendu`;return`Option invalide : une valeur parmi ${v(J.values,"|")} attendue`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Trop grand : ${J.origin??"valeur"} doit ${Y.verb} ${X}${J.maximum.toString()} ${Y.unit??"\xE9l\xE9ment(s)"}`;return`Trop grand : ${J.origin??"valeur"} doit \xEAtre ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Trop petit : ${J.origin} doit ${Y.verb} ${X}${J.minimum.toString()} ${Y.unit}`;return`Trop petit : ${J.origin} doit \xEAtre ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${X.prefix}"`;if(X.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${X.suffix}"`;if(X.format==="includes")return`Cha\xEEne invalide : doit inclure "${X.includes}"`;if(X.format==="regex")return`Cha\xEEne invalide : doit correspondre au mod\xE8le ${X.pattern}`;return`${B[X.format]??J.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${J.divisor}`;case"unrecognized_keys":return`Cl\xE9${J.keys.length>1?"s":""} non reconnue${J.keys.length>1?"s":""} : ${v(J.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${J.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${J.origin}`;default:return"Entr\xE9e invalide"}}};function HE(){return{localeError:wH1()}}var IH1=()=>{let F={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return(J)=>{switch(J.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${J.expected}, re\xE7u ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Entr\xE9e invalide : attendu ${e(J.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"\u2264":"<",Y=A(J.origin);if(Y)return`Trop grand : attendu que ${J.origin??"la valeur"} ait ${X}${J.maximum.toString()} ${Y.unit}`;return`Trop grand : attendu que ${J.origin??"la valeur"} soit ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?"\u2265":">",Y=A(J.origin);if(Y)return`Trop petit : attendu que ${J.origin} ait ${X}${J.minimum.toString()} ${Y.unit}`;return`Trop petit : attendu que ${J.origin} soit ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${X.prefix}"`;if(X.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${X.suffix}"`;if(X.format==="includes")return`Cha\xEEne invalide : doit inclure "${X.includes}"`;if(X.format==="regex")return`Cha\xEEne invalide : doit correspondre au motif ${X.pattern}`;return`${B[X.format]??J.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${J.divisor}`;case"unrecognized_keys":return`Cl\xE9${J.keys.length>1?"s":""} non reconnue${J.keys.length>1?"s":""} : ${v(J.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${J.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${J.origin}`;default:return"Entr\xE9e invalide"}}};function KE(){return{localeError:IH1()}}var CH1=()=>{let F={string:{unit:"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u05E7\u05DC\u05D8",email:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",url:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",emoji:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",date:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",time:"\u05D6\u05DE\u05DF ISO",duration:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",ipv4:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",ipv6:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",cidrv4:"\u05D8\u05D5\u05D5\u05D7 IPv4",cidrv6:"\u05D8\u05D5\u05D5\u05D7 IPv6",base64:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",base64url:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",json_string:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",e164:"\u05DE\u05E1\u05E4\u05E8 E.164",jwt:"JWT",template_literal:"\u05E7\u05DC\u05D8"};return(J)=>{switch(J.code){case"invalid_type":return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${J.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${e(J.values[0])}`;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${J.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${X}${J.maximum.toString()} ${Y.unit??"elements"}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${J.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${J.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${X}${J.minimum.toString()} ${Y.unit}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${J.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1"${X.prefix}"`;if(X.format==="ends_with")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${X.suffix}"`;if(X.format==="includes")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${X.includes}"`;if(X.format==="regex")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${X.pattern}`;return`${B[X.format]??J.format} \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${J.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${J.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${J.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${v(J.keys,", ")}`;case"invalid_key":return`\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${J.origin}`;case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${J.origin}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function qE(){return{localeError:CH1()}}var NH1=()=>{let F={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(J))return"t\xF6mb";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return(J)=>{switch(J.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${J.expected}, a kapott \xE9rt\xE9k ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${e(J.values[0])}`;return`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`T\xFAl nagy: ${J.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${X}${J.maximum.toString()} ${Y.unit??"elem"}`;return`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${J.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${J.origin} m\xE9rete t\xFAl kicsi ${X}${J.minimum.toString()} ${Y.unit}`;return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${J.origin} t\xFAl kicsi ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\xC9rv\xE9nytelen string: "${X.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`;if(X.format==="ends_with")return`\xC9rv\xE9nytelen string: "${X.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`;if(X.format==="includes")return`\xC9rv\xE9nytelen string: "${X.includes}" \xE9rt\xE9ket kell tartalmaznia`;if(X.format==="regex")return`\xC9rv\xE9nytelen string: ${X.pattern} mint\xE1nak kell megfelelnie`;return`\xC9rv\xE9nytelen ${B[X.format]??J.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${J.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${J.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${J.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function QE(){return{localeError:NH1()}}var PH1=()=>{let F={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Input tidak valid: diharapkan ${J.expected}, diterima ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Input tidak valid: diharapkan ${e(J.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Terlalu besar: diharapkan ${J.origin??"value"} memiliki ${X}${J.maximum.toString()} ${Y.unit??"elemen"}`;return`Terlalu besar: diharapkan ${J.origin??"value"} menjadi ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Terlalu kecil: diharapkan ${J.origin} memiliki ${X}${J.minimum.toString()} ${Y.unit}`;return`Terlalu kecil: diharapkan ${J.origin} menjadi ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`String tidak valid: harus dimulai dengan "${X.prefix}"`;if(X.format==="ends_with")return`String tidak valid: harus berakhir dengan "${X.suffix}"`;if(X.format==="includes")return`String tidak valid: harus menyertakan "${X.includes}"`;if(X.format==="regex")return`String tidak valid: harus sesuai pola ${X.pattern}`;return`${B[X.format]??J.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${J.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${J.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${J.origin}`;default:return"Input tidak valid"}}};function VE(){return{localeError:PH1()}}var RH1=(F)=>{let A=typeof F;switch(A){case"number":return Number.isNaN(F)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(F))return"fylki";if(F===null)return"null";if(Object.getPrototypeOf(F)!==Object.prototype&&F.constructor)return F.constructor.name}}return A},jH1=()=>{let F={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function A(B){return F[B]??null}let $={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return(B)=>{switch(B.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${RH1(B.input)} \xFEar sem \xE1 a\xF0 vera ${B.expected}`;case"invalid_value":if(B.values.length===1)return`Rangt gildi: gert r\xE1\xF0 fyrir ${e(B.values[0])}`;return`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${v(B.values,"|")}`;case"too_big":{let J=B.inclusive?"<=":"<",X=A(B.origin);if(X)return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${B.origin??"gildi"} hafi ${J}${B.maximum.toString()} ${X.unit??"hluti"}`;return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${B.origin??"gildi"} s\xE9 ${J}${B.maximum.toString()}`}case"too_small":{let J=B.inclusive?">=":">",X=A(B.origin);if(X)return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${B.origin} hafi ${J}${B.minimum.toString()} ${X.unit}`;return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${B.origin} s\xE9 ${J}${B.minimum.toString()}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${J.prefix}"`;if(J.format==="ends_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${J.suffix}"`;if(J.format==="includes")return`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${J.includes}"`;if(J.format==="regex")return`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${J.pattern}`;return`Rangt ${$[J.format]??B.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${B.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${B.keys.length>1?"ir lyklar":"ur lykill"}: ${v(B.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${B.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${B.origin}`;default:return"Rangt gildi"}}};function EE(){return{localeError:jH1()}}var MH1=()=>{let F={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"numero";case"object":{if(Array.isArray(J))return"vettore";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Input non valido: atteso ${J.expected}, ricevuto ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Input non valido: atteso ${e(J.values[0])}`;return`Opzione non valida: atteso uno tra ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Troppo grande: ${J.origin??"valore"} deve avere ${X}${J.maximum.toString()} ${Y.unit??"elementi"}`;return`Troppo grande: ${J.origin??"valore"} deve essere ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Troppo piccolo: ${J.origin} deve avere ${X}${J.minimum.toString()} ${Y.unit}`;return`Troppo piccolo: ${J.origin} deve essere ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Stringa non valida: deve iniziare con "${X.prefix}"`;if(X.format==="ends_with")return`Stringa non valida: deve terminare con "${X.suffix}"`;if(X.format==="includes")return`Stringa non valida: deve includere "${X.includes}"`;if(X.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${X.pattern}`;return`Invalid ${B[X.format]??J.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${J.divisor}`;case"unrecognized_keys":return`Chiav${J.keys.length>1?"i":"e"} non riconosciut${J.keys.length>1?"e":"a"}: ${v(J.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${J.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${J.origin}`;default:return"Input non valido"}}};function LE(){return{localeError:MH1()}}var TH1=()=>{let F={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(J))return"\u914D\u5217";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return(J)=>{switch(J.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${J.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${$(J.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":if(J.values.length===1)return`\u7121\u52B9\u306A\u5165\u529B: ${e(J.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`;return`\u7121\u52B9\u306A\u9078\u629E: ${v(J.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let X=J.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",Y=A(J.origin);if(Y)return`\u5927\u304D\u3059\u304E\u308B\u5024: ${J.origin??"\u5024"}\u306F${J.maximum.toString()}${Y.unit??"\u8981\u7D20"}${X}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5927\u304D\u3059\u304E\u308B\u5024: ${J.origin??"\u5024"}\u306F${J.maximum.toString()}${X}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let X=J.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",Y=A(J.origin);if(Y)return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${J.origin}\u306F${J.minimum.toString()}${Y.unit}${X}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${J.origin}\u306F${J.minimum.toString()}${X}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${X.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(X.format==="ends_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${X.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(X.format==="includes")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${X.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if(X.format==="regex")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${X.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u7121\u52B9\u306A${B[X.format]??J.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${J.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${J.keys.length>1?"\u7FA4":""}: ${v(J.keys,"\u3001")}`;case"invalid_key":return`${J.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${J.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function wE(){return{localeError:TH1()}}var kH1=(F)=>{let A=typeof F;switch(A){case"number":return Number.isNaN(F)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(F))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(F===null)return"null";if(Object.getPrototypeOf(F)!==Object.prototype&&F.constructor)return F.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[A]??A},OH1=()=>{let F={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function A(B){return F[B]??null}let $={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return(B)=>{switch(B.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${B.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${kH1(B.input)}`;case"invalid_value":if(B.values.length===1)return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${e(B.values[0])}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${v(B.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let J=B.inclusive?"<=":"<",X=A(B.origin);if(X)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${B.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${X.verb} ${J}${B.maximum.toString()} ${X.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${B.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${J}${B.maximum.toString()}`}case"too_small":{let J=B.inclusive?">=":">",X=A(B.origin);if(X)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${B.origin} ${X.verb} ${J}${B.minimum.toString()} ${X.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${B.origin} \u10D8\u10E7\u10DD\u10E1 ${J}${B.minimum.toString()}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${J.prefix}"-\u10D8\u10D7`;if(J.format==="ends_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${J.suffix}"-\u10D8\u10D7`;if(J.format==="includes")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${J.includes}"-\u10E1`;if(J.format==="regex")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${J.pattern}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${$[J.format]??B.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${B.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${B.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${v(B.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${B.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${B.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function IE(){return{localeError:OH1()}}var SH1=()=>{let F={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(J))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(J===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return(J)=>{switch(J.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${J.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${e(J.values[0])}`;return`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${J.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${X} ${J.maximum.toString()} ${Y.unit??"\u1792\u17B6\u178F\u17BB"}`;return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${J.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${X} ${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${J.origin} ${X} ${J.minimum.toString()} ${Y.unit}`;return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${J.origin} ${X} ${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${X.prefix}"`;if(X.format==="ends_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${X.suffix}"`;if(X.format==="includes")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${X.includes}"`;if(X.format==="regex")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${X.pattern}`;return`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${B[X.format]??J.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${J.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${v(J.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${J.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${J.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function ZJ(){return{localeError:SH1()}}function CE(){return ZJ()}var uH1=()=>{let F={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return(J)=>{switch(J.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${J.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${$(J.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":if(J.values.length===1)return`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${e(J.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C \uC635\uC158: ${v(J.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let X=J.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",Y=X==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",D=A(J.origin),G=D?.unit??"\uC694\uC18C";if(D)return`${J.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${J.maximum.toString()}${G} ${X}${Y}`;return`${J.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${J.maximum.toString()} ${X}${Y}`}case"too_small":{let X=J.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",Y=X==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",D=A(J.origin),G=D?.unit??"\uC694\uC18C";if(D)return`${J.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${J.minimum.toString()}${G} ${X}${Y}`;return`${J.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${J.minimum.toString()} ${X}${Y}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${X.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`;if(X.format==="ends_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${X.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`;if(X.format==="includes")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${X.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`;if(X.format==="regex")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${X.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C ${B[X.format]??J.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${J.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${v(J.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${J.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${J.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function NE(){return{localeError:uH1()}}var fH1=(F)=>{return zJ(typeof F,F)},zJ=(F,A=void 0)=>{switch(F){case"number":return Number.isNaN(A)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":{if(A===void 0)return"ne\u017Einomas objektas";if(A===null)return"nulin\u0117 reik\u0161m\u0117";if(Array.isArray(A))return"masyvas";if(Object.getPrototypeOf(A)!==Object.prototype&&A.constructor)return A.constructor.name;return"objektas"}case"null":return"nulin\u0117 reik\u0161m\u0117"}return F},UJ=(F)=>{return F.charAt(0).toUpperCase()+F.slice(1)};function Fb(F){let A=Math.abs(F),$=A%10,B=A%100;if(B>=11&&B<=19||$===0)return"many";if($===1)return"one";return"few"}var xH1=()=>{let F={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function A(B,J,X,Y){let D=F[B]??null;if(D===null)return D;return{unit:D.unit[J],verb:D.verb[Y][X?"inclusive":"notInclusive"]}}let $={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return(B)=>{switch(B.code){case"invalid_type":return`Gautas tipas ${fH1(B.input)}, o tik\u0117tasi - ${zJ(B.expected)}`;case"invalid_value":if(B.values.length===1)return`Privalo b\u016Bti ${e(B.values[0])}`;return`Privalo b\u016Bti vienas i\u0161 ${v(B.values,"|")} pasirinkim\u0173`;case"too_big":{let J=zJ(B.origin),X=A(B.origin,Fb(Number(B.maximum)),B.inclusive??!1,"smaller");if(X?.verb)return`${UJ(J??B.origin??"reik\u0161m\u0117")} ${X.verb} ${B.maximum.toString()} ${X.unit??"element\u0173"}`;let Y=B.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${UJ(J??B.origin??"reik\u0161m\u0117")} turi b\u016Bti ${Y} ${B.maximum.toString()} ${X?.unit}`}case"too_small":{let J=zJ(B.origin),X=A(B.origin,Fb(Number(B.minimum)),B.inclusive??!1,"bigger");if(X?.verb)return`${UJ(J??B.origin??"reik\u0161m\u0117")} ${X.verb} ${B.minimum.toString()} ${X.unit??"element\u0173"}`;let Y=B.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${UJ(J??B.origin??"reik\u0161m\u0117")} turi b\u016Bti ${Y} ${B.minimum.toString()} ${X?.unit}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`Eilut\u0117 privalo prasid\u0117ti "${J.prefix}"`;if(J.format==="ends_with")return`Eilut\u0117 privalo pasibaigti "${J.suffix}"`;if(J.format==="includes")return`Eilut\u0117 privalo \u012Ftraukti "${J.includes}"`;if(J.format==="regex")return`Eilut\u0117 privalo atitikti ${J.pattern}`;return`Neteisingas ${$[J.format]??B.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${B.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${B.keys.length>1?"i":"as"} rakt${B.keys.length>1?"ai":"as"}: ${v(B.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let J=zJ(B.origin);return`${UJ(J??B.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function PE(){return{localeError:xH1()}}var bH1=()=>{let F={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(J))return"\u043D\u0438\u0437\u0430";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return(J)=>{switch(J.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${J.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Invalid input: expected ${e(J.values[0])}`;return`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${J.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${X}${J.maximum.toString()} ${Y.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${J.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${J.origin} \u0434\u0430 \u0438\u043C\u0430 ${X}${J.minimum.toString()} ${Y.unit}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${J.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${X.prefix}"`;if(X.format==="ends_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${X.suffix}"`;if(X.format==="includes")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${X.includes}"`;if(X.format==="regex")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${X.pattern}`;return`Invalid ${B[X.format]??J.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${J.divisor}`;case"unrecognized_keys":return`${J.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${v(J.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${J.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${J.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function RE(){return{localeError:bH1()}}var gH1=()=>{let F={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"nombor";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Input tidak sah: dijangka ${J.expected}, diterima ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Input tidak sah: dijangka ${e(J.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Terlalu besar: dijangka ${J.origin??"nilai"} ${Y.verb} ${X}${J.maximum.toString()} ${Y.unit??"elemen"}`;return`Terlalu besar: dijangka ${J.origin??"nilai"} adalah ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Terlalu kecil: dijangka ${J.origin} ${Y.verb} ${X}${J.minimum.toString()} ${Y.unit}`;return`Terlalu kecil: dijangka ${J.origin} adalah ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`String tidak sah: mesti bermula dengan "${X.prefix}"`;if(X.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${X.suffix}"`;if(X.format==="includes")return`String tidak sah: mesti mengandungi "${X.includes}"`;if(X.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${X.pattern}`;return`${B[X.format]??J.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${J.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${v(J.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${J.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${J.origin}`;default:return"Input tidak sah"}}};function jE(){return{localeError:gH1()}}var _H1=()=>{let F={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"getal";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return(J)=>{switch(J.code){case"invalid_type":return`Ongeldige invoer: verwacht ${J.expected}, ontving ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ongeldige invoer: verwacht ${e(J.values[0])}`;return`Ongeldige optie: verwacht \xE9\xE9n van ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Te lang: verwacht dat ${J.origin??"waarde"} ${X}${J.maximum.toString()} ${Y.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${J.origin??"waarde"} ${X}${J.maximum.toString()} is`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Te kort: verwacht dat ${J.origin} ${X}${J.minimum.toString()} ${Y.unit} bevat`;return`Te kort: verwacht dat ${J.origin} ${X}${J.minimum.toString()} is`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Ongeldige tekst: moet met "${X.prefix}" beginnen`;if(X.format==="ends_with")return`Ongeldige tekst: moet op "${X.suffix}" eindigen`;if(X.format==="includes")return`Ongeldige tekst: moet "${X.includes}" bevatten`;if(X.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${X.pattern}`;return`Ongeldig: ${B[X.format]??J.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${J.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${J.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${J.origin}`;default:return"Ongeldige invoer"}}};function ME(){return{localeError:_H1()}}var yH1=()=>{let F={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"tall";case"object":{if(Array.isArray(J))return"liste";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Ugyldig input: forventet ${J.expected}, fikk ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ugyldig verdi: forventet ${e(J.values[0])}`;return`Ugyldig valg: forventet en av ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`For stor(t): forventet ${J.origin??"value"} til \xE5 ha ${X}${J.maximum.toString()} ${Y.unit??"elementer"}`;return`For stor(t): forventet ${J.origin??"value"} til \xE5 ha ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`For lite(n): forventet ${J.origin} til \xE5 ha ${X}${J.minimum.toString()} ${Y.unit}`;return`For lite(n): forventet ${J.origin} til \xE5 ha ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Ugyldig streng: m\xE5 starte med "${X.prefix}"`;if(X.format==="ends_with")return`Ugyldig streng: m\xE5 ende med "${X.suffix}"`;if(X.format==="includes")return`Ugyldig streng: m\xE5 inneholde "${X.includes}"`;if(X.format==="regex")return`Ugyldig streng: m\xE5 matche m\xF8nsteret ${X.pattern}`;return`Ugyldig ${B[X.format]??J.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${J.divisor}`;case"unrecognized_keys":return`${J.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${v(J.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${J.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${J.origin}`;default:return"Ugyldig input"}}};function TE(){return{localeError:yH1()}}var vH1=()=>{let F={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"numara";case"object":{if(Array.isArray(J))return"saf";if(J===null)return"gayb";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return(J)=>{switch(J.code){case"invalid_type":return`F\xE2sit giren: umulan ${J.expected}, al\u0131nan ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`F\xE2sit giren: umulan ${e(J.values[0])}`;return`F\xE2sit tercih: m\xFBteberler ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Fazla b\xFCy\xFCk: ${J.origin??"value"}, ${X}${J.maximum.toString()} ${Y.unit??"elements"} sahip olmal\u0131yd\u0131.`;return`Fazla b\xFCy\xFCk: ${J.origin??"value"}, ${X}${J.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Fazla k\xFC\xE7\xFCk: ${J.origin}, ${X}${J.minimum.toString()} ${Y.unit} sahip olmal\u0131yd\u0131.`;return`Fazla k\xFC\xE7\xFCk: ${J.origin}, ${X}${J.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`F\xE2sit metin: "${X.prefix}" ile ba\u015Flamal\u0131.`;if(X.format==="ends_with")return`F\xE2sit metin: "${X.suffix}" ile bitmeli.`;if(X.format==="includes")return`F\xE2sit metin: "${X.includes}" ihtiv\xE2 etmeli.`;if(X.format==="regex")return`F\xE2sit metin: ${X.pattern} nak\u015F\u0131na uymal\u0131.`;return`F\xE2sit ${B[X.format]??J.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${J.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`${J.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${J.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function kE(){return{localeError:vH1()}}var hH1=()=>{let F={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(J))return"\u0627\u0631\u06D0";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return(J)=>{switch(J.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${J.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${$(J.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":if(J.values.length===1)return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${e(J.values[0])} \u0648\u0627\u06CC`;return`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${v(J.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${J.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${X}${J.maximum.toString()} ${Y.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${J.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${X}${J.maximum.toString()} \u0648\u064A`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${J.origin} \u0628\u0627\u06CC\u062F ${X}${J.minimum.toString()} ${Y.unit} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${J.origin} \u0628\u0627\u06CC\u062F ${X}${J.minimum.toString()} \u0648\u064A`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${X.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`;if(X.format==="ends_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${X.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`;if(X.format==="includes")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${X.includes}" \u0648\u0644\u0631\u064A`;if(X.format==="regex")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${X.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`;return`${B[X.format]??J.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${J.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${J.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${v(J.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${J.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${J.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function OE(){return{localeError:hH1()}}var mH1=()=>{let F={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"liczba";case"object":{if(Array.isArray(J))return"tablica";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return(J)=>{switch(J.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${J.expected}, otrzymano ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${e(J.values[0])}`;return`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${J.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${X}${J.maximum.toString()} ${Y.unit??"element\xF3w"}`;return`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${J.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${J.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${X}${J.minimum.toString()} ${Y.unit??"element\xF3w"}`;return`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${J.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${X.prefix}"`;if(X.format==="ends_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${X.suffix}"`;if(X.format==="includes")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${X.includes}"`;if(X.format==="regex")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${X.pattern}`;return`Nieprawid\u0142ow(y/a/e) ${B[X.format]??J.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${J.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${J.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${J.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function SE(){return{localeError:mH1()}}var dH1=()=>{let F={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(J))return"array";if(J===null)return"nulo";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(J)=>{switch(J.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${J.expected}, recebido ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Entrada inv\xE1lida: esperado ${e(J.values[0])}`;return`Op\xE7\xE3o inv\xE1lida: esperada uma das ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Muito grande: esperado que ${J.origin??"valor"} tivesse ${X}${J.maximum.toString()} ${Y.unit??"elementos"}`;return`Muito grande: esperado que ${J.origin??"valor"} fosse ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Muito pequeno: esperado que ${J.origin} tivesse ${X}${J.minimum.toString()} ${Y.unit}`;return`Muito pequeno: esperado que ${J.origin} fosse ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Texto inv\xE1lido: deve come\xE7ar com "${X.prefix}"`;if(X.format==="ends_with")return`Texto inv\xE1lido: deve terminar com "${X.suffix}"`;if(X.format==="includes")return`Texto inv\xE1lido: deve incluir "${X.includes}"`;if(X.format==="regex")return`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${X.pattern}`;return`${B[X.format]??J.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${J.divisor}`;case"unrecognized_keys":return`Chave${J.keys.length>1?"s":""} desconhecida${J.keys.length>1?"s":""}: ${v(J.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${J.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${J.origin}`;default:return"Campo inv\xE1lido"}}};function uE(){return{localeError:dH1()}}function Ab(F,A,$,B){let J=Math.abs(F),X=J%10,Y=J%100;if(Y>=11&&Y<=19)return B;if(X===1)return A;if(X>=2&&X<=4)return $;return B}var cH1=()=>{let F={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(J))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return(J)=>{switch(J.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${J.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${e(J.values[0])}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y){let D=Number(J.maximum),G=Ab(D,Y.unit.one,Y.unit.few,Y.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${J.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${X}${J.maximum.toString()} ${G}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${J.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y){let D=Number(J.minimum),G=Ab(D,Y.unit.one,Y.unit.few,Y.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${J.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${X}${J.minimum.toString()} ${G}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${J.origin} \u0431\u0443\u0434\u0435\u0442 ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${X.prefix}"`;if(X.format==="ends_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${X.suffix}"`;if(X.format==="includes")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${X.includes}"`;if(X.format==="regex")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${X.pattern}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${B[X.format]??J.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${J.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${J.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${J.keys.length>1?"\u0438":""}: ${v(J.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${J.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${J.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function fE(){return{localeError:cH1()}}var lH1=()=>{let F={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(J))return"tabela";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return(J)=>{switch(J.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${J.expected}, prejeto ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Neveljaven vnos: pri\u010Dakovano ${e(J.values[0])}`;return`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Preveliko: pri\u010Dakovano, da bo ${J.origin??"vrednost"} imelo ${X}${J.maximum.toString()} ${Y.unit??"elementov"}`;return`Preveliko: pri\u010Dakovano, da bo ${J.origin??"vrednost"} ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Premajhno: pri\u010Dakovano, da bo ${J.origin} imelo ${X}${J.minimum.toString()} ${Y.unit}`;return`Premajhno: pri\u010Dakovano, da bo ${J.origin} ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Neveljaven niz: mora se za\u010Deti z "${X.prefix}"`;if(X.format==="ends_with")return`Neveljaven niz: mora se kon\u010Dati z "${X.suffix}"`;if(X.format==="includes")return`Neveljaven niz: mora vsebovati "${X.includes}"`;if(X.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${X.pattern}`;return`Neveljaven ${B[X.format]??J.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${J.divisor}`;case"unrecognized_keys":return`Neprepoznan${J.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${v(J.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${J.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${J.origin}`;default:return"Neveljaven vnos"}}};function xE(){return{localeError:lH1()}}var pH1=()=>{let F={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"antal";case"object":{if(Array.isArray(J))return"lista";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return(J)=>{switch(J.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${J.expected}, fick ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ogiltig inmatning: f\xF6rv\xE4ntat ${e(J.values[0])}`;return`Ogiltigt val: f\xF6rv\xE4ntade en av ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`F\xF6r stor(t): f\xF6rv\xE4ntade ${J.origin??"v\xE4rdet"} att ha ${X}${J.maximum.toString()} ${Y.unit??"element"}`;return`F\xF6r stor(t): f\xF6rv\xE4ntat ${J.origin??"v\xE4rdet"} att ha ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`F\xF6r lite(t): f\xF6rv\xE4ntade ${J.origin??"v\xE4rdet"} att ha ${X}${J.minimum.toString()} ${Y.unit}`;return`F\xF6r lite(t): f\xF6rv\xE4ntade ${J.origin??"v\xE4rdet"} att ha ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${X.prefix}"`;if(X.format==="ends_with")return`Ogiltig str\xE4ng: m\xE5ste sluta med "${X.suffix}"`;if(X.format==="includes")return`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${X.includes}"`;if(X.format==="regex")return`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${X.pattern}"`;return`Ogiltig(t) ${B[X.format]??J.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${J.divisor}`;case"unrecognized_keys":return`${J.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${v(J.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${J.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${J.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function bE(){return{localeError:pH1()}}var iH1=()=>{let F={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(J))return"\u0B85\u0BA3\u0BBF";if(J===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${J.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${e(J.values[0])}`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${v(J.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${J.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${X}${J.maximum.toString()} ${Y.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${J.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${X}${J.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${J.origin} ${X}${J.minimum.toString()} ${Y.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${J.origin} ${X}${J.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${X.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(X.format==="ends_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${X.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(X.format==="includes")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${X.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if(X.format==="regex")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${X.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${B[X.format]??J.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${J.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${J.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${v(J.keys,", ")}`;case"invalid_key":return`${J.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${J.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function gE(){return{localeError:iH1()}}var aH1=()=>{let F={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(J))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(J===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return(J)=>{switch(J.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${J.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${e(J.values[0])}`;return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",Y=A(J.origin);if(Y)return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${J.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${X} ${J.maximum.toString()} ${Y.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`;return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${J.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${X} ${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",Y=A(J.origin);if(Y)return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${J.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${X} ${J.minimum.toString()} ${Y.unit}`;return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${J.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${X} ${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${X.prefix}"`;if(X.format==="ends_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${X.suffix}"`;if(X.format==="includes")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${X.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`;if(X.format==="regex")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${X.pattern}`;return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${B[X.format]??J.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${J.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${v(J.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${J.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${J.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function _E(){return{localeError:aH1()}}var nH1=(F)=>{let A=typeof F;switch(A){case"number":return Number.isNaN(F)?"NaN":"number";case"object":{if(Array.isArray(F))return"array";if(F===null)return"null";if(Object.getPrototypeOf(F)!==Object.prototype&&F.constructor)return F.constructor.name}}return A},rH1=()=>{let F={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function A(B){return F[B]??null}let $={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return(B)=>{switch(B.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${B.expected}, al\u0131nan ${nH1(B.input)}`;case"invalid_value":if(B.values.length===1)return`Ge\xE7ersiz de\u011Fer: beklenen ${e(B.values[0])}`;return`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${v(B.values,"|")}`;case"too_big":{let J=B.inclusive?"<=":"<",X=A(B.origin);if(X)return`\xC7ok b\xFCy\xFCk: beklenen ${B.origin??"de\u011Fer"} ${J}${B.maximum.toString()} ${X.unit??"\xF6\u011Fe"}`;return`\xC7ok b\xFCy\xFCk: beklenen ${B.origin??"de\u011Fer"} ${J}${B.maximum.toString()}`}case"too_small":{let J=B.inclusive?">=":">",X=A(B.origin);if(X)return`\xC7ok k\xFC\xE7\xFCk: beklenen ${B.origin} ${J}${B.minimum.toString()} ${X.unit}`;return`\xC7ok k\xFC\xE7\xFCk: beklenen ${B.origin} ${J}${B.minimum.toString()}`}case"invalid_format":{let J=B;if(J.format==="starts_with")return`Ge\xE7ersiz metin: "${J.prefix}" ile ba\u015Flamal\u0131`;if(J.format==="ends_with")return`Ge\xE7ersiz metin: "${J.suffix}" ile bitmeli`;if(J.format==="includes")return`Ge\xE7ersiz metin: "${J.includes}" i\xE7ermeli`;if(J.format==="regex")return`Ge\xE7ersiz metin: ${J.pattern} desenine uymal\u0131`;return`Ge\xE7ersiz ${$[J.format]??B.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${B.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${B.keys.length>1?"lar":""}: ${v(B.keys,", ")}`;case"invalid_key":return`${B.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${B.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function yE(){return{localeError:rH1()}}var tH1=()=>{let F={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(J))return"\u043C\u0430\u0441\u0438\u0432";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return(J)=>{switch(J.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${J.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${e(J.values[0])}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${J.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${Y.verb} ${X}${J.maximum.toString()} ${Y.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${J.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${J.origin} ${Y.verb} ${X}${J.minimum.toString()} ${Y.unit}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${J.origin} \u0431\u0443\u0434\u0435 ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${X.prefix}"`;if(X.format==="ends_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${X.suffix}"`;if(X.format==="includes")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${X.includes}"`;if(X.format==="regex")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${X.pattern}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${B[X.format]??J.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${J.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${J.keys.length>1?"\u0456":""}: ${v(J.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${J.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${J.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function WJ(){return{localeError:tH1()}}function vE(){return WJ()}var sH1=()=>{let F={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(J))return"\u0622\u0631\u06D2";if(J===null)return"\u0646\u0644";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return(J)=>{switch(J.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${J.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${$(J.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":if(J.values.length===1)return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${e(J.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;return`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${v(J.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${J.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${X}${J.maximum.toString()} ${Y.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${J.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${X}${J.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${J.origin} \u06A9\u06D2 ${X}${J.minimum.toString()} ${Y.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${J.origin} \u06A9\u0627 ${X}${J.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${X.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(X.format==="ends_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${X.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(X.format==="includes")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${X.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if(X.format==="regex")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${X.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;return`\u063A\u0644\u0637 ${B[X.format]??J.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${J.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${J.keys.length>1?"\u0632":""}: ${v(J.keys,"\u060C ")}`;case"invalid_key":return`${J.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${J.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function hE(){return{localeError:sH1()}}var oH1=()=>{let F={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(J))return"m\u1EA3ng";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return(J)=>{switch(J.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${J.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${e(J.values[0])}`;return`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${J.origin??"gi\xE1 tr\u1ECB"} ${Y.verb} ${X}${J.maximum.toString()} ${Y.unit??"ph\u1EA7n t\u1EED"}`;return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${J.origin??"gi\xE1 tr\u1ECB"} ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${J.origin} ${Y.verb} ${X}${J.minimum.toString()} ${Y.unit}`;return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${J.origin} ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${X.prefix}"`;if(X.format==="ends_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${X.suffix}"`;if(X.format==="includes")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${X.includes}"`;if(X.format==="regex")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${X.pattern}`;return`${B[X.format]??J.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${J.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${v(J.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${J.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${J.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function mE(){return{localeError:oH1()}}var eH1=()=>{let F={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(J))return"\u6570\u7EC4";if(J===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return(J)=>{switch(J.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${J.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${e(J.values[0])}`;return`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${J.origin??"\u503C"} ${X}${J.maximum.toString()} ${Y.unit??"\u4E2A\u5143\u7D20"}`;return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${J.origin??"\u503C"} ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${J.origin} ${X}${J.minimum.toString()} ${Y.unit}`;return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${J.origin} ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${X.prefix}" \u5F00\u5934`;if(X.format==="ends_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${X.suffix}" \u7ED3\u5C3E`;if(X.format==="includes")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${X.includes}"`;if(X.format==="regex")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${X.pattern}`;return`\u65E0\u6548${B[X.format]??J.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${J.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${v(J.keys,", ")}`;case"invalid_key":return`${J.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${J.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function dE(){return{localeError:eH1()}}var FK1=()=>{let F={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return(J)=>{switch(J.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${J.expected}\uFF0C\u4F46\u6536\u5230 ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${e(J.values[0])}`;return`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${J.origin??"\u503C"} \u61C9\u70BA ${X}${J.maximum.toString()} ${Y.unit??"\u500B\u5143\u7D20"}`;return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${J.origin??"\u503C"} \u61C9\u70BA ${X}${J.maximum.toString()}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${J.origin} \u61C9\u70BA ${X}${J.minimum.toString()} ${Y.unit}`;return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${J.origin} \u61C9\u70BA ${X}${J.minimum.toString()}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${X.prefix}" \u958B\u982D`;if(X.format==="ends_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${X.suffix}" \u7D50\u5C3E`;if(X.format==="includes")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${X.includes}"`;if(X.format==="regex")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${X.pattern}`;return`\u7121\u6548\u7684 ${B[X.format]??J.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${J.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${J.keys.length>1?"\u5011":""}\uFF1A${v(J.keys,"\u3001")}`;case"invalid_key":return`${J.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${J.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function cE(){return{localeError:FK1()}}var AK1=()=>{let F={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function A(J){return F[J]??null}let $=(J)=>{let X=typeof J;switch(X){case"number":return Number.isNaN(J)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(J))return"akop\u1ECD";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return X},B={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return(J)=>{switch(J.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${J.expected}, \xE0m\u1ECD\u0300 a r\xED ${$(J.input)}`;case"invalid_value":if(J.values.length===1)return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${e(J.values[0])}`;return`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${v(J.values,"|")}`;case"too_big":{let X=J.inclusive?"<=":"<",Y=A(J.origin);if(Y)return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${J.origin??"iye"} ${Y.verb} ${X}${J.maximum} ${Y.unit}`;return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${X}${J.maximum}`}case"too_small":{let X=J.inclusive?">=":">",Y=A(J.origin);if(Y)return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${J.origin} ${Y.verb} ${X}${J.minimum} ${Y.unit}`;return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${X}${J.minimum}`}case"invalid_format":{let X=J;if(X.format==="starts_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${X.prefix}"`;if(X.format==="ends_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${X.suffix}"`;if(X.format==="includes")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${X.includes}"`;if(X.format==="regex")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${X.pattern}`;return`A\u1E63\xEC\u1E63e: ${B[X.format]??J.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${J.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${v(J.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${J.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${J.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function lE(){return{localeError:AK1()}}var pE=Symbol("ZodOutput"),iE=Symbol("ZodInput");class KJ{constructor(){this._map=new WeakMap,this._idmap=new Map}add(F,...A){let $=A[0];if(this._map.set(F,$),$&&typeof $==="object"&&"id"in $){if(this._idmap.has($.id))throw Error(`ID ${$.id} already exists in the registry`);this._idmap.set($.id,F)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(F){let A=this._map.get(F);if(A&&typeof A==="object"&&"id"in A)this._idmap.delete(A.id);return this._map.delete(F),this}get(F){let A=F._zod.parent;if(A){let $={...this.get(A)??{}};delete $.id;let B={...$,...this._map.get(F)};return Object.keys(B).length?B:void 0}return this._map.get(F)}has(F){return this._map.has(F)}}function KZ(){return new KJ}var b2=KZ();function aE(F,A){return new F({type:"string",...F1(A)})}function nE(F,A){return new F({type:"string",coerce:!0,...F1(A)})}function qZ(F,A){return new F({type:"string",format:"email",check:"string_format",abort:!1,...F1(A)})}function qJ(F,A){return new F({type:"string",format:"guid",check:"string_format",abort:!1,...F1(A)})}function QZ(F,A){return new F({type:"string",format:"uuid",check:"string_format",abort:!1,...F1(A)})}function VZ(F,A){return new F({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...F1(A)})}function EZ(F,A){return new F({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...F1(A)})}function LZ(F,A){return new F({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...F1(A)})}function QJ(F,A){return new F({type:"string",format:"url",check:"string_format",abort:!1,...F1(A)})}function wZ(F,A){return new F({type:"string",format:"emoji",check:"string_format",abort:!1,...F1(A)})}function IZ(F,A){return new F({type:"string",format:"nanoid",check:"string_format",abort:!1,...F1(A)})}function CZ(F,A){return new F({type:"string",format:"cuid",check:"string_format",abort:!1,...F1(A)})}function NZ(F,A){return new F({type:"string",format:"cuid2",check:"string_format",abort:!1,...F1(A)})}function PZ(F,A){return new F({type:"string",format:"ulid",check:"string_format",abort:!1,...F1(A)})}function RZ(F,A){return new F({type:"string",format:"xid",check:"string_format",abort:!1,...F1(A)})}function jZ(F,A){return new F({type:"string",format:"ksuid",check:"string_format",abort:!1,...F1(A)})}function MZ(F,A){return new F({type:"string",format:"ipv4",check:"string_format",abort:!1,...F1(A)})}function TZ(F,A){return new F({type:"string",format:"ipv6",check:"string_format",abort:!1,...F1(A)})}function kZ(F,A){return new F({type:"string",format:"cidrv4",check:"string_format",abort:!1,...F1(A)})}function OZ(F,A){return new F({type:"string",format:"cidrv6",check:"string_format",abort:!1,...F1(A)})}function SZ(F,A){return new F({type:"string",format:"base64",check:"string_format",abort:!1,...F1(A)})}function uZ(F,A){return new F({type:"string",format:"base64url",check:"string_format",abort:!1,...F1(A)})}function fZ(F,A){return new F({type:"string",format:"e164",check:"string_format",abort:!1,...F1(A)})}function xZ(F,A){return new F({type:"string",format:"jwt",check:"string_format",abort:!1,...F1(A)})}var rE={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function tE(F,A){return new F({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...F1(A)})}function sE(F,A){return new F({type:"string",format:"date",check:"string_format",...F1(A)})}function oE(F,A){return new F({type:"string",format:"time",check:"string_format",precision:null,...F1(A)})}function eE(F,A){return new F({type:"string",format:"duration",check:"string_format",...F1(A)})}function FL(F,A){return new F({type:"number",checks:[],...F1(A)})}function AL(F,A){return new F({type:"number",coerce:!0,checks:[],...F1(A)})}function $L(F,A){return new F({type:"number",check:"number_format",abort:!1,format:"safeint",...F1(A)})}function BL(F,A){return new F({type:"number",check:"number_format",abort:!1,format:"float32",...F1(A)})}function JL(F,A){return new F({type:"number",check:"number_format",abort:!1,format:"float64",...F1(A)})}function XL(F,A){return new F({type:"number",check:"number_format",abort:!1,format:"int32",...F1(A)})}function YL(F,A){return new F({type:"number",check:"number_format",abort:!1,format:"uint32",...F1(A)})}function DL(F,A){return new F({type:"boolean",...F1(A)})}function GL(F,A){return new F({type:"boolean",coerce:!0,...F1(A)})}function ZL(F,A){return new F({type:"bigint",...F1(A)})}function UL(F,A){return new F({type:"bigint",coerce:!0,...F1(A)})}function zL(F,A){return new F({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...F1(A)})}function WL(F,A){return new F({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...F1(A)})}function HL(F,A){return new F({type:"symbol",...F1(A)})}function KL(F,A){return new F({type:"undefined",...F1(A)})}function qL(F,A){return new F({type:"null",...F1(A)})}function QL(F){return new F({type:"any"})}function VL(F){return new F({type:"unknown"})}function EL(F,A){return new F({type:"never",...F1(A)})}function LL(F,A){return new F({type:"void",...F1(A)})}function wL(F,A){return new F({type:"date",...F1(A)})}function IL(F,A){return new F({type:"date",coerce:!0,...F1(A)})}function CL(F,A){return new F({type:"nan",...F1(A)})}function B7(F,A){return new $Z({check:"less_than",...F1(A),value:F,inclusive:!1})}function C9(F,A){return new $Z({check:"less_than",...F1(A),value:F,inclusive:!0})}function J7(F,A){return new BZ({check:"greater_than",...F1(A),value:F,inclusive:!1})}function R3(F,A){return new BZ({check:"greater_than",...F1(A),value:F,inclusive:!0})}function NL(F){return J7(0,F)}function PL(F){return B7(0,F)}function RL(F){return C9(0,F)}function jL(F){return R3(0,F)}function M5(F,A){return new TQ({check:"multiple_of",...F1(A),value:F})}function ZA(F,A){return new SQ({check:"max_size",...F1(A),maximum:F})}function T5(F,A){return new uQ({check:"min_size",...F1(A),minimum:F})}function VJ(F,A){return new fQ({check:"size_equals",...F1(A),size:F})}function UA(F,A){return new xQ({check:"max_length",...F1(A),maximum:F})}function B8(F,A){return new bQ({check:"min_length",...F1(A),minimum:F})}function zA(F,A){return new gQ({check:"length_equals",...F1(A),length:F})}function EJ(F,A){return new _Q({check:"string_format",format:"regex",...F1(A),pattern:F})}function LJ(F){return new yQ({check:"string_format",format:"lowercase",...F1(F)})}function wJ(F){return new vQ({check:"string_format",format:"uppercase",...F1(F)})}function IJ(F,A){return new hQ({check:"string_format",format:"includes",...F1(A),includes:F})}function CJ(F,A){return new mQ({check:"string_format",format:"starts_with",...F1(A),prefix:F})}function NJ(F,A){return new dQ({check:"string_format",format:"ends_with",...F1(A),suffix:F})}function ML(F,A,$){return new cQ({check:"property",property:F,schema:A,...F1($)})}function PJ(F,A){return new lQ({check:"mime_type",mime:F,...F1(A)})}function X7(F){return new pQ({check:"overwrite",tx:F})}function RJ(F){return X7((A)=>A.normalize(F))}function jJ(){return X7((F)=>F.trim())}function MJ(){return X7((F)=>F.toLowerCase())}function TJ(){return X7((F)=>F.toUpperCase())}function TL(F,A,$){return new F({type:"array",element:A,...F1($)})}function $K1(F,A,$){return new F({type:"union",options:A,...F1($)})}function BK1(F,A,$,B){return new F({type:"union",options:$,discriminator:A,...F1(B)})}function JK1(F,A,$){return new F({type:"intersection",left:A,right:$})}function XK1(F,A,$,B){let J=$ instanceof j1;return new F({type:"tuple",items:A,rest:J?$:null,...F1(J?B:$)})}function YK1(F,A,$,B){return new F({type:"record",keyType:A,valueType:$,...F1(B)})}function DK1(F,A,$,B){return new F({type:"map",keyType:A,valueType:$,...F1(B)})}function GK1(F,A,$){return new F({type:"set",valueType:A,...F1($)})}function ZK1(F,A,$){let B=Array.isArray(A)?Object.fromEntries(A.map((J)=>[J,J])):A;return new F({type:"enum",entries:B,...F1($)})}function UK1(F,A,$){return new F({type:"enum",entries:A,...F1($)})}function zK1(F,A,$){return new F({type:"literal",values:Array.isArray(A)?A:[A],...F1($)})}function kL(F,A){return new F({type:"file",...F1(A)})}function WK1(F,A){return new F({type:"transform",transform:A})}function HK1(F,A){return new F({type:"optional",innerType:A})}function KK1(F,A){return new F({type:"nullable",innerType:A})}function qK1(F,A,$){return new F({type:"default",innerType:A,get defaultValue(){return typeof $==="function"?$():lq($)}})}function QK1(F,A,$){return new F({type:"nonoptional",innerType:A,...F1($)})}function VK1(F,A){return new F({type:"success",innerType:A})}function EK1(F,A,$){return new F({type:"catch",innerType:A,catchValue:typeof $==="function"?$:()=>$})}function LK1(F,A,$){return new F({type:"pipe",in:A,out:$})}function wK1(F,A){return new F({type:"readonly",innerType:A})}function IK1(F,A,$){return new F({type:"template_literal",parts:A,...F1($)})}function CK1(F,A){return new F({type:"lazy",getter:A})}function NK1(F,A){return new F({type:"promise",innerType:A})}function OL(F,A,$){let B=F1($);return B.abort??(B.abort=!0),new F({type:"custom",check:"custom",fn:A,...B})}function SL(F,A,$){return new F({type:"custom",check:"custom",fn:A,...F1($)})}function uL(F){let A=$b(($)=>{return $.addIssue=(B)=>{if(typeof B==="string")$.issues.push(BA(B,$.value,A._zod.def));else{let J=B;if(J.fatal)J.continue=!1;J.code??(J.code="custom"),J.input??(J.input=$.value),J.inst??(J.inst=A),J.continue??(J.continue=!A._zod.def.abort),$.issues.push(BA(J))}},F($.value,$)});return A}function $b(F,A){let $=new n0({check:"custom",...F1(A)});return $._zod.check=F,$}function fL(F,A){let $=F1(A),B=$.truthy??["true","1","yes","on","y","enabled"],J=$.falsy??["false","0","no","off","n","disabled"];if($.case!=="sensitive")B=B.map((H)=>typeof H==="string"?H.toLowerCase():H),J=J.map((H)=>typeof H==="string"?H.toLowerCase():H);let X=new Set(B),Y=new Set(J),D=F.Codec??DJ,G=F.Boolean??YJ,U=new(F.String??j5)({type:"string",error:$.error}),z=new G({type:"boolean",error:$.error}),W=new D({type:"pipe",in:U,out:z,transform:(H,K)=>{let q=H;if($.case!=="sensitive")q=q.toLowerCase();if(X.has(q))return!0;else if(Y.has(q))return!1;else return K.issues.push({code:"invalid_value",expected:"stringbool",values:[...X,...Y],input:K.value,inst:W,continue:!1}),{}},reverseTransform:(H,K)=>{if(H===!0)return B[0]||"true";else return J[0]||"false"},error:$.error});return W}function WA(F,A,$,B={}){let J=F1(B),X={...F1(B),check:"string_format",type:"string",format:A,fn:typeof $==="function"?$:(D)=>$.test(D),...J};if($ instanceof RegExp)X.pattern=$;return new F(X)}class bZ{constructor(F){this.counter=0,this.metadataRegistry=F?.metadata??b2,this.target=F?.target??"draft-2020-12",this.unrepresentable=F?.unrepresentable??"throw",this.override=F?.override??(()=>{}),this.io=F?.io??"output",this.seen=new Map}process(F,A={path:[],schemaPath:[]}){var $;let B=F._zod.def,J={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},X=this.seen.get(F);if(X){if(X.count++,A.schemaPath.includes(F))X.cycle=A.path;return X.schema}let Y={schema:{},count:1,cycle:void 0,path:A.path};this.seen.set(F,Y);let D=F._zod.toJSONSchema?.();if(D)Y.schema=D;else{let U={...A,schemaPath:[...A.schemaPath,F],path:A.path},z=F._zod.parent;if(z)Y.ref=z,this.process(z,U),this.seen.get(z).isParent=!0;else{let W=Y.schema;switch(B.type){case"string":{let H=W;H.type="string";let{minimum:K,maximum:q,format:V,patterns:E,contentEncoding:L}=F._zod.bag;if(typeof K==="number")H.minLength=K;if(typeof q==="number")H.maxLength=q;if(V){if(H.format=J[V]??V,H.format==="")delete H.format}if(L)H.contentEncoding=L;if(E&&E.size>0){let w=[...E];if(w.length===1)H.pattern=w[0].source;else if(w.length>1)Y.schema.allOf=[...w.map((I)=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:I.source}))]}break}case"number":{let H=W,{minimum:K,maximum:q,format:V,multipleOf:E,exclusiveMaximum:L,exclusiveMinimum:w}=F._zod.bag;if(typeof V==="string"&&V.includes("int"))H.type="integer";else H.type="number";if(typeof w==="number")if(this.target==="draft-4"||this.target==="openapi-3.0")H.minimum=w,H.exclusiveMinimum=!0;else H.exclusiveMinimum=w;if(typeof K==="number"){if(H.minimum=K,typeof w==="number"&&this.target!=="draft-4")if(w>=K)delete H.minimum;else delete H.exclusiveMinimum}if(typeof L==="number")if(this.target==="draft-4"||this.target==="openapi-3.0")H.maximum=L,H.exclusiveMaximum=!0;else H.exclusiveMaximum=L;if(typeof q==="number"){if(H.maximum=q,typeof L==="number"&&this.target!=="draft-4")if(L<=q)delete H.maximum;else delete H.exclusiveMaximum}if(typeof E==="number")H.multipleOf=E;break}case"boolean":{let H=W;H.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{if(this.target==="openapi-3.0")W.type="string",W.nullable=!0,W.enum=[null];else W.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"never":{W.not={};break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let H=W,{minimum:K,maximum:q}=F._zod.bag;if(typeof K==="number")H.minItems=K;if(typeof q==="number")H.maxItems=q;H.type="array",H.items=this.process(B.element,{...U,path:[...U.path,"items"]});break}case"object":{let H=W;H.type="object",H.properties={};let K=B.shape;for(let E in K)H.properties[E]=this.process(K[E],{...U,path:[...U.path,"properties",E]});let q=new Set(Object.keys(K)),V=new Set([...q].filter((E)=>{let L=B.shape[E]._zod;if(this.io==="input")return L.optin===void 0;else return L.optout===void 0}));if(V.size>0)H.required=Array.from(V);if(B.catchall?._zod.def.type==="never")H.additionalProperties=!1;else if(!B.catchall){if(this.io==="output")H.additionalProperties=!1}else if(B.catchall)H.additionalProperties=this.process(B.catchall,{...U,path:[...U.path,"additionalProperties"]});break}case"union":{let H=W,K=B.options.map((q,V)=>this.process(q,{...U,path:[...U.path,"anyOf",V]}));H.anyOf=K;break}case"intersection":{let H=W,K=this.process(B.left,{...U,path:[...U.path,"allOf",0]}),q=this.process(B.right,{...U,path:[...U.path,"allOf",1]}),V=(L)=>("allOf"in L)&&Object.keys(L).length===1,E=[...V(K)?K.allOf:[K],...V(q)?q.allOf:[q]];H.allOf=E;break}case"tuple":{let H=W;H.type="array";let K=this.target==="draft-2020-12"?"prefixItems":"items",q=this.target==="draft-2020-12"?"items":this.target==="openapi-3.0"?"items":"additionalItems",V=B.items.map((I,P)=>this.process(I,{...U,path:[...U.path,K,P]})),E=B.rest?this.process(B.rest,{...U,path:[...U.path,q,...this.target==="openapi-3.0"?[B.items.length]:[]]}):null;if(this.target==="draft-2020-12"){if(H.prefixItems=V,E)H.items=E}else if(this.target==="openapi-3.0"){if(H.items={anyOf:V},E)H.items.anyOf.push(E);if(H.minItems=V.length,!E)H.maxItems=V.length}else if(H.items=V,E)H.additionalItems=E;let{minimum:L,maximum:w}=F._zod.bag;if(typeof L==="number")H.minItems=L;if(typeof w==="number")H.maxItems=w;break}case"record":{let H=W;if(H.type="object",this.target==="draft-7"||this.target==="draft-2020-12")H.propertyNames=this.process(B.keyType,{...U,path:[...U.path,"propertyNames"]});H.additionalProperties=this.process(B.valueType,{...U,path:[...U.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let H=W,K=tB(B.entries);if(K.every((q)=>typeof q==="number"))H.type="number";if(K.every((q)=>typeof q==="string"))H.type="string";H.enum=K;break}case"literal":{let H=W,K=[];for(let q of B.values)if(q===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof q==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else K.push(Number(q));else K.push(q);if(K.length===0);else if(K.length===1){let q=K[0];if(H.type=q===null?"null":typeof q,this.target==="draft-4"||this.target==="openapi-3.0")H.enum=[q];else H.const=q}else{if(K.every((q)=>typeof q==="number"))H.type="number";if(K.every((q)=>typeof q==="string"))H.type="string";if(K.every((q)=>typeof q==="boolean"))H.type="string";if(K.every((q)=>q===null))H.type="null";H.enum=K}break}case"file":{let H=W,K={type:"string",format:"binary",contentEncoding:"binary"},{minimum:q,maximum:V,mime:E}=F._zod.bag;if(q!==void 0)K.minLength=q;if(V!==void 0)K.maxLength=V;if(E)if(E.length===1)K.contentMediaType=E[0],Object.assign(H,K);else H.anyOf=E.map((L)=>{return{...K,contentMediaType:L}});else Object.assign(H,K);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let H=this.process(B.innerType,U);if(this.target==="openapi-3.0")Y.ref=B.innerType,W.nullable=!0;else W.anyOf=[H,{type:"null"}];break}case"nonoptional":{this.process(B.innerType,U),Y.ref=B.innerType;break}case"success":{let H=W;H.type="boolean";break}case"default":{this.process(B.innerType,U),Y.ref=B.innerType,W.default=JSON.parse(JSON.stringify(B.defaultValue));break}case"prefault":{if(this.process(B.innerType,U),Y.ref=B.innerType,this.io==="input")W._prefault=JSON.parse(JSON.stringify(B.defaultValue));break}case"catch":{this.process(B.innerType,U),Y.ref=B.innerType;let H;try{H=B.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}W.default=H;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let H=W,K=F._zod.pattern;if(!K)throw Error("Pattern not found in template literal");H.type="string",H.pattern=K.source;break}case"pipe":{let H=this.io==="input"?B.in._zod.def.type==="transform"?B.out:B.in:B.out;this.process(H,U),Y.ref=H;break}case"readonly":{this.process(B.innerType,U),Y.ref=B.innerType,W.readOnly=!0;break}case"promise":{this.process(B.innerType,U),Y.ref=B.innerType;break}case"optional":{this.process(B.innerType,U),Y.ref=B.innerType;break}case"lazy":{let H=F._zod.innerType;this.process(H,U),Y.ref=H;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw Error("Function types cannot be represented in JSON Schema");break}default:}}}let G=this.metadataRegistry.get(F);if(G)Object.assign(Y.schema,G);if(this.io==="input"&&c6(F))delete Y.schema.examples,delete Y.schema.default;if(this.io==="input"&&Y.schema._prefault)($=Y.schema).default??($.default=Y.schema._prefault);return delete Y.schema._prefault,this.seen.get(F).schema}emit(F,A){let $={cycles:A?.cycles??"ref",reused:A?.reused??"inline",external:A?.external??void 0},B=this.seen.get(F);if(!B)throw Error("Unprocessed schema. This is a bug in Zod.");let J=(Z)=>{let U=this.target==="draft-2020-12"?"$defs":"definitions";if($.external){let K=$.external.registry.get(Z[0])?.id,q=$.external.uri??((E)=>E);if(K)return{ref:q(K)};let V=Z[1].defId??Z[1].schema.id??`schema${this.counter++}`;return Z[1].defId=V,{defId:V,ref:`${q("__shared")}#/${U}/${V}`}}if(Z[1]===B)return{ref:"#"};let W=`${"#"}/${U}/`,H=Z[1].schema.id??`__schema${this.counter++}`;return{defId:H,ref:W+H}},X=(Z)=>{if(Z[1].schema.$ref)return;let U=Z[1],{ref:z,defId:W}=J(Z);if(U.def={...U.schema},W)U.defId=W;let H=U.schema;for(let K in H)delete H[K];H.$ref=z};if($.cycles==="throw")for(let Z of this.seen.entries()){let U=Z[1];if(U.cycle)throw Error(`Cycle detected: #/${U.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let Z of this.seen.entries()){let U=Z[1];if(F===Z[0]){X(Z);continue}if($.external){let W=$.external.registry.get(Z[0])?.id;if(F!==Z[0]&&W){X(Z);continue}}if(this.metadataRegistry.get(Z[0])?.id){X(Z);continue}if(U.cycle){X(Z);continue}if(U.count>1){if($.reused==="ref"){X(Z);continue}}}let Y=(Z,U)=>{let z=this.seen.get(Z),W=z.def??z.schema,H={...W};if(z.ref===null)return;let K=z.ref;if(z.ref=null,K){Y(K,U);let q=this.seen.get(K).schema;if(q.$ref&&(U.target==="draft-7"||U.target==="draft-4"||U.target==="openapi-3.0"))W.allOf=W.allOf??[],W.allOf.push(q);else Object.assign(W,q),Object.assign(W,H)}if(!z.isParent)this.override({zodSchema:Z,jsonSchema:W,path:z.path??[]})};for(let Z of[...this.seen.entries()].reverse())Y(Z[0],{target:this.target});let D={};if(this.target==="draft-2020-12")D.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")D.$schema="http://json-schema.org/draft-07/schema#";else if(this.target==="draft-4")D.$schema="http://json-schema.org/draft-04/schema#";else if(this.target==="openapi-3.0");else console.warn(`Invalid target: ${this.target}`);if($.external?.uri){let Z=$.external.registry.get(F)?.id;if(!Z)throw Error("Schema is missing an `id` property");D.$id=$.external.uri(Z)}Object.assign(D,B.def);let G=$.external?.defs??{};for(let Z of this.seen.entries()){let U=Z[1];if(U.def&&U.defId)G[U.defId]=U.def}if($.external);else if(Object.keys(G).length>0)if(this.target==="draft-2020-12")D.$defs=G;else D.definitions=G;try{return JSON.parse(JSON.stringify(D))}catch(Z){throw Error("Error converting schema to JSON.")}}}function xL(F,A){if(F instanceof KJ){let B=new bZ(A),J={};for(let D of F._idmap.entries()){let[G,Z]=D;B.process(Z)}let X={},Y={registry:F,uri:A?.uri,defs:J};for(let D of F._idmap.entries()){let[G,Z]=D;X[G]=B.emit(Z,{...A,external:Y})}if(Object.keys(J).length>0){let D=B.target==="draft-2020-12"?"$defs":"definitions";X.__shared={[D]:J}}return{schemas:X}}let $=new bZ(A);return $.process(F),$.emit(F,A)}function c6(F,A){let $=A??{seen:new Set};if($.seen.has(F))return!1;$.seen.add(F);let J=F._zod.def;switch(J.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return c6(J.element,$);case"object":{for(let X in J.shape)if(c6(J.shape[X],$))return!0;return!1}case"union":{for(let X of J.options)if(c6(X,$))return!0;return!1}case"intersection":return c6(J.left,$)||c6(J.right,$);case"tuple":{for(let X of J.items)if(c6(X,$))return!0;if(J.rest&&c6(J.rest,$))return!0;return!1}case"record":return c6(J.keyType,$)||c6(J.valueType,$);case"map":return c6(J.keyType,$)||c6(J.valueType,$);case"set":return c6(J.valueType,$);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return c6(J.innerType,$);case"lazy":return c6(J.getter(),$);case"default":return c6(J.innerType,$);case"prefault":return c6(J.innerType,$);case"custom":return!1;case"transform":return!0;case"pipe":return c6(J.in,$)||c6(J.out,$);case"success":return!1;case"catch":return!1;case"function":return!1;default:}throw Error(`Unknown schema type: ${J.type}`)}var Bb={};var hZ={};L5(hZ,{time:()=>_L,duration:()=>yL,datetime:()=>bL,date:()=>gL,ZodISOTime:()=>yZ,ZodISODuration:()=>vZ,ZodISODateTime:()=>gZ,ZodISODate:()=>_Z});var gZ=k("ZodISODateTime",(F,A)=>{XV.init(F,A),h0.init(F,A)});function bL(F){return tE(gZ,F)}var _Z=k("ZodISODate",(F,A)=>{YV.init(F,A),h0.init(F,A)});function gL(F){return sE(_Z,F)}var yZ=k("ZodISOTime",(F,A)=>{DV.init(F,A),h0.init(F,A)});function _L(F){return oE(yZ,F)}var vZ=k("ZodISODuration",(F,A)=>{GV.init(F,A),h0.init(F,A)});function yL(F){return eE(vZ,F)}var Xb=(F,A)=>{AJ.init(F,A),F.name="ZodError",Object.defineProperties(F,{format:{value:($)=>BJ(F,$)},flatten:{value:($)=>$J(F,$)},addIssue:{value:($)=>{F.issues.push($),F.message=JSON.stringify(F.issues,AA,2)}},addIssues:{value:($)=>{F.issues.push(...$),F.message=JSON.stringify(F.issues,AA,2)}},isEmpty:{get(){return F.issues.length===0}}})},vL=k("ZodError",Xb),j3=k("ZodError",Xb,{Parent:Error});var hL=JA(j3),mL=XA(j3),dL=YA(j3),cL=DA(j3),lL=aG(j3),pL=nG(j3),iL=rG(j3),aL=tG(j3),nL=sG(j3),rL=oG(j3),tL=eG(j3),sL=FZ(j3);var v1=k("ZodType",(F,A)=>{return j1.init(F,A),F.def=A,F.type=A.type,Object.defineProperty(F,"_def",{value:A}),F.check=(...$)=>{return F.clone(A1.mergeDefs(A,{checks:[...A.checks??[],...$.map((B)=>typeof B==="function"?{_zod:{check:B,def:{check:"custom"},onattach:[]}}:B)]}))},F.clone=($,B)=>$3(F,$,B),F.brand=()=>F,F.register=($,B)=>{return $.add(F,B),F},F.parse=($,B)=>hL(F,$,B,{callee:F.parse}),F.safeParse=($,B)=>dL(F,$,B),F.parseAsync=async($,B)=>mL(F,$,B,{callee:F.parseAsync}),F.safeParseAsync=async($,B)=>cL(F,$,B),F.spa=F.safeParseAsync,F.encode=($,B)=>lL(F,$,B),F.decode=($,B)=>pL(F,$,B),F.encodeAsync=async($,B)=>iL(F,$,B),F.decodeAsync=async($,B)=>aL(F,$,B),F.safeEncode=($,B)=>nL(F,$,B),F.safeDecode=($,B)=>rL(F,$,B),F.safeEncodeAsync=async($,B)=>tL(F,$,B),F.safeDecodeAsync=async($,B)=>sL(F,$,B),F.refine=($,B)=>F.check(pb($,B)),F.superRefine=($)=>F.check(ib($)),F.overwrite=($)=>F.check(X7($)),F.optional=()=>dZ(F),F.nullable=()=>cZ(F),F.nullish=()=>dZ(cZ(F)),F.nonoptional=($)=>fb(F,$),F.array=()=>aZ(F),F.or=($)=>ww([F,$]),F.and=($)=>Lb(F,$),F.transform=($)=>lZ(F,Nw($)),F.default=($)=>Ob(F,$),F.prefault=($)=>ub(F,$),F.catch=($)=>gb(F,$),F.pipe=($)=>lZ(F,$),F.readonly=()=>vb(F),F.describe=($)=>{let B=F.clone();return b2.add(B,{description:$}),B},Object.defineProperty(F,"description",{get(){return b2.get(F)?.description},configurable:!0}),F.meta=(...$)=>{if($.length===0)return b2.get(F);let B=F.clone();return b2.add(B,$[0]),B},F.isOptional=()=>F.safeParse(void 0).success,F.isNullable=()=>F.safeParse(null).success,F}),Fw=k("_ZodString",(F,A)=>{j5.init(F,A),v1.init(F,A);let $=F._zod.bag;F.format=$.format??null,F.minLength=$.minimum??null,F.maxLength=$.maximum??null,F.regex=(...B)=>F.check(EJ(...B)),F.includes=(...B)=>F.check(IJ(...B)),F.startsWith=(...B)=>F.check(CJ(...B)),F.endsWith=(...B)=>F.check(NJ(...B)),F.min=(...B)=>F.check(B8(...B)),F.max=(...B)=>F.check(UA(...B)),F.length=(...B)=>F.check(zA(...B)),F.nonempty=(...B)=>F.check(B8(1,...B)),F.lowercase=(B)=>F.check(LJ(B)),F.uppercase=(B)=>F.check(wJ(B)),F.trim=()=>F.check(jJ()),F.normalize=(...B)=>F.check(RJ(...B)),F.toLowerCase=()=>F.check(MJ()),F.toUpperCase=()=>F.check(TJ())}),OJ=k("ZodString",(F,A)=>{j5.init(F,A),Fw.init(F,A),F.email=($)=>F.check(qZ(Aw,$)),F.url=($)=>F.check(QJ(pZ,$)),F.jwt=($)=>F.check(xZ(Qw,$)),F.emoji=($)=>F.check(wZ($w,$)),F.guid=($)=>F.check(qJ(mZ,$)),F.uuid=($)=>F.check(QZ(D7,$)),F.uuidv4=($)=>F.check(VZ(D7,$)),F.uuidv6=($)=>F.check(EZ(D7,$)),F.uuidv7=($)=>F.check(LZ(D7,$)),F.nanoid=($)=>F.check(IZ(Bw,$)),F.guid=($)=>F.check(qJ(mZ,$)),F.cuid=($)=>F.check(CZ(Jw,$)),F.cuid2=($)=>F.check(NZ(Xw,$)),F.ulid=($)=>F.check(PZ(Yw,$)),F.base64=($)=>F.check(SZ(Hw,$)),F.base64url=($)=>F.check(uZ(Kw,$)),F.xid=($)=>F.check(RZ(Dw,$)),F.ksuid=($)=>F.check(jZ(Gw,$)),F.ipv4=($)=>F.check(MZ(Zw,$)),F.ipv6=($)=>F.check(TZ(Uw,$)),F.cidrv4=($)=>F.check(kZ(zw,$)),F.cidrv6=($)=>F.check(OZ(Ww,$)),F.e164=($)=>F.check(fZ(qw,$)),F.datetime=($)=>F.check(bL($)),F.date=($)=>F.check(gL($)),F.time=($)=>F.check(_L($)),F.duration=($)=>F.check(yL($))});function oL(F){return aE(OJ,F)}var h0=k("ZodStringFormat",(F,A)=>{b0.init(F,A),Fw.init(F,A)}),Aw=k("ZodEmail",(F,A)=>{tQ.init(F,A),h0.init(F,A)});function jK1(F){return qZ(Aw,F)}var mZ=k("ZodGUID",(F,A)=>{nQ.init(F,A),h0.init(F,A)});function MK1(F){return qJ(mZ,F)}var D7=k("ZodUUID",(F,A)=>{rQ.init(F,A),h0.init(F,A)});function TK1(F){return QZ(D7,F)}function kK1(F){return VZ(D7,F)}function OK1(F){return EZ(D7,F)}function SK1(F){return LZ(D7,F)}var pZ=k("ZodURL",(F,A)=>{sQ.init(F,A),h0.init(F,A)});function uK1(F){return QJ(pZ,F)}function fK1(F){return QJ(pZ,{protocol:/^https?$/,hostname:I9.domain,...A1.normalizeParams(F)})}var $w=k("ZodEmoji",(F,A)=>{oQ.init(F,A),h0.init(F,A)});function xK1(F){return wZ($w,F)}var Bw=k("ZodNanoID",(F,A)=>{eQ.init(F,A),h0.init(F,A)});function bK1(F){return IZ(Bw,F)}var Jw=k("ZodCUID",(F,A)=>{FV.init(F,A),h0.init(F,A)});function gK1(F){return CZ(Jw,F)}var Xw=k("ZodCUID2",(F,A)=>{AV.init(F,A),h0.init(F,A)});function _K1(F){return NZ(Xw,F)}var Yw=k("ZodULID",(F,A)=>{$V.init(F,A),h0.init(F,A)});function yK1(F){return PZ(Yw,F)}var Dw=k("ZodXID",(F,A)=>{BV.init(F,A),h0.init(F,A)});function vK1(F){return RZ(Dw,F)}var Gw=k("ZodKSUID",(F,A)=>{JV.init(F,A),h0.init(F,A)});function hK1(F){return jZ(Gw,F)}var Zw=k("ZodIPv4",(F,A)=>{ZV.init(F,A),h0.init(F,A)});function mK1(F){return MZ(Zw,F)}var Uw=k("ZodIPv6",(F,A)=>{UV.init(F,A),h0.init(F,A)});function dK1(F){return TZ(Uw,F)}var zw=k("ZodCIDRv4",(F,A)=>{zV.init(F,A),h0.init(F,A)});function cK1(F){return kZ(zw,F)}var Ww=k("ZodCIDRv6",(F,A)=>{WV.init(F,A),h0.init(F,A)});function lK1(F){return OZ(Ww,F)}var Hw=k("ZodBase64",(F,A)=>{KV.init(F,A),h0.init(F,A)});function pK1(F){return SZ(Hw,F)}var Kw=k("ZodBase64URL",(F,A)=>{qV.init(F,A),h0.init(F,A)});function iK1(F){return uZ(Kw,F)}var qw=k("ZodE164",(F,A)=>{QV.init(F,A),h0.init(F,A)});function aK1(F){return fZ(qw,F)}var Qw=k("ZodJWT",(F,A)=>{VV.init(F,A),h0.init(F,A)});function nK1(F){return xZ(Qw,F)}var SJ=k("ZodCustomStringFormat",(F,A)=>{EV.init(F,A),h0.init(F,A)});function rK1(F,A,$={}){return WA(SJ,F,A,$)}function tK1(F){return WA(SJ,"hostname",I9.hostname,F)}function sK1(F){return WA(SJ,"hex",I9.hex,F)}function oK1(F,A){let $=A?.enc??"hex",B=`${F}_${$}`,J=I9[B];if(!J)throw Error(`Unrecognized hash format: ${B}`);return WA(SJ,B,J,A)}var uJ=k("ZodNumber",(F,A)=>{UZ.init(F,A),v1.init(F,A),F.gt=(B,J)=>F.check(J7(B,J)),F.gte=(B,J)=>F.check(R3(B,J)),F.min=(B,J)=>F.check(R3(B,J)),F.lt=(B,J)=>F.check(B7(B,J)),F.lte=(B,J)=>F.check(C9(B,J)),F.max=(B,J)=>F.check(C9(B,J)),F.int=(B)=>F.check(eL(B)),F.safe=(B)=>F.check(eL(B)),F.positive=(B)=>F.check(J7(0,B)),F.nonnegative=(B)=>F.check(R3(0,B)),F.negative=(B)=>F.check(B7(0,B)),F.nonpositive=(B)=>F.check(C9(0,B)),F.multipleOf=(B,J)=>F.check(M5(B,J)),F.step=(B,J)=>F.check(M5(B,J)),F.finite=()=>F;let $=F._zod.bag;F.minValue=Math.max($.minimum??Number.NEGATIVE_INFINITY,$.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,F.maxValue=Math.min($.maximum??Number.POSITIVE_INFINITY,$.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,F.isInt=($.format??"").includes("int")||Number.isSafeInteger($.multipleOf??0.5),F.isFinite=!0,F.format=$.format??null});function Yb(F){return FL(uJ,F)}var KA=k("ZodNumberFormat",(F,A)=>{LV.init(F,A),uJ.init(F,A)});function eL(F){return $L(KA,F)}function eK1(F){return BL(KA,F)}function Fq1(F){return JL(KA,F)}function Aq1(F){return XL(KA,F)}function $q1(F){return YL(KA,F)}var fJ=k("ZodBoolean",(F,A)=>{YJ.init(F,A),v1.init(F,A)});function Db(F){return DL(fJ,F)}var xJ=k("ZodBigInt",(F,A)=>{zZ.init(F,A),v1.init(F,A),F.gte=(B,J)=>F.check(R3(B,J)),F.min=(B,J)=>F.check(R3(B,J)),F.gt=(B,J)=>F.check(J7(B,J)),F.gte=(B,J)=>F.check(R3(B,J)),F.min=(B,J)=>F.check(R3(B,J)),F.lt=(B,J)=>F.check(B7(B,J)),F.lte=(B,J)=>F.check(C9(B,J)),F.max=(B,J)=>F.check(C9(B,J)),F.positive=(B)=>F.check(J7(BigInt(0),B)),F.negative=(B)=>F.check(B7(BigInt(0),B)),F.nonpositive=(B)=>F.check(C9(BigInt(0),B)),F.nonnegative=(B)=>F.check(R3(BigInt(0),B)),F.multipleOf=(B,J)=>F.check(M5(B,J));let $=F._zod.bag;F.minValue=$.minimum??null,F.maxValue=$.maximum??null,F.format=$.format??null});function Bq1(F){return ZL(xJ,F)}var Vw=k("ZodBigIntFormat",(F,A)=>{wV.init(F,A),xJ.init(F,A)});function Jq1(F){return zL(Vw,F)}function Xq1(F){return WL(Vw,F)}var Gb=k("ZodSymbol",(F,A)=>{IV.init(F,A),v1.init(F,A)});function Yq1(F){return HL(Gb,F)}var Zb=k("ZodUndefined",(F,A)=>{CV.init(F,A),v1.init(F,A)});function Dq1(F){return KL(Zb,F)}var Ub=k("ZodNull",(F,A)=>{NV.init(F,A),v1.init(F,A)});function zb(F){return qL(Ub,F)}var Wb=k("ZodAny",(F,A)=>{PV.init(F,A),v1.init(F,A)});function Gq1(){return QL(Wb)}var Hb=k("ZodUnknown",(F,A)=>{RV.init(F,A),v1.init(F,A)});function HA(){return VL(Hb)}var Kb=k("ZodNever",(F,A)=>{jV.init(F,A),v1.init(F,A)});function Ew(F){return EL(Kb,F)}var qb=k("ZodVoid",(F,A)=>{MV.init(F,A),v1.init(F,A)});function Zq1(F){return LL(qb,F)}var iZ=k("ZodDate",(F,A)=>{TV.init(F,A),v1.init(F,A),F.min=(B,J)=>F.check(R3(B,J)),F.max=(B,J)=>F.check(C9(B,J));let $=F._zod.bag;F.minDate=$.minimum?new Date($.minimum):null,F.maxDate=$.maximum?new Date($.maximum):null});function Uq1(F){return wL(iZ,F)}var Qb=k("ZodArray",(F,A)=>{kV.init(F,A),v1.init(F,A),F.element=A.element,F.min=($,B)=>F.check(B8($,B)),F.nonempty=($)=>F.check(B8(1,$)),F.max=($,B)=>F.check(UA($,B)),F.length=($,B)=>F.check(zA($,B)),F.unwrap=()=>F.element});function aZ(F,A){return TL(Qb,F,A)}function zq1(F){let A=F._zod.def.shape;return Cw(Object.keys(A))}var nZ=k("ZodObject",(F,A)=>{OV.init(F,A),v1.init(F,A),A1.defineLazy(F,"shape",()=>{return A.shape}),F.keyof=()=>Cw(Object.keys(F._zod.def.shape)),F.catchall=($)=>F.clone({...F._zod.def,catchall:$}),F.passthrough=()=>F.clone({...F._zod.def,catchall:HA()}),F.loose=()=>F.clone({...F._zod.def,catchall:HA()}),F.strict=()=>F.clone({...F._zod.def,catchall:Ew()}),F.strip=()=>F.clone({...F._zod.def,catchall:void 0}),F.extend=($)=>{return A1.extend(F,$)},F.safeExtend=($)=>{return A1.safeExtend(F,$)},F.merge=($)=>A1.merge(F,$),F.pick=($)=>A1.pick(F,$),F.omit=($)=>A1.omit(F,$),F.partial=(...$)=>A1.partial(Pw,F,$[0]),F.required=(...$)=>A1.required(Rw,F,$[0])});function Wq1(F,A){let $={type:"object",shape:F??{},...A1.normalizeParams(A)};return new nZ($)}function Hq1(F,A){return new nZ({type:"object",shape:F,catchall:Ew(),...A1.normalizeParams(A)})}function Kq1(F,A){return new nZ({type:"object",shape:F,catchall:HA(),...A1.normalizeParams(A)})}var Lw=k("ZodUnion",(F,A)=>{WZ.init(F,A),v1.init(F,A),F.options=A.options});function ww(F,A){return new Lw({type:"union",options:F,...A1.normalizeParams(A)})}var Vb=k("ZodDiscriminatedUnion",(F,A)=>{Lw.init(F,A),SV.init(F,A)});function qq1(F,A,$){return new Vb({type:"union",options:A,discriminator:F,...A1.normalizeParams($)})}var Eb=k("ZodIntersection",(F,A)=>{uV.init(F,A),v1.init(F,A)});function Lb(F,A){return new Eb({type:"intersection",left:F,right:A})}var wb=k("ZodTuple",(F,A)=>{HZ.init(F,A),v1.init(F,A),F.rest=($)=>F.clone({...F._zod.def,rest:$})});function Ib(F,A,$){let B=A instanceof j1,J=B?$:A;return new wb({type:"tuple",items:F,rest:B?A:null,...A1.normalizeParams(J)})}var Iw=k("ZodRecord",(F,A)=>{fV.init(F,A),v1.init(F,A),F.keyType=A.keyType,F.valueType=A.valueType});function Cb(F,A,$){return new Iw({type:"record",keyType:F,valueType:A,...A1.normalizeParams($)})}function Qq1(F,A,$){let B=$3(F);return B._zod.values=void 0,new Iw({type:"record",keyType:B,valueType:A,...A1.normalizeParams($)})}var Nb=k("ZodMap",(F,A)=>{xV.init(F,A),v1.init(F,A),F.keyType=A.keyType,F.valueType=A.valueType});function Vq1(F,A,$){return new Nb({type:"map",keyType:F,valueType:A,...A1.normalizeParams($)})}var Pb=k("ZodSet",(F,A)=>{bV.init(F,A),v1.init(F,A),F.min=(...$)=>F.check(T5(...$)),F.nonempty=($)=>F.check(T5(1,$)),F.max=(...$)=>F.check(ZA(...$)),F.size=(...$)=>F.check(VJ(...$))});function Eq1(F,A){return new Pb({type:"set",valueType:F,...A1.normalizeParams(A)})}var kJ=k("ZodEnum",(F,A)=>{gV.init(F,A),v1.init(F,A),F.enum=A.entries,F.options=Object.values(A.entries);let $=new Set(Object.keys(A.entries));F.extract=(B,J)=>{let X={};for(let Y of B)if($.has(Y))X[Y]=A.entries[Y];else throw Error(`Key ${Y} not found in enum`);return new kJ({...A,checks:[],...A1.normalizeParams(J),entries:X})},F.exclude=(B,J)=>{let X={...A.entries};for(let Y of B)if($.has(Y))delete X[Y];else throw Error(`Key ${Y} not found in enum`);return new kJ({...A,checks:[],...A1.normalizeParams(J),entries:X})}});function Cw(F,A){let $=Array.isArray(F)?Object.fromEntries(F.map((B)=>[B,B])):F;return new kJ({type:"enum",entries:$,...A1.normalizeParams(A)})}function Lq1(F,A){return new kJ({type:"enum",entries:F,...A1.normalizeParams(A)})}var Rb=k("ZodLiteral",(F,A)=>{_V.init(F,A),v1.init(F,A),F.values=new Set(A.values),Object.defineProperty(F,"value",{get(){if(A.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return A.values[0]}})});function wq1(F,A){return new Rb({type:"literal",values:Array.isArray(F)?F:[F],...A1.normalizeParams(A)})}var jb=k("ZodFile",(F,A)=>{yV.init(F,A),v1.init(F,A),F.min=($,B)=>F.check(T5($,B)),F.max=($,B)=>F.check(ZA($,B)),F.mime=($,B)=>F.check(PJ(Array.isArray($)?$:[$],B))});function Iq1(F){return kL(jb,F)}var Mb=k("ZodTransform",(F,A)=>{vV.init(F,A),v1.init(F,A),F._zod.parse=($,B)=>{if(B.direction==="backward")throw new N5(F.constructor.name);$.addIssue=(X)=>{if(typeof X==="string")$.issues.push(A1.issue(X,$.value,A));else{let Y=X;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=$.value),Y.inst??(Y.inst=F),$.issues.push(A1.issue(Y))}};let J=A.transform($.value,$);if(J instanceof Promise)return J.then((X)=>{return $.value=X,$});return $.value=J,$}});function Nw(F){return new Mb({type:"transform",transform:F})}var Pw=k("ZodOptional",(F,A)=>{hV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function dZ(F){return new Pw({type:"optional",innerType:F})}var Tb=k("ZodNullable",(F,A)=>{mV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function cZ(F){return new Tb({type:"nullable",innerType:F})}function Cq1(F){return dZ(cZ(F))}var kb=k("ZodDefault",(F,A)=>{dV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType,F.removeDefault=F.unwrap});function Ob(F,A){return new kb({type:"default",innerType:F,get defaultValue(){return typeof A==="function"?A():A1.shallowClone(A)}})}var Sb=k("ZodPrefault",(F,A)=>{cV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function ub(F,A){return new Sb({type:"prefault",innerType:F,get defaultValue(){return typeof A==="function"?A():A1.shallowClone(A)}})}var Rw=k("ZodNonOptional",(F,A)=>{lV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function fb(F,A){return new Rw({type:"nonoptional",innerType:F,...A1.normalizeParams(A)})}var xb=k("ZodSuccess",(F,A)=>{pV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function Nq1(F){return new xb({type:"success",innerType:F})}var bb=k("ZodCatch",(F,A)=>{iV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType,F.removeCatch=F.unwrap});function gb(F,A){return new bb({type:"catch",innerType:F,catchValue:typeof A==="function"?A:()=>A})}var _b=k("ZodNaN",(F,A)=>{aV.init(F,A),v1.init(F,A)});function Pq1(F){return CL(_b,F)}var jw=k("ZodPipe",(F,A)=>{nV.init(F,A),v1.init(F,A),F.in=A.in,F.out=A.out});function lZ(F,A){return new jw({type:"pipe",in:F,out:A})}var Mw=k("ZodCodec",(F,A)=>{jw.init(F,A),DJ.init(F,A)});function Rq1(F,A,$){return new Mw({type:"pipe",in:F,out:A,transform:$.decode,reverseTransform:$.encode})}var yb=k("ZodReadonly",(F,A)=>{rV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function vb(F){return new yb({type:"readonly",innerType:F})}var hb=k("ZodTemplateLiteral",(F,A)=>{tV.init(F,A),v1.init(F,A)});function jq1(F,A){return new hb({type:"template_literal",parts:F,...A1.normalizeParams(A)})}var mb=k("ZodLazy",(F,A)=>{eV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.getter()});function db(F){return new mb({type:"lazy",getter:F})}var cb=k("ZodPromise",(F,A)=>{oV.init(F,A),v1.init(F,A),F.unwrap=()=>F._zod.def.innerType});function Mq1(F){return new cb({type:"promise",innerType:F})}var lb=k("ZodFunction",(F,A)=>{sV.init(F,A),v1.init(F,A)});function Tq1(F){return new lb({type:"function",input:Array.isArray(F?.input)?Ib(F?.input):F?.input??aZ(HA()),output:F?.output??HA()})}var rZ=k("ZodCustom",(F,A)=>{FE.init(F,A),v1.init(F,A)});function kq1(F){let A=new n0({check:"custom"});return A._zod.check=F,A}function Oq1(F,A){return OL(rZ,F??(()=>!0),A)}function pb(F,A={}){return SL(rZ,F,A)}function ib(F){return uL(F)}function Sq1(F,A={error:`Input not instance of ${F.name}`}){let $=new rZ({type:"custom",check:"custom",fn:(B)=>B instanceof F,abort:!0,...A1.normalizeParams(A)});return $._zod.bag.Class=F,$}var uq1=(...F)=>fL({Codec:Mw,Boolean:fJ,String:OJ},...F);function fq1(F){let A=db(()=>{return ww([oL(F),Yb(),Db(),zb(),aZ(A),Cb(oL(),A)])});return A}function xq1(F,A){return lZ(Nw(F),A)}var bq1={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function gq1(F){g6({customError:F})}function _q1(){return g6().customError}var Tw;(function(F){})(Tw||(Tw={}));var kw={};L5(kw,{string:()=>yq1,number:()=>vq1,date:()=>dq1,boolean:()=>hq1,bigint:()=>mq1});function yq1(F){return nE(OJ,F)}function vq1(F){return AL(uJ,F)}function hq1(F){return GL(fJ,F)}function mq1(F){return UL(xJ,F)}function dq1(F){return IL(iZ,F)}g6(GJ());var bJ=H0;var cq1=bJ.object({ATLAS_URI:bJ.string(),MONGODB_COMPASS_URI:bJ.string(),PORT_NUMBER:bJ.string()}),ab=cq1.parse(process.env);var Nq=E5(iX(),1),tF=E5(MG(),1),nM0=of(),ef=ab.MONGODB_COMPASS_URI,tM0=new Nq.MongoClient(ef,{serverApi:{version:Nq.ServerApiVersion.v1,strict:!0,deprecationErrors:!0}});async function dD0(){try{console.log("Connecting to mongoDB..... ");let F=performance.now();await tF.default.connect(ef,{serverApi:{version:"1",strict:!0,deprecationErrors:!0},socketTimeoutMS:60000,connectTimeoutMS:30000,serverSelectionTimeoutMS:30000,bufferCommands:!0});let A=performance.now();tF.default.connection.on("connected",()=>{console.log("MongoDB connection established!",ef)}),tF.default.connection.on("error",(B)=>{console.log(`Connection Error : ${B}`)}),tF.default.connection.on("disconnected",()=>{console.log("Mongoose is disconnected from mongodb")}),tF.default.connection.on("reconnected",()=>{console.log("Mongoose RECONNECTED!")});let $=A-F;console.log(`Connected to MongoDB :) ${$} miliseconds`)}catch(F){tF.default.connection.on("disconnected",()=>{console.log("Mongoose is disconnected from mongodb")}),console.log(`${F}`)}}var jz1=dD0;function cD0(){let{process:F,Deno:A}=globalThis;return!(typeof A?.noColor==="boolean"?A.noColor:F!==void 0?"NO_COLOR"in F?.env:!1)}async function Mz1(){let{navigator:F}=globalThis,A="cloudflare:workers";return!(F!==void 0&&F.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import("cloudflare:workers")).env??{})}catch{return!1}})():!cD0())}var lD0=(F)=>{let[A,$]=[",","."];return F.map((J)=>J.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+A)).join($)},pD0=(F)=>{let A=Date.now()-F;return lD0([A<1000?A+"ms":Math.round(A/1000)+"s"])},iD0=async(F)=>{if(await Mz1())switch(F/100|0){case 5:return`\x1B[31m${F}\x1B[0m`;case 4:return`\x1B[33m${F}\x1B[0m`;case 3:return`\x1B[36m${F}\x1B[0m`;case 2:return`\x1B[32m${F}\x1B[0m`}return`${F}`};async function Tz1(F,A,$,B,J=0,X){let Y=A==="<--"?`${A} ${$} ${B}`:`${A} ${$} ${B} ${await iD0(J)} ${X}`;F(Y)}var Fx=(F=console.log)=>{return async function($,B){let{method:J,url:X}=$.req,Y=X.slice(X.indexOf("/",8));await Tz1(F,"<--",J,Y);let D=Date.now();await B(),await Tz1(F,"-->",J,Y,$.res.status,pD0(D))}};class sF{static REGISTER=H0.object({username:H0.string().min(3,{message:"Username is required and minimum of 3 character"}).max(100),password:H0.string().min(3,{message:"Password is required and minimum of 3 character"}).max(100),name:H0.string().min(3,{message:"Name is required and minimum of 3 character"}).max(100)});static LOGIN=H0.object({username:H0.string().min(3).max(100),password:H0.string().min(3).max(100)});static TOKEN=H0.string().min(1);static UPDATE=H0.object({name:H0.string().min(3).max(100).optional(),password:H0.string().min(3).max(100).optional()})}var TG=E5(MG(),1),aD0=new TG.default.Schema({username:{type:String,unique:!0},password:{type:String},name:{type:String},token:{type:String},contacts:[{type:TG.Schema.Types.ObjectId,ref:"Contact"}],contactsDetails:[{firstname:{type:String},lastname:{type:String},phone:{type:String},email:{type:String}}]},{autoCreate:!1,autoIndex:!1});function dB(F){return{name:F.name,username:F.username,token:F.token}}var nD0=TG.default.model("User",aD0),r9=nD0;class r7{static async register(F){let A=sF.REGISTER.safeParse(F);if(A.success===!1){let X={};throw A.error.issues.forEach((Y)=>{if(Y.path.includes("name"))X.name=Y.message;if(Y.path.includes("username"))X.username=Y.message;if(Y.path.includes("password"))X.password=Y.message}),console.log("data not meet requirement. "),new z6(400,{cause:X})}console.log("Form Valid"),console.log("Checking username existance");let $=null;try{$=await r9.findOne({username:F.username}),console.log("Checked user.")}catch(X){console.log("Duplicate found"),console.warn(`${X}`)}if(console.log($),$)throw console.warn("Username Taken."),new z6(400,{cause:"Username is taken"});console.log("User not exist, proceed create");let B=await Bun.password.hash(F.password,{algorithm:"bcrypt",cost:10});F.password=B,console.log("Storing to DB");let J=await r9.create(F);return console.log("Data stored in DB"),dB(J)}static async login(F){if(sF.LOGIN.safeParse(F).success===!1)throw new z6(400,{message:"Invalid form input"});let $=await r9.findOne({username:F.username}),B=crypto.randomUUID();if($)if(await Bun.password.verify(F.password,$.password,"bcrypt"))await r9.findOneAndUpdate({username:F.username},{token:B});else throw console.log("password is not correct"),new z6(401,{message:"Username or password is invalid"});else throw console.log("User not exist"),new z6(401,{message:"Username or password is invalid"});let J=dB($);return J.token=B,console.log(J),J}static async deleteUser(F){console.log("Deleting User");let A=await r9.deleteOne({username:F.username});return console.log("User deleted"),{successStatus:!0,message:"Successful deleted"}}static async get(F){let A=sF.TOKEN.safeParse(F);if(console.log("-------- Check Token Validity------"),A.error)throw new z6(401,{cause:"Unauthorized Access (1)"});let $=await r9.findOne({token:A.data});if(console.log("Respond DB "),console.log($),!$)throw new z6(401,{cause:"Unauthorized Access (2)"});return $}static async update(F,A){if(console.log("----------- checking user request ------------------"),A.name===void 0&&A.password===void 0)throw new z6(400,{message:"Nothing to update"});let $=sF.UPDATE.safeParse(A);if(console.warn($),$.error)throw new z6(401,{message:"Password or name is invalid. Minimum length of password or name must be more than 3 character"});if(A.name)F.name=A.name;else if(A.password)F.password=await Bun.password.hash(A.password,{algorithm:"bcrypt",cost:10});return console.log("Updating user data to MongoDB"),console.log(F),F=await r9.findOneAndUpdate({username:F.username},{$set:{name:F.name,password:F.password}},{new:!0}),console.log("Response from DB"),console.log(F),dB(F)}static async logout(F){if(console.log("Removing user token"),F=await r9.findOneAndUpdate({username:F.username},{$set:{token:null}},{new:!0}),console.log("User token Removed"),!F.token)return!0;else return!1}}var Pq=async(F,A)=>{let $=F.req.header("Authorization");console.log(`User Token ${$}`);let B=await r7.get($);F.set("user",B),console.log(B),await A()};var t7=new C5;t7.post("/api/users",async(F)=>{let A=await F.req.json();console.log(A);let $=await r7.register(A);return F.json({data:$},201)});t7.post("/api/users/login",async(F)=>{let A=await F.req.json(),$=await r7.login(A);return F.json({data:$},200)});t7.post("/api/users/delete",async(F)=>{let A=await F.req.json(),$=await r7.deleteUser(A);return F.json({data:$},200)});t7.use(Pq);t7.get("/api/users/current",async(F)=>{let A=F.get("user");return console.log(A),F.json({payload:dB(A)},200)});t7.patch("api/users/current",async(F)=>{let A=F.get("user"),$=await F.req.json(),B=await r7.update(A,$);return F.json({payload:B})});t7.delete("api/users/current",async(F)=>{let A=F.get("user"),$=await r7.logout(A);return F.json({payload:$})});function kG(F){return{_id:F._id,firstname:F.firstname,lastname:F.lastname,email:F.email,phone:F.phone,user:F.user}}class OG{static CREATE=H0.object({firstname:H0.string().min(1).max(50),lastname:H0.string().min(1).max(50).optional(),email:H0.email().optional(),phone:H0.string().min(1).max(20).optional()});static UPDATE=H0.object({firstname:H0.string().min(1).max(50),lastname:H0.string().min(1).max(50).optional(),email:H0.email().optional(),phone:H0.string().min(1).max(20).optional()});static SEARCH=H0.object({name:H0.string().min(1).optional(),email:H0.email().optional(),phone:H0.string().optional(),page:H0.number().min(1).positive(),size:H0.number().min(1).max(100).positive()})}var SG=E5(MG(),1),rD0=new SG.Schema({firstname:{type:String},lastname:{type:String},email:{type:String},phone:{type:String},user:{type:SG.Schema.Types.ObjectId,ref:"User",required:!0}}),tD0=SG.default.model("Contact",rD0,"contacts"),oF=tD0;class eF{static async create(F,A){console.log("Validating request");let $=OG.CREATE.safeParse(A);if(console.log("Validate Request result"),console.log($),console.log("Request "),console.log(A),$.error)throw new z6(401,{cause:"Invalid Input. First name is required"});console.log("Storing data to DBs");let B=await oF.create({firstname:A.firstname,lastname:A.lastname,email:A.email,phone:A.phone,user:F._id});return console.log("Stored to contact collection "),console.log("Attemtpting to store at user collection"),await r9.findOneAndUpdate({_id:F._id},{$push:{contactsDetails:{firstname:A.firstname,lastname:A.lastname,email:A.email,phone:A.phone}}}),console.log("Stored to user collection "),kG(B)}static async get(F,A){let $=await this.contactMustExists(F,A);return kG($)}static async contactMustExists(F,A){let $=await oF.findById({_id:A});if(console.log(`contact response db ${$}`),!$)throw new z6(404,{message:"Contact is not found"});return $}static async update(F,A){if(OG.UPDATE.safeParse(A).error)throw new z6(404,{cause:"Invalid input"});let B=await oF.findOneAndUpdate({_id:A._id},{$set:{firstname:A.firstname,lastname:A.lastname,email:A.email,phone:A.phone}},{new:!0});return await r9.updateOne({_id:F._id},{$set:{contactsDetails:[{firstname:A.firstname,lastname:A.lastname,email:A.email,phone:A.phone}]}}),kG(B)}static async delete(F,A){let $=await oF.findOneAndDelete({_id:A});return!0}static async search(F,A){if(OG.SEARCH.safeParse(A).error)throw new z6(401,{message:"Invalid input"});let B=[];if(console.log("Filters"),A.name)B.push({$or:[{firstname:{$regex:A.name,$options:"i"}},{lastname:{$regex:A.name,$options:"i"}}]});else B.push();if(A.email)B.push({email:{$regex:A.email,$options:"i"}});else B.push();if(A.phone)B.push({phone:{$regex:A.phone,$options:"i"}});else B.push();console.log(B);let J=A.page-1+A.size;console.log("Sending data to db"),console.log(A.name);let X=await oF.find({user:F._id,$and:B}).exec();console.log(X);let Y=await oF.countDocuments({user:F._id,$and:B});return console.log("Total document"),console.log(Y),{data:X.map((D)=>kG(D)),paging:{current_page:A.page,size:A.size,total_page:Math.ceil(Y/A.size)}}}}var Rq=E5(iX(),1),jq=E5(MG(),1);var Q5=new C5;Q5.use(Pq);Q5.post("/api/contacts",async(F)=>{let A=F.get("user"),$=await F.req.json(),B=await eF.create(A,$);return F.json({payload:B},201)});Q5.get("/api/contacts/:id",async(F)=>{let A=F.get("user");if(console.log("Checking parameter -------------------------------------"),!jq.default.isValidObjectId(F.req.param("id")))throw console.log(`Parameter is ${F.req.param("id")}`),new z6(404,{cause:"Contact not found"});else{let $=new Rq.ObjectId(F.req.param("id"));console.log(`Parameter ${$}`);let B=await eF.get(A,$);return F.json({payload:B},200)}});Q5.put("api/contacts/:id",async(F)=>{let A=F.get("user");if(console.log("Checking parameter -------------------------------------"),!jq.default.isValidObjectId(F.req.param("id")))throw console.log(`Parameter is ${F.req.param("id")}`),new z6(401,{cause:"Contact not found"});else{let $=new Rq.ObjectId(F.req.param("id")),B=await F.req.json();B._id=$;let J=await eF.update(A,B);return F.json({payload:J},200)}});Q5.delete("api/contacts/:id",async(F)=>{let A=F.get("user");if(console.log("Checking parameter -------------------------------------"),!jq.default.isValidObjectId(F.req.param("id")))throw console.log(`Parameter is ${F.req.param("id")}`),new z6(404,{message:"Contact not found"});else{let $=new Rq.ObjectId(F.req.param("id")),B=await eF.delete(A,$);return F.json({payload:B},200)}});Q5.get("api/contacts",async(F)=>{let A=F.get("user"),$={name:F.req.query("name"),email:F.req.query("email"),phone:F.req.query("phone"),page:F.req.query("page")?Number(F.req.query("page")):1,size:F.req.query("size")?Number(F.req.query("size")):10};console.log("Query from URL"),console.log($);let B=await eF.search(A,$);return F.json({response:B},200)});var lT0=of(),cB=new C5;try{jz1()}catch(F){console.log(`${F}`)}cB.use(Fx());cB.route("/",t7);cB.route("/",Q5);cB.use(Fx());cB.onError(async(F,A)=>{if(F instanceof z6)return A.status(F.status),A.json({errors:F.cause});else if(F instanceof vL)return A.status(400),console.log("this code run"),A.json({errors:F.cause});else return A.status(500),A.json({errors:F.message})});var tT0=cB;export{tT0 as default};
